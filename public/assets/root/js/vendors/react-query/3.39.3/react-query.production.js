!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],e):e((t=t||self).ReactQuery={},t.React)}(this,function(t,o){"use strict";var a="default"in o?o.default:o;function i(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}var e=function(){function t(){this.listeners=[]}var e=t.prototype;return e.subscribe=function(t){var e=this,n=t||function(){};return this.listeners.push(n),this.onSubscribe(),function(){e.listeners=e.listeners.filter(function(t){return t!==n}),e.onUnsubscribe()}},e.hasListeners=function(){return 0<this.listeners.length},e.onSubscribe=function(){},e.onUnsubscribe=function(){},t}();function c(){return(c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var u="undefined"==typeof window;function s(){}function n(t){return"number"==typeof t&&0<=t&&t!==1/0}function l(t){return Array.isArray(t)?t:[t]}function h(t,e){return t.filter(function(t){return-1===e.indexOf(t)})}function f(t,e){return Math.max(t+(e||0)-Date.now(),0)}function r(t,e,n){return R(t)?"function"==typeof e?c({},n,{queryKey:t,queryFn:e}):c({},e,{queryKey:t}):t}function d(t,e,n){return R(t)?[c({},e,{queryKey:t}),n]:[t||{},e]}function p(t,e){var n=t.active,r=t.exact,i=t.fetching,u=t.inactive,s=t.predicate,o=t.queryKey,t=t.stale;if(R(o))if(r){if(e.queryHash!==y(o,e.options))return!1}else if(!b(e.queryKey,o))return!1;u=u,n=!0===(n=n)&&!0===u||null==n&&null==u?"all":!1===n&&!1===u?"none":(null!=n?n:!u)?"active":"inactive";if("none"==n)return!1;if("all"!=n){u=e.isActive();if("active"==n&&!u)return!1;if("inactive"==n&&u)return!1}return("boolean"!=typeof t||e.isStale()===t)&&(("boolean"!=typeof i||e.isFetching()===i)&&!(s&&!s(e)))}function v(t,e){var n=t.exact,r=t.fetching,i=t.predicate,t=t.mutationKey;if(R(t)){if(!e.options.mutationKey)return!1;if(n){if(m(e.options.mutationKey)!==m(t))return!1}else if(!b(e.options.mutationKey,t))return!1}return("boolean"!=typeof r||"loading"===e.state.status===r)&&!(i&&!i(e))}function y(t,e){return((null==e?void 0:e.queryKeyHashFn)||m)(t)}function m(t){t=l(t);return t=t,JSON.stringify(t,function(t,n){return g(n)?Object.keys(n).sort().reduce(function(t,e){return t[e]=n[e],t},{}):n})}function b(t,e){return function e(n,r){if(n===r)return!0;if(typeof n!=typeof r)return!1;if(n&&r&&"object"==typeof n&&"object"==typeof r)return!Object.keys(r).some(function(t){return!e(n[t],r[t])});return!1}(l(t),l(e))}function C(t,e){if(t===e)return t;var n=Array.isArray(t)&&Array.isArray(e);if(n||g(t)&&g(e)){for(var r=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),u=i.length,s=n?[]:{},o=0,a=0;a<u;a++){var c=n?a:i[a];s[c]=C(t[c],e[c]),s[c]===t[c]&&o++}return r===u&&o===r?t:s}return e}function g(t){if(O(t)){t=t.constructor;if(void 0===t)return 1;t=t.prototype;return O(t)?!!t.hasOwnProperty("isPrototypeOf"):void 0}}function O(t){return"[object Object]"===Object.prototype.toString.call(t)}function R(t){return"string"==typeof t||Array.isArray(t)}function P(t){Promise.resolve().then(t).catch(function(t){return setTimeout(function(){throw t})})}function q(){if("function"==typeof AbortController)return new AbortController}var Q=new(function(e){function t(){var t=e.call(this)||this;return t.setup=function(t){var e;if(!u&&null!=(e=window)&&e.addEventListener){var n=function(){return t()};return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),function(){window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}},t}i(t,e);var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){var t;this.hasListeners()||(null!=(t=this.cleanup)&&t.call(this),this.cleanup=void 0)},n.setEventListener=function(t){var e,n=this;this.setup=t,null!=(e=this.cleanup)&&e.call(this),this.cleanup=t(function(t){"boolean"==typeof t?n.setFocused(t):n.onFocus()})},n.setFocused=function(t){(this.focused=t)&&this.onFocus()},n.onFocus=function(){this.listeners.forEach(function(t){t()})},n.isFocused=function(){return"boolean"==typeof this.focused?this.focused:"undefined"==typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)},t}(e)),E=new(function(e){function t(){var t=e.call(this)||this;return t.setup=function(t){var e;if(!u&&null!=(e=window)&&e.addEventListener){var n=function(){return t()};return window.addEventListener("online",n,!1),window.addEventListener("offline",n,!1),function(){window.removeEventListener("online",n),window.removeEventListener("offline",n)}}},t}i(t,e);var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){var t;this.hasListeners()||(null!=(t=this.cleanup)&&t.call(this),this.cleanup=void 0)},n.setEventListener=function(t){var e,n=this;this.setup=t,null!=(e=this.cleanup)&&e.call(this),this.cleanup=t(function(t){"boolean"==typeof t?n.setOnline(t):n.onOnline()})},n.setOnline=function(t){(this.online=t)&&this.onOnline()},n.onOnline=function(){this.listeners.forEach(function(t){t()})},n.isOnline=function(){return"boolean"==typeof this.online?this.online:"undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine},t}(e));function S(t){return Math.min(1e3*Math.pow(2,t),3e4)}function F(t){return"function"==typeof(null==t?void 0:t.cancel)}function M(t){this.revert=null==t?void 0:t.revert,this.silent=null==t?void 0:t.silent}function w(t){return t instanceof M}function x(u){var n,s,r,i,o=this,a=!1;function t(t){o.isResolved||(o.isResolved=!0,null!=u.onSuccess&&u.onSuccess(t),null!=s&&s(),r(t))}function c(t){o.isResolved||(o.isResolved=!0,null!=u.onError&&u.onError(t),null!=s&&s(),i(t))}this.abort=u.abort,this.cancel=function(t){return null==n?void 0:n(t)},this.cancelRetry=function(){a=!0},this.continueRetry=function(){a=!1},this.continue=function(){return null==s?void 0:s()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(t,e){r=t,i=e}),function i(){if(!o.isResolved){var e;try{e=u.fn()}catch(t){e=Promise.reject(t)}n=function(t){if(!o.isResolved&&(c(new M(t)),null!=o.abort&&o.abort(),F(e)))try{e.cancel()}catch(t){}},o.isTransportCancelable=F(e),Promise.resolve(e).then(t).catch(function(t){var e,n,r;o.isResolved||(n=null!=(e=u.retry)?e:3,e="function"==typeof(e=null!=(e=u.retryDelay)?e:S)?e(o.failureCount,t):e,n=!0===n||"number"==typeof n&&o.failureCount<n||"function"==typeof n&&n(o.failureCount,t),!a&&n?(o.failureCount++,null!=u.onFail&&u.onFail(o.failureCount,t),r=e,new Promise(function(t){setTimeout(t,r)}).then(function(){if(!Q.isFocused()||!E.isOnline())return new Promise(function(t){s=t,o.isPaused=!0,null!=u.onPause&&u.onPause()}).then(function(){s=void 0,o.isPaused=!1,null!=u.onContinue&&u.onContinue()})}).then(function(){a?c(t):i()})):c(t))})}}()}var A=new(function(){function t(){this.queue=[],this.transactions=0,this.notifyFn=function(t){t()},this.batchNotifyFn=function(t){t()}}var e=t.prototype;return e.batch=function(t){var e;this.transactions++;try{e=t()}finally{this.transactions--,this.transactions||this.flush()}return e},e.schedule=function(t){var e=this;this.transactions?this.queue.push(t):P(function(){e.notifyFn(t)})},e.batchCalls=function(r){var i=this;return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.schedule(function(){r.apply(void 0,e)})}},e.flush=function(){var e=this,t=this.queue;this.queue=[],t.length&&P(function(){e.batchNotifyFn(function(){t.forEach(function(t){e.notifyFn(t)})})})},e.setNotifyFunction=function(t){this.notifyFn=t},e.setBatchNotifyFunction=function(t){this.batchNotifyFn=t},t}()),D=console;var U=function(){function t(t){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.cache=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.initialState=t.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=t.meta,this.scheduleGc()}var e=t.prototype;return e.setOptions=function(t){this.options=c({},this.defaultOptions,t),this.meta=null==t?void 0:t.meta,this.cacheTime=Math.max(this.cacheTime||0,null!=(t=this.options.cacheTime)?t:3e5)},e.setDefaultOptions=function(t){this.defaultOptions=t},e.scheduleGc=function(){var t=this;this.clearGcTimeout(),n(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){t.optionalRemove()},this.cacheTime))},e.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},e.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},e.setData=function(t,e){var n,r,i=this.state.data,t=(r=i,"function"==typeof(n=t)?n(r):n);return null!=(n=(r=this.options).isDataEqual)&&n.call(r,i,t)?t=i:!1!==this.options.structuralSharing&&(t=C(i,t)),this.dispatch({data:t,type:"success",dataUpdatedAt:null==e?void 0:e.updatedAt}),t},e.setState=function(t,e){this.dispatch({type:"setState",state:t,setStateOptions:e})},e.cancel=function(t){var e,n=this.promise;return null!=(e=this.retryer)&&e.cancel(t),n?n.then(s).catch(s):Promise.resolve()},e.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},e.reset=function(){this.destroy(),this.setState(this.initialState)},e.isActive=function(){return this.observers.some(function(t){return!1!==t.options.enabled})},e.isFetching=function(){return this.state.isFetching},e.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(t){return t.getCurrentResult().isStale})},e.isStaleByTime=function(t){return void 0===t&&(t=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!f(this.state.dataUpdatedAt,t)},e.onFocus=function(){var t=this.observers.find(function(t){return t.shouldFetchOnWindowFocus()});t&&t.refetch(),null!=(t=this.retryer)&&t.continue()},e.onOnline=function(){var t=this.observers.find(function(t){return t.shouldFetchOnReconnect()});t&&t.refetch(),null!=(t=this.retryer)&&t.continue()},e.addObserver=function(t){-1===this.observers.indexOf(t)&&(this.observers.push(t),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:t}))},e.removeObserver=function(e){-1!==this.observers.indexOf(e)&&(this.observers=this.observers.filter(function(t){return t!==e}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:e}))},e.getObserversCount=function(){return this.observers.length},e.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},e.fetch=function(t,e){var n,r,i=this;if(this.state.isFetching)if(this.state.dataUpdatedAt&&null!=e&&e.cancelRefetch)this.cancel({silent:!0});else if(this.promise){return null!=(r=this.retryer)&&r.continueRetry(),this.promise}t&&this.setOptions(t),this.options.queryFn||(u=this.observers.find(function(t){return t.options.queryFn}))&&this.setOptions(u.options);var u=l(this.queryKey),s=q(),o={queryKey:u,pageParam:void 0,meta:this.meta};Object.defineProperty(o,"signal",{enumerable:!0,get:function(){if(s)return i.abortSignalConsumed=!0,s.signal}});var a,c,e={fetchOptions:e,options:this.options,queryKey:u,state:this.state,fetchFn:function(){return i.options.queryFn?(i.abortSignalConsumed=!1,i.options.queryFn(o)):Promise.reject("Missing queryFn")},meta:this.meta};return null!=(u=this.options.behavior)&&u.onFetch&&null!=(a=this.options.behavior)&&a.onFetch(e),this.revertState=this.state,this.state.isFetching&&this.state.fetchMeta===(null==(c=e.fetchOptions)?void 0:c.meta)||this.dispatch({type:"fetch",meta:null==(c=e.fetchOptions)?void 0:c.meta}),this.retryer=new x({fn:e.fetchFn,abort:null==s||null==(n=s.abort)?void 0:n.bind(s),onSuccess:function(t){i.setData(t),null!=i.cache.config.onSuccess&&i.cache.config.onSuccess(t,i),0===i.cacheTime&&i.optionalRemove()},onError:function(t){w(t)&&t.silent||i.dispatch({type:"error",error:t}),w(t)||(null!=i.cache.config.onError&&i.cache.config.onError(t,i),D.error(t)),0===i.cacheTime&&i.optionalRemove()},onFail:function(){i.dispatch({type:"failed"})},onPause:function(){i.dispatch({type:"pause"})},onContinue:function(){i.dispatch({type:"continue"})},retry:e.options.retry,retryDelay:e.options.retryDelay}),this.promise=this.retryer.promise,this.promise},e.dispatch=function(e){var t=this;this.state=this.reducer(this.state,e),A.batch(function(){t.observers.forEach(function(t){t.onQueryUpdate(e)}),t.cache.notify({query:t,type:"queryUpdated",action:e})})},e.getDefaultState=function(t){var e="function"==typeof t.initialData?t.initialData():t.initialData,n=void 0!==t.initialData?"function"==typeof t.initialDataUpdatedAt?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0,t=void 0!==e;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?null!=n?n:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:t?"success":"idle"}},e.reducer=function(t,e){var n;switch(e.type){case"failed":return c({},t,{fetchFailureCount:t.fetchFailureCount+1});case"pause":return c({},t,{isPaused:!0});case"continue":return c({},t,{isPaused:!1});case"fetch":return c({},t,{fetchFailureCount:0,fetchMeta:null!=(n=e.meta)?n:null,isFetching:!0,isPaused:!1},!t.dataUpdatedAt&&{error:null,status:"loading"});case"success":return c({},t,{data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:null!=(r=e.dataUpdatedAt)?r:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var r=e.error;return w(r)&&r.revert&&this.revertState?c({},this.revertState):c({},t,{error:r,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return c({},t,{isInvalidated:!0});case"setState":return c({},t,e.state);default:return t}},t}(),I=function(n){function t(t){var e=n.call(this)||this;return e.config=t||{},e.queries=[],e.queriesMap={},e}i(t,n);var e=t.prototype;return e.build=function(t,e,n){var r=e.queryKey,i=null!=(u=e.queryHash)?u:y(r,e),u=this.get(i);return u||(u=new U({cache:this,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r),meta:e.meta}),this.add(u)),u},e.add=function(t){this.queriesMap[t.queryHash]||(this.queriesMap[t.queryHash]=t,this.queries.push(t),this.notify({type:"queryAdded",query:t}))},e.remove=function(e){var t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter(function(t){return t!==e}),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"queryRemoved",query:e}))},e.clear=function(){var e=this;A.batch(function(){e.queries.forEach(function(t){e.remove(t)})})},e.get=function(t){return this.queriesMap[t]},e.getAll=function(){return this.queries},e.find=function(t,e){var n=d(t,e)[0];return void 0===n.exact&&(n.exact=!0),this.queries.find(function(t){return p(n,t)})},e.findAll=function(t,e){var n=d(t,e)[0];return 0<Object.keys(n).length?this.queries.filter(function(t){return p(n,t)}):this.queries},e.notify=function(e){var t=this;A.batch(function(){t.listeners.forEach(function(t){t(e)})})},e.onFocus=function(){var t=this;A.batch(function(){t.queries.forEach(function(t){t.onFocus()})})},e.onOnline=function(){var t=this;A.batch(function(){t.queries.forEach(function(t){t.onOnline()})})},t}(e),T=function(){function t(t){this.options=c({},t.defaultOptions,t.options),this.mutationId=t.mutationId,this.mutationCache=t.mutationCache,this.observers=[],this.state=t.state||K(),this.meta=t.meta}var e=t.prototype;return e.setState=function(t){this.dispatch({type:"setState",state:t})},e.addObserver=function(t){-1===this.observers.indexOf(t)&&this.observers.push(t)},e.removeObserver=function(e){this.observers=this.observers.filter(function(t){return t!==e})},e.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(s).catch(s)):Promise.resolve()},e.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},e.execute=function(){var e,n=this,t="loading"===this.state.status,r=Promise.resolve();return t||(this.dispatch({type:"loading",variables:this.options.variables}),r=r.then(function(){null!=n.mutationCache.config.onMutate&&n.mutationCache.config.onMutate(n.state.variables,n)}).then(function(){return null==n.options.onMutate?void 0:n.options.onMutate(n.state.variables)}).then(function(t){t!==n.state.context&&n.dispatch({type:"loading",context:t,variables:n.state.variables})})),r.then(function(){return n.executeMutation()}).then(function(t){e=t,null!=n.mutationCache.config.onSuccess&&n.mutationCache.config.onSuccess(e,n.state.variables,n.state.context,n)}).then(function(){return null==n.options.onSuccess?void 0:n.options.onSuccess(e,n.state.variables,n.state.context)}).then(function(){return null==n.options.onSettled?void 0:n.options.onSettled(e,null,n.state.variables,n.state.context)}).then(function(){return n.dispatch({type:"success",data:e}),e}).catch(function(t){return null!=n.mutationCache.config.onError&&n.mutationCache.config.onError(t,n.state.variables,n.state.context,n),D.error(t),Promise.resolve().then(function(){return null==n.options.onError?void 0:n.options.onError(t,n.state.variables,n.state.context)}).then(function(){return null==n.options.onSettled?void 0:n.options.onSettled(void 0,t,n.state.variables,n.state.context)}).then(function(){throw n.dispatch({type:"error",error:t}),t})})},e.executeMutation=function(){var t,e=this;return this.retryer=new x({fn:function(){return e.options.mutationFn?e.options.mutationFn(e.state.variables):Promise.reject("No mutationFn found")},onFail:function(){e.dispatch({type:"failed"})},onPause:function(){e.dispatch({type:"pause"})},onContinue:function(){e.dispatch({type:"continue"})},retry:null!=(t=this.options.retry)?t:0,retryDelay:this.options.retryDelay}),this.retryer.promise},e.dispatch=function(e){var t=this;this.state=function(t,e){switch(e.type){case"failed":return c({},t,{failureCount:t.failureCount+1});case"pause":return c({},t,{isPaused:!0});case"continue":return c({},t,{isPaused:!1});case"loading":return c({},t,{context:e.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:e.variables});case"success":return c({},t,{data:e.data,error:null,status:"success",isPaused:!1});case"error":return c({},t,{data:void 0,error:e.error,failureCount:t.failureCount+1,isPaused:!1,status:"error"});case"setState":return c({},t,e.state);default:return t}}(this.state,e),A.batch(function(){t.observers.forEach(function(t){t.onMutationUpdate(e)}),t.mutationCache.notify(t)})},t}();function K(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}var L=function(n){function t(t){var e=n.call(this)||this;return e.config=t||{},e.mutations=[],e.mutationId=0,e}i(t,n);var e=t.prototype;return e.build=function(t,e,n){e=new T({mutationCache:this,mutationId:++this.mutationId,options:t.defaultMutationOptions(e),state:n,defaultOptions:e.mutationKey?t.getMutationDefaults(e.mutationKey):void 0,meta:e.meta});return this.add(e),e},e.add=function(t){this.mutations.push(t),this.notify(t)},e.remove=function(e){this.mutations=this.mutations.filter(function(t){return t!==e}),e.cancel(),this.notify(e)},e.clear=function(){var e=this;A.batch(function(){e.mutations.forEach(function(t){e.remove(t)})})},e.getAll=function(){return this.mutations},e.find=function(e){return void 0===e.exact&&(e.exact=!0),this.mutations.find(function(t){return v(e,t)})},e.findAll=function(e){return this.mutations.filter(function(t){return v(e,t)})},e.notify=function(e){var t=this;A.batch(function(){t.listeners.forEach(function(t){t(e)})})},e.onFocus=function(){this.resumePausedMutations()},e.onOnline=function(){this.resumePausedMutations()},e.resumePausedMutations=function(){var t=this.mutations.filter(function(t){return t.state.isPaused});return A.batch(function(){return t.reduce(function(t,e){return t.then(function(){return e.continue().catch(s)})},Promise.resolve())})},t}(e);function j(){return{onFetch:function(y){y.fetchFn=function(){function u(t,e,n,r){return f=r?[e].concat(f):[].concat(f,[e]),r?[n].concat(t):[].concat(t,[n])}function i(e,t,n,r){if(d)return Promise.reject("Cancelled");if(void 0===n&&!t&&e.length)return Promise.resolve(e);var i={queryKey:y.queryKey,signal:h,pageParam:n,meta:y.meta},t=p(i),i=Promise.resolve(t).then(function(t){return u(e,n,t,r)});return F(t)&&(i.cancel=t.cancel),i}var s,o=null==(t=y.fetchOptions)||null==(e=t.meta)?void 0:e.refetchPage,t=null==(n=y.fetchOptions)||null==(r=n.meta)?void 0:r.fetchMore,e=null==t?void 0:t.pageParam,n="forward"===(null==t?void 0:t.direction),r="backward"===(null==t?void 0:t.direction),a=(null==(t=y.state.data)?void 0:t.pages)||[],c=(null==(t=y.state.data)?void 0:t.pageParams)||[],l=q(),h=null==l?void 0:l.signal,f=c,d=!1,p=y.options.queryFn||function(){return Promise.reject("Missing queryFn")};a.length?n?(n=(t=void 0!==e)?e:H(y.options,a),s=i(a,t,n)):r?(v=(r=void 0!==e)?e:k(y.options,a),s=i(a,r,v,!0)):function(){f=[];var r=void 0===y.options.getNextPageParam,t=!o||!a[0]||o(a[0],0,a);s=t?i([],r,c[0]):Promise.resolve(u([],c[0],a[0]));for(var e=1;e<a.length;e++)!function(n){s=s.then(function(t){if(o&&a[n]&&!o(a[n],n,a))return Promise.resolve(u(t,c[n],a[n]));var e=r?c[n]:H(y.options,t);return i(t,r,e)})}(e)}():s=i([]);var v=s.then(function(t){return{pages:t,pageParams:f}});return v.cancel=function(){d=!0,null!=l&&l.abort(),F(s)&&s.cancel()},v}}}}function H(t,e){return null==t.getNextPageParam?void 0:t.getNextPageParam(e[e.length-1],e)}function k(t,e){return null==t.getPreviousPageParam?void 0:t.getPreviousPageParam(e[0],e)}var N=function(){function t(t){void 0===t&&(t={}),this.queryCache=t.queryCache||new I,this.mutationCache=t.mutationCache||new L,this.defaultOptions=t.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var e=t.prototype;return e.mount=function(){var t=this;this.unsubscribeFocus=Q.subscribe(function(){Q.isFocused()&&E.isOnline()&&(t.mutationCache.onFocus(),t.queryCache.onFocus())}),this.unsubscribeOnline=E.subscribe(function(){Q.isFocused()&&E.isOnline()&&(t.mutationCache.onOnline(),t.queryCache.onOnline())})},e.unmount=function(){var t;null!=(t=this.unsubscribeFocus)&&t.call(this),null!=(t=this.unsubscribeOnline)&&t.call(this)},e.isFetching=function(t,e){e=d(t,e)[0];return e.fetching=!0,this.queryCache.findAll(e).length},e.isMutating=function(t){return this.mutationCache.findAll(c({},t,{fetching:!0})).length},e.getQueryData=function(t,e){return null==(e=this.queryCache.find(t,e))?void 0:e.state.data},e.getQueriesData=function(t){return this.getQueryCache().findAll(t).map(function(t){return[t.queryKey,t.state.data]})},e.setQueryData=function(t,e,n){t=r(t),t=this.defaultQueryOptions(t);return this.queryCache.build(this,t).setData(e,n)},e.setQueriesData=function(t,e,n){var r=this;return A.batch(function(){return r.getQueryCache().findAll(t).map(function(t){t=t.queryKey;return[t,r.setQueryData(t,e,n)]})})},e.getQueryState=function(t,e){return null==(e=this.queryCache.find(t,e))?void 0:e.state},e.removeQueries=function(t,e){var n=d(t,e)[0],r=this.queryCache;A.batch(function(){r.findAll(n).forEach(function(t){r.remove(t)})})},e.resetQueries=function(t,e,n){var r=this,n=d(t,e,n),i=n[0],u=n[1],s=this.queryCache,o=c({},i,{active:!0});return A.batch(function(){return s.findAll(i).forEach(function(t){t.reset()}),r.refetchQueries(o,u)})},e.cancelQueries=function(t,e,n){var r=this,n=d(t,e,n),i=n[0],n=n[1],u=void 0===n?{}:n;void 0===u.revert&&(u.revert=!0);n=A.batch(function(){return r.queryCache.findAll(i).map(function(t){return t.cancel(u)})});return Promise.all(n).then(s).catch(s)},e.invalidateQueries=function(t,e,n){var r=this,n=d(t,e,n),i=n[0],u=n[1],s=c({},i,{active:null==(n=null!=(n=i.refetchActive)?n:i.active)||n,inactive:null!=(n=i.refetchInactive)&&n});return A.batch(function(){return r.queryCache.findAll(i).forEach(function(t){t.invalidate()}),r.refetchQueries(s,u)})},e.refetchQueries=function(t,e,n){var r=this,n=d(t,e,n),i=n[0],u=n[1],n=A.batch(function(){return r.queryCache.findAll(i).map(function(t){return t.fetch(void 0,c({},u,{meta:{refetchPage:null==i?void 0:i.refetchPage}}))})}),n=Promise.all(n).then(s);return null!=u&&u.throwOnError||(n=n.catch(s)),n},e.fetchQuery=function(t,e,n){e=r(t,e,n),n=this.defaultQueryOptions(e);void 0===n.retry&&(n.retry=!1);e=this.queryCache.build(this,n);return e.isStaleByTime(n.staleTime)?e.fetch(n):Promise.resolve(e.state.data)},e.prefetchQuery=function(t,e,n){return this.fetchQuery(t,e,n).then(s).catch(s)},e.fetchInfiniteQuery=function(t,e,n){n=r(t,e,n);return n.behavior=j(),this.fetchQuery(n)},e.prefetchInfiniteQuery=function(t,e,n){return this.fetchInfiniteQuery(t,e,n).then(s).catch(s)},e.cancelMutations=function(){var t=this,e=A.batch(function(){return t.mutationCache.getAll().map(function(t){return t.cancel()})});return Promise.all(e).then(s).catch(s)},e.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},e.executeMutation=function(t){return this.mutationCache.build(this,t).execute()},e.getQueryCache=function(){return this.queryCache},e.getMutationCache=function(){return this.mutationCache},e.getDefaultOptions=function(){return this.defaultOptions},e.setDefaultOptions=function(t){this.defaultOptions=t},e.setQueryDefaults=function(e,t){var n=this.queryDefaults.find(function(t){return m(e)===m(t.queryKey)});n?n.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})},e.getQueryDefaults=function(e){var t;return!e||null==(t=this.queryDefaults.find(function(t){return b(e,t.queryKey)}))?void 0:t.defaultOptions},e.setMutationDefaults=function(e,t){var n=this.mutationDefaults.find(function(t){return m(e)===m(t.mutationKey)});n?n.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})},e.getMutationDefaults=function(e){var t;return!e||null==(t=this.mutationDefaults.find(function(t){return b(e,t.mutationKey)}))?void 0:t.defaultOptions},e.defaultQueryOptions=function(t){if(null!=t&&t._defaulted)return t;t=c({},this.defaultOptions.queries,this.getQueryDefaults(null==t?void 0:t.queryKey),t,{_defaulted:!0});return!t.queryHash&&t.queryKey&&(t.queryHash=y(t.queryKey,t)),t},e.defaultQueryObserverOptions=function(t){return this.defaultQueryOptions(t)},e.defaultMutationOptions=function(t){return null!=t&&t._defaulted?t:c({},this.defaultOptions.mutations,this.getMutationDefaults(null==t?void 0:t.mutationKey),t,{_defaulted:!0})},e.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},t}(),B=function(r){function t(t,e){var n=r.call(this)||this;return n.client=t,n.options=e,n.trackedProps=[],n.selectError=null,n.bindMethods(),n.setOptions(e),n}i(t,r);var e=t.prototype;return e.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},e.onSubscribe=function(){1===this.listeners.length&&(this.currentQuery.addObserver(this),_(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},e.onUnsubscribe=function(){this.listeners.length||this.destroy()},e.shouldFetchOnReconnect=function(){return G(this.currentQuery,this.options,this.options.refetchOnReconnect)},e.shouldFetchOnWindowFocus=function(){return G(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},e.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},e.setOptions=function(t,e){var n=this.options,r=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(t),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();t=this.hasListeners();t&&W(this.currentQuery,r,this.options,n)&&this.executeFetch(),this.updateResult(e),!t||this.currentQuery===r&&this.options.enabled===n.enabled&&this.options.staleTime===n.staleTime||this.updateStaleTimeout();e=this.computeRefetchInterval();!t||this.currentQuery===r&&this.options.enabled===n.enabled&&e===this.currentRefetchInterval||this.updateRefetchInterval(e)},e.getOptimisticResult=function(t){var e=this.client.defaultQueryObserverOptions(t),t=this.client.getQueryCache().build(this.client,e);return this.createResult(t,e)},e.getCurrentResult=function(){return this.currentResult},e.trackResult=function(e,t){function n(t){r.trackedProps.includes(t)||r.trackedProps.push(t)}var r=this,i={};return Object.keys(e).forEach(function(t){Object.defineProperty(i,t,{configurable:!1,enumerable:!0,get:function(){return n(t),e[t]}})}),(t.useErrorBoundary||t.suspense)&&n("error"),i},e.getNextResult=function(i){var t=this;return new Promise(function(e,n){var r=t.subscribe(function(t){t.isFetching||(r(),t.isError&&null!=i&&i.throwOnError?n(t.error):e(t))})})},e.getCurrentQuery=function(){return this.currentQuery},e.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},e.refetch=function(t){return this.fetch(c({},t,{meta:{refetchPage:null==t?void 0:t.refetchPage}}))},e.fetchOptimistic=function(t){var e=this,n=this.client.defaultQueryObserverOptions(t),r=this.client.getQueryCache().build(this.client,n);return r.fetch().then(function(){return e.createResult(r,n)})},e.fetch=function(t){var e=this;return this.executeFetch(t).then(function(){return e.updateResult(),e.currentResult})},e.executeFetch=function(t){this.updateQuery();var e=this.currentQuery.fetch(this.options,t);return null!=t&&t.throwOnError||(e=e.catch(s)),e},e.updateStaleTimeout=function(){var t,e=this;this.clearStaleTimeout(),u||this.currentResult.isStale||!n(this.options.staleTime)||(t=f(this.currentResult.dataUpdatedAt,this.options.staleTime)+1,this.staleTimeoutId=setTimeout(function(){e.currentResult.isStale||e.updateResult()},t))},e.computeRefetchInterval=function(){var t;return"function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(t=this.options.refetchInterval)&&t},e.updateRefetchInterval=function(t){var e=this;this.clearRefetchInterval(),this.currentRefetchInterval=t,!u&&!1!==this.options.enabled&&n(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval(function(){(e.options.refetchIntervalInBackground||Q.isFocused())&&e.executeFetch()},this.currentRefetchInterval))},e.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},e.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},e.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},e.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},e.createResult=function(t,e){var n,r,i,u=this.currentQuery,s=this.options,o=this.currentResult,a=this.currentResultState,c=this.currentResultOptions,l=t!==u,h=l?t.state:this.currentQueryInitialState,f=l?this.currentResult:this.previousQueryResult,d=t.state,p=d.dataUpdatedAt,v=d.error,y=d.errorUpdatedAt,m=d.isFetching,b=d.status,g=!1,O=!1;if(e.optimisticResults&&(l=!(r=this.hasListeners())&&_(t,e),s=r&&W(t,u,e,s),(l||s)&&(m=!0,p||(b="loading"))),e.keepPreviousData&&!d.dataUpdateCount&&null!=f&&f.isSuccess&&"error"!==b)n=f.data,p=f.dataUpdatedAt,b=f.status,g=!0;else if(e.select&&void 0!==d.data)if(o&&d.data===(null==a?void 0:a.data)&&e.select===this.selectFn)n=this.selectResult;else try{this.selectFn=e.select,n=e.select(d.data),!1!==e.structuralSharing&&(n=C(null==o?void 0:o.data,n)),this.selectResult=n,this.selectError=null}catch(t){D.error(t),this.selectError=t}else n=d.data;if(void 0!==e.placeholderData&&void 0===n&&("loading"===b||"idle"===b)){if(null!=o&&o.isPlaceholderData&&e.placeholderData===(null==c?void 0:c.placeholderData))i=o.data;else if(i="function"==typeof e.placeholderData?e.placeholderData():e.placeholderData,e.select&&void 0!==i)try{i=e.select(i),!1!==e.structuralSharing&&(i=C(null==o?void 0:o.data,i)),this.selectError=null}catch(t){D.error(t),this.selectError=t}void 0!==i&&(b="success",n=i,O=!0)}return this.selectError&&(v=this.selectError,n=this.selectResult,y=Date.now(),b="error"),{status:b,isLoading:"loading"===b,isSuccess:"success"===b,isError:"error"===b,isIdle:"idle"===b,data:n,dataUpdatedAt:p,error:v,errorUpdatedAt:y,failureCount:d.fetchFailureCount,errorUpdateCount:d.errorUpdateCount,isFetched:0<d.dataUpdateCount||0<d.errorUpdateCount,isFetchedAfterMount:d.dataUpdateCount>h.dataUpdateCount||d.errorUpdateCount>h.errorUpdateCount,isFetching:m,isRefetching:m&&"loading"!==b,isLoadingError:"error"===b&&0===d.dataUpdatedAt,isPlaceholderData:O,isPreviousData:g,isRefetchError:"error"===b&&0!==d.dataUpdatedAt,isStale:J(t,e),refetch:this.refetch,remove:this.remove}},e.shouldNotifyListeners=function(i,u){if(!u)return!0;var t=this.options,e=t.notifyOnChangeProps,s=t.notifyOnChangePropsExclusions;if(!e&&!s)return!0;if("tracked"===e&&!this.trackedProps.length)return!0;var o="tracked"===e?this.trackedProps:e;return Object.keys(i).some(function(e){var t=i[e]!==u[e],n=null==o?void 0:o.some(function(t){return t===e}),r=null==s?void 0:s.some(function(t){return t===e});return t&&!r&&(!o||n)})},e.updateResult=function(t){var e,n=this.currentResult;this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,function(t,e){if(!(t&&!e||e&&!t)){for(var n in t)if(t[n]!==e[n])return;return 1}}(this.currentResult,n)||(!(e={cache:!0})!==(null==t?void 0:t.listeners)&&this.shouldNotifyListeners(this.currentResult,n)&&(e.listeners=!0),this.notify(c({},e,t)))},e.updateQuery=function(){var t,e=this.client.getQueryCache().build(this.client,this.options);e!==this.currentQuery&&(t=this.currentQuery,this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null!=t&&t.removeObserver(this),e.addObserver(this)))},e.onQueryUpdate=function(t){var e={};"success"===t.type?e.onSuccess=!0:"error"!==t.type||w(t.error)||(e.onError=!0),this.updateResult(e),this.hasListeners()&&this.updateTimers()},e.notify=function(t){var e=this;A.batch(function(){t.onSuccess?(null!=e.options.onSuccess&&e.options.onSuccess(e.currentResult.data),null!=e.options.onSettled&&e.options.onSettled(e.currentResult.data,null)):t.onError&&(null!=e.options.onError&&e.options.onError(e.currentResult.error),null!=e.options.onSettled&&e.options.onSettled(void 0,e.currentResult.error)),t.listeners&&e.listeners.forEach(function(t){t(e.currentResult)}),t.cache&&e.client.getQueryCache().notify({query:e.currentQuery,type:"observerResultsUpdated"})})},t}(e);function _(t,e){return n=t,!(!1===(r=e).enabled||n.state.dataUpdatedAt||"error"===n.state.status&&!1===r.retryOnMount)||0<t.state.dataUpdatedAt&&G(t,e,e.refetchOnMount);var n,r}function G(t,e,n){if(!1===e.enabled)return!1;n="function"==typeof n?n(t):n;return"always"===n||!1!==n&&J(t,e)}function W(t,e,n,r){return!1!==n.enabled&&(t!==e||!1===r.enabled)&&(!n.suspense||"error"!==t.state.status)&&J(t,n)}function J(t,e){return t.isStaleByTime(e.staleTime)}var z=function(r){function t(t,e){var n=r.call(this)||this;return n.client=t,n.queries=[],n.result=[],n.observers=[],n.observersMap={},e&&n.setQueries(e),n}i(t,r);var e=t.prototype;return e.onSubscribe=function(){var n=this;1===this.listeners.length&&this.observers.forEach(function(e){e.subscribe(function(t){n.onUpdate(e,t)})})},e.onUnsubscribe=function(){this.listeners.length||this.destroy()},e.destroy=function(){this.listeners=[],this.observers.forEach(function(t){t.destroy()})},e.setQueries=function(t,e){this.queries=t,this.updateObservers(e)},e.getCurrentResult=function(){return this.result},e.getOptimisticResult=function(t){return this.findMatchingObservers(t).map(function(t){return t.observer.getOptimisticResult(t.defaultedQueryOptions)})},e.findMatchingObservers=function(t){var n=this,r=this.observers,i=t.map(function(t){return n.client.defaultQueryObserverOptions(t)}),u=i.flatMap(function(e){var t=r.find(function(t){return t.options.queryHash===e.queryHash});return null!=t?[{defaultedQueryOptions:e,observer:t}]:[]}),e=u.map(function(t){return t.defaultedQueryOptions.queryHash}),t=i.filter(function(t){return!e.includes(t.queryHash)}),s=r.filter(function(e){return!u.some(function(t){return t.observer===e})}),t=t.map(function(t,e){if(t.keepPreviousData){e=s[e];if(void 0!==e)return{defaultedQueryOptions:t,observer:e}}return{defaultedQueryOptions:t,observer:n.getObserver(t)}});return u.concat(t).sort(function(t,e){return i.indexOf(t.defaultedQueryOptions)-i.indexOf(e.defaultedQueryOptions)})},e.getObserver=function(t){var e=this.client.defaultQueryObserverOptions(t),t=this.observersMap[e.queryHash];return null!=t?t:new B(this.client,e)},e.updateObservers=function(u){var s=this;A.batch(function(){var n=s.observers,t=s.findMatchingObservers(s.queries);t.forEach(function(t){return t.observer.setOptions(t.defaultedQueryOptions,u)});var e=t.map(function(t){return t.observer}),r=Object.fromEntries(e.map(function(t){return[t.options.queryHash,t]})),i=e.map(function(t){return t.getCurrentResult()}),t=e.some(function(t,e){return t!==n[e]});n.length===e.length&&!t||(s.observers=e,s.observersMap=r,s.result=i,s.hasListeners()&&(h(n,e).forEach(function(t){t.destroy()}),h(e,n).forEach(function(e){e.subscribe(function(t){s.onUpdate(e,t)})}),s.notify()))})},e.onUpdate=function(t,e){var n=this.observers.indexOf(t);-1!==n&&(this.result=(t=this.result,n=n,e=e,(t=t.slice(0))[n]=e,t),this.notify())},e.notify=function(){var e=this;A.batch(function(){e.listeners.forEach(function(t){t(e.result)})})},t}(e),V=function(u){function t(t,e){return u.call(this,t,e)||this}i(t,u);var e=t.prototype;return e.bindMethods=function(){u.prototype.bindMethods.call(this),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)},e.setOptions=function(t,e){u.prototype.setOptions.call(this,c({},t,{behavior:j()}),e)},e.getOptimisticResult=function(t){return t.behavior=j(),u.prototype.getOptimisticResult.call(this,t)},e.fetchNextPage=function(t){var e;return this.fetch({cancelRefetch:null==(e=null==t?void 0:t.cancelRefetch)||e,throwOnError:null==t?void 0:t.throwOnError,meta:{fetchMore:{direction:"forward",pageParam:null==t?void 0:t.pageParam}}})},e.fetchPreviousPage=function(t){var e;return this.fetch({cancelRefetch:null==(e=null==t?void 0:t.cancelRefetch)||e,throwOnError:null==t?void 0:t.throwOnError,meta:{fetchMore:{direction:"backward",pageParam:null==t?void 0:t.pageParam}}})},e.createResult=function(t,e){var n,r,i=t.state;return c({},u.prototype.createResult.call(this,t,e),{fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:function(t,e){if(t.getNextPageParam&&Array.isArray(e)){e=H(t,e);return null!=e&&!1!==e}}(e,null==(t=i.data)?void 0:t.pages),hasPreviousPage:function(t,e){if(t.getPreviousPageParam&&Array.isArray(e)){e=k(t,e);return null!=e&&!1!==e}}(e,null==(e=i.data)?void 0:e.pages),isFetchingNextPage:i.isFetching&&"forward"===(null==(e=i.fetchMeta)||null==(n=e.fetchMore)?void 0:n.direction),isFetchingPreviousPage:i.isFetching&&"backward"===(null==(i=i.fetchMeta)||null==(r=i.fetchMore)?void 0:r.direction)})},t}(B),X=function(r){function t(t,e){var n=r.call(this)||this;return n.client=t,n.setOptions(e),n.bindMethods(),n.updateResult(),n}i(t,r);var e=t.prototype;return e.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},e.setOptions=function(t){this.options=this.client.defaultMutationOptions(t)},e.onUnsubscribe=function(){var t;this.listeners.length||null!=(t=this.currentMutation)&&t.removeObserver(this)},e.onMutationUpdate=function(t){this.updateResult();var e={listeners:!0};"success"===t.type?e.onSuccess=!0:"error"===t.type&&(e.onError=!0),this.notify(e)},e.getCurrentResult=function(){return this.currentResult},e.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},e.mutate=function(t,e){return this.mutateOptions=e,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,c({},this.options,{variables:void 0!==t?t:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},e.updateResult=function(){var t=this.currentMutation?this.currentMutation.state:K(),t=c({},t,{isLoading:"loading"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset});this.currentResult=t},e.notify=function(t){var e=this;A.batch(function(){e.mutateOptions&&(t.onSuccess?(null!=e.mutateOptions.onSuccess&&e.mutateOptions.onSuccess(e.currentResult.data,e.currentResult.variables,e.currentResult.context),null!=e.mutateOptions.onSettled&&e.mutateOptions.onSettled(e.currentResult.data,null,e.currentResult.variables,e.currentResult.context)):t.onError&&(null!=e.mutateOptions.onError&&e.mutateOptions.onError(e.currentResult.error,e.currentResult.variables,e.currentResult.context),null!=e.mutateOptions.onSettled&&e.mutateOptions.onSettled(void 0,e.currentResult.error,e.currentResult.variables,e.currentResult.context))),t.listeners&&e.listeners.forEach(function(t){t(e.currentResult)})})},t}(e);function Y(t){return t.state.isPaused}function Z(t){return"success"===t.state.status}function $(r,t,i){var n,u,e;"object"==typeof t&&null!==t&&(n=r.getMutationCache(),u=r.getQueryCache(),e=t.mutations||[],t=t.queries||[],e.forEach(function(t){var e;n.build(r,c({},null==i||null==(e=i.defaultOptions)?void 0:e.mutations,{mutationKey:t.mutationKey}),t.state)}),t.forEach(function(t){var e,n=u.get(t.queryHash);n?n.state.dataUpdatedAt<t.state.dataUpdatedAt&&n.setState(t.state):u.build(r,c({},null==i||null==(e=i.defaultOptions)?void 0:e.queries,{queryKey:t.queryKey,queryHash:t.queryHash}),t.state)}))}var tt=a.createContext(void 0),et=a.createContext(!1);function nt(t){return t&&"undefined"!=typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=tt),window.ReactQueryClientContext):tt}var rt=function(){var t=a.useContext(nt(a.useContext(et)));if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t};function it(){var t=!1;return{clearReset:function(){t=!1},reset:function(){t=!0},isReset:function(){return t}}}function ut(t,e,n,r){e=t.isFetching(e),n!==e&&r(e)}var st=a.createContext(it()),ot=function(){return a.useContext(st)};function at(t,e,n){return"function"==typeof e?e.apply(void 0,n):"boolean"==typeof e?e:t}function ct(t,e){var n=a.useRef(!1),r=a.useState(0)[1],i=rt(),u=ot(),s=i.defaultQueryObserverOptions(t);s.optimisticResults=!0,s.onError&&(s.onError=A.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=A.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=A.batchCalls(s.onSettled)),s.suspense&&("number"!=typeof s.staleTime&&(s.staleTime=1e3),0===s.cacheTime&&(s.cacheTime=1)),(s.suspense||s.useErrorBoundary)&&(u.isReset()||(s.retryOnMount=!1));var o=a.useState(function(){return new e(i,s)})[0],t=o.getOptimisticResult(s);if(a.useEffect(function(){n.current=!0,u.clearReset();var t=o.subscribe(A.batchCalls(function(){n.current&&r(function(t){return t+1})}));return o.updateResult(),function(){n.current=!1,t()}},[u,o]),a.useEffect(function(){o.setOptions(s,{listeners:!1})},[s,o]),s.suspense&&t.isLoading)throw o.fetchOptimistic(s).then(function(t){t=t.data;null!=s.onSuccess&&s.onSuccess(t),null!=s.onSettled&&s.onSettled(t,null)}).catch(function(t){u.clearReset(),null!=s.onError&&s.onError(t),null!=s.onSettled&&s.onSettled(void 0,t)});if(t.isError&&!u.isReset()&&!t.isFetching&&at(s.suspense,s.useErrorBoundary,[t.error,o.getCurrentQuery()]))throw t.error;return"tracked"===s.notifyOnChangeProps&&(t=o.trackResult(t,s)),t}function lt(t,e){var n=rt(),r=a.useRef(e);r.current=e,a.useMemo(function(){t&&$(n,t,r.current)},[n,t])}t.CancelledError=M,t.Hydrate=function(t){var e=t.children,n=t.options;return lt(t.state,n),e},t.InfiniteQueryObserver=V,t.MutationCache=L,t.MutationObserver=X,t.QueriesObserver=z,t.QueryCache=I,t.QueryClient=N,t.QueryClientProvider=function(t){var e=t.client,n=t.contextSharing,r=void 0!==n&&n,n=t.children;a.useEffect(function(){return e.mount(),function(){e.unmount()}},[e]);t=nt(r);return a.createElement(et.Provider,{value:r},a.createElement(t.Provider,{value:e},n))},t.QueryErrorResetBoundary=function(t){var e=t.children,t=a.useMemo(it,[]);return a.createElement(st.Provider,{value:t},"function"==typeof e?e(t):e)},t.QueryObserver=B,t.dehydrate=function(t,e){var n,r,i=[],u=[];return!1!==(null==(e=e||{})?void 0:e.dehydrateMutations)&&(n=e.shouldDehydrateMutation||Y,t.getMutationCache().getAll().forEach(function(t){n(t)&&i.push({mutationKey:(t=t).options.mutationKey,state:t.state})})),!1!==(null==e?void 0:e.dehydrateQueries)&&(r=e.shouldDehydrateQuery||Z,t.getQueryCache().getAll().forEach(function(t){r(t)&&u.push({state:(t=t).state,queryKey:t.queryKey,queryHash:t.queryHash})})),{mutations:i,queries:u}},t.focusManager=Q,t.hashQueryKey=m,t.hydrate=$,t.isCancelledError=w,t.isError=function(t){return t instanceof Error},t.notifyManager=A,t.onlineManager=E,t.setLogger=function(t){D=t},t.useHydrate=lt,t.useInfiniteQuery=function(t,e,n){return ct(r(t,e,n),V)},t.useIsFetching=function(t,e){var n=a.useRef(!1),r=rt(),i=d(t,e)[0],e=(t=a.useState(r.isFetching(i)))[0],u=t[1],s=a.useRef(i);s.current=i;var o=a.useRef(e);return o.current=e,a.useEffect(function(){n.current=!0,ut(r,s.current,o.current,u);var t=r.getQueryCache().subscribe(A.batchCalls(function(){n.current&&ut(r,s.current,o.current,u)}));return function(){n.current=!1,t()}},[r]),e},t.useIsMutating=function(t,e){var n=a.useRef(!1),t=(i=e,R(e=t)?c({},i,{mutationKey:e}):e),r=rt(),i=a.useState(r.isMutating(t)),e=i[0],u=i[1],s=a.useRef(t);s.current=t;var o=a.useRef(e);return o.current=e,a.useEffect(function(){n.current=!0;var t=r.getMutationCache().subscribe(A.batchCalls(function(){var t;n.current&&(t=r.isMutating(s.current),o.current!==t&&u(t))}));return function(){n.current=!1,t()}},[r]),e},t.useMutation=function(t,e,n){var r=a.useRef(!1),i=a.useState(0)[1],e=(e=e,n=n,R(t=t)?"function"==typeof e?c({},n,{mutationKey:t,mutationFn:e}):c({},e,{mutationKey:t}):"function"==typeof t?c({},e,{mutationFn:t}):c({},t)),t=rt(),u=a.useRef();if(u.current?u.current.setOptions(e):u.current=new X(t,e),t=u.current.getCurrentResult(),a.useEffect(function(){r.current=!0;var t=u.current.subscribe(A.batchCalls(function(){r.current&&i(function(t){return t+1})}));return function(){r.current=!1,t()}},[]),e=a.useCallback(function(t,e){u.current.mutate(t,e).catch(s)},[]),t.error&&at(void 0,u.current.options.useErrorBoundary,[t.error]))throw t.error;return c({},t,{mutate:e,mutateAsync:t.mutate})},t.useQueries=function(t){var e=a.useRef(!1),n=a.useState(0)[1],r=rt(),i=o.useMemo(function(){return t.map(function(t){t=r.defaultQueryObserverOptions(t);return t.optimisticResults=!0,t})},[t,r]),u=a.useState(function(){return new z(r,i)})[0],s=u.getOptimisticResult(i);return a.useEffect(function(){e.current=!0;var t=u.subscribe(A.batchCalls(function(){e.current&&n(function(t){return t+1})}));return function(){e.current=!1,t()}},[u]),a.useEffect(function(){u.setQueries(i,{listeners:!1})},[i,u]),s},t.useQuery=function(t,e,n){return ct(r(t,e,n),B)},t.useQueryClient=rt,t.useQueryErrorResetBoundary=ot,Object.defineProperty(t,"__esModule",{value:!0})});
