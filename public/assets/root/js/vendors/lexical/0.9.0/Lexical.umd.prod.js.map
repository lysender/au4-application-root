{"mappings":"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,EAAe,EAAO,QAAS,eAAgB,UAAY,CAAE,MAAO,KAA8C,SAAU,EAAG,CAAE,MAAO,IAA4C,IACpL,EAAe,EAAO,QAAS,gBAAiB,UAAY,CAAE,MAAO,KAA8C,SAAU,EAAG,CAAE,MAAO,IAA4C,IACrL,EAAe,EAAO,QAAS,eAAgB,UAAY,CAAE,MAAO,KAA8C,SAAU,EAAG,CAAE,MAAO,IAA4C,IACpL,EAAe,EAAO,QAAS,0BAA2B,UAAY,CAAE,MAAO,KAA8C,SAAU,EAAG,CAAE,MAAO,IAA4C,IAM3L,GAAI,IACJ,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAQA,WAA6C,EAAM,CACnD,MAAO,CACH,KAAM,GAGd,KAAM,IAAiD,EAAoC,4BACrF,GAAsC,EAAoC,iBAC1E,GAAiD,EAAoC,4BACrF,GAAkD,EAAoC,6BACtF,GAAiD,EAAoC,4BACrF,GAA0D,EAAoC,qCAC9F,GAAsC,EAAoC,iBAC1E,GAA4C,EAAoC,uBAChF,GAA4C,EAAoC,uBAChF,GAA4C,EAAoC,uBAChF,GAA4C,EAAoC,uBAChF,GAAqC,EAAoC,gBACzE,GAAqC,EAAoC,gBACzE,GAAyC,EAAoC,mBAC7E,GAAgD,EAAoC,2BACpF,GAAoC,EAAoC,eACxE,GAA+C,EAAoC,0BACnF,GAAsC,EAAoC,iBAC1E,GAA6C,EAAoC,wBACjF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","sources":["dist/Lexical.umd.prod.js"],"sourcesContent":["function $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n$parcel$export(module.exports, \"$addUpdateTag\", function () { return $03df355ea183d08a$export$24cab2f466b76c04; }, function (v) { return $03df355ea183d08a$export$24cab2f466b76c04 = v; });\n$parcel$export(module.exports, \"$applyNodeReplacement\", function () { return $03df355ea183d08a$export$2f5beb31df92ea57; }, function (v) { return $03df355ea183d08a$export$2f5beb31df92ea57 = v; });\n$parcel$export(module.exports, \"$copyNode\", function () { return $03df355ea183d08a$export$def73b17b22438e7; }, function (v) { return $03df355ea183d08a$export$def73b17b22438e7 = v; });\n$parcel$export(module.exports, \"$createLineBreakNode\", function () { return $03df355ea183d08a$export$4ccaf7d0d16ab4c; }, function (v) { return $03df355ea183d08a$export$4ccaf7d0d16ab4c = v; });\n$parcel$export(module.exports, \"$createNodeSelection\", function () { return $03df355ea183d08a$export$f8cd0c3f35d1a61c; }, function (v) { return $03df355ea183d08a$export$f8cd0c3f35d1a61c = v; });\n$parcel$export(module.exports, \"$createParagraphNode\", function () { return $03df355ea183d08a$export$7f0c05ffb7ced90d; }, function (v) { return $03df355ea183d08a$export$7f0c05ffb7ced90d = v; });\n$parcel$export(module.exports, \"$createRangeSelection\", function () { return $03df355ea183d08a$export$1ccc217b9831b072; }, function (v) { return $03df355ea183d08a$export$1ccc217b9831b072 = v; });\n$parcel$export(module.exports, \"$createTextNode\", function () { return $03df355ea183d08a$export$2785f39dcdec0078; }, function (v) { return $03df355ea183d08a$export$2785f39dcdec0078 = v; });\n$parcel$export(module.exports, \"$getAdjacentNode\", function () { return $03df355ea183d08a$export$c4b907be1879d8c1; }, function (v) { return $03df355ea183d08a$export$c4b907be1879d8c1 = v; });\n$parcel$export(module.exports, \"$getNearestNodeFromDOMNode\", function () { return $03df355ea183d08a$export$fef265f0d2fcffdd; }, function (v) { return $03df355ea183d08a$export$fef265f0d2fcffdd = v; });\n$parcel$export(module.exports, \"$getNearestRootOrShadowRoot\", function () { return $03df355ea183d08a$export$6f13c476561e4734; }, function (v) { return $03df355ea183d08a$export$6f13c476561e4734 = v; });\n$parcel$export(module.exports, \"$getNodeByKey\", function () { return $03df355ea183d08a$export$e725f93d4d48c6d8; }, function (v) { return $03df355ea183d08a$export$e725f93d4d48c6d8 = v; });\n$parcel$export(module.exports, \"$getPreviousSelection\", function () { return $03df355ea183d08a$export$846e9407a8b5d98c; }, function (v) { return $03df355ea183d08a$export$846e9407a8b5d98c = v; });\n$parcel$export(module.exports, \"$getRoot\", function () { return $03df355ea183d08a$export$8d83ea843c4eea9a; }, function (v) { return $03df355ea183d08a$export$8d83ea843c4eea9a = v; });\n$parcel$export(module.exports, \"$getSelection\", function () { return $03df355ea183d08a$export$63a3201b3a5c7d90; }, function (v) { return $03df355ea183d08a$export$63a3201b3a5c7d90 = v; });\n$parcel$export(module.exports, \"$getTextContent\", function () { return $03df355ea183d08a$export$2d96f9a07231d1b9; }, function (v) { return $03df355ea183d08a$export$2d96f9a07231d1b9 = v; });\n$parcel$export(module.exports, \"$hasAncestor\", function () { return $03df355ea183d08a$export$e3d4b782f65c81f1; }, function (v) { return $03df355ea183d08a$export$e3d4b782f65c81f1 = v; });\n$parcel$export(module.exports, \"$insertNodes\", function () { return $03df355ea183d08a$export$d773017360b45449; }, function (v) { return $03df355ea183d08a$export$d773017360b45449 = v; });\n$parcel$export(module.exports, \"$isDecoratorNode\", function () { return $03df355ea183d08a$export$60aa03725ce41b1c; }, function (v) { return $03df355ea183d08a$export$60aa03725ce41b1c = v; });\n$parcel$export(module.exports, \"$isElementNode\", function () { return $03df355ea183d08a$export$923a058ef54437a4; }, function (v) { return $03df355ea183d08a$export$923a058ef54437a4 = v; });\n$parcel$export(module.exports, \"$isInlineElementOrDecoratorNode\", function () { return $03df355ea183d08a$export$a78813a4e8e8b9dd; }, function (v) { return $03df355ea183d08a$export$a78813a4e8e8b9dd = v; });\n$parcel$export(module.exports, \"$isLeafNode\", function () { return $03df355ea183d08a$export$8d016e0592201ace; }, function (v) { return $03df355ea183d08a$export$8d016e0592201ace = v; });\n$parcel$export(module.exports, \"$isLineBreakNode\", function () { return $03df355ea183d08a$export$b16330e40aa25c4e; }, function (v) { return $03df355ea183d08a$export$b16330e40aa25c4e = v; });\n$parcel$export(module.exports, \"$isNodeSelection\", function () { return $03df355ea183d08a$export$7257e4181651a7c3; }, function (v) { return $03df355ea183d08a$export$7257e4181651a7c3 = v; });\n$parcel$export(module.exports, \"$isParagraphNode\", function () { return $03df355ea183d08a$export$1fdda795300c79c6; }, function (v) { return $03df355ea183d08a$export$1fdda795300c79c6 = v; });\n$parcel$export(module.exports, \"$isRangeSelection\", function () { return $03df355ea183d08a$export$181b63acea8a0224; }, function (v) { return $03df355ea183d08a$export$181b63acea8a0224 = v; });\n$parcel$export(module.exports, \"$isRootNode\", function () { return $03df355ea183d08a$export$5b29ca560c2fedab; }, function (v) { return $03df355ea183d08a$export$5b29ca560c2fedab = v; });\n$parcel$export(module.exports, \"$isRootOrShadowRoot\", function () { return $03df355ea183d08a$export$6f851a24c61146af; }, function (v) { return $03df355ea183d08a$export$6f851a24c61146af = v; });\n$parcel$export(module.exports, \"$isTextNode\", function () { return $03df355ea183d08a$export$471953706258be2b; }, function (v) { return $03df355ea183d08a$export$471953706258be2b = v; });\n$parcel$export(module.exports, \"$nodesOfType\", function () { return $03df355ea183d08a$export$ac6fed8d7d40e66c; }, function (v) { return $03df355ea183d08a$export$ac6fed8d7d40e66c = v; });\n$parcel$export(module.exports, \"$normalizeSelection__EXPERIMENTAL\", function () { return $03df355ea183d08a$export$db10bc6ba67ffcb5; }, function (v) { return $03df355ea183d08a$export$db10bc6ba67ffcb5 = v; });\n$parcel$export(module.exports, \"$parseSerializedNode\", function () { return $03df355ea183d08a$export$e1d3a194df5be556; }, function (v) { return $03df355ea183d08a$export$e1d3a194df5be556 = v; });\n$parcel$export(module.exports, \"$setCompositionKey\", function () { return $03df355ea183d08a$export$ea25f5ef71f2d042; }, function (v) { return $03df355ea183d08a$export$ea25f5ef71f2d042 = v; });\n$parcel$export(module.exports, \"$setSelection\", function () { return $03df355ea183d08a$export$2aad78c37810bca9; }, function (v) { return $03df355ea183d08a$export$2aad78c37810bca9 = v; });\n$parcel$export(module.exports, \"$splitNode\", function () { return $03df355ea183d08a$export$cc2d53c74c1fb2b2; }, function (v) { return $03df355ea183d08a$export$cc2d53c74c1fb2b2 = v; });\n$parcel$export(module.exports, \"BLUR_COMMAND\", function () { return $03df355ea183d08a$export$4b6d457d076906ac; }, function (v) { return $03df355ea183d08a$export$4b6d457d076906ac = v; });\n$parcel$export(module.exports, \"CAN_REDO_COMMAND\", function () { return $03df355ea183d08a$export$e36aacf84f559bb3; }, function (v) { return $03df355ea183d08a$export$e36aacf84f559bb3 = v; });\n$parcel$export(module.exports, \"CAN_UNDO_COMMAND\", function () { return $03df355ea183d08a$export$9fd9dd31dd6ebdf5; }, function (v) { return $03df355ea183d08a$export$9fd9dd31dd6ebdf5 = v; });\n$parcel$export(module.exports, \"CLEAR_EDITOR_COMMAND\", function () { return $03df355ea183d08a$export$4926ce1a5702fdc7; }, function (v) { return $03df355ea183d08a$export$4926ce1a5702fdc7 = v; });\n$parcel$export(module.exports, \"CLEAR_HISTORY_COMMAND\", function () { return $03df355ea183d08a$export$d3f69a65bbe7edc; }, function (v) { return $03df355ea183d08a$export$d3f69a65bbe7edc = v; });\n$parcel$export(module.exports, \"CLICK_COMMAND\", function () { return $03df355ea183d08a$export$c1a2de6c823e5f82; }, function (v) { return $03df355ea183d08a$export$c1a2de6c823e5f82 = v; });\n$parcel$export(module.exports, \"COMMAND_PRIORITY_CRITICAL\", function () { return $03df355ea183d08a$export$6afdf194f304e546; }, function (v) { return $03df355ea183d08a$export$6afdf194f304e546 = v; });\n$parcel$export(module.exports, \"COMMAND_PRIORITY_EDITOR\", function () { return $03df355ea183d08a$export$11c61e12af5e1f41; }, function (v) { return $03df355ea183d08a$export$11c61e12af5e1f41 = v; });\n$parcel$export(module.exports, \"COMMAND_PRIORITY_HIGH\", function () { return $03df355ea183d08a$export$e8fb7042985cd2e9; }, function (v) { return $03df355ea183d08a$export$e8fb7042985cd2e9 = v; });\n$parcel$export(module.exports, \"COMMAND_PRIORITY_LOW\", function () { return $03df355ea183d08a$export$1d1358fe8b5bfab4; }, function (v) { return $03df355ea183d08a$export$1d1358fe8b5bfab4 = v; });\n$parcel$export(module.exports, \"COMMAND_PRIORITY_NORMAL\", function () { return $03df355ea183d08a$export$7bb13e375de35064; }, function (v) { return $03df355ea183d08a$export$7bb13e375de35064 = v; });\n$parcel$export(module.exports, \"CONTROLLED_TEXT_INSERTION_COMMAND\", function () { return $03df355ea183d08a$export$6f67c758bb657857; }, function (v) { return $03df355ea183d08a$export$6f67c758bb657857 = v; });\n$parcel$export(module.exports, \"COPY_COMMAND\", function () { return $03df355ea183d08a$export$3435fcfb1f59ef96; }, function (v) { return $03df355ea183d08a$export$3435fcfb1f59ef96 = v; });\n$parcel$export(module.exports, \"CUT_COMMAND\", function () { return $03df355ea183d08a$export$4dc8a35a083beec4; }, function (v) { return $03df355ea183d08a$export$4dc8a35a083beec4 = v; });\n$parcel$export(module.exports, \"DELETE_CHARACTER_COMMAND\", function () { return $03df355ea183d08a$export$35595bf6d7e36fd5; }, function (v) { return $03df355ea183d08a$export$35595bf6d7e36fd5 = v; });\n$parcel$export(module.exports, \"DELETE_LINE_COMMAND\", function () { return $03df355ea183d08a$export$d77fad8fb8747fd; }, function (v) { return $03df355ea183d08a$export$d77fad8fb8747fd = v; });\n$parcel$export(module.exports, \"DELETE_WORD_COMMAND\", function () { return $03df355ea183d08a$export$8e315b175631384c; }, function (v) { return $03df355ea183d08a$export$8e315b175631384c = v; });\n$parcel$export(module.exports, \"DEPRECATED_$createGridSelection\", function () { return $03df355ea183d08a$export$3c62f6ea1bcc0126; }, function (v) { return $03df355ea183d08a$export$3c62f6ea1bcc0126 = v; });\n$parcel$export(module.exports, \"DEPRECATED_$isGridCellNode\", function () { return $03df355ea183d08a$export$512956df40f3b40e; }, function (v) { return $03df355ea183d08a$export$512956df40f3b40e = v; });\n$parcel$export(module.exports, \"DEPRECATED_$isGridNode\", function () { return $03df355ea183d08a$export$5f4fd2bb79122677; }, function (v) { return $03df355ea183d08a$export$5f4fd2bb79122677 = v; });\n$parcel$export(module.exports, \"DEPRECATED_$isGridRowNode\", function () { return $03df355ea183d08a$export$6409391dce4c0f48; }, function (v) { return $03df355ea183d08a$export$6409391dce4c0f48 = v; });\n$parcel$export(module.exports, \"DEPRECATED_$isGridSelection\", function () { return $03df355ea183d08a$export$d3f36a5fb5c9efe5; }, function (v) { return $03df355ea183d08a$export$d3f36a5fb5c9efe5 = v; });\n$parcel$export(module.exports, \"DEPRECATED_GridCellNode\", function () { return $03df355ea183d08a$export$e284ef4eccc325c5; }, function (v) { return $03df355ea183d08a$export$e284ef4eccc325c5 = v; });\n$parcel$export(module.exports, \"DEPRECATED_GridNode\", function () { return $03df355ea183d08a$export$5627752ddf7eed41; }, function (v) { return $03df355ea183d08a$export$5627752ddf7eed41 = v; });\n$parcel$export(module.exports, \"DEPRECATED_GridRowNode\", function () { return $03df355ea183d08a$export$8c09d9a078ea3c2f; }, function (v) { return $03df355ea183d08a$export$8c09d9a078ea3c2f = v; });\n$parcel$export(module.exports, \"DRAGEND_COMMAND\", function () { return $03df355ea183d08a$export$ffbd838cf75d7d8e; }, function (v) { return $03df355ea183d08a$export$ffbd838cf75d7d8e = v; });\n$parcel$export(module.exports, \"DRAGOVER_COMMAND\", function () { return $03df355ea183d08a$export$b62c1cce98fa7223; }, function (v) { return $03df355ea183d08a$export$b62c1cce98fa7223 = v; });\n$parcel$export(module.exports, \"DRAGSTART_COMMAND\", function () { return $03df355ea183d08a$export$2e0fd45fde1da719; }, function (v) { return $03df355ea183d08a$export$2e0fd45fde1da719 = v; });\n$parcel$export(module.exports, \"DROP_COMMAND\", function () { return $03df355ea183d08a$export$eac1e4b16b80d3ea; }, function (v) { return $03df355ea183d08a$export$eac1e4b16b80d3ea = v; });\n$parcel$export(module.exports, \"DecoratorNode\", function () { return $03df355ea183d08a$export$8244b9efe04488e; }, function (v) { return $03df355ea183d08a$export$8244b9efe04488e = v; });\n$parcel$export(module.exports, \"ElementNode\", function () { return $03df355ea183d08a$export$dc064fe9e59310fd; }, function (v) { return $03df355ea183d08a$export$dc064fe9e59310fd = v; });\n$parcel$export(module.exports, \"FOCUS_COMMAND\", function () { return $03df355ea183d08a$export$cafe35f35e77bf56; }, function (v) { return $03df355ea183d08a$export$cafe35f35e77bf56 = v; });\n$parcel$export(module.exports, \"FORMAT_ELEMENT_COMMAND\", function () { return $03df355ea183d08a$export$d394dc6514823b18; }, function (v) { return $03df355ea183d08a$export$d394dc6514823b18 = v; });\n$parcel$export(module.exports, \"FORMAT_TEXT_COMMAND\", function () { return $03df355ea183d08a$export$85443a1a9543f043; }, function (v) { return $03df355ea183d08a$export$85443a1a9543f043 = v; });\n$parcel$export(module.exports, \"INDENT_CONTENT_COMMAND\", function () { return $03df355ea183d08a$export$2f74f6a2d927e6bd; }, function (v) { return $03df355ea183d08a$export$2f74f6a2d927e6bd = v; });\n$parcel$export(module.exports, \"INSERT_LINE_BREAK_COMMAND\", function () { return $03df355ea183d08a$export$64e35ce26e025724; }, function (v) { return $03df355ea183d08a$export$64e35ce26e025724 = v; });\n$parcel$export(module.exports, \"INSERT_PARAGRAPH_COMMAND\", function () { return $03df355ea183d08a$export$24f4fea65b096b4; }, function (v) { return $03df355ea183d08a$export$24f4fea65b096b4 = v; });\n$parcel$export(module.exports, \"KEY_ARROW_DOWN_COMMAND\", function () { return $03df355ea183d08a$export$baa60daa2ca402b3; }, function (v) { return $03df355ea183d08a$export$baa60daa2ca402b3 = v; });\n$parcel$export(module.exports, \"KEY_ARROW_LEFT_COMMAND\", function () { return $03df355ea183d08a$export$7525f8f8ab44508; }, function (v) { return $03df355ea183d08a$export$7525f8f8ab44508 = v; });\n$parcel$export(module.exports, \"KEY_ARROW_RIGHT_COMMAND\", function () { return $03df355ea183d08a$export$217ec2281ac1c53b; }, function (v) { return $03df355ea183d08a$export$217ec2281ac1c53b = v; });\n$parcel$export(module.exports, \"KEY_ARROW_UP_COMMAND\", function () { return $03df355ea183d08a$export$7833c2a33ae81d3d; }, function (v) { return $03df355ea183d08a$export$7833c2a33ae81d3d = v; });\n$parcel$export(module.exports, \"KEY_BACKSPACE_COMMAND\", function () { return $03df355ea183d08a$export$24bbba9bfa830f78; }, function (v) { return $03df355ea183d08a$export$24bbba9bfa830f78 = v; });\n$parcel$export(module.exports, \"KEY_DELETE_COMMAND\", function () { return $03df355ea183d08a$export$13a0e72b5c0146bb; }, function (v) { return $03df355ea183d08a$export$13a0e72b5c0146bb = v; });\n$parcel$export(module.exports, \"KEY_DOWN_COMMAND\", function () { return $03df355ea183d08a$export$61973214e0e18936; }, function (v) { return $03df355ea183d08a$export$61973214e0e18936 = v; });\n$parcel$export(module.exports, \"KEY_ENTER_COMMAND\", function () { return $03df355ea183d08a$export$2cdb7cdd6fccb293; }, function (v) { return $03df355ea183d08a$export$2cdb7cdd6fccb293 = v; });\n$parcel$export(module.exports, \"KEY_ESCAPE_COMMAND\", function () { return $03df355ea183d08a$export$53589e422a755d59; }, function (v) { return $03df355ea183d08a$export$53589e422a755d59 = v; });\n$parcel$export(module.exports, \"KEY_MODIFIER_COMMAND\", function () { return $03df355ea183d08a$export$452548a3c1874d61; }, function (v) { return $03df355ea183d08a$export$452548a3c1874d61 = v; });\n$parcel$export(module.exports, \"KEY_SPACE_COMMAND\", function () { return $03df355ea183d08a$export$d0bc2bb647ce4c17; }, function (v) { return $03df355ea183d08a$export$d0bc2bb647ce4c17 = v; });\n$parcel$export(module.exports, \"KEY_TAB_COMMAND\", function () { return $03df355ea183d08a$export$b321bdc226ccdcde; }, function (v) { return $03df355ea183d08a$export$b321bdc226ccdcde = v; });\n$parcel$export(module.exports, \"LineBreakNode\", function () { return $03df355ea183d08a$export$965f56e8043e93ae; }, function (v) { return $03df355ea183d08a$export$965f56e8043e93ae = v; });\n$parcel$export(module.exports, \"MOVE_TO_END\", function () { return $03df355ea183d08a$export$fb3b2d438650aff6; }, function (v) { return $03df355ea183d08a$export$fb3b2d438650aff6 = v; });\n$parcel$export(module.exports, \"MOVE_TO_START\", function () { return $03df355ea183d08a$export$dc117ee4d661295a; }, function (v) { return $03df355ea183d08a$export$dc117ee4d661295a = v; });\n$parcel$export(module.exports, \"OUTDENT_CONTENT_COMMAND\", function () { return $03df355ea183d08a$export$ecf9caa19e96e40d; }, function (v) { return $03df355ea183d08a$export$ecf9caa19e96e40d = v; });\n$parcel$export(module.exports, \"PASTE_COMMAND\", function () { return $03df355ea183d08a$export$7fb70c61b3bcc883; }, function (v) { return $03df355ea183d08a$export$7fb70c61b3bcc883 = v; });\n$parcel$export(module.exports, \"ParagraphNode\", function () { return $03df355ea183d08a$export$e94424771493b912; }, function (v) { return $03df355ea183d08a$export$e94424771493b912 = v; });\n$parcel$export(module.exports, \"REDO_COMMAND\", function () { return $03df355ea183d08a$export$8c4a0748d31d9941; }, function (v) { return $03df355ea183d08a$export$8c4a0748d31d9941 = v; });\n$parcel$export(module.exports, \"REMOVE_TEXT_COMMAND\", function () { return $03df355ea183d08a$export$9cc285f2a3ff220c; }, function (v) { return $03df355ea183d08a$export$9cc285f2a3ff220c = v; });\n$parcel$export(module.exports, \"RootNode\", function () { return $03df355ea183d08a$export$1c180cb67301903c; }, function (v) { return $03df355ea183d08a$export$1c180cb67301903c = v; });\n$parcel$export(module.exports, \"SELECTION_CHANGE_COMMAND\", function () { return $03df355ea183d08a$export$e396fef71d2b56e5; }, function (v) { return $03df355ea183d08a$export$e396fef71d2b56e5 = v; });\n$parcel$export(module.exports, \"TextNode\", function () { return $03df355ea183d08a$export$f0a25ea3087686aa; }, function (v) { return $03df355ea183d08a$export$f0a25ea3087686aa = v; });\n$parcel$export(module.exports, \"UNDO_COMMAND\", function () { return $03df355ea183d08a$export$34722a4946cb641e; }, function (v) { return $03df355ea183d08a$export$34722a4946cb641e = v; });\n$parcel$export(module.exports, \"createCommand\", function () { return $03df355ea183d08a$export$8d4021544bdece00; }, function (v) { return $03df355ea183d08a$export$8d4021544bdece00 = v; });\n$parcel$export(module.exports, \"createEditor\", function () { return $03df355ea183d08a$export$eb02d1ee0d3cac30; }, function (v) { return $03df355ea183d08a$export$eb02d1ee0d3cac30 = v; });\n$parcel$export(module.exports, \"isSelectionWithinEditor\", function () { return $03df355ea183d08a$export$f1b377b21cd6350b; }, function (v) { return $03df355ea183d08a$export$f1b377b21cd6350b = v; });\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */ var $03df355ea183d08a$export$24cab2f466b76c04;\nvar $03df355ea183d08a$export$2f5beb31df92ea57;\nvar $03df355ea183d08a$export$def73b17b22438e7;\nvar $03df355ea183d08a$export$4ccaf7d0d16ab4c;\nvar $03df355ea183d08a$export$f8cd0c3f35d1a61c;\nvar $03df355ea183d08a$export$7f0c05ffb7ced90d;\nvar $03df355ea183d08a$export$1ccc217b9831b072;\nvar $03df355ea183d08a$export$2785f39dcdec0078;\nvar $03df355ea183d08a$export$c4b907be1879d8c1;\nvar $03df355ea183d08a$export$fef265f0d2fcffdd;\nvar $03df355ea183d08a$export$6f13c476561e4734;\nvar $03df355ea183d08a$export$e725f93d4d48c6d8;\nvar $03df355ea183d08a$export$846e9407a8b5d98c;\nvar $03df355ea183d08a$export$8d83ea843c4eea9a;\nvar $03df355ea183d08a$export$63a3201b3a5c7d90;\nvar $03df355ea183d08a$export$2d96f9a07231d1b9;\nvar $03df355ea183d08a$export$e3d4b782f65c81f1;\nvar $03df355ea183d08a$export$d773017360b45449;\nvar $03df355ea183d08a$export$60aa03725ce41b1c;\nvar $03df355ea183d08a$export$923a058ef54437a4;\nvar $03df355ea183d08a$export$a78813a4e8e8b9dd;\nvar $03df355ea183d08a$export$8d016e0592201ace;\nvar $03df355ea183d08a$export$b16330e40aa25c4e;\nvar $03df355ea183d08a$export$7257e4181651a7c3;\nvar $03df355ea183d08a$export$1fdda795300c79c6;\nvar $03df355ea183d08a$export$181b63acea8a0224;\nvar $03df355ea183d08a$export$5b29ca560c2fedab;\nvar $03df355ea183d08a$export$6f851a24c61146af;\nvar $03df355ea183d08a$export$471953706258be2b;\nvar $03df355ea183d08a$export$ac6fed8d7d40e66c;\nvar $03df355ea183d08a$export$db10bc6ba67ffcb5;\nvar $03df355ea183d08a$export$e1d3a194df5be556;\nvar $03df355ea183d08a$export$ea25f5ef71f2d042;\nvar $03df355ea183d08a$export$2aad78c37810bca9;\nvar $03df355ea183d08a$export$cc2d53c74c1fb2b2;\nvar $03df355ea183d08a$export$4b6d457d076906ac;\nvar $03df355ea183d08a$export$e36aacf84f559bb3;\nvar $03df355ea183d08a$export$9fd9dd31dd6ebdf5;\nvar $03df355ea183d08a$export$4926ce1a5702fdc7;\nvar $03df355ea183d08a$export$d3f69a65bbe7edc;\nvar $03df355ea183d08a$export$c1a2de6c823e5f82;\nvar $03df355ea183d08a$export$6afdf194f304e546;\nvar $03df355ea183d08a$export$11c61e12af5e1f41;\nvar $03df355ea183d08a$export$e8fb7042985cd2e9;\nvar $03df355ea183d08a$export$1d1358fe8b5bfab4;\nvar $03df355ea183d08a$export$7bb13e375de35064;\nvar $03df355ea183d08a$export$6f67c758bb657857;\nvar $03df355ea183d08a$export$3435fcfb1f59ef96;\nvar $03df355ea183d08a$export$4dc8a35a083beec4;\nvar $03df355ea183d08a$export$35595bf6d7e36fd5;\nvar $03df355ea183d08a$export$d77fad8fb8747fd;\nvar $03df355ea183d08a$export$8e315b175631384c;\nvar $03df355ea183d08a$export$3c62f6ea1bcc0126;\nvar $03df355ea183d08a$export$512956df40f3b40e;\nvar $03df355ea183d08a$export$5f4fd2bb79122677;\nvar $03df355ea183d08a$export$6409391dce4c0f48;\nvar $03df355ea183d08a$export$d3f36a5fb5c9efe5;\nvar $03df355ea183d08a$export$e284ef4eccc325c5;\nvar $03df355ea183d08a$export$5627752ddf7eed41;\nvar $03df355ea183d08a$export$8c09d9a078ea3c2f;\nvar $03df355ea183d08a$export$ffbd838cf75d7d8e;\nvar $03df355ea183d08a$export$b62c1cce98fa7223;\nvar $03df355ea183d08a$export$2e0fd45fde1da719;\nvar $03df355ea183d08a$export$eac1e4b16b80d3ea;\nvar $03df355ea183d08a$export$8244b9efe04488e;\nvar $03df355ea183d08a$export$dc064fe9e59310fd;\nvar $03df355ea183d08a$export$cafe35f35e77bf56;\nvar $03df355ea183d08a$export$d394dc6514823b18;\nvar $03df355ea183d08a$export$85443a1a9543f043;\nvar $03df355ea183d08a$export$2f74f6a2d927e6bd;\nvar $03df355ea183d08a$export$64e35ce26e025724;\nvar $03df355ea183d08a$export$24f4fea65b096b4;\nvar $03df355ea183d08a$export$baa60daa2ca402b3;\nvar $03df355ea183d08a$export$7525f8f8ab44508;\nvar $03df355ea183d08a$export$217ec2281ac1c53b;\nvar $03df355ea183d08a$export$7833c2a33ae81d3d;\nvar $03df355ea183d08a$export$24bbba9bfa830f78;\nvar $03df355ea183d08a$export$13a0e72b5c0146bb;\nvar $03df355ea183d08a$export$61973214e0e18936;\nvar $03df355ea183d08a$export$2cdb7cdd6fccb293;\nvar $03df355ea183d08a$export$53589e422a755d59;\nvar $03df355ea183d08a$export$452548a3c1874d61;\nvar $03df355ea183d08a$export$d0bc2bb647ce4c17;\nvar $03df355ea183d08a$export$b321bdc226ccdcde;\nvar $03df355ea183d08a$export$965f56e8043e93ae;\nvar $03df355ea183d08a$export$fb3b2d438650aff6;\nvar $03df355ea183d08a$export$dc117ee4d661295a;\nvar $03df355ea183d08a$export$ecf9caa19e96e40d;\nvar $03df355ea183d08a$export$7fb70c61b3bcc883;\nvar $03df355ea183d08a$export$e94424771493b912;\nvar $03df355ea183d08a$export$8c4a0748d31d9941;\nvar $03df355ea183d08a$export$9cc285f2a3ff220c;\nvar $03df355ea183d08a$export$1c180cb67301903c;\nvar $03df355ea183d08a$export$e396fef71d2b56e5;\nvar $03df355ea183d08a$export$f0a25ea3087686aa;\nvar $03df355ea183d08a$export$34722a4946cb641e;\nvar $03df355ea183d08a$export$8d4021544bdece00;\nvar $03df355ea183d08a$export$eb02d1ee0d3cac30;\nvar $03df355ea183d08a$export$f1b377b21cd6350b;\n\"use strict\";\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ function $03df355ea183d08a$var$createCommand(type) {\n    return {\n        type: type\n    };\n}\nconst $03df355ea183d08a$var$SELECTION_CHANGE_COMMAND = $03df355ea183d08a$var$createCommand(\"SELECTION_CHANGE_COMMAND\");\nconst $03df355ea183d08a$var$CLICK_COMMAND = $03df355ea183d08a$var$createCommand(\"CLICK_COMMAND\");\nconst $03df355ea183d08a$var$DELETE_CHARACTER_COMMAND = $03df355ea183d08a$var$createCommand(\"DELETE_CHARACTER_COMMAND\");\nconst $03df355ea183d08a$var$INSERT_LINE_BREAK_COMMAND = $03df355ea183d08a$var$createCommand(\"INSERT_LINE_BREAK_COMMAND\");\nconst $03df355ea183d08a$var$INSERT_PARAGRAPH_COMMAND = $03df355ea183d08a$var$createCommand(\"INSERT_PARAGRAPH_COMMAND\");\nconst $03df355ea183d08a$var$CONTROLLED_TEXT_INSERTION_COMMAND = $03df355ea183d08a$var$createCommand(\"CONTROLLED_TEXT_INSERTION_COMMAND\");\nconst $03df355ea183d08a$var$PASTE_COMMAND = $03df355ea183d08a$var$createCommand(\"PASTE_COMMAND\");\nconst $03df355ea183d08a$var$REMOVE_TEXT_COMMAND = $03df355ea183d08a$var$createCommand(\"REMOVE_TEXT_COMMAND\");\nconst $03df355ea183d08a$var$DELETE_WORD_COMMAND = $03df355ea183d08a$var$createCommand(\"DELETE_WORD_COMMAND\");\nconst $03df355ea183d08a$var$DELETE_LINE_COMMAND = $03df355ea183d08a$var$createCommand(\"DELETE_LINE_COMMAND\");\nconst $03df355ea183d08a$var$FORMAT_TEXT_COMMAND = $03df355ea183d08a$var$createCommand(\"FORMAT_TEXT_COMMAND\");\nconst $03df355ea183d08a$var$UNDO_COMMAND = $03df355ea183d08a$var$createCommand(\"UNDO_COMMAND\");\nconst $03df355ea183d08a$var$REDO_COMMAND = $03df355ea183d08a$var$createCommand(\"REDO_COMMAND\");\nconst $03df355ea183d08a$var$KEY_DOWN_COMMAND = $03df355ea183d08a$var$createCommand(\"KEYDOWN_COMMAND\");\nconst $03df355ea183d08a$var$KEY_ARROW_RIGHT_COMMAND = $03df355ea183d08a$var$createCommand(\"KEY_ARROW_RIGHT_COMMAND\");\nconst $03df355ea183d08a$var$MOVE_TO_END = $03df355ea183d08a$var$createCommand(\"MOVE_TO_END\");\nconst $03df355ea183d08a$var$KEY_ARROW_LEFT_COMMAND = $03df355ea183d08a$var$createCommand(\"KEY_ARROW_LEFT_COMMAND\");\nconst $03df355ea183d08a$var$MOVE_TO_START = $03df355ea183d08a$var$createCommand(\"MOVE_TO_START\");\nconst $03df355ea183d08a$var$KEY_ARROW_UP_COMMAND = $03df355ea183d08a$var$createCommand(\"KEY_ARROW_UP_COMMAND\");\nconst $03df355ea183d08a$var$KEY_ARROW_DOWN_COMMAND = $03df355ea183d08a$var$createCommand(\"KEY_ARROW_DOWN_COMMAND\");\nconst $03df355ea183d08a$var$KEY_ENTER_COMMAND = $03df355ea183d08a$var$createCommand(\"KEY_ENTER_COMMAND\");\nconst $03df355ea183d08a$var$KEY_SPACE_COMMAND = $03df355ea183d08a$var$createCommand(\"KEY_SPACE_COMMAND\");\nconst $03df355ea183d08a$var$KEY_BACKSPACE_COMMAND = $03df355ea183d08a$var$createCommand(\"KEY_BACKSPACE_COMMAND\");\nconst $03df355ea183d08a$var$KEY_ESCAPE_COMMAND = $03df355ea183d08a$var$createCommand(\"KEY_ESCAPE_COMMAND\");\nconst $03df355ea183d08a$var$KEY_DELETE_COMMAND = $03df355ea183d08a$var$createCommand(\"KEY_DELETE_COMMAND\");\nconst $03df355ea183d08a$var$KEY_TAB_COMMAND = $03df355ea183d08a$var$createCommand(\"KEY_TAB_COMMAND\");\nconst $03df355ea183d08a$var$INDENT_CONTENT_COMMAND = $03df355ea183d08a$var$createCommand(\"INDENT_CONTENT_COMMAND\");\nconst $03df355ea183d08a$var$OUTDENT_CONTENT_COMMAND = $03df355ea183d08a$var$createCommand(\"OUTDENT_CONTENT_COMMAND\");\nconst $03df355ea183d08a$var$DROP_COMMAND = $03df355ea183d08a$var$createCommand(\"DROP_COMMAND\");\nconst $03df355ea183d08a$var$FORMAT_ELEMENT_COMMAND = $03df355ea183d08a$var$createCommand(\"FORMAT_ELEMENT_COMMAND\");\nconst $03df355ea183d08a$var$DRAGSTART_COMMAND = $03df355ea183d08a$var$createCommand(\"DRAGSTART_COMMAND\");\nconst $03df355ea183d08a$var$DRAGOVER_COMMAND = $03df355ea183d08a$var$createCommand(\"DRAGOVER_COMMAND\");\nconst $03df355ea183d08a$var$DRAGEND_COMMAND = $03df355ea183d08a$var$createCommand(\"DRAGEND_COMMAND\");\nconst $03df355ea183d08a$var$COPY_COMMAND = $03df355ea183d08a$var$createCommand(\"COPY_COMMAND\");\nconst $03df355ea183d08a$var$CUT_COMMAND = $03df355ea183d08a$var$createCommand(\"CUT_COMMAND\");\nconst $03df355ea183d08a$var$CLEAR_EDITOR_COMMAND = $03df355ea183d08a$var$createCommand(\"CLEAR_EDITOR_COMMAND\");\nconst $03df355ea183d08a$var$CLEAR_HISTORY_COMMAND = $03df355ea183d08a$var$createCommand(\"CLEAR_HISTORY_COMMAND\");\nconst $03df355ea183d08a$var$CAN_REDO_COMMAND = $03df355ea183d08a$var$createCommand(\"CAN_REDO_COMMAND\");\nconst $03df355ea183d08a$var$CAN_UNDO_COMMAND = $03df355ea183d08a$var$createCommand(\"CAN_UNDO_COMMAND\");\nconst $03df355ea183d08a$var$FOCUS_COMMAND = $03df355ea183d08a$var$createCommand(\"FOCUS_COMMAND\");\nconst $03df355ea183d08a$var$BLUR_COMMAND = $03df355ea183d08a$var$createCommand(\"BLUR_COMMAND\");\nconst $03df355ea183d08a$var$KEY_MODIFIER_COMMAND = $03df355ea183d08a$var$createCommand(\"KEY_MODIFIER_COMMAND\");\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ const $03df355ea183d08a$var$CAN_USE_DOM = typeof window !== \"undefined\" && typeof window.document !== \"undefined\" && typeof window.document.createElement !== \"undefined\";\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ const $03df355ea183d08a$var$documentMode = $03df355ea183d08a$var$CAN_USE_DOM && \"documentMode\" in document ? document.documentMode : null;\nconst $03df355ea183d08a$var$IS_APPLE = $03df355ea183d08a$var$CAN_USE_DOM && /Mac|iPod|iPhone|iPad/.test(navigator.platform);\nconst $03df355ea183d08a$var$IS_FIREFOX = $03df355ea183d08a$var$CAN_USE_DOM && /^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);\nconst $03df355ea183d08a$var$CAN_USE_BEFORE_INPUT = $03df355ea183d08a$var$CAN_USE_DOM && \"InputEvent\" in window && !$03df355ea183d08a$var$documentMode ? \"getTargetRanges\" in new window.InputEvent(\"input\") : false;\nconst $03df355ea183d08a$var$IS_SAFARI = $03df355ea183d08a$var$CAN_USE_DOM && /Version\\/[\\d.]+.*Safari/.test(navigator.userAgent);\nconst $03df355ea183d08a$var$IS_IOS = $03df355ea183d08a$var$CAN_USE_DOM && /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream; // Keep these in case we need to use them in the future.\n// export const IS_WINDOWS: boolean = CAN_USE_DOM && /Win/.test(navigator.platform);\nconst $03df355ea183d08a$var$IS_CHROME = $03df355ea183d08a$var$CAN_USE_DOM && /^(?=.*Chrome).*/i.test(navigator.userAgent); // export const canUseTextInputEvent: boolean = CAN_USE_DOM && 'TextEvent' in window && !documentMode;\nconst $03df355ea183d08a$var$IS_APPLE_WEBKIT = $03df355ea183d08a$var$CAN_USE_DOM && /AppleWebKit\\/[\\d.]+/.test(navigator.userAgent) && !$03df355ea183d08a$var$IS_CHROME;\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ const $03df355ea183d08a$var$DOM_ELEMENT_TYPE = 1;\nconst $03df355ea183d08a$var$DOM_TEXT_TYPE = 3; // Reconciling\nconst $03df355ea183d08a$var$NO_DIRTY_NODES = 0;\nconst $03df355ea183d08a$var$HAS_DIRTY_NODES = 1;\nconst $03df355ea183d08a$var$FULL_RECONCILE = 2; // Text node modes\nconst $03df355ea183d08a$var$IS_NORMAL = 0;\nconst $03df355ea183d08a$var$IS_TOKEN = 1;\nconst $03df355ea183d08a$var$IS_SEGMENTED = 2; // IS_INERT = 3\n// Text node formatting\nconst $03df355ea183d08a$var$IS_BOLD = 1;\nconst $03df355ea183d08a$var$IS_ITALIC = 2;\nconst $03df355ea183d08a$var$IS_STRIKETHROUGH = 4;\nconst $03df355ea183d08a$var$IS_UNDERLINE = 8;\nconst $03df355ea183d08a$var$IS_CODE = 16;\nconst $03df355ea183d08a$var$IS_SUBSCRIPT = 32;\nconst $03df355ea183d08a$var$IS_SUPERSCRIPT = 64;\nconst $03df355ea183d08a$var$IS_HIGHLIGHT = 128;\nconst $03df355ea183d08a$var$IS_ALL_FORMATTING = $03df355ea183d08a$var$IS_BOLD | $03df355ea183d08a$var$IS_ITALIC | $03df355ea183d08a$var$IS_STRIKETHROUGH | $03df355ea183d08a$var$IS_UNDERLINE | $03df355ea183d08a$var$IS_CODE | $03df355ea183d08a$var$IS_SUBSCRIPT | $03df355ea183d08a$var$IS_SUPERSCRIPT | $03df355ea183d08a$var$IS_HIGHLIGHT; // Text node details\nconst $03df355ea183d08a$var$IS_DIRECTIONLESS = 1;\nconst $03df355ea183d08a$var$IS_UNMERGEABLE = 2; // Element node formatting\nconst $03df355ea183d08a$var$IS_ALIGN_LEFT = 1;\nconst $03df355ea183d08a$var$IS_ALIGN_CENTER = 2;\nconst $03df355ea183d08a$var$IS_ALIGN_RIGHT = 3;\nconst $03df355ea183d08a$var$IS_ALIGN_JUSTIFY = 4;\nconst $03df355ea183d08a$var$IS_ALIGN_START = 5;\nconst $03df355ea183d08a$var$IS_ALIGN_END = 6; // Reconciliation\nconst $03df355ea183d08a$var$NON_BREAKING_SPACE = \"\\xa0\";\nconst $03df355ea183d08a$var$ZERO_WIDTH_SPACE = \"​\"; // For iOS/Safari we use a non breaking space, otherwise the cursor appears\n// overlapping the composed text.\nconst $03df355ea183d08a$var$COMPOSITION_SUFFIX = $03df355ea183d08a$var$IS_SAFARI || $03df355ea183d08a$var$IS_IOS || $03df355ea183d08a$var$IS_APPLE_WEBKIT ? $03df355ea183d08a$var$NON_BREAKING_SPACE : $03df355ea183d08a$var$ZERO_WIDTH_SPACE;\nconst $03df355ea183d08a$var$DOUBLE_LINE_BREAK = \"\\n\\n\"; // For FF, we need to use a non-breaking space, or it gets composition\n// in a stuck state.\nconst $03df355ea183d08a$var$COMPOSITION_START_CHAR = $03df355ea183d08a$var$IS_FIREFOX ? $03df355ea183d08a$var$NON_BREAKING_SPACE : $03df355ea183d08a$var$COMPOSITION_SUFFIX;\nconst $03df355ea183d08a$var$RTL = \"֑-߿יִ-﷽ﹰ-ﻼ\";\nconst $03df355ea183d08a$var$LTR = \"A-Za-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿\"; // eslint-disable-next-line no-misleading-character-class\nconst $03df355ea183d08a$var$RTL_REGEX = new RegExp(\"^[^\" + $03df355ea183d08a$var$LTR + \"]*[\" + $03df355ea183d08a$var$RTL + \"]\"); // eslint-disable-next-line no-misleading-character-class\nconst $03df355ea183d08a$var$LTR_REGEX = new RegExp(\"^[^\" + $03df355ea183d08a$var$RTL + \"]*[\" + $03df355ea183d08a$var$LTR + \"]\");\nconst $03df355ea183d08a$var$TEXT_TYPE_TO_FORMAT = {\n    bold: $03df355ea183d08a$var$IS_BOLD,\n    code: $03df355ea183d08a$var$IS_CODE,\n    highlight: $03df355ea183d08a$var$IS_HIGHLIGHT,\n    italic: $03df355ea183d08a$var$IS_ITALIC,\n    strikethrough: $03df355ea183d08a$var$IS_STRIKETHROUGH,\n    subscript: $03df355ea183d08a$var$IS_SUBSCRIPT,\n    superscript: $03df355ea183d08a$var$IS_SUPERSCRIPT,\n    underline: $03df355ea183d08a$var$IS_UNDERLINE\n};\nconst $03df355ea183d08a$var$DETAIL_TYPE_TO_DETAIL = {\n    directionless: $03df355ea183d08a$var$IS_DIRECTIONLESS,\n    unmergeable: $03df355ea183d08a$var$IS_UNMERGEABLE\n};\nconst $03df355ea183d08a$var$ELEMENT_TYPE_TO_FORMAT = {\n    center: $03df355ea183d08a$var$IS_ALIGN_CENTER,\n    end: $03df355ea183d08a$var$IS_ALIGN_END,\n    justify: $03df355ea183d08a$var$IS_ALIGN_JUSTIFY,\n    left: $03df355ea183d08a$var$IS_ALIGN_LEFT,\n    right: $03df355ea183d08a$var$IS_ALIGN_RIGHT,\n    start: $03df355ea183d08a$var$IS_ALIGN_START\n};\nconst $03df355ea183d08a$var$ELEMENT_FORMAT_TO_TYPE = {\n    [$03df355ea183d08a$var$IS_ALIGN_CENTER]: \"center\",\n    [$03df355ea183d08a$var$IS_ALIGN_END]: \"end\",\n    [$03df355ea183d08a$var$IS_ALIGN_JUSTIFY]: \"justify\",\n    [$03df355ea183d08a$var$IS_ALIGN_LEFT]: \"left\",\n    [$03df355ea183d08a$var$IS_ALIGN_RIGHT]: \"right\",\n    [$03df355ea183d08a$var$IS_ALIGN_START]: \"start\"\n};\nconst $03df355ea183d08a$var$TEXT_MODE_TO_TYPE = {\n    normal: $03df355ea183d08a$var$IS_NORMAL,\n    segmented: $03df355ea183d08a$var$IS_SEGMENTED,\n    token: $03df355ea183d08a$var$IS_TOKEN\n};\nconst $03df355ea183d08a$var$TEXT_TYPE_TO_MODE = {\n    [$03df355ea183d08a$var$IS_NORMAL]: \"normal\",\n    [$03df355ea183d08a$var$IS_SEGMENTED]: \"segmented\",\n    [$03df355ea183d08a$var$IS_TOKEN]: \"token\"\n};\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ const $03df355ea183d08a$var$TEXT_MUTATION_VARIANCE = 100;\nlet $03df355ea183d08a$var$isProcessingMutations = false;\nlet $03df355ea183d08a$var$lastTextEntryTimeStamp = 0;\nfunction $03df355ea183d08a$var$getIsProcesssingMutations() {\n    return $03df355ea183d08a$var$isProcessingMutations;\n}\nfunction $03df355ea183d08a$var$updateTimeStamp(event) {\n    $03df355ea183d08a$var$lastTextEntryTimeStamp = event.timeStamp;\n}\nfunction $03df355ea183d08a$var$initTextEntryListener(editor) {\n    if ($03df355ea183d08a$var$lastTextEntryTimeStamp === 0) $03df355ea183d08a$var$getWindow(editor).addEventListener(\"textInput\", $03df355ea183d08a$var$updateTimeStamp, true);\n}\nfunction $03df355ea183d08a$var$isManagedLineBreak(dom, target, editor) {\n    return target.__lexicalLineBreak === dom || // @ts-ignore We intentionally add this to the Node.\n    dom[`__lexicalKey_${editor._key}`] !== undefined;\n}\nfunction $03df355ea183d08a$var$getLastSelection(editor) {\n    return editor.getEditorState().read(()=>{\n        const selection = $03df355ea183d08a$var$$getSelection();\n        return selection !== null ? selection.clone() : null;\n    });\n}\nfunction $03df355ea183d08a$var$handleTextMutation(target, node, editor) {\n    const domSelection = $03df355ea183d08a$var$getDOMSelection(editor._window);\n    let anchorOffset = null;\n    let focusOffset = null;\n    if (domSelection !== null && domSelection.anchorNode === target) {\n        anchorOffset = domSelection.anchorOffset;\n        focusOffset = domSelection.focusOffset;\n    }\n    const text = target.nodeValue;\n    if (text !== null) $03df355ea183d08a$var$$updateTextNodeFromDOMContent(node, text, anchorOffset, focusOffset, false);\n}\nfunction $03df355ea183d08a$var$shouldUpdateTextNodeFromMutation(selection, targetDOM, targetNode) {\n    if ($03df355ea183d08a$var$$isRangeSelection(selection)) {\n        const anchorNode = selection.anchor.getNode();\n        if (anchorNode.is(targetNode) && selection.format !== anchorNode.getFormat()) return false;\n    }\n    return targetDOM.nodeType === $03df355ea183d08a$var$DOM_TEXT_TYPE && targetNode.isAttached();\n}\nfunction $03df355ea183d08a$var$$flushMutations$1(editor, mutations, observer) {\n    $03df355ea183d08a$var$isProcessingMutations = true;\n    const shouldFlushTextMutations = performance.now() - $03df355ea183d08a$var$lastTextEntryTimeStamp > $03df355ea183d08a$var$TEXT_MUTATION_VARIANCE;\n    try {\n        $03df355ea183d08a$var$updateEditor(editor, ()=>{\n            const selection = $03df355ea183d08a$var$$getSelection() || $03df355ea183d08a$var$getLastSelection(editor);\n            const badDOMTargets = new Map();\n            const rootElement = editor.getRootElement(); // We use the current editor state, as that reflects what is\n            // actually \"on screen\".\n            const currentEditorState = editor._editorState;\n            const blockCursorElement = editor._blockCursorElement;\n            let shouldRevertSelection = false;\n            let possibleTextForFirefoxPaste = \"\";\n            for(let i = 0; i < mutations.length; i++){\n                const mutation = mutations[i];\n                const type = mutation.type;\n                const targetDOM = mutation.target;\n                let targetNode = $03df355ea183d08a$var$$getNearestNodeFromDOMNode(targetDOM, currentEditorState);\n                if (targetNode === null && targetDOM !== rootElement || $03df355ea183d08a$var$$isDecoratorNode(targetNode)) continue;\n                if (type === \"characterData\") // Text mutations are deferred and passed to mutation listeners to be\n                // processed outside of the Lexical engine.\n                {\n                    if (shouldFlushTextMutations && $03df355ea183d08a$var$$isTextNode(targetNode) && $03df355ea183d08a$var$shouldUpdateTextNodeFromMutation(selection, targetDOM, targetNode)) $03df355ea183d08a$var$handleTextMutation(targetDOM, targetNode, editor);\n                } else if (type === \"childList\") {\n                    shouldRevertSelection = true; // We attempt to \"undo\" any changes that have occurred outside\n                    // of Lexical. We want Lexical's editor state to be source of truth.\n                    // To the user, these will look like no-ops.\n                    const addedDOMs = mutation.addedNodes;\n                    for(let s = 0; s < addedDOMs.length; s++){\n                        const addedDOM = addedDOMs[s];\n                        const node = $03df355ea183d08a$var$getNodeFromDOMNode(addedDOM);\n                        const parentDOM = addedDOM.parentNode;\n                        if (parentDOM != null && addedDOM !== blockCursorElement && node === null && (addedDOM.nodeName !== \"BR\" || !$03df355ea183d08a$var$isManagedLineBreak(addedDOM, parentDOM, editor))) {\n                            if ($03df355ea183d08a$var$IS_FIREFOX) {\n                                const possibleText = addedDOM.innerText || addedDOM.nodeValue;\n                                if (possibleText) possibleTextForFirefoxPaste += possibleText;\n                            }\n                            parentDOM.removeChild(addedDOM);\n                        }\n                    }\n                    const removedDOMs = mutation.removedNodes;\n                    const removedDOMsLength = removedDOMs.length;\n                    if (removedDOMsLength > 0) {\n                        let unremovedBRs = 0;\n                        for(let s = 0; s < removedDOMsLength; s++){\n                            const removedDOM = removedDOMs[s];\n                            if (removedDOM.nodeName === \"BR\" && $03df355ea183d08a$var$isManagedLineBreak(removedDOM, targetDOM, editor) || blockCursorElement === removedDOM) {\n                                targetDOM.appendChild(removedDOM);\n                                unremovedBRs++;\n                            }\n                        }\n                        if (removedDOMsLength !== unremovedBRs) {\n                            if (targetDOM === rootElement) targetNode = $03df355ea183d08a$var$internalGetRoot(currentEditorState);\n                            badDOMTargets.set(targetDOM, targetNode);\n                        }\n                    }\n                }\n            } // Now we process each of the unique target nodes, attempting\n            // to restore their contents back to the source of truth, which\n            // is Lexical's \"current\" editor state. This is basically like\n            // an internal revert on the DOM.\n            if (badDOMTargets.size > 0) for (const [targetDOM, targetNode] of badDOMTargets){\n                if ($03df355ea183d08a$var$$isElementNode(targetNode)) {\n                    const childKeys = targetNode.getChildrenKeys();\n                    let currentDOM = targetDOM.firstChild;\n                    for(let s = 0; s < childKeys.length; s++){\n                        const key = childKeys[s];\n                        const correctDOM = editor.getElementByKey(key);\n                        if (correctDOM === null) continue;\n                        if (currentDOM == null) {\n                            targetDOM.appendChild(correctDOM);\n                            currentDOM = correctDOM;\n                        } else if (currentDOM !== correctDOM) targetDOM.replaceChild(correctDOM, currentDOM);\n                        currentDOM = currentDOM.nextSibling;\n                    }\n                } else if ($03df355ea183d08a$var$$isTextNode(targetNode)) targetNode.markDirty();\n            }\n             // Capture all the mutations made during this function. This\n            // also prevents us having to process them on the next cycle\n            // of onMutation, as these mutations were made by us.\n            const records = observer.takeRecords(); // Check for any random auto-added <br> elements, and remove them.\n            // These get added by the browser when we undo the above mutations\n            // and this can lead to a broken UI.\n            if (records.length > 0) {\n                for(let i = 0; i < records.length; i++){\n                    const record = records[i];\n                    const addedNodes = record.addedNodes;\n                    const target = record.target;\n                    for(let s = 0; s < addedNodes.length; s++){\n                        const addedDOM = addedNodes[s];\n                        const parentDOM = addedDOM.parentNode;\n                        if (parentDOM != null && addedDOM.nodeName === \"BR\" && !$03df355ea183d08a$var$isManagedLineBreak(addedDOM, target, editor)) parentDOM.removeChild(addedDOM);\n                    }\n                } // Clear any of those removal mutations\n                observer.takeRecords();\n            }\n            if (selection !== null) {\n                if (shouldRevertSelection) {\n                    selection.dirty = true;\n                    $03df355ea183d08a$var$$setSelection(selection);\n                }\n                if ($03df355ea183d08a$var$IS_FIREFOX && $03df355ea183d08a$var$isFirefoxClipboardEvents(editor)) selection.insertRawText(possibleTextForFirefoxPaste);\n            }\n        });\n    } finally{\n        $03df355ea183d08a$var$isProcessingMutations = false;\n    }\n}\nfunction $03df355ea183d08a$var$flushRootMutations(editor) {\n    const observer = editor._observer;\n    if (observer !== null) {\n        const mutations = observer.takeRecords();\n        $03df355ea183d08a$var$$flushMutations$1(editor, mutations, observer);\n    }\n}\nfunction $03df355ea183d08a$var$initMutationObserver(editor) {\n    $03df355ea183d08a$var$initTextEntryListener(editor);\n    editor._observer = new MutationObserver((mutations, observer)=>{\n        $03df355ea183d08a$var$$flushMutations$1(editor, mutations, observer);\n    });\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ let $03df355ea183d08a$var$keyCounter = 1;\nfunction $03df355ea183d08a$var$generateRandomKey() {\n    return \"\" + $03df355ea183d08a$var$keyCounter++;\n}\nfunction $03df355ea183d08a$var$getRegisteredNodeOrThrow(editor, nodeType) {\n    const registeredNode = editor._nodes.get(nodeType);\n    if (registeredNode === undefined) throw Error(`registeredNode: Type ${nodeType} not found`);\n    return registeredNode;\n}\nconst $03df355ea183d08a$var$scheduleMicroTask = typeof queueMicrotask === \"function\" ? queueMicrotask : (fn)=>{\n    // No window prefix intended (#1400)\n    Promise.resolve().then(fn);\n};\nfunction $03df355ea183d08a$var$$isSelectionCapturedInDecorator(node) {\n    return $03df355ea183d08a$var$$isDecoratorNode($03df355ea183d08a$var$$getNearestNodeFromDOMNode(node));\n}\nfunction $03df355ea183d08a$var$isSelectionCapturedInDecoratorInput(anchorDOM) {\n    const activeElement = document.activeElement;\n    if (activeElement === null) return false;\n    const nodeName = activeElement.nodeName;\n    return $03df355ea183d08a$var$$isDecoratorNode($03df355ea183d08a$var$$getNearestNodeFromDOMNode(anchorDOM)) && (nodeName === \"INPUT\" || nodeName === \"TEXTAREA\" || activeElement.contentEditable === \"true\" && // @ts-ignore iternal field\n    activeElement.__lexicalEditor == null);\n}\nfunction $03df355ea183d08a$var$isSelectionWithinEditor(editor, anchorDOM, focusDOM) {\n    const rootElement = editor.getRootElement();\n    try {\n        return rootElement !== null && rootElement.contains(anchorDOM) && rootElement.contains(focusDOM) && // Ignore if selection is within nested editor\n        anchorDOM !== null && !$03df355ea183d08a$var$isSelectionCapturedInDecoratorInput(anchorDOM) && $03df355ea183d08a$var$getNearestEditorFromDOMNode(anchorDOM) === editor;\n    } catch (error) {\n        return false;\n    }\n}\nfunction $03df355ea183d08a$var$getNearestEditorFromDOMNode(node) {\n    let currentNode = node;\n    while(currentNode != null){\n        // @ts-expect-error: internal field\n        const editor = currentNode.__lexicalEditor;\n        if (editor != null) return editor;\n        currentNode = $03df355ea183d08a$var$getParentElement(currentNode);\n    }\n    return null;\n}\nfunction $03df355ea183d08a$var$getTextDirection(text) {\n    if ($03df355ea183d08a$var$RTL_REGEX.test(text)) return \"rtl\";\n    if ($03df355ea183d08a$var$LTR_REGEX.test(text)) return \"ltr\";\n    return null;\n}\nfunction $03df355ea183d08a$var$$isTokenOrSegmented(node) {\n    return node.isToken() || node.isSegmented();\n}\nfunction $03df355ea183d08a$var$isDOMNodeLexicalTextNode(node) {\n    return node.nodeType === $03df355ea183d08a$var$DOM_TEXT_TYPE;\n}\nfunction $03df355ea183d08a$var$getDOMTextNode(element) {\n    let node = element;\n    while(node != null){\n        if ($03df355ea183d08a$var$isDOMNodeLexicalTextNode(node)) return node;\n        node = node.firstChild;\n    }\n    return null;\n}\nfunction $03df355ea183d08a$var$toggleTextFormatType(format, type, alignWithFormat) {\n    const activeFormat = $03df355ea183d08a$var$TEXT_TYPE_TO_FORMAT[type];\n    const isStateFlagPresent = format & activeFormat;\n    if (isStateFlagPresent && (alignWithFormat === null || (alignWithFormat & activeFormat) === 0)) // Remove the state flag.\n    return format ^ activeFormat;\n    if (alignWithFormat === null || alignWithFormat & activeFormat) // Add the state flag.\n    return format | activeFormat;\n    return format;\n}\nfunction $03df355ea183d08a$var$$isLeafNode(node) {\n    return $03df355ea183d08a$var$$isTextNode(node) || $03df355ea183d08a$var$$isLineBreakNode(node) || $03df355ea183d08a$var$$isDecoratorNode(node);\n}\nfunction $03df355ea183d08a$var$$setNodeKey(node, existingKey) {\n    if (existingKey != null) {\n        node.__key = existingKey;\n        return;\n    }\n    $03df355ea183d08a$var$errorOnReadOnly();\n    $03df355ea183d08a$var$errorOnInfiniteTransforms();\n    const editor = $03df355ea183d08a$var$getActiveEditor();\n    const editorState = $03df355ea183d08a$var$getActiveEditorState();\n    const key = $03df355ea183d08a$var$generateRandomKey();\n    editorState._nodeMap.set(key, node); // TODO Split this function into leaf/element\n    if ($03df355ea183d08a$var$$isElementNode(node)) editor._dirtyElements.set(key, true);\n    else editor._dirtyLeaves.add(key);\n    editor._cloneNotNeeded.add(key);\n    editor._dirtyType = $03df355ea183d08a$var$HAS_DIRTY_NODES;\n    node.__key = key;\n}\nfunction $03df355ea183d08a$var$internalMarkParentElementsAsDirty(parentKey, nodeMap, dirtyElements) {\n    let nextParentKey = parentKey;\n    while(nextParentKey !== null){\n        if (dirtyElements.has(nextParentKey)) return;\n        const node = nodeMap.get(nextParentKey);\n        if (node === undefined) break;\n        dirtyElements.set(nextParentKey, false);\n        nextParentKey = node.__parent;\n    }\n}\nfunction $03df355ea183d08a$var$removeFromParent(node) {\n    const oldParent = node.getParent();\n    if (oldParent !== null) {\n        const writableNode = node.getWritable();\n        const writableParent = oldParent.getWritable();\n        const prevSibling = node.getPreviousSibling();\n        const nextSibling = node.getNextSibling(); // TODO: this function duplicates a bunch of operations, can be simplified.\n        if (prevSibling === null) {\n            if (nextSibling !== null) {\n                const writableNextSibling = nextSibling.getWritable();\n                writableParent.__first = nextSibling.__key;\n                writableNextSibling.__prev = null;\n            } else writableParent.__first = null;\n        } else {\n            const writablePrevSibling = prevSibling.getWritable();\n            if (nextSibling !== null) {\n                const writableNextSibling = nextSibling.getWritable();\n                writableNextSibling.__prev = writablePrevSibling.__key;\n                writablePrevSibling.__next = writableNextSibling.__key;\n            } else writablePrevSibling.__next = null;\n            writableNode.__prev = null;\n        }\n        if (nextSibling === null) {\n            if (prevSibling !== null) {\n                const writablePrevSibling = prevSibling.getWritable();\n                writableParent.__last = prevSibling.__key;\n                writablePrevSibling.__next = null;\n            } else writableParent.__last = null;\n        } else {\n            const writableNextSibling = nextSibling.getWritable();\n            if (prevSibling !== null) {\n                const writablePrevSibling = prevSibling.getWritable();\n                writablePrevSibling.__next = writableNextSibling.__key;\n                writableNextSibling.__prev = writablePrevSibling.__key;\n            } else writableNextSibling.__prev = null;\n            writableNode.__next = null;\n        }\n        writableParent.__size--;\n        writableNode.__parent = null;\n    }\n} // Never use this function directly! It will break\n// the cloning heuristic. Instead use node.getWritable().\nfunction $03df355ea183d08a$var$internalMarkNodeAsDirty(node) {\n    $03df355ea183d08a$var$errorOnInfiniteTransforms();\n    const latest = node.getLatest();\n    const parent = latest.__parent;\n    const editorState = $03df355ea183d08a$var$getActiveEditorState();\n    const editor = $03df355ea183d08a$var$getActiveEditor();\n    const nodeMap = editorState._nodeMap;\n    const dirtyElements = editor._dirtyElements;\n    if (parent !== null) $03df355ea183d08a$var$internalMarkParentElementsAsDirty(parent, nodeMap, dirtyElements);\n    const key = latest.__key;\n    editor._dirtyType = $03df355ea183d08a$var$HAS_DIRTY_NODES;\n    if ($03df355ea183d08a$var$$isElementNode(node)) dirtyElements.set(key, true);\n    else // TODO split internally MarkNodeAsDirty into two dedicated Element/leave functions\n    editor._dirtyLeaves.add(key);\n}\nfunction $03df355ea183d08a$var$internalMarkSiblingsAsDirty(node) {\n    const previousNode = node.getPreviousSibling();\n    const nextNode = node.getNextSibling();\n    if (previousNode !== null) $03df355ea183d08a$var$internalMarkNodeAsDirty(previousNode);\n    if (nextNode !== null) $03df355ea183d08a$var$internalMarkNodeAsDirty(nextNode);\n}\nfunction $03df355ea183d08a$var$$setCompositionKey(compositionKey) {\n    $03df355ea183d08a$var$errorOnReadOnly();\n    const editor = $03df355ea183d08a$var$getActiveEditor();\n    const previousCompositionKey = editor._compositionKey;\n    if (compositionKey !== previousCompositionKey) {\n        editor._compositionKey = compositionKey;\n        if (previousCompositionKey !== null) {\n            const node = $03df355ea183d08a$var$$getNodeByKey(previousCompositionKey);\n            if (node !== null) node.getWritable();\n        }\n        if (compositionKey !== null) {\n            const node = $03df355ea183d08a$var$$getNodeByKey(compositionKey);\n            if (node !== null) node.getWritable();\n        }\n    }\n}\nfunction $03df355ea183d08a$var$$getCompositionKey() {\n    if ($03df355ea183d08a$var$isCurrentlyReadOnlyMode()) return null;\n    const editor = $03df355ea183d08a$var$getActiveEditor();\n    return editor._compositionKey;\n}\nfunction $03df355ea183d08a$var$$getNodeByKey(key, _editorState) {\n    const editorState = _editorState || $03df355ea183d08a$var$getActiveEditorState();\n    const node = editorState._nodeMap.get(key);\n    if (node === undefined) return null;\n    return node;\n}\nfunction $03df355ea183d08a$var$getNodeFromDOMNode(dom, editorState) {\n    const editor = $03df355ea183d08a$var$getActiveEditor(); // @ts-ignore We intentionally add this to the Node.\n    const key = dom[`__lexicalKey_${editor._key}`];\n    if (key !== undefined) return $03df355ea183d08a$var$$getNodeByKey(key, editorState);\n    return null;\n}\nfunction $03df355ea183d08a$var$$getNearestNodeFromDOMNode(startingDOM, editorState) {\n    let dom = startingDOM;\n    while(dom != null){\n        const node = $03df355ea183d08a$var$getNodeFromDOMNode(dom, editorState);\n        if (node !== null) return node;\n        dom = $03df355ea183d08a$var$getParentElement(dom);\n    }\n    return null;\n}\nfunction $03df355ea183d08a$var$cloneDecorators(editor) {\n    const currentDecorators = editor._decorators;\n    const pendingDecorators = Object.assign({}, currentDecorators);\n    editor._pendingDecorators = pendingDecorators;\n    return pendingDecorators;\n}\nfunction $03df355ea183d08a$var$getEditorStateTextContent(editorState) {\n    return editorState.read(()=>$03df355ea183d08a$var$$getRoot().getTextContent());\n}\nfunction $03df355ea183d08a$var$markAllNodesAsDirty(editor, type) {\n    // Mark all existing text nodes as dirty\n    $03df355ea183d08a$var$updateEditor(editor, ()=>{\n        const editorState = $03df355ea183d08a$var$getActiveEditorState();\n        if (editorState.isEmpty()) return;\n        if (type === \"root\") {\n            $03df355ea183d08a$var$$getRoot().markDirty();\n            return;\n        }\n        const nodeMap = editorState._nodeMap;\n        for (const [, node] of nodeMap)node.markDirty();\n    }, editor._pendingEditorState === null ? {\n        tag: \"history-merge\"\n    } : undefined);\n}\nfunction $03df355ea183d08a$var$$getRoot() {\n    return $03df355ea183d08a$var$internalGetRoot($03df355ea183d08a$var$getActiveEditorState());\n}\nfunction $03df355ea183d08a$var$internalGetRoot(editorState) {\n    return editorState._nodeMap.get(\"root\");\n}\nfunction $03df355ea183d08a$var$$setSelection(selection) {\n    $03df355ea183d08a$var$errorOnReadOnly();\n    const editorState = $03df355ea183d08a$var$getActiveEditorState();\n    if (selection !== null) {\n        if (Object.isFrozen(selection)) throw Error(`$setSelection called on frozen selection object. Ensure selection is cloned before passing in.`);\n        selection.dirty = true;\n        selection._cachedNodes = null;\n    }\n    editorState._selection = selection;\n}\nfunction $03df355ea183d08a$var$$flushMutations() {\n    $03df355ea183d08a$var$errorOnReadOnly();\n    const editor = $03df355ea183d08a$var$getActiveEditor();\n    $03df355ea183d08a$var$flushRootMutations(editor);\n}\nfunction $03df355ea183d08a$var$getNodeFromDOM(dom) {\n    const editor = $03df355ea183d08a$var$getActiveEditor();\n    const nodeKey = $03df355ea183d08a$var$getNodeKeyFromDOM(dom, editor);\n    if (nodeKey === null) {\n        const rootElement = editor.getRootElement();\n        if (dom === rootElement) return $03df355ea183d08a$var$$getNodeByKey(\"root\");\n        return null;\n    }\n    return $03df355ea183d08a$var$$getNodeByKey(nodeKey);\n}\nfunction $03df355ea183d08a$var$getTextNodeOffset(node, moveSelectionToEnd) {\n    return moveSelectionToEnd ? node.getTextContentSize() : 0;\n}\nfunction $03df355ea183d08a$var$getNodeKeyFromDOM(dom, editor) {\n    let node = dom;\n    while(node != null){\n        // @ts-ignore We intentionally add this to the Node.\n        const key = node[`__lexicalKey_${editor._key}`];\n        if (key !== undefined) return key;\n        node = $03df355ea183d08a$var$getParentElement(node);\n    }\n    return null;\n}\nfunction $03df355ea183d08a$var$doesContainGrapheme(str) {\n    return /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g.test(str);\n}\nfunction $03df355ea183d08a$var$getEditorsToPropagate(editor) {\n    const editorsToPropagate = [];\n    let currentEditor = editor;\n    while(currentEditor !== null){\n        editorsToPropagate.push(currentEditor);\n        currentEditor = currentEditor._parentEditor;\n    }\n    return editorsToPropagate;\n}\nfunction $03df355ea183d08a$var$createUID() {\n    return Math.random().toString(36).replace(/[^a-z]+/g, \"\").substr(0, 5);\n}\nfunction $03df355ea183d08a$var$getAnchorTextFromDOM(anchorNode) {\n    if (anchorNode.nodeType === $03df355ea183d08a$var$DOM_TEXT_TYPE) return anchorNode.nodeValue;\n    return null;\n}\nfunction $03df355ea183d08a$var$$updateSelectedTextFromDOM(isCompositionEnd, editor, data) {\n    // Update the text content with the latest composition text\n    const domSelection = $03df355ea183d08a$var$getDOMSelection(editor._window);\n    if (domSelection === null) return;\n    const anchorNode = domSelection.anchorNode;\n    let { anchorOffset: anchorOffset , focusOffset: focusOffset  } = domSelection;\n    if (anchorNode !== null) {\n        let textContent = $03df355ea183d08a$var$getAnchorTextFromDOM(anchorNode);\n        const node = $03df355ea183d08a$var$$getNearestNodeFromDOMNode(anchorNode);\n        if (textContent !== null && $03df355ea183d08a$var$$isTextNode(node)) {\n            if (node.canContainTabs()) {\n                const hasTabCharacter = textContent.includes(\"\t\"); // At present, this condition is primarily used for code highlights when\n                // grouped together in lines (divs). If a code highlight includes a tab,\n                // the newly typed character may be missing from the DOM's textContent.\n                // Let's take an example. If a LinedCodeNode looked roughly like this:\n                // <code><div><codeHighlight /><codeHighlight /></div></code>,\n                // the following could occur when using tabs:\n                // a. /tconst --type--> 'd' at offset 1 --get--> /tconst\n                //    - Missing 'd'\n                // b. /tconst --type--> 'd' at offset 3 --get--> /tcondst\n                //    --type--> 'd' at offset 3 --get--> /tcondst\n                //    - Missing second 'd'\n                // In these cases, we can fix the problem by manually inserting the\n                // newly typed character where we know it should have been.\n                if (data && data.length > 0 && hasTabCharacter) {\n                    const selectionOffset = data.length;\n                    const insertionOffset = anchorOffset + selectionOffset - 1;\n                    const beforeInsertion = textContent.slice(0, insertionOffset);\n                    const afterInsertion = textContent.slice(insertionOffset, textContent.length);\n                    textContent = `${beforeInsertion}${data}${afterInsertion}`;\n                    anchorOffset += selectionOffset;\n                    focusOffset += selectionOffset;\n                }\n            } // Data is intentionally truthy, as we check for boolean, null and empty string.\n            if (textContent === $03df355ea183d08a$var$COMPOSITION_SUFFIX && data) {\n                const offset = data.length;\n                textContent = data;\n                anchorOffset = offset;\n                focusOffset = offset;\n            }\n            if (textContent !== null) $03df355ea183d08a$var$$updateTextNodeFromDOMContent(node, textContent, anchorOffset, focusOffset, isCompositionEnd);\n        }\n    }\n}\nfunction $03df355ea183d08a$var$$updateTextNodeFromDOMContent(textNode, textContent, anchorOffset, focusOffset, compositionEnd) {\n    let node = textNode;\n    if (node.isAttached() && (compositionEnd || !node.isDirty())) {\n        const isComposing = node.isComposing();\n        let normalizedTextContent = textContent;\n        if ((isComposing || compositionEnd) && textContent[textContent.length - 1] === $03df355ea183d08a$var$COMPOSITION_SUFFIX) normalizedTextContent = textContent.slice(0, -1);\n        const prevTextContent = node.getTextContent();\n        if (compositionEnd || normalizedTextContent !== prevTextContent) {\n            if (normalizedTextContent === \"\") {\n                $03df355ea183d08a$var$$setCompositionKey(null);\n                if (!$03df355ea183d08a$var$IS_SAFARI && !$03df355ea183d08a$var$IS_IOS && !$03df355ea183d08a$var$IS_APPLE_WEBKIT) {\n                    // For composition (mainly Android), we have to remove the node on a later update\n                    const editor = $03df355ea183d08a$var$getActiveEditor();\n                    setTimeout(()=>{\n                        editor.update(()=>{\n                            if (node.isAttached()) node.remove();\n                        });\n                    }, 20);\n                } else node.remove();\n                return;\n            }\n            const parent = node.getParent();\n            const prevSelection = $03df355ea183d08a$var$$getPreviousSelection();\n            const compositionKey = $03df355ea183d08a$var$$getCompositionKey();\n            const nodeKey = node.getKey();\n            if (node.isToken() || compositionKey !== null && nodeKey === compositionKey && !isComposing || // Check if character was added at the start, and we need\n            // to clear this input from occurring as that action wasn't\n            // permitted.\n            parent !== null && $03df355ea183d08a$var$$isRangeSelection(prevSelection) && !parent.canInsertTextBefore() && prevSelection.anchor.offset === 0) {\n                node.markDirty();\n                return;\n            }\n            const selection = $03df355ea183d08a$var$$getSelection();\n            if (!$03df355ea183d08a$var$$isRangeSelection(selection) || anchorOffset === null || focusOffset === null) {\n                node.setTextContent(normalizedTextContent);\n                return;\n            }\n            selection.setTextNodeRange(node, anchorOffset, node, focusOffset);\n            if (node.isSegmented()) {\n                const originalTextContent = node.getTextContent();\n                const replacement = $03df355ea183d08a$var$$createTextNode(originalTextContent);\n                node.replace(replacement);\n                node = replacement;\n            }\n            node.setTextContent(normalizedTextContent);\n        }\n    }\n}\nfunction $03df355ea183d08a$var$$previousSiblingDoesNotAcceptText(node) {\n    const previousSibling = node.getPreviousSibling();\n    return ($03df355ea183d08a$var$$isTextNode(previousSibling) || $03df355ea183d08a$var$$isElementNode(previousSibling) && previousSibling.isInline()) && !previousSibling.canInsertTextAfter();\n} // This function is connected to $shouldPreventDefaultAndInsertText and determines whether the\n// TextNode boundaries are writable or we should use the previous/next sibling instead. For example,\n// in the case of a LinkNode, boundaries are not writable.\nfunction $03df355ea183d08a$var$$shouldInsertTextAfterOrBeforeTextNode(selection, node) {\n    if (node.isSegmented()) return true;\n    if (!selection.isCollapsed()) return false;\n    const offset = selection.anchor.offset;\n    const parent = node.getParentOrThrow();\n    const isToken = node.isToken();\n    if (offset === 0) return !node.canInsertTextBefore() || !parent.canInsertTextBefore() || isToken || $03df355ea183d08a$var$$previousSiblingDoesNotAcceptText(node);\n    else if (offset === node.getTextContentSize()) return !node.canInsertTextAfter() || !parent.canInsertTextAfter() || isToken;\n    else return false;\n}\nfunction $03df355ea183d08a$var$isTab(keyCode, altKey, ctrlKey, metaKey) {\n    return keyCode === 9 && !altKey && !ctrlKey && !metaKey;\n}\nfunction $03df355ea183d08a$var$isBold(keyCode, altKey, metaKey, ctrlKey) {\n    return keyCode === 66 && !altKey && $03df355ea183d08a$var$controlOrMeta(metaKey, ctrlKey);\n}\nfunction $03df355ea183d08a$var$isItalic(keyCode, altKey, metaKey, ctrlKey) {\n    return keyCode === 73 && !altKey && $03df355ea183d08a$var$controlOrMeta(metaKey, ctrlKey);\n}\nfunction $03df355ea183d08a$var$isUnderline(keyCode, altKey, metaKey, ctrlKey) {\n    return keyCode === 85 && !altKey && $03df355ea183d08a$var$controlOrMeta(metaKey, ctrlKey);\n}\nfunction $03df355ea183d08a$var$isParagraph(keyCode, shiftKey) {\n    return $03df355ea183d08a$var$isReturn(keyCode) && !shiftKey;\n}\nfunction $03df355ea183d08a$var$isLineBreak(keyCode, shiftKey) {\n    return $03df355ea183d08a$var$isReturn(keyCode) && shiftKey;\n} // Inserts a new line after the selection\nfunction $03df355ea183d08a$var$isOpenLineBreak(keyCode, ctrlKey) {\n    // 79 = KeyO\n    return $03df355ea183d08a$var$IS_APPLE && ctrlKey && keyCode === 79;\n}\nfunction $03df355ea183d08a$var$isDeleteWordBackward(keyCode, altKey, ctrlKey) {\n    return $03df355ea183d08a$var$isBackspace(keyCode) && ($03df355ea183d08a$var$IS_APPLE ? altKey : ctrlKey);\n}\nfunction $03df355ea183d08a$var$isDeleteWordForward(keyCode, altKey, ctrlKey) {\n    return $03df355ea183d08a$var$isDelete(keyCode) && ($03df355ea183d08a$var$IS_APPLE ? altKey : ctrlKey);\n}\nfunction $03df355ea183d08a$var$isDeleteLineBackward(keyCode, metaKey) {\n    return $03df355ea183d08a$var$IS_APPLE && metaKey && $03df355ea183d08a$var$isBackspace(keyCode);\n}\nfunction $03df355ea183d08a$var$isDeleteLineForward(keyCode, metaKey) {\n    return $03df355ea183d08a$var$IS_APPLE && metaKey && $03df355ea183d08a$var$isDelete(keyCode);\n}\nfunction $03df355ea183d08a$var$isDeleteBackward(keyCode, altKey, metaKey, ctrlKey) {\n    if ($03df355ea183d08a$var$IS_APPLE) {\n        if (altKey || metaKey) return false;\n        return $03df355ea183d08a$var$isBackspace(keyCode) || keyCode === 72 && ctrlKey;\n    }\n    if (ctrlKey || altKey || metaKey) return false;\n    return $03df355ea183d08a$var$isBackspace(keyCode);\n}\nfunction $03df355ea183d08a$var$isDeleteForward(keyCode, ctrlKey, shiftKey, altKey, metaKey) {\n    if ($03df355ea183d08a$var$IS_APPLE) {\n        if (shiftKey || altKey || metaKey) return false;\n        return $03df355ea183d08a$var$isDelete(keyCode) || keyCode === 68 && ctrlKey;\n    }\n    if (ctrlKey || altKey || metaKey) return false;\n    return $03df355ea183d08a$var$isDelete(keyCode);\n}\nfunction $03df355ea183d08a$var$isUndo(keyCode, shiftKey, metaKey, ctrlKey) {\n    return keyCode === 90 && !shiftKey && $03df355ea183d08a$var$controlOrMeta(metaKey, ctrlKey);\n}\nfunction $03df355ea183d08a$var$isRedo(keyCode, shiftKey, metaKey, ctrlKey) {\n    if ($03df355ea183d08a$var$IS_APPLE) return keyCode === 90 && metaKey && shiftKey;\n    return keyCode === 89 && ctrlKey || keyCode === 90 && ctrlKey && shiftKey;\n}\nfunction $03df355ea183d08a$var$isCopy(keyCode, shiftKey, metaKey, ctrlKey) {\n    if (shiftKey) return false;\n    if (keyCode === 67) return $03df355ea183d08a$var$IS_APPLE ? metaKey : ctrlKey;\n    return false;\n}\nfunction $03df355ea183d08a$var$isCut(keyCode, shiftKey, metaKey, ctrlKey) {\n    if (shiftKey) return false;\n    if (keyCode === 88) return $03df355ea183d08a$var$IS_APPLE ? metaKey : ctrlKey;\n    return false;\n}\nfunction $03df355ea183d08a$var$isArrowLeft(keyCode) {\n    return keyCode === 37;\n}\nfunction $03df355ea183d08a$var$isArrowRight(keyCode) {\n    return keyCode === 39;\n}\nfunction $03df355ea183d08a$var$isArrowUp(keyCode) {\n    return keyCode === 38;\n}\nfunction $03df355ea183d08a$var$isArrowDown(keyCode) {\n    return keyCode === 40;\n}\nfunction $03df355ea183d08a$var$isMoveBackward(keyCode, ctrlKey, altKey, metaKey) {\n    return $03df355ea183d08a$var$isArrowLeft(keyCode) && !ctrlKey && !metaKey && !altKey;\n}\nfunction $03df355ea183d08a$var$isMoveToStart(keyCode, ctrlKey, shiftKey, altKey, metaKey) {\n    return $03df355ea183d08a$var$isArrowLeft(keyCode) && !altKey && !shiftKey && (ctrlKey || metaKey);\n}\nfunction $03df355ea183d08a$var$isMoveForward(keyCode, ctrlKey, altKey, metaKey) {\n    return $03df355ea183d08a$var$isArrowRight(keyCode) && !ctrlKey && !metaKey && !altKey;\n}\nfunction $03df355ea183d08a$var$isMoveToEnd(keyCode, ctrlKey, shiftKey, altKey, metaKey) {\n    return $03df355ea183d08a$var$isArrowRight(keyCode) && !altKey && !shiftKey && (ctrlKey || metaKey);\n}\nfunction $03df355ea183d08a$var$isMoveUp(keyCode, ctrlKey, metaKey) {\n    return $03df355ea183d08a$var$isArrowUp(keyCode) && !ctrlKey && !metaKey;\n}\nfunction $03df355ea183d08a$var$isMoveDown(keyCode, ctrlKey, metaKey) {\n    return $03df355ea183d08a$var$isArrowDown(keyCode) && !ctrlKey && !metaKey;\n}\nfunction $03df355ea183d08a$var$isModifier(ctrlKey, shiftKey, altKey, metaKey) {\n    return ctrlKey || shiftKey || altKey || metaKey;\n}\nfunction $03df355ea183d08a$var$isSpace(keyCode) {\n    return keyCode === 32;\n}\nfunction $03df355ea183d08a$var$controlOrMeta(metaKey, ctrlKey) {\n    if ($03df355ea183d08a$var$IS_APPLE) return metaKey;\n    return ctrlKey;\n}\nfunction $03df355ea183d08a$var$isReturn(keyCode) {\n    return keyCode === 13;\n}\nfunction $03df355ea183d08a$var$isBackspace(keyCode) {\n    return keyCode === 8;\n}\nfunction $03df355ea183d08a$var$isEscape(keyCode) {\n    return keyCode === 27;\n}\nfunction $03df355ea183d08a$var$isDelete(keyCode) {\n    return keyCode === 46;\n}\nfunction $03df355ea183d08a$var$getCachedClassNameArray(classNamesTheme, classNameThemeType) {\n    const classNames = classNamesTheme[classNameThemeType]; // As we're using classList, we need\n    // to handle className tokens that have spaces.\n    // The easiest way to do this to convert the\n    // className tokens to an array that can be\n    // applied to classList.add()/remove().\n    if (typeof classNames === \"string\") {\n        const classNamesArr = classNames.split(\" \");\n        classNamesTheme[classNameThemeType] = classNamesArr;\n        return classNamesArr;\n    }\n    return classNames;\n}\nfunction $03df355ea183d08a$var$setMutatedNode(mutatedNodes, registeredNodes, mutationListeners, node, mutation) {\n    if (mutationListeners.size === 0) return;\n    const nodeType = node.__type;\n    const nodeKey = node.__key;\n    const registeredNode = registeredNodes.get(nodeType);\n    if (registeredNode === undefined) throw Error(`Type ${nodeType} not in registeredNodes`);\n    const klass = registeredNode.klass;\n    let mutatedNodesByType = mutatedNodes.get(klass);\n    if (mutatedNodesByType === undefined) {\n        mutatedNodesByType = new Map();\n        mutatedNodes.set(klass, mutatedNodesByType);\n    }\n    const prevMutation = mutatedNodesByType.get(nodeKey); // If the node has already been \"destroyed\", yet we are\n    // re-making it, then this means a move likely happened.\n    // We should change the mutation to be that of \"updated\"\n    // instead.\n    const isMove = prevMutation === \"destroyed\" && mutation === \"created\";\n    if (prevMutation === undefined || isMove) mutatedNodesByType.set(nodeKey, isMove ? \"updated\" : mutation);\n}\nfunction $03df355ea183d08a$var$$nodesOfType(klass) {\n    const editorState = $03df355ea183d08a$var$getActiveEditorState();\n    const readOnly = editorState._readOnly;\n    const klassType = klass.getType();\n    const nodes = editorState._nodeMap;\n    const nodesOfType = [];\n    for (const [, node] of nodes)if (node instanceof klass && node.__type === klassType && (readOnly || node.isAttached())) nodesOfType.push(node);\n    return nodesOfType;\n}\nfunction $03df355ea183d08a$var$resolveElement(element, isBackward, focusOffset) {\n    const parent = element.getParent();\n    let offset = focusOffset;\n    let block = element;\n    if (parent !== null) {\n        if (isBackward && focusOffset === 0) {\n            offset = block.getIndexWithinParent();\n            block = parent;\n        } else if (!isBackward && focusOffset === block.getChildrenSize()) {\n            offset = block.getIndexWithinParent() + 1;\n            block = parent;\n        }\n    }\n    return block.getChildAtIndex(isBackward ? offset - 1 : offset);\n}\nfunction $03df355ea183d08a$var$$getAdjacentNode(focus, isBackward) {\n    const focusOffset = focus.offset;\n    if (focus.type === \"element\") {\n        const block = focus.getNode();\n        return $03df355ea183d08a$var$resolveElement(block, isBackward, focusOffset);\n    } else {\n        const focusNode = focus.getNode();\n        if (isBackward && focusOffset === 0 || !isBackward && focusOffset === focusNode.getTextContentSize()) {\n            const possibleNode = isBackward ? focusNode.getPreviousSibling() : focusNode.getNextSibling();\n            if (possibleNode === null) return $03df355ea183d08a$var$resolveElement(focusNode.getParentOrThrow(), isBackward, focusNode.getIndexWithinParent() + (isBackward ? 0 : 1));\n            return possibleNode;\n        }\n    }\n    return null;\n}\nfunction $03df355ea183d08a$var$isFirefoxClipboardEvents(editor) {\n    const event = $03df355ea183d08a$var$getWindow(editor).event;\n    const inputType = event && event.inputType;\n    return inputType === \"insertFromPaste\" || inputType === \"insertFromPasteAsQuotation\";\n}\nfunction $03df355ea183d08a$var$dispatchCommand(editor, command, payload) {\n    return $03df355ea183d08a$var$triggerCommandListeners(editor, command, payload);\n}\nfunction $03df355ea183d08a$var$$textContentRequiresDoubleLinebreakAtEnd(node) {\n    return !$03df355ea183d08a$var$$isRootNode(node) && !node.isLastChild() && !node.isInline();\n}\nfunction $03df355ea183d08a$var$getElementByKeyOrThrow(editor, key) {\n    const element = editor._keyToDOMMap.get(key);\n    if (element === undefined) throw Error(`Reconciliation: could not find DOM element for node key ${key}`);\n    return element;\n}\nfunction $03df355ea183d08a$var$getParentElement(node) {\n    const parentElement = node.assignedSlot || node.parentElement;\n    return parentElement !== null && parentElement.nodeType === 11 ? parentElement.host : parentElement;\n}\nfunction $03df355ea183d08a$var$scrollIntoViewIfNeeded(editor, selectionRect, rootElement) {\n    const doc = rootElement.ownerDocument;\n    const defaultView = doc.defaultView;\n    if (defaultView === null) return;\n    let { top: currentTop , bottom: currentBottom  } = selectionRect;\n    let targetTop = 0;\n    let targetBottom = 0;\n    let element = rootElement;\n    while(element !== null){\n        const isBodyElement = element === doc.body;\n        if (isBodyElement) {\n            targetTop = 0;\n            targetBottom = $03df355ea183d08a$var$getWindow(editor).innerHeight;\n        } else {\n            const targetRect = element.getBoundingClientRect();\n            targetTop = targetRect.top;\n            targetBottom = targetRect.bottom;\n        }\n        let diff = 0;\n        if (currentTop < targetTop) diff = -(targetTop - currentTop);\n        else if (currentBottom > targetBottom) diff = currentBottom - targetBottom;\n        if (diff !== 0) {\n            if (isBodyElement) // Only handles scrolling of Y axis\n            defaultView.scrollBy(0, diff);\n            else {\n                const scrollTop = element.scrollTop;\n                element.scrollTop += diff;\n                const yOffset = element.scrollTop - scrollTop;\n                currentTop -= yOffset;\n                currentBottom -= yOffset;\n            }\n        }\n        if (isBodyElement) break;\n        element = $03df355ea183d08a$var$getParentElement(element);\n    }\n}\nfunction $03df355ea183d08a$var$$addUpdateTag(tag) {\n    $03df355ea183d08a$var$errorOnReadOnly();\n    const editor = $03df355ea183d08a$var$getActiveEditor();\n    editor._updateTags.add(tag);\n}\nfunction $03df355ea183d08a$var$$maybeMoveChildrenSelectionToParent(parentNode, offset = 0) {\n    if (offset !== 0) throw Error(`TODO`);\n    const selection = $03df355ea183d08a$var$$getSelection();\n    if (!$03df355ea183d08a$var$$isRangeSelection(selection) || !$03df355ea183d08a$var$$isElementNode(parentNode)) return selection;\n    const { anchor: anchor , focus: focus  } = selection;\n    const anchorNode = anchor.getNode();\n    const focusNode = focus.getNode();\n    if ($03df355ea183d08a$var$$hasAncestor(anchorNode, parentNode)) anchor.set(parentNode.__key, 0, \"element\");\n    if ($03df355ea183d08a$var$$hasAncestor(focusNode, parentNode)) focus.set(parentNode.__key, 0, \"element\");\n    return selection;\n}\nfunction $03df355ea183d08a$var$$hasAncestor(child, targetNode) {\n    let parent = child.getParent();\n    while(parent !== null){\n        if (parent.is(targetNode)) return true;\n        parent = parent.getParent();\n    }\n    return false;\n}\nfunction $03df355ea183d08a$var$getDefaultView(domElem) {\n    const ownerDoc = domElem.ownerDocument;\n    return ownerDoc && ownerDoc.defaultView || null;\n}\nfunction $03df355ea183d08a$var$getWindow(editor) {\n    const windowObj = editor._window;\n    if (windowObj === null) throw Error(`window object not found`);\n    return windowObj;\n}\nfunction $03df355ea183d08a$var$$isInlineElementOrDecoratorNode(node) {\n    return $03df355ea183d08a$var$$isElementNode(node) && node.isInline() || $03df355ea183d08a$var$$isDecoratorNode(node) && node.isInline();\n}\nfunction $03df355ea183d08a$var$$getNearestRootOrShadowRoot(node) {\n    let parent = node.getParentOrThrow();\n    while(parent !== null){\n        if ($03df355ea183d08a$var$$isRootOrShadowRoot(parent)) return parent;\n        parent = parent.getParentOrThrow();\n    }\n    return parent;\n}\nfunction $03df355ea183d08a$var$$isRootOrShadowRoot(node) {\n    return $03df355ea183d08a$var$$isRootNode(node) || $03df355ea183d08a$var$$isElementNode(node) && node.isShadowRoot();\n}\nfunction $03df355ea183d08a$var$$copyNode(node) {\n    // @ts-ignore\n    const copy = node.constructor.clone(node);\n    $03df355ea183d08a$var$$setNodeKey(copy, null);\n    return copy;\n}\nfunction $03df355ea183d08a$var$$applyNodeReplacement(node) {\n    const editor = $03df355ea183d08a$var$getActiveEditor();\n    const nodeType = node.constructor.getType();\n    const registeredNode = editor._nodes.get(nodeType);\n    if (registeredNode === undefined) throw Error(`$initializeNode failed. Ensure node has been registered to the editor. You can do this by passing the node class via the \"nodes\" array in the editor config.`);\n    const replaceFunc = registeredNode.replace;\n    if (replaceFunc !== null) {\n        const replacementNode = replaceFunc(node);\n        if (!(replacementNode instanceof node.constructor)) throw Error(`$initializeNode failed. Ensure replacement node is a subclass of the original node.`);\n        return replacementNode;\n    }\n    return node;\n}\nfunction $03df355ea183d08a$var$errorOnInsertTextNodeOnRoot(node, insertNode) {\n    const parentNode = node.getParent();\n    if ($03df355ea183d08a$var$$isRootNode(parentNode) && !$03df355ea183d08a$var$$isElementNode(insertNode) && !$03df355ea183d08a$var$$isDecoratorNode(insertNode)) throw Error(`Only element or decorator nodes can be inserted in to the root node`);\n}\nfunction $03df355ea183d08a$var$createBlockCursorElement(editorConfig) {\n    const theme = editorConfig.theme;\n    const element = document.createElement(\"div\");\n    element.contentEditable = \"false\";\n    element.setAttribute(\"data-lexical-cursor\", \"true\");\n    let blockCursorTheme = theme.blockCursor;\n    if (blockCursorTheme !== undefined) {\n        if (typeof blockCursorTheme === \"string\") {\n            const classNamesArr = blockCursorTheme.split(\" \"); // @ts-expect-error: intentional\n            blockCursorTheme = theme.blockCursor = classNamesArr;\n        }\n        if (blockCursorTheme !== undefined) element.classList.add(...blockCursorTheme);\n    }\n    return element;\n}\nfunction $03df355ea183d08a$var$needsBlockCursor(node) {\n    return ($03df355ea183d08a$var$$isDecoratorNode(node) || $03df355ea183d08a$var$$isElementNode(node) && !node.canBeEmpty()) && !node.isInline();\n}\nfunction $03df355ea183d08a$var$removeDOMBlockCursorElement(blockCursorElement, editor, rootElement) {\n    rootElement.style.removeProperty(\"caret-color\");\n    editor._blockCursorElement = null;\n    const parentElement = blockCursorElement.parentElement;\n    if (parentElement !== null) parentElement.removeChild(blockCursorElement);\n}\nfunction $03df355ea183d08a$var$updateDOMBlockCursorElement(editor, rootElement, nextSelection) {\n    let blockCursorElement = editor._blockCursorElement;\n    if ($03df355ea183d08a$var$$isRangeSelection(nextSelection) && nextSelection.isCollapsed() && nextSelection.anchor.type === \"element\" && rootElement.contains(document.activeElement)) {\n        const anchor = nextSelection.anchor;\n        const elementNode = anchor.getNode();\n        const offset = anchor.offset;\n        const elementNodeSize = elementNode.getChildrenSize();\n        let isBlockCursor = false;\n        let insertBeforeElement = null;\n        if (offset === elementNodeSize) {\n            const child = elementNode.getChildAtIndex(offset - 1);\n            if ($03df355ea183d08a$var$needsBlockCursor(child)) isBlockCursor = true;\n        } else {\n            const child = elementNode.getChildAtIndex(offset);\n            if ($03df355ea183d08a$var$needsBlockCursor(child)) {\n                const sibling = child.getPreviousSibling();\n                if (sibling === null || $03df355ea183d08a$var$needsBlockCursor(sibling)) {\n                    isBlockCursor = true;\n                    insertBeforeElement = editor.getElementByKey(child.__key);\n                }\n            }\n        }\n        if (isBlockCursor) {\n            const elementDOM = editor.getElementByKey(elementNode.__key);\n            if (blockCursorElement === null) editor._blockCursorElement = blockCursorElement = $03df355ea183d08a$var$createBlockCursorElement(editor._config);\n            rootElement.style.caretColor = \"transparent\";\n            if (insertBeforeElement === null) elementDOM.appendChild(blockCursorElement);\n            else elementDOM.insertBefore(blockCursorElement, insertBeforeElement);\n            return;\n        }\n    } // Remove cursor\n    if (blockCursorElement !== null) $03df355ea183d08a$var$removeDOMBlockCursorElement(blockCursorElement, editor, rootElement);\n}\nfunction $03df355ea183d08a$var$getDOMSelection(targetWindow) {\n    return !$03df355ea183d08a$var$CAN_USE_DOM ? null : (targetWindow || window).getSelection();\n}\nfunction $03df355ea183d08a$var$$splitNode(node, offset) {\n    let startNode = node.getChildAtIndex(offset);\n    if (startNode == null) startNode = node;\n    if (!!$03df355ea183d08a$var$$isRootOrShadowRoot(node)) throw Error(`Can not call $splitNode() on root element`);\n    const recurse = (currentNode)=>{\n        const parent = currentNode.getParentOrThrow();\n        const isParentRoot = $03df355ea183d08a$var$$isRootOrShadowRoot(parent); // The node we start split from (leaf) is moved, but its recursive\n        // parents are copied to create separate tree\n        const nodeToMove = currentNode === startNode && !isParentRoot ? currentNode : $03df355ea183d08a$var$$copyNode(currentNode);\n        if (isParentRoot) {\n            currentNode.insertAfter(nodeToMove);\n            return [\n                currentNode,\n                nodeToMove,\n                nodeToMove\n            ];\n        } else {\n            const [leftTree, rightTree, newParent] = recurse(parent);\n            const nextSiblings = currentNode.getNextSiblings();\n            newParent.append(nodeToMove, ...nextSiblings);\n            return [\n                leftTree,\n                rightTree,\n                nodeToMove\n            ];\n        }\n    };\n    const [leftTree, rightTree] = recurse(startNode);\n    return [\n        leftTree,\n        rightTree\n    ];\n}\nfunction $03df355ea183d08a$var$$findMatchingParent(startingNode, findFn) {\n    let curr = startingNode;\n    while(curr !== $03df355ea183d08a$var$$getRoot() && curr != null){\n        if (findFn(curr)) return curr;\n        curr = curr.getParent();\n    }\n    return null;\n}\nfunction $03df355ea183d08a$var$$getChildrenRecursively(node) {\n    const nodes = [];\n    const stack = [\n        node\n    ];\n    while(stack.length > 0){\n        const currentNode = stack.pop();\n        if (!(currentNode !== undefined)) throw Error(`Stack.length > 0; can't be undefined`);\n        if ($03df355ea183d08a$var$$isElementNode(currentNode)) stack.unshift(...currentNode.getChildren());\n        if (currentNode !== node) nodes.push(currentNode);\n    }\n    return nodes;\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ function $03df355ea183d08a$var$$garbageCollectDetachedDecorators(editor, pendingEditorState) {\n    const currentDecorators = editor._decorators;\n    const pendingDecorators = editor._pendingDecorators;\n    let decorators = pendingDecorators || currentDecorators;\n    const nodeMap = pendingEditorState._nodeMap;\n    let key;\n    for(key in decorators)if (!nodeMap.has(key)) {\n        if (decorators === currentDecorators) decorators = $03df355ea183d08a$var$cloneDecorators(editor);\n        delete decorators[key];\n    }\n}\nfunction $03df355ea183d08a$var$$garbageCollectDetachedDeepChildNodes(node, parentKey, prevNodeMap, nodeMap, dirtyNodes) {\n    let child = node.getFirstChild();\n    while(child !== null){\n        const childKey = child.__key;\n        if (child !== undefined && child.__parent === parentKey) {\n            if ($03df355ea183d08a$var$$isElementNode(child)) $03df355ea183d08a$var$$garbageCollectDetachedDeepChildNodes(child, childKey, prevNodeMap, nodeMap, dirtyNodes);\n             // If we have created a node and it was dereferenced, then also\n            // remove it from out dirty nodes Set.\n            if (!prevNodeMap.has(childKey)) dirtyNodes.delete(childKey);\n            nodeMap.delete(childKey);\n        }\n        child = child.isAttached() ? child.getNextSibling() : null;\n    }\n}\nfunction $03df355ea183d08a$var$$garbageCollectDetachedNodes(prevEditorState, editorState, dirtyLeaves, dirtyElements) {\n    const prevNodeMap = prevEditorState._nodeMap;\n    const nodeMap = editorState._nodeMap;\n    for (const nodeKey of dirtyLeaves){\n        const node = nodeMap.get(nodeKey);\n        if (node !== undefined && !node.isAttached()) {\n            if (!prevNodeMap.has(nodeKey)) dirtyLeaves.delete(nodeKey);\n            nodeMap.delete(nodeKey);\n        }\n    }\n    for (const [nodeKey] of dirtyElements){\n        const node = nodeMap.get(nodeKey);\n        if (node !== undefined) // Garbage collect node and its children if they exist\n        {\n            if (!node.isAttached()) {\n                if ($03df355ea183d08a$var$$isElementNode(node)) $03df355ea183d08a$var$$garbageCollectDetachedDeepChildNodes(node, nodeKey, prevNodeMap, nodeMap, dirtyElements);\n                 // If we have created a node and it was dereferenced, then also\n                // remove it from out dirty nodes Set.\n                if (!prevNodeMap.has(nodeKey)) dirtyElements.delete(nodeKey);\n                nodeMap.delete(nodeKey);\n            }\n        }\n    }\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ function $03df355ea183d08a$var$$canSimpleTextNodesBeMerged(node1, node2) {\n    const node1Mode = node1.__mode;\n    const node1Format = node1.__format;\n    const node1Style = node1.__style;\n    const node2Mode = node2.__mode;\n    const node2Format = node2.__format;\n    const node2Style = node2.__style;\n    return (node1Mode === null || node1Mode === node2Mode) && (node1Format === null || node1Format === node2Format) && (node1Style === null || node1Style === node2Style);\n}\nfunction $03df355ea183d08a$var$$mergeTextNodes(node1, node2) {\n    const writableNode1 = node1.mergeWithSibling(node2);\n    const normalizedNodes = $03df355ea183d08a$var$getActiveEditor()._normalizedNodes;\n    normalizedNodes.add(node1.__key);\n    normalizedNodes.add(node2.__key);\n    return writableNode1;\n}\nfunction $03df355ea183d08a$var$$normalizeTextNode(textNode) {\n    let node = textNode;\n    if (node.__text === \"\" && node.isSimpleText() && !node.isUnmergeable()) {\n        node.remove();\n        return;\n    } // Backward\n    let previousNode;\n    while((previousNode = node.getPreviousSibling()) !== null && $03df355ea183d08a$var$$isTextNode(previousNode) && previousNode.isSimpleText() && !previousNode.isUnmergeable()){\n        if (previousNode.__text === \"\") previousNode.remove();\n        else if ($03df355ea183d08a$var$$canSimpleTextNodesBeMerged(previousNode, node)) {\n            node = $03df355ea183d08a$var$$mergeTextNodes(previousNode, node);\n            break;\n        } else break;\n    } // Forward\n    let nextNode;\n    while((nextNode = node.getNextSibling()) !== null && $03df355ea183d08a$var$$isTextNode(nextNode) && nextNode.isSimpleText() && !nextNode.isUnmergeable()){\n        if (nextNode.__text === \"\") nextNode.remove();\n        else if ($03df355ea183d08a$var$$canSimpleTextNodesBeMerged(node, nextNode)) {\n            node = $03df355ea183d08a$var$$mergeTextNodes(node, nextNode);\n            break;\n        } else break;\n    }\n}\nfunction $03df355ea183d08a$var$$normalizeSelection(selection) {\n    $03df355ea183d08a$var$$normalizePoint(selection.anchor);\n    $03df355ea183d08a$var$$normalizePoint(selection.focus);\n    return selection;\n}\nfunction $03df355ea183d08a$var$$normalizePoint(point) {\n    while(point.type === \"element\"){\n        const node = point.getNode();\n        const offset = point.offset;\n        let nextNode;\n        let nextOffsetAtEnd;\n        if (offset === node.getChildrenSize()) {\n            nextNode = node.getChildAtIndex(offset - 1);\n            nextOffsetAtEnd = true;\n        } else {\n            nextNode = node.getChildAtIndex(offset);\n            nextOffsetAtEnd = false;\n        }\n        if ($03df355ea183d08a$var$$isTextNode(nextNode)) {\n            point.set(nextNode.__key, nextOffsetAtEnd ? nextNode.getTextContentSize() : 0, \"text\");\n            break;\n        } else if (!$03df355ea183d08a$var$$isElementNode(nextNode)) break;\n        point.set(nextNode.__key, nextOffsetAtEnd ? nextNode.getChildrenSize() : 0, \"element\");\n    }\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ let $03df355ea183d08a$var$subTreeTextContent = \"\";\nlet $03df355ea183d08a$var$subTreeDirectionedTextContent = \"\";\nlet $03df355ea183d08a$var$editorTextContent = \"\";\nlet $03df355ea183d08a$var$activeEditorConfig;\nlet $03df355ea183d08a$var$activeEditor$1;\nlet $03df355ea183d08a$var$activeEditorNodes;\nlet $03df355ea183d08a$var$treatAllNodesAsDirty = false;\nlet $03df355ea183d08a$var$activeEditorStateReadOnly = false;\nlet $03df355ea183d08a$var$activeMutationListeners;\nlet $03df355ea183d08a$var$activeTextDirection = null;\nlet $03df355ea183d08a$var$activeDirtyElements;\nlet $03df355ea183d08a$var$activeDirtyLeaves;\nlet $03df355ea183d08a$var$activePrevNodeMap;\nlet $03df355ea183d08a$var$activeNextNodeMap;\nlet $03df355ea183d08a$var$activePrevKeyToDOMMap;\nlet $03df355ea183d08a$var$mutatedNodes;\nfunction $03df355ea183d08a$var$destroyNode(key, parentDOM) {\n    const node = $03df355ea183d08a$var$activePrevNodeMap.get(key);\n    if (parentDOM !== null) {\n        const dom = $03df355ea183d08a$var$getPrevElementByKeyOrThrow(key);\n        if (dom.parentNode === parentDOM) parentDOM.removeChild(dom);\n    } // This logic is really important, otherwise we will leak DOM nodes\n    // when their corresponding LexicalNodes are removed from the editor state.\n    if (!$03df355ea183d08a$var$activeNextNodeMap.has(key)) $03df355ea183d08a$var$activeEditor$1._keyToDOMMap.delete(key);\n    if ($03df355ea183d08a$var$$isElementNode(node)) {\n        const children = $03df355ea183d08a$var$createChildrenArray(node, $03df355ea183d08a$var$activePrevNodeMap);\n        $03df355ea183d08a$var$destroyChildren(children, 0, children.length - 1, null);\n    }\n    if (node !== undefined) $03df355ea183d08a$var$setMutatedNode($03df355ea183d08a$var$mutatedNodes, $03df355ea183d08a$var$activeEditorNodes, $03df355ea183d08a$var$activeMutationListeners, node, \"destroyed\");\n}\nfunction $03df355ea183d08a$var$destroyChildren(children, _startIndex, endIndex, dom) {\n    let startIndex = _startIndex;\n    for(; startIndex <= endIndex; ++startIndex){\n        const child = children[startIndex];\n        if (child !== undefined) $03df355ea183d08a$var$destroyNode(child, dom);\n    }\n}\nfunction $03df355ea183d08a$var$setTextAlign(domStyle, value) {\n    domStyle.setProperty(\"text-align\", value);\n}\nconst $03df355ea183d08a$var$DEFAULT_INDENT_VALUE = \"20px\";\nfunction $03df355ea183d08a$var$setElementIndent(dom, indent) {\n    const indentClassName = $03df355ea183d08a$var$activeEditorConfig.theme.indent;\n    if (typeof indentClassName === \"string\") {\n        const elementHasClassName = dom.classList.contains(indentClassName);\n        if (indent > 0 && !elementHasClassName) dom.classList.add(indentClassName);\n        else if (indent < 1 && elementHasClassName) dom.classList.remove(indentClassName);\n    }\n    const indentationBaseValue = getComputedStyle(dom).getPropertyValue(\"--lexical-indent-base-value\") || $03df355ea183d08a$var$DEFAULT_INDENT_VALUE;\n    dom.style.setProperty(\"padding-inline-start\", indent === 0 ? \"\" : `calc(${indent} * ${indentationBaseValue})`);\n}\nfunction $03df355ea183d08a$var$setElementFormat(dom, format) {\n    const domStyle = dom.style;\n    if (format === 0) $03df355ea183d08a$var$setTextAlign(domStyle, \"\");\n    else if (format === $03df355ea183d08a$var$IS_ALIGN_LEFT) $03df355ea183d08a$var$setTextAlign(domStyle, \"left\");\n    else if (format === $03df355ea183d08a$var$IS_ALIGN_CENTER) $03df355ea183d08a$var$setTextAlign(domStyle, \"center\");\n    else if (format === $03df355ea183d08a$var$IS_ALIGN_RIGHT) $03df355ea183d08a$var$setTextAlign(domStyle, \"right\");\n    else if (format === $03df355ea183d08a$var$IS_ALIGN_JUSTIFY) $03df355ea183d08a$var$setTextAlign(domStyle, \"justify\");\n    else if (format === $03df355ea183d08a$var$IS_ALIGN_START) $03df355ea183d08a$var$setTextAlign(domStyle, \"start\");\n    else if (format === $03df355ea183d08a$var$IS_ALIGN_END) $03df355ea183d08a$var$setTextAlign(domStyle, \"end\");\n}\nfunction $03df355ea183d08a$var$createNode(key, parentDOM, insertDOM) {\n    const node = $03df355ea183d08a$var$activeNextNodeMap.get(key);\n    if (node === undefined) throw Error(`createNode: node does not exist in nodeMap`);\n    const dom = node.createDOM($03df355ea183d08a$var$activeEditorConfig, $03df355ea183d08a$var$activeEditor$1);\n    $03df355ea183d08a$var$storeDOMWithKey(key, dom, $03df355ea183d08a$var$activeEditor$1); // This helps preserve the text, and stops spell check tools from\n    // merging or break the spans (which happens if they are missing\n    // this attribute).\n    if ($03df355ea183d08a$var$$isTextNode(node)) dom.setAttribute(\"data-lexical-text\", \"true\");\n    else if ($03df355ea183d08a$var$$isDecoratorNode(node)) dom.setAttribute(\"data-lexical-decorator\", \"true\");\n    if ($03df355ea183d08a$var$$isElementNode(node)) {\n        const indent = node.__indent;\n        const childrenSize = node.__size;\n        if (indent !== 0) $03df355ea183d08a$var$setElementIndent(dom, indent);\n        if (childrenSize !== 0) {\n            const endIndex = childrenSize - 1;\n            const children = $03df355ea183d08a$var$createChildrenArray(node, $03df355ea183d08a$var$activeNextNodeMap);\n            $03df355ea183d08a$var$createChildrenWithDirection(children, endIndex, node, dom);\n        }\n        const format = node.__format;\n        if (format !== 0) $03df355ea183d08a$var$setElementFormat(dom, format);\n        if (!node.isInline()) $03df355ea183d08a$var$reconcileElementTerminatingLineBreak(null, node, dom);\n        if ($03df355ea183d08a$var$$textContentRequiresDoubleLinebreakAtEnd(node)) {\n            $03df355ea183d08a$var$subTreeTextContent += $03df355ea183d08a$var$DOUBLE_LINE_BREAK;\n            $03df355ea183d08a$var$editorTextContent += $03df355ea183d08a$var$DOUBLE_LINE_BREAK;\n        }\n    } else {\n        const text = node.getTextContent();\n        if ($03df355ea183d08a$var$$isDecoratorNode(node)) {\n            const decorator = node.decorate($03df355ea183d08a$var$activeEditor$1, $03df355ea183d08a$var$activeEditorConfig);\n            if (decorator !== null) $03df355ea183d08a$var$reconcileDecorator(key, decorator);\n             // Decorators are always non editable\n            dom.contentEditable = \"false\";\n        } else if ($03df355ea183d08a$var$$isTextNode(node)) {\n            if (!node.isDirectionless()) $03df355ea183d08a$var$subTreeDirectionedTextContent += text;\n        }\n        $03df355ea183d08a$var$subTreeTextContent += text;\n        $03df355ea183d08a$var$editorTextContent += text;\n    }\n    if (parentDOM !== null) {\n        if (insertDOM != null) parentDOM.insertBefore(dom, insertDOM);\n        else {\n            // @ts-expect-error: internal field\n            const possibleLineBreak = parentDOM.__lexicalLineBreak;\n            if (possibleLineBreak != null) parentDOM.insertBefore(dom, possibleLineBreak);\n            else parentDOM.appendChild(dom);\n        }\n    }\n    // Freeze the node in DEV to prevent accidental mutations\n    Object.freeze(node);\n    $03df355ea183d08a$var$setMutatedNode($03df355ea183d08a$var$mutatedNodes, $03df355ea183d08a$var$activeEditorNodes, $03df355ea183d08a$var$activeMutationListeners, node, \"created\");\n    return dom;\n}\nfunction $03df355ea183d08a$var$createChildrenWithDirection(children, endIndex, element, dom) {\n    const previousSubTreeDirectionedTextContent = $03df355ea183d08a$var$subTreeDirectionedTextContent;\n    $03df355ea183d08a$var$subTreeDirectionedTextContent = \"\";\n    $03df355ea183d08a$var$createChildren(children, element, 0, endIndex, dom, null);\n    $03df355ea183d08a$var$reconcileBlockDirection(element, dom);\n    $03df355ea183d08a$var$subTreeDirectionedTextContent = previousSubTreeDirectionedTextContent;\n}\nfunction $03df355ea183d08a$var$createChildren(children, element, _startIndex, endIndex, dom, insertDOM) {\n    const previousSubTreeTextContent = $03df355ea183d08a$var$subTreeTextContent;\n    $03df355ea183d08a$var$subTreeTextContent = \"\";\n    let startIndex = _startIndex;\n    for(; startIndex <= endIndex; ++startIndex)$03df355ea183d08a$var$createNode(children[startIndex], dom, insertDOM);\n    if ($03df355ea183d08a$var$$textContentRequiresDoubleLinebreakAtEnd(element)) $03df355ea183d08a$var$subTreeTextContent += $03df355ea183d08a$var$DOUBLE_LINE_BREAK;\n     // @ts-expect-error: internal field\n    dom.__lexicalTextContent = $03df355ea183d08a$var$subTreeTextContent;\n    $03df355ea183d08a$var$subTreeTextContent = previousSubTreeTextContent + $03df355ea183d08a$var$subTreeTextContent;\n}\nfunction $03df355ea183d08a$var$isLastChildLineBreakOrDecorator(childKey, nodeMap) {\n    const node = nodeMap.get(childKey);\n    return $03df355ea183d08a$var$$isLineBreakNode(node) || $03df355ea183d08a$var$$isDecoratorNode(node) && node.isInline();\n} // If we end an element with a LineBreakNode, then we need to add an additional <br>\nfunction $03df355ea183d08a$var$reconcileElementTerminatingLineBreak(prevElement, nextElement, dom) {\n    const prevLineBreak = prevElement !== null && (prevElement.__size === 0 || $03df355ea183d08a$var$isLastChildLineBreakOrDecorator(prevElement.__last, $03df355ea183d08a$var$activePrevNodeMap));\n    const nextLineBreak = nextElement.__size === 0 || $03df355ea183d08a$var$isLastChildLineBreakOrDecorator(nextElement.__last, $03df355ea183d08a$var$activeNextNodeMap);\n    if (prevLineBreak) {\n        if (!nextLineBreak) {\n            // @ts-expect-error: internal field\n            const element = dom.__lexicalLineBreak;\n            if (element != null) dom.removeChild(element);\n             // @ts-expect-error: internal field\n            dom.__lexicalLineBreak = null;\n        }\n    } else if (nextLineBreak) {\n        const element = document.createElement(\"br\"); // @ts-expect-error: internal field\n        dom.__lexicalLineBreak = element;\n        dom.appendChild(element);\n    }\n}\nfunction $03df355ea183d08a$var$reconcileBlockDirection(element, dom) {\n    const previousSubTreeDirectionTextContent = dom.__lexicalDirTextContent; // @ts-expect-error: internal field\n    const previousDirection = dom.__lexicalDir;\n    if (previousSubTreeDirectionTextContent !== $03df355ea183d08a$var$subTreeDirectionedTextContent || previousDirection !== $03df355ea183d08a$var$activeTextDirection) {\n        const hasEmptyDirectionedTextContent = $03df355ea183d08a$var$subTreeDirectionedTextContent === \"\";\n        const direction = hasEmptyDirectionedTextContent ? $03df355ea183d08a$var$activeTextDirection : $03df355ea183d08a$var$getTextDirection($03df355ea183d08a$var$subTreeDirectionedTextContent);\n        if (direction !== previousDirection) {\n            const classList = dom.classList;\n            const theme = $03df355ea183d08a$var$activeEditorConfig.theme;\n            let previousDirectionTheme = previousDirection !== null ? theme[previousDirection] : undefined;\n            let nextDirectionTheme = direction !== null ? theme[direction] : undefined; // Remove the old theme classes if they exist\n            if (previousDirectionTheme !== undefined) {\n                if (typeof previousDirectionTheme === \"string\") {\n                    const classNamesArr = previousDirectionTheme.split(\" \");\n                    previousDirectionTheme = theme[previousDirection] = classNamesArr;\n                } // @ts-ignore: intentional\n                classList.remove(...previousDirectionTheme);\n            }\n            if (direction === null || hasEmptyDirectionedTextContent && direction === \"ltr\") // Remove direction\n            dom.removeAttribute(\"dir\");\n            else {\n                // Apply the new theme classes if they exist\n                if (nextDirectionTheme !== undefined) {\n                    if (typeof nextDirectionTheme === \"string\") {\n                        const classNamesArr = nextDirectionTheme.split(\" \"); // @ts-expect-error: intentional\n                        nextDirectionTheme = theme[direction] = classNamesArr;\n                    }\n                    if (nextDirectionTheme !== undefined) classList.add(...nextDirectionTheme);\n                } // Update direction\n                dom.dir = direction;\n            }\n            if (!$03df355ea183d08a$var$activeEditorStateReadOnly) {\n                const writableNode = element.getWritable();\n                writableNode.__dir = direction;\n            }\n        }\n        $03df355ea183d08a$var$activeTextDirection = direction; // @ts-expect-error: internal field\n        dom.__lexicalDirTextContent = $03df355ea183d08a$var$subTreeDirectionedTextContent; // @ts-expect-error: internal field\n        dom.__lexicalDir = direction;\n    }\n}\nfunction $03df355ea183d08a$var$reconcileChildrenWithDirection(prevElement, nextElement, dom) {\n    const previousSubTreeDirectionTextContent = $03df355ea183d08a$var$subTreeDirectionedTextContent;\n    $03df355ea183d08a$var$subTreeDirectionedTextContent = \"\";\n    $03df355ea183d08a$var$reconcileChildren(prevElement, nextElement, dom);\n    $03df355ea183d08a$var$reconcileBlockDirection(nextElement, dom);\n    $03df355ea183d08a$var$subTreeDirectionedTextContent = previousSubTreeDirectionTextContent;\n}\nfunction $03df355ea183d08a$var$createChildrenArray(element, nodeMap) {\n    const children = [];\n    let nodeKey = element.__first;\n    while(nodeKey !== null){\n        const node = nodeMap.get(nodeKey);\n        if (node === undefined) throw Error(`createChildrenArray: node does not exist in nodeMap`);\n        children.push(nodeKey);\n        nodeKey = node.__next;\n    }\n    return children;\n}\nfunction $03df355ea183d08a$var$reconcileChildren(prevElement, nextElement, dom) {\n    const previousSubTreeTextContent = $03df355ea183d08a$var$subTreeTextContent;\n    const prevChildrenSize = prevElement.__size;\n    const nextChildrenSize = nextElement.__size;\n    $03df355ea183d08a$var$subTreeTextContent = \"\";\n    if (prevChildrenSize === 1 && nextChildrenSize === 1) {\n        const prevFirstChildKey = prevElement.__first;\n        const nextFrstChildKey = nextElement.__first;\n        if (prevFirstChildKey === nextFrstChildKey) $03df355ea183d08a$var$reconcileNode(prevFirstChildKey, dom);\n        else {\n            const lastDOM = $03df355ea183d08a$var$getPrevElementByKeyOrThrow(prevFirstChildKey);\n            const replacementDOM = $03df355ea183d08a$var$createNode(nextFrstChildKey, null, null);\n            dom.replaceChild(replacementDOM, lastDOM);\n            $03df355ea183d08a$var$destroyNode(prevFirstChildKey, null);\n        }\n    } else {\n        const prevChildren = $03df355ea183d08a$var$createChildrenArray(prevElement, $03df355ea183d08a$var$activePrevNodeMap);\n        const nextChildren = $03df355ea183d08a$var$createChildrenArray(nextElement, $03df355ea183d08a$var$activeNextNodeMap);\n        if (prevChildrenSize === 0) {\n            if (nextChildrenSize !== 0) $03df355ea183d08a$var$createChildren(nextChildren, nextElement, 0, nextChildrenSize - 1, dom, null);\n        } else if (nextChildrenSize === 0) {\n            if (prevChildrenSize !== 0) {\n                // @ts-expect-error: internal field\n                const lexicalLineBreak = dom.__lexicalLineBreak;\n                const canUseFastPath = lexicalLineBreak == null;\n                $03df355ea183d08a$var$destroyChildren(prevChildren, 0, prevChildrenSize - 1, canUseFastPath ? null : dom);\n                if (canUseFastPath) // Fast path for removing DOM nodes\n                dom.textContent = \"\";\n            }\n        } else $03df355ea183d08a$var$reconcileNodeChildren(nextElement, prevChildren, nextChildren, prevChildrenSize, nextChildrenSize, dom);\n    }\n    if ($03df355ea183d08a$var$$textContentRequiresDoubleLinebreakAtEnd(nextElement)) $03df355ea183d08a$var$subTreeTextContent += $03df355ea183d08a$var$DOUBLE_LINE_BREAK;\n     // @ts-expect-error: internal field\n    dom.__lexicalTextContent = $03df355ea183d08a$var$subTreeTextContent;\n    $03df355ea183d08a$var$subTreeTextContent = previousSubTreeTextContent + $03df355ea183d08a$var$subTreeTextContent;\n}\nfunction $03df355ea183d08a$var$reconcileNode(key, parentDOM) {\n    const prevNode = $03df355ea183d08a$var$activePrevNodeMap.get(key);\n    let nextNode = $03df355ea183d08a$var$activeNextNodeMap.get(key);\n    if (prevNode === undefined || nextNode === undefined) throw Error(`reconcileNode: prevNode or nextNode does not exist in nodeMap`);\n    const isDirty = $03df355ea183d08a$var$treatAllNodesAsDirty || $03df355ea183d08a$var$activeDirtyLeaves.has(key) || $03df355ea183d08a$var$activeDirtyElements.has(key);\n    const dom = $03df355ea183d08a$var$getElementByKeyOrThrow($03df355ea183d08a$var$activeEditor$1, key); // If the node key points to the same instance in both states\n    // and isn't dirty, we just update the text content cache\n    // and return the existing DOM Node.\n    if (prevNode === nextNode && !isDirty) {\n        if ($03df355ea183d08a$var$$isElementNode(prevNode)) {\n            // @ts-expect-error: internal field\n            const previousSubTreeTextContent = dom.__lexicalTextContent;\n            if (previousSubTreeTextContent !== undefined) {\n                $03df355ea183d08a$var$subTreeTextContent += previousSubTreeTextContent;\n                $03df355ea183d08a$var$editorTextContent += previousSubTreeTextContent;\n            } // @ts-expect-error: internal field\n            const previousSubTreeDirectionTextContent = dom.__lexicalDirTextContent;\n            if (previousSubTreeDirectionTextContent !== undefined) $03df355ea183d08a$var$subTreeDirectionedTextContent += previousSubTreeDirectionTextContent;\n        } else {\n            const text = prevNode.getTextContent();\n            if ($03df355ea183d08a$var$$isTextNode(prevNode) && !prevNode.isDirectionless()) $03df355ea183d08a$var$subTreeDirectionedTextContent += text;\n            $03df355ea183d08a$var$editorTextContent += text;\n            $03df355ea183d08a$var$subTreeTextContent += text;\n        }\n        return dom;\n    } // If the node key doesn't point to the same instance in both maps,\n    // it means it were cloned. If they're also dirty, we mark them as mutated.\n    if (prevNode !== nextNode && isDirty) $03df355ea183d08a$var$setMutatedNode($03df355ea183d08a$var$mutatedNodes, $03df355ea183d08a$var$activeEditorNodes, $03df355ea183d08a$var$activeMutationListeners, nextNode, \"updated\");\n     // Update node. If it returns true, we need to unmount and re-create the node\n    if (nextNode.updateDOM(prevNode, dom, $03df355ea183d08a$var$activeEditorConfig)) {\n        const replacementDOM = $03df355ea183d08a$var$createNode(key, null, null);\n        if (parentDOM === null) throw Error(`reconcileNode: parentDOM is null`);\n        parentDOM.replaceChild(replacementDOM, dom);\n        $03df355ea183d08a$var$destroyNode(key, null);\n        return replacementDOM;\n    }\n    if ($03df355ea183d08a$var$$isElementNode(prevNode) && $03df355ea183d08a$var$$isElementNode(nextNode)) {\n        // Reconcile element children\n        const nextIndent = nextNode.__indent;\n        if (nextIndent !== prevNode.__indent) $03df355ea183d08a$var$setElementIndent(dom, nextIndent);\n        const nextFormat = nextNode.__format;\n        if (nextFormat !== prevNode.__format) $03df355ea183d08a$var$setElementFormat(dom, nextFormat);\n        if (isDirty) {\n            $03df355ea183d08a$var$reconcileChildrenWithDirection(prevNode, nextNode, dom);\n            if (!$03df355ea183d08a$var$$isRootNode(nextNode) && !nextNode.isInline()) $03df355ea183d08a$var$reconcileElementTerminatingLineBreak(prevNode, nextNode, dom);\n        }\n        if ($03df355ea183d08a$var$$textContentRequiresDoubleLinebreakAtEnd(nextNode)) {\n            $03df355ea183d08a$var$subTreeTextContent += $03df355ea183d08a$var$DOUBLE_LINE_BREAK;\n            $03df355ea183d08a$var$editorTextContent += $03df355ea183d08a$var$DOUBLE_LINE_BREAK;\n        }\n    } else {\n        const text = nextNode.getTextContent();\n        if ($03df355ea183d08a$var$$isDecoratorNode(nextNode)) {\n            const decorator = nextNode.decorate($03df355ea183d08a$var$activeEditor$1, $03df355ea183d08a$var$activeEditorConfig);\n            if (decorator !== null) $03df355ea183d08a$var$reconcileDecorator(key, decorator);\n        } else if ($03df355ea183d08a$var$$isTextNode(nextNode) && !nextNode.isDirectionless()) // Handle text content, for LTR, LTR cases.\n        $03df355ea183d08a$var$subTreeDirectionedTextContent += text;\n        $03df355ea183d08a$var$subTreeTextContent += text;\n        $03df355ea183d08a$var$editorTextContent += text;\n    }\n    if (!$03df355ea183d08a$var$activeEditorStateReadOnly && $03df355ea183d08a$var$$isRootNode(nextNode) && nextNode.__cachedText !== $03df355ea183d08a$var$editorTextContent) {\n        // Cache the latest text content.\n        nextNode = nextNode.getWritable();\n        nextNode.__cachedText = $03df355ea183d08a$var$editorTextContent;\n    }\n    // Freeze the node in DEV to prevent accidental mutations\n    Object.freeze(nextNode);\n    return dom;\n}\nfunction $03df355ea183d08a$var$reconcileDecorator(key, decorator) {\n    let pendingDecorators = $03df355ea183d08a$var$activeEditor$1._pendingDecorators;\n    const currentDecorators = $03df355ea183d08a$var$activeEditor$1._decorators;\n    if (pendingDecorators === null) {\n        if (currentDecorators[key] === decorator) return;\n        pendingDecorators = $03df355ea183d08a$var$cloneDecorators($03df355ea183d08a$var$activeEditor$1);\n    }\n    pendingDecorators[key] = decorator;\n}\nfunction $03df355ea183d08a$var$getFirstChild(element) {\n    return element.firstChild;\n}\nfunction $03df355ea183d08a$var$getNextSibling(element) {\n    let nextSibling = element.nextSibling;\n    if (nextSibling !== null && nextSibling === $03df355ea183d08a$var$activeEditor$1._blockCursorElement) nextSibling = nextSibling.nextSibling;\n    return nextSibling;\n}\nfunction $03df355ea183d08a$var$reconcileNodeChildren(nextElement, prevChildren, nextChildren, prevChildrenLength, nextChildrenLength, dom) {\n    const prevEndIndex = prevChildrenLength - 1;\n    const nextEndIndex = nextChildrenLength - 1;\n    let prevChildrenSet;\n    let nextChildrenSet;\n    let siblingDOM = $03df355ea183d08a$var$getFirstChild(dom);\n    let prevIndex = 0;\n    let nextIndex = 0;\n    while(prevIndex <= prevEndIndex && nextIndex <= nextEndIndex){\n        const prevKey = prevChildren[prevIndex];\n        const nextKey = nextChildren[nextIndex];\n        if (prevKey === nextKey) {\n            siblingDOM = $03df355ea183d08a$var$getNextSibling($03df355ea183d08a$var$reconcileNode(nextKey, dom));\n            prevIndex++;\n            nextIndex++;\n        } else {\n            if (prevChildrenSet === undefined) prevChildrenSet = new Set(prevChildren);\n            if (nextChildrenSet === undefined) nextChildrenSet = new Set(nextChildren);\n            const nextHasPrevKey = nextChildrenSet.has(prevKey);\n            const prevHasNextKey = prevChildrenSet.has(nextKey);\n            if (!nextHasPrevKey) {\n                // Remove prev\n                siblingDOM = $03df355ea183d08a$var$getNextSibling($03df355ea183d08a$var$getPrevElementByKeyOrThrow(prevKey));\n                $03df355ea183d08a$var$destroyNode(prevKey, dom);\n                prevIndex++;\n            } else if (!prevHasNextKey) {\n                // Create next\n                $03df355ea183d08a$var$createNode(nextKey, dom, siblingDOM);\n                nextIndex++;\n            } else {\n                // Move next\n                const childDOM = $03df355ea183d08a$var$getElementByKeyOrThrow($03df355ea183d08a$var$activeEditor$1, nextKey);\n                if (childDOM === siblingDOM) siblingDOM = $03df355ea183d08a$var$getNextSibling($03df355ea183d08a$var$reconcileNode(nextKey, dom));\n                else {\n                    if (siblingDOM != null) dom.insertBefore(childDOM, siblingDOM);\n                    else dom.appendChild(childDOM);\n                    $03df355ea183d08a$var$reconcileNode(nextKey, dom);\n                }\n                prevIndex++;\n                nextIndex++;\n            }\n        }\n    }\n    const appendNewChildren = prevIndex > prevEndIndex;\n    const removeOldChildren = nextIndex > nextEndIndex;\n    if (appendNewChildren && !removeOldChildren) {\n        const previousNode = nextChildren[nextEndIndex + 1];\n        const insertDOM = previousNode === undefined ? null : $03df355ea183d08a$var$activeEditor$1.getElementByKey(previousNode);\n        $03df355ea183d08a$var$createChildren(nextChildren, nextElement, nextIndex, nextEndIndex, dom, insertDOM);\n    } else if (removeOldChildren && !appendNewChildren) $03df355ea183d08a$var$destroyChildren(prevChildren, prevIndex, prevEndIndex, dom);\n}\nfunction $03df355ea183d08a$var$reconcileRoot(prevEditorState, nextEditorState, editor, dirtyType, dirtyElements, dirtyLeaves) {\n    // We cache text content to make retrieval more efficient.\n    // The cache must be rebuilt during reconciliation to account for any changes.\n    $03df355ea183d08a$var$subTreeTextContent = \"\";\n    $03df355ea183d08a$var$editorTextContent = \"\";\n    $03df355ea183d08a$var$subTreeDirectionedTextContent = \"\"; // Rather than pass around a load of arguments through the stack recursively\n    // we instead set them as bindings within the scope of the module.\n    $03df355ea183d08a$var$treatAllNodesAsDirty = dirtyType === $03df355ea183d08a$var$FULL_RECONCILE;\n    $03df355ea183d08a$var$activeTextDirection = null;\n    $03df355ea183d08a$var$activeEditor$1 = editor;\n    $03df355ea183d08a$var$activeEditorConfig = editor._config;\n    $03df355ea183d08a$var$activeEditorNodes = editor._nodes;\n    $03df355ea183d08a$var$activeMutationListeners = $03df355ea183d08a$var$activeEditor$1._listeners.mutation;\n    $03df355ea183d08a$var$activeDirtyElements = dirtyElements;\n    $03df355ea183d08a$var$activeDirtyLeaves = dirtyLeaves;\n    $03df355ea183d08a$var$activePrevNodeMap = prevEditorState._nodeMap;\n    $03df355ea183d08a$var$activeNextNodeMap = nextEditorState._nodeMap;\n    $03df355ea183d08a$var$activeEditorStateReadOnly = nextEditorState._readOnly;\n    $03df355ea183d08a$var$activePrevKeyToDOMMap = new Map(editor._keyToDOMMap); // We keep track of mutated nodes so we can trigger mutation\n    // listeners later in the update cycle.\n    const currentMutatedNodes = new Map();\n    $03df355ea183d08a$var$mutatedNodes = currentMutatedNodes;\n    $03df355ea183d08a$var$reconcileNode(\"root\", null); // We don't want a bunch of void checks throughout the scope\n    // so instead we make it seem that these values are always set.\n    // We also want to make sure we clear them down, otherwise we\n    // can leak memory.\n    // @ts-ignore\n    $03df355ea183d08a$var$activeEditor$1 = undefined; // @ts-ignore\n    $03df355ea183d08a$var$activeEditorNodes = undefined; // @ts-ignore\n    $03df355ea183d08a$var$activeDirtyElements = undefined; // @ts-ignore\n    $03df355ea183d08a$var$activeDirtyLeaves = undefined; // @ts-ignore\n    $03df355ea183d08a$var$activePrevNodeMap = undefined; // @ts-ignore\n    $03df355ea183d08a$var$activeNextNodeMap = undefined; // @ts-ignore\n    $03df355ea183d08a$var$activeEditorConfig = undefined; // @ts-ignore\n    $03df355ea183d08a$var$activePrevKeyToDOMMap = undefined; // @ts-ignore\n    $03df355ea183d08a$var$mutatedNodes = undefined;\n    return currentMutatedNodes;\n}\nfunction $03df355ea183d08a$var$storeDOMWithKey(key, dom, editor) {\n    const keyToDOMMap = editor._keyToDOMMap; // @ts-ignore We intentionally add this to the Node.\n    dom[\"__lexicalKey_\" + editor._key] = key;\n    keyToDOMMap.set(key, dom);\n}\nfunction $03df355ea183d08a$var$getPrevElementByKeyOrThrow(key) {\n    const element = $03df355ea183d08a$var$activePrevKeyToDOMMap.get(key);\n    if (element === undefined) throw Error(`Reconciliation: could not find DOM element for node key ${key}`);\n    return element;\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ const $03df355ea183d08a$var$PASS_THROUGH_COMMAND = Object.freeze({});\nconst $03df355ea183d08a$var$ANDROID_COMPOSITION_LATENCY = 30;\nconst $03df355ea183d08a$var$rootElementEvents = [\n    [\n        \"keydown\",\n        $03df355ea183d08a$var$onKeyDown\n    ],\n    [\n        \"pointerdown\",\n        $03df355ea183d08a$var$onPointerDown\n    ],\n    [\n        \"compositionstart\",\n        $03df355ea183d08a$var$onCompositionStart\n    ],\n    [\n        \"compositionend\",\n        $03df355ea183d08a$var$onCompositionEnd\n    ],\n    [\n        \"input\",\n        $03df355ea183d08a$var$onInput\n    ],\n    [\n        \"click\",\n        $03df355ea183d08a$var$onClick\n    ],\n    [\n        \"cut\",\n        $03df355ea183d08a$var$PASS_THROUGH_COMMAND\n    ],\n    [\n        \"copy\",\n        $03df355ea183d08a$var$PASS_THROUGH_COMMAND\n    ],\n    [\n        \"dragstart\",\n        $03df355ea183d08a$var$PASS_THROUGH_COMMAND\n    ],\n    [\n        \"dragover\",\n        $03df355ea183d08a$var$PASS_THROUGH_COMMAND\n    ],\n    [\n        \"dragend\",\n        $03df355ea183d08a$var$PASS_THROUGH_COMMAND\n    ],\n    [\n        \"paste\",\n        $03df355ea183d08a$var$PASS_THROUGH_COMMAND\n    ],\n    [\n        \"focus\",\n        $03df355ea183d08a$var$PASS_THROUGH_COMMAND\n    ],\n    [\n        \"blur\",\n        $03df355ea183d08a$var$PASS_THROUGH_COMMAND\n    ],\n    [\n        \"drop\",\n        $03df355ea183d08a$var$PASS_THROUGH_COMMAND\n    ]\n];\nif ($03df355ea183d08a$var$CAN_USE_BEFORE_INPUT) $03df355ea183d08a$var$rootElementEvents.push([\n    \"beforeinput\",\n    (event, editor)=>$03df355ea183d08a$var$onBeforeInput(event, editor)\n]);\nlet $03df355ea183d08a$var$lastKeyDownTimeStamp = 0;\nlet $03df355ea183d08a$var$lastKeyCode = 0;\nlet $03df355ea183d08a$var$lastBeforeInputInsertTextTimeStamp = 0;\nlet $03df355ea183d08a$var$unprocessedBeforeInputData = null;\nlet $03df355ea183d08a$var$rootElementsRegistered = 0;\nlet $03df355ea183d08a$var$isSelectionChangeFromDOMUpdate = false;\nlet $03df355ea183d08a$var$isSelectionChangeFromMouseDown = false;\nlet $03df355ea183d08a$var$isInsertLineBreak = false;\nlet $03df355ea183d08a$var$isFirefoxEndingComposition = false;\nlet $03df355ea183d08a$var$collapsedSelectionFormat = [\n    0,\n    \"\",\n    0,\n    \"root\",\n    0\n]; // This function is used to determine if Lexical should attempt to override\n// the default browser behavior for insertion of text and use its own internal\n// heuristics. This is an extremely important function, and makes much of Lexical\n// work as intended between different browsers and across word, line and character\n// boundary/formats. It also is important for text replacement, node schemas and\n// composition mechanics.\nfunction $03df355ea183d08a$var$$shouldPreventDefaultAndInsertText(selection, domTargetRange, text, timeStamp, isBeforeInput) {\n    const anchor = selection.anchor;\n    const focus = selection.focus;\n    const anchorNode = anchor.getNode();\n    const editor = $03df355ea183d08a$var$getActiveEditor();\n    const domSelection = $03df355ea183d08a$var$getDOMSelection(editor._window);\n    const domAnchorNode = domSelection !== null ? domSelection.anchorNode : null;\n    const anchorKey = anchor.key;\n    const backingAnchorElement = editor.getElementByKey(anchorKey);\n    const textLength = text.length;\n    return anchorKey !== focus.key || // If we're working with a non-text node.\n    !$03df355ea183d08a$var$$isTextNode(anchorNode) || // If we are replacing a range with a single character or grapheme, and not composing.\n    (!isBeforeInput && (!$03df355ea183d08a$var$CAN_USE_BEFORE_INPUT || // We check to see if there has been\n    // a recent beforeinput event for \"textInput\". If there has been one in the last\n    // 50ms then we proceed as normal. However, if there is not, then this is likely\n    // a dangling `input` event caused by execCommand('insertText').\n    $03df355ea183d08a$var$lastBeforeInputInsertTextTimeStamp < timeStamp + 50) || anchorNode.isDirty() && textLength < 2 || $03df355ea183d08a$var$doesContainGrapheme(text)) && anchor.offset !== focus.offset && !anchorNode.isComposing() || // Any non standard text node.\n    $03df355ea183d08a$var$$isTokenOrSegmented(anchorNode) || // If the text length is more than a single character and we're either\n    // dealing with this in \"beforeinput\" or where the node has already recently\n    // been changed (thus is dirty).\n    anchorNode.isDirty() && textLength > 1 || // If the DOM selection element is not the same as the backing node during beforeinput.\n    (isBeforeInput || !$03df355ea183d08a$var$CAN_USE_BEFORE_INPUT) && backingAnchorElement !== null && !anchorNode.isComposing() && domAnchorNode !== $03df355ea183d08a$var$getDOMTextNode(backingAnchorElement) || // If TargetRange is not the same as the DOM selection; browser trying to edit random parts\n    // of the editor.\n    domSelection !== null && domTargetRange !== null && (!domTargetRange.collapsed || domTargetRange.startContainer !== domSelection.anchorNode || domTargetRange.startOffset !== domSelection.anchorOffset) || // Check if we're changing from bold to italics, or some other format.\n    anchorNode.getFormat() !== selection.format || anchorNode.getStyle() !== selection.style || // One last set of heuristics to check against.\n    $03df355ea183d08a$var$$shouldInsertTextAfterOrBeforeTextNode(selection, anchorNode);\n}\nfunction $03df355ea183d08a$var$shouldSkipSelectionChange(domNode, offset) {\n    return domNode !== null && domNode.nodeValue !== null && domNode.nodeType === $03df355ea183d08a$var$DOM_TEXT_TYPE && offset !== 0 && offset !== domNode.nodeValue.length;\n}\nfunction $03df355ea183d08a$var$onSelectionChange(domSelection, editor, isActive) {\n    const { anchorNode: anchorDOM , anchorOffset: anchorOffset , focusNode: focusDOM , focusOffset: focusOffset  } = domSelection;\n    if ($03df355ea183d08a$var$isSelectionChangeFromDOMUpdate) {\n        $03df355ea183d08a$var$isSelectionChangeFromDOMUpdate = false; // If native DOM selection is on a DOM element, then\n        // we should continue as usual, as Lexical's selection\n        // may have normalized to a better child. If the DOM\n        // element is a text node, we can safely apply this\n        // optimization and skip the selection change entirely.\n        // We also need to check if the offset is at the boundary,\n        // because in this case, we might need to normalize to a\n        // sibling instead.\n        if ($03df355ea183d08a$var$shouldSkipSelectionChange(anchorDOM, anchorOffset) && $03df355ea183d08a$var$shouldSkipSelectionChange(focusDOM, focusOffset)) return;\n    }\n    $03df355ea183d08a$var$updateEditor(editor, ()=>{\n        // Non-active editor don't need any extra logic for selection, it only needs update\n        // to reconcile selection (set it to null) to ensure that only one editor has non-null selection.\n        if (!isActive) {\n            $03df355ea183d08a$var$$setSelection(null);\n            return;\n        }\n        if (!$03df355ea183d08a$var$isSelectionWithinEditor(editor, anchorDOM, focusDOM)) return;\n        const selection = $03df355ea183d08a$var$$getSelection(); // Update the selection format\n        if ($03df355ea183d08a$var$$isRangeSelection(selection)) {\n            const anchor = selection.anchor;\n            const anchorNode = anchor.getNode();\n            if (selection.isCollapsed()) {\n                // Badly interpreted range selection when collapsed - #1482\n                if (domSelection.type === \"Range\" && domSelection.anchorNode === domSelection.focusNode) selection.dirty = true;\n                 // If we have marked a collapsed selection format, and we're\n                // within the given time range – then attempt to use that format\n                // instead of getting the format from the anchor node.\n                const windowEvent = $03df355ea183d08a$var$getWindow(editor).event;\n                const currentTimeStamp = windowEvent ? windowEvent.timeStamp : performance.now();\n                const [lastFormat, lastStyle, lastOffset, lastKey, timeStamp] = $03df355ea183d08a$var$collapsedSelectionFormat;\n                if (currentTimeStamp < timeStamp + 200 && anchor.offset === lastOffset && anchor.key === lastKey) {\n                    selection.format = lastFormat;\n                    selection.style = lastStyle;\n                } else {\n                    if (anchor.type === \"text\") {\n                        selection.format = anchorNode.getFormat();\n                        selection.style = anchorNode.getStyle();\n                    } else if (anchor.type === \"element\") {\n                        selection.format = 0;\n                        selection.style = \"\";\n                    }\n                }\n            } else {\n                let combinedFormat = $03df355ea183d08a$var$IS_ALL_FORMATTING;\n                let hasTextNodes = false;\n                const nodes = selection.getNodes();\n                const nodesLength = nodes.length;\n                for(let i = 0; i < nodesLength; i++){\n                    const node = nodes[i];\n                    if ($03df355ea183d08a$var$$isTextNode(node)) {\n                        // TODO: what about style?\n                        hasTextNodes = true;\n                        combinedFormat &= node.getFormat();\n                        if (combinedFormat === 0) break;\n                    }\n                }\n                selection.format = hasTextNodes ? combinedFormat : 0;\n            }\n        }\n        $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$SELECTION_CHANGE_COMMAND, undefined);\n    });\n} // This is a work-around is mainly Chrome specific bug where if you select\n// the contents of an empty block, you cannot easily unselect anything.\n// This results in a tiny selection box that looks buggy/broken. This can\n// also help other browsers when selection might \"appear\" lost, when it\n// really isn't.\nfunction $03df355ea183d08a$var$onClick(event, editor) {\n    $03df355ea183d08a$var$updateEditor(editor, ()=>{\n        const selection = $03df355ea183d08a$var$$getSelection();\n        const domSelection = $03df355ea183d08a$var$getDOMSelection(editor._window);\n        const lastSelection = $03df355ea183d08a$var$$getPreviousSelection();\n        if ($03df355ea183d08a$var$$isRangeSelection(selection)) {\n            const anchor = selection.anchor;\n            const anchorNode = anchor.getNode();\n            if (domSelection && anchor.type === \"element\" && anchor.offset === 0 && selection.isCollapsed() && !$03df355ea183d08a$var$$isRootNode(anchorNode) && $03df355ea183d08a$var$$getRoot().getChildrenSize() === 1 && anchorNode.getTopLevelElementOrThrow().isEmpty() && lastSelection !== null && selection.is(lastSelection)) {\n                domSelection.removeAllRanges();\n                selection.dirty = true;\n            }\n        }\n        $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$CLICK_COMMAND, event);\n    });\n}\nfunction $03df355ea183d08a$var$onPointerDown(event, editor) {\n    // TODO implement text drag & drop\n    const target = event.target;\n    const pointerType = event.pointerType;\n    if (target instanceof Node && pointerType !== \"touch\") $03df355ea183d08a$var$updateEditor(editor, ()=>{\n        // Drag & drop should not recompute selection until mouse up; otherwise the initially\n        // selected content is lost.\n        if (!$03df355ea183d08a$var$$isSelectionCapturedInDecorator(target)) $03df355ea183d08a$var$isSelectionChangeFromMouseDown = true;\n    });\n}\nfunction $03df355ea183d08a$var$getTargetRange(event) {\n    if (!event.getTargetRanges) return null;\n    const targetRanges = event.getTargetRanges();\n    if (targetRanges.length === 0) return null;\n    return targetRanges[0];\n}\nfunction $03df355ea183d08a$var$$canRemoveText(anchorNode, focusNode) {\n    return anchorNode !== focusNode || $03df355ea183d08a$var$$isElementNode(anchorNode) || $03df355ea183d08a$var$$isElementNode(focusNode) || !anchorNode.isToken() || !focusNode.isToken();\n}\nfunction $03df355ea183d08a$var$isPossiblyAndroidKeyPress(timeStamp) {\n    return $03df355ea183d08a$var$lastKeyCode === 229 && timeStamp < $03df355ea183d08a$var$lastKeyDownTimeStamp + $03df355ea183d08a$var$ANDROID_COMPOSITION_LATENCY;\n}\nfunction $03df355ea183d08a$var$onBeforeInput(event, editor) {\n    const inputType = event.inputType;\n    const targetRange = $03df355ea183d08a$var$getTargetRange(event); // We let the browser do its own thing for composition.\n    if (inputType === \"deleteCompositionText\" || // If we're pasting in FF, we shouldn't get this event\n    // as the `paste` event should have triggered, unless the\n    // user has dom.event.clipboardevents.enabled disabled in\n    // about:config. In that case, we need to process the\n    // pasted content in the DOM mutation phase.\n    $03df355ea183d08a$var$IS_FIREFOX && $03df355ea183d08a$var$isFirefoxClipboardEvents(editor)) return;\n    else if (inputType === \"insertCompositionText\") return;\n    $03df355ea183d08a$var$updateEditor(editor, ()=>{\n        const selection = $03df355ea183d08a$var$$getSelection();\n        if (inputType === \"deleteContentBackward\") {\n            if (selection === null) {\n                // Use previous selection\n                const prevSelection = $03df355ea183d08a$var$$getPreviousSelection();\n                if (!$03df355ea183d08a$var$$isRangeSelection(prevSelection)) return;\n                $03df355ea183d08a$var$$setSelection(prevSelection.clone());\n            }\n            if ($03df355ea183d08a$var$$isRangeSelection(selection)) {\n                // Used for handling backspace in Android.\n                if ($03df355ea183d08a$var$isPossiblyAndroidKeyPress(event.timeStamp) && editor.isComposing() && selection.anchor.key === selection.focus.key) {\n                    $03df355ea183d08a$var$$setCompositionKey(null);\n                    $03df355ea183d08a$var$lastKeyDownTimeStamp = 0; // Fixes an Android bug where selection flickers when backspacing\n                    setTimeout(()=>{\n                        $03df355ea183d08a$var$updateEditor(editor, ()=>{\n                            $03df355ea183d08a$var$$setCompositionKey(null);\n                        });\n                    }, $03df355ea183d08a$var$ANDROID_COMPOSITION_LATENCY);\n                    if ($03df355ea183d08a$var$$isRangeSelection(selection)) {\n                        const anchorNode = selection.anchor.getNode();\n                        anchorNode.markDirty();\n                        selection.format = anchorNode.getFormat();\n                        selection.style = anchorNode.getStyle();\n                    }\n                } else {\n                    event.preventDefault();\n                    $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$DELETE_CHARACTER_COMMAND, true);\n                }\n                return;\n            }\n        }\n        if (!$03df355ea183d08a$var$$isRangeSelection(selection)) return;\n        const data = event.data; // This represents the case when two beforeinput events are triggered at the same time (without a\n        // full event loop ending at input). This happens with MacOS with the default keyboard settings,\n        // a combination of autocorrection + autocapitalization.\n        // Having Lexical run everything in controlled mode would fix the issue without additional code\n        // but this would kill the massive performance win from the most common typing event.\n        // Alternatively, when this happens we can prematurely update our EditorState based on the DOM\n        // content, a job that would usually be the input event's responsibility.\n        if ($03df355ea183d08a$var$unprocessedBeforeInputData !== null) $03df355ea183d08a$var$$updateSelectedTextFromDOM(false, editor, $03df355ea183d08a$var$unprocessedBeforeInputData);\n        if ((!selection.dirty || $03df355ea183d08a$var$unprocessedBeforeInputData !== null) && selection.isCollapsed() && !$03df355ea183d08a$var$$isRootNode(selection.anchor.getNode()) && targetRange !== null) selection.applyDOMRange(targetRange);\n        $03df355ea183d08a$var$unprocessedBeforeInputData = null;\n        const anchor = selection.anchor;\n        const focus = selection.focus;\n        const anchorNode = anchor.getNode();\n        const focusNode = focus.getNode();\n        if (inputType === \"insertText\" || inputType === \"insertTranspose\") {\n            if (data === \"\\n\") {\n                event.preventDefault();\n                $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$INSERT_LINE_BREAK_COMMAND, false);\n            } else if (data === $03df355ea183d08a$var$DOUBLE_LINE_BREAK) {\n                event.preventDefault();\n                $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$INSERT_PARAGRAPH_COMMAND, undefined);\n            } else if (data == null && event.dataTransfer) {\n                // Gets around a Safari text replacement bug.\n                const text = event.dataTransfer.getData(\"text/plain\");\n                event.preventDefault();\n                selection.insertRawText(text);\n            } else if (data != null && $03df355ea183d08a$var$$shouldPreventDefaultAndInsertText(selection, targetRange, data, event.timeStamp, true)) {\n                event.preventDefault();\n                $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$CONTROLLED_TEXT_INSERTION_COMMAND, data);\n            } else $03df355ea183d08a$var$unprocessedBeforeInputData = data;\n            $03df355ea183d08a$var$lastBeforeInputInsertTextTimeStamp = event.timeStamp;\n            return;\n        } // Prevent the browser from carrying out\n        // the input event, so we can control the\n        // output.\n        event.preventDefault();\n        switch(inputType){\n            case \"insertFromYank\":\n            case \"insertFromDrop\":\n            case \"insertReplacementText\":\n                $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$CONTROLLED_TEXT_INSERTION_COMMAND, event);\n                break;\n            case \"insertFromComposition\":\n                // This is the end of composition\n                $03df355ea183d08a$var$$setCompositionKey(null);\n                $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$CONTROLLED_TEXT_INSERTION_COMMAND, event);\n                break;\n            case \"insertLineBreak\":\n                // Used for Android\n                $03df355ea183d08a$var$$setCompositionKey(null);\n                $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$INSERT_LINE_BREAK_COMMAND, false);\n                break;\n            case \"insertParagraph\":\n                // Used for Android\n                $03df355ea183d08a$var$$setCompositionKey(null); // Some browsers do not provide the type \"insertLineBreak\".\n                // So instead, we need to infer it from the keyboard event.\n                if ($03df355ea183d08a$var$isInsertLineBreak) {\n                    $03df355ea183d08a$var$isInsertLineBreak = false;\n                    $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$INSERT_LINE_BREAK_COMMAND, false);\n                } else $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$INSERT_PARAGRAPH_COMMAND, undefined);\n                break;\n            case \"insertFromPaste\":\n            case \"insertFromPasteAsQuotation\":\n                $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$PASTE_COMMAND, event);\n                break;\n            case \"deleteByComposition\":\n                if ($03df355ea183d08a$var$$canRemoveText(anchorNode, focusNode)) $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$REMOVE_TEXT_COMMAND, undefined);\n                break;\n            case \"deleteByDrag\":\n            case \"deleteByCut\":\n                $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$REMOVE_TEXT_COMMAND, undefined);\n                break;\n            case \"deleteContent\":\n                $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$DELETE_CHARACTER_COMMAND, false);\n                break;\n            case \"deleteWordBackward\":\n                $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$DELETE_WORD_COMMAND, true);\n                break;\n            case \"deleteWordForward\":\n                $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$DELETE_WORD_COMMAND, false);\n                break;\n            case \"deleteHardLineBackward\":\n            case \"deleteSoftLineBackward\":\n                $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$DELETE_LINE_COMMAND, true);\n                break;\n            case \"deleteContentForward\":\n            case \"deleteHardLineForward\":\n            case \"deleteSoftLineForward\":\n                $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$DELETE_LINE_COMMAND, false);\n                break;\n            case \"formatStrikeThrough\":\n                $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$FORMAT_TEXT_COMMAND, \"strikethrough\");\n                break;\n            case \"formatBold\":\n                $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$FORMAT_TEXT_COMMAND, \"bold\");\n                break;\n            case \"formatItalic\":\n                $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$FORMAT_TEXT_COMMAND, \"italic\");\n                break;\n            case \"formatUnderline\":\n                $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$FORMAT_TEXT_COMMAND, \"underline\");\n                break;\n            case \"historyUndo\":\n                $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$UNDO_COMMAND, undefined);\n                break;\n            case \"historyRedo\":\n                $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$REDO_COMMAND, undefined);\n                break;\n        }\n    });\n}\nfunction $03df355ea183d08a$var$onInput(event, editor) {\n    // We don't want the onInput to bubble, in the case of nested editors.\n    event.stopPropagation();\n    $03df355ea183d08a$var$updateEditor(editor, ()=>{\n        const selection = $03df355ea183d08a$var$$getSelection();\n        const data = event.data;\n        const targetRange = $03df355ea183d08a$var$getTargetRange(event);\n        if (data != null && $03df355ea183d08a$var$$isRangeSelection(selection) && $03df355ea183d08a$var$$shouldPreventDefaultAndInsertText(selection, targetRange, data, event.timeStamp, false)) {\n            // Given we're over-riding the default behavior, we will need\n            // to ensure to disable composition before dispatching the\n            // insertText command for when changing the sequence for FF.\n            if ($03df355ea183d08a$var$isFirefoxEndingComposition) {\n                $03df355ea183d08a$var$onCompositionEndImpl(editor, data);\n                $03df355ea183d08a$var$isFirefoxEndingComposition = false;\n            }\n            const anchor = selection.anchor;\n            const anchorNode = anchor.getNode();\n            const domSelection = $03df355ea183d08a$var$getDOMSelection(editor._window);\n            if (domSelection === null) return;\n            const offset = anchor.offset; // If the content is the same as inserted, then don't dispatch an insertion.\n            // Given onInput doesn't take the current selection (it uses the previous)\n            // we can compare that against what the DOM currently says.\n            if (!$03df355ea183d08a$var$CAN_USE_BEFORE_INPUT || selection.isCollapsed() || !$03df355ea183d08a$var$$isTextNode(anchorNode) || domSelection.anchorNode === null || anchorNode.getTextContent().slice(0, offset) + data + anchorNode.getTextContent().slice(offset + selection.focus.offset) !== $03df355ea183d08a$var$getAnchorTextFromDOM(domSelection.anchorNode)) $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$CONTROLLED_TEXT_INSERTION_COMMAND, data);\n            const textLength = data.length; // Another hack for FF, as it's possible that the IME is still\n            // open, even though compositionend has already fired (sigh).\n            if ($03df355ea183d08a$var$IS_FIREFOX && textLength > 1 && event.inputType === \"insertCompositionText\" && !editor.isComposing()) selection.anchor.offset -= textLength;\n             // This ensures consistency on Android.\n            if (!$03df355ea183d08a$var$IS_SAFARI && !$03df355ea183d08a$var$IS_IOS && !$03df355ea183d08a$var$IS_APPLE_WEBKIT && editor.isComposing()) {\n                $03df355ea183d08a$var$lastKeyDownTimeStamp = 0;\n                $03df355ea183d08a$var$$setCompositionKey(null);\n            }\n        } else {\n            const characterData = data !== null ? data : undefined;\n            $03df355ea183d08a$var$$updateSelectedTextFromDOM(false, editor, characterData); // onInput always fires after onCompositionEnd for FF.\n            if ($03df355ea183d08a$var$isFirefoxEndingComposition) {\n                $03df355ea183d08a$var$onCompositionEndImpl(editor, data || undefined);\n                $03df355ea183d08a$var$isFirefoxEndingComposition = false;\n            }\n        } // Also flush any other mutations that might have occurred\n        // since the change.\n        $03df355ea183d08a$var$$flushMutations();\n    });\n    $03df355ea183d08a$var$unprocessedBeforeInputData = null;\n}\nfunction $03df355ea183d08a$var$onCompositionStart(event, editor) {\n    $03df355ea183d08a$var$updateEditor(editor, ()=>{\n        const selection = $03df355ea183d08a$var$$getSelection();\n        if ($03df355ea183d08a$var$$isRangeSelection(selection) && !editor.isComposing()) {\n            const anchor = selection.anchor;\n            const node = selection.anchor.getNode();\n            $03df355ea183d08a$var$$setCompositionKey(anchor.key);\n            if (// apply the empty space heuristic. We can't do this for Safari,\n            // as the keydown fires after composition start.\n            event.timeStamp < $03df355ea183d08a$var$lastKeyDownTimeStamp + $03df355ea183d08a$var$ANDROID_COMPOSITION_LATENCY || // FF has issues around composing multibyte characters, so we also\n            // need to invoke the empty space heuristic below.\n            anchor.type === \"element\" || !selection.isCollapsed() || node.getFormat() !== selection.format || node.getStyle() !== selection.style) // We insert a zero width character, ready for the composition\n            // to get inserted into the new node we create. If\n            // we don't do this, Safari will fail on us because\n            // there is no text node matching the selection.\n            $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$CONTROLLED_TEXT_INSERTION_COMMAND, $03df355ea183d08a$var$COMPOSITION_START_CHAR);\n        }\n    });\n}\nfunction $03df355ea183d08a$var$onCompositionEndImpl(editor, data) {\n    const compositionKey = editor._compositionKey;\n    $03df355ea183d08a$var$$setCompositionKey(null); // Handle termination of composition.\n    if (compositionKey !== null && data != null) {\n        // Composition can sometimes move to an adjacent DOM node when backspacing.\n        // So check for the empty case.\n        if (data === \"\") {\n            const node = $03df355ea183d08a$var$$getNodeByKey(compositionKey);\n            const textNode = $03df355ea183d08a$var$getDOMTextNode(editor.getElementByKey(compositionKey));\n            if (textNode !== null && textNode.nodeValue !== null && $03df355ea183d08a$var$$isTextNode(node)) $03df355ea183d08a$var$$updateTextNodeFromDOMContent(node, textNode.nodeValue, null, null, true);\n            return;\n        } // Composition can sometimes be that of a new line. In which case, we need to\n        // handle that accordingly.\n        if (data[data.length - 1] === \"\\n\") {\n            const selection = $03df355ea183d08a$var$$getSelection();\n            if ($03df355ea183d08a$var$$isRangeSelection(selection)) {\n                // If the last character is a line break, we also need to insert\n                // a line break.\n                const focus = selection.focus;\n                selection.anchor.set(focus.key, focus.offset, focus.type);\n                $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$KEY_ENTER_COMMAND, null);\n                return;\n            }\n        }\n    }\n    $03df355ea183d08a$var$$updateSelectedTextFromDOM(true, editor, data);\n}\nfunction $03df355ea183d08a$var$onCompositionEnd(event, editor) {\n    // Firefox fires onCompositionEnd before onInput, but Chrome/Webkit,\n    // fire onInput before onCompositionEnd. To ensure the sequence works\n    // like Chrome/Webkit we use the isFirefoxEndingComposition flag to\n    // defer handling of onCompositionEnd in Firefox till we have processed\n    // the logic in onInput.\n    if ($03df355ea183d08a$var$IS_FIREFOX) $03df355ea183d08a$var$isFirefoxEndingComposition = true;\n    else $03df355ea183d08a$var$updateEditor(editor, ()=>{\n        $03df355ea183d08a$var$onCompositionEndImpl(editor, event.data);\n    });\n}\nfunction $03df355ea183d08a$var$onKeyDown(event, editor) {\n    $03df355ea183d08a$var$lastKeyDownTimeStamp = event.timeStamp;\n    $03df355ea183d08a$var$lastKeyCode = event.keyCode;\n    if (editor.isComposing()) return;\n    const { keyCode: keyCode , shiftKey: shiftKey , ctrlKey: ctrlKey , metaKey: metaKey , altKey: altKey  } = event;\n    if ($03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$KEY_DOWN_COMMAND, event)) return;\n    if ($03df355ea183d08a$var$isMoveForward(keyCode, ctrlKey, altKey, metaKey)) $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$KEY_ARROW_RIGHT_COMMAND, event);\n    else if ($03df355ea183d08a$var$isMoveToEnd(keyCode, ctrlKey, shiftKey, altKey, metaKey)) $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$MOVE_TO_END, event);\n    else if ($03df355ea183d08a$var$isMoveBackward(keyCode, ctrlKey, altKey, metaKey)) $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$KEY_ARROW_LEFT_COMMAND, event);\n    else if ($03df355ea183d08a$var$isMoveToStart(keyCode, ctrlKey, shiftKey, altKey, metaKey)) $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$MOVE_TO_START, event);\n    else if ($03df355ea183d08a$var$isMoveUp(keyCode, ctrlKey, metaKey)) $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$KEY_ARROW_UP_COMMAND, event);\n    else if ($03df355ea183d08a$var$isMoveDown(keyCode, ctrlKey, metaKey)) $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$KEY_ARROW_DOWN_COMMAND, event);\n    else if ($03df355ea183d08a$var$isLineBreak(keyCode, shiftKey)) {\n        $03df355ea183d08a$var$isInsertLineBreak = true;\n        $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$KEY_ENTER_COMMAND, event);\n    } else if ($03df355ea183d08a$var$isSpace(keyCode)) $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$KEY_SPACE_COMMAND, event);\n    else if ($03df355ea183d08a$var$isOpenLineBreak(keyCode, ctrlKey)) {\n        event.preventDefault();\n        $03df355ea183d08a$var$isInsertLineBreak = true;\n        $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$INSERT_LINE_BREAK_COMMAND, true);\n    } else if ($03df355ea183d08a$var$isParagraph(keyCode, shiftKey)) {\n        $03df355ea183d08a$var$isInsertLineBreak = false;\n        $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$KEY_ENTER_COMMAND, event);\n    } else if ($03df355ea183d08a$var$isDeleteBackward(keyCode, altKey, metaKey, ctrlKey)) {\n        if ($03df355ea183d08a$var$isBackspace(keyCode)) $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$KEY_BACKSPACE_COMMAND, event);\n        else {\n            event.preventDefault();\n            $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$DELETE_CHARACTER_COMMAND, true);\n        }\n    } else if ($03df355ea183d08a$var$isEscape(keyCode)) $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$KEY_ESCAPE_COMMAND, event);\n    else if ($03df355ea183d08a$var$isDeleteForward(keyCode, ctrlKey, shiftKey, altKey, metaKey)) {\n        if ($03df355ea183d08a$var$isDelete(keyCode)) $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$KEY_DELETE_COMMAND, event);\n        else {\n            event.preventDefault();\n            $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$DELETE_CHARACTER_COMMAND, false);\n        }\n    } else if ($03df355ea183d08a$var$isDeleteWordBackward(keyCode, altKey, ctrlKey)) {\n        event.preventDefault();\n        $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$DELETE_WORD_COMMAND, true);\n    } else if ($03df355ea183d08a$var$isDeleteWordForward(keyCode, altKey, ctrlKey)) {\n        event.preventDefault();\n        $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$DELETE_WORD_COMMAND, false);\n    } else if ($03df355ea183d08a$var$isDeleteLineBackward(keyCode, metaKey)) {\n        event.preventDefault();\n        $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$DELETE_LINE_COMMAND, true);\n    } else if ($03df355ea183d08a$var$isDeleteLineForward(keyCode, metaKey)) {\n        event.preventDefault();\n        $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$DELETE_LINE_COMMAND, false);\n    } else if ($03df355ea183d08a$var$isBold(keyCode, altKey, metaKey, ctrlKey)) {\n        event.preventDefault();\n        $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$FORMAT_TEXT_COMMAND, \"bold\");\n    } else if ($03df355ea183d08a$var$isUnderline(keyCode, altKey, metaKey, ctrlKey)) {\n        event.preventDefault();\n        $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$FORMAT_TEXT_COMMAND, \"underline\");\n    } else if ($03df355ea183d08a$var$isItalic(keyCode, altKey, metaKey, ctrlKey)) {\n        event.preventDefault();\n        $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$FORMAT_TEXT_COMMAND, \"italic\");\n    } else if ($03df355ea183d08a$var$isTab(keyCode, altKey, ctrlKey, metaKey)) $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$KEY_TAB_COMMAND, event);\n    else if ($03df355ea183d08a$var$isUndo(keyCode, shiftKey, metaKey, ctrlKey)) {\n        event.preventDefault();\n        $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$UNDO_COMMAND, undefined);\n    } else if ($03df355ea183d08a$var$isRedo(keyCode, shiftKey, metaKey, ctrlKey)) {\n        event.preventDefault();\n        $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$REDO_COMMAND, undefined);\n    } else {\n        const prevSelection = editor._editorState._selection;\n        if ($03df355ea183d08a$var$$isNodeSelection(prevSelection)) {\n            if ($03df355ea183d08a$var$isCopy(keyCode, shiftKey, metaKey, ctrlKey)) {\n                event.preventDefault();\n                $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$COPY_COMMAND, event);\n            } else if ($03df355ea183d08a$var$isCut(keyCode, shiftKey, metaKey, ctrlKey)) {\n                event.preventDefault();\n                $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$CUT_COMMAND, event);\n            }\n        }\n    }\n    if ($03df355ea183d08a$var$isModifier(ctrlKey, shiftKey, altKey, metaKey)) $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$KEY_MODIFIER_COMMAND, event);\n}\nfunction $03df355ea183d08a$var$getRootElementRemoveHandles(rootElement) {\n    // @ts-expect-error: internal field\n    let eventHandles = rootElement.__lexicalEventHandles;\n    if (eventHandles === undefined) {\n        eventHandles = []; // @ts-expect-error: internal field\n        rootElement.__lexicalEventHandles = eventHandles;\n    }\n    return eventHandles;\n} // Mapping root editors to their active nested editors, contains nested editors\n// mapping only, so if root editor is selected map will have no reference to free up memory\nconst $03df355ea183d08a$var$activeNestedEditorsMap = new Map();\nfunction $03df355ea183d08a$var$onDocumentSelectionChange(event) {\n    const target = event.target;\n    const targetWindow = target == null ? null : target.nodeType === 9 ? target.defaultView : target.ownerDocument.defaultView;\n    const domSelection = $03df355ea183d08a$var$getDOMSelection(targetWindow);\n    if (domSelection === null) return;\n    const nextActiveEditor = $03df355ea183d08a$var$getNearestEditorFromDOMNode(domSelection.anchorNode);\n    if (nextActiveEditor === null) return;\n    if ($03df355ea183d08a$var$isSelectionChangeFromMouseDown) {\n        $03df355ea183d08a$var$isSelectionChangeFromMouseDown = false;\n        $03df355ea183d08a$var$updateEditor(nextActiveEditor, ()=>{\n            const lastSelection = $03df355ea183d08a$var$$getPreviousSelection();\n            const domAnchorNode = domSelection.anchorNode;\n            if (domAnchorNode === null) return;\n            const nodeType = domAnchorNode.nodeType; // If the user is attempting to click selection back onto text, then\n            // we should attempt create a range selection.\n            // When we click on an empty paragraph node or the end of a paragraph that ends\n            // with an image/poll, the nodeType will be ELEMENT_NODE\n            if (nodeType !== $03df355ea183d08a$var$DOM_ELEMENT_TYPE && nodeType !== $03df355ea183d08a$var$DOM_TEXT_TYPE) return;\n            const newSelection = $03df355ea183d08a$var$internalCreateRangeSelection(lastSelection, domSelection, nextActiveEditor);\n            $03df355ea183d08a$var$$setSelection(newSelection);\n        });\n    } // When editor receives selection change event, we're checking if\n    // it has any sibling editors (within same parent editor) that were active\n    // before, and trigger selection change on it to nullify selection.\n    const editors = $03df355ea183d08a$var$getEditorsToPropagate(nextActiveEditor);\n    const rootEditor = editors[editors.length - 1];\n    const rootEditorKey = rootEditor._key;\n    const activeNestedEditor = $03df355ea183d08a$var$activeNestedEditorsMap.get(rootEditorKey);\n    const prevActiveEditor = activeNestedEditor || rootEditor;\n    if (prevActiveEditor !== nextActiveEditor) $03df355ea183d08a$var$onSelectionChange(domSelection, prevActiveEditor, false);\n    $03df355ea183d08a$var$onSelectionChange(domSelection, nextActiveEditor, true); // If newly selected editor is nested, then add it to the map, clean map otherwise\n    if (nextActiveEditor !== rootEditor) $03df355ea183d08a$var$activeNestedEditorsMap.set(rootEditorKey, nextActiveEditor);\n    else if (activeNestedEditor) $03df355ea183d08a$var$activeNestedEditorsMap.delete(rootEditorKey);\n}\nfunction $03df355ea183d08a$var$stopLexicalPropagation(event) {\n    // We attach a special property to ensure the same event doesn't re-fire\n    // for parent editors.\n    // @ts-ignore\n    event._lexicalHandled = true;\n}\nfunction $03df355ea183d08a$var$hasStoppedLexicalPropagation(event) {\n    // @ts-ignore\n    const stopped = event._lexicalHandled === true;\n    return stopped;\n}\nfunction $03df355ea183d08a$var$addRootElementEvents(rootElement, editor) {\n    // We only want to have a single global selectionchange event handler, shared\n    // between all editor instances.\n    if ($03df355ea183d08a$var$rootElementsRegistered === 0) {\n        const doc = rootElement.ownerDocument;\n        doc.addEventListener(\"selectionchange\", $03df355ea183d08a$var$onDocumentSelectionChange);\n    }\n    $03df355ea183d08a$var$rootElementsRegistered++; // @ts-expect-error: internal field\n    rootElement.__lexicalEditor = editor;\n    const removeHandles = $03df355ea183d08a$var$getRootElementRemoveHandles(rootElement);\n    for(let i = 0; i < $03df355ea183d08a$var$rootElementEvents.length; i++){\n        const [eventName, onEvent] = $03df355ea183d08a$var$rootElementEvents[i];\n        const eventHandler = typeof onEvent === \"function\" ? (event)=>{\n            if ($03df355ea183d08a$var$hasStoppedLexicalPropagation(event)) return;\n            $03df355ea183d08a$var$stopLexicalPropagation(event);\n            if (editor.isEditable()) onEvent(event, editor);\n        } : (event)=>{\n            if ($03df355ea183d08a$var$hasStoppedLexicalPropagation(event)) return;\n            $03df355ea183d08a$var$stopLexicalPropagation(event);\n            if (editor.isEditable()) switch(eventName){\n                case \"cut\":\n                    return $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$CUT_COMMAND, event);\n                case \"copy\":\n                    return $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$COPY_COMMAND, event);\n                case \"paste\":\n                    return $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$PASTE_COMMAND, event);\n                case \"dragstart\":\n                    return $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$DRAGSTART_COMMAND, event);\n                case \"dragover\":\n                    return $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$DRAGOVER_COMMAND, event);\n                case \"dragend\":\n                    return $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$DRAGEND_COMMAND, event);\n                case \"focus\":\n                    return $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$FOCUS_COMMAND, event);\n                case \"blur\":\n                    return $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$BLUR_COMMAND, event);\n                case \"drop\":\n                    return $03df355ea183d08a$var$dispatchCommand(editor, $03df355ea183d08a$var$DROP_COMMAND, event);\n            }\n        };\n        rootElement.addEventListener(eventName, eventHandler);\n        removeHandles.push(()=>{\n            rootElement.removeEventListener(eventName, eventHandler);\n        });\n    }\n}\nfunction $03df355ea183d08a$var$removeRootElementEvents(rootElement) {\n    if ($03df355ea183d08a$var$rootElementsRegistered !== 0) {\n        $03df355ea183d08a$var$rootElementsRegistered--; // We only want to have a single global selectionchange event handler, shared\n        // between all editor instances.\n        if ($03df355ea183d08a$var$rootElementsRegistered === 0) {\n            const doc = rootElement.ownerDocument;\n            doc.removeEventListener(\"selectionchange\", $03df355ea183d08a$var$onDocumentSelectionChange);\n        }\n    } // @ts-expect-error: internal field\n    const editor = rootElement.__lexicalEditor;\n    if (editor !== null && editor !== undefined) {\n        $03df355ea183d08a$var$cleanActiveNestedEditorsMap(editor); // @ts-expect-error: internal field\n        rootElement.__lexicalEditor = null;\n    }\n    const removeHandles = $03df355ea183d08a$var$getRootElementRemoveHandles(rootElement);\n    for(let i = 0; i < removeHandles.length; i++)removeHandles[i]();\n     // @ts-expect-error: internal field\n    rootElement.__lexicalEventHandles = [];\n}\nfunction $03df355ea183d08a$var$cleanActiveNestedEditorsMap(editor) {\n    if (editor._parentEditor !== null) {\n        // For nested editor cleanup map if this editor was marked as active\n        const editors = $03df355ea183d08a$var$getEditorsToPropagate(editor);\n        const rootEditor = editors[editors.length - 1];\n        const rootEditorKey = rootEditor._key;\n        if ($03df355ea183d08a$var$activeNestedEditorsMap.get(rootEditorKey) === editor) $03df355ea183d08a$var$activeNestedEditorsMap.delete(rootEditorKey);\n    } else // For top-level editors cleanup map\n    $03df355ea183d08a$var$activeNestedEditorsMap.delete(editor._key);\n}\nfunction $03df355ea183d08a$var$markSelectionChangeFromDOMUpdate() {\n    $03df355ea183d08a$var$isSelectionChangeFromDOMUpdate = true;\n}\nfunction $03df355ea183d08a$var$markCollapsedSelectionFormat(format, style, offset, key, timeStamp) {\n    $03df355ea183d08a$var$collapsedSelectionFormat = [\n        format,\n        style,\n        offset,\n        key,\n        timeStamp\n    ];\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ class $03df355ea183d08a$var$Point {\n    is(point) {\n        return this.key === point.key && this.offset === point.offset && this.type === point.type;\n    }\n    isBefore(b) {\n        let aNode = this.getNode();\n        let bNode = b.getNode();\n        const aOffset = this.offset;\n        const bOffset = b.offset;\n        if ($03df355ea183d08a$var$$isElementNode(aNode)) {\n            const aNodeDescendant = aNode.getDescendantByIndex(aOffset);\n            aNode = aNodeDescendant != null ? aNodeDescendant : aNode;\n        }\n        if ($03df355ea183d08a$var$$isElementNode(bNode)) {\n            const bNodeDescendant = bNode.getDescendantByIndex(bOffset);\n            bNode = bNodeDescendant != null ? bNodeDescendant : bNode;\n        }\n        if (aNode === bNode) return aOffset < bOffset;\n        return aNode.isBefore(bNode);\n    }\n    getNode() {\n        const key = this.key;\n        const node = $03df355ea183d08a$var$$getNodeByKey(key);\n        if (node === null) throw Error(`Point.getNode: node not found`);\n        return node;\n    }\n    set(key, offset, type) {\n        const selection = this._selection;\n        const oldKey = this.key;\n        this.key = key;\n        this.offset = offset;\n        this.type = type;\n        if (!$03df355ea183d08a$var$isCurrentlyReadOnlyMode()) {\n            if ($03df355ea183d08a$var$$getCompositionKey() === oldKey) $03df355ea183d08a$var$$setCompositionKey(key);\n            if (selection !== null) {\n                selection._cachedNodes = null;\n                selection.dirty = true;\n            }\n        }\n    }\n    constructor(key, offset, type){\n        this._selection = null;\n        this.key = key;\n        this.offset = offset;\n        this.type = type;\n    }\n}\nfunction $03df355ea183d08a$var$$createPoint(key, offset, type) {\n    // @ts-expect-error: intentionally cast as we use a class for perf reasons\n    return new $03df355ea183d08a$var$Point(key, offset, type);\n}\nfunction $03df355ea183d08a$var$selectPointOnNode(point, node) {\n    let key = node.__key;\n    let offset = point.offset;\n    let type = \"element\";\n    if ($03df355ea183d08a$var$$isTextNode(node)) {\n        type = \"text\";\n        const textContentLength = node.getTextContentSize();\n        if (offset > textContentLength) offset = textContentLength;\n    } else if (!$03df355ea183d08a$var$$isElementNode(node)) {\n        const nextSibling = node.getNextSibling();\n        if ($03df355ea183d08a$var$$isTextNode(nextSibling)) {\n            key = nextSibling.__key;\n            offset = 0;\n            type = \"text\";\n        } else {\n            const parentNode = node.getParent();\n            if (parentNode) {\n                key = parentNode.__key;\n                offset = node.getIndexWithinParent() + 1;\n            }\n        }\n    }\n    point.set(key, offset, type);\n}\nfunction $03df355ea183d08a$var$$moveSelectionPointToEnd(point, node) {\n    if ($03df355ea183d08a$var$$isElementNode(node)) {\n        const lastNode = node.getLastDescendant();\n        if ($03df355ea183d08a$var$$isElementNode(lastNode) || $03df355ea183d08a$var$$isTextNode(lastNode)) $03df355ea183d08a$var$selectPointOnNode(point, lastNode);\n        else $03df355ea183d08a$var$selectPointOnNode(point, node);\n    } else $03df355ea183d08a$var$selectPointOnNode(point, node);\n}\nfunction $03df355ea183d08a$var$$transferStartingElementPointToTextPoint(start, end, format, style) {\n    const element = start.getNode();\n    const placementNode = element.getChildAtIndex(start.offset);\n    const textNode = $03df355ea183d08a$var$$createTextNode();\n    const target = $03df355ea183d08a$var$$isRootNode(element) ? $03df355ea183d08a$var$$createParagraphNode().append(textNode) : textNode;\n    textNode.setFormat(format);\n    textNode.setStyle(style);\n    if (placementNode === null) element.append(target);\n    else placementNode.insertBefore(target);\n     // Transfer the element point to a text point.\n    if (start.is(end)) end.set(textNode.__key, 0, \"text\");\n    start.set(textNode.__key, 0, \"text\");\n}\nfunction $03df355ea183d08a$var$$setPointValues(point, key, offset, type) {\n    point.key = key;\n    point.offset = offset;\n    point.type = type;\n}\nclass $03df355ea183d08a$var$NodeSelection {\n    is(selection) {\n        if (!$03df355ea183d08a$var$$isNodeSelection(selection)) return false;\n        const a = this._nodes;\n        const b = selection._nodes;\n        return a.size === b.size && Array.from(a).every((key)=>b.has(key));\n    }\n    add(key) {\n        this.dirty = true;\n        this._nodes.add(key);\n        this._cachedNodes = null;\n    }\n    delete(key) {\n        this.dirty = true;\n        this._nodes.delete(key);\n        this._cachedNodes = null;\n    }\n    clear() {\n        this.dirty = true;\n        this._nodes.clear();\n        this._cachedNodes = null;\n    }\n    has(key) {\n        return this._nodes.has(key);\n    }\n    clone() {\n        return new $03df355ea183d08a$var$NodeSelection(new Set(this._nodes));\n    }\n    extract() {\n        return this.getNodes();\n    }\n    insertRawText(text) {}\n    insertText() {}\n    insertNodes(nodes, selectStart) {\n        const selectedNodes = this.getNodes();\n        const selectedNodesLength = selectedNodes.length;\n        const lastSelectedNode = selectedNodes[selectedNodesLength - 1];\n        let selectionAtEnd; // Insert nodes\n        if ($03df355ea183d08a$var$$isTextNode(lastSelectedNode)) selectionAtEnd = lastSelectedNode.select();\n        else {\n            const index = lastSelectedNode.getIndexWithinParent() + 1;\n            selectionAtEnd = lastSelectedNode.getParentOrThrow().select(index, index);\n        }\n        selectionAtEnd.insertNodes(nodes, selectStart); // Remove selected nodes\n        for(let i = 0; i < selectedNodesLength; i++)selectedNodes[i].remove();\n        return true;\n    }\n    getNodes() {\n        const cachedNodes = this._cachedNodes;\n        if (cachedNodes !== null) return cachedNodes;\n        const objects = this._nodes;\n        const nodes = [];\n        for (const object of objects){\n            const node = $03df355ea183d08a$var$$getNodeByKey(object);\n            if (node !== null) nodes.push(node);\n        }\n        if (!$03df355ea183d08a$var$isCurrentlyReadOnlyMode()) this._cachedNodes = nodes;\n        return nodes;\n    }\n    getTextContent() {\n        const nodes = this.getNodes();\n        let textContent = \"\";\n        for(let i = 0; i < nodes.length; i++)textContent += nodes[i].getTextContent();\n        return textContent;\n    }\n    constructor(objects){\n        this.dirty = false;\n        this._nodes = objects;\n        this._cachedNodes = null;\n    }\n}\nfunction $03df355ea183d08a$var$$isRangeSelection(x) {\n    return x instanceof $03df355ea183d08a$var$RangeSelection;\n}\nclass $03df355ea183d08a$var$GridSelection {\n    is(selection) {\n        if (!$03df355ea183d08a$var$DEPRECATED_$isGridSelection(selection)) return false;\n        return this.gridKey === selection.gridKey && this.anchor.is(selection.anchor) && this.focus.is(selection.focus);\n    }\n    set(gridKey, anchorCellKey, focusCellKey) {\n        this.dirty = true;\n        this.gridKey = gridKey;\n        this.anchor.key = anchorCellKey;\n        this.focus.key = focusCellKey;\n        this._cachedNodes = null;\n    }\n    clone() {\n        return new $03df355ea183d08a$var$GridSelection(this.gridKey, this.anchor, this.focus);\n    }\n    isCollapsed() {\n        return false;\n    }\n    isBackward() {\n        return this.focus.isBefore(this.anchor);\n    }\n    getCharacterOffsets() {\n        return $03df355ea183d08a$var$getCharacterOffsets(this);\n    }\n    extract() {\n        return this.getNodes();\n    }\n    insertRawText(text) {}\n    insertText() {}\n    insertNodes(nodes, selectStart) {\n        const focusNode = this.focus.getNode();\n        const selection = $03df355ea183d08a$var$$normalizeSelection(focusNode.select(0, focusNode.getChildrenSize()));\n        return selection.insertNodes(nodes, selectStart);\n    }\n    getShape() {\n        const anchorCellNode = $03df355ea183d08a$var$$getNodeByKey(this.anchor.key);\n        if (!(anchorCellNode !== null)) throw Error(`getNodes: expected to find AnchorNode`);\n        const anchorCellNodeIndex = anchorCellNode.getIndexWithinParent();\n        const anchorCelRoweIndex = anchorCellNode.getParentOrThrow().getIndexWithinParent();\n        const focusCellNode = $03df355ea183d08a$var$$getNodeByKey(this.focus.key);\n        if (!(focusCellNode !== null)) throw Error(`getNodes: expected to find FocusNode`);\n        const focusCellNodeIndex = focusCellNode.getIndexWithinParent();\n        const focusCellRowIndex = focusCellNode.getParentOrThrow().getIndexWithinParent();\n        const startX = Math.min(anchorCellNodeIndex, focusCellNodeIndex);\n        const stopX = Math.max(anchorCellNodeIndex, focusCellNodeIndex);\n        const startY = Math.min(anchorCelRoweIndex, focusCellRowIndex);\n        const stopY = Math.max(anchorCelRoweIndex, focusCellRowIndex);\n        return {\n            fromX: Math.min(startX, stopX),\n            fromY: Math.min(startY, stopY),\n            toX: Math.max(startX, stopX),\n            toY: Math.max(startY, stopY)\n        };\n    }\n    getNodes() {\n        const cachedNodes = this._cachedNodes;\n        if (cachedNodes !== null) return cachedNodes;\n        const anchorNode = this.anchor.getNode();\n        const focusNode = this.focus.getNode();\n        const anchorCell = $03df355ea183d08a$var$$findMatchingParent(anchorNode, $03df355ea183d08a$var$DEPRECATED_$isGridCellNode);\n        const focusCell = $03df355ea183d08a$var$$findMatchingParent(focusNode, $03df355ea183d08a$var$DEPRECATED_$isGridCellNode);\n        if (!$03df355ea183d08a$var$DEPRECATED_$isGridCellNode(anchorCell)) throw Error(`Expected GridSelection anchor to be (or a child of) GridCellNode`);\n        if (!$03df355ea183d08a$var$DEPRECATED_$isGridCellNode(focusCell)) throw Error(`Expected GridSelection focus to be (or a child of) GridCellNode`);\n        const anchorRow = anchorCell.getParent();\n        if (!$03df355ea183d08a$var$DEPRECATED_$isGridRowNode(anchorRow)) throw Error(`Expected anchorCell to have a parent GridRowNode`);\n        const gridNode = anchorRow.getParent();\n        if (!$03df355ea183d08a$var$DEPRECATED_$isGridNode(gridNode)) throw Error(`Expected tableNode to have a parent GridNode`);\n         // TODO Mapping the whole Grid every time not efficient. We need to compute the entire state only\n        // once (on load) and iterate on it as updates occur. However, to do this we need to have the\n        // ability to store a state. Killing GridSelection and moving the logic to the plugin would make\n        // this possible.\n        const [map, cellAMap, cellBMap] = $03df355ea183d08a$var$computeGridMap(gridNode, anchorCell, focusCell);\n        let minColumn = Math.min(cellAMap.startColumn, cellBMap.startColumn);\n        let minRow = Math.min(cellAMap.startRow, cellBMap.startRow);\n        let maxColumn = Math.max(cellAMap.startColumn + cellAMap.cell.__colSpan - 1, cellBMap.startColumn + cellBMap.cell.__colSpan - 1);\n        let maxRow = Math.max(cellAMap.startRow + cellAMap.cell.__rowSpan - 1, cellBMap.startRow + cellBMap.cell.__rowSpan - 1);\n        let exploredMinColumn = minColumn;\n        let exploredMinRow = minRow;\n        let exploredMaxColumn = minColumn;\n        let exploredMaxRow = minRow;\n        function expandBoundary(mapValue) {\n            const { cell: cell , startColumn: cellStartColumn , startRow: cellStartRow  } = mapValue;\n            minColumn = Math.min(minColumn, cellStartColumn);\n            minRow = Math.min(minRow, cellStartRow);\n            maxColumn = Math.max(maxColumn, cellStartColumn + cell.__colSpan - 1);\n            maxRow = Math.max(maxRow, cellStartRow + cell.__rowSpan - 1);\n        }\n        while(minColumn < exploredMinColumn || minRow < exploredMinRow || maxColumn > exploredMaxColumn || maxRow > exploredMaxRow){\n            if (minColumn < exploredMinColumn) {\n                // Expand on the left\n                const rowDiff = exploredMaxRow - exploredMinRow;\n                const previousColumn = exploredMinColumn - 1;\n                for(let i = 0; i <= rowDiff; i++)expandBoundary(map[exploredMinRow + i][previousColumn]);\n                exploredMinColumn = previousColumn;\n            }\n            if (minRow < exploredMinRow) {\n                // Expand on top\n                const columnDiff = exploredMaxColumn - exploredMinColumn;\n                const previousRow = exploredMinRow - 1;\n                for(let i = 0; i <= columnDiff; i++)expandBoundary(map[previousRow][exploredMinColumn + i]);\n                exploredMinRow = previousRow;\n            }\n            if (maxColumn > exploredMaxColumn) {\n                // Expand on the right\n                const rowDiff = exploredMaxRow - exploredMinRow;\n                const nextColumn = exploredMaxColumn + 1;\n                for(let i = 0; i <= rowDiff; i++)expandBoundary(map[exploredMinRow + i][nextColumn]);\n                exploredMaxColumn = nextColumn;\n            }\n            if (maxRow > exploredMaxRow) {\n                // Expand on the bottom\n                const columnDiff = exploredMaxColumn - exploredMinColumn;\n                const nextRow = exploredMaxRow + 1;\n                for(let i = 0; i <= columnDiff; i++)expandBoundary(map[nextRow][exploredMinColumn + i]);\n                exploredMaxRow = nextRow;\n            }\n        }\n        const nodes = [\n            gridNode\n        ];\n        let lastRow = null;\n        for(let i = minRow; i <= maxRow; i++)for(let j = minColumn; j <= maxColumn; j++){\n            const { cell: cell  } = map[i][j];\n            const currentRow = cell.getParent();\n            if (!$03df355ea183d08a$var$DEPRECATED_$isGridRowNode(currentRow)) throw Error(`Expected GridCellNode parent to be a GridRowNode`);\n            if (currentRow !== lastRow) nodes.push(currentRow);\n            nodes.push(cell, ...$03df355ea183d08a$var$$getChildrenRecursively(cell));\n            lastRow = currentRow;\n        }\n        if (!$03df355ea183d08a$var$isCurrentlyReadOnlyMode()) this._cachedNodes = nodes;\n        return nodes;\n    }\n    getTextContent() {\n        const nodes = this.getNodes();\n        let textContent = \"\";\n        for(let i = 0; i < nodes.length; i++)textContent += nodes[i].getTextContent();\n        return textContent;\n    }\n    constructor(gridKey, anchor, focus){\n        this.gridKey = gridKey;\n        this.anchor = anchor;\n        this.focus = focus;\n        this.dirty = false;\n        this._cachedNodes = null;\n        anchor._selection = this;\n        focus._selection = this;\n    }\n}\nfunction $03df355ea183d08a$var$DEPRECATED_$isGridSelection(x) {\n    return x instanceof $03df355ea183d08a$var$GridSelection;\n}\nclass $03df355ea183d08a$var$RangeSelection {\n    is(selection) {\n        if (!$03df355ea183d08a$var$$isRangeSelection(selection)) return false;\n        return this.anchor.is(selection.anchor) && this.focus.is(selection.focus) && this.format === selection.format && this.style === selection.style;\n    }\n    isBackward() {\n        return this.focus.isBefore(this.anchor);\n    }\n    isCollapsed() {\n        return this.anchor.is(this.focus);\n    }\n    getNodes() {\n        const cachedNodes = this._cachedNodes;\n        if (cachedNodes !== null) return cachedNodes;\n        const anchor = this.anchor;\n        const focus = this.focus;\n        const isBefore = anchor.isBefore(focus);\n        const firstPoint = isBefore ? anchor : focus;\n        const lastPoint = isBefore ? focus : anchor;\n        let firstNode = firstPoint.getNode();\n        let lastNode = lastPoint.getNode();\n        const startOffset = firstPoint.offset;\n        const endOffset = lastPoint.offset;\n        if ($03df355ea183d08a$var$$isElementNode(firstNode)) {\n            const firstNodeDescendant = firstNode.getDescendantByIndex(startOffset);\n            firstNode = firstNodeDescendant != null ? firstNodeDescendant : firstNode;\n        }\n        if ($03df355ea183d08a$var$$isElementNode(lastNode)) {\n            let lastNodeDescendant = lastNode.getDescendantByIndex(endOffset); // We don't want to over-select, as node selection infers the child before\n            // the last descendant, not including that descendant.\n            if (lastNodeDescendant !== null && lastNodeDescendant !== firstNode && lastNode.getChildAtIndex(endOffset) === lastNodeDescendant) lastNodeDescendant = lastNodeDescendant.getPreviousSibling();\n            lastNode = lastNodeDescendant != null ? lastNodeDescendant : lastNode;\n        }\n        let nodes;\n        if (firstNode.is(lastNode)) {\n            if ($03df355ea183d08a$var$$isElementNode(firstNode) && firstNode.getChildrenSize() > 0) nodes = [];\n            else nodes = [\n                firstNode\n            ];\n        } else nodes = firstNode.getNodesBetween(lastNode);\n        if (!$03df355ea183d08a$var$isCurrentlyReadOnlyMode()) this._cachedNodes = nodes;\n        return nodes;\n    }\n    setTextNodeRange(anchorNode, anchorOffset, focusNode, focusOffset) {\n        $03df355ea183d08a$var$$setPointValues(this.anchor, anchorNode.__key, anchorOffset, \"text\");\n        $03df355ea183d08a$var$$setPointValues(this.focus, focusNode.__key, focusOffset, \"text\");\n        this._cachedNodes = null;\n        this.dirty = true;\n    }\n    getTextContent() {\n        const nodes = this.getNodes();\n        if (nodes.length === 0) return \"\";\n        const firstNode = nodes[0];\n        const lastNode = nodes[nodes.length - 1];\n        const anchor = this.anchor;\n        const focus = this.focus;\n        const isBefore = anchor.isBefore(focus);\n        const [anchorOffset, focusOffset] = $03df355ea183d08a$var$getCharacterOffsets(this);\n        let textContent = \"\";\n        let prevWasElement = true;\n        for(let i = 0; i < nodes.length; i++){\n            const node = nodes[i];\n            if ($03df355ea183d08a$var$$isElementNode(node) && !node.isInline()) {\n                if (!prevWasElement) textContent += \"\\n\";\n                if (node.isEmpty()) prevWasElement = false;\n                else prevWasElement = true;\n            } else {\n                prevWasElement = false;\n                if ($03df355ea183d08a$var$$isTextNode(node)) {\n                    let text = node.getTextContent();\n                    if (node === firstNode) {\n                        if (node === lastNode) {\n                            if (anchor.type !== \"element\" || focus.type !== \"element\" || focus.offset === anchor.offset) text = anchorOffset < focusOffset ? text.slice(anchorOffset, focusOffset) : text.slice(focusOffset, anchorOffset);\n                        } else text = isBefore ? text.slice(anchorOffset) : text.slice(focusOffset);\n                    } else if (node === lastNode) text = isBefore ? text.slice(0, focusOffset) : text.slice(0, anchorOffset);\n                    textContent += text;\n                } else if (($03df355ea183d08a$var$$isDecoratorNode(node) || $03df355ea183d08a$var$$isLineBreakNode(node)) && (node !== lastNode || !this.isCollapsed())) textContent += node.getTextContent();\n            }\n        }\n        return textContent;\n    }\n    applyDOMRange(range) {\n        const editor = $03df355ea183d08a$var$getActiveEditor();\n        const currentEditorState = editor.getEditorState();\n        const lastSelection = currentEditorState._selection;\n        const resolvedSelectionPoints = $03df355ea183d08a$var$internalResolveSelectionPoints(range.startContainer, range.startOffset, range.endContainer, range.endOffset, editor, lastSelection);\n        if (resolvedSelectionPoints === null) return;\n        const [anchorPoint, focusPoint] = resolvedSelectionPoints;\n        $03df355ea183d08a$var$$setPointValues(this.anchor, anchorPoint.key, anchorPoint.offset, anchorPoint.type);\n        $03df355ea183d08a$var$$setPointValues(this.focus, focusPoint.key, focusPoint.offset, focusPoint.type);\n        this._cachedNodes = null;\n    }\n    clone() {\n        const anchor = this.anchor;\n        const focus = this.focus;\n        const selection = new $03df355ea183d08a$var$RangeSelection($03df355ea183d08a$var$$createPoint(anchor.key, anchor.offset, anchor.type), $03df355ea183d08a$var$$createPoint(focus.key, focus.offset, focus.type), this.format, this.style);\n        return selection;\n    }\n    toggleFormat(format) {\n        this.format = $03df355ea183d08a$var$toggleTextFormatType(this.format, format, null);\n        this.dirty = true;\n    }\n    setStyle(style) {\n        this.style = style;\n        this.dirty = true;\n    }\n    hasFormat(type) {\n        const formatFlag = $03df355ea183d08a$var$TEXT_TYPE_TO_FORMAT[type];\n        return (this.format & formatFlag) !== 0;\n    }\n    insertRawText(text) {\n        const parts = text.split(/\\r?\\n/);\n        if (parts.length === 1) this.insertText(text);\n        else {\n            const nodes = [];\n            const length = parts.length;\n            for(let i = 0; i < length; i++){\n                const part = parts[i];\n                if (part !== \"\") nodes.push($03df355ea183d08a$var$$createTextNode(part));\n                if (i !== length - 1) nodes.push($03df355ea183d08a$var$$createLineBreakNode());\n            }\n            this.insertNodes(nodes);\n        }\n    }\n    insertText(text) {\n        const anchor = this.anchor;\n        const focus = this.focus;\n        const isBefore = this.isCollapsed() || anchor.isBefore(focus);\n        const format = this.format;\n        const style = this.style;\n        if (isBefore && anchor.type === \"element\") $03df355ea183d08a$var$$transferStartingElementPointToTextPoint(anchor, focus, format, style);\n        else if (!isBefore && focus.type === \"element\") $03df355ea183d08a$var$$transferStartingElementPointToTextPoint(focus, anchor, format, style);\n        const selectedNodes = this.getNodes();\n        const selectedNodesLength = selectedNodes.length;\n        const firstPoint = isBefore ? anchor : focus;\n        const endPoint = isBefore ? focus : anchor;\n        const startOffset = firstPoint.offset;\n        const endOffset = endPoint.offset;\n        let firstNode = selectedNodes[0];\n        if (!$03df355ea183d08a$var$$isTextNode(firstNode)) throw Error(`insertText: first node is not a text node`);\n        const firstNodeText = firstNode.getTextContent();\n        const firstNodeTextLength = firstNodeText.length;\n        const firstNodeParent = firstNode.getParentOrThrow();\n        const lastIndex = selectedNodesLength - 1;\n        let lastNode = selectedNodes[lastIndex];\n        if (this.isCollapsed() && startOffset === firstNodeTextLength && (firstNode.isSegmented() || firstNode.isToken() || !firstNode.canInsertTextAfter() || !firstNodeParent.canInsertTextAfter() && firstNode.getNextSibling() === null)) {\n            let nextSibling = firstNode.getNextSibling();\n            if (!$03df355ea183d08a$var$$isTextNode(nextSibling) || $03df355ea183d08a$var$$isTokenOrSegmented(nextSibling)) {\n                nextSibling = $03df355ea183d08a$var$$createTextNode();\n                nextSibling.setFormat(format);\n                if (!firstNodeParent.canInsertTextAfter()) firstNodeParent.insertAfter(nextSibling);\n                else firstNode.insertAfter(nextSibling);\n            }\n            nextSibling.select(0, 0);\n            firstNode = nextSibling;\n            if (text !== \"\") {\n                this.insertText(text);\n                return;\n            }\n        } else if (this.isCollapsed() && startOffset === 0 && (firstNode.isSegmented() || firstNode.isToken() || !firstNode.canInsertTextBefore() || !firstNodeParent.canInsertTextBefore() && firstNode.getPreviousSibling() === null)) {\n            let prevSibling = firstNode.getPreviousSibling();\n            if (!$03df355ea183d08a$var$$isTextNode(prevSibling) || $03df355ea183d08a$var$$isTokenOrSegmented(prevSibling)) {\n                prevSibling = $03df355ea183d08a$var$$createTextNode();\n                prevSibling.setFormat(format);\n                if (!firstNodeParent.canInsertTextBefore()) firstNodeParent.insertBefore(prevSibling);\n                else firstNode.insertBefore(prevSibling);\n            }\n            prevSibling.select();\n            firstNode = prevSibling;\n            if (text !== \"\") {\n                this.insertText(text);\n                return;\n            }\n        } else if (firstNode.isSegmented() && startOffset !== firstNodeTextLength) {\n            const textNode = $03df355ea183d08a$var$$createTextNode(firstNode.getTextContent());\n            textNode.setFormat(format);\n            firstNode.replace(textNode);\n            firstNode = textNode;\n        } else if (!this.isCollapsed() && text !== \"\") {\n            // When the firstNode or lastNode parents are elements that\n            // do not allow text to be inserted before or after, we first\n            // clear the content. Then we normalize selection, then insert\n            // the new content.\n            const lastNodeParent = lastNode.getParent();\n            if (!firstNodeParent.canInsertTextBefore() || !firstNodeParent.canInsertTextAfter() || $03df355ea183d08a$var$$isElementNode(lastNodeParent) && (!lastNodeParent.canInsertTextBefore() || !lastNodeParent.canInsertTextAfter())) {\n                this.insertText(\"\");\n                $03df355ea183d08a$var$normalizeSelectionPointsForBoundaries(this.anchor, this.focus, null);\n                this.insertText(text);\n                return;\n            }\n        }\n        if (selectedNodesLength === 1) {\n            if (firstNode.isToken()) {\n                const textNode = $03df355ea183d08a$var$$createTextNode(text);\n                textNode.select();\n                firstNode.replace(textNode);\n                return;\n            }\n            const firstNodeFormat = firstNode.getFormat();\n            const firstNodeStyle = firstNode.getStyle();\n            if (startOffset === endOffset && (firstNodeFormat !== format || firstNodeStyle !== style)) {\n                if (firstNode.getTextContent() === \"\") {\n                    firstNode.setFormat(format);\n                    firstNode.setStyle(style);\n                } else {\n                    const textNode = $03df355ea183d08a$var$$createTextNode(text);\n                    textNode.setFormat(format);\n                    textNode.setStyle(style);\n                    textNode.select();\n                    if (startOffset === 0) firstNode.insertBefore(textNode, false);\n                    else {\n                        const [targetNode] = firstNode.splitText(startOffset);\n                        targetNode.insertAfter(textNode, false);\n                    } // When composing, we need to adjust the anchor offset so that\n                    // we correctly replace that right range.\n                    if (textNode.isComposing() && this.anchor.type === \"text\") this.anchor.offset -= text.length;\n                    return;\n                }\n            }\n            const delCount = endOffset - startOffset;\n            firstNode = firstNode.spliceText(startOffset, delCount, text, true);\n            if (firstNode.getTextContent() === \"\") firstNode.remove();\n            else if (this.anchor.type === \"text\") {\n                if (firstNode.isComposing()) // When composing, we need to adjust the anchor offset so that\n                // we correctly replace that right range.\n                this.anchor.offset -= text.length;\n                else {\n                    this.format = firstNodeFormat;\n                    this.style = firstNodeStyle;\n                }\n            }\n        } else {\n            const markedNodeKeysForKeep = new Set([\n                ...firstNode.getParentKeys(),\n                ...lastNode.getParentKeys()\n            ]); // We have to get the parent elements before the next section,\n            // as in that section we might mutate the lastNode.\n            const firstElement = $03df355ea183d08a$var$$isElementNode(firstNode) ? firstNode : firstNode.getParentOrThrow();\n            let lastElement = $03df355ea183d08a$var$$isElementNode(lastNode) ? lastNode : lastNode.getParentOrThrow();\n            let lastElementChild = lastNode; // If the last element is inline, we should instead look at getting\n            // the nodes of its parent, rather than itself. This behavior will\n            // then better match how text node insertions work. We will need to\n            // also update the last element's child accordingly as we do this.\n            if (!firstElement.is(lastElement) && lastElement.isInline()) // Keep traversing till we have a non-inline element parent.\n            do {\n                lastElementChild = lastElement;\n                lastElement = lastElement.getParentOrThrow();\n            }while (lastElement.isInline());\n             // Handle mutations to the last node.\n            if (endPoint.type === \"text\" && (endOffset !== 0 || lastNode.getTextContent() === \"\") || endPoint.type === \"element\" && lastNode.getIndexWithinParent() < endOffset) {\n                if ($03df355ea183d08a$var$$isTextNode(lastNode) && !lastNode.isToken() && endOffset !== lastNode.getTextContentSize()) {\n                    if (lastNode.isSegmented()) {\n                        const textNode = $03df355ea183d08a$var$$createTextNode(lastNode.getTextContent());\n                        lastNode.replace(textNode);\n                        lastNode = textNode;\n                    }\n                    lastNode = lastNode.spliceText(0, endOffset, \"\");\n                    markedNodeKeysForKeep.add(lastNode.__key);\n                } else {\n                    const lastNodeParent = lastNode.getParentOrThrow();\n                    if (!lastNodeParent.canBeEmpty() && lastNodeParent.getChildrenSize() === 1) lastNodeParent.remove();\n                    else lastNode.remove();\n                }\n            } else markedNodeKeysForKeep.add(lastNode.__key);\n             // Either move the remaining nodes of the last parent to after\n            // the first child, or remove them entirely. If the last parent\n            // is the same as the first parent, this logic also works.\n            const lastNodeChildren = lastElement.getChildren();\n            const selectedNodesSet = new Set(selectedNodes);\n            const firstAndLastElementsAreEqual = firstElement.is(lastElement); // We choose a target to insert all nodes after. In the case of having\n            // and inline starting parent element with a starting node that has no\n            // siblings, we should insert after the starting parent element, otherwise\n            // we will incorrectly merge into the starting parent element.\n            // TODO: should we keep on traversing parents if we're inside another\n            // nested inline element?\n            const insertionTarget = firstElement.isInline() && firstNode.getNextSibling() === null ? firstElement : firstNode;\n            for(let i = lastNodeChildren.length - 1; i >= 0; i--){\n                const lastNodeChild = lastNodeChildren[i];\n                if (lastNodeChild.is(firstNode) || $03df355ea183d08a$var$$isElementNode(lastNodeChild) && lastNodeChild.isParentOf(firstNode)) break;\n                if (lastNodeChild.isAttached()) {\n                    if (!selectedNodesSet.has(lastNodeChild) || lastNodeChild.is(lastElementChild)) {\n                        if (!firstAndLastElementsAreEqual) insertionTarget.insertAfter(lastNodeChild, false);\n                    } else lastNodeChild.remove();\n                }\n            }\n            if (!firstAndLastElementsAreEqual) {\n                // Check if we have already moved out all the nodes of the\n                // last parent, and if so, traverse the parent tree and mark\n                // them all as being able to deleted too.\n                let parent = lastElement;\n                let lastRemovedParent = null;\n                while(parent !== null){\n                    const children = parent.getChildren();\n                    const childrenLength = children.length;\n                    if (childrenLength === 0 || children[childrenLength - 1].is(lastRemovedParent)) {\n                        markedNodeKeysForKeep.delete(parent.__key);\n                        lastRemovedParent = parent;\n                    }\n                    parent = parent.getParent();\n                }\n            } // Ensure we do splicing after moving of nodes, as splicing\n            // can have side-effects (in the case of hashtags).\n            if (!firstNode.isToken()) {\n                firstNode = firstNode.spliceText(startOffset, firstNodeTextLength - startOffset, text, true);\n                if (firstNode.getTextContent() === \"\") firstNode.remove();\n                else if (firstNode.isComposing() && this.anchor.type === \"text\") // When composing, we need to adjust the anchor offset so that\n                // we correctly replace that right range.\n                this.anchor.offset -= text.length;\n            } else if (startOffset === firstNodeTextLength) firstNode.select();\n            else {\n                const textNode = $03df355ea183d08a$var$$createTextNode(text);\n                textNode.select();\n                firstNode.replace(textNode);\n            } // Remove all selected nodes that haven't already been removed.\n            for(let i = 1; i < selectedNodesLength; i++){\n                const selectedNode = selectedNodes[i];\n                const key = selectedNode.__key;\n                if (!markedNodeKeysForKeep.has(key)) selectedNode.remove();\n            }\n        }\n    }\n    removeText() {\n        this.insertText(\"\");\n    }\n    formatText(formatType) {\n        if (this.isCollapsed()) {\n            this.toggleFormat(formatType); // When changing format, we should stop composition\n            $03df355ea183d08a$var$$setCompositionKey(null);\n            return;\n        }\n        const selectedNodes = this.getNodes();\n        const selectedTextNodes = [];\n        for (const selectedNode of selectedNodes)if ($03df355ea183d08a$var$$isTextNode(selectedNode)) selectedTextNodes.push(selectedNode);\n        const selectedTextNodesLength = selectedTextNodes.length;\n        if (selectedTextNodesLength === 0) {\n            this.toggleFormat(formatType); // When changing format, we should stop composition\n            $03df355ea183d08a$var$$setCompositionKey(null);\n            return;\n        }\n        const anchor = this.anchor;\n        const focus = this.focus;\n        const isBackward = this.isBackward();\n        const startPoint = isBackward ? focus : anchor;\n        const endPoint = isBackward ? anchor : focus;\n        let firstIndex = 0;\n        let firstNode = selectedTextNodes[0];\n        let startOffset = startPoint.type === \"element\" ? 0 : startPoint.offset; // In case selection started at the end of text node use next text node\n        if (startPoint.type === \"text\" && startOffset === firstNode.getTextContentSize()) {\n            firstIndex = 1;\n            firstNode = selectedTextNodes[1];\n            startOffset = 0;\n        }\n        if (firstNode == null) return;\n        const firstNextFormat = firstNode.getFormatFlags(formatType, null);\n        const lastIndex = selectedTextNodesLength - 1;\n        let lastNode = selectedTextNodes[lastIndex];\n        const endOffset = endPoint.type === \"text\" ? endPoint.offset : lastNode.getTextContentSize(); // Single node selected\n        if (firstNode.is(lastNode)) {\n            // No actual text is selected, so do nothing.\n            if (startOffset === endOffset) return;\n             // The entire node is selected, so just format it\n            if (startOffset === 0 && endOffset === firstNode.getTextContentSize()) firstNode.setFormat(firstNextFormat);\n            else {\n                // Node is partially selected, so split it into two nodes\n                // add style the selected one.\n                const splitNodes = firstNode.splitText(startOffset, endOffset);\n                const replacement = startOffset === 0 ? splitNodes[0] : splitNodes[1];\n                replacement.setFormat(firstNextFormat); // Update selection only if starts/ends on text node\n                if (startPoint.type === \"text\") startPoint.set(replacement.__key, 0, \"text\");\n                if (endPoint.type === \"text\") endPoint.set(replacement.__key, endOffset - startOffset, \"text\");\n            }\n            this.format = firstNextFormat;\n            return;\n        } // Multiple nodes selected\n        // The entire first node isn't selected, so split it\n        if (startOffset !== 0) {\n            [, firstNode] = firstNode.splitText(startOffset);\n            startOffset = 0;\n        }\n        firstNode.setFormat(firstNextFormat);\n        const lastNextFormat = lastNode.getFormatFlags(formatType, firstNextFormat); // If the offset is 0, it means no actual characters are selected,\n        // so we skip formatting the last node altogether.\n        if (endOffset > 0) {\n            if (endOffset !== lastNode.getTextContentSize()) [lastNode] = lastNode.splitText(endOffset);\n            lastNode.setFormat(lastNextFormat);\n        } // Process all text nodes in between\n        for(let i = firstIndex + 1; i < lastIndex; i++){\n            const textNode = selectedTextNodes[i];\n            if (!textNode.isToken()) {\n                const nextFormat = textNode.getFormatFlags(formatType, lastNextFormat);\n                textNode.setFormat(nextFormat);\n            }\n        } // Update selection only if starts/ends on text node\n        if (startPoint.type === \"text\") startPoint.set(firstNode.__key, startOffset, \"text\");\n        if (endPoint.type === \"text\") endPoint.set(lastNode.__key, endOffset, \"text\");\n        this.format = firstNextFormat | lastNextFormat;\n    }\n    insertNodes(nodes, selectStart) {\n        // If there is a range selected remove the text in it\n        if (!this.isCollapsed()) {\n            const selectionEnd = this.isBackward() ? this.anchor : this.focus;\n            const nextSibling = selectionEnd.getNode().getNextSibling();\n            const nextSiblingKey = nextSibling ? nextSibling.getKey() : null;\n            const prevSibling = selectionEnd.getNode().getPreviousSibling();\n            const prevSiblingKey = prevSibling ? prevSibling.getKey() : null;\n            this.removeText(); // If the selection has been moved to an adjacent inline element, create\n            // a temporary text node that we can insert the nodes after.\n            if (this.isCollapsed() && this.focus.type === \"element\") {\n                let textNode;\n                if (this.focus.key === nextSiblingKey && this.focus.offset === 0) {\n                    textNode = $03df355ea183d08a$var$$createTextNode();\n                    this.focus.getNode().insertBefore(textNode);\n                } else if (this.focus.key === prevSiblingKey && this.focus.offset === this.focus.getNode().getChildrenSize()) {\n                    textNode = $03df355ea183d08a$var$$createTextNode();\n                    this.focus.getNode().insertAfter(textNode);\n                }\n                if (textNode) {\n                    this.focus.set(textNode.__key, 0, \"text\");\n                    this.anchor.set(textNode.__key, 0, \"text\");\n                }\n            }\n        }\n        const anchor = this.anchor;\n        const anchorOffset = anchor.offset;\n        const anchorNode = anchor.getNode();\n        let target = anchorNode;\n        if (anchor.type === \"element\") {\n            const element = anchor.getNode();\n            const placementNode = element.getChildAtIndex(anchorOffset - 1);\n            if (placementNode === null) target = element;\n            else target = placementNode;\n        }\n        const siblings = []; // Get all remaining text node siblings in this element so we can\n        // append them after the last node we're inserting.\n        const nextSiblings = anchorNode.getNextSiblings();\n        const topLevelElement = $03df355ea183d08a$var$$isRootOrShadowRoot(anchorNode) ? null : anchorNode.getTopLevelElementOrThrow();\n        if ($03df355ea183d08a$var$$isTextNode(anchorNode)) {\n            const textContent = anchorNode.getTextContent();\n            const textContentLength = textContent.length;\n            if (anchorOffset === 0 && textContentLength !== 0) {\n                const prevSibling = anchorNode.getPreviousSibling();\n                if (prevSibling !== null) target = prevSibling;\n                else target = anchorNode.getParentOrThrow();\n                siblings.push(anchorNode);\n            } else if (anchorOffset === textContentLength) target = anchorNode;\n            else if (anchorNode.isToken()) // Do nothing if we're inside a token node\n            return false;\n            else {\n                // If we started with a range selected grab the danglingText after the\n                // end of the selection and put it on our siblings array so we can\n                // append it after the last node we're inserting\n                let danglingText;\n                [target, danglingText] = anchorNode.splitText(anchorOffset);\n                siblings.push(danglingText);\n            }\n        }\n        const startingNode = target;\n        siblings.push(...nextSiblings);\n        const firstNode = nodes[0];\n        let didReplaceOrMerge = false;\n        let lastNode = null; // Time to insert the nodes!\n        for(let i = 0; i < nodes.length; i++){\n            const node = nodes[i];\n            if (!$03df355ea183d08a$var$$isRootOrShadowRoot(target) && !$03df355ea183d08a$var$$isDecoratorNode(target) && $03df355ea183d08a$var$$isElementNode(node) && !node.isInline()) {\n                // -----\n                // Heuristics for the replacement or merging of elements\n                // -----\n                // If we have an incoming element node as the first node, then we'll need\n                // see if we can merge any descendant leaf nodes into our existing target.\n                // We can do this by finding the first descendant in our node and then we can\n                // pluck it and its parent (siblings included) out and insert them directly\n                // into our target. We only do this for the first node, as we are only\n                // interested in merging with the anchor, which is our target.\n                //\n                // If we apply either the replacement or merging heuristics, we need to be\n                // careful that we're not trying to insert a non-element node into a root node,\n                // so we check if the target's parent after this logic is the root node and if\n                // so we trigger an invariant to ensure this problem is caught in development\n                // and fixed accordingly.\n                if (node.is(firstNode)) {\n                    if ($03df355ea183d08a$var$$isElementNode(target) && target.isEmpty() && target.canReplaceWith(node)) {\n                        target.replace(node);\n                        target = node;\n                        didReplaceOrMerge = true;\n                        continue;\n                    } // We may have a node tree where there are many levels, for example with\n                    // lists and tables. So let's find the first descendant to try and merge\n                    // with. So if we have the target:\n                    //\n                    // Paragraph (1)\n                    //   Text (2)\n                    //\n                    // and we are trying to insert:\n                    //\n                    // ListNode (3)\n                    //   ListItemNode (4)\n                    //     Text (5)\n                    //   ListItemNode (6)\n                    //\n                    // The result would be:\n                    //\n                    // Paragraph (1)\n                    //   Text (2)\n                    //   Text (5)\n                    //\n                    const firstDescendant = node.getFirstDescendant();\n                    if ($03df355ea183d08a$var$$isLeafNode(firstDescendant)) {\n                        let element = firstDescendant.getParentOrThrow();\n                        while(element.isInline())element = element.getParentOrThrow();\n                        const children = element.getChildren();\n                        const childrenLength = children.length;\n                        if ($03df355ea183d08a$var$$isElementNode(target)) {\n                            let firstChild = target.getFirstChild();\n                            for(let s = 0; s < childrenLength; s++){\n                                const child = children[s];\n                                if (firstChild === null) target.append(child);\n                                else firstChild.insertAfter(child);\n                                firstChild = child;\n                            }\n                        } else {\n                            for(let s = childrenLength - 1; s >= 0; s--)target.insertAfter(children[s]);\n                            target = target.getParentOrThrow();\n                        }\n                        lastNode = children[childrenLength - 1];\n                        element.remove();\n                        didReplaceOrMerge = true;\n                        if (element.is(node)) continue;\n                    }\n                }\n                if ($03df355ea183d08a$var$$isTextNode(target)) {\n                    if (topLevelElement === null) throw Error(`insertNode: topLevelElement is root node`);\n                    target = topLevelElement;\n                }\n            } else if (didReplaceOrMerge && !$03df355ea183d08a$var$$isDecoratorNode(node) && $03df355ea183d08a$var$$isRootOrShadowRoot(target.getParent())) throw Error(`insertNodes: cannot insert a non-element into a root node`);\n            didReplaceOrMerge = false;\n            if ($03df355ea183d08a$var$$isElementNode(target) && !target.isInline()) {\n                lastNode = node;\n                if ($03df355ea183d08a$var$$isDecoratorNode(node) && !node.isInline()) target = target.insertAfter(node, false);\n                else if (!$03df355ea183d08a$var$$isElementNode(node)) {\n                    const firstChild = target.getFirstChild();\n                    if (firstChild !== null) firstChild.insertBefore(node);\n                    else target.append(node);\n                    target = node;\n                } else {\n                    if (!node.canBeEmpty() && node.isEmpty()) continue;\n                    if ($03df355ea183d08a$var$$isRootNode(target)) {\n                        const placementNode = target.getChildAtIndex(anchorOffset);\n                        if (placementNode !== null) placementNode.insertBefore(node);\n                        else target.append(node);\n                        target = node;\n                    } else if (node.isInline()) {\n                        target.append(node);\n                        target = node;\n                    } else target = target.insertAfter(node, false);\n                }\n            } else if (!$03df355ea183d08a$var$$isElementNode(node) || $03df355ea183d08a$var$$isElementNode(node) && node.isInline() || $03df355ea183d08a$var$$isDecoratorNode(target) && !target.isInline()) {\n                lastNode = node; // when pasting top level node in the middle of paragraph\n                // we need to split paragraph instead of placing it inline\n                if ($03df355ea183d08a$var$$isRangeSelection(this) && $03df355ea183d08a$var$$isDecoratorNode(node) && ($03df355ea183d08a$var$$isElementNode(target) || $03df355ea183d08a$var$$isTextNode(target)) && !node.isInline()) {\n                    let splitNode;\n                    let splitOffset;\n                    if ($03df355ea183d08a$var$$isTextNode(target)) {\n                        splitNode = target.getParentOrThrow();\n                        const [textNode] = target.splitText(anchorOffset);\n                        splitOffset = textNode.getIndexWithinParent() + 1;\n                    } else {\n                        splitNode = target;\n                        splitOffset = anchorOffset;\n                    }\n                    const [, rightTree] = $03df355ea183d08a$var$$splitNode(splitNode, splitOffset);\n                    target = rightTree.insertBefore(node);\n                } else target = target.insertAfter(node, false);\n            } else {\n                const nextTarget = target.getParentOrThrow(); // if we're inserting an Element after a LineBreak, we want to move the target to the parent\n                // and remove the LineBreak so we don't have empty space.\n                if ($03df355ea183d08a$var$$isLineBreakNode(target)) target.remove();\n                target = nextTarget; // Re-try again with the target being the parent\n                i--;\n                continue;\n            }\n        }\n        if (selectStart) {\n            // Handle moving selection to start for all nodes\n            if ($03df355ea183d08a$var$$isTextNode(startingNode)) startingNode.select();\n            else {\n                const prevSibling = target.getPreviousSibling();\n                if ($03df355ea183d08a$var$$isTextNode(prevSibling)) prevSibling.select();\n                else {\n                    const index = target.getIndexWithinParent();\n                    target.getParentOrThrow().select(index, index);\n                }\n            }\n        }\n        if ($03df355ea183d08a$var$$isElementNode(target)) {\n            // If the last node to be inserted was a text node,\n            // then we should attempt to move selection to that.\n            const lastChild = $03df355ea183d08a$var$$isTextNode(lastNode) ? lastNode : $03df355ea183d08a$var$$isElementNode(lastNode) && lastNode.isInline() ? lastNode.getLastDescendant() : target.getLastDescendant();\n            if (!selectStart) {\n                // Handle moving selection to end for elements\n                if (lastChild === null) target.select();\n                else if ($03df355ea183d08a$var$$isTextNode(lastChild)) {\n                    if (lastChild.getTextContent() === \"\") lastChild.selectPrevious();\n                    else lastChild.select();\n                } else lastChild.selectNext();\n            }\n            if (siblings.length !== 0) {\n                const originalTarget = target;\n                for(let i = siblings.length - 1; i >= 0; i--){\n                    const sibling = siblings[i];\n                    const prevParent = sibling.getParentOrThrow();\n                    if ($03df355ea183d08a$var$$isElementNode(target) && !$03df355ea183d08a$var$$isBlockElementNode(sibling) && !($03df355ea183d08a$var$$isDecoratorNode(sibling) && (!sibling.isInline() || sibling.isIsolated()))) {\n                        if (originalTarget === target) target.append(sibling);\n                        else target.insertBefore(sibling);\n                        target = sibling;\n                    } else if (!$03df355ea183d08a$var$$isElementNode(target) && !$03df355ea183d08a$var$$isBlockElementNode(sibling)) {\n                        target.insertBefore(sibling);\n                        target = sibling;\n                    } else if ($03df355ea183d08a$var$$isElementNode(sibling) && !sibling.canInsertAfter(target)) {\n                        // @ts-ignore The clone method does exist on the constructor.\n                        const prevParentClone = prevParent.constructor.clone(prevParent);\n                        if (!$03df355ea183d08a$var$$isElementNode(prevParentClone)) throw Error(`insertNodes: cloned parent clone is not an element`);\n                        prevParentClone.append(sibling);\n                        target.insertAfter(prevParentClone);\n                    } else target.insertAfter(sibling);\n                     // Check if the prev parent is empty, as it might need\n                    // removing.\n                    if (prevParent.isEmpty() && !prevParent.canBeEmpty()) prevParent.remove();\n                }\n            }\n        } else if (!selectStart) {\n            // Handle moving selection to end for other nodes\n            if ($03df355ea183d08a$var$$isTextNode(target)) target.select();\n            else {\n                const element = target.getParentOrThrow();\n                const index = target.getIndexWithinParent() + 1;\n                element.select(index, index);\n            }\n        }\n        return true;\n    }\n    insertParagraph() {\n        if (!this.isCollapsed()) this.removeText();\n        const anchor = this.anchor;\n        const anchorOffset = anchor.offset;\n        let currentElement;\n        let nodesToMove = [];\n        let siblingsToMove = [];\n        if (anchor.type === \"text\") {\n            const anchorNode = anchor.getNode();\n            nodesToMove = anchorNode.getNextSiblings().reverse();\n            currentElement = anchorNode.getParentOrThrow();\n            const isInline = currentElement.isInline();\n            const textContentLength = isInline ? currentElement.getTextContentSize() : anchorNode.getTextContentSize();\n            if (anchorOffset === 0) nodesToMove.push(anchorNode);\n            else {\n                if (isInline) // For inline nodes, we want to move all the siblings to the new paragraph\n                // if selection is at the end, we just move the siblings. Otherwise, we also\n                // split the text node and add that and it's siblings below.\n                siblingsToMove = currentElement.getNextSiblings();\n                if (anchorOffset !== textContentLength) {\n                    if (!isInline || anchorOffset !== anchorNode.getTextContentSize()) {\n                        const [, splitNode] = anchorNode.splitText(anchorOffset);\n                        nodesToMove.push(splitNode);\n                    }\n                }\n            }\n        } else {\n            currentElement = anchor.getNode();\n            if ($03df355ea183d08a$var$$isRootOrShadowRoot(currentElement)) {\n                const paragraph = $03df355ea183d08a$var$$createParagraphNode();\n                const child = currentElement.getChildAtIndex(anchorOffset);\n                paragraph.select();\n                if (child !== null) child.insertBefore(paragraph, false);\n                else currentElement.append(paragraph);\n                return;\n            }\n            nodesToMove = currentElement.getChildren().slice(anchorOffset).reverse();\n        }\n        const nodesToMoveLength = nodesToMove.length;\n        if (anchorOffset === 0 && nodesToMoveLength > 0 && currentElement.isInline()) {\n            const parent = currentElement.getParentOrThrow();\n            const newElement = parent.insertNewAfter(this, false);\n            if ($03df355ea183d08a$var$$isElementNode(newElement)) {\n                const children = parent.getChildren();\n                for(let i = 0; i < children.length; i++)newElement.append(children[i]);\n            }\n            return;\n        }\n        const newElement = currentElement.insertNewAfter(this, false);\n        if (newElement === null) // Handle as a line break insertion\n        this.insertLineBreak();\n        else if ($03df355ea183d08a$var$$isElementNode(newElement)) {\n            // If we're at the beginning of the current element, move the new element to be before the current element\n            const currentElementFirstChild = currentElement.getFirstChild();\n            const isBeginning = anchorOffset === 0 && (currentElement.is(anchor.getNode()) || currentElementFirstChild && currentElementFirstChild.is(anchor.getNode()));\n            if (isBeginning && nodesToMoveLength > 0) {\n                currentElement.insertBefore(newElement);\n                return;\n            }\n            let firstChild = null;\n            const siblingsToMoveLength = siblingsToMove.length;\n            const parent = newElement.getParentOrThrow(); // For inline elements, we append the siblings to the parent.\n            if (siblingsToMoveLength > 0) for(let i = 0; i < siblingsToMoveLength; i++){\n                const siblingToMove = siblingsToMove[i];\n                parent.append(siblingToMove);\n            }\n            if (nodesToMoveLength !== 0) for(let i = 0; i < nodesToMoveLength; i++){\n                const nodeToMove = nodesToMove[i];\n                if (firstChild === null) newElement.append(nodeToMove);\n                else firstChild.insertBefore(nodeToMove);\n                firstChild = nodeToMove;\n            }\n            if (!newElement.canBeEmpty() && newElement.getChildrenSize() === 0) {\n                newElement.selectPrevious();\n                newElement.remove();\n            } else newElement.selectStart();\n        }\n    }\n    insertLineBreak(selectStart) {\n        const lineBreakNode = $03df355ea183d08a$var$$createLineBreakNode();\n        const anchor = this.anchor;\n        if (anchor.type === \"element\") {\n            const element = anchor.getNode();\n            if ($03df355ea183d08a$var$$isRootNode(element)) this.insertParagraph();\n        }\n        if (selectStart) this.insertNodes([\n            lineBreakNode\n        ], true);\n        else if (this.insertNodes([\n            lineBreakNode\n        ])) lineBreakNode.selectNext(0, 0);\n    }\n    getCharacterOffsets() {\n        return $03df355ea183d08a$var$getCharacterOffsets(this);\n    }\n    extract() {\n        const selectedNodes = this.getNodes();\n        const selectedNodesLength = selectedNodes.length;\n        const lastIndex = selectedNodesLength - 1;\n        const anchor = this.anchor;\n        const focus = this.focus;\n        let firstNode = selectedNodes[0];\n        let lastNode = selectedNodes[lastIndex];\n        const [anchorOffset, focusOffset] = $03df355ea183d08a$var$getCharacterOffsets(this);\n        if (selectedNodesLength === 0) return [];\n        else if (selectedNodesLength === 1) {\n            if ($03df355ea183d08a$var$$isTextNode(firstNode) && !this.isCollapsed()) {\n                const startOffset = anchorOffset > focusOffset ? focusOffset : anchorOffset;\n                const endOffset = anchorOffset > focusOffset ? anchorOffset : focusOffset;\n                const splitNodes = firstNode.splitText(startOffset, endOffset);\n                const node = startOffset === 0 ? splitNodes[0] : splitNodes[1];\n                return node != null ? [\n                    node\n                ] : [];\n            }\n            return [\n                firstNode\n            ];\n        }\n        const isBefore = anchor.isBefore(focus);\n        if ($03df355ea183d08a$var$$isTextNode(firstNode)) {\n            const startOffset = isBefore ? anchorOffset : focusOffset;\n            if (startOffset === firstNode.getTextContentSize()) selectedNodes.shift();\n            else if (startOffset !== 0) {\n                [, firstNode] = firstNode.splitText(startOffset);\n                selectedNodes[0] = firstNode;\n            }\n        }\n        if ($03df355ea183d08a$var$$isTextNode(lastNode)) {\n            const lastNodeText = lastNode.getTextContent();\n            const lastNodeTextLength = lastNodeText.length;\n            const endOffset = isBefore ? focusOffset : anchorOffset;\n            if (endOffset === 0) selectedNodes.pop();\n            else if (endOffset !== lastNodeTextLength) {\n                [lastNode] = lastNode.splitText(endOffset);\n                selectedNodes[lastIndex] = lastNode;\n            }\n        }\n        return selectedNodes;\n    }\n    modify(alter, isBackward, granularity) {\n        const focus = this.focus;\n        const anchor = this.anchor;\n        const collapse = alter === \"move\"; // Handle the selection movement around decorators.\n        const possibleNode = $03df355ea183d08a$var$$getAdjacentNode(focus, isBackward);\n        if ($03df355ea183d08a$var$$isDecoratorNode(possibleNode) && !possibleNode.isIsolated()) {\n            // Make it possible to move selection from range selection to\n            // node selection on the node.\n            if (collapse && possibleNode.isKeyboardSelectable()) {\n                const nodeSelection = $03df355ea183d08a$var$$createNodeSelection();\n                nodeSelection.add(possibleNode.__key);\n                $03df355ea183d08a$var$$setSelection(nodeSelection);\n                return;\n            }\n            const sibling = isBackward ? possibleNode.getPreviousSibling() : possibleNode.getNextSibling();\n            if (!$03df355ea183d08a$var$$isTextNode(sibling)) {\n                const parent = possibleNode.getParentOrThrow();\n                let offset;\n                let elementKey;\n                if ($03df355ea183d08a$var$$isElementNode(sibling)) {\n                    elementKey = sibling.__key;\n                    offset = isBackward ? sibling.getChildrenSize() : 0;\n                } else {\n                    offset = possibleNode.getIndexWithinParent();\n                    elementKey = parent.__key;\n                    if (!isBackward) offset++;\n                }\n                focus.set(elementKey, offset, \"element\");\n                if (collapse) anchor.set(elementKey, offset, \"element\");\n                return;\n            } else {\n                const siblingKey = sibling.__key;\n                const offset = isBackward ? sibling.getTextContent().length : 0;\n                focus.set(siblingKey, offset, \"text\");\n                if (collapse) anchor.set(siblingKey, offset, \"text\");\n                return;\n            }\n        }\n        const editor = $03df355ea183d08a$var$getActiveEditor();\n        const domSelection = $03df355ea183d08a$var$getDOMSelection(editor._window);\n        if (!domSelection) return;\n        const blockCursorElement = editor._blockCursorElement;\n        const rootElement = editor._rootElement; // Remove the block cursor element if it exists. This will ensure selection\n        // works as intended. If we leave it in the DOM all sorts of strange bugs\n        // occur. :/\n        if (rootElement !== null && blockCursorElement !== null && $03df355ea183d08a$var$$isElementNode(possibleNode) && !possibleNode.isInline() && !possibleNode.canBeEmpty()) $03df355ea183d08a$var$removeDOMBlockCursorElement(blockCursorElement, editor, rootElement);\n         // We use the DOM selection.modify API here to \"tell\" us what the selection\n        // will be. We then use it to update the Lexical selection accordingly. This\n        // is much more reliable than waiting for a beforeinput and using the ranges\n        // from getTargetRanges(), and is also better than trying to do it ourselves\n        // using Intl.Segmenter or other workarounds that struggle with word segments\n        // and line segments (especially with word wrapping and non-Roman languages).\n        $03df355ea183d08a$var$moveNativeSelection(domSelection, alter, isBackward ? \"backward\" : \"forward\", granularity); // Guard against no ranges\n        if (domSelection.rangeCount > 0) {\n            const range = domSelection.getRangeAt(0); // Apply the DOM selection to our Lexical selection.\n            const anchorNode = this.anchor.getNode();\n            const root = $03df355ea183d08a$var$$isRootNode(anchorNode) ? anchorNode : $03df355ea183d08a$var$$getNearestRootOrShadowRoot(anchorNode);\n            this.applyDOMRange(range);\n            this.dirty = true;\n            if (!collapse) {\n                // Validate selection; make sure that the new extended selection respects shadow roots\n                const nodes = this.getNodes();\n                const validNodes = [];\n                let shrinkSelection = false;\n                for(let i = 0; i < nodes.length; i++){\n                    const nextNode = nodes[i];\n                    if ($03df355ea183d08a$var$$hasAncestor(nextNode, root)) validNodes.push(nextNode);\n                    else shrinkSelection = true;\n                }\n                if (shrinkSelection && validNodes.length > 0) {\n                    // validNodes length check is a safeguard against an invalid selection; as getNodes()\n                    // will return an empty array in this case\n                    if (isBackward) {\n                        const firstValidNode = validNodes[0];\n                        if ($03df355ea183d08a$var$$isElementNode(firstValidNode)) firstValidNode.selectStart();\n                        else firstValidNode.getParentOrThrow().selectStart();\n                    } else {\n                        const lastValidNode = validNodes[validNodes.length - 1];\n                        if ($03df355ea183d08a$var$$isElementNode(lastValidNode)) lastValidNode.selectEnd();\n                        else lastValidNode.getParentOrThrow().selectEnd();\n                    }\n                } // Because a range works on start and end, we might need to flip\n                // the anchor and focus points to match what the DOM has, not what\n                // the range has specifically.\n                if (domSelection.anchorNode !== range.startContainer || domSelection.anchorOffset !== range.startOffset) $03df355ea183d08a$var$$swapPoints(this);\n            }\n        }\n    }\n    deleteCharacter(isBackward) {\n        if (this.isCollapsed()) {\n            const anchor = this.anchor;\n            const focus = this.focus;\n            let anchorNode = anchor.getNode();\n            if (!isBackward && (anchor.type === \"element\" && $03df355ea183d08a$var$$isElementNode(anchorNode) && anchor.offset === anchorNode.getChildrenSize() || anchor.type === \"text\" && anchor.offset === anchorNode.getTextContentSize())) {\n                const parent = anchorNode.getParent();\n                const nextSibling = anchorNode.getNextSibling() || (parent === null ? null : parent.getNextSibling());\n                if ($03df355ea183d08a$var$$isElementNode(nextSibling) && !nextSibling.canExtractContents()) return;\n            } // Handle the deletion around decorators.\n            const possibleNode = $03df355ea183d08a$var$$getAdjacentNode(focus, isBackward);\n            if ($03df355ea183d08a$var$$isDecoratorNode(possibleNode) && !possibleNode.isIsolated()) {\n                // Make it possible to move selection from range selection to\n                // node selection on the node.\n                if (possibleNode.isKeyboardSelectable() && $03df355ea183d08a$var$$isElementNode(anchorNode) && anchorNode.getChildrenSize() === 0) {\n                    anchorNode.remove();\n                    const nodeSelection = $03df355ea183d08a$var$$createNodeSelection();\n                    nodeSelection.add(possibleNode.__key);\n                    $03df355ea183d08a$var$$setSelection(nodeSelection);\n                } else possibleNode.remove();\n                return;\n            }\n            this.modify(\"extend\", isBackward, \"character\");\n            if (!this.isCollapsed()) {\n                const focusNode = focus.type === \"text\" ? focus.getNode() : null;\n                anchorNode = anchor.type === \"text\" ? anchor.getNode() : null;\n                if (focusNode !== null && focusNode.isSegmented()) {\n                    const offset = focus.offset;\n                    const textContentSize = focusNode.getTextContentSize();\n                    if (focusNode.is(anchorNode) || isBackward && offset !== textContentSize || !isBackward && offset !== 0) {\n                        $03df355ea183d08a$var$$removeSegment(focusNode, isBackward, offset);\n                        return;\n                    }\n                } else if (anchorNode !== null && anchorNode.isSegmented()) {\n                    const offset = anchor.offset;\n                    const textContentSize = anchorNode.getTextContentSize();\n                    if (anchorNode.is(focusNode) || isBackward && offset !== 0 || !isBackward && offset !== textContentSize) {\n                        $03df355ea183d08a$var$$removeSegment(anchorNode, isBackward, offset);\n                        return;\n                    }\n                }\n                $03df355ea183d08a$var$$updateCaretSelectionForUnicodeCharacter(this, isBackward);\n            } else if (isBackward && anchor.offset === 0) {\n                // Special handling around rich text nodes\n                const element = anchor.type === \"element\" ? anchor.getNode() : anchor.getNode().getParentOrThrow();\n                if (element.collapseAtStart(this)) return;\n            }\n        }\n        const wasCollapsed = this.isCollapsed();\n        this.removeText();\n        if (isBackward && !wasCollapsed && this.isCollapsed() && this.anchor.type === \"element\" && this.anchor.offset === 0) {\n            const anchorNode = this.anchor.getNode();\n            if (anchorNode.isEmpty() && $03df355ea183d08a$var$$isRootNode(anchorNode.getParent()) && anchorNode.getIndexWithinParent() === 0) anchorNode.collapseAtStart(this);\n        }\n    }\n    deleteLine(isBackward) {\n        if (this.isCollapsed()) {\n            if (this.anchor.type === \"text\") this.modify(\"extend\", isBackward, \"lineboundary\");\n             // If selection is extended to cover text edge then extend it one character more\n            // to delete its parent element. Otherwise text content will be deleted but empty\n            // parent node will remain\n            const endPoint = isBackward ? this.focus : this.anchor;\n            if (endPoint.offset === 0) this.modify(\"extend\", isBackward, \"character\");\n        }\n        this.removeText();\n    }\n    deleteWord(isBackward) {\n        if (this.isCollapsed()) this.modify(\"extend\", isBackward, \"word\");\n        this.removeText();\n    }\n    constructor(anchor, focus, format, style){\n        this.anchor = anchor;\n        this.focus = focus;\n        this.dirty = false;\n        this.format = format;\n        this.style = style;\n        this._cachedNodes = null;\n        anchor._selection = this;\n        focus._selection = this;\n    }\n}\nfunction $03df355ea183d08a$var$$isNodeSelection(x) {\n    return x instanceof $03df355ea183d08a$var$NodeSelection;\n}\nfunction $03df355ea183d08a$var$getCharacterOffset(point) {\n    const offset = point.offset;\n    if (point.type === \"text\") return offset;\n    const parent = point.getNode();\n    return offset === parent.getChildrenSize() ? parent.getTextContent().length : 0;\n}\nfunction $03df355ea183d08a$var$getCharacterOffsets(selection) {\n    const anchor = selection.anchor;\n    const focus = selection.focus;\n    if (anchor.type === \"element\" && focus.type === \"element\" && anchor.key === focus.key && anchor.offset === focus.offset) return [\n        0,\n        0\n    ];\n    return [\n        $03df355ea183d08a$var$getCharacterOffset(anchor),\n        $03df355ea183d08a$var$getCharacterOffset(focus)\n    ];\n}\nfunction $03df355ea183d08a$var$$swapPoints(selection) {\n    const focus = selection.focus;\n    const anchor = selection.anchor;\n    const anchorKey = anchor.key;\n    const anchorOffset = anchor.offset;\n    const anchorType = anchor.type;\n    $03df355ea183d08a$var$$setPointValues(anchor, focus.key, focus.offset, focus.type);\n    $03df355ea183d08a$var$$setPointValues(focus, anchorKey, anchorOffset, anchorType);\n    selection._cachedNodes = null;\n}\nfunction $03df355ea183d08a$var$moveNativeSelection(domSelection, alter, direction, granularity) {\n    // @ts-expect-error Selection.modify() method applies a change to the current selection or cursor position,\n    // but is still non-standard in some browsers.\n    domSelection.modify(alter, direction, granularity);\n}\nfunction $03df355ea183d08a$var$$updateCaretSelectionForUnicodeCharacter(selection, isBackward) {\n    const anchor = selection.anchor;\n    const focus = selection.focus;\n    const anchorNode = anchor.getNode();\n    const focusNode = focus.getNode();\n    if (anchorNode === focusNode && anchor.type === \"text\" && focus.type === \"text\") {\n        // Handling of multibyte characters\n        const anchorOffset = anchor.offset;\n        const focusOffset = focus.offset;\n        const isBefore = anchorOffset < focusOffset;\n        const startOffset = isBefore ? anchorOffset : focusOffset;\n        const endOffset = isBefore ? focusOffset : anchorOffset;\n        const characterOffset = endOffset - 1;\n        if (startOffset !== characterOffset) {\n            const text = anchorNode.getTextContent().slice(startOffset, endOffset);\n            if (!$03df355ea183d08a$var$doesContainGrapheme(text)) {\n                if (isBackward) focus.offset = characterOffset;\n                else anchor.offset = characterOffset;\n            }\n        }\n    }\n}\nfunction $03df355ea183d08a$var$$removeSegment(node, isBackward, offset) {\n    const textNode = node;\n    const textContent = textNode.getTextContent();\n    const split = textContent.split(/(?=\\s)/g);\n    const splitLength = split.length;\n    let segmentOffset = 0;\n    let restoreOffset = 0;\n    for(let i = 0; i < splitLength; i++){\n        const text = split[i];\n        const isLast = i === splitLength - 1;\n        restoreOffset = segmentOffset;\n        segmentOffset += text.length;\n        if (isBackward && segmentOffset === offset || segmentOffset > offset || isLast) {\n            split.splice(i, 1);\n            if (isLast) restoreOffset = undefined;\n            break;\n        }\n    }\n    const nextTextContent = split.join(\"\").trim();\n    if (nextTextContent === \"\") textNode.remove();\n    else {\n        textNode.setTextContent(nextTextContent);\n        textNode.select(restoreOffset, restoreOffset);\n    }\n}\nfunction $03df355ea183d08a$var$shouldResolveAncestor(resolvedElement, resolvedOffset, lastPoint) {\n    const parent = resolvedElement.getParent();\n    return lastPoint === null || parent === null || !parent.canBeEmpty() || parent !== lastPoint.getNode();\n}\nfunction $03df355ea183d08a$var$internalResolveSelectionPoint(dom, offset, lastPoint, editor) {\n    let resolvedOffset = offset;\n    let resolvedNode; // If we have selection on an element, we will\n    // need to figure out (using the offset) what text\n    // node should be selected.\n    if (dom.nodeType === $03df355ea183d08a$var$DOM_ELEMENT_TYPE) {\n        // Resolve element to a ElementNode, or TextNode, or null\n        let moveSelectionToEnd = false; // Given we're moving selection to another node, selection is\n        // definitely dirty.\n        // We use the anchor to find which child node to select\n        const childNodes = dom.childNodes;\n        const childNodesLength = childNodes.length; // If the anchor is the same as length, then this means we\n        // need to select the very last text node.\n        if (resolvedOffset === childNodesLength) {\n            moveSelectionToEnd = true;\n            resolvedOffset = childNodesLength - 1;\n        }\n        let childDOM = childNodes[resolvedOffset];\n        let hasBlockCursor = false;\n        if (childDOM === editor._blockCursorElement) {\n            childDOM = childNodes[resolvedOffset + 1];\n            hasBlockCursor = true;\n        } else if (editor._blockCursorElement !== null) resolvedOffset--;\n        resolvedNode = $03df355ea183d08a$var$getNodeFromDOM(childDOM);\n        if ($03df355ea183d08a$var$$isTextNode(resolvedNode)) resolvedOffset = $03df355ea183d08a$var$getTextNodeOffset(resolvedNode, moveSelectionToEnd);\n        else {\n            let resolvedElement = $03df355ea183d08a$var$getNodeFromDOM(dom); // Ensure resolvedElement is actually a element.\n            if (resolvedElement === null) return null;\n            if ($03df355ea183d08a$var$$isElementNode(resolvedElement)) {\n                let child = resolvedElement.getChildAtIndex(resolvedOffset);\n                if ($03df355ea183d08a$var$$isElementNode(child) && $03df355ea183d08a$var$shouldResolveAncestor(child, resolvedOffset, lastPoint)) {\n                    const descendant = moveSelectionToEnd ? child.getLastDescendant() : child.getFirstDescendant();\n                    if (descendant === null) {\n                        resolvedElement = child;\n                        resolvedOffset = 0;\n                    } else {\n                        child = descendant;\n                        resolvedElement = $03df355ea183d08a$var$$isElementNode(child) ? child : child.getParentOrThrow();\n                    }\n                }\n                if ($03df355ea183d08a$var$$isTextNode(child)) {\n                    resolvedNode = child;\n                    resolvedElement = null;\n                    resolvedOffset = $03df355ea183d08a$var$getTextNodeOffset(child, moveSelectionToEnd);\n                } else if (child !== resolvedElement && moveSelectionToEnd && !hasBlockCursor) resolvedOffset++;\n            } else {\n                const index = resolvedElement.getIndexWithinParent(); // When selecting decorators, there can be some selection issues when using resolvedOffset,\n                // and instead we should be checking if we're using the offset\n                if (offset === 0 && $03df355ea183d08a$var$$isDecoratorNode(resolvedElement) && $03df355ea183d08a$var$getNodeFromDOM(dom) === resolvedElement) resolvedOffset = index;\n                else resolvedOffset = index + 1;\n                resolvedElement = resolvedElement.getParentOrThrow();\n            }\n            if ($03df355ea183d08a$var$$isElementNode(resolvedElement)) return $03df355ea183d08a$var$$createPoint(resolvedElement.__key, resolvedOffset, \"element\");\n        }\n    } else // TextNode or null\n    resolvedNode = $03df355ea183d08a$var$getNodeFromDOM(dom);\n    if (!$03df355ea183d08a$var$$isTextNode(resolvedNode)) return null;\n    return $03df355ea183d08a$var$$createPoint(resolvedNode.__key, resolvedOffset, \"text\");\n}\nfunction $03df355ea183d08a$var$resolveSelectionPointOnBoundary(point, isBackward, isCollapsed) {\n    const offset = point.offset;\n    const node = point.getNode();\n    if (offset === 0) {\n        const prevSibling = node.getPreviousSibling();\n        const parent = node.getParent();\n        if (!isBackward) {\n            if ($03df355ea183d08a$var$$isElementNode(prevSibling) && !isCollapsed && prevSibling.isInline()) {\n                point.key = prevSibling.__key;\n                point.offset = prevSibling.getChildrenSize(); // @ts-expect-error: intentional\n                point.type = \"element\";\n            } else if ($03df355ea183d08a$var$$isTextNode(prevSibling)) {\n                point.key = prevSibling.__key;\n                point.offset = prevSibling.getTextContent().length;\n            }\n        } else if ((isCollapsed || !isBackward) && prevSibling === null && $03df355ea183d08a$var$$isElementNode(parent) && parent.isInline()) {\n            const parentSibling = parent.getPreviousSibling();\n            if ($03df355ea183d08a$var$$isTextNode(parentSibling)) {\n                point.key = parentSibling.__key;\n                point.offset = parentSibling.getTextContent().length;\n            }\n        }\n    } else if (offset === node.getTextContent().length) {\n        const nextSibling = node.getNextSibling();\n        const parent = node.getParent();\n        if (isBackward && $03df355ea183d08a$var$$isElementNode(nextSibling) && nextSibling.isInline()) {\n            point.key = nextSibling.__key;\n            point.offset = 0; // @ts-expect-error: intentional\n            point.type = \"element\";\n        } else if ((isCollapsed || isBackward) && nextSibling === null && $03df355ea183d08a$var$$isElementNode(parent) && parent.isInline() && !parent.canInsertTextAfter()) {\n            const parentSibling = parent.getNextSibling();\n            if ($03df355ea183d08a$var$$isTextNode(parentSibling)) {\n                point.key = parentSibling.__key;\n                point.offset = 0;\n            }\n        }\n    }\n}\nfunction $03df355ea183d08a$var$normalizeSelectionPointsForBoundaries(anchor, focus, lastSelection) {\n    if (anchor.type === \"text\" && focus.type === \"text\") {\n        const isBackward = anchor.isBefore(focus);\n        const isCollapsed = anchor.is(focus); // Attempt to normalize the offset to the previous sibling if we're at the\n        // start of a text node and the sibling is a text node or inline element.\n        $03df355ea183d08a$var$resolveSelectionPointOnBoundary(anchor, isBackward, isCollapsed);\n        $03df355ea183d08a$var$resolveSelectionPointOnBoundary(focus, !isBackward, isCollapsed);\n        if (isCollapsed) {\n            focus.key = anchor.key;\n            focus.offset = anchor.offset;\n            focus.type = anchor.type;\n        }\n        const editor = $03df355ea183d08a$var$getActiveEditor();\n        if (editor.isComposing() && editor._compositionKey !== anchor.key && $03df355ea183d08a$var$$isRangeSelection(lastSelection)) {\n            const lastAnchor = lastSelection.anchor;\n            const lastFocus = lastSelection.focus;\n            $03df355ea183d08a$var$$setPointValues(anchor, lastAnchor.key, lastAnchor.offset, lastAnchor.type);\n            $03df355ea183d08a$var$$setPointValues(focus, lastFocus.key, lastFocus.offset, lastFocus.type);\n        }\n    }\n}\nfunction $03df355ea183d08a$var$internalResolveSelectionPoints(anchorDOM, anchorOffset, focusDOM, focusOffset, editor, lastSelection) {\n    if (anchorDOM === null || focusDOM === null || !$03df355ea183d08a$var$isSelectionWithinEditor(editor, anchorDOM, focusDOM)) return null;\n    const resolvedAnchorPoint = $03df355ea183d08a$var$internalResolveSelectionPoint(anchorDOM, anchorOffset, $03df355ea183d08a$var$$isRangeSelection(lastSelection) ? lastSelection.anchor : null, editor);\n    if (resolvedAnchorPoint === null) return null;\n    const resolvedFocusPoint = $03df355ea183d08a$var$internalResolveSelectionPoint(focusDOM, focusOffset, $03df355ea183d08a$var$$isRangeSelection(lastSelection) ? lastSelection.focus : null, editor);\n    if (resolvedFocusPoint === null) return null;\n    if (resolvedAnchorPoint.type === \"element\" && resolvedFocusPoint.type === \"element\") {\n        const anchorNode = $03df355ea183d08a$var$getNodeFromDOM(anchorDOM);\n        const focusNode = $03df355ea183d08a$var$getNodeFromDOM(focusDOM); // Ensure if we're selecting the content of a decorator that we\n        // return null for this point, as it's not in the controlled scope\n        // of Lexical.\n        if ($03df355ea183d08a$var$$isDecoratorNode(anchorNode) && $03df355ea183d08a$var$$isDecoratorNode(focusNode)) return null;\n    } // Handle normalization of selection when it is at the boundaries.\n    $03df355ea183d08a$var$normalizeSelectionPointsForBoundaries(resolvedAnchorPoint, resolvedFocusPoint, lastSelection);\n    return [\n        resolvedAnchorPoint,\n        resolvedFocusPoint\n    ];\n}\nfunction $03df355ea183d08a$var$$isBlockElementNode(node) {\n    return $03df355ea183d08a$var$$isElementNode(node) && !node.isInline();\n} // This is used to make a selection when the existing\n// selection is null, i.e. forcing selection on the editor\n// when it current exists outside the editor.\nfunction $03df355ea183d08a$var$internalMakeRangeSelection(anchorKey, anchorOffset, focusKey, focusOffset, anchorType, focusType) {\n    const editorState = $03df355ea183d08a$var$getActiveEditorState();\n    const selection = new $03df355ea183d08a$var$RangeSelection($03df355ea183d08a$var$$createPoint(anchorKey, anchorOffset, anchorType), $03df355ea183d08a$var$$createPoint(focusKey, focusOffset, focusType), 0, \"\");\n    selection.dirty = true;\n    editorState._selection = selection;\n    return selection;\n}\nfunction $03df355ea183d08a$var$$createRangeSelection() {\n    const anchor = $03df355ea183d08a$var$$createPoint(\"root\", 0, \"element\");\n    const focus = $03df355ea183d08a$var$$createPoint(\"root\", 0, \"element\");\n    return new $03df355ea183d08a$var$RangeSelection(anchor, focus, 0, \"\");\n}\nfunction $03df355ea183d08a$var$$createNodeSelection() {\n    return new $03df355ea183d08a$var$NodeSelection(new Set());\n}\nfunction $03df355ea183d08a$var$DEPRECATED_$createGridSelection() {\n    const anchor = $03df355ea183d08a$var$$createPoint(\"root\", 0, \"element\");\n    const focus = $03df355ea183d08a$var$$createPoint(\"root\", 0, \"element\");\n    return new $03df355ea183d08a$var$GridSelection(\"root\", anchor, focus);\n}\nfunction $03df355ea183d08a$var$internalCreateSelection(editor) {\n    const currentEditorState = editor.getEditorState();\n    const lastSelection = currentEditorState._selection;\n    const domSelection = $03df355ea183d08a$var$getDOMSelection(editor._window);\n    if ($03df355ea183d08a$var$$isNodeSelection(lastSelection) || $03df355ea183d08a$var$DEPRECATED_$isGridSelection(lastSelection)) return lastSelection.clone();\n    return $03df355ea183d08a$var$internalCreateRangeSelection(lastSelection, domSelection, editor);\n}\nfunction $03df355ea183d08a$var$internalCreateRangeSelection(lastSelection, domSelection, editor) {\n    const windowObj = editor._window;\n    if (windowObj === null) return null;\n     // When we create a selection, we try to use the previous\n    // selection where possible, unless an actual user selection\n    // change has occurred. When we do need to create a new selection\n    // we validate we can have text nodes for both anchor and focus\n    // nodes. If that holds true, we then return that selection\n    // as a mutable object that we use for the editor state for this\n    // update cycle. If a selection gets changed, and requires a\n    // update to native DOM selection, it gets marked as \"dirty\".\n    // If the selection changes, but matches with the existing\n    // DOM selection, then we only need to sync it. Otherwise,\n    // we generally bail out of doing an update to selection during\n    // reconciliation unless there are dirty nodes that need\n    // reconciling.\n    const windowEvent = windowObj.event;\n    const eventType = windowEvent ? windowEvent.type : undefined;\n    const isSelectionChange = eventType === \"selectionchange\";\n    const useDOMSelection = !$03df355ea183d08a$var$getIsProcesssingMutations() && (isSelectionChange || eventType === \"beforeinput\" || eventType === \"compositionstart\" || eventType === \"compositionend\" || eventType === \"click\" && windowEvent && windowEvent.detail === 3 || eventType === \"drop\" || eventType === undefined);\n    let anchorDOM, focusDOM, anchorOffset, focusOffset;\n    if (!$03df355ea183d08a$var$$isRangeSelection(lastSelection) || useDOMSelection) {\n        if (domSelection === null) return null;\n        anchorDOM = domSelection.anchorNode;\n        focusDOM = domSelection.focusNode;\n        anchorOffset = domSelection.anchorOffset;\n        focusOffset = domSelection.focusOffset;\n        if (isSelectionChange && $03df355ea183d08a$var$$isRangeSelection(lastSelection) && !$03df355ea183d08a$var$isSelectionWithinEditor(editor, anchorDOM, focusDOM)) return lastSelection.clone();\n    } else return lastSelection.clone();\n     // Let's resolve the text nodes from the offsets and DOM nodes we have from\n    // native selection.\n    const resolvedSelectionPoints = $03df355ea183d08a$var$internalResolveSelectionPoints(anchorDOM, anchorOffset, focusDOM, focusOffset, editor, lastSelection);\n    if (resolvedSelectionPoints === null) return null;\n    const [resolvedAnchorPoint, resolvedFocusPoint] = resolvedSelectionPoints;\n    return new $03df355ea183d08a$var$RangeSelection(resolvedAnchorPoint, resolvedFocusPoint, !$03df355ea183d08a$var$$isRangeSelection(lastSelection) ? 0 : lastSelection.format, !$03df355ea183d08a$var$$isRangeSelection(lastSelection) ? \"\" : lastSelection.style);\n}\nfunction $03df355ea183d08a$var$$getSelection() {\n    const editorState = $03df355ea183d08a$var$getActiveEditorState();\n    return editorState._selection;\n}\nfunction $03df355ea183d08a$var$$getPreviousSelection() {\n    const editor = $03df355ea183d08a$var$getActiveEditor();\n    return editor._editorState._selection;\n}\nfunction $03df355ea183d08a$var$$updateElementSelectionOnCreateDeleteNode(selection, parentNode, nodeOffset, times = 1) {\n    const anchor = selection.anchor;\n    const focus = selection.focus;\n    const anchorNode = anchor.getNode();\n    const focusNode = focus.getNode();\n    if (!parentNode.is(anchorNode) && !parentNode.is(focusNode)) return;\n    const parentKey = parentNode.__key; // Single node. We shift selection but never redimension it\n    if (selection.isCollapsed()) {\n        const selectionOffset = anchor.offset;\n        if (nodeOffset <= selectionOffset) {\n            const newSelectionOffset = Math.max(0, selectionOffset + times);\n            anchor.set(parentKey, newSelectionOffset, \"element\");\n            focus.set(parentKey, newSelectionOffset, \"element\"); // The new selection might point to text nodes, try to resolve them\n            $03df355ea183d08a$var$$updateSelectionResolveTextNodes(selection);\n        }\n        return;\n    } // Multiple nodes selected. We shift or redimension selection\n    const isBackward = selection.isBackward();\n    const firstPoint = isBackward ? focus : anchor;\n    const firstPointNode = firstPoint.getNode();\n    const lastPoint = isBackward ? anchor : focus;\n    const lastPointNode = lastPoint.getNode();\n    if (parentNode.is(firstPointNode)) {\n        const firstPointOffset = firstPoint.offset;\n        if (nodeOffset <= firstPointOffset) firstPoint.set(parentKey, Math.max(0, firstPointOffset + times), \"element\");\n    }\n    if (parentNode.is(lastPointNode)) {\n        const lastPointOffset = lastPoint.offset;\n        if (nodeOffset <= lastPointOffset) lastPoint.set(parentKey, Math.max(0, lastPointOffset + times), \"element\");\n    } // The new selection might point to text nodes, try to resolve them\n    $03df355ea183d08a$var$$updateSelectionResolveTextNodes(selection);\n}\nfunction $03df355ea183d08a$var$$updateSelectionResolveTextNodes(selection) {\n    const anchor = selection.anchor;\n    const anchorOffset = anchor.offset;\n    const focus = selection.focus;\n    const focusOffset = focus.offset;\n    const anchorNode = anchor.getNode();\n    const focusNode = focus.getNode();\n    if (selection.isCollapsed()) {\n        if (!$03df355ea183d08a$var$$isElementNode(anchorNode)) return;\n        const childSize = anchorNode.getChildrenSize();\n        const anchorOffsetAtEnd = anchorOffset >= childSize;\n        const child = anchorOffsetAtEnd ? anchorNode.getChildAtIndex(childSize - 1) : anchorNode.getChildAtIndex(anchorOffset);\n        if ($03df355ea183d08a$var$$isTextNode(child)) {\n            let newOffset = 0;\n            if (anchorOffsetAtEnd) newOffset = child.getTextContentSize();\n            anchor.set(child.__key, newOffset, \"text\");\n            focus.set(child.__key, newOffset, \"text\");\n        }\n        return;\n    }\n    if ($03df355ea183d08a$var$$isElementNode(anchorNode)) {\n        const childSize = anchorNode.getChildrenSize();\n        const anchorOffsetAtEnd = anchorOffset >= childSize;\n        const child = anchorOffsetAtEnd ? anchorNode.getChildAtIndex(childSize - 1) : anchorNode.getChildAtIndex(anchorOffset);\n        if ($03df355ea183d08a$var$$isTextNode(child)) {\n            let newOffset = 0;\n            if (anchorOffsetAtEnd) newOffset = child.getTextContentSize();\n            anchor.set(child.__key, newOffset, \"text\");\n        }\n    }\n    if ($03df355ea183d08a$var$$isElementNode(focusNode)) {\n        const childSize = focusNode.getChildrenSize();\n        const focusOffsetAtEnd = focusOffset >= childSize;\n        const child = focusOffsetAtEnd ? focusNode.getChildAtIndex(childSize - 1) : focusNode.getChildAtIndex(focusOffset);\n        if ($03df355ea183d08a$var$$isTextNode(child)) {\n            let newOffset = 0;\n            if (focusOffsetAtEnd) newOffset = child.getTextContentSize();\n            focus.set(child.__key, newOffset, \"text\");\n        }\n    }\n}\nfunction $03df355ea183d08a$var$applySelectionTransforms(nextEditorState, editor) {\n    const prevEditorState = editor.getEditorState();\n    const prevSelection = prevEditorState._selection;\n    const nextSelection = nextEditorState._selection;\n    if ($03df355ea183d08a$var$$isRangeSelection(nextSelection)) {\n        const anchor = nextSelection.anchor;\n        const focus = nextSelection.focus;\n        let anchorNode;\n        if (anchor.type === \"text\") {\n            anchorNode = anchor.getNode();\n            anchorNode.selectionTransform(prevSelection, nextSelection);\n        }\n        if (focus.type === \"text\") {\n            const focusNode = focus.getNode();\n            if (anchorNode !== focusNode) focusNode.selectionTransform(prevSelection, nextSelection);\n        }\n    }\n}\nfunction $03df355ea183d08a$var$moveSelectionPointToSibling(point, node, parent, prevSibling, nextSibling) {\n    let siblingKey = null;\n    let offset = 0;\n    let type = null;\n    if (prevSibling !== null) {\n        siblingKey = prevSibling.__key;\n        if ($03df355ea183d08a$var$$isTextNode(prevSibling)) {\n            offset = prevSibling.getTextContentSize();\n            type = \"text\";\n        } else if ($03df355ea183d08a$var$$isElementNode(prevSibling)) {\n            offset = prevSibling.getChildrenSize();\n            type = \"element\";\n        }\n    } else if (nextSibling !== null) {\n        siblingKey = nextSibling.__key;\n        if ($03df355ea183d08a$var$$isTextNode(nextSibling)) type = \"text\";\n        else if ($03df355ea183d08a$var$$isElementNode(nextSibling)) type = \"element\";\n    }\n    if (siblingKey !== null && type !== null) point.set(siblingKey, offset, type);\n    else {\n        offset = node.getIndexWithinParent();\n        if (offset === -1) // Move selection to end of parent\n        offset = parent.getChildrenSize();\n        point.set(parent.__key, offset, \"element\");\n    }\n}\nfunction $03df355ea183d08a$var$adjustPointOffsetForMergedSibling(point, isBefore, key, target, textLength) {\n    if (point.type === \"text\") {\n        point.key = key;\n        if (!isBefore) point.offset += textLength;\n    } else if (point.offset > target.getIndexWithinParent()) point.offset -= 1;\n}\nfunction $03df355ea183d08a$var$updateDOMSelection(prevSelection, nextSelection, editor, domSelection, tags, rootElement, nodeCount) {\n    const anchorDOMNode = domSelection.anchorNode;\n    const focusDOMNode = domSelection.focusNode;\n    const anchorOffset = domSelection.anchorOffset;\n    const focusOffset = domSelection.focusOffset;\n    const activeElement = document.activeElement; // TODO: make this not hard-coded, and add another config option\n    // that makes this configurable.\n    if (tags.has(\"collaboration\") && activeElement !== rootElement || activeElement !== null && $03df355ea183d08a$var$isSelectionCapturedInDecoratorInput(activeElement)) return;\n    if (!$03df355ea183d08a$var$$isRangeSelection(nextSelection)) {\n        // We don't remove selection if the prevSelection is null because\n        // of editor.setRootElement(). If this occurs on init when the\n        // editor is already focused, then this can cause the editor to\n        // lose focus.\n        if (prevSelection !== null && $03df355ea183d08a$var$isSelectionWithinEditor(editor, anchorDOMNode, focusDOMNode)) domSelection.removeAllRanges();\n        return;\n    }\n    const anchor = nextSelection.anchor;\n    const focus = nextSelection.focus;\n    const anchorKey = anchor.key;\n    const focusKey = focus.key;\n    const anchorDOM = $03df355ea183d08a$var$getElementByKeyOrThrow(editor, anchorKey);\n    const focusDOM = $03df355ea183d08a$var$getElementByKeyOrThrow(editor, focusKey);\n    const nextAnchorOffset = anchor.offset;\n    const nextFocusOffset = focus.offset;\n    const nextFormat = nextSelection.format;\n    const nextStyle = nextSelection.style;\n    const isCollapsed = nextSelection.isCollapsed();\n    let nextAnchorNode = anchorDOM;\n    let nextFocusNode = focusDOM;\n    let anchorFormatOrStyleChanged = false;\n    if (anchor.type === \"text\") {\n        nextAnchorNode = $03df355ea183d08a$var$getDOMTextNode(anchorDOM);\n        const anchorNode = anchor.getNode();\n        anchorFormatOrStyleChanged = anchorNode.getFormat() !== nextFormat || anchorNode.getStyle() !== nextStyle;\n    } else if ($03df355ea183d08a$var$$isRangeSelection(prevSelection) && prevSelection.anchor.type === \"text\") anchorFormatOrStyleChanged = true;\n    if (focus.type === \"text\") nextFocusNode = $03df355ea183d08a$var$getDOMTextNode(focusDOM);\n     // If we can't get an underlying text node for selection, then\n    // we should avoid setting selection to something incorrect.\n    if (nextAnchorNode === null || nextFocusNode === null) return;\n    if (isCollapsed && (prevSelection === null || anchorFormatOrStyleChanged || $03df355ea183d08a$var$$isRangeSelection(prevSelection) && (prevSelection.format !== nextFormat || prevSelection.style !== nextStyle))) $03df355ea183d08a$var$markCollapsedSelectionFormat(nextFormat, nextStyle, nextAnchorOffset, anchorKey, performance.now());\n     // Diff against the native DOM selection to ensure we don't do\n    // an unnecessary selection update. We also skip this check if\n    // we're moving selection to within an element, as this can\n    // sometimes be problematic around scrolling.\n    if (anchorOffset === nextAnchorOffset && focusOffset === nextFocusOffset && anchorDOMNode === nextAnchorNode && focusDOMNode === nextFocusNode && // Badly interpreted range selection when collapsed - #1482\n    !(domSelection.type === \"Range\" && isCollapsed)) {\n        // If the root element does not have focus, ensure it has focus\n        if (activeElement === null || !rootElement.contains(activeElement)) rootElement.focus({\n            preventScroll: true\n        });\n        if (anchor.type !== \"element\") return;\n    } // Apply the updated selection to the DOM. Note: this will trigger\n    // a \"selectionchange\" event, although it will be asynchronous.\n    try {\n        domSelection.setBaseAndExtent(nextAnchorNode, nextAnchorOffset, nextFocusNode, nextFocusOffset);\n    } catch (error) {\n    // occur with FF and there's no good reason as to why it\n    // should happen.\n    }\n    if (!tags.has(\"skip-scroll-into-view\") && nextSelection.isCollapsed() && rootElement !== null && rootElement === document.activeElement) {\n        const selectionTarget = nextSelection instanceof $03df355ea183d08a$var$RangeSelection && nextSelection.anchor.type === \"element\" ? nextAnchorNode.childNodes[nextAnchorOffset] || null : domSelection.rangeCount > 0 ? domSelection.getRangeAt(0) : null;\n        if (selectionTarget !== null) {\n            // @ts-ignore Text nodes do have getBoundingClientRect\n            const selectionRect = selectionTarget.getBoundingClientRect();\n            $03df355ea183d08a$var$scrollIntoViewIfNeeded(editor, selectionRect, rootElement);\n        }\n    }\n    $03df355ea183d08a$var$markSelectionChangeFromDOMUpdate();\n}\nfunction $03df355ea183d08a$var$$insertNodes(nodes, selectStart) {\n    let selection = $03df355ea183d08a$var$$getSelection();\n    if (selection === null) selection = $03df355ea183d08a$var$$getRoot().selectEnd();\n    return selection.insertNodes(nodes, selectStart);\n}\nfunction $03df355ea183d08a$var$$getTextContent() {\n    const selection = $03df355ea183d08a$var$$getSelection();\n    if (selection === null) return \"\";\n    return selection.getTextContent();\n}\nfunction $03df355ea183d08a$var$computeGridMap(grid, cellA, cellB) {\n    const tableMap = [];\n    let cellAValue = null;\n    let cellBValue = null;\n    function write(startRow, startColumn, cell) {\n        const value = {\n            cell: cell,\n            startColumn: startColumn,\n            startRow: startRow\n        };\n        const rowSpan = cell.__rowSpan;\n        const colSpan = cell.__colSpan;\n        for(let i = 0; i < rowSpan; i++){\n            if (tableMap[startRow + i] === undefined) tableMap[startRow + i] = [];\n            for(let j = 0; j < colSpan; j++)tableMap[startRow + i][startColumn + j] = value;\n        }\n        if (cellA.is(cell)) cellAValue = value;\n        if (cellB.is(cell)) cellBValue = value;\n    }\n    function isEmpty(row, column) {\n        return tableMap[row] === undefined || tableMap[row][column] === undefined;\n    }\n    const gridChildren = grid.getChildren();\n    for(let i = 0; i < gridChildren.length; i++){\n        const row = gridChildren[i];\n        if (!$03df355ea183d08a$var$DEPRECATED_$isGridRowNode(row)) throw Error(`Expected GridNode children to be GridRowNode`);\n        const rowChildren = row.getChildren();\n        let j = 0;\n        for (const cell of rowChildren){\n            if (!$03df355ea183d08a$var$DEPRECATED_$isGridCellNode(cell)) throw Error(`Expected GridRowNode children to be GridCellNode`);\n            while(!isEmpty(i, j))j++;\n            write(i, j, cell);\n            j += cell.__colSpan;\n        }\n    }\n    if (!(cellAValue !== null)) throw Error(`Anchor not found in Grid`);\n    if (!(cellBValue !== null)) throw Error(`Focus not found in Grid`);\n    return [\n        tableMap,\n        cellAValue,\n        cellBValue\n    ];\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ let $03df355ea183d08a$var$activeEditorState = null;\nlet $03df355ea183d08a$var$activeEditor = null;\nlet $03df355ea183d08a$var$isReadOnlyMode = false;\nlet $03df355ea183d08a$var$isAttemptingToRecoverFromReconcilerError = false;\nlet $03df355ea183d08a$var$infiniteTransformCount = 0;\nconst $03df355ea183d08a$var$observerOptions = {\n    characterData: true,\n    childList: true,\n    subtree: true\n};\nfunction $03df355ea183d08a$var$isCurrentlyReadOnlyMode() {\n    return $03df355ea183d08a$var$isReadOnlyMode || $03df355ea183d08a$var$activeEditorState !== null && $03df355ea183d08a$var$activeEditorState._readOnly;\n}\nfunction $03df355ea183d08a$var$errorOnReadOnly() {\n    if ($03df355ea183d08a$var$isReadOnlyMode) throw Error(`Cannot use method in read-only mode.`);\n}\nfunction $03df355ea183d08a$var$errorOnInfiniteTransforms() {\n    if ($03df355ea183d08a$var$infiniteTransformCount > 99) throw Error(`One or more transforms are endlessly triggering additional transforms. May have encountered infinite recursion caused by transforms that have their preconditions too lose and/or conflict with each other.`);\n}\nfunction $03df355ea183d08a$var$getActiveEditorState() {\n    if ($03df355ea183d08a$var$activeEditorState === null) throw Error(`Unable to find an active editor state. State helpers or node methods can only be used synchronously during the callback of editor.update() or editorState.read().`);\n    return $03df355ea183d08a$var$activeEditorState;\n}\nfunction $03df355ea183d08a$var$getActiveEditor() {\n    if ($03df355ea183d08a$var$activeEditor === null) throw Error(`Unable to find an active editor. This method can only be used synchronously during the callback of editor.update().`);\n    return $03df355ea183d08a$var$activeEditor;\n}\nfunction $03df355ea183d08a$var$internalGetActiveEditor() {\n    return $03df355ea183d08a$var$activeEditor;\n}\nfunction $03df355ea183d08a$var$$applyTransforms(editor, node, transformsCache) {\n    const type = node.__type;\n    const registeredNode = $03df355ea183d08a$var$getRegisteredNodeOrThrow(editor, type);\n    let transformsArr = transformsCache.get(type);\n    if (transformsArr === undefined) {\n        transformsArr = Array.from(registeredNode.transforms);\n        transformsCache.set(type, transformsArr);\n    }\n    const transformsArrLength = transformsArr.length;\n    for(let i = 0; i < transformsArrLength; i++){\n        transformsArr[i](node);\n        if (!node.isAttached()) break;\n    }\n}\nfunction $03df355ea183d08a$var$$isNodeValidForTransform(node, compositionKey) {\n    return node !== undefined && // We don't want to transform nodes being composed\n    node.__key !== compositionKey && node.isAttached();\n}\nfunction $03df355ea183d08a$var$$normalizeAllDirtyTextNodes(editorState, editor) {\n    const dirtyLeaves = editor._dirtyLeaves;\n    const nodeMap = editorState._nodeMap;\n    for (const nodeKey of dirtyLeaves){\n        const node = nodeMap.get(nodeKey);\n        if ($03df355ea183d08a$var$$isTextNode(node) && node.isAttached() && node.isSimpleText() && !node.isUnmergeable()) $03df355ea183d08a$var$$normalizeTextNode(node);\n    }\n}\n/**\n * Transform heuristic:\n * 1. We transform leaves first. If transforms generate additional dirty nodes we repeat step 1.\n * The reasoning behind this is that marking a leaf as dirty marks all its parent elements as dirty too.\n * 2. We transform elements. If element transforms generate additional dirty nodes we repeat step 1.\n * If element transforms only generate additional dirty elements we only repeat step 2.\n *\n * Note that to keep track of newly dirty nodes and subtrees we leverage the editor._dirtyNodes and\n * editor._subtrees which we reset in every loop.\n */ function $03df355ea183d08a$var$$applyAllTransforms(editorState, editor) {\n    const dirtyLeaves = editor._dirtyLeaves;\n    const dirtyElements = editor._dirtyElements;\n    const nodeMap = editorState._nodeMap;\n    const compositionKey = $03df355ea183d08a$var$$getCompositionKey();\n    const transformsCache = new Map();\n    let untransformedDirtyLeaves = dirtyLeaves;\n    let untransformedDirtyLeavesLength = untransformedDirtyLeaves.size;\n    let untransformedDirtyElements = dirtyElements;\n    let untransformedDirtyElementsLength = untransformedDirtyElements.size;\n    while(untransformedDirtyLeavesLength > 0 || untransformedDirtyElementsLength > 0){\n        if (untransformedDirtyLeavesLength > 0) {\n            // We leverage editor._dirtyLeaves to track the new dirty leaves after the transforms\n            editor._dirtyLeaves = new Set();\n            for (const nodeKey of untransformedDirtyLeaves){\n                const node = nodeMap.get(nodeKey);\n                if ($03df355ea183d08a$var$$isTextNode(node) && node.isAttached() && node.isSimpleText() && !node.isUnmergeable()) $03df355ea183d08a$var$$normalizeTextNode(node);\n                if (node !== undefined && $03df355ea183d08a$var$$isNodeValidForTransform(node, compositionKey)) $03df355ea183d08a$var$$applyTransforms(editor, node, transformsCache);\n                dirtyLeaves.add(nodeKey);\n            }\n            untransformedDirtyLeaves = editor._dirtyLeaves;\n            untransformedDirtyLeavesLength = untransformedDirtyLeaves.size; // We want to prioritize node transforms over element transforms\n            if (untransformedDirtyLeavesLength > 0) {\n                $03df355ea183d08a$var$infiniteTransformCount++;\n                continue;\n            }\n        } // All dirty leaves have been processed. Let's do elements!\n        // We have previously processed dirty leaves, so let's restart the editor leaves Set to track\n        // new ones caused by element transforms\n        editor._dirtyLeaves = new Set();\n        editor._dirtyElements = new Map();\n        for (const currentUntransformedDirtyElement of untransformedDirtyElements){\n            const nodeKey = currentUntransformedDirtyElement[0];\n            const intentionallyMarkedAsDirty = currentUntransformedDirtyElement[1];\n            if (nodeKey !== \"root\" && !intentionallyMarkedAsDirty) continue;\n            const node = nodeMap.get(nodeKey);\n            if (node !== undefined && $03df355ea183d08a$var$$isNodeValidForTransform(node, compositionKey)) $03df355ea183d08a$var$$applyTransforms(editor, node, transformsCache);\n            dirtyElements.set(nodeKey, intentionallyMarkedAsDirty);\n        }\n        untransformedDirtyLeaves = editor._dirtyLeaves;\n        untransformedDirtyLeavesLength = untransformedDirtyLeaves.size;\n        untransformedDirtyElements = editor._dirtyElements;\n        untransformedDirtyElementsLength = untransformedDirtyElements.size;\n        $03df355ea183d08a$var$infiniteTransformCount++;\n    }\n    editor._dirtyLeaves = dirtyLeaves;\n    editor._dirtyElements = dirtyElements;\n}\nfunction $03df355ea183d08a$var$$parseSerializedNode(serializedNode) {\n    const internalSerializedNode = serializedNode;\n    return $03df355ea183d08a$var$$parseSerializedNodeImpl(internalSerializedNode, $03df355ea183d08a$var$getActiveEditor()._nodes);\n}\nfunction $03df355ea183d08a$var$$parseSerializedNodeImpl(serializedNode, registeredNodes) {\n    const type = serializedNode.type;\n    const registeredNode = registeredNodes.get(type);\n    if (registeredNode === undefined) throw Error(`parseEditorState: type \"${type}\" + not found`);\n    const nodeClass = registeredNode.klass;\n    if (serializedNode.type !== nodeClass.getType()) throw Error(`LexicalNode: Node ${nodeClass.name} does not implement .importJSON().`);\n    const node = nodeClass.importJSON(serializedNode);\n    const children = serializedNode.children;\n    if ($03df355ea183d08a$var$$isElementNode(node) && Array.isArray(children)) for(let i = 0; i < children.length; i++){\n        const serializedJSONChildNode = children[i];\n        const childNode = $03df355ea183d08a$var$$parseSerializedNodeImpl(serializedJSONChildNode, registeredNodes);\n        node.append(childNode);\n    }\n    return node;\n}\nfunction $03df355ea183d08a$var$parseEditorState(serializedEditorState, editor, updateFn) {\n    const editorState = $03df355ea183d08a$var$createEmptyEditorState();\n    const previousActiveEditorState = $03df355ea183d08a$var$activeEditorState;\n    const previousReadOnlyMode = $03df355ea183d08a$var$isReadOnlyMode;\n    const previousActiveEditor = $03df355ea183d08a$var$activeEditor;\n    const previousDirtyElements = editor._dirtyElements;\n    const previousDirtyLeaves = editor._dirtyLeaves;\n    const previousCloneNotNeeded = editor._cloneNotNeeded;\n    const previousDirtyType = editor._dirtyType;\n    editor._dirtyElements = new Map();\n    editor._dirtyLeaves = new Set();\n    editor._cloneNotNeeded = new Set();\n    editor._dirtyType = 0;\n    $03df355ea183d08a$var$activeEditorState = editorState;\n    $03df355ea183d08a$var$isReadOnlyMode = false;\n    $03df355ea183d08a$var$activeEditor = editor;\n    try {\n        const registeredNodes = editor._nodes;\n        const serializedNode = serializedEditorState.root;\n        $03df355ea183d08a$var$$parseSerializedNodeImpl(serializedNode, registeredNodes);\n        if (updateFn) updateFn();\n         // Make the editorState immutable\n        editorState._readOnly = true;\n        $03df355ea183d08a$var$handleDEVOnlyPendingUpdateGuarantees(editorState);\n    } finally{\n        editor._dirtyElements = previousDirtyElements;\n        editor._dirtyLeaves = previousDirtyLeaves;\n        editor._cloneNotNeeded = previousCloneNotNeeded;\n        editor._dirtyType = previousDirtyType;\n        $03df355ea183d08a$var$activeEditorState = previousActiveEditorState;\n        $03df355ea183d08a$var$isReadOnlyMode = previousReadOnlyMode;\n        $03df355ea183d08a$var$activeEditor = previousActiveEditor;\n    }\n    return editorState;\n} // This technically isn't an update but given we need\n// exposure to the module's active bindings, we have this\n// function here\nfunction $03df355ea183d08a$var$readEditorState(editorState, callbackFn) {\n    const previousActiveEditorState = $03df355ea183d08a$var$activeEditorState;\n    const previousReadOnlyMode = $03df355ea183d08a$var$isReadOnlyMode;\n    const previousActiveEditor = $03df355ea183d08a$var$activeEditor;\n    $03df355ea183d08a$var$activeEditorState = editorState;\n    $03df355ea183d08a$var$isReadOnlyMode = true;\n    $03df355ea183d08a$var$activeEditor = null;\n    try {\n        return callbackFn();\n    } finally{\n        $03df355ea183d08a$var$activeEditorState = previousActiveEditorState;\n        $03df355ea183d08a$var$isReadOnlyMode = previousReadOnlyMode;\n        $03df355ea183d08a$var$activeEditor = previousActiveEditor;\n    }\n}\nfunction $03df355ea183d08a$var$handleDEVOnlyPendingUpdateGuarantees(pendingEditorState) {\n    // Given we can't Object.freeze the nodeMap as it's a Map,\n    // we instead replace its set, clear and delete methods.\n    const nodeMap = pendingEditorState._nodeMap;\n    nodeMap.set = ()=>{\n        throw new Error(\"Cannot call set() on a frozen Lexical node map\");\n    };\n    nodeMap.clear = ()=>{\n        throw new Error(\"Cannot call clear() on a frozen Lexical node map\");\n    };\n    nodeMap.delete = ()=>{\n        throw new Error(\"Cannot call delete() on a frozen Lexical node map\");\n    };\n}\nfunction $03df355ea183d08a$var$commitPendingUpdates(editor) {\n    const pendingEditorState = editor._pendingEditorState;\n    const rootElement = editor._rootElement;\n    const shouldSkipDOM = editor._headless || rootElement === null;\n    if (pendingEditorState === null) return;\n     // ======\n    // Reconciliation has started.\n    // ======\n    const currentEditorState = editor._editorState;\n    const currentSelection = currentEditorState._selection;\n    const pendingSelection = pendingEditorState._selection;\n    const needsUpdate = editor._dirtyType !== $03df355ea183d08a$var$NO_DIRTY_NODES;\n    const previousActiveEditorState = $03df355ea183d08a$var$activeEditorState;\n    const previousReadOnlyMode = $03df355ea183d08a$var$isReadOnlyMode;\n    const previousActiveEditor = $03df355ea183d08a$var$activeEditor;\n    const previouslyUpdating = editor._updating;\n    const observer = editor._observer;\n    let mutatedNodes = null;\n    editor._pendingEditorState = null;\n    editor._editorState = pendingEditorState;\n    if (!shouldSkipDOM && needsUpdate && observer !== null) {\n        $03df355ea183d08a$var$activeEditor = editor;\n        $03df355ea183d08a$var$activeEditorState = pendingEditorState;\n        $03df355ea183d08a$var$isReadOnlyMode = false; // We don't want updates to sync block the reconciliation.\n        editor._updating = true;\n        try {\n            const dirtyType = editor._dirtyType;\n            const dirtyElements = editor._dirtyElements;\n            const dirtyLeaves = editor._dirtyLeaves;\n            observer.disconnect();\n            mutatedNodes = $03df355ea183d08a$var$reconcileRoot(currentEditorState, pendingEditorState, editor, dirtyType, dirtyElements, dirtyLeaves);\n        } catch (error) {\n            // Report errors\n            if (error instanceof Error) editor._onError(error);\n             // Reset editor and restore incoming editor state to the DOM\n            if (!$03df355ea183d08a$var$isAttemptingToRecoverFromReconcilerError) {\n                $03df355ea183d08a$var$resetEditor(editor, null, rootElement, pendingEditorState);\n                $03df355ea183d08a$var$initMutationObserver(editor);\n                editor._dirtyType = $03df355ea183d08a$var$FULL_RECONCILE;\n                $03df355ea183d08a$var$isAttemptingToRecoverFromReconcilerError = true;\n                $03df355ea183d08a$var$commitPendingUpdates(editor);\n                $03df355ea183d08a$var$isAttemptingToRecoverFromReconcilerError = false;\n            } else // To avoid a possible situation of infinite loops, lets throw\n            throw error;\n            return;\n        } finally{\n            observer.observe(rootElement, $03df355ea183d08a$var$observerOptions);\n            editor._updating = previouslyUpdating;\n            $03df355ea183d08a$var$activeEditorState = previousActiveEditorState;\n            $03df355ea183d08a$var$isReadOnlyMode = previousReadOnlyMode;\n            $03df355ea183d08a$var$activeEditor = previousActiveEditor;\n        }\n    }\n    if (!pendingEditorState._readOnly) {\n        pendingEditorState._readOnly = true;\n        $03df355ea183d08a$var$handleDEVOnlyPendingUpdateGuarantees(pendingEditorState);\n        if ($03df355ea183d08a$var$$isRangeSelection(pendingSelection)) {\n            Object.freeze(pendingSelection.anchor);\n            Object.freeze(pendingSelection.focus);\n        }\n        Object.freeze(pendingSelection);\n    }\n    const dirtyLeaves = editor._dirtyLeaves;\n    const dirtyElements = editor._dirtyElements;\n    const normalizedNodes = editor._normalizedNodes;\n    const tags = editor._updateTags;\n    const deferred = editor._deferred;\n    if (needsUpdate) {\n        editor._dirtyType = $03df355ea183d08a$var$NO_DIRTY_NODES;\n        editor._cloneNotNeeded.clear();\n        editor._dirtyLeaves = new Set();\n        editor._dirtyElements = new Map();\n        editor._normalizedNodes = new Set();\n        editor._updateTags = new Set();\n    }\n    $03df355ea183d08a$var$$garbageCollectDetachedDecorators(editor, pendingEditorState); // ======\n    // Reconciliation has finished. Now update selection and trigger listeners.\n    // ======\n    const domSelection = shouldSkipDOM ? null : $03df355ea183d08a$var$getDOMSelection(editor._window); // Attempt to update the DOM selection, including focusing of the root element,\n    // and scroll into view if needed.\n    if (editor._editable && // domSelection will be null in headless\n    domSelection !== null && (needsUpdate || pendingSelection === null || pendingSelection.dirty)) {\n        $03df355ea183d08a$var$activeEditor = editor;\n        $03df355ea183d08a$var$activeEditorState = pendingEditorState;\n        try {\n            if (observer !== null) observer.disconnect();\n            if (needsUpdate || pendingSelection === null || pendingSelection.dirty) {\n                const blockCursorElement = editor._blockCursorElement;\n                if (blockCursorElement !== null) $03df355ea183d08a$var$removeDOMBlockCursorElement(blockCursorElement, editor, rootElement);\n                $03df355ea183d08a$var$updateDOMSelection(currentSelection, pendingSelection, editor, domSelection, tags, rootElement);\n            }\n            $03df355ea183d08a$var$updateDOMBlockCursorElement(editor, rootElement, pendingSelection);\n            if (observer !== null) observer.observe(rootElement, $03df355ea183d08a$var$observerOptions);\n        } finally{\n            $03df355ea183d08a$var$activeEditor = previousActiveEditor;\n            $03df355ea183d08a$var$activeEditorState = previousActiveEditorState;\n        }\n    }\n    if (mutatedNodes !== null) $03df355ea183d08a$var$triggerMutationListeners(editor, currentEditorState, pendingEditorState, mutatedNodes, tags, dirtyLeaves);\n    if (!$03df355ea183d08a$var$$isRangeSelection(pendingSelection) && pendingSelection !== null && (currentSelection === null || !currentSelection.is(pendingSelection))) editor.dispatchCommand($03df355ea183d08a$var$SELECTION_CHANGE_COMMAND, undefined);\n    /**\n   * Capture pendingDecorators after garbage collecting detached decorators\n   */ const pendingDecorators = editor._pendingDecorators;\n    if (pendingDecorators !== null) {\n        editor._decorators = pendingDecorators;\n        editor._pendingDecorators = null;\n        $03df355ea183d08a$var$triggerListeners(\"decorator\", editor, true, pendingDecorators);\n    }\n    $03df355ea183d08a$var$triggerTextContentListeners(editor, currentEditorState, pendingEditorState);\n    $03df355ea183d08a$var$triggerListeners(\"update\", editor, true, {\n        dirtyElements: dirtyElements,\n        dirtyLeaves: dirtyLeaves,\n        editorState: pendingEditorState,\n        normalizedNodes: normalizedNodes,\n        prevEditorState: currentEditorState,\n        tags: tags\n    });\n    $03df355ea183d08a$var$triggerDeferredUpdateCallbacks(editor, deferred);\n    $03df355ea183d08a$var$triggerEnqueuedUpdates(editor);\n}\nfunction $03df355ea183d08a$var$triggerTextContentListeners(editor, currentEditorState, pendingEditorState) {\n    const currentTextContent = $03df355ea183d08a$var$getEditorStateTextContent(currentEditorState);\n    const latestTextContent = $03df355ea183d08a$var$getEditorStateTextContent(pendingEditorState);\n    if (currentTextContent !== latestTextContent) $03df355ea183d08a$var$triggerListeners(\"textcontent\", editor, true, latestTextContent);\n}\nfunction $03df355ea183d08a$var$triggerMutationListeners(editor, currentEditorState, pendingEditorState, mutatedNodes, updateTags, dirtyLeaves) {\n    const listeners = Array.from(editor._listeners.mutation);\n    const listenersLength = listeners.length;\n    for(let i = 0; i < listenersLength; i++){\n        const [listener, klass] = listeners[i];\n        const mutatedNodesByType = mutatedNodes.get(klass);\n        if (mutatedNodesByType !== undefined) listener(mutatedNodesByType, {\n            dirtyLeaves: dirtyLeaves,\n            updateTags: updateTags\n        });\n    }\n}\nfunction $03df355ea183d08a$var$triggerListeners(type, editor, isCurrentlyEnqueuingUpdates, ...payload) {\n    const previouslyUpdating = editor._updating;\n    editor._updating = isCurrentlyEnqueuingUpdates;\n    try {\n        const listeners = Array.from(editor._listeners[type]);\n        for(let i = 0; i < listeners.length; i++)// @ts-ignore\n        listeners[i].apply(null, payload);\n    } finally{\n        editor._updating = previouslyUpdating;\n    }\n}\nfunction $03df355ea183d08a$var$triggerCommandListeners(editor, type, payload) {\n    if (editor._updating === false || $03df355ea183d08a$var$activeEditor !== editor) {\n        let returnVal = false;\n        editor.update(()=>{\n            returnVal = $03df355ea183d08a$var$triggerCommandListeners(editor, type, payload);\n        });\n        return returnVal;\n    }\n    const editors = $03df355ea183d08a$var$getEditorsToPropagate(editor);\n    for(let i = 4; i >= 0; i--)for(let e = 0; e < editors.length; e++){\n        const currentEditor = editors[e];\n        const commandListeners = currentEditor._commands;\n        const listenerInPriorityOrder = commandListeners.get(type);\n        if (listenerInPriorityOrder !== undefined) {\n            const listenersSet = listenerInPriorityOrder[i];\n            if (listenersSet !== undefined) {\n                const listeners = Array.from(listenersSet);\n                const listenersLength = listeners.length;\n                for(let j = 0; j < listenersLength; j++){\n                    if (listeners[j](payload, editor) === true) return true;\n                }\n            }\n        }\n    }\n    return false;\n}\nfunction $03df355ea183d08a$var$triggerEnqueuedUpdates(editor) {\n    const queuedUpdates = editor._updates;\n    if (queuedUpdates.length !== 0) {\n        const queuedUpdate = queuedUpdates.shift();\n        if (queuedUpdate) {\n            const [updateFn, options] = queuedUpdate;\n            $03df355ea183d08a$var$beginUpdate(editor, updateFn, options);\n        }\n    }\n}\nfunction $03df355ea183d08a$var$triggerDeferredUpdateCallbacks(editor, deferred) {\n    editor._deferred = [];\n    if (deferred.length !== 0) {\n        const previouslyUpdating = editor._updating;\n        editor._updating = true;\n        try {\n            for(let i = 0; i < deferred.length; i++)deferred[i]();\n        } finally{\n            editor._updating = previouslyUpdating;\n        }\n    }\n}\nfunction $03df355ea183d08a$var$processNestedUpdates(editor, initialSkipTransforms) {\n    const queuedUpdates = editor._updates;\n    let skipTransforms = initialSkipTransforms || false; // Updates might grow as we process them, we so we'll need\n    // to handle each update as we go until the updates array is\n    // empty.\n    while(queuedUpdates.length !== 0){\n        const queuedUpdate = queuedUpdates.shift();\n        if (queuedUpdate) {\n            const [nextUpdateFn, options] = queuedUpdate;\n            let onUpdate;\n            let tag;\n            if (options !== undefined) {\n                onUpdate = options.onUpdate;\n                tag = options.tag;\n                if (options.skipTransforms) skipTransforms = true;\n                if (onUpdate) editor._deferred.push(onUpdate);\n                if (tag) editor._updateTags.add(tag);\n            }\n            nextUpdateFn();\n        }\n    }\n    return skipTransforms;\n}\nfunction $03df355ea183d08a$var$beginUpdate(editor, updateFn, options) {\n    const updateTags = editor._updateTags;\n    let onUpdate;\n    let tag;\n    let skipTransforms = false;\n    let discrete = false;\n    if (options !== undefined) {\n        onUpdate = options.onUpdate;\n        tag = options.tag;\n        if (tag != null) updateTags.add(tag);\n        skipTransforms = options.skipTransforms || false;\n        discrete = options.discrete || false;\n    }\n    if (onUpdate) editor._deferred.push(onUpdate);\n    const currentEditorState = editor._editorState;\n    let pendingEditorState = editor._pendingEditorState;\n    let editorStateWasCloned = false;\n    if (pendingEditorState === null || pendingEditorState._readOnly) {\n        pendingEditorState = editor._pendingEditorState = $03df355ea183d08a$var$cloneEditorState(pendingEditorState || currentEditorState);\n        editorStateWasCloned = true;\n    }\n    pendingEditorState._flushSync = discrete;\n    const previousActiveEditorState = $03df355ea183d08a$var$activeEditorState;\n    const previousReadOnlyMode = $03df355ea183d08a$var$isReadOnlyMode;\n    const previousActiveEditor = $03df355ea183d08a$var$activeEditor;\n    const previouslyUpdating = editor._updating;\n    $03df355ea183d08a$var$activeEditorState = pendingEditorState;\n    $03df355ea183d08a$var$isReadOnlyMode = false;\n    editor._updating = true;\n    $03df355ea183d08a$var$activeEditor = editor;\n    try {\n        if (editorStateWasCloned) {\n            if (editor._headless) {\n                if (currentEditorState._selection != null) pendingEditorState._selection = currentEditorState._selection.clone();\n            } else pendingEditorState._selection = $03df355ea183d08a$var$internalCreateSelection(editor);\n        }\n        const startingCompositionKey = editor._compositionKey;\n        updateFn();\n        skipTransforms = $03df355ea183d08a$var$processNestedUpdates(editor, skipTransforms);\n        $03df355ea183d08a$var$applySelectionTransforms(pendingEditorState, editor);\n        if (editor._dirtyType !== $03df355ea183d08a$var$NO_DIRTY_NODES) {\n            if (skipTransforms) $03df355ea183d08a$var$$normalizeAllDirtyTextNodes(pendingEditorState, editor);\n            else $03df355ea183d08a$var$$applyAllTransforms(pendingEditorState, editor);\n            $03df355ea183d08a$var$processNestedUpdates(editor);\n            $03df355ea183d08a$var$$garbageCollectDetachedNodes(currentEditorState, pendingEditorState, editor._dirtyLeaves, editor._dirtyElements);\n        }\n        const endingCompositionKey = editor._compositionKey;\n        if (startingCompositionKey !== endingCompositionKey) pendingEditorState._flushSync = true;\n        const pendingSelection = pendingEditorState._selection;\n        if ($03df355ea183d08a$var$$isRangeSelection(pendingSelection)) {\n            const pendingNodeMap = pendingEditorState._nodeMap;\n            const anchorKey = pendingSelection.anchor.key;\n            const focusKey = pendingSelection.focus.key;\n            if (pendingNodeMap.get(anchorKey) === undefined || pendingNodeMap.get(focusKey) === undefined) throw Error(`updateEditor: selection has been lost because the previously selected nodes have been removed and selection wasn't moved to another node. Ensure selection changes after removing/replacing a selected node.`);\n        } else if ($03df355ea183d08a$var$$isNodeSelection(pendingSelection)) // TODO: we should also validate node selection?\n        {\n            if (pendingSelection._nodes.size === 0) pendingEditorState._selection = null;\n        }\n    } catch (error) {\n        // Report errors\n        if (error instanceof Error) editor._onError(error);\n         // Restore existing editor state to the DOM\n        editor._pendingEditorState = currentEditorState;\n        editor._dirtyType = $03df355ea183d08a$var$FULL_RECONCILE;\n        editor._cloneNotNeeded.clear();\n        editor._dirtyLeaves = new Set();\n        editor._dirtyElements.clear();\n        $03df355ea183d08a$var$commitPendingUpdates(editor);\n        return;\n    } finally{\n        $03df355ea183d08a$var$activeEditorState = previousActiveEditorState;\n        $03df355ea183d08a$var$isReadOnlyMode = previousReadOnlyMode;\n        $03df355ea183d08a$var$activeEditor = previousActiveEditor;\n        editor._updating = previouslyUpdating;\n        $03df355ea183d08a$var$infiniteTransformCount = 0;\n    }\n    const shouldUpdate = editor._dirtyType !== $03df355ea183d08a$var$NO_DIRTY_NODES || $03df355ea183d08a$var$editorStateHasDirtySelection(pendingEditorState, editor);\n    if (shouldUpdate) {\n        if (pendingEditorState._flushSync) {\n            pendingEditorState._flushSync = false;\n            $03df355ea183d08a$var$commitPendingUpdates(editor);\n        } else if (editorStateWasCloned) $03df355ea183d08a$var$scheduleMicroTask(()=>{\n            $03df355ea183d08a$var$commitPendingUpdates(editor);\n        });\n    } else {\n        pendingEditorState._flushSync = false;\n        if (editorStateWasCloned) {\n            updateTags.clear();\n            editor._deferred = [];\n            editor._pendingEditorState = null;\n        }\n    }\n}\nfunction $03df355ea183d08a$var$updateEditor(editor, updateFn, options) {\n    if (editor._updating) editor._updates.push([\n        updateFn,\n        options\n    ]);\n    else $03df355ea183d08a$var$beginUpdate(editor, updateFn, options);\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ function $03df355ea183d08a$var$removeNode(nodeToRemove, restoreSelection, preserveEmptyParent) {\n    $03df355ea183d08a$var$errorOnReadOnly();\n    const key = nodeToRemove.__key;\n    const parent = nodeToRemove.getParent();\n    if (parent === null) return;\n    const selection = $03df355ea183d08a$var$$maybeMoveChildrenSelectionToParent(nodeToRemove);\n    let selectionMoved = false;\n    if ($03df355ea183d08a$var$$isRangeSelection(selection) && restoreSelection) {\n        const anchor = selection.anchor;\n        const focus = selection.focus;\n        if (anchor.key === key) {\n            $03df355ea183d08a$var$moveSelectionPointToSibling(anchor, nodeToRemove, parent, nodeToRemove.getPreviousSibling(), nodeToRemove.getNextSibling());\n            selectionMoved = true;\n        }\n        if (focus.key === key) {\n            $03df355ea183d08a$var$moveSelectionPointToSibling(focus, nodeToRemove, parent, nodeToRemove.getPreviousSibling(), nodeToRemove.getNextSibling());\n            selectionMoved = true;\n        }\n    }\n    if ($03df355ea183d08a$var$$isRangeSelection(selection) && restoreSelection && !selectionMoved) {\n        // Doing this is O(n) so lets avoid it unless we need to do it\n        const index = nodeToRemove.getIndexWithinParent();\n        $03df355ea183d08a$var$removeFromParent(nodeToRemove);\n        $03df355ea183d08a$var$$updateElementSelectionOnCreateDeleteNode(selection, parent, index, -1);\n    } else $03df355ea183d08a$var$removeFromParent(nodeToRemove);\n    if (!preserveEmptyParent && !$03df355ea183d08a$var$$isRootOrShadowRoot(parent) && !parent.canBeEmpty() && parent.isEmpty()) $03df355ea183d08a$var$removeNode(parent, restoreSelection);\n    if (restoreSelection && $03df355ea183d08a$var$$isRootNode(parent) && parent.isEmpty()) parent.selectEnd();\n}\nclass $03df355ea183d08a$var$LexicalNode {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    // Flow doesn't support abstract classes unfortunately, so we can't _force_\n    // subclasses of Node to implement statics. All subclasses of Node should have\n    // a static getType and clone method though. We define getType and clone here so we can call it\n    // on any  Node, and we throw this error by default since the subclass should provide\n    // their own implementation.\n    /**\n   * Returns the string type of this node. Every node must\n   * implement this and it MUST BE UNIQUE amongst nodes registered\n   * on the editor.\n   *\n   */ static getType() {\n        throw Error(`LexicalNode: Node ${this.name} does not implement .getType().`);\n    }\n    /**\n   * Clones this node, creating a new node with a different key\n   * and adding it to the EditorState (but not attaching it anywhere!). All nodes must\n   * implement this method.\n   *\n   */ static clone(_data) {\n        throw Error(`LexicalNode: Node ${this.name} does not implement .clone().`);\n    }\n    /**\n   * Returns the string type of this node.\n   */ getType() {\n        return this.__type;\n    }\n    /**\n   * Returns true if there is a path between this node and the RootNode, false otherwise.\n   * This is a way of determining if the node is \"attached\" EditorState. Unattached nodes\n   * won't be reconciled and will ultimatelt be cleaned up by the Lexical GC.\n   */ isAttached() {\n        let nodeKey = this.__key;\n        while(nodeKey !== null){\n            if (nodeKey === \"root\") return true;\n            const node = $03df355ea183d08a$var$$getNodeByKey(nodeKey);\n            if (node === null) break;\n            nodeKey = node.__parent;\n        }\n        return false;\n    }\n    /**\n   * Returns true if this node is contained within the provided Selection., false otherwise.\n   * Relies on the algorithms implemented in {@link BaseSelection.getNodes} to determine\n   * what's included.\n   *\n   * @param selection - The selection that we want to determine if the node is in.\n   */ isSelected(selection) {\n        const targetSelection = selection || $03df355ea183d08a$var$$getSelection();\n        if (targetSelection == null) return false;\n        const isSelected = targetSelection.getNodes().some((n)=>n.__key === this.__key);\n        if ($03df355ea183d08a$var$$isTextNode(this)) return isSelected;\n         // For inline images inside of element nodes.\n        // Without this change the image will be selected if the cursor is before or after it.\n        if ($03df355ea183d08a$var$$isRangeSelection(targetSelection) && targetSelection.anchor.type === \"element\" && targetSelection.focus.type === \"element\" && targetSelection.anchor.key === targetSelection.focus.key && targetSelection.anchor.offset === targetSelection.focus.offset) return false;\n        return isSelected;\n    }\n    /**\n   * Returns this nodes key.\n   */ getKey() {\n        // Key is stable between copies\n        return this.__key;\n    }\n    /**\n   * Returns the zero-based index of this node within the parent.\n   */ getIndexWithinParent() {\n        const parent = this.getParent();\n        if (parent === null) return -1;\n        let node = parent.getFirstChild();\n        let index = 0;\n        while(node !== null){\n            if (this.is(node)) return index;\n            index++;\n            node = node.getNextSibling();\n        }\n        return -1;\n    }\n    /**\n   * Returns the parent of this node, or null if none is found.\n   */ getParent() {\n        const parent = this.getLatest().__parent;\n        if (parent === null) return null;\n        return $03df355ea183d08a$var$$getNodeByKey(parent);\n    }\n    /**\n   * Returns the parent of this node, or throws if none is found.\n   */ getParentOrThrow() {\n        const parent = this.getParent();\n        if (parent === null) throw Error(`Expected node ${this.__key} to have a parent.`);\n        return parent;\n    }\n    /**\n   * Returns the highest (in the EditorState tree)\n   * non-root ancestor of this node, or null if none is found. See {@link lexical!$isRootOrShadowRoot}\n   * for more information on which Elements comprise \"roots\".\n   */ getTopLevelElement() {\n        let node = this;\n        while(node !== null){\n            const parent = node.getParent();\n            if ($03df355ea183d08a$var$$isRootOrShadowRoot(parent)) return node;\n            node = parent;\n        }\n        return null;\n    }\n    /**\n   * Returns the highest (in the EditorState tree)\n   * non-root ancestor of this node, or throws if none is found. See {@link lexical!$isRootOrShadowRoot}\n   * for more information on which Elements comprise \"roots\".\n   */ getTopLevelElementOrThrow() {\n        const parent = this.getTopLevelElement();\n        if (parent === null) throw Error(`Expected node ${this.__key} to have a top parent element.`);\n        return parent;\n    }\n    /**\n   * Returns a list of the every ancestor of this node,\n   * all the way up to the RootNode.\n   *\n   */ getParents() {\n        const parents = [];\n        let node = this.getParent();\n        while(node !== null){\n            parents.push(node);\n            node = node.getParent();\n        }\n        return parents;\n    }\n    /**\n   * Returns a list of the keys of every ancestor of this node,\n   * all the way up to the RootNode.\n   *\n   */ getParentKeys() {\n        const parents = [];\n        let node = this.getParent();\n        while(node !== null){\n            parents.push(node.__key);\n            node = node.getParent();\n        }\n        return parents;\n    }\n    /**\n   * Returns the \"previous\" siblings - that is, the node that comes\n   * before this one in the same parent.\n   *\n   */ getPreviousSibling() {\n        const self = this.getLatest();\n        const prevKey = self.__prev;\n        return prevKey === null ? null : $03df355ea183d08a$var$$getNodeByKey(prevKey);\n    }\n    /**\n   * Returns the \"previous\" siblings - that is, the nodes that come between\n   * this one and the first child of it's parent, inclusive.\n   *\n   */ getPreviousSiblings() {\n        const siblings = [];\n        const parent = this.getParent();\n        if (parent === null) return siblings;\n        let node = parent.getFirstChild();\n        while(node !== null){\n            if (node.is(this)) break;\n            siblings.push(node);\n            node = node.getNextSibling();\n        }\n        return siblings;\n    }\n    /**\n   * Returns the \"next\" siblings - that is, the node that comes\n   * after this one in the same parent\n   *\n   */ getNextSibling() {\n        const self = this.getLatest();\n        const nextKey = self.__next;\n        return nextKey === null ? null : $03df355ea183d08a$var$$getNodeByKey(nextKey);\n    }\n    /**\n   * Returns all \"next\" siblings - that is, the nodes that come between this\n   * one and the last child of it's parent, inclusive.\n   *\n   */ getNextSiblings() {\n        const siblings = [];\n        let node = this.getNextSibling();\n        while(node !== null){\n            siblings.push(node);\n            node = node.getNextSibling();\n        }\n        return siblings;\n    }\n    /**\n   * Returns the closest common ancestor of this node and the provided one or null\n   * if one cannot be found.\n   *\n   * @param node - the other node to find the common ancestor of.\n   */ getCommonAncestor(node) {\n        const a = this.getParents();\n        const b = node.getParents();\n        if ($03df355ea183d08a$var$$isElementNode(this)) a.unshift(this);\n        if ($03df355ea183d08a$var$$isElementNode(node)) b.unshift(node);\n        const aLength = a.length;\n        const bLength = b.length;\n        if (aLength === 0 || bLength === 0 || a[aLength - 1] !== b[bLength - 1]) return null;\n        const bSet = new Set(b);\n        for(let i = 0; i < aLength; i++){\n            const ancestor = a[i];\n            if (bSet.has(ancestor)) return ancestor;\n        }\n        return null;\n    }\n    /**\n   * Returns true if the provided node is the exact same one as this node, from Lexical's perspective.\n   * Always use this instead of referential equality.\n   *\n   * @param object - the node to perform the equality comparison on.\n   */ is(object) {\n        if (object == null) return false;\n        return this.__key === object.__key;\n    }\n    /**\n   * Returns true if this node logical precedes the target node in the editor state.\n   *\n   * @param targetNode - the node we're testing to see if it's after this one.\n   */ isBefore(targetNode) {\n        if (this === targetNode) return false;\n        if (targetNode.isParentOf(this)) return true;\n        if (this.isParentOf(targetNode)) return false;\n        const commonAncestor = this.getCommonAncestor(targetNode);\n        let indexA = 0;\n        let indexB = 0;\n        let node = this;\n        while(true){\n            const parent = node.getParentOrThrow();\n            if (parent === commonAncestor) {\n                indexA = node.getIndexWithinParent();\n                break;\n            }\n            node = parent;\n        }\n        node = targetNode;\n        while(true){\n            const parent = node.getParentOrThrow();\n            if (parent === commonAncestor) {\n                indexB = node.getIndexWithinParent();\n                break;\n            }\n            node = parent;\n        }\n        return indexA < indexB;\n    }\n    /**\n   * Returns true if this node is the parent of the target node, false otherwise.\n   *\n   * @param targetNode - the would-be child node.\n   */ isParentOf(targetNode) {\n        const key = this.__key;\n        if (key === targetNode.__key) return false;\n        let node = targetNode;\n        while(node !== null){\n            if (node.__key === key) return true;\n            node = node.getParent();\n        }\n        return false;\n    }\n    /**\n   * Returns a list of nodes that are between this node and\n   * the target node in the EditorState.\n   *\n   * @param targetNode - the node that marks the other end of the range of nodes to be returned.\n   */ getNodesBetween(targetNode) {\n        const isBefore = this.isBefore(targetNode);\n        const nodes = [];\n        const visited = new Set();\n        let node = this;\n        while(true){\n            const key = node.__key;\n            if (!visited.has(key)) {\n                visited.add(key);\n                nodes.push(node);\n            }\n            if (node === targetNode) break;\n            const child = $03df355ea183d08a$var$$isElementNode(node) ? isBefore ? node.getFirstChild() : node.getLastChild() : null;\n            if (child !== null) {\n                node = child;\n                continue;\n            }\n            const nextSibling = isBefore ? node.getNextSibling() : node.getPreviousSibling();\n            if (nextSibling !== null) {\n                node = nextSibling;\n                continue;\n            }\n            const parent = node.getParentOrThrow();\n            if (!visited.has(parent.__key)) nodes.push(parent);\n            if (parent === targetNode) break;\n            let parentSibling = null;\n            let ancestor = parent;\n            do {\n                if (ancestor === null) throw Error(`getNodesBetween: ancestor is null`);\n                parentSibling = isBefore ? ancestor.getNextSibling() : ancestor.getPreviousSibling();\n                ancestor = ancestor.getParent();\n                if (ancestor !== null) {\n                    if (parentSibling === null && !visited.has(ancestor.__key)) nodes.push(ancestor);\n                }\n            }while (parentSibling === null);\n            node = parentSibling;\n        }\n        if (!isBefore) nodes.reverse();\n        return nodes;\n    }\n    /**\n   * Returns true if this node has been marked dirty during this update cycle.\n   *\n   */ isDirty() {\n        const editor = $03df355ea183d08a$var$getActiveEditor();\n        const dirtyLeaves = editor._dirtyLeaves;\n        return dirtyLeaves !== null && dirtyLeaves.has(this.__key);\n    }\n    /**\n   * Returns the latest version of the node from the active EditorState.\n   * This is used to avoid getting values from stale node references.\n   *\n   */ getLatest() {\n        const latest = $03df355ea183d08a$var$$getNodeByKey(this.__key);\n        if (latest === null) throw Error(`Lexical node does not exist in active editor state. Avoid using the same node references between nested closures from editorState.read/editor.update.`);\n        return latest;\n    }\n    /**\n   * Returns a mutable version of the node. Will throw an error if\n   * called outside of a Lexical Editor {@link LexicalEditor.update} callback.\n   *\n   */ getWritable() {\n        $03df355ea183d08a$var$errorOnReadOnly();\n        const editorState = $03df355ea183d08a$var$getActiveEditorState();\n        const editor = $03df355ea183d08a$var$getActiveEditor();\n        const nodeMap = editorState._nodeMap;\n        const key = this.__key; // Ensure we get the latest node from pending state\n        const latestNode = this.getLatest();\n        const parent = latestNode.__parent;\n        const cloneNotNeeded = editor._cloneNotNeeded;\n        const selection = $03df355ea183d08a$var$$getSelection();\n        if (selection !== null) selection._cachedNodes = null;\n        if (cloneNotNeeded.has(key)) {\n            // Transforms clear the dirty node set on each iteration to keep track on newly dirty nodes\n            $03df355ea183d08a$var$internalMarkNodeAsDirty(latestNode);\n            return latestNode;\n        }\n        const constructor = latestNode.constructor; // @ts-expect-error\n        const mutableNode = constructor.clone(latestNode);\n        mutableNode.__parent = parent;\n        mutableNode.__next = latestNode.__next;\n        mutableNode.__prev = latestNode.__prev;\n        if ($03df355ea183d08a$var$$isElementNode(latestNode) && $03df355ea183d08a$var$$isElementNode(mutableNode)) {\n            mutableNode.__first = latestNode.__first;\n            mutableNode.__last = latestNode.__last;\n            mutableNode.__size = latestNode.__size;\n            mutableNode.__indent = latestNode.__indent;\n            mutableNode.__format = latestNode.__format;\n            mutableNode.__dir = latestNode.__dir;\n        } else if ($03df355ea183d08a$var$$isTextNode(latestNode) && $03df355ea183d08a$var$$isTextNode(mutableNode)) {\n            mutableNode.__format = latestNode.__format;\n            mutableNode.__style = latestNode.__style;\n            mutableNode.__mode = latestNode.__mode;\n            mutableNode.__detail = latestNode.__detail;\n        }\n        cloneNotNeeded.add(key);\n        mutableNode.__key = key;\n        $03df355ea183d08a$var$internalMarkNodeAsDirty(mutableNode); // Update reference in node map\n        nodeMap.set(key, mutableNode);\n        return mutableNode;\n    }\n    /**\n   * Returns the text content of the node. Override this for\n   * custom nodes that should have a representation in plain text\n   * format (for copy + paste, for example)\n   *\n   */ getTextContent() {\n        return \"\";\n    }\n    /**\n   * Returns the length of the string produced by calling getTextContent on this node.\n   *\n   */ getTextContentSize() {\n        return this.getTextContent().length;\n    }\n    /**\n   * Called during the reconciliation process to determine which nodes\n   * to insert into the DOM for this Lexical Node.\n   *\n   * This method must return exactly one HTMLElement. Nested elements are not supported.\n   *\n   * Do not attempt to update the Lexical EditorState during this phase of the update lifecyle.\n   *\n   * @param _config - allows access to things like the EditorTheme (to apply classes) during reconciliation.\n   * @param _editor - allows access to the editor for context during reconciliation.\n   *\n   * */ createDOM(_config, _editor) {\n        throw Error(`createDOM: base method not extended`);\n    }\n    /**\n   * Called when a node changes and should update the DOM\n   * in whatever way is necessary to make it align with any changes that might\n   * have happened during the update.\n   *\n   * Returning \"true\" here will cause lexical to unmount and recreate the DOM node\n   * (by calling createDOM). You would need to do this if the element tag changes,\n   * for instance.\n   *\n   * */ updateDOM(_prevNode, _dom, _config) {\n        throw Error(`updateDOM: base method not extended`);\n    }\n    /**\n   * Controls how the this node is serialized to HTML. This is important for\n   * copy and paste between Lexical and non-Lexical editors, or Lexical editors with different namespaces,\n   * in which case the primary transfer format is HTML. It's also important if you're serializing\n   * to HTML for any other reason via {@link @lexical/html!$generateHtmlFromNodes}. You could\n   * also use this method to build your own HTML renderer.\n   *\n   * */ exportDOM(editor) {\n        const element = this.createDOM(editor._config, editor);\n        return {\n            element: element\n        };\n    }\n    /**\n   * Controls how the this node is serialized to JSON. This is important for\n   * copy and paste between Lexical editors sharing the same namespace. It's also important\n   * if you're serializing to JSON for persistent storage somewhere.\n   * See [Serialization & Deserialization](https://lexical.dev/docs/concepts/serialization#lexical---html).\n   *\n   * */ exportJSON() {\n        throw Error(`exportJSON: base method not extended`);\n    }\n    /**\n   * Controls how the this node is deserialized from JSON. This is usually boilerplate,\n   * but provides an abstraction betweent he node implementation and serialized interfaec that can\n   * be important if you ever make breaking changes to a node schema (by adding or removing properties).\n   * See [Serialization & Deserialization](https://lexical.dev/docs/concepts/serialization#lexical---html).\n   *\n   * */ static importJSON(_serializedNode) {\n        throw Error(`LexicalNode: Node ${this.name} does not implement .importJSON().`);\n    }\n    /**\n   * @experimental\n   *\n   * Registers the returned function as a transform on the node during\n   * Editor initialization. Most such use cases should be addressed via\n   * the {@link LexicalEditor.registerNodeTransform} API.\n   *\n   * Experimental - use at your own risk.\n   */ static transform() {\n        return null;\n    }\n    /**\n   * Removes this LexicalNode from the EditorState. If the node isn't re-inserted\n   * somewhere, the Lexical garbage collector will eventually clean it up.\n   *\n   * @param preserveEmptyParent - If falsy, the node's parent will be removed if\n   * it's empty after the removal operation. This is the default behavior, subject to\n   * other node heuristics such as {@link ElementNode#canBeEmpty}\n   * */ remove(preserveEmptyParent) {\n        $03df355ea183d08a$var$removeNode(this, true, preserveEmptyParent);\n    }\n    /**\n   * Replaces this LexicalNode with the provided node, optionally transferring the children\n   * of the replaced node to the replacing node.\n   *\n   * @param replaceWith - The node to replace this one with.\n   * @param includeChildren - Whether or not to transfer the children of this node to the replacing node.\n   * */ replace(replaceWith, includeChildren) {\n        $03df355ea183d08a$var$errorOnReadOnly();\n        let selection = $03df355ea183d08a$var$$getSelection();\n        if (selection !== null) selection = selection.clone();\n        $03df355ea183d08a$var$errorOnInsertTextNodeOnRoot(this, replaceWith);\n        const self = this.getLatest();\n        const toReplaceKey = this.__key;\n        const key = replaceWith.__key;\n        const writableReplaceWith = replaceWith.getWritable();\n        const writableParent = this.getParentOrThrow().getWritable();\n        const size = writableParent.__size;\n        $03df355ea183d08a$var$removeFromParent(writableReplaceWith);\n        const prevSibling = self.getPreviousSibling();\n        const nextSibling = self.getNextSibling();\n        const prevKey = self.__prev;\n        const nextKey = self.__next;\n        const parentKey = self.__parent;\n        $03df355ea183d08a$var$removeNode(self, false, true);\n        if (prevSibling === null) writableParent.__first = key;\n        else {\n            const writablePrevSibling = prevSibling.getWritable();\n            writablePrevSibling.__next = key;\n        }\n        writableReplaceWith.__prev = prevKey;\n        if (nextSibling === null) writableParent.__last = key;\n        else {\n            const writableNextSibling = nextSibling.getWritable();\n            writableNextSibling.__prev = key;\n        }\n        writableReplaceWith.__next = nextKey;\n        writableReplaceWith.__parent = parentKey;\n        writableParent.__size = size;\n        if (includeChildren) this.getChildren().forEach((child)=>{\n            writableReplaceWith.append(child);\n        });\n        if ($03df355ea183d08a$var$$isRangeSelection(selection)) {\n            $03df355ea183d08a$var$$setSelection(selection);\n            const anchor = selection.anchor;\n            const focus = selection.focus;\n            if (anchor.key === toReplaceKey) $03df355ea183d08a$var$$moveSelectionPointToEnd(anchor, writableReplaceWith);\n            if (focus.key === toReplaceKey) $03df355ea183d08a$var$$moveSelectionPointToEnd(focus, writableReplaceWith);\n        }\n        if ($03df355ea183d08a$var$$getCompositionKey() === toReplaceKey) $03df355ea183d08a$var$$setCompositionKey(key);\n        return writableReplaceWith;\n    }\n    /**\n   * Inserts a node after this LexicalNode (as the next sibling).\n   *\n   * @param nodeToInsert - The node to insert after this one.\n   * @param restoreSelection - Whether or not to attempt to resolve the\n   * selection to the appropriate place after the operation is complete.\n   * */ insertAfter(nodeToInsert, restoreSelection = true) {\n        $03df355ea183d08a$var$errorOnReadOnly();\n        $03df355ea183d08a$var$errorOnInsertTextNodeOnRoot(this, nodeToInsert);\n        const writableSelf = this.getWritable();\n        const writableNodeToInsert = nodeToInsert.getWritable();\n        const oldParent = writableNodeToInsert.getParent();\n        const selection = $03df355ea183d08a$var$$getSelection();\n        let elementAnchorSelectionOnNode = false;\n        let elementFocusSelectionOnNode = false;\n        if (oldParent !== null) {\n            // TODO: this is O(n), can we improve?\n            const oldIndex = nodeToInsert.getIndexWithinParent();\n            $03df355ea183d08a$var$removeFromParent(writableNodeToInsert);\n            if ($03df355ea183d08a$var$$isRangeSelection(selection)) {\n                const oldParentKey = oldParent.__key;\n                const anchor = selection.anchor;\n                const focus = selection.focus;\n                elementAnchorSelectionOnNode = anchor.type === \"element\" && anchor.key === oldParentKey && anchor.offset === oldIndex + 1;\n                elementFocusSelectionOnNode = focus.type === \"element\" && focus.key === oldParentKey && focus.offset === oldIndex + 1;\n            }\n        }\n        const nextSibling = this.getNextSibling();\n        const writableParent = this.getParentOrThrow().getWritable();\n        const insertKey = writableNodeToInsert.__key;\n        const nextKey = writableSelf.__next;\n        if (nextSibling === null) writableParent.__last = insertKey;\n        else {\n            const writableNextSibling = nextSibling.getWritable();\n            writableNextSibling.__prev = insertKey;\n        }\n        writableParent.__size++;\n        writableSelf.__next = insertKey;\n        writableNodeToInsert.__next = nextKey;\n        writableNodeToInsert.__prev = writableSelf.__key;\n        writableNodeToInsert.__parent = writableSelf.__parent;\n        if (restoreSelection && $03df355ea183d08a$var$$isRangeSelection(selection)) {\n            const index = this.getIndexWithinParent();\n            $03df355ea183d08a$var$$updateElementSelectionOnCreateDeleteNode(selection, writableParent, index + 1);\n            const writableParentKey = writableParent.__key;\n            if (elementAnchorSelectionOnNode) selection.anchor.set(writableParentKey, index + 2, \"element\");\n            if (elementFocusSelectionOnNode) selection.focus.set(writableParentKey, index + 2, \"element\");\n        }\n        return nodeToInsert;\n    }\n    /**\n   * Inserts a node before this LexicalNode (as the previous sibling).\n   *\n   * @param nodeToInsert - The node to insert after this one.\n   * @param restoreSelection - Whether or not to attempt to resolve the\n   * selection to the appropriate place after the operation is complete.\n   * */ insertBefore(nodeToInsert, restoreSelection = true) {\n        $03df355ea183d08a$var$errorOnReadOnly();\n        $03df355ea183d08a$var$errorOnInsertTextNodeOnRoot(this, nodeToInsert);\n        const writableSelf = this.getWritable();\n        const writableNodeToInsert = nodeToInsert.getWritable();\n        const insertKey = writableNodeToInsert.__key;\n        $03df355ea183d08a$var$removeFromParent(writableNodeToInsert);\n        const prevSibling = this.getPreviousSibling();\n        const writableParent = this.getParentOrThrow().getWritable();\n        const prevKey = writableSelf.__prev; // TODO: this is O(n), can we improve?\n        const index = this.getIndexWithinParent();\n        if (prevSibling === null) writableParent.__first = insertKey;\n        else {\n            const writablePrevSibling = prevSibling.getWritable();\n            writablePrevSibling.__next = insertKey;\n        }\n        writableParent.__size++;\n        writableSelf.__prev = insertKey;\n        writableNodeToInsert.__prev = prevKey;\n        writableNodeToInsert.__next = writableSelf.__key;\n        writableNodeToInsert.__parent = writableSelf.__parent;\n        const selection = $03df355ea183d08a$var$$getSelection();\n        if (restoreSelection && $03df355ea183d08a$var$$isRangeSelection(selection)) {\n            const parent = this.getParentOrThrow();\n            $03df355ea183d08a$var$$updateElementSelectionOnCreateDeleteNode(selection, parent, index);\n        }\n        return nodeToInsert;\n    }\n    /**\n   * Whether or not this node has a required parent. Used during copy + paste operations\n   * to normalize nodes that would otherwise be orphaned. For example, ListItemNodes without\n   * a ListNode parent or TextNodes with a ParagraphNode parent.\n   *\n   * */ isParentRequired() {\n        return false;\n    }\n    /**\n   * The creation logic for any required parent. Should be implemented if {@link isParentRequired} returns true.\n   *\n   * */ createParentElementNode() {\n        return $03df355ea183d08a$var$$createParagraphNode();\n    }\n    /**\n   * Moves selection to the previous sibling of this node, at the specified offsets.\n   *\n   * @param anchorOffset - The anchor offset for selection.\n   * @param focusOffset -  The focus offset for selection\n   * */ selectPrevious(anchorOffset, focusOffset) {\n        $03df355ea183d08a$var$errorOnReadOnly();\n        const prevSibling = this.getPreviousSibling();\n        const parent = this.getParentOrThrow();\n        if (prevSibling === null) return parent.select(0, 0);\n        if ($03df355ea183d08a$var$$isElementNode(prevSibling)) return prevSibling.select();\n        else if (!$03df355ea183d08a$var$$isTextNode(prevSibling)) {\n            const index = prevSibling.getIndexWithinParent() + 1;\n            return parent.select(index, index);\n        }\n        return prevSibling.select(anchorOffset, focusOffset);\n    }\n    /**\n   * Moves selection to the next sibling of this node, at the specified offsets.\n   *\n   * @param anchorOffset - The anchor offset for selection.\n   * @param focusOffset -  The focus offset for selection\n   * */ selectNext(anchorOffset, focusOffset) {\n        $03df355ea183d08a$var$errorOnReadOnly();\n        const nextSibling = this.getNextSibling();\n        const parent = this.getParentOrThrow();\n        if (nextSibling === null) return parent.select();\n        if ($03df355ea183d08a$var$$isElementNode(nextSibling)) return nextSibling.select(0, 0);\n        else if (!$03df355ea183d08a$var$$isTextNode(nextSibling)) {\n            const index = nextSibling.getIndexWithinParent();\n            return parent.select(index, index);\n        }\n        return nextSibling.select(anchorOffset, focusOffset);\n    }\n    /**\n   * Marks a node dirty, triggering transforms and\n   * forcing it to be reconciled during the update cycle.\n   *\n   * */ markDirty() {\n        this.getWritable();\n    }\n    constructor(key){\n        // @ts-expect-error\n        this.__type = this.constructor.getType();\n        this.__parent = null;\n        this.__prev = null;\n        this.__next = null;\n        $03df355ea183d08a$var$$setNodeKey(this, key);\n        if (this.__type !== \"root\") {\n            $03df355ea183d08a$var$errorOnReadOnly();\n            $03df355ea183d08a$var$errorOnTypeKlassMismatch(this.__type, this.constructor);\n        }\n    }\n}\nfunction $03df355ea183d08a$var$errorOnTypeKlassMismatch(type, klass) {\n    const registeredNode = $03df355ea183d08a$var$getActiveEditor()._nodes.get(type); // Common error - split in its own invariant\n    if (registeredNode === undefined) throw Error(`Create node: Attempted to create node ${klass.name} that was not configured to be used on the editor.`);\n    const editorKlass = registeredNode.klass;\n    if (editorKlass !== klass) throw Error(`Create node: Type ${type} in node ${klass.name} does not match registered node ${editorKlass.name} with the same type`);\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ /** @noInheritDoc */ class $03df355ea183d08a$var$DecoratorNode extends $03df355ea183d08a$var$LexicalNode {\n    decorate(editor, config) {\n        throw Error(`decorate: base method not extended`);\n    }\n    isIsolated() {\n        return false;\n    }\n    isInline() {\n        return true;\n    }\n    isKeyboardSelectable() {\n        return true;\n    }\n    constructor(key){\n        super(key);\n    }\n}\nfunction $03df355ea183d08a$var$$isDecoratorNode(node) {\n    return node instanceof $03df355ea183d08a$var$DecoratorNode;\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ /** @noInheritDoc */ class $03df355ea183d08a$var$ElementNode extends $03df355ea183d08a$var$LexicalNode {\n    getFormat() {\n        const self = this.getLatest();\n        return self.__format;\n    }\n    getFormatType() {\n        const format = this.getFormat();\n        return $03df355ea183d08a$var$ELEMENT_FORMAT_TO_TYPE[format] || \"\";\n    }\n    getIndent() {\n        const self = this.getLatest();\n        return self.__indent;\n    }\n    getChildren() {\n        const children = [];\n        let child = this.getFirstChild();\n        while(child !== null){\n            children.push(child);\n            child = child.getNextSibling();\n        }\n        return children;\n    }\n    getChildrenKeys() {\n        const children = [];\n        let child = this.getFirstChild();\n        while(child !== null){\n            children.push(child.__key);\n            child = child.getNextSibling();\n        }\n        return children;\n    }\n    getChildrenSize() {\n        const self = this.getLatest();\n        return self.__size;\n    }\n    isEmpty() {\n        return this.getChildrenSize() === 0;\n    }\n    isDirty() {\n        const editor = $03df355ea183d08a$var$getActiveEditor();\n        const dirtyElements = editor._dirtyElements;\n        return dirtyElements !== null && dirtyElements.has(this.__key);\n    }\n    isLastChild() {\n        const self = this.getLatest();\n        const parentLastChild = this.getParentOrThrow().getLastChild();\n        return parentLastChild !== null && parentLastChild.is(self);\n    }\n    getAllTextNodes() {\n        const textNodes = [];\n        let child = this.getFirstChild();\n        while(child !== null){\n            if ($03df355ea183d08a$var$$isTextNode(child)) textNodes.push(child);\n            if ($03df355ea183d08a$var$$isElementNode(child)) {\n                const subChildrenNodes = child.getAllTextNodes();\n                textNodes.push(...subChildrenNodes);\n            }\n            child = child.getNextSibling();\n        }\n        return textNodes;\n    }\n    getFirstDescendant() {\n        let node = this.getFirstChild();\n        while(node !== null){\n            if ($03df355ea183d08a$var$$isElementNode(node)) {\n                const child = node.getFirstChild();\n                if (child !== null) {\n                    node = child;\n                    continue;\n                }\n            }\n            break;\n        }\n        return node;\n    }\n    getLastDescendant() {\n        let node = this.getLastChild();\n        while(node !== null){\n            if ($03df355ea183d08a$var$$isElementNode(node)) {\n                const child = node.getLastChild();\n                if (child !== null) {\n                    node = child;\n                    continue;\n                }\n            }\n            break;\n        }\n        return node;\n    }\n    getDescendantByIndex(index) {\n        const children = this.getChildren();\n        const childrenLength = children.length; // For non-empty element nodes, we resolve its descendant\n        // (either a leaf node or the bottom-most element)\n        if (index >= childrenLength) {\n            const resolvedNode = children[childrenLength - 1];\n            return $03df355ea183d08a$var$$isElementNode(resolvedNode) && resolvedNode.getLastDescendant() || resolvedNode || null;\n        }\n        const resolvedNode = children[index];\n        return $03df355ea183d08a$var$$isElementNode(resolvedNode) && resolvedNode.getFirstDescendant() || resolvedNode || null;\n    }\n    getFirstChild() {\n        const self = this.getLatest();\n        const firstKey = self.__first;\n        return firstKey === null ? null : $03df355ea183d08a$var$$getNodeByKey(firstKey);\n    }\n    getFirstChildOrThrow() {\n        const firstChild = this.getFirstChild();\n        if (firstChild === null) throw Error(`Expected node ${this.__key} to have a first child.`);\n        return firstChild;\n    }\n    getLastChild() {\n        const self = this.getLatest();\n        const lastKey = self.__last;\n        return lastKey === null ? null : $03df355ea183d08a$var$$getNodeByKey(lastKey);\n    }\n    getLastChildOrThrow() {\n        const lastChild = this.getLastChild();\n        if (lastChild === null) throw Error(`Expected node ${this.__key} to have a last child.`);\n        return lastChild;\n    }\n    getChildAtIndex(index) {\n        const size = this.getChildrenSize();\n        let node;\n        let i;\n        if (index < size / 2) {\n            node = this.getFirstChild();\n            i = 0;\n            while(node !== null && i <= index){\n                if (i === index) return node;\n                node = node.getNextSibling();\n                i++;\n            }\n            return null;\n        }\n        node = this.getLastChild();\n        i = size - 1;\n        while(node !== null && i >= index){\n            if (i === index) return node;\n            node = node.getPreviousSibling();\n            i--;\n        }\n        return null;\n    }\n    getTextContent() {\n        let textContent = \"\";\n        const children = this.getChildren();\n        const childrenLength = children.length;\n        for(let i = 0; i < childrenLength; i++){\n            const child = children[i];\n            textContent += child.getTextContent();\n            if ($03df355ea183d08a$var$$isElementNode(child) && i !== childrenLength - 1 && !child.isInline()) textContent += $03df355ea183d08a$var$DOUBLE_LINE_BREAK;\n        }\n        return textContent;\n    }\n    getTextContentSize() {\n        let textContentSize = 0;\n        const children = this.getChildren();\n        const childrenLength = children.length;\n        for(let i = 0; i < childrenLength; i++){\n            const child = children[i];\n            textContentSize += child.getTextContentSize();\n            if ($03df355ea183d08a$var$$isElementNode(child) && i !== childrenLength - 1 && !child.isInline()) textContentSize += $03df355ea183d08a$var$DOUBLE_LINE_BREAK.length;\n        }\n        return textContentSize;\n    }\n    getDirection() {\n        const self = this.getLatest();\n        return self.__dir;\n    }\n    hasFormat(type) {\n        if (type !== \"\") {\n            const formatFlag = $03df355ea183d08a$var$ELEMENT_TYPE_TO_FORMAT[type];\n            return (this.getFormat() & formatFlag) !== 0;\n        }\n        return false;\n    }\n    select(_anchorOffset, _focusOffset) {\n        $03df355ea183d08a$var$errorOnReadOnly();\n        const selection = $03df355ea183d08a$var$$getSelection();\n        let anchorOffset = _anchorOffset;\n        let focusOffset = _focusOffset;\n        const childrenCount = this.getChildrenSize();\n        if (!this.canBeEmpty()) {\n            if (_anchorOffset === 0 && _focusOffset === 0) {\n                const firstChild = this.getFirstChild();\n                if ($03df355ea183d08a$var$$isTextNode(firstChild) || $03df355ea183d08a$var$$isElementNode(firstChild)) return firstChild.select(0, 0);\n            } else if ((_anchorOffset === undefined || _anchorOffset === childrenCount) && (_focusOffset === undefined || _focusOffset === childrenCount)) {\n                const lastChild = this.getLastChild();\n                if ($03df355ea183d08a$var$$isTextNode(lastChild) || $03df355ea183d08a$var$$isElementNode(lastChild)) return lastChild.select();\n            }\n        }\n        if (anchorOffset === undefined) anchorOffset = childrenCount;\n        if (focusOffset === undefined) focusOffset = childrenCount;\n        const key = this.__key;\n        if (!$03df355ea183d08a$var$$isRangeSelection(selection)) return $03df355ea183d08a$var$internalMakeRangeSelection(key, anchorOffset, key, focusOffset, \"element\", \"element\");\n        else {\n            selection.anchor.set(key, anchorOffset, \"element\");\n            selection.focus.set(key, focusOffset, \"element\");\n            selection.dirty = true;\n        }\n        return selection;\n    }\n    selectStart() {\n        const firstNode = this.getFirstDescendant();\n        if ($03df355ea183d08a$var$$isElementNode(firstNode) || $03df355ea183d08a$var$$isTextNode(firstNode)) return firstNode.select(0, 0);\n         // Decorator or LineBreak\n        if (firstNode !== null) return firstNode.selectPrevious();\n        return this.select(0, 0);\n    }\n    selectEnd() {\n        const lastNode = this.getLastDescendant();\n        if ($03df355ea183d08a$var$$isElementNode(lastNode) || $03df355ea183d08a$var$$isTextNode(lastNode)) return lastNode.select();\n         // Decorator or LineBreak\n        if (lastNode !== null) return lastNode.selectNext();\n        return this.select();\n    }\n    clear() {\n        const writableSelf = this.getWritable();\n        const children = this.getChildren();\n        children.forEach((child)=>child.remove());\n        return writableSelf;\n    }\n    append(...nodesToAppend) {\n        return this.splice(this.getChildrenSize(), 0, nodesToAppend);\n    }\n    setDirection(direction) {\n        const self = this.getWritable();\n        self.__dir = direction;\n        return self;\n    }\n    setFormat(type) {\n        const self = this.getWritable();\n        self.__format = type !== \"\" ? $03df355ea183d08a$var$ELEMENT_TYPE_TO_FORMAT[type] : 0;\n        return this;\n    }\n    setIndent(indentLevel) {\n        const self = this.getWritable();\n        self.__indent = indentLevel;\n        return this;\n    }\n    splice(start, deleteCount, nodesToInsert) {\n        const nodesToInsertLength = nodesToInsert.length;\n        const oldSize = this.getChildrenSize();\n        const writableSelf = this.getWritable();\n        const writableSelfKey = writableSelf.__key;\n        const nodesToInsertKeys = [];\n        const nodesToRemoveKeys = [];\n        const nodeAfterRange = this.getChildAtIndex(start + deleteCount);\n        let nodeBeforeRange = null;\n        let newSize = oldSize - deleteCount + nodesToInsertLength;\n        if (start !== 0) {\n            if (start === oldSize) nodeBeforeRange = this.getLastChild();\n            else {\n                const node = this.getChildAtIndex(start);\n                if (node !== null) nodeBeforeRange = node.getPreviousSibling();\n            }\n        }\n        if (deleteCount > 0) {\n            let nodeToDelete = nodeBeforeRange === null ? this.getFirstChild() : nodeBeforeRange.getNextSibling();\n            for(let i = 0; i < deleteCount; i++){\n                if (nodeToDelete === null) throw Error(`splice: sibling not found`);\n                const nextSibling = nodeToDelete.getNextSibling();\n                const nodeKeyToDelete = nodeToDelete.__key;\n                const writableNodeToDelete = nodeToDelete.getWritable();\n                $03df355ea183d08a$var$removeFromParent(writableNodeToDelete);\n                nodesToRemoveKeys.push(nodeKeyToDelete);\n                nodeToDelete = nextSibling;\n            }\n        }\n        let prevNode = nodeBeforeRange;\n        for(let i = 0; i < nodesToInsertLength; i++){\n            const nodeToInsert = nodesToInsert[i];\n            if (prevNode !== null && nodeToInsert.is(prevNode)) nodeBeforeRange = prevNode = prevNode.getPreviousSibling();\n            const writableNodeToInsert = nodeToInsert.getWritable();\n            if (writableNodeToInsert.__parent === writableSelfKey) newSize--;\n            $03df355ea183d08a$var$removeFromParent(writableNodeToInsert);\n            const nodeKeyToInsert = nodeToInsert.__key;\n            if (prevNode === null) {\n                writableSelf.__first = nodeKeyToInsert;\n                writableNodeToInsert.__prev = null;\n            } else {\n                const writablePrevNode = prevNode.getWritable();\n                writablePrevNode.__next = nodeKeyToInsert;\n                writableNodeToInsert.__prev = writablePrevNode.__key;\n            }\n            if (nodeToInsert.__key === writableSelfKey) throw Error(`append: attempting to append self`);\n             // Set child parent to self\n            writableNodeToInsert.__parent = writableSelfKey;\n            nodesToInsertKeys.push(nodeKeyToInsert);\n            prevNode = nodeToInsert;\n        }\n        if (start + deleteCount === oldSize) {\n            if (prevNode !== null) {\n                const writablePrevNode = prevNode.getWritable();\n                writablePrevNode.__next = null;\n                writableSelf.__last = prevNode.__key;\n            }\n        } else if (nodeAfterRange !== null) {\n            const writableNodeAfterRange = nodeAfterRange.getWritable();\n            if (prevNode !== null) {\n                const writablePrevNode = prevNode.getWritable();\n                writableNodeAfterRange.__prev = prevNode.__key;\n                writablePrevNode.__next = nodeAfterRange.__key;\n            } else writableNodeAfterRange.__prev = null;\n        }\n        writableSelf.__size = newSize; // In case of deletion we need to adjust selection, unlink removed nodes\n        // and clean up node itself if it becomes empty. None of these needed\n        // for insertion-only cases\n        if (nodesToRemoveKeys.length) {\n            // Adjusting selection, in case node that was anchor/focus will be deleted\n            const selection = $03df355ea183d08a$var$$getSelection();\n            if ($03df355ea183d08a$var$$isRangeSelection(selection)) {\n                const nodesToRemoveKeySet = new Set(nodesToRemoveKeys);\n                const nodesToInsertKeySet = new Set(nodesToInsertKeys);\n                const { anchor: anchor , focus: focus  } = selection;\n                if ($03df355ea183d08a$var$isPointRemoved(anchor, nodesToRemoveKeySet, nodesToInsertKeySet)) $03df355ea183d08a$var$moveSelectionPointToSibling(anchor, anchor.getNode(), this, nodeBeforeRange, nodeAfterRange);\n                if ($03df355ea183d08a$var$isPointRemoved(focus, nodesToRemoveKeySet, nodesToInsertKeySet)) $03df355ea183d08a$var$moveSelectionPointToSibling(focus, focus.getNode(), this, nodeBeforeRange, nodeAfterRange);\n                 // Cleanup if node can't be empty\n                if (newSize === 0 && !this.canBeEmpty() && !$03df355ea183d08a$var$$isRootOrShadowRoot(this)) this.remove();\n            }\n        }\n        return writableSelf;\n    }\n    exportJSON() {\n        return {\n            children: [],\n            direction: this.getDirection(),\n            format: this.getFormatType(),\n            indent: this.getIndent(),\n            type: \"element\",\n            version: 1\n        };\n    }\n    insertNewAfter(selection, restoreSelection) {\n        return null;\n    }\n    canInsertTab() {\n        return false;\n    }\n    canIndent() {\n        return true;\n    }\n    /*\n   * This method controls the behavior of a the node during backwards\n   * deletion (i.e., backspace) when selection is at the beginning of\n   * the node (offset 0)\n   */ collapseAtStart(selection) {\n        return false;\n    }\n    excludeFromCopy(destination) {\n        return false;\n    }\n    canExtractContents() {\n        return true;\n    }\n    canReplaceWith(replacement) {\n        return true;\n    }\n    canInsertAfter(node) {\n        return true;\n    }\n    canBeEmpty() {\n        return true;\n    }\n    canInsertTextBefore() {\n        return true;\n    }\n    canInsertTextAfter() {\n        return true;\n    }\n    isInline() {\n        return false;\n    }\n    // end of the hiercharchy, most implementations should treat it as there's nothing (upwards)\n    // beyond this point. For example, node.getTopLevelElement(), when performed inside a TableCellNode\n    // will return the immediate first child underneath TableCellNode instead of RootNode.\n    isShadowRoot() {\n        return false;\n    }\n    canMergeWith(node) {\n        return false;\n    }\n    extractWithChild(child, selection, destination) {\n        return false;\n    }\n    /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ constructor(key){\n        super(key);\n        this.__first = null;\n        this.__last = null;\n        this.__size = 0;\n        this.__format = 0;\n        this.__indent = 0;\n        this.__dir = null;\n    }\n}\nfunction $03df355ea183d08a$var$$isElementNode(node) {\n    return node instanceof $03df355ea183d08a$var$ElementNode;\n}\nfunction $03df355ea183d08a$var$isPointRemoved(point, nodesToRemoveKeySet, nodesToInsertKeySet) {\n    let node = point.getNode();\n    while(node){\n        const nodeKey = node.__key;\n        if (nodesToRemoveKeySet.has(nodeKey) && !nodesToInsertKeySet.has(nodeKey)) return true;\n        node = node.getParent();\n    }\n    return false;\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ /** @noInheritDoc */ class $03df355ea183d08a$var$RootNode extends $03df355ea183d08a$var$ElementNode {\n    /** @internal */ static getType() {\n        return \"root\";\n    }\n    static clone() {\n        return new $03df355ea183d08a$var$RootNode();\n    }\n    getTopLevelElementOrThrow() {\n        throw Error(`getTopLevelElementOrThrow: root nodes are not top level elements`);\n    }\n    getTextContent() {\n        const cachedText = this.__cachedText;\n        if ($03df355ea183d08a$var$isCurrentlyReadOnlyMode() || $03df355ea183d08a$var$getActiveEditor()._dirtyType === $03df355ea183d08a$var$NO_DIRTY_NODES) {\n            if (cachedText !== null) return cachedText;\n        }\n        return super.getTextContent();\n    }\n    remove() {\n        throw Error(`remove: cannot be called on root nodes`);\n    }\n    replace(node) {\n        throw Error(`replace: cannot be called on root nodes`);\n    }\n    insertBefore(nodeToInsert) {\n        throw Error(`insertBefore: cannot be called on root nodes`);\n    }\n    insertAfter(nodeToInsert) {\n        throw Error(`insertAfter: cannot be called on root nodes`);\n    }\n    updateDOM(prevNode, dom) {\n        return false;\n    }\n    append(...nodesToAppend) {\n        for(let i = 0; i < nodesToAppend.length; i++){\n            const node = nodesToAppend[i];\n            if (!$03df355ea183d08a$var$$isElementNode(node) && !$03df355ea183d08a$var$$isDecoratorNode(node)) throw Error(`rootNode.append: Only element or decorator nodes can be appended to the root node`);\n        }\n        return super.append(...nodesToAppend);\n    }\n    static importJSON(serializedNode) {\n        // We don't create a root, and instead use the existing root.\n        const node = $03df355ea183d08a$var$$getRoot();\n        node.setFormat(serializedNode.format);\n        node.setIndent(serializedNode.indent);\n        node.setDirection(serializedNode.direction);\n        return node;\n    }\n    exportJSON() {\n        return {\n            children: [],\n            direction: this.getDirection(),\n            format: this.getFormatType(),\n            indent: this.getIndent(),\n            type: \"root\",\n            version: 1\n        };\n    }\n    collapseAtStart() {\n        return true;\n    }\n    constructor(){\n        super(\"root\");\n        this.__cachedText = null;\n    }\n}\nfunction $03df355ea183d08a$var$$createRootNode() {\n    return new $03df355ea183d08a$var$RootNode();\n}\nfunction $03df355ea183d08a$var$$isRootNode(node) {\n    return node instanceof $03df355ea183d08a$var$RootNode;\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ function $03df355ea183d08a$var$editorStateHasDirtySelection(editorState, editor) {\n    const currentSelection = editor.getEditorState()._selection;\n    const pendingSelection = editorState._selection; // Check if we need to update because of changes in selection\n    if (pendingSelection !== null) {\n        if (pendingSelection.dirty || !pendingSelection.is(currentSelection)) return true;\n    } else if (currentSelection !== null) return true;\n    return false;\n}\nfunction $03df355ea183d08a$var$cloneEditorState(current) {\n    return new $03df355ea183d08a$var$EditorState(new Map(current._nodeMap));\n}\nfunction $03df355ea183d08a$var$createEmptyEditorState() {\n    return new $03df355ea183d08a$var$EditorState(new Map([\n        [\n            \"root\",\n            $03df355ea183d08a$var$$createRootNode()\n        ]\n    ]));\n}\nfunction $03df355ea183d08a$var$exportNodeToJSON(node) {\n    const serializedNode = node.exportJSON();\n    const nodeClass = node.constructor; // @ts-expect-error TODO Replace Class utility type with InstanceType\n    if (serializedNode.type !== nodeClass.getType()) throw Error(`LexicalNode: Node ${nodeClass.name} does not implement .exportJSON().`);\n     // @ts-expect-error TODO Replace Class utility type with InstanceType\n    const serializedChildren = serializedNode.children;\n    if ($03df355ea183d08a$var$$isElementNode(node)) {\n        if (!Array.isArray(serializedChildren)) throw Error(`LexicalNode: Node ${nodeClass.name} is an element but .exportJSON() does not have a children array.`);\n        const children = node.getChildren();\n        for(let i = 0; i < children.length; i++){\n            const child = children[i];\n            const serializedChildNode = $03df355ea183d08a$var$exportNodeToJSON(child);\n            serializedChildren.push(serializedChildNode);\n        }\n    } // @ts-expect-error\n    return serializedNode;\n}\nclass $03df355ea183d08a$var$EditorState {\n    isEmpty() {\n        return this._nodeMap.size === 1 && this._selection === null;\n    }\n    read(callbackFn) {\n        return $03df355ea183d08a$var$readEditorState(this, callbackFn);\n    }\n    clone(selection) {\n        const editorState = new $03df355ea183d08a$var$EditorState(this._nodeMap, selection === undefined ? this._selection : selection);\n        editorState._readOnly = true;\n        return editorState;\n    }\n    toJSON() {\n        return $03df355ea183d08a$var$readEditorState(this, ()=>({\n                root: $03df355ea183d08a$var$exportNodeToJSON($03df355ea183d08a$var$$getRoot())\n            }));\n    }\n    constructor(nodeMap, selection){\n        this._nodeMap = nodeMap;\n        this._selection = selection || null;\n        this._flushSync = false;\n        this._readOnly = false;\n    }\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ /** @noInheritDoc */ class $03df355ea183d08a$var$LineBreakNode extends $03df355ea183d08a$var$LexicalNode {\n    static getType() {\n        return \"linebreak\";\n    }\n    static clone(node) {\n        return new $03df355ea183d08a$var$LineBreakNode(node.__key);\n    }\n    getTextContent() {\n        return \"\\n\";\n    }\n    createDOM() {\n        return document.createElement(\"br\");\n    }\n    updateDOM() {\n        return false;\n    }\n    static importDOM() {\n        return {\n            br: (node)=>{\n                const parentElement = node.parentElement; // If the <br> is the only child, then skip including it\n                if (parentElement != null && parentElement.firstChild === node && parentElement.lastChild === node) return null;\n                return {\n                    conversion: $03df355ea183d08a$var$convertLineBreakElement,\n                    priority: 0\n                };\n            }\n        };\n    }\n    static importJSON(serializedLineBreakNode) {\n        return $03df355ea183d08a$var$$createLineBreakNode();\n    }\n    exportJSON() {\n        return {\n            type: \"linebreak\",\n            version: 1\n        };\n    }\n    constructor(key){\n        super(key);\n    }\n}\nfunction $03df355ea183d08a$var$convertLineBreakElement(node) {\n    return {\n        node: $03df355ea183d08a$var$$createLineBreakNode()\n    };\n}\nfunction $03df355ea183d08a$var$$createLineBreakNode() {\n    return $03df355ea183d08a$var$$applyNodeReplacement(new $03df355ea183d08a$var$LineBreakNode());\n}\nfunction $03df355ea183d08a$var$$isLineBreakNode(node) {\n    return node instanceof $03df355ea183d08a$var$LineBreakNode;\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ function $03df355ea183d08a$var$getElementOuterTag(node, format) {\n    if (format & $03df355ea183d08a$var$IS_CODE) return \"code\";\n    if (format & $03df355ea183d08a$var$IS_HIGHLIGHT) return \"mark\";\n    if (format & $03df355ea183d08a$var$IS_SUBSCRIPT) return \"sub\";\n    if (format & $03df355ea183d08a$var$IS_SUPERSCRIPT) return \"sup\";\n    return null;\n}\nfunction $03df355ea183d08a$var$getElementInnerTag(node, format) {\n    if (format & $03df355ea183d08a$var$IS_BOLD) return \"strong\";\n    if (format & $03df355ea183d08a$var$IS_ITALIC) return \"em\";\n    return \"span\";\n}\nfunction $03df355ea183d08a$var$setTextThemeClassNames(tag, prevFormat, nextFormat, dom, textClassNames) {\n    const domClassList = dom.classList; // Firstly we handle the base theme.\n    let classNames = $03df355ea183d08a$var$getCachedClassNameArray(textClassNames, \"base\");\n    if (classNames !== undefined) domClassList.add(...classNames);\n     // Secondly we handle the special case: underline + strikethrough.\n    // We have to do this as we need a way to compose the fact that\n    // the same CSS property will need to be used: text-decoration.\n    // In an ideal world we shouldn't have to do this, but there's no\n    // easy workaround for many atomic CSS systems today.\n    classNames = $03df355ea183d08a$var$getCachedClassNameArray(textClassNames, \"underlineStrikethrough\");\n    let hasUnderlineStrikethrough = false;\n    const prevUnderlineStrikethrough = prevFormat & $03df355ea183d08a$var$IS_UNDERLINE && prevFormat & $03df355ea183d08a$var$IS_STRIKETHROUGH;\n    const nextUnderlineStrikethrough = nextFormat & $03df355ea183d08a$var$IS_UNDERLINE && nextFormat & $03df355ea183d08a$var$IS_STRIKETHROUGH;\n    if (classNames !== undefined) {\n        if (nextUnderlineStrikethrough) {\n            hasUnderlineStrikethrough = true;\n            if (!prevUnderlineStrikethrough) domClassList.add(...classNames);\n        } else if (prevUnderlineStrikethrough) domClassList.remove(...classNames);\n    }\n    for(const key in $03df355ea183d08a$var$TEXT_TYPE_TO_FORMAT){\n        const format = key;\n        const flag = $03df355ea183d08a$var$TEXT_TYPE_TO_FORMAT[format];\n        classNames = $03df355ea183d08a$var$getCachedClassNameArray(textClassNames, key);\n        if (classNames !== undefined) {\n            if (nextFormat & flag) {\n                if (hasUnderlineStrikethrough && (key === \"underline\" || key === \"strikethrough\")) {\n                    if (prevFormat & flag) domClassList.remove(...classNames);\n                    continue;\n                }\n                if ((prevFormat & flag) === 0 || prevUnderlineStrikethrough && key === \"underline\" || key === \"strikethrough\") domClassList.add(...classNames);\n            } else if (prevFormat & flag) domClassList.remove(...classNames);\n        }\n    }\n}\nfunction $03df355ea183d08a$var$diffComposedText(a, b) {\n    const aLength = a.length;\n    const bLength = b.length;\n    let left = 0;\n    let right = 0;\n    while(left < aLength && left < bLength && a[left] === b[left])left++;\n    while(right + left < aLength && right + left < bLength && a[aLength - right - 1] === b[bLength - right - 1])right++;\n    return [\n        left,\n        aLength - left - right,\n        b.slice(left, bLength - right)\n    ];\n}\nfunction $03df355ea183d08a$var$setTextContent(nextText, dom, node) {\n    const firstChild = dom.firstChild;\n    const isComposing = node.isComposing(); // Always add a suffix if we're composing a node\n    const suffix = isComposing ? $03df355ea183d08a$var$COMPOSITION_SUFFIX : \"\";\n    const text = nextText + suffix;\n    if (firstChild == null) dom.textContent = text;\n    else {\n        const nodeValue = firstChild.nodeValue;\n        if (nodeValue !== text) {\n            if (isComposing || $03df355ea183d08a$var$IS_FIREFOX) {\n                // We also use the diff composed text for general text in FF to avoid\n                // the spellcheck red line from flickering.\n                const [index, remove, insert] = $03df355ea183d08a$var$diffComposedText(nodeValue, text);\n                if (remove !== 0) // @ts-expect-error\n                firstChild.deleteData(index, remove);\n                 // @ts-expect-error\n                firstChild.insertData(index, insert);\n            } else firstChild.nodeValue = text;\n        }\n    }\n}\nfunction $03df355ea183d08a$var$createTextInnerDOM(innerDOM, node, innerTag, format, text, config) {\n    $03df355ea183d08a$var$setTextContent(text, innerDOM, node);\n    const theme = config.theme; // Apply theme class names\n    const textClassNames = theme.text;\n    if (textClassNames !== undefined) $03df355ea183d08a$var$setTextThemeClassNames(innerTag, 0, format, innerDOM, textClassNames);\n}\nfunction $03df355ea183d08a$var$wrapElementWith(element, tag) {\n    const el = document.createElement(tag);\n    el.appendChild(element);\n    return el;\n}\n/** @noInheritDoc */ class $03df355ea183d08a$var$TextNode extends $03df355ea183d08a$var$LexicalNode {\n    /** @internal */ /** @internal */ /** @internal */ /** @internal */ static getType() {\n        return \"text\";\n    }\n    static clone(node) {\n        return new $03df355ea183d08a$var$TextNode(node.__text, node.__key);\n    }\n    getFormat() {\n        const self = this.getLatest();\n        return self.__format;\n    }\n    getDetail() {\n        const self = this.getLatest();\n        return self.__detail;\n    }\n    getMode() {\n        const self = this.getLatest();\n        return $03df355ea183d08a$var$TEXT_TYPE_TO_MODE[self.__mode];\n    }\n    getStyle() {\n        const self = this.getLatest();\n        return self.__style;\n    }\n    isToken() {\n        const self = this.getLatest();\n        return self.__mode === $03df355ea183d08a$var$IS_TOKEN;\n    }\n    isComposing() {\n        return this.__key === $03df355ea183d08a$var$$getCompositionKey();\n    }\n    isSegmented() {\n        const self = this.getLatest();\n        return self.__mode === $03df355ea183d08a$var$IS_SEGMENTED;\n    }\n    isDirectionless() {\n        const self = this.getLatest();\n        return (self.__detail & $03df355ea183d08a$var$IS_DIRECTIONLESS) !== 0;\n    }\n    isUnmergeable() {\n        const self = this.getLatest();\n        return (self.__detail & $03df355ea183d08a$var$IS_UNMERGEABLE) !== 0;\n    }\n    hasFormat(type) {\n        const formatFlag = $03df355ea183d08a$var$TEXT_TYPE_TO_FORMAT[type];\n        return (this.getFormat() & formatFlag) !== 0;\n    }\n    isSimpleText() {\n        return this.__type === \"text\" && this.__mode === 0;\n    }\n    getTextContent() {\n        const self = this.getLatest();\n        return self.__text;\n    }\n    getFormatFlags(type, alignWithFormat) {\n        const self = this.getLatest();\n        const format = self.__format;\n        return $03df355ea183d08a$var$toggleTextFormatType(format, type, alignWithFormat);\n    }\n    createDOM(config) {\n        const format = this.__format;\n        const outerTag = $03df355ea183d08a$var$getElementOuterTag(this, format);\n        const innerTag = $03df355ea183d08a$var$getElementInnerTag(this, format);\n        const tag = outerTag === null ? innerTag : outerTag;\n        const dom = document.createElement(tag);\n        let innerDOM = dom;\n        if (outerTag !== null) {\n            innerDOM = document.createElement(innerTag);\n            dom.appendChild(innerDOM);\n        }\n        const text = this.__text;\n        $03df355ea183d08a$var$createTextInnerDOM(innerDOM, this, innerTag, format, text, config);\n        const style = this.__style;\n        if (style !== \"\") dom.style.cssText = style;\n        return dom;\n    }\n    updateDOM(prevNode, dom, config) {\n        const nextText = this.__text;\n        const prevFormat = prevNode.__format;\n        const nextFormat = this.__format;\n        const prevOuterTag = $03df355ea183d08a$var$getElementOuterTag(this, prevFormat);\n        const nextOuterTag = $03df355ea183d08a$var$getElementOuterTag(this, nextFormat);\n        const prevInnerTag = $03df355ea183d08a$var$getElementInnerTag(this, prevFormat);\n        const nextInnerTag = $03df355ea183d08a$var$getElementInnerTag(this, nextFormat);\n        const prevTag = prevOuterTag === null ? prevInnerTag : prevOuterTag;\n        const nextTag = nextOuterTag === null ? nextInnerTag : nextOuterTag;\n        if (prevTag !== nextTag) return true;\n        if (prevOuterTag === nextOuterTag && prevInnerTag !== nextInnerTag) {\n            // should always be an element\n            const prevInnerDOM = dom.firstChild;\n            if (prevInnerDOM == null) throw Error(`updateDOM: prevInnerDOM is null or undefined`);\n            const nextInnerDOM = document.createElement(nextInnerTag);\n            $03df355ea183d08a$var$createTextInnerDOM(nextInnerDOM, this, nextInnerTag, nextFormat, nextText, config);\n            dom.replaceChild(nextInnerDOM, prevInnerDOM);\n            return false;\n        }\n        let innerDOM = dom;\n        if (nextOuterTag !== null) {\n            if (prevOuterTag !== null) {\n                innerDOM = dom.firstChild;\n                if (innerDOM == null) throw Error(`updateDOM: innerDOM is null or undefined`);\n            }\n        }\n        $03df355ea183d08a$var$setTextContent(nextText, innerDOM, this);\n        const theme = config.theme; // Apply theme class names\n        const textClassNames = theme.text;\n        if (textClassNames !== undefined && prevFormat !== nextFormat) $03df355ea183d08a$var$setTextThemeClassNames(nextInnerTag, prevFormat, nextFormat, innerDOM, textClassNames);\n        const prevStyle = prevNode.__style;\n        const nextStyle = this.__style;\n        if (prevStyle !== nextStyle) dom.style.cssText = nextStyle;\n        return false;\n    }\n    static importDOM() {\n        return {\n            \"#text\": ()=>({\n                    conversion: $03df355ea183d08a$var$convertTextDOMNode,\n                    priority: 0\n                }),\n            b: ()=>({\n                    conversion: $03df355ea183d08a$var$convertBringAttentionToElement,\n                    priority: 0\n                }),\n            br: ()=>({\n                    conversion: $03df355ea183d08a$var$convertLineBreakToElement,\n                    priority: 0\n                }),\n            code: ()=>({\n                    conversion: $03df355ea183d08a$var$convertTextFormatElement,\n                    priority: 0\n                }),\n            em: ()=>({\n                    conversion: $03df355ea183d08a$var$convertTextFormatElement,\n                    priority: 0\n                }),\n            i: ()=>({\n                    conversion: $03df355ea183d08a$var$convertTextFormatElement,\n                    priority: 0\n                }),\n            s: ()=>({\n                    conversion: $03df355ea183d08a$var$convertTextFormatElement,\n                    priority: 0\n                }),\n            span: ()=>({\n                    conversion: $03df355ea183d08a$var$convertSpanElement,\n                    priority: 0\n                }),\n            strong: ()=>({\n                    conversion: $03df355ea183d08a$var$convertTextFormatElement,\n                    priority: 0\n                }),\n            sub: ()=>({\n                    conversion: $03df355ea183d08a$var$convertTextFormatElement,\n                    priority: 0\n                }),\n            sup: ()=>({\n                    conversion: $03df355ea183d08a$var$convertTextFormatElement,\n                    priority: 0\n                }),\n            u: ()=>({\n                    conversion: $03df355ea183d08a$var$convertTextFormatElement,\n                    priority: 0\n                })\n        };\n    }\n    static importJSON(serializedNode) {\n        const node = $03df355ea183d08a$var$$createTextNode(serializedNode.text);\n        node.setFormat(serializedNode.format);\n        node.setDetail(serializedNode.detail);\n        node.setMode(serializedNode.mode);\n        node.setStyle(serializedNode.style);\n        return node;\n    }\n    // for headless mode where people might use Lexical to generate\n    // HTML content and not have the ability to use CSS classes.\n    exportDOM(editor) {\n        let { element: element  } = super.exportDOM(editor); // This is the only way to properly add support for most clients,\n        // even if it's semantically incorrect to have to resort to using\n        // <b>, <u>, <s>, <i> elements.\n        if (element !== null) {\n            if (this.hasFormat(\"bold\")) element = $03df355ea183d08a$var$wrapElementWith(element, \"b\");\n            if (this.hasFormat(\"italic\")) element = $03df355ea183d08a$var$wrapElementWith(element, \"i\");\n            if (this.hasFormat(\"strikethrough\")) element = $03df355ea183d08a$var$wrapElementWith(element, \"s\");\n            if (this.hasFormat(\"underline\")) element = $03df355ea183d08a$var$wrapElementWith(element, \"u\");\n        }\n        return {\n            element: element\n        };\n    }\n    exportJSON() {\n        return {\n            detail: this.getDetail(),\n            format: this.getFormat(),\n            mode: this.getMode(),\n            style: this.getStyle(),\n            text: this.getTextContent(),\n            type: \"text\",\n            version: 1\n        };\n    }\n    selectionTransform(prevSelection, nextSelection) {\n        return;\n    }\n    setFormat(format) {\n        const self = this.getWritable();\n        self.__format = typeof format === \"string\" ? $03df355ea183d08a$var$TEXT_TYPE_TO_FORMAT[format] : format;\n        return self;\n    }\n    setDetail(detail) {\n        const self = this.getWritable();\n        self.__detail = typeof detail === \"string\" ? $03df355ea183d08a$var$DETAIL_TYPE_TO_DETAIL[detail] : detail;\n        return self;\n    }\n    setStyle(style) {\n        const self = this.getWritable();\n        self.__style = style;\n        return self;\n    }\n    toggleFormat(type) {\n        const formatFlag = $03df355ea183d08a$var$TEXT_TYPE_TO_FORMAT[type];\n        return this.setFormat(this.getFormat() ^ formatFlag);\n    }\n    toggleDirectionless() {\n        const self = this.getWritable();\n        self.__detail ^= $03df355ea183d08a$var$IS_DIRECTIONLESS;\n        return self;\n    }\n    toggleUnmergeable() {\n        const self = this.getWritable();\n        self.__detail ^= $03df355ea183d08a$var$IS_UNMERGEABLE;\n        return self;\n    }\n    setMode(type) {\n        const mode = $03df355ea183d08a$var$TEXT_MODE_TO_TYPE[type];\n        if (this.__mode === mode) return this;\n        const self = this.getWritable();\n        self.__mode = mode;\n        return self;\n    }\n    setTextContent(text) {\n        if (this.__text === text) return this;\n        const self = this.getWritable();\n        self.__text = text;\n        return self;\n    }\n    select(_anchorOffset, _focusOffset) {\n        $03df355ea183d08a$var$errorOnReadOnly();\n        let anchorOffset = _anchorOffset;\n        let focusOffset = _focusOffset;\n        const selection = $03df355ea183d08a$var$$getSelection();\n        const text = this.getTextContent();\n        const key = this.__key;\n        if (typeof text === \"string\") {\n            const lastOffset = text.length;\n            if (anchorOffset === undefined) anchorOffset = lastOffset;\n            if (focusOffset === undefined) focusOffset = lastOffset;\n        } else {\n            anchorOffset = 0;\n            focusOffset = 0;\n        }\n        if (!$03df355ea183d08a$var$$isRangeSelection(selection)) return $03df355ea183d08a$var$internalMakeRangeSelection(key, anchorOffset, key, focusOffset, \"text\", \"text\");\n        else {\n            const compositionKey = $03df355ea183d08a$var$$getCompositionKey();\n            if (compositionKey === selection.anchor.key || compositionKey === selection.focus.key) $03df355ea183d08a$var$$setCompositionKey(key);\n            selection.setTextNodeRange(this, anchorOffset, this, focusOffset);\n        }\n        return selection;\n    }\n    spliceText(offset, delCount, newText, moveSelection) {\n        const writableSelf = this.getWritable();\n        const text = writableSelf.__text;\n        const handledTextLength = newText.length;\n        let index = offset;\n        if (index < 0) {\n            index = handledTextLength + index;\n            if (index < 0) index = 0;\n        }\n        const selection = $03df355ea183d08a$var$$getSelection();\n        if (moveSelection && $03df355ea183d08a$var$$isRangeSelection(selection)) {\n            const newOffset = offset + handledTextLength;\n            selection.setTextNodeRange(writableSelf, newOffset, writableSelf, newOffset);\n        }\n        const updatedText = text.slice(0, index) + newText + text.slice(index + delCount);\n        writableSelf.__text = updatedText;\n        return writableSelf;\n    }\n    canInsertTextBefore() {\n        return true;\n    }\n    canInsertTextAfter() {\n        return true;\n    }\n    canContainTabs() {\n        return false;\n    }\n    splitText(...splitOffsets) {\n        $03df355ea183d08a$var$errorOnReadOnly();\n        const self = this.getLatest();\n        const textContent = self.getTextContent();\n        const key = self.__key;\n        const compositionKey = $03df355ea183d08a$var$$getCompositionKey();\n        const offsetsSet = new Set(splitOffsets);\n        const parts = [];\n        const textLength = textContent.length;\n        let string = \"\";\n        for(let i = 0; i < textLength; i++){\n            if (string !== \"\" && offsetsSet.has(i)) {\n                parts.push(string);\n                string = \"\";\n            }\n            string += textContent[i];\n        }\n        if (string !== \"\") parts.push(string);\n        const partsLength = parts.length;\n        if (partsLength === 0) return [];\n        else if (parts[0] === textContent) return [\n            self\n        ];\n        const firstPart = parts[0];\n        const parent = self.getParentOrThrow();\n        let writableNode;\n        const format = self.getFormat();\n        const style = self.getStyle();\n        const detail = self.__detail;\n        let hasReplacedSelf = false;\n        if (self.isSegmented()) {\n            // Create a new TextNode\n            writableNode = $03df355ea183d08a$var$$createTextNode(firstPart);\n            writableNode.__format = format;\n            writableNode.__style = style;\n            writableNode.__detail = detail;\n            hasReplacedSelf = true;\n        } else {\n            // For the first part, update the existing node\n            writableNode = self.getWritable();\n            writableNode.__text = firstPart;\n        } // Handle selection\n        const selection = $03df355ea183d08a$var$$getSelection(); // Then handle all other parts\n        const splitNodes = [\n            writableNode\n        ];\n        let textSize = firstPart.length;\n        for(let i = 1; i < partsLength; i++){\n            const part = parts[i];\n            const partSize = part.length;\n            const sibling = $03df355ea183d08a$var$$createTextNode(part).getWritable();\n            sibling.__format = format;\n            sibling.__style = style;\n            sibling.__detail = detail;\n            const siblingKey = sibling.__key;\n            const nextTextSize = textSize + partSize;\n            if ($03df355ea183d08a$var$$isRangeSelection(selection)) {\n                const anchor = selection.anchor;\n                const focus = selection.focus;\n                if (anchor.key === key && anchor.type === \"text\" && anchor.offset > textSize && anchor.offset <= nextTextSize) {\n                    anchor.key = siblingKey;\n                    anchor.offset -= textSize;\n                    selection.dirty = true;\n                }\n                if (focus.key === key && focus.type === \"text\" && focus.offset > textSize && focus.offset <= nextTextSize) {\n                    focus.key = siblingKey;\n                    focus.offset -= textSize;\n                    selection.dirty = true;\n                }\n            }\n            if (compositionKey === key) $03df355ea183d08a$var$$setCompositionKey(siblingKey);\n            textSize = nextTextSize;\n            splitNodes.push(sibling);\n        } // Insert the nodes into the parent's children\n        $03df355ea183d08a$var$internalMarkSiblingsAsDirty(this);\n        const writableParent = parent.getWritable();\n        const insertionIndex = this.getIndexWithinParent();\n        if (hasReplacedSelf) {\n            writableParent.splice(insertionIndex, 0, splitNodes);\n            this.remove();\n        } else writableParent.splice(insertionIndex, 1, splitNodes);\n        if ($03df355ea183d08a$var$$isRangeSelection(selection)) $03df355ea183d08a$var$$updateElementSelectionOnCreateDeleteNode(selection, parent, insertionIndex, partsLength - 1);\n        return splitNodes;\n    }\n    mergeWithSibling(target) {\n        const isBefore = target === this.getPreviousSibling();\n        if (!isBefore && target !== this.getNextSibling()) throw Error(`mergeWithSibling: sibling must be a previous or next sibling`);\n        const key = this.__key;\n        const targetKey = target.__key;\n        const text = this.__text;\n        const textLength = text.length;\n        const compositionKey = $03df355ea183d08a$var$$getCompositionKey();\n        if (compositionKey === targetKey) $03df355ea183d08a$var$$setCompositionKey(key);\n        const selection = $03df355ea183d08a$var$$getSelection();\n        if ($03df355ea183d08a$var$$isRangeSelection(selection)) {\n            const anchor = selection.anchor;\n            const focus = selection.focus;\n            if (anchor !== null && anchor.key === targetKey) {\n                $03df355ea183d08a$var$adjustPointOffsetForMergedSibling(anchor, isBefore, key, target, textLength);\n                selection.dirty = true;\n            }\n            if (focus !== null && focus.key === targetKey) {\n                $03df355ea183d08a$var$adjustPointOffsetForMergedSibling(focus, isBefore, key, target, textLength);\n                selection.dirty = true;\n            }\n        }\n        const targetText = target.__text;\n        const newText = isBefore ? targetText + text : text + targetText;\n        this.setTextContent(newText);\n        const writableSelf = this.getWritable();\n        target.remove();\n        return writableSelf;\n    }\n    isTextEntity() {\n        return false;\n    }\n    constructor(text, key){\n        super(key);\n        this.__text = text;\n        this.__format = 0;\n        this.__style = \"\";\n        this.__mode = 0;\n        this.__detail = 0;\n    }\n}\nfunction $03df355ea183d08a$var$convertSpanElement(domNode) {\n    // domNode is a <span> since we matched it by nodeName\n    const span = domNode; // Google Docs uses span tags + font-weight for bold text\n    const hasBoldFontWeight = span.style.fontWeight === \"700\"; // Google Docs uses span tags + text-decoration: line-through for strikethrough text\n    const hasLinethroughTextDecoration = span.style.textDecoration === \"line-through\"; // Google Docs uses span tags + font-style for italic text\n    const hasItalicFontStyle = span.style.fontStyle === \"italic\"; // Google Docs uses span tags + text-decoration: underline for underline text\n    const hasUnderlineTextDecoration = span.style.textDecoration === \"underline\"; // Google Docs uses span tags + vertical-align to specify subscript and superscript\n    const verticalAlign = span.style.verticalAlign;\n    return {\n        forChild: (lexicalNode)=>{\n            if (!$03df355ea183d08a$var$$isTextNode(lexicalNode)) return lexicalNode;\n            if (hasBoldFontWeight) lexicalNode.toggleFormat(\"bold\");\n            if (hasLinethroughTextDecoration) lexicalNode.toggleFormat(\"strikethrough\");\n            if (hasItalicFontStyle) lexicalNode.toggleFormat(\"italic\");\n            if (hasUnderlineTextDecoration) lexicalNode.toggleFormat(\"underline\");\n            if (verticalAlign === \"sub\") lexicalNode.toggleFormat(\"subscript\");\n            if (verticalAlign === \"super\") lexicalNode.toggleFormat(\"superscript\");\n            return lexicalNode;\n        },\n        node: null\n    };\n}\nfunction $03df355ea183d08a$var$convertLineBreakToElement() {\n    return {\n        node: $03df355ea183d08a$var$$createLineBreakNode()\n    };\n}\nfunction $03df355ea183d08a$var$convertBringAttentionToElement(domNode) {\n    // domNode is a <b> since we matched it by nodeName\n    const b = domNode; // Google Docs wraps all copied HTML in a <b> with font-weight normal\n    const hasNormalFontWeight = b.style.fontWeight === \"normal\";\n    return {\n        forChild: (lexicalNode)=>{\n            if ($03df355ea183d08a$var$$isTextNode(lexicalNode) && !hasNormalFontWeight) lexicalNode.toggleFormat(\"bold\");\n            return lexicalNode;\n        },\n        node: null\n    };\n}\nfunction $03df355ea183d08a$var$convertTextDOMNode(domNode, _parent, preformatted) {\n    let textContent = domNode.textContent || \"\";\n    if (!preformatted && /\\n/.test(textContent)) {\n        textContent = textContent.replace(/\\r?\\n/gm, \" \");\n        if (textContent.trim().length === 0) return {\n            node: null\n        };\n    }\n    return {\n        node: $03df355ea183d08a$var$$createTextNode(textContent)\n    };\n}\nconst $03df355ea183d08a$var$nodeNameToTextFormat = {\n    code: \"code\",\n    em: \"italic\",\n    i: \"italic\",\n    s: \"strikethrough\",\n    strong: \"bold\",\n    sub: \"subscript\",\n    sup: \"superscript\",\n    u: \"underline\"\n};\nfunction $03df355ea183d08a$var$convertTextFormatElement(domNode) {\n    const format = $03df355ea183d08a$var$nodeNameToTextFormat[domNode.nodeName.toLowerCase()];\n    if (format === undefined) return {\n        node: null\n    };\n    return {\n        forChild: (lexicalNode)=>{\n            if ($03df355ea183d08a$var$$isTextNode(lexicalNode) && !lexicalNode.hasFormat(format)) lexicalNode.toggleFormat(format);\n            return lexicalNode;\n        },\n        node: null\n    };\n}\nfunction $03df355ea183d08a$var$$createTextNode(text = \"\") {\n    return $03df355ea183d08a$var$$applyNodeReplacement(new $03df355ea183d08a$var$TextNode(text));\n}\nfunction $03df355ea183d08a$var$$isTextNode(node) {\n    return node instanceof $03df355ea183d08a$var$TextNode;\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ /** @noInheritDoc */ class $03df355ea183d08a$var$ParagraphNode extends $03df355ea183d08a$var$ElementNode {\n    static getType() {\n        return \"paragraph\";\n    }\n    static clone(node) {\n        return new $03df355ea183d08a$var$ParagraphNode(node.__key);\n    }\n    createDOM(config) {\n        const dom = document.createElement(\"p\");\n        const classNames = $03df355ea183d08a$var$getCachedClassNameArray(config.theme, \"paragraph\");\n        if (classNames !== undefined) {\n            const domClassList = dom.classList;\n            domClassList.add(...classNames);\n        }\n        return dom;\n    }\n    updateDOM(prevNode, dom, config) {\n        return false;\n    }\n    static importDOM() {\n        return {\n            p: (node)=>({\n                    conversion: $03df355ea183d08a$var$convertParagraphElement,\n                    priority: 0\n                })\n        };\n    }\n    exportDOM(editor) {\n        const { element: element  } = super.exportDOM(editor);\n        if (element && this.isEmpty()) element.append(document.createElement(\"br\"));\n        if (element) {\n            const formatType = this.getFormatType();\n            element.style.textAlign = formatType;\n            const direction = this.getDirection();\n            if (direction) element.dir = direction;\n            const indent = this.getIndent();\n            if (indent > 0) // padding-inline-start is not widely supported in email HTML, but\n            // Lexical Reconciler uses padding-inline-start. Using text-indent instead.\n            element.style.textIndent = `${indent * 20}px`;\n        }\n        return {\n            element: element\n        };\n    }\n    static importJSON(serializedNode) {\n        const node = $03df355ea183d08a$var$$createParagraphNode();\n        node.setFormat(serializedNode.format);\n        node.setIndent(serializedNode.indent);\n        node.setDirection(serializedNode.direction);\n        return node;\n    }\n    exportJSON() {\n        return {\n            ...super.exportJSON(),\n            type: \"paragraph\",\n            version: 1\n        };\n    }\n    insertNewAfter(_, restoreSelection) {\n        const newElement = $03df355ea183d08a$var$$createParagraphNode();\n        const direction = this.getDirection();\n        newElement.setDirection(direction);\n        this.insertAfter(newElement, restoreSelection);\n        return newElement;\n    }\n    collapseAtStart() {\n        const children = this.getChildren(); // If we have an empty (trimmed) first paragraph and try and remove it,\n        // delete the paragraph as long as we have another sibling to go to\n        if (children.length === 0 || $03df355ea183d08a$var$$isTextNode(children[0]) && children[0].getTextContent().trim() === \"\") {\n            const nextSibling = this.getNextSibling();\n            if (nextSibling !== null) {\n                this.selectNext();\n                this.remove();\n                return true;\n            }\n            const prevSibling = this.getPreviousSibling();\n            if (prevSibling !== null) {\n                this.selectPrevious();\n                this.remove();\n                return true;\n            }\n        }\n        return false;\n    }\n}\nfunction $03df355ea183d08a$var$convertParagraphElement(element) {\n    const node = $03df355ea183d08a$var$$createParagraphNode();\n    if (element.style) {\n        node.setFormat(element.style.textAlign);\n        const indent = parseInt(element.style.textIndent, 10) / 20;\n        if (indent > 0) node.setIndent(indent);\n    }\n    return {\n        node: node\n    };\n}\nfunction $03df355ea183d08a$var$$createParagraphNode() {\n    return $03df355ea183d08a$var$$applyNodeReplacement(new $03df355ea183d08a$var$ParagraphNode());\n}\nfunction $03df355ea183d08a$var$$isParagraphNode(node) {\n    return node instanceof $03df355ea183d08a$var$ParagraphNode;\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ const $03df355ea183d08a$var$COMMAND_PRIORITY_EDITOR = 0;\nconst $03df355ea183d08a$var$COMMAND_PRIORITY_LOW = 1;\nconst $03df355ea183d08a$var$COMMAND_PRIORITY_NORMAL = 2;\nconst $03df355ea183d08a$var$COMMAND_PRIORITY_HIGH = 3;\nconst $03df355ea183d08a$var$COMMAND_PRIORITY_CRITICAL = 4; // eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction $03df355ea183d08a$var$resetEditor(editor, prevRootElement, nextRootElement, pendingEditorState) {\n    const keyNodeMap = editor._keyToDOMMap;\n    keyNodeMap.clear();\n    editor._editorState = $03df355ea183d08a$var$createEmptyEditorState();\n    editor._pendingEditorState = pendingEditorState;\n    editor._compositionKey = null;\n    editor._dirtyType = $03df355ea183d08a$var$NO_DIRTY_NODES;\n    editor._cloneNotNeeded.clear();\n    editor._dirtyLeaves = new Set();\n    editor._dirtyElements.clear();\n    editor._normalizedNodes = new Set();\n    editor._updateTags = new Set();\n    editor._updates = [];\n    editor._blockCursorElement = null;\n    const observer = editor._observer;\n    if (observer !== null) {\n        observer.disconnect();\n        editor._observer = null;\n    } // Remove all the DOM nodes from the root element\n    if (prevRootElement !== null) prevRootElement.textContent = \"\";\n    if (nextRootElement !== null) {\n        nextRootElement.textContent = \"\";\n        keyNodeMap.set(\"root\", nextRootElement);\n    }\n}\nfunction $03df355ea183d08a$var$initializeConversionCache(nodes) {\n    const conversionCache = new Map();\n    const handledConversions = new Set();\n    nodes.forEach((node)=>{\n        const importDOM = node.klass.importDOM != null ? node.klass.importDOM.bind(node.klass) : null;\n        if (importDOM == null || handledConversions.has(importDOM)) return;\n        handledConversions.add(importDOM);\n        const map = importDOM();\n        if (map !== null) Object.keys(map).forEach((key)=>{\n            let currentCache = conversionCache.get(key);\n            if (currentCache === undefined) {\n                currentCache = [];\n                conversionCache.set(key, currentCache);\n            }\n            currentCache.push(map[key]);\n        });\n    });\n    return conversionCache;\n}\n/**\n * Creates a new LexicalEditor attached to a single contentEditable (provided in the config). This is\n * the lowest-level initialization API for a LexicalEditor. If you're using React or another framework,\n * consider using the appropriate abstractions, such as LexicalComposer\n * @param editorConfig - the editor configuration.\n * @returns a LexicalEditor instance\n */ function $03df355ea183d08a$var$createEditor(editorConfig) {\n    const config = editorConfig || {};\n    const activeEditor = $03df355ea183d08a$var$internalGetActiveEditor();\n    const theme = config.theme || {};\n    const parentEditor = editorConfig === undefined ? activeEditor : config.parentEditor || null;\n    const disableEvents = config.disableEvents || false;\n    const editorState = $03df355ea183d08a$var$createEmptyEditorState();\n    const namespace = config.namespace || (parentEditor !== null ? parentEditor._config.namespace : $03df355ea183d08a$var$createUID());\n    const initialEditorState = config.editorState;\n    const nodes = [\n        $03df355ea183d08a$var$RootNode,\n        $03df355ea183d08a$var$TextNode,\n        $03df355ea183d08a$var$LineBreakNode,\n        $03df355ea183d08a$var$ParagraphNode,\n        ...config.nodes || []\n    ];\n    const onError = config.onError;\n    const isEditable = config.editable !== undefined ? config.editable : true;\n    let registeredNodes;\n    if (editorConfig === undefined && activeEditor !== null) registeredNodes = activeEditor._nodes;\n    else {\n        registeredNodes = new Map();\n        for(let i = 0; i < nodes.length; i++){\n            let klass = nodes[i];\n            let replacementClass = null;\n            let replacementKlass = null;\n            if (typeof klass !== \"function\") {\n                const options = klass;\n                klass = options.replace;\n                replacementClass = options.with;\n                replacementKlass = options.withKlass ? options.withKlass : null;\n            } // Ensure custom nodes implement required methods.\n            {\n                const name = klass.name;\n                if (name !== \"RootNode\") {\n                    const proto = klass.prototype;\n                    [\n                        \"getType\",\n                        \"clone\"\n                    ].forEach((method)=>{\n                        // eslint-disable-next-line no-prototype-builtins\n                        if (!klass.hasOwnProperty(method)) console.warn(`${name} must implement static \"${method}\" method`);\n                    });\n                    if (!klass.hasOwnProperty(\"importDOM\") && // eslint-disable-next-line no-prototype-builtins\n                    klass.hasOwnProperty(\"exportDOM\")) console.warn(`${name} should implement \"importDOM\" if using a custom \"exportDOM\" method to ensure HTML serialization (important for copy & paste) works as expected`);\n                    if (proto instanceof $03df355ea183d08a$var$DecoratorNode) // eslint-disable-next-line no-prototype-builtins\n                    {\n                        if (!proto.hasOwnProperty(\"decorate\")) console.warn(`${proto.constructor.name} must implement \"decorate\" method`);\n                    }\n                    if (!klass.hasOwnProperty(\"importJSON\")) console.warn(`${name} should implement \"importJSON\" method to ensure JSON and default HTML serialization works as expected`);\n                    if (!proto.hasOwnProperty(\"exportJSON\")) console.warn(`${name} should implement \"exportJSON\" method to ensure JSON and default HTML serialization works as expected`);\n                }\n            }\n            const type = klass.getType();\n            const transform = klass.transform();\n            const transforms = new Set();\n            if (transform !== null) transforms.add(transform);\n            registeredNodes.set(type, {\n                klass: klass,\n                replace: replacementClass,\n                replaceWithKlass: replacementKlass,\n                transforms: transforms\n            });\n        }\n    }\n    const editor = new $03df355ea183d08a$var$LexicalEditor(editorState, parentEditor, registeredNodes, {\n        disableEvents: disableEvents,\n        namespace: namespace,\n        theme: theme\n    }, onError ? onError : console.error, $03df355ea183d08a$var$initializeConversionCache(registeredNodes), isEditable);\n    if (initialEditorState !== undefined) {\n        editor._pendingEditorState = initialEditorState;\n        editor._dirtyType = $03df355ea183d08a$var$FULL_RECONCILE;\n    }\n    return editor;\n}\nclass $03df355ea183d08a$var$LexicalEditor {\n    /**\n   *\n   * @returns true if the editor is currently in \"composition\" mode due to receiving input\n   * through an IME, or 3P extension, for example. Returns false otherwise.\n   */ isComposing() {\n        return this._compositionKey != null;\n    }\n    /**\n   * Registers a listener for Editor update event. Will trigger the provided callback\n   * each time the editor goes through an update (via {@link LexicalEditor.update}) until the\n   * teardown function is called.\n   *\n   * @returns a teardown function that can be used to cleanup the listener.\n   */ registerUpdateListener(listener) {\n        const listenerSetOrMap = this._listeners.update;\n        listenerSetOrMap.add(listener);\n        return ()=>{\n            listenerSetOrMap.delete(listener);\n        };\n    }\n    /**\n   * Registers a listener for for when the editor changes between editable and non-editable states.\n   * Will trigger the provided callback each time the editor transitions between these states until the\n   * teardown function is called.\n   *\n   * @returns a teardown function that can be used to cleanup the listener.\n   */ registerEditableListener(listener) {\n        const listenerSetOrMap = this._listeners.editable;\n        listenerSetOrMap.add(listener);\n        return ()=>{\n            listenerSetOrMap.delete(listener);\n        };\n    }\n    /**\n   * Registers a listener for when the editor's decorator object changes. The decorator object contains\n   * all DecoratorNode keys -> their decorated value. This is primarily used with external UI frameworks.\n   *\n   * Will trigger the provided callback each time the editor transitions between these states until the\n   * teardown function is called.\n   *\n   * @returns a teardown function that can be used to cleanup the listener.\n   */ registerDecoratorListener(listener) {\n        const listenerSetOrMap = this._listeners.decorator;\n        listenerSetOrMap.add(listener);\n        return ()=>{\n            listenerSetOrMap.delete(listener);\n        };\n    }\n    /**\n   * Registers a listener for when Lexical commits an update to the DOM and the text content of\n   * the editor changes from the previous state of the editor. If the text content is the\n   * same between updates, no notifications to the listeners will happen.\n   *\n   * Will trigger the provided callback each time the editor transitions between these states until the\n   * teardown function is called.\n   *\n   * @returns a teardown function that can be used to cleanup the listener.\n   */ registerTextContentListener(listener) {\n        const listenerSetOrMap = this._listeners.textcontent;\n        listenerSetOrMap.add(listener);\n        return ()=>{\n            listenerSetOrMap.delete(listener);\n        };\n    }\n    /**\n   * Registers a listener for when the editor's root DOM element (the content editable\n   * Lexical attaches to) changes. This is primarily used to attach event listeners to the root\n   *  element. The root listener function is executed directly upon registration and then on\n   * any subsequent update.\n   *\n   * Will trigger the provided callback each time the editor transitions between these states until the\n   * teardown function is called.\n   *\n   * @returns a teardown function that can be used to cleanup the listener.\n   */ registerRootListener(listener) {\n        const listenerSetOrMap = this._listeners.root;\n        listener(this._rootElement, null);\n        listenerSetOrMap.add(listener);\n        return ()=>{\n            listener(null, this._rootElement);\n            listenerSetOrMap.delete(listener);\n        };\n    }\n    /**\n   * Registers a listener that will trigger anytime the provided command\n   * is dispatched, subject to priority. Listeners that run at a higher priority can \"intercept\"\n   * commands and prevent them from propagating to other handlers by returning true.\n   *\n   * Listeners registered at the same priority level will run deterministically in the order of registration.\n   *\n   * @param command - the command that will trigger the callback.\n   * @param listener - the function that will execute when the command is dispatched.\n   * @param priority - the relative priority of the listener. 0 | 1 | 2 | 3 | 4\n   * @returns a teardown function that can be used to cleanup the listener.\n   */ registerCommand(command, listener, priority) {\n        if (priority === undefined) throw Error(`Listener for type \"command\" requires a \"priority\".`);\n        const commandsMap = this._commands;\n        if (!commandsMap.has(command)) commandsMap.set(command, [\n            new Set(),\n            new Set(),\n            new Set(),\n            new Set(),\n            new Set()\n        ]);\n        const listenersInPriorityOrder = commandsMap.get(command);\n        if (listenersInPriorityOrder === undefined) throw Error(`registerCommand: Command ${String(command)} not found in command map`);\n        const listeners = listenersInPriorityOrder[priority];\n        listeners.add(listener);\n        return ()=>{\n            listeners.delete(listener);\n            if (listenersInPriorityOrder.every((listenersSet)=>listenersSet.size === 0)) commandsMap.delete(command);\n        };\n    }\n    /**\n   * Registers a listener that will run when a Lexical node of the provided class is\n   * mutated. The listener will receive a list of nodes along with the type of mutation\n   * that was performed on each: created, destroyed, or updated.\n   *\n   * One common use case for this is to attach DOM event listeners to the underlying DOM nodes as Lexical nodes are created.\n   * {@link LexicalEditor.getElementByKey} can be used for this.\n   *\n   * @param klass - The class of the node that you want to listen to mutations on.\n   * @param listener - The logic you want to run when the node is mutated.\n   * @returns a teardown function that can be used to cleanup the listener.\n   */ registerMutationListener(klass, listener) {\n        const registeredNode = this._nodes.get(klass.getType());\n        if (registeredNode === undefined) throw Error(`Node ${klass.name} has not been registered. Ensure node has been passed to createEditor.`);\n        const mutations = this._listeners.mutation;\n        mutations.set(listener, klass);\n        return ()=>{\n            mutations.delete(listener);\n        };\n    }\n    /** @internal */ registerNodeTransformToKlass(klass, listener) {\n        const type = klass.getType();\n        const registeredNode = this._nodes.get(type);\n        if (registeredNode === undefined) throw Error(`Node ${klass.name} has not been registered. Ensure node has been passed to createEditor.`);\n        const transforms = registeredNode.transforms;\n        transforms.add(listener);\n        return registeredNode;\n    }\n    /**\n   * Registers a listener that will run when a Lexical node of the provided class is\n   * marked dirty during an update. The listener will continue to run as long as the node\n   * is marked dirty. There are no guarantees around the order of transform execution!\n   *\n   * Watch out for infinite loops. See [Node Transforms](https://lexical.dev/docs/concepts/transforms)\n   * @param klass - The class of the node that you want to run transforms on.\n   * @param listener - The logic you want to run when the node is updated.\n   * @returns a teardown function that can be used to cleanup the listener.\n   */ registerNodeTransform(klass, listener) {\n        const registeredNode = this.registerNodeTransformToKlass(klass, listener);\n        const registeredNodes = [\n            registeredNode\n        ];\n        const replaceWithKlass = registeredNode.replaceWithKlass;\n        if (replaceWithKlass != null) {\n            const registeredReplaceWithNode = this.registerNodeTransformToKlass(replaceWithKlass, listener);\n            registeredNodes.push(registeredReplaceWithNode);\n        }\n        $03df355ea183d08a$var$markAllNodesAsDirty(this, klass.getType());\n        return ()=>{\n            registeredNodes.forEach((node)=>node.transforms.delete(listener));\n        };\n    }\n    /**\n   * Used to assert that certain nodes are registered, usually by plugins to ensure nodes that they\n   * depend on have been registered.\n   * @returns True if the editor has registered all of the provided node types, false otherwise.\n   */ hasNodes(nodes) {\n        for(let i = 0; i < nodes.length; i++){\n            const klass = nodes[i];\n            const type = klass.getType();\n            if (!this._nodes.has(type)) return false;\n        }\n        return true;\n    }\n    /**\n   * Dispatches a command of the specified type with the specified payload.\n   * This triggers all command listeners (set by {@link LexicalEditor.registerCommand})\n   * for this type, passing them the provided payload.\n   * @param type - the type of command listeners to trigger.\n   * @param payload - the data to pass as an argument to the command listeners.\n   */ dispatchCommand(type, payload) {\n        return $03df355ea183d08a$var$dispatchCommand(this, type, payload);\n    }\n    /**\n   * Gets a map of all decorators in the editor.\n   * @returns A mapping of call decorator keys to their decorated content\n   */ getDecorators() {\n        return this._decorators;\n    }\n    /**\n   *\n   * @returns the current root element of the editor. If you want to register\n   * an event listener, do it via {@link LexicalEditor.registerRootListener}, since\n   * this reference may not be stable.\n   */ getRootElement() {\n        return this._rootElement;\n    }\n    /**\n   * Gets the key of the editor\n   * @returns The editor key\n   */ getKey() {\n        return this._key;\n    }\n    /**\n   * Imperatively set the root contenteditable element that Lexical listens\n   * for events on.\n   */ setRootElement(nextRootElement) {\n        const prevRootElement = this._rootElement;\n        if (nextRootElement !== prevRootElement) {\n            const classNames = $03df355ea183d08a$var$getCachedClassNameArray(this._config.theme, \"root\");\n            const pendingEditorState = this._pendingEditorState || this._editorState;\n            this._rootElement = nextRootElement;\n            $03df355ea183d08a$var$resetEditor(this, prevRootElement, nextRootElement, pendingEditorState);\n            if (prevRootElement !== null) {\n                // TODO: remove this flag once we no longer use UEv2 internally\n                if (!this._config.disableEvents) $03df355ea183d08a$var$removeRootElementEvents(prevRootElement);\n                if (classNames != null) prevRootElement.classList.remove(...classNames);\n            }\n            if (nextRootElement !== null) {\n                const windowObj = $03df355ea183d08a$var$getDefaultView(nextRootElement);\n                const style = nextRootElement.style;\n                style.userSelect = \"text\";\n                style.whiteSpace = \"pre-wrap\";\n                style.wordBreak = \"break-word\";\n                nextRootElement.setAttribute(\"data-lexical-editor\", \"true\");\n                this._window = windowObj;\n                this._dirtyType = $03df355ea183d08a$var$FULL_RECONCILE;\n                $03df355ea183d08a$var$initMutationObserver(this);\n                this._updateTags.add(\"history-merge\");\n                $03df355ea183d08a$var$commitPendingUpdates(this); // TODO: remove this flag once we no longer use UEv2 internally\n                if (!this._config.disableEvents) $03df355ea183d08a$var$addRootElementEvents(nextRootElement, this);\n                if (classNames != null) nextRootElement.classList.add(...classNames);\n            } else this._window = null;\n            $03df355ea183d08a$var$triggerListeners(\"root\", this, false, nextRootElement, prevRootElement);\n        }\n    }\n    /**\n   * Gets the underlying HTMLElement associated with the LexicalNode for the given key.\n   * @returns the HTMLElement rendered by the LexicalNode associated with the key.\n   * @param key - the key of the LexicalNode.\n   */ getElementByKey(key) {\n        return this._keyToDOMMap.get(key) || null;\n    }\n    /**\n   * Gets the active editor state.\n   * @returns The editor state\n   */ getEditorState() {\n        return this._editorState;\n    }\n    /**\n   * Imperatively set the EditorState. Triggers reconciliation like an update.\n   * @param editorState - the state to set the editor\n   * @param options - options for the update.\n   */ setEditorState(editorState, options) {\n        if (editorState.isEmpty()) throw Error(`setEditorState: the editor state is empty. Ensure the editor state's root node never becomes empty.`);\n        $03df355ea183d08a$var$flushRootMutations(this);\n        const pendingEditorState = this._pendingEditorState;\n        const tags = this._updateTags;\n        const tag = options !== undefined ? options.tag : null;\n        if (pendingEditorState !== null && !pendingEditorState.isEmpty()) {\n            if (tag != null) tags.add(tag);\n            $03df355ea183d08a$var$commitPendingUpdates(this);\n        }\n        this._pendingEditorState = editorState;\n        this._dirtyType = $03df355ea183d08a$var$FULL_RECONCILE;\n        this._dirtyElements.set(\"root\", false);\n        this._compositionKey = null;\n        if (tag != null) tags.add(tag);\n        $03df355ea183d08a$var$commitPendingUpdates(this);\n    }\n    /**\n   * Parses a SerializedEditorState (usually produced by {@link EditorState.toJSON}) and returns\n   * and EditorState object that can be, for example, passed to {@link LexicalEditor.setEditorState}. Typically,\n   * deserliazation from JSON stored in a database uses this method.\n   * @param maybeStringifiedEditorState\n   * @param updateFn\n   * @returns\n   */ parseEditorState(maybeStringifiedEditorState, updateFn) {\n        const serializedEditorState = typeof maybeStringifiedEditorState === \"string\" ? JSON.parse(maybeStringifiedEditorState) : maybeStringifiedEditorState;\n        return $03df355ea183d08a$var$parseEditorState(serializedEditorState, this, updateFn);\n    }\n    /**\n   * Executes an update to the editor state. The updateFn callback is the ONLY place\n   * where Lexical editor state can be safely mutated.\n   * @param updateFn - A function that has access to writable editor state.\n   * @param options - A bag of options to control the behavior of the update.\n   * @param options.onUpdate - A function to run once the update is complete.\n   * Useful for synchronizing updates in some cases.\n   * @param options.skipTransforms - Setting this to true will suppress all node\n   * transforms for this update cycle.\n   * @param options.tag - A tag to identify this update, in an update listener, for instance.\n   * Some tags are reserved by the core and control update behavior in different ways.\n   * @param options.discrete - If true, prevents this update from being batched, forcing it to\n   * run synchronously.\n   */ update(updateFn, options) {\n        $03df355ea183d08a$var$updateEditor(this, updateFn, options);\n    }\n    /**\n   * Focuses the editor\n   * @param callbackFn - A function to run after the editor is focused.\n   * @param options - A bag of options\n   * @param options.defaultSelection - Where to move selection when the editor is\n   * focused. Can be rootStart, rootEnd, or undefined. Defaults to rootEnd.\n   */ focus(callbackFn, options = {}) {\n        const rootElement = this._rootElement;\n        if (rootElement !== null) {\n            // This ensures that iOS does not trigger caps lock upon focus\n            rootElement.setAttribute(\"autocapitalize\", \"off\");\n            $03df355ea183d08a$var$updateEditor(this, ()=>{\n                const selection = $03df355ea183d08a$var$$getSelection();\n                const root = $03df355ea183d08a$var$$getRoot();\n                if (selection !== null) // Marking the selection dirty will force the selection back to it\n                selection.dirty = true;\n                else if (root.getChildrenSize() !== 0) {\n                    if (options.defaultSelection === \"rootStart\") root.selectStart();\n                    else root.selectEnd();\n                }\n            }, {\n                onUpdate: ()=>{\n                    rootElement.removeAttribute(\"autocapitalize\");\n                    if (callbackFn) callbackFn();\n                }\n            }); // In the case where onUpdate doesn't fire (due to the focus update not\n            // occuring).\n            if (this._pendingEditorState === null) rootElement.removeAttribute(\"autocapitalize\");\n        }\n    }\n    /**\n   * Removes focus from the editor.\n   */ blur() {\n        const rootElement = this._rootElement;\n        if (rootElement !== null) rootElement.blur();\n        const domSelection = $03df355ea183d08a$var$getDOMSelection(this._window);\n        if (domSelection !== null) domSelection.removeAllRanges();\n    }\n    /**\n   * Returns true if the editor is editable, false otherwise.\n   * @returns True if the editor is editable, false otherwise.\n   */ isEditable() {\n        return this._editable;\n    }\n    /**\n   * Sets the editable property of the editor. When false, the\n   * editor will not listen for user events on the underling contenteditable.\n   * @param editable - the value to set the editable mode to.\n   */ setEditable(editable) {\n        if (this._editable !== editable) {\n            this._editable = editable;\n            $03df355ea183d08a$var$triggerListeners(\"editable\", this, true, editable);\n        }\n    }\n    /**\n   * Returns a JSON-serializable javascript object NOT a JSON string.\n   * You still must call JSON.stringify (or something else) to turn the\n   * state into a string you can transfer over the wire and store in a database.\n   *\n   * See {@link LexicalNode.exportJSON}\n   *\n   * @returns A JSON-serializable javascript object\n   */ toJSON() {\n        return {\n            editorState: this._editorState.toJSON()\n        };\n    }\n    /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ constructor(editorState, parentEditor, nodes, config, onError, htmlConversions, editable){\n        this._parentEditor = parentEditor; // The root element associated with this editor\n        this._rootElement = null; // The current editor state\n        this._editorState = editorState; // Handling of drafts and updates\n        this._pendingEditorState = null; // Used to help co-ordinate selection and events\n        this._compositionKey = null;\n        this._deferred = []; // Used during reconciliation\n        this._keyToDOMMap = new Map();\n        this._updates = [];\n        this._updating = false; // Listeners\n        this._listeners = {\n            decorator: new Set(),\n            editable: new Set(),\n            mutation: new Map(),\n            root: new Set(),\n            textcontent: new Set(),\n            update: new Set()\n        }; // Commands\n        this._commands = new Map(); // Editor configuration for theme/context.\n        this._config = config; // Mapping of types to their nodes\n        this._nodes = nodes; // React node decorators for portals\n        this._decorators = {};\n        this._pendingDecorators = null; // Used to optimize reconciliation\n        this._dirtyType = $03df355ea183d08a$var$NO_DIRTY_NODES;\n        this._cloneNotNeeded = new Set();\n        this._dirtyLeaves = new Set();\n        this._dirtyElements = new Map();\n        this._normalizedNodes = new Set();\n        this._updateTags = new Set(); // Handling of DOM mutations\n        this._observer = null; // Used for identifying owning editors\n        this._key = $03df355ea183d08a$var$createUID();\n        this._onError = onError;\n        this._htmlConversions = htmlConversions; // We don't actually make use of the `editable` argument above.\n        // Doing so, causes e2e tests around the lock to fail.\n        this._editable = true;\n        this._headless = parentEditor !== null && parentEditor._headless;\n        this._window = null;\n        this._blockCursorElement = null;\n    }\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ /** @noInheritDoc */ class $03df355ea183d08a$var$DEPRECATED_GridCellNode extends $03df355ea183d08a$var$ElementNode {\n    exportJSON() {\n        return {\n            ...super.exportJSON(),\n            colSpan: this.__colSpan\n        };\n    }\n    setColSpan(colSpan) {\n        this.getWritable().__colSpan = colSpan;\n        return this;\n    }\n    setRowSpan(rowSpan) {\n        this.getWritable().__rowSpan = rowSpan;\n        return this;\n    }\n    /** @internal */ constructor(colSpan, key){\n        super(key);\n        this.__colSpan = colSpan;\n        this.__rowSpan = 1;\n    }\n}\nfunction $03df355ea183d08a$var$DEPRECATED_$isGridCellNode(node) {\n    return node instanceof $03df355ea183d08a$var$DEPRECATED_GridCellNode;\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ class $03df355ea183d08a$var$DEPRECATED_GridNode extends $03df355ea183d08a$var$ElementNode {\n}\nfunction $03df355ea183d08a$var$DEPRECATED_$isGridNode(node) {\n    return node instanceof $03df355ea183d08a$var$DEPRECATED_GridNode;\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ class $03df355ea183d08a$var$DEPRECATED_GridRowNode extends $03df355ea183d08a$var$ElementNode {\n}\nfunction $03df355ea183d08a$var$DEPRECATED_$isGridRowNode(node) {\n    return node instanceof $03df355ea183d08a$var$DEPRECATED_GridRowNode;\n}\n$03df355ea183d08a$export$24cab2f466b76c04 = $03df355ea183d08a$var$$addUpdateTag;\n$03df355ea183d08a$export$2f5beb31df92ea57 = $03df355ea183d08a$var$$applyNodeReplacement;\n$03df355ea183d08a$export$def73b17b22438e7 = $03df355ea183d08a$var$$copyNode;\n$03df355ea183d08a$export$4ccaf7d0d16ab4c = $03df355ea183d08a$var$$createLineBreakNode;\n$03df355ea183d08a$export$f8cd0c3f35d1a61c = $03df355ea183d08a$var$$createNodeSelection;\n$03df355ea183d08a$export$7f0c05ffb7ced90d = $03df355ea183d08a$var$$createParagraphNode;\n$03df355ea183d08a$export$1ccc217b9831b072 = $03df355ea183d08a$var$$createRangeSelection;\n$03df355ea183d08a$export$2785f39dcdec0078 = $03df355ea183d08a$var$$createTextNode;\n$03df355ea183d08a$export$c4b907be1879d8c1 = $03df355ea183d08a$var$$getAdjacentNode;\n$03df355ea183d08a$export$fef265f0d2fcffdd = $03df355ea183d08a$var$$getNearestNodeFromDOMNode;\n$03df355ea183d08a$export$6f13c476561e4734 = $03df355ea183d08a$var$$getNearestRootOrShadowRoot;\n$03df355ea183d08a$export$e725f93d4d48c6d8 = $03df355ea183d08a$var$$getNodeByKey;\n$03df355ea183d08a$export$846e9407a8b5d98c = $03df355ea183d08a$var$$getPreviousSelection;\n$03df355ea183d08a$export$8d83ea843c4eea9a = $03df355ea183d08a$var$$getRoot;\n$03df355ea183d08a$export$63a3201b3a5c7d90 = $03df355ea183d08a$var$$getSelection;\n$03df355ea183d08a$export$2d96f9a07231d1b9 = $03df355ea183d08a$var$$getTextContent;\n$03df355ea183d08a$export$e3d4b782f65c81f1 = $03df355ea183d08a$var$$hasAncestor;\n$03df355ea183d08a$export$d773017360b45449 = $03df355ea183d08a$var$$insertNodes;\n$03df355ea183d08a$export$60aa03725ce41b1c = $03df355ea183d08a$var$$isDecoratorNode;\n$03df355ea183d08a$export$923a058ef54437a4 = $03df355ea183d08a$var$$isElementNode;\n$03df355ea183d08a$export$a78813a4e8e8b9dd = $03df355ea183d08a$var$$isInlineElementOrDecoratorNode;\n$03df355ea183d08a$export$8d016e0592201ace = $03df355ea183d08a$var$$isLeafNode;\n$03df355ea183d08a$export$b16330e40aa25c4e = $03df355ea183d08a$var$$isLineBreakNode;\n$03df355ea183d08a$export$7257e4181651a7c3 = $03df355ea183d08a$var$$isNodeSelection;\n$03df355ea183d08a$export$1fdda795300c79c6 = $03df355ea183d08a$var$$isParagraphNode;\n$03df355ea183d08a$export$181b63acea8a0224 = $03df355ea183d08a$var$$isRangeSelection;\n$03df355ea183d08a$export$5b29ca560c2fedab = $03df355ea183d08a$var$$isRootNode;\n$03df355ea183d08a$export$6f851a24c61146af = $03df355ea183d08a$var$$isRootOrShadowRoot;\n$03df355ea183d08a$export$471953706258be2b = $03df355ea183d08a$var$$isTextNode;\n$03df355ea183d08a$export$ac6fed8d7d40e66c = $03df355ea183d08a$var$$nodesOfType;\n$03df355ea183d08a$export$db10bc6ba67ffcb5 = $03df355ea183d08a$var$$normalizeSelection;\n$03df355ea183d08a$export$e1d3a194df5be556 = $03df355ea183d08a$var$$parseSerializedNode;\n$03df355ea183d08a$export$ea25f5ef71f2d042 = $03df355ea183d08a$var$$setCompositionKey;\n$03df355ea183d08a$export$2aad78c37810bca9 = $03df355ea183d08a$var$$setSelection;\n$03df355ea183d08a$export$cc2d53c74c1fb2b2 = $03df355ea183d08a$var$$splitNode;\n$03df355ea183d08a$export$4b6d457d076906ac = $03df355ea183d08a$var$BLUR_COMMAND;\n$03df355ea183d08a$export$e36aacf84f559bb3 = $03df355ea183d08a$var$CAN_REDO_COMMAND;\n$03df355ea183d08a$export$9fd9dd31dd6ebdf5 = $03df355ea183d08a$var$CAN_UNDO_COMMAND;\n$03df355ea183d08a$export$4926ce1a5702fdc7 = $03df355ea183d08a$var$CLEAR_EDITOR_COMMAND;\n$03df355ea183d08a$export$d3f69a65bbe7edc = $03df355ea183d08a$var$CLEAR_HISTORY_COMMAND;\n$03df355ea183d08a$export$c1a2de6c823e5f82 = $03df355ea183d08a$var$CLICK_COMMAND;\n$03df355ea183d08a$export$6afdf194f304e546 = $03df355ea183d08a$var$COMMAND_PRIORITY_CRITICAL;\n$03df355ea183d08a$export$11c61e12af5e1f41 = $03df355ea183d08a$var$COMMAND_PRIORITY_EDITOR;\n$03df355ea183d08a$export$e8fb7042985cd2e9 = $03df355ea183d08a$var$COMMAND_PRIORITY_HIGH;\n$03df355ea183d08a$export$1d1358fe8b5bfab4 = $03df355ea183d08a$var$COMMAND_PRIORITY_LOW;\n$03df355ea183d08a$export$7bb13e375de35064 = $03df355ea183d08a$var$COMMAND_PRIORITY_NORMAL;\n$03df355ea183d08a$export$6f67c758bb657857 = $03df355ea183d08a$var$CONTROLLED_TEXT_INSERTION_COMMAND;\n$03df355ea183d08a$export$3435fcfb1f59ef96 = $03df355ea183d08a$var$COPY_COMMAND;\n$03df355ea183d08a$export$4dc8a35a083beec4 = $03df355ea183d08a$var$CUT_COMMAND;\n$03df355ea183d08a$export$35595bf6d7e36fd5 = $03df355ea183d08a$var$DELETE_CHARACTER_COMMAND;\n$03df355ea183d08a$export$d77fad8fb8747fd = $03df355ea183d08a$var$DELETE_LINE_COMMAND;\n$03df355ea183d08a$export$8e315b175631384c = $03df355ea183d08a$var$DELETE_WORD_COMMAND;\n$03df355ea183d08a$export$3c62f6ea1bcc0126 = $03df355ea183d08a$var$DEPRECATED_$createGridSelection;\n$03df355ea183d08a$export$512956df40f3b40e = $03df355ea183d08a$var$DEPRECATED_$isGridCellNode;\n$03df355ea183d08a$export$5f4fd2bb79122677 = $03df355ea183d08a$var$DEPRECATED_$isGridNode;\n$03df355ea183d08a$export$6409391dce4c0f48 = $03df355ea183d08a$var$DEPRECATED_$isGridRowNode;\n$03df355ea183d08a$export$d3f36a5fb5c9efe5 = $03df355ea183d08a$var$DEPRECATED_$isGridSelection;\n$03df355ea183d08a$export$e284ef4eccc325c5 = $03df355ea183d08a$var$DEPRECATED_GridCellNode;\n$03df355ea183d08a$export$5627752ddf7eed41 = $03df355ea183d08a$var$DEPRECATED_GridNode;\n$03df355ea183d08a$export$8c09d9a078ea3c2f = $03df355ea183d08a$var$DEPRECATED_GridRowNode;\n$03df355ea183d08a$export$ffbd838cf75d7d8e = $03df355ea183d08a$var$DRAGEND_COMMAND;\n$03df355ea183d08a$export$b62c1cce98fa7223 = $03df355ea183d08a$var$DRAGOVER_COMMAND;\n$03df355ea183d08a$export$2e0fd45fde1da719 = $03df355ea183d08a$var$DRAGSTART_COMMAND;\n$03df355ea183d08a$export$eac1e4b16b80d3ea = $03df355ea183d08a$var$DROP_COMMAND;\n$03df355ea183d08a$export$8244b9efe04488e = $03df355ea183d08a$var$DecoratorNode;\n$03df355ea183d08a$export$dc064fe9e59310fd = $03df355ea183d08a$var$ElementNode;\n$03df355ea183d08a$export$cafe35f35e77bf56 = $03df355ea183d08a$var$FOCUS_COMMAND;\n$03df355ea183d08a$export$d394dc6514823b18 = $03df355ea183d08a$var$FORMAT_ELEMENT_COMMAND;\n$03df355ea183d08a$export$85443a1a9543f043 = $03df355ea183d08a$var$FORMAT_TEXT_COMMAND;\n$03df355ea183d08a$export$2f74f6a2d927e6bd = $03df355ea183d08a$var$INDENT_CONTENT_COMMAND;\n$03df355ea183d08a$export$64e35ce26e025724 = $03df355ea183d08a$var$INSERT_LINE_BREAK_COMMAND;\n$03df355ea183d08a$export$24f4fea65b096b4 = $03df355ea183d08a$var$INSERT_PARAGRAPH_COMMAND;\n$03df355ea183d08a$export$baa60daa2ca402b3 = $03df355ea183d08a$var$KEY_ARROW_DOWN_COMMAND;\n$03df355ea183d08a$export$7525f8f8ab44508 = $03df355ea183d08a$var$KEY_ARROW_LEFT_COMMAND;\n$03df355ea183d08a$export$217ec2281ac1c53b = $03df355ea183d08a$var$KEY_ARROW_RIGHT_COMMAND;\n$03df355ea183d08a$export$7833c2a33ae81d3d = $03df355ea183d08a$var$KEY_ARROW_UP_COMMAND;\n$03df355ea183d08a$export$24bbba9bfa830f78 = $03df355ea183d08a$var$KEY_BACKSPACE_COMMAND;\n$03df355ea183d08a$export$13a0e72b5c0146bb = $03df355ea183d08a$var$KEY_DELETE_COMMAND;\n$03df355ea183d08a$export$61973214e0e18936 = $03df355ea183d08a$var$KEY_DOWN_COMMAND;\n$03df355ea183d08a$export$2cdb7cdd6fccb293 = $03df355ea183d08a$var$KEY_ENTER_COMMAND;\n$03df355ea183d08a$export$53589e422a755d59 = $03df355ea183d08a$var$KEY_ESCAPE_COMMAND;\n$03df355ea183d08a$export$452548a3c1874d61 = $03df355ea183d08a$var$KEY_MODIFIER_COMMAND;\n$03df355ea183d08a$export$d0bc2bb647ce4c17 = $03df355ea183d08a$var$KEY_SPACE_COMMAND;\n$03df355ea183d08a$export$b321bdc226ccdcde = $03df355ea183d08a$var$KEY_TAB_COMMAND;\n$03df355ea183d08a$export$965f56e8043e93ae = $03df355ea183d08a$var$LineBreakNode;\n$03df355ea183d08a$export$fb3b2d438650aff6 = $03df355ea183d08a$var$MOVE_TO_END;\n$03df355ea183d08a$export$dc117ee4d661295a = $03df355ea183d08a$var$MOVE_TO_START;\n$03df355ea183d08a$export$ecf9caa19e96e40d = $03df355ea183d08a$var$OUTDENT_CONTENT_COMMAND;\n$03df355ea183d08a$export$7fb70c61b3bcc883 = $03df355ea183d08a$var$PASTE_COMMAND;\n$03df355ea183d08a$export$e94424771493b912 = $03df355ea183d08a$var$ParagraphNode;\n$03df355ea183d08a$export$8c4a0748d31d9941 = $03df355ea183d08a$var$REDO_COMMAND;\n$03df355ea183d08a$export$9cc285f2a3ff220c = $03df355ea183d08a$var$REMOVE_TEXT_COMMAND;\n$03df355ea183d08a$export$1c180cb67301903c = $03df355ea183d08a$var$RootNode;\n$03df355ea183d08a$export$e396fef71d2b56e5 = $03df355ea183d08a$var$SELECTION_CHANGE_COMMAND;\n$03df355ea183d08a$export$f0a25ea3087686aa = $03df355ea183d08a$var$TextNode;\n$03df355ea183d08a$export$34722a4946cb641e = $03df355ea183d08a$var$UNDO_COMMAND;\n$03df355ea183d08a$export$8d4021544bdece00 = $03df355ea183d08a$var$createCommand;\n$03df355ea183d08a$export$eb02d1ee0d3cac30 = $03df355ea183d08a$var$createEditor;\n$03df355ea183d08a$export$f1b377b21cd6350b = $03df355ea183d08a$var$isSelectionWithinEditor;\n\n\n//# sourceMappingURL=Lexical.umd.prod.js.map\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,data:application/json;charset=utf-8;base64,eyJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7OztDQUtDLEdBQ0QsQUFncVZBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFD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MkNBQThCO0FBQzlCLDRDQUE4QjtBQUM5Qiw0Q0FBMEM7QUFDMUMsNENBQXFDO0FBQ3JDLDRDQUFpQztBQUNqQyw0Q0FBb0M7QUFDcEMsNENBQXNDO0FBQ3RDLDRDQUFrQztBQUNsQyw0Q0FBOEI7QUFDOUIsNENBQWlDO0FBQ2pDLDRDQUEwQjtBQUMxQiw0Q0FBMkI7QUFDM0IsNENBQTRCO0FBQzVCLDRDQUF1QjtBQUN2QiwyQ0FBd0I7QUFDeEIsNENBQXNCO0FBQ3RCLDRDQUF3QjtBQUN4Qiw0Q0FBaUM7QUFDakMsNENBQThCO0FBQzlCLDRDQUFpQztBQUNqQyw0Q0FBb0M7QUFDcEMsMkNBQW1DO0FBQ25DLDRDQUFpQztBQUNqQywyQ0FBaUM7QUFDakMsNENBQWtDO0FBQ2xDLDRDQUErQjtBQUMvQiw0Q0FBZ0M7QUFDaEMsNENBQTZCO0FBQzdCLDRDQUEyQjtBQUMzQiw0Q0FBNEI7QUFDNUIsNENBQTZCO0FBQzdCLDRDQUErQjtBQUMvQiw0Q0FBNEI7QUFDNUIsNENBQTBCO0FBQzFCLDRDQUF3QjtBQUN4Qiw0Q0FBc0I7QUFDdEIsNENBQXdCO0FBQ3hCLDRDQUFrQztBQUNsQyw0Q0FBd0I7QUFDeEIsNENBQXdCO0FBQ3hCLDRDQUF1QjtBQUN2Qiw0Q0FBOEI7QUFDOUIsNENBQW1CO0FBQ25CLDRDQUFtQztBQUNuQyw0Q0FBbUI7QUFDbkIsNENBQXVCO0FBQ3ZCLDRDQUF3QjtBQUN4Qiw0Q0FBdUI7QUFDdkIsNENBQWtDIiwic291cmNlcyI6WyJzcmMvTGV4aWNhbC5kZXYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUNvbW1hbmQodHlwZSkge1xuICByZXR1cm4ge1xuICAgIHR5cGVcbiAgfSA7XG59XG5jb25zdCBTRUxFQ1RJT05fQ0hBTkdFX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdTRUxFQ1RJT05fQ0hBTkdFX0NPTU1BTkQnKTtcbmNvbnN0IENMSUNLX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdDTElDS19DT01NQU5EJyk7XG5jb25zdCBERUxFVEVfQ0hBUkFDVEVSX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdERUxFVEVfQ0hBUkFDVEVSX0NPTU1BTkQnKTtcbmNvbnN0IElOU0VSVF9MSU5FX0JSRUFLX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdJTlNFUlRfTElORV9CUkVBS19DT01NQU5EJyk7XG5jb25zdCBJTlNFUlRfUEFSQUdSQVBIX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdJTlNFUlRfUEFSQUdSQVBIX0NPTU1BTkQnKTtcbmNvbnN0IENPTlRST0xMRURfVEVYVF9JTlNFUlRJT05fQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ0NPTlRST0xMRURfVEVYVF9JTlNFUlRJT05fQ09NTUFORCcpO1xuY29uc3QgUEFTVEVfQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ1BBU1RFX0NPTU1BTkQnKTtcbmNvbnN0IFJFTU9WRV9URVhUX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdSRU1PVkVfVEVYVF9DT01NQU5EJyk7XG5jb25zdCBERUxFVEVfV09SRF9DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnREVMRVRFX1dPUkRfQ09NTUFORCcpO1xuY29uc3QgREVMRVRFX0xJTkVfQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ0RFTEVURV9MSU5FX0NPTU1BTkQnKTtcbmNvbnN0IEZPUk1BVF9URVhUX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdGT1JNQVRfVEVYVF9DT01NQU5EJyk7XG5jb25zdCBVTkRPX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdVTkRPX0NPTU1BTkQnKTtcbmNvbnN0IFJFRE9fQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ1JFRE9fQ09NTUFORCcpO1xuY29uc3QgS0VZX0RPV05fQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ0tFWURPV05fQ09NTUFORCcpO1xuY29uc3QgS0VZX0FSUk9XX1JJR0hUX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdLRVlfQVJST1dfUklHSFRfQ09NTUFORCcpO1xuY29uc3QgTU9WRV9UT19FTkQgPSBjcmVhdGVDb21tYW5kKCdNT1ZFX1RPX0VORCcpO1xuY29uc3QgS0VZX0FSUk9XX0xFRlRfQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ0tFWV9BUlJPV19MRUZUX0NPTU1BTkQnKTtcbmNvbnN0IE1PVkVfVE9fU1RBUlQgPSBjcmVhdGVDb21tYW5kKCdNT1ZFX1RPX1NUQVJUJyk7XG5jb25zdCBLRVlfQVJST1dfVVBfQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ0tFWV9BUlJPV19VUF9DT01NQU5EJyk7XG5jb25zdCBLRVlfQVJST1dfRE9XTl9DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnS0VZX0FSUk9XX0RPV05fQ09NTUFORCcpO1xuY29uc3QgS0VZX0VOVEVSX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdLRVlfRU5URVJfQ09NTUFORCcpO1xuY29uc3QgS0VZX1NQQUNFX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdLRVlfU1BBQ0VfQ09NTUFORCcpO1xuY29uc3QgS0VZX0JBQ0tTUEFDRV9DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnS0VZX0JBQ0tTUEFDRV9DT01NQU5EJyk7XG5jb25zdCBLRVlfRVNDQVBFX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdLRVlfRVNDQVBFX0NPTU1BTkQnKTtcbmNvbnN0IEtFWV9ERUxFVEVfQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ0tFWV9ERUxFVEVfQ09NTUFORCcpO1xuY29uc3QgS0VZX1RBQl9DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnS0VZX1RBQl9DT01NQU5EJyk7XG5jb25zdCBJTkRFTlRfQ09OVEVOVF9DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnSU5ERU5UX0NPTlRFTlRfQ09NTUFORCcpO1xuY29uc3QgT1VUREVOVF9DT05URU5UX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdPVVRERU5UX0NPTlRFTlRfQ09NTUFORCcpO1xuY29uc3QgRFJPUF9DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnRFJPUF9DT01NQU5EJyk7XG5jb25zdCBGT1JNQVRfRUxFTUVOVF9DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnRk9STUFUX0VMRU1FTlRfQ09NTUFORCcpO1xuY29uc3QgRFJBR1NUQVJUX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdEUkFHU1RBUlRfQ09NTUFORCcpO1xuY29uc3QgRFJBR09WRVJfQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ0RSQUdPVkVSX0NPTU1BTkQnKTtcbmNvbnN0IERSQUdFTkRfQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ0RSQUdFTkRfQ09NTUFORCcpO1xuY29uc3QgQ09QWV9DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnQ09QWV9DT01NQU5EJyk7XG5jb25zdCBDVVRfQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ0NVVF9DT01NQU5EJyk7XG5jb25zdCBDTEVBUl9FRElUT1JfQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ0NMRUFSX0VESVRPUl9DT01NQU5EJyk7XG5jb25zdCBDTEVBUl9ISVNUT1JZX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdDTEVBUl9ISVNUT1JZX0NPTU1BTkQnKTtcbmNvbnN0IENBTl9SRURPX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdDQU5fUkVET19DT01NQU5EJyk7XG5jb25zdCBDQU5fVU5ET19DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnQ0FOX1VORE9fQ09NTUFORCcpO1xuY29uc3QgRk9DVVNfQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ0ZPQ1VTX0NPTU1BTkQnKTtcbmNvbnN0IEJMVVJfQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ0JMVVJfQ09NTUFORCcpO1xuY29uc3QgS0VZX01PRElGSUVSX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdLRVlfTU9ESUZJRVJfQ09NTUFORCcpO1xuXG4vKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5jb25zdCBDQU5fVVNFX0RPTSA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cuZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCc7XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cbmNvbnN0IGRvY3VtZW50TW9kZSA9IENBTl9VU0VfRE9NICYmICdkb2N1bWVudE1vZGUnIGluIGRvY3VtZW50ID8gZG9jdW1lbnQuZG9jdW1lbnRNb2RlIDogbnVsbDtcbmNvbnN0IElTX0FQUExFID0gQ0FOX1VTRV9ET00gJiYgL01hY3xpUG9kfGlQaG9uZXxpUGFkLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSk7XG5jb25zdCBJU19GSVJFRk9YID0gQ0FOX1VTRV9ET00gJiYgL14oPyEuKlNlYW1vbmtleSkoPz0uKkZpcmVmb3gpLiovaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuY29uc3QgQ0FOX1VTRV9CRUZPUkVfSU5QVVQgPSBDQU5fVVNFX0RPTSAmJiAnSW5wdXRFdmVudCcgaW4gd2luZG93ICYmICFkb2N1bWVudE1vZGUgPyAnZ2V0VGFyZ2V0UmFuZ2VzJyBpbiBuZXcgd2luZG93LklucHV0RXZlbnQoJ2lucHV0JykgOiBmYWxzZTtcbmNvbnN0IElTX1NBRkFSSSA9IENBTl9VU0VfRE9NICYmIC9WZXJzaW9uXFwvW1xcZC5dKy4qU2FmYXJpLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuY29uc3QgSVNfSU9TID0gQ0FOX1VTRV9ET00gJiYgL2lQYWR8aVBob25lfGlQb2QvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiYgIXdpbmRvdy5NU1N0cmVhbTsgLy8gS2VlcCB0aGVzZSBpbiBjYXNlIHdlIG5lZWQgdG8gdXNlIHRoZW0gaW4gdGhlIGZ1dHVyZS5cbi8vIGV4cG9ydCBjb25zdCBJU19XSU5ET1dTOiBib29sZWFuID0gQ0FOX1VTRV9ET00gJiYgL1dpbi8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pO1xuXG5jb25zdCBJU19DSFJPTUUgPSBDQU5fVVNFX0RPTSAmJiAvXig/PS4qQ2hyb21lKS4qL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTsgLy8gZXhwb3J0IGNvbnN0IGNhblVzZVRleHRJbnB1dEV2ZW50OiBib29sZWFuID0gQ0FOX1VTRV9ET00gJiYgJ1RleHRFdmVudCcgaW4gd2luZG93ICYmICFkb2N1bWVudE1vZGU7XG5cbmNvbnN0IElTX0FQUExFX1dFQktJVCA9IENBTl9VU0VfRE9NICYmIC9BcHBsZVdlYktpdFxcL1tcXGQuXSsvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiYgIUlTX0NIUk9NRTtcblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xuXG5jb25zdCBET01fRUxFTUVOVF9UWVBFID0gMTtcbmNvbnN0IERPTV9URVhUX1RZUEUgPSAzOyAvLyBSZWNvbmNpbGluZ1xuXG5jb25zdCBOT19ESVJUWV9OT0RFUyA9IDA7XG5jb25zdCBIQVNfRElSVFlfTk9ERVMgPSAxO1xuY29uc3QgRlVMTF9SRUNPTkNJTEUgPSAyOyAvLyBUZXh0IG5vZGUgbW9kZXNcblxuY29uc3QgSVNfTk9STUFMID0gMDtcbmNvbnN0IElTX1RPS0VOID0gMTtcbmNvbnN0IElTX1NFR01FTlRFRCA9IDI7IC8vIElTX0lORVJUID0gM1xuLy8gVGV4dCBub2RlIGZvcm1hdHRpbmdcblxuY29uc3QgSVNfQk9MRCA9IDE7XG5jb25zdCBJU19JVEFMSUMgPSAxIDw8IDE7XG5jb25zdCBJU19TVFJJS0VUSFJPVUdIID0gMSA8PCAyO1xuY29uc3QgSVNfVU5ERVJMSU5FID0gMSA8PCAzO1xuY29uc3QgSVNfQ09ERSA9IDEgPDwgNDtcbmNvbnN0IElTX1NVQlNDUklQVCA9IDEgPDwgNTtcbmNvbnN0IElTX1NVUEVSU0NSSVBUID0gMSA8PCA2O1xuY29uc3QgSVNfSElHSExJR0hUID0gMSA8PCA3O1xuY29uc3QgSVNfQUxMX0ZPUk1BVFRJTkcgPSBJU19CT0xEIHwgSVNfSVRBTElDIHwgSVNfU1RSSUtFVEhST1VHSCB8IElTX1VOREVSTElORSB8IElTX0NPREUgfCBJU19TVUJTQ1JJUFQgfCBJU19TVVBFUlNDUklQVCB8IElTX0hJR0hMSUdIVDsgLy8gVGV4dCBub2RlIGRldGFpbHNcblxuY29uc3QgSVNfRElSRUNUSU9OTEVTUyA9IDE7XG5jb25zdCBJU19VTk1FUkdFQUJMRSA9IDEgPDwgMTsgLy8gRWxlbWVudCBub2RlIGZvcm1hdHRpbmdcblxuY29uc3QgSVNfQUxJR05fTEVGVCA9IDE7XG5jb25zdCBJU19BTElHTl9DRU5URVIgPSAyO1xuY29uc3QgSVNfQUxJR05fUklHSFQgPSAzO1xuY29uc3QgSVNfQUxJR05fSlVTVElGWSA9IDQ7XG5jb25zdCBJU19BTElHTl9TVEFSVCA9IDU7XG5jb25zdCBJU19BTElHTl9FTkQgPSA2OyAvLyBSZWNvbmNpbGlhdGlvblxuXG5jb25zdCBOT05fQlJFQUtJTkdfU1BBQ0UgPSAnXFx1MDBBMCc7XG5jb25zdCBaRVJPX1dJRFRIX1NQQUNFID0gJ1xcdTIwMGInOyAvLyBGb3IgaU9TL1NhZmFyaSB3ZSB1c2UgYSBub24gYnJlYWtpbmcgc3BhY2UsIG90aGVyd2lzZSB0aGUgY3Vyc29yIGFwcGVhcnNcbi8vIG92ZXJsYXBwaW5nIHRoZSBjb21wb3NlZCB0ZXh0LlxuXG5jb25zdCBDT01QT1NJVElPTl9TVUZGSVggPSBJU19TQUZBUkkgfHwgSVNfSU9TIHx8IElTX0FQUExFX1dFQktJVCA/IE5PTl9CUkVBS0lOR19TUEFDRSA6IFpFUk9fV0lEVEhfU1BBQ0U7XG5jb25zdCBET1VCTEVfTElORV9CUkVBSyA9ICdcXG5cXG4nOyAvLyBGb3IgRkYsIHdlIG5lZWQgdG8gdXNlIGEgbm9uLWJyZWFraW5nIHNwYWNlLCBvciBpdCBnZXRzIGNvbXBvc2l0aW9uXG4vLyBpbiBhIHN0dWNrIHN0YXRlLlxuXG5jb25zdCBDT01QT1NJVElPTl9TVEFSVF9DSEFSID0gSVNfRklSRUZPWCA/IE5PTl9CUkVBS0lOR19TUEFDRSA6IENPTVBPU0lUSU9OX1NVRkZJWDtcbmNvbnN0IFJUTCA9ICdcXHUwNTkxLVxcdTA3RkZcXHVGQjFELVxcdUZERkRcXHVGRTcwLVxcdUZFRkMnO1xuY29uc3QgTFRSID0gJ0EtWmEtelxcdTAwQzAtXFx1MDBENlxcdTAwRDgtXFx1MDBGNicgKyAnXFx1MDBGOC1cXHUwMkI4XFx1MDMwMC1cXHUwNTkwXFx1MDgwMC1cXHUxRkZGXFx1MjAwRVxcdTJDMDAtXFx1RkIxQycgKyAnXFx1RkUwMC1cXHVGRTZGXFx1RkVGRC1cXHVGRkZGJzsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW1pc2xlYWRpbmctY2hhcmFjdGVyLWNsYXNzXG5cbmNvbnN0IFJUTF9SRUdFWCA9IG5ldyBSZWdFeHAoJ15bXicgKyBMVFIgKyAnXSpbJyArIFJUTCArICddJyk7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1taXNsZWFkaW5nLWNoYXJhY3Rlci1jbGFzc1xuXG5jb25zdCBMVFJfUkVHRVggPSBuZXcgUmVnRXhwKCdeW14nICsgUlRMICsgJ10qWycgKyBMVFIgKyAnXScpO1xuY29uc3QgVEVYVF9UWVBFX1RPX0ZPUk1BVCA9IHtcbiAgYm9sZDogSVNfQk9MRCxcbiAgY29kZTogSVNfQ09ERSxcbiAgaGlnaGxpZ2h0OiBJU19ISUdITElHSFQsXG4gIGl0YWxpYzogSVNfSVRBTElDLFxuICBzdHJpa2V0aHJvdWdoOiBJU19TVFJJS0VUSFJPVUdILFxuICBzdWJzY3JpcHQ6IElTX1NVQlNDUklQVCxcbiAgc3VwZXJzY3JpcHQ6IElTX1NVUEVSU0NSSVBULFxuICB1bmRlcmxpbmU6IElTX1VOREVSTElORVxufTtcbmNvbnN0IERFVEFJTF9UWVBFX1RPX0RFVEFJTCA9IHtcbiAgZGlyZWN0aW9ubGVzczogSVNfRElSRUNUSU9OTEVTUyxcbiAgdW5tZXJnZWFibGU6IElTX1VOTUVSR0VBQkxFXG59O1xuY29uc3QgRUxFTUVOVF9UWVBFX1RPX0ZPUk1BVCA9IHtcbiAgY2VudGVyOiBJU19BTElHTl9DRU5URVIsXG4gIGVuZDogSVNfQUxJR05fRU5ELFxuICBqdXN0aWZ5OiBJU19BTElHTl9KVVNUSUZZLFxuICBsZWZ0OiBJU19BTElHTl9MRUZULFxuICByaWdodDogSVNfQUxJR05fUklHSFQsXG4gIHN0YXJ0OiBJU19BTElHTl9TVEFSVFxufTtcbmNvbnN0IEVMRU1FTlRfRk9STUFUX1RPX1RZUEUgPSB7XG4gIFtJU19BTElHTl9DRU5URVJdOiAnY2VudGVyJyxcbiAgW0lTX0FMSUdOX0VORF06ICdlbmQnLFxuICBbSVNfQUxJR05fSlVTVElGWV06ICdqdXN0aWZ5JyxcbiAgW0lTX0FMSUdOX0xFRlRdOiAnbGVmdCcsXG4gIFtJU19BTElHTl9SSUdIVF06ICdyaWdodCcsXG4gIFtJU19BTElHTl9TVEFSVF06ICdzdGFydCdcbn07XG5jb25zdCBURVhUX01PREVfVE9fVFlQRSA9IHtcbiAgbm9ybWFsOiBJU19OT1JNQUwsXG4gIHNlZ21lbnRlZDogSVNfU0VHTUVOVEVELFxuICB0b2tlbjogSVNfVE9LRU5cbn07XG5jb25zdCBURVhUX1RZUEVfVE9fTU9ERSA9IHtcbiAgW0lTX05PUk1BTF06ICdub3JtYWwnLFxuICBbSVNfU0VHTUVOVEVEXTogJ3NlZ21lbnRlZCcsXG4gIFtJU19UT0tFTl06ICd0b2tlbidcbn07XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cblxuY29uc3QgVEVYVF9NVVRBVElPTl9WQVJJQU5DRSA9IDEwMDtcbmxldCBpc1Byb2Nlc3NpbmdNdXRhdGlvbnMgPSBmYWxzZTtcbmxldCBsYXN0VGV4dEVudHJ5VGltZVN0YW1wID0gMDtcbmZ1bmN0aW9uIGdldElzUHJvY2Vzc3NpbmdNdXRhdGlvbnMoKSB7XG4gIHJldHVybiBpc1Byb2Nlc3NpbmdNdXRhdGlvbnM7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVRpbWVTdGFtcChldmVudCkge1xuICBsYXN0VGV4dEVudHJ5VGltZVN0YW1wID0gZXZlbnQudGltZVN0YW1wO1xufVxuXG5mdW5jdGlvbiBpbml0VGV4dEVudHJ5TGlzdGVuZXIoZWRpdG9yKSB7XG4gIGlmIChsYXN0VGV4dEVudHJ5VGltZVN0YW1wID09PSAwKSB7XG4gICAgZ2V0V2luZG93KGVkaXRvcikuYWRkRXZlbnRMaXN0ZW5lcigndGV4dElucHV0JywgdXBkYXRlVGltZVN0YW1wLCB0cnVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc01hbmFnZWRMaW5lQnJlYWsoZG9tLCB0YXJnZXQsIGVkaXRvcikge1xuICByZXR1cm4gKC8vIEB0cy1leHBlY3QtZXJyb3I6IGludGVybmFsIGZpZWxkXG4gICAgdGFyZ2V0Ll9fbGV4aWNhbExpbmVCcmVhayA9PT0gZG9tIHx8IC8vIEB0cy1pZ25vcmUgV2UgaW50ZW50aW9uYWxseSBhZGQgdGhpcyB0byB0aGUgTm9kZS5cbiAgICBkb21bYF9fbGV4aWNhbEtleV8ke2VkaXRvci5fa2V5fWBdICE9PSB1bmRlZmluZWRcbiAgKTtcbn1cblxuZnVuY3Rpb24gZ2V0TGFzdFNlbGVjdGlvbihlZGl0b3IpIHtcbiAgcmV0dXJuIGVkaXRvci5nZXRFZGl0b3JTdGF0ZSgpLnJlYWQoKCkgPT4ge1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9ICRnZXRTZWxlY3Rpb24oKTtcbiAgICByZXR1cm4gc2VsZWN0aW9uICE9PSBudWxsID8gc2VsZWN0aW9uLmNsb25lKCkgOiBudWxsO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlVGV4dE11dGF0aW9uKHRhcmdldCwgbm9kZSwgZWRpdG9yKSB7XG4gIGNvbnN0IGRvbVNlbGVjdGlvbiA9IGdldERPTVNlbGVjdGlvbihlZGl0b3IuX3dpbmRvdyk7XG4gIGxldCBhbmNob3JPZmZzZXQgPSBudWxsO1xuICBsZXQgZm9jdXNPZmZzZXQgPSBudWxsO1xuXG4gIGlmIChkb21TZWxlY3Rpb24gIT09IG51bGwgJiYgZG9tU2VsZWN0aW9uLmFuY2hvck5vZGUgPT09IHRhcmdldCkge1xuICAgIGFuY2hvck9mZnNldCA9IGRvbVNlbGVjdGlvbi5hbmNob3JPZmZzZXQ7XG4gICAgZm9jdXNPZmZzZXQgPSBkb21TZWxlY3Rpb24uZm9jdXNPZmZzZXQ7XG4gIH1cblxuICBjb25zdCB0ZXh0ID0gdGFyZ2V0Lm5vZGVWYWx1ZTtcblxuICBpZiAodGV4dCAhPT0gbnVsbCkge1xuICAgICR1cGRhdGVUZXh0Tm9kZUZyb21ET01Db250ZW50KG5vZGUsIHRleHQsIGFuY2hvck9mZnNldCwgZm9jdXNPZmZzZXQsIGZhbHNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzaG91bGRVcGRhdGVUZXh0Tm9kZUZyb21NdXRhdGlvbihzZWxlY3Rpb24sIHRhcmdldERPTSwgdGFyZ2V0Tm9kZSkge1xuICBpZiAoJGlzUmFuZ2VTZWxlY3Rpb24oc2VsZWN0aW9uKSkge1xuICAgIGNvbnN0IGFuY2hvck5vZGUgPSBzZWxlY3Rpb24uYW5jaG9yLmdldE5vZGUoKTtcblxuICAgIGlmIChhbmNob3JOb2RlLmlzKHRhcmdldE5vZGUpICYmIHNlbGVjdGlvbi5mb3JtYXQgIT09IGFuY2hvck5vZGUuZ2V0Rm9ybWF0KCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0RE9NLm5vZGVUeXBlID09PSBET01fVEVYVF9UWVBFICYmIHRhcmdldE5vZGUuaXNBdHRhY2hlZCgpO1xufVxuXG5mdW5jdGlvbiAkZmx1c2hNdXRhdGlvbnMkMShlZGl0b3IsIG11dGF0aW9ucywgb2JzZXJ2ZXIpIHtcbiAgaXNQcm9jZXNzaW5nTXV0YXRpb25zID0gdHJ1ZTtcbiAgY29uc3Qgc2hvdWxkRmx1c2hUZXh0TXV0YXRpb25zID0gcGVyZm9ybWFuY2Uubm93KCkgLSBsYXN0VGV4dEVudHJ5VGltZVN0YW1wID4gVEVYVF9NVVRBVElPTl9WQVJJQU5DRTtcblxuICB0cnkge1xuICAgIHVwZGF0ZUVkaXRvcihlZGl0b3IsICgpID0+IHtcbiAgICAgIGNvbnN0IHNlbGVjdGlvbiA9ICRnZXRTZWxlY3Rpb24oKSB8fCBnZXRMYXN0U2VsZWN0aW9uKGVkaXRvcik7XG4gICAgICBjb25zdCBiYWRET01UYXJnZXRzID0gbmV3IE1hcCgpO1xuICAgICAgY29uc3Qgcm9vdEVsZW1lbnQgPSBlZGl0b3IuZ2V0Um9vdEVsZW1lbnQoKTsgLy8gV2UgdXNlIHRoZSBjdXJyZW50IGVkaXRvciBzdGF0ZSwgYXMgdGhhdCByZWZsZWN0cyB3aGF0IGlzXG4gICAgICAvLyBhY3R1YWxseSBcIm9uIHNjcmVlblwiLlxuXG4gICAgICBjb25zdCBjdXJyZW50RWRpdG9yU3RhdGUgPSBlZGl0b3IuX2VkaXRvclN0YXRlO1xuICAgICAgY29uc3QgYmxvY2tDdXJzb3JFbGVtZW50ID0gZWRpdG9yLl9ibG9ja0N1cnNvckVsZW1lbnQ7XG4gICAgICBsZXQgc2hvdWxkUmV2ZXJ0U2VsZWN0aW9uID0gZmFsc2U7XG4gICAgICBsZXQgcG9zc2libGVUZXh0Rm9yRmlyZWZveFBhc3RlID0gJyc7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbXV0YXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG11dGF0aW9uID0gbXV0YXRpb25zW2ldO1xuICAgICAgICBjb25zdCB0eXBlID0gbXV0YXRpb24udHlwZTtcbiAgICAgICAgY29uc3QgdGFyZ2V0RE9NID0gbXV0YXRpb24udGFyZ2V0O1xuICAgICAgICBsZXQgdGFyZ2V0Tm9kZSA9ICRnZXROZWFyZXN0Tm9kZUZyb21ET01Ob2RlKHRhcmdldERPTSwgY3VycmVudEVkaXRvclN0YXRlKTtcblxuICAgICAgICBpZiAodGFyZ2V0Tm9kZSA9PT0gbnVsbCAmJiB0YXJnZXRET00gIT09IHJvb3RFbGVtZW50IHx8ICRpc0RlY29yYXRvck5vZGUodGFyZ2V0Tm9kZSkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlID09PSAnY2hhcmFjdGVyRGF0YScpIHtcbiAgICAgICAgICAvLyBUZXh0IG11dGF0aW9ucyBhcmUgZGVmZXJyZWQgYW5kIHBhc3NlZCB0byBtdXRhdGlvbiBsaXN0ZW5lcnMgdG8gYmVcbiAgICAgICAgICAvLyBwcm9jZXNzZWQgb3V0c2lkZSBvZiB0aGUgTGV4aWNhbCBlbmdpbmUuXG4gICAgICAgICAgaWYgKHNob3VsZEZsdXNoVGV4dE11dGF0aW9ucyAmJiAkaXNUZXh0Tm9kZSh0YXJnZXROb2RlKSAmJiBzaG91bGRVcGRhdGVUZXh0Tm9kZUZyb21NdXRhdGlvbihzZWxlY3Rpb24sIHRhcmdldERPTSwgdGFyZ2V0Tm9kZSkpIHtcbiAgICAgICAgICAgIGhhbmRsZVRleHRNdXRhdGlvbiggLy8gbm9kZVR5cGUgPT09IERPTV9URVhUX1RZUEUgaXMgYSBUZXh0IERPTSBub2RlXG4gICAgICAgICAgICAgIHRhcmdldERPTSwgdGFyZ2V0Tm9kZSwgZWRpdG9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2NoaWxkTGlzdCcpIHtcbiAgICAgICAgICBzaG91bGRSZXZlcnRTZWxlY3Rpb24gPSB0cnVlOyAvLyBXZSBhdHRlbXB0IHRvIFwidW5kb1wiIGFueSBjaGFuZ2VzIHRoYXQgaGF2ZSBvY2N1cnJlZCBvdXRzaWRlXG4gICAgICAgICAgLy8gb2YgTGV4aWNhbC4gV2Ugd2FudCBMZXhpY2FsJ3MgZWRpdG9yIHN0YXRlIHRvIGJlIHNvdXJjZSBvZiB0cnV0aC5cbiAgICAgICAgICAvLyBUbyB0aGUgdXNlciwgdGhlc2Ugd2lsbCBsb29rIGxpa2Ugbm8tb3BzLlxuXG4gICAgICAgICAgY29uc3QgYWRkZWRET01zID0gbXV0YXRpb24uYWRkZWROb2RlcztcblxuICAgICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgYWRkZWRET01zLmxlbmd0aDsgcysrKSB7XG4gICAgICAgICAgICBjb25zdCBhZGRlZERPTSA9IGFkZGVkRE9Nc1tzXTtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBnZXROb2RlRnJvbURPTU5vZGUoYWRkZWRET00pO1xuICAgICAgICAgICAgY29uc3QgcGFyZW50RE9NID0gYWRkZWRET00ucGFyZW50Tm9kZTtcblxuICAgICAgICAgICAgaWYgKHBhcmVudERPTSAhPSBudWxsICYmIGFkZGVkRE9NICE9PSBibG9ja0N1cnNvckVsZW1lbnQgJiYgbm9kZSA9PT0gbnVsbCAmJiAoYWRkZWRET00ubm9kZU5hbWUgIT09ICdCUicgfHwgIWlzTWFuYWdlZExpbmVCcmVhayhhZGRlZERPTSwgcGFyZW50RE9NLCBlZGl0b3IpKSkge1xuICAgICAgICAgICAgICBpZiAoSVNfRklSRUZPWCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBvc3NpYmxlVGV4dCA9IGFkZGVkRE9NLmlubmVyVGV4dCB8fCBhZGRlZERPTS5ub2RlVmFsdWU7XG5cbiAgICAgICAgICAgICAgICBpZiAocG9zc2libGVUZXh0KSB7XG4gICAgICAgICAgICAgICAgICBwb3NzaWJsZVRleHRGb3JGaXJlZm94UGFzdGUgKz0gcG9zc2libGVUZXh0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHBhcmVudERPTS5yZW1vdmVDaGlsZChhZGRlZERPTSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgcmVtb3ZlZERPTXMgPSBtdXRhdGlvbi5yZW1vdmVkTm9kZXM7XG4gICAgICAgICAgY29uc3QgcmVtb3ZlZERPTXNMZW5ndGggPSByZW1vdmVkRE9Ncy5sZW5ndGg7XG5cbiAgICAgICAgICBpZiAocmVtb3ZlZERPTXNMZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsZXQgdW5yZW1vdmVkQlJzID0gMDtcblxuICAgICAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCByZW1vdmVkRE9Nc0xlbmd0aDsgcysrKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHJlbW92ZWRET00gPSByZW1vdmVkRE9Nc1tzXTtcblxuICAgICAgICAgICAgICBpZiAocmVtb3ZlZERPTS5ub2RlTmFtZSA9PT0gJ0JSJyAmJiBpc01hbmFnZWRMaW5lQnJlYWsocmVtb3ZlZERPTSwgdGFyZ2V0RE9NLCBlZGl0b3IpIHx8IGJsb2NrQ3Vyc29yRWxlbWVudCA9PT0gcmVtb3ZlZERPTSkge1xuICAgICAgICAgICAgICAgIHRhcmdldERPTS5hcHBlbmRDaGlsZChyZW1vdmVkRE9NKTtcbiAgICAgICAgICAgICAgICB1bnJlbW92ZWRCUnMrKztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocmVtb3ZlZERPTXNMZW5ndGggIT09IHVucmVtb3ZlZEJScykge1xuICAgICAgICAgICAgICBpZiAodGFyZ2V0RE9NID09PSByb290RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRhcmdldE5vZGUgPSBpbnRlcm5hbEdldFJvb3QoY3VycmVudEVkaXRvclN0YXRlKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJhZERPTVRhcmdldHMuc2V0KHRhcmdldERPTSwgdGFyZ2V0Tm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IC8vIE5vdyB3ZSBwcm9jZXNzIGVhY2ggb2YgdGhlIHVuaXF1ZSB0YXJnZXQgbm9kZXMsIGF0dGVtcHRpbmdcbiAgICAgIC8vIHRvIHJlc3RvcmUgdGhlaXIgY29udGVudHMgYmFjayB0byB0aGUgc291cmNlIG9mIHRydXRoLCB3aGljaFxuICAgICAgLy8gaXMgTGV4aWNhbCdzIFwiY3VycmVudFwiIGVkaXRvciBzdGF0ZS4gVGhpcyBpcyBiYXNpY2FsbHkgbGlrZVxuICAgICAgLy8gYW4gaW50ZXJuYWwgcmV2ZXJ0IG9uIHRoZSBET00uXG5cblxuICAgICAgaWYgKGJhZERPTVRhcmdldHMuc2l6ZSA+IDApIHtcbiAgICAgICAgZm9yIChjb25zdCBbdGFyZ2V0RE9NLCB0YXJnZXROb2RlXSBvZiBiYWRET01UYXJnZXRzKSB7XG4gICAgICAgICAgaWYgKCRpc0VsZW1lbnROb2RlKHRhcmdldE5vZGUpKSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZEtleXMgPSB0YXJnZXROb2RlLmdldENoaWxkcmVuS2V5cygpO1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRET00gPSB0YXJnZXRET00uZmlyc3RDaGlsZDtcblxuICAgICAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBjaGlsZEtleXMubGVuZ3RoOyBzKyspIHtcbiAgICAgICAgICAgICAgY29uc3Qga2V5ID0gY2hpbGRLZXlzW3NdO1xuICAgICAgICAgICAgICBjb25zdCBjb3JyZWN0RE9NID0gZWRpdG9yLmdldEVsZW1lbnRCeUtleShrZXkpO1xuXG4gICAgICAgICAgICAgIGlmIChjb3JyZWN0RE9NID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoY3VycmVudERPTSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0RE9NLmFwcGVuZENoaWxkKGNvcnJlY3RET00pO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRET00gPSBjb3JyZWN0RE9NO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRET00gIT09IGNvcnJlY3RET00pIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRET00ucmVwbGFjZUNoaWxkKGNvcnJlY3RET00sIGN1cnJlbnRET00pO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgY3VycmVudERPTSA9IGN1cnJlbnRET00ubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmICgkaXNUZXh0Tm9kZSh0YXJnZXROb2RlKSkge1xuICAgICAgICAgICAgdGFyZ2V0Tm9kZS5tYXJrRGlydHkoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gLy8gQ2FwdHVyZSBhbGwgdGhlIG11dGF0aW9ucyBtYWRlIGR1cmluZyB0aGlzIGZ1bmN0aW9uLiBUaGlzXG4gICAgICAvLyBhbHNvIHByZXZlbnRzIHVzIGhhdmluZyB0byBwcm9jZXNzIHRoZW0gb24gdGhlIG5leHQgY3ljbGVcbiAgICAgIC8vIG9mIG9uTXV0YXRpb24sIGFzIHRoZXNlIG11dGF0aW9ucyB3ZXJlIG1hZGUgYnkgdXMuXG5cblxuICAgICAgY29uc3QgcmVjb3JkcyA9IG9ic2VydmVyLnRha2VSZWNvcmRzKCk7IC8vIENoZWNrIGZvciBhbnkgcmFuZG9tIGF1dG8tYWRkZWQgPGJyPiBlbGVtZW50cywgYW5kIHJlbW92ZSB0aGVtLlxuICAgICAgLy8gVGhlc2UgZ2V0IGFkZGVkIGJ5IHRoZSBicm93c2VyIHdoZW4gd2UgdW5kbyB0aGUgYWJvdmUgbXV0YXRpb25zXG4gICAgICAvLyBhbmQgdGhpcyBjYW4gbGVhZCB0byBhIGJyb2tlbiBVSS5cblxuICAgICAgaWYgKHJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlY29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCByZWNvcmQgPSByZWNvcmRzW2ldO1xuICAgICAgICAgIGNvbnN0IGFkZGVkTm9kZXMgPSByZWNvcmQuYWRkZWROb2RlcztcbiAgICAgICAgICBjb25zdCB0YXJnZXQgPSByZWNvcmQudGFyZ2V0O1xuXG4gICAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBhZGRlZE5vZGVzLmxlbmd0aDsgcysrKSB7XG4gICAgICAgICAgICBjb25zdCBhZGRlZERPTSA9IGFkZGVkTm9kZXNbc107XG4gICAgICAgICAgICBjb25zdCBwYXJlbnRET00gPSBhZGRlZERPTS5wYXJlbnROb2RlO1xuXG4gICAgICAgICAgICBpZiAocGFyZW50RE9NICE9IG51bGwgJiYgYWRkZWRET00ubm9kZU5hbWUgPT09ICdCUicgJiYgIWlzTWFuYWdlZExpbmVCcmVhayhhZGRlZERPTSwgdGFyZ2V0LCBlZGl0b3IpKSB7XG4gICAgICAgICAgICAgIHBhcmVudERPTS5yZW1vdmVDaGlsZChhZGRlZERPTSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IC8vIENsZWFyIGFueSBvZiB0aG9zZSByZW1vdmFsIG11dGF0aW9uc1xuXG5cbiAgICAgICAgb2JzZXJ2ZXIudGFrZVJlY29yZHMoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNlbGVjdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICBpZiAoc2hvdWxkUmV2ZXJ0U2VsZWN0aW9uKSB7XG4gICAgICAgICAgc2VsZWN0aW9uLmRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAkc2V0U2VsZWN0aW9uKHNlbGVjdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoSVNfRklSRUZPWCAmJiBpc0ZpcmVmb3hDbGlwYm9hcmRFdmVudHMoZWRpdG9yKSkge1xuICAgICAgICAgIHNlbGVjdGlvbi5pbnNlcnRSYXdUZXh0KHBvc3NpYmxlVGV4dEZvckZpcmVmb3hQYXN0ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfSBmaW5hbGx5IHtcbiAgICBpc1Byb2Nlc3NpbmdNdXRhdGlvbnMgPSBmYWxzZTtcbiAgfVxufVxuZnVuY3Rpb24gZmx1c2hSb290TXV0YXRpb25zKGVkaXRvcikge1xuICBjb25zdCBvYnNlcnZlciA9IGVkaXRvci5fb2JzZXJ2ZXI7XG5cbiAgaWYgKG9ic2VydmVyICE9PSBudWxsKSB7XG4gICAgY29uc3QgbXV0YXRpb25zID0gb2JzZXJ2ZXIudGFrZVJlY29yZHMoKTtcbiAgICAkZmx1c2hNdXRhdGlvbnMkMShlZGl0b3IsIG11dGF0aW9ucywgb2JzZXJ2ZXIpO1xuICB9XG59XG5mdW5jdGlvbiBpbml0TXV0YXRpb25PYnNlcnZlcihlZGl0b3IpIHtcbiAgaW5pdFRleHRFbnRyeUxpc3RlbmVyKGVkaXRvcik7XG4gIGVkaXRvci5fb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zLCBvYnNlcnZlcikgPT4ge1xuICAgICRmbHVzaE11dGF0aW9ucyQxKGVkaXRvciwgbXV0YXRpb25zLCBvYnNlcnZlcik7XG4gIH0pO1xufVxuXG4vKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5sZXQga2V5Q291bnRlciA9IDE7XG5mdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbUtleSgpIHtcbiAgcmV0dXJuICcnICsga2V5Q291bnRlcisrO1xufVxuZnVuY3Rpb24gZ2V0UmVnaXN0ZXJlZE5vZGVPclRocm93KGVkaXRvciwgbm9kZVR5cGUpIHtcbiAgY29uc3QgcmVnaXN0ZXJlZE5vZGUgPSBlZGl0b3IuX25vZGVzLmdldChub2RlVHlwZSk7XG5cbiAgaWYgKHJlZ2lzdGVyZWROb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICB7XG4gICAgICB0aHJvdyBFcnJvcihgcmVnaXN0ZXJlZE5vZGU6IFR5cGUgJHtub2RlVHlwZX0gbm90IGZvdW5kYCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlZ2lzdGVyZWROb2RlO1xufVxuY29uc3Qgc2NoZWR1bGVNaWNyb1Rhc2sgPSB0eXBlb2YgcXVldWVNaWNyb3Rhc2sgPT09ICdmdW5jdGlvbicgPyBxdWV1ZU1pY3JvdGFzayA6IGZuID0+IHtcbiAgLy8gTm8gd2luZG93IHByZWZpeCBpbnRlbmRlZCAoIzE0MDApXG4gIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZm4pO1xufTtcbmZ1bmN0aW9uICRpc1NlbGVjdGlvbkNhcHR1cmVkSW5EZWNvcmF0b3Iobm9kZSkge1xuICByZXR1cm4gJGlzRGVjb3JhdG9yTm9kZSgkZ2V0TmVhcmVzdE5vZGVGcm9tRE9NTm9kZShub2RlKSk7XG59XG5mdW5jdGlvbiBpc1NlbGVjdGlvbkNhcHR1cmVkSW5EZWNvcmF0b3JJbnB1dChhbmNob3JET00pIHtcbiAgY29uc3QgYWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG5cbiAgaWYgKGFjdGl2ZUVsZW1lbnQgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCBub2RlTmFtZSA9IGFjdGl2ZUVsZW1lbnQubm9kZU5hbWU7XG4gIHJldHVybiAkaXNEZWNvcmF0b3JOb2RlKCRnZXROZWFyZXN0Tm9kZUZyb21ET01Ob2RlKGFuY2hvckRPTSkpICYmIChub2RlTmFtZSA9PT0gJ0lOUFVUJyB8fCBub2RlTmFtZSA9PT0gJ1RFWFRBUkVBJyB8fCBhY3RpdmVFbGVtZW50LmNvbnRlbnRFZGl0YWJsZSA9PT0gJ3RydWUnICYmIC8vIEB0cy1pZ25vcmUgaXRlcm5hbCBmaWVsZFxuICAgIGFjdGl2ZUVsZW1lbnQuX19sZXhpY2FsRWRpdG9yID09IG51bGwpO1xufVxuZnVuY3Rpb24gaXNTZWxlY3Rpb25XaXRoaW5FZGl0b3IoZWRpdG9yLCBhbmNob3JET00sIGZvY3VzRE9NKSB7XG4gIGNvbnN0IHJvb3RFbGVtZW50ID0gZWRpdG9yLmdldFJvb3RFbGVtZW50KCk7XG5cbiAgdHJ5IHtcbiAgICByZXR1cm4gcm9vdEVsZW1lbnQgIT09IG51bGwgJiYgcm9vdEVsZW1lbnQuY29udGFpbnMoYW5jaG9yRE9NKSAmJiByb290RWxlbWVudC5jb250YWlucyhmb2N1c0RPTSkgJiYgLy8gSWdub3JlIGlmIHNlbGVjdGlvbiBpcyB3aXRoaW4gbmVzdGVkIGVkaXRvclxuICAgICAgYW5jaG9yRE9NICE9PSBudWxsICYmICFpc1NlbGVjdGlvbkNhcHR1cmVkSW5EZWNvcmF0b3JJbnB1dChhbmNob3JET00pICYmIGdldE5lYXJlc3RFZGl0b3JGcm9tRE9NTm9kZShhbmNob3JET00pID09PSBlZGl0b3I7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5mdW5jdGlvbiBnZXROZWFyZXN0RWRpdG9yRnJvbURPTU5vZGUobm9kZSkge1xuICBsZXQgY3VycmVudE5vZGUgPSBub2RlO1xuXG4gIHdoaWxlIChjdXJyZW50Tm9kZSAhPSBudWxsKSB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogaW50ZXJuYWwgZmllbGRcbiAgICBjb25zdCBlZGl0b3IgPSBjdXJyZW50Tm9kZS5fX2xleGljYWxFZGl0b3I7XG5cbiAgICBpZiAoZWRpdG9yICE9IG51bGwpIHtcbiAgICAgIHJldHVybiBlZGl0b3I7XG4gICAgfVxuXG4gICAgY3VycmVudE5vZGUgPSBnZXRQYXJlbnRFbGVtZW50KGN1cnJlbnROb2RlKTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gZ2V0VGV4dERpcmVjdGlvbih0ZXh0KSB7XG4gIGlmIChSVExfUkVHRVgudGVzdCh0ZXh0KSkge1xuICAgIHJldHVybiAncnRsJztcbiAgfVxuXG4gIGlmIChMVFJfUkVHRVgudGVzdCh0ZXh0KSkge1xuICAgIHJldHVybiAnbHRyJztcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gJGlzVG9rZW5PclNlZ21lbnRlZChub2RlKSB7XG4gIHJldHVybiBub2RlLmlzVG9rZW4oKSB8fCBub2RlLmlzU2VnbWVudGVkKCk7XG59XG5cbmZ1bmN0aW9uIGlzRE9NTm9kZUxleGljYWxUZXh0Tm9kZShub2RlKSB7XG4gIHJldHVybiBub2RlLm5vZGVUeXBlID09PSBET01fVEVYVF9UWVBFO1xufVxuXG5mdW5jdGlvbiBnZXRET01UZXh0Tm9kZShlbGVtZW50KSB7XG4gIGxldCBub2RlID0gZWxlbWVudDtcblxuICB3aGlsZSAobm9kZSAhPSBudWxsKSB7XG4gICAgaWYgKGlzRE9NTm9kZUxleGljYWxUZXh0Tm9kZShub2RlKSkge1xuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuXG4gICAgbm9kZSA9IG5vZGUuZmlyc3RDaGlsZDtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gdG9nZ2xlVGV4dEZvcm1hdFR5cGUoZm9ybWF0LCB0eXBlLCBhbGlnbldpdGhGb3JtYXQpIHtcbiAgY29uc3QgYWN0aXZlRm9ybWF0ID0gVEVYVF9UWVBFX1RPX0ZPUk1BVFt0eXBlXTtcbiAgY29uc3QgaXNTdGF0ZUZsYWdQcmVzZW50ID0gZm9ybWF0ICYgYWN0aXZlRm9ybWF0O1xuXG4gIGlmIChpc1N0YXRlRmxhZ1ByZXNlbnQgJiYgKGFsaWduV2l0aEZvcm1hdCA9PT0gbnVsbCB8fCAoYWxpZ25XaXRoRm9ybWF0ICYgYWN0aXZlRm9ybWF0KSA9PT0gMCkpIHtcbiAgICAvLyBSZW1vdmUgdGhlIHN0YXRlIGZsYWcuXG4gICAgcmV0dXJuIGZvcm1hdCBeIGFjdGl2ZUZvcm1hdDtcbiAgfVxuXG4gIGlmIChhbGlnbldpdGhGb3JtYXQgPT09IG51bGwgfHwgYWxpZ25XaXRoRm9ybWF0ICYgYWN0aXZlRm9ybWF0KSB7XG4gICAgLy8gQWRkIHRoZSBzdGF0ZSBmbGFnLlxuICAgIHJldHVybiBmb3JtYXQgfCBhY3RpdmVGb3JtYXQ7XG4gIH1cblxuICByZXR1cm4gZm9ybWF0O1xufVxuZnVuY3Rpb24gJGlzTGVhZk5vZGUobm9kZSkge1xuICByZXR1cm4gJGlzVGV4dE5vZGUobm9kZSkgfHwgJGlzTGluZUJyZWFrTm9kZShub2RlKSB8fCAkaXNEZWNvcmF0b3JOb2RlKG5vZGUpO1xufVxuZnVuY3Rpb24gJHNldE5vZGVLZXkobm9kZSwgZXhpc3RpbmdLZXkpIHtcbiAgaWYgKGV4aXN0aW5nS2V5ICE9IG51bGwpIHtcbiAgICBub2RlLl9fa2V5ID0gZXhpc3RpbmdLZXk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZXJyb3JPblJlYWRPbmx5KCk7XG4gIGVycm9yT25JbmZpbml0ZVRyYW5zZm9ybXMoKTtcbiAgY29uc3QgZWRpdG9yID0gZ2V0QWN0aXZlRWRpdG9yKCk7XG4gIGNvbnN0IGVkaXRvclN0YXRlID0gZ2V0QWN0aXZlRWRpdG9yU3RhdGUoKTtcbiAgY29uc3Qga2V5ID0gZ2VuZXJhdGVSYW5kb21LZXkoKTtcblxuICBlZGl0b3JTdGF0ZS5fbm9kZU1hcC5zZXQoa2V5LCBub2RlKTsgLy8gVE9ETyBTcGxpdCB0aGlzIGZ1bmN0aW9uIGludG8gbGVhZi9lbGVtZW50XG5cblxuICBpZiAoJGlzRWxlbWVudE5vZGUobm9kZSkpIHtcbiAgICBlZGl0b3IuX2RpcnR5RWxlbWVudHMuc2V0KGtleSwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgZWRpdG9yLl9kaXJ0eUxlYXZlcy5hZGQoa2V5KTtcbiAgfVxuXG4gIGVkaXRvci5fY2xvbmVOb3ROZWVkZWQuYWRkKGtleSk7XG5cbiAgZWRpdG9yLl9kaXJ0eVR5cGUgPSBIQVNfRElSVFlfTk9ERVM7XG4gIG5vZGUuX19rZXkgPSBrZXk7XG59XG5cbmZ1bmN0aW9uIGludGVybmFsTWFya1BhcmVudEVsZW1lbnRzQXNEaXJ0eShwYXJlbnRLZXksIG5vZGVNYXAsIGRpcnR5RWxlbWVudHMpIHtcbiAgbGV0IG5leHRQYXJlbnRLZXkgPSBwYXJlbnRLZXk7XG5cbiAgd2hpbGUgKG5leHRQYXJlbnRLZXkgIT09IG51bGwpIHtcbiAgICBpZiAoZGlydHlFbGVtZW50cy5oYXMobmV4dFBhcmVudEtleSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBub2RlID0gbm9kZU1hcC5nZXQobmV4dFBhcmVudEtleSk7XG5cbiAgICBpZiAobm9kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBkaXJ0eUVsZW1lbnRzLnNldChuZXh0UGFyZW50S2V5LCBmYWxzZSk7XG4gICAgbmV4dFBhcmVudEtleSA9IG5vZGUuX19wYXJlbnQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlRnJvbVBhcmVudChub2RlKSB7XG4gIGNvbnN0IG9sZFBhcmVudCA9IG5vZGUuZ2V0UGFyZW50KCk7XG5cbiAgaWYgKG9sZFBhcmVudCAhPT0gbnVsbCkge1xuICAgIGNvbnN0IHdyaXRhYmxlTm9kZSA9IG5vZGUuZ2V0V3JpdGFibGUoKTtcbiAgICBjb25zdCB3cml0YWJsZVBhcmVudCA9IG9sZFBhcmVudC5nZXRXcml0YWJsZSgpO1xuICAgIGNvbnN0IHByZXZTaWJsaW5nID0gbm9kZS5nZXRQcmV2aW91c1NpYmxpbmcoKTtcbiAgICBjb25zdCBuZXh0U2libGluZyA9IG5vZGUuZ2V0TmV4dFNpYmxpbmcoKTsgLy8gVE9ETzogdGhpcyBmdW5jdGlvbiBkdXBsaWNhdGVzIGEgYnVuY2ggb2Ygb3BlcmF0aW9ucywgY2FuIGJlIHNpbXBsaWZpZWQuXG5cbiAgICBpZiAocHJldlNpYmxpbmcgPT09IG51bGwpIHtcbiAgICAgIGlmIChuZXh0U2libGluZyAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCB3cml0YWJsZU5leHRTaWJsaW5nID0gbmV4dFNpYmxpbmcuZ2V0V3JpdGFibGUoKTtcbiAgICAgICAgd3JpdGFibGVQYXJlbnQuX19maXJzdCA9IG5leHRTaWJsaW5nLl9fa2V5O1xuICAgICAgICB3cml0YWJsZU5leHRTaWJsaW5nLl9fcHJldiA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3cml0YWJsZVBhcmVudC5fX2ZpcnN0ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgd3JpdGFibGVQcmV2U2libGluZyA9IHByZXZTaWJsaW5nLmdldFdyaXRhYmxlKCk7XG5cbiAgICAgIGlmIChuZXh0U2libGluZyAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCB3cml0YWJsZU5leHRTaWJsaW5nID0gbmV4dFNpYmxpbmcuZ2V0V3JpdGFibGUoKTtcbiAgICAgICAgd3JpdGFibGVOZXh0U2libGluZy5fX3ByZXYgPSB3cml0YWJsZVByZXZTaWJsaW5nLl9fa2V5O1xuICAgICAgICB3cml0YWJsZVByZXZTaWJsaW5nLl9fbmV4dCA9IHdyaXRhYmxlTmV4dFNpYmxpbmcuX19rZXk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3cml0YWJsZVByZXZTaWJsaW5nLl9fbmV4dCA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHdyaXRhYmxlTm9kZS5fX3ByZXYgPSBudWxsO1xuICAgIH1cblxuICAgIGlmIChuZXh0U2libGluZyA9PT0gbnVsbCkge1xuICAgICAgaWYgKHByZXZTaWJsaW5nICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHdyaXRhYmxlUHJldlNpYmxpbmcgPSBwcmV2U2libGluZy5nZXRXcml0YWJsZSgpO1xuICAgICAgICB3cml0YWJsZVBhcmVudC5fX2xhc3QgPSBwcmV2U2libGluZy5fX2tleTtcbiAgICAgICAgd3JpdGFibGVQcmV2U2libGluZy5fX25leHQgPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd3JpdGFibGVQYXJlbnQuX19sYXN0ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgd3JpdGFibGVOZXh0U2libGluZyA9IG5leHRTaWJsaW5nLmdldFdyaXRhYmxlKCk7XG5cbiAgICAgIGlmIChwcmV2U2libGluZyAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCB3cml0YWJsZVByZXZTaWJsaW5nID0gcHJldlNpYmxpbmcuZ2V0V3JpdGFibGUoKTtcbiAgICAgICAgd3JpdGFibGVQcmV2U2libGluZy5fX25leHQgPSB3cml0YWJsZU5leHRTaWJsaW5nLl9fa2V5O1xuICAgICAgICB3cml0YWJsZU5leHRTaWJsaW5nLl9fcHJldiA9IHdyaXRhYmxlUHJldlNpYmxpbmcuX19rZXk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3cml0YWJsZU5leHRTaWJsaW5nLl9fcHJldiA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHdyaXRhYmxlTm9kZS5fX25leHQgPSBudWxsO1xuICAgIH1cblxuICAgIHdyaXRhYmxlUGFyZW50Ll9fc2l6ZS0tO1xuICAgIHdyaXRhYmxlTm9kZS5fX3BhcmVudCA9IG51bGw7XG4gIH1cbn0gLy8gTmV2ZXIgdXNlIHRoaXMgZnVuY3Rpb24gZGlyZWN0bHkhIEl0IHdpbGwgYnJlYWtcbi8vIHRoZSBjbG9uaW5nIGhldXJpc3RpYy4gSW5zdGVhZCB1c2Ugbm9kZS5nZXRXcml0YWJsZSgpLlxuXG5mdW5jdGlvbiBpbnRlcm5hbE1hcmtOb2RlQXNEaXJ0eShub2RlKSB7XG4gIGVycm9yT25JbmZpbml0ZVRyYW5zZm9ybXMoKTtcbiAgY29uc3QgbGF0ZXN0ID0gbm9kZS5nZXRMYXRlc3QoKTtcbiAgY29uc3QgcGFyZW50ID0gbGF0ZXN0Ll9fcGFyZW50O1xuICBjb25zdCBlZGl0b3JTdGF0ZSA9IGdldEFjdGl2ZUVkaXRvclN0YXRlKCk7XG4gIGNvbnN0IGVkaXRvciA9IGdldEFjdGl2ZUVkaXRvcigpO1xuICBjb25zdCBub2RlTWFwID0gZWRpdG9yU3RhdGUuX25vZGVNYXA7XG4gIGNvbnN0IGRpcnR5RWxlbWVudHMgPSBlZGl0b3IuX2RpcnR5RWxlbWVudHM7XG5cbiAgaWYgKHBhcmVudCAhPT0gbnVsbCkge1xuICAgIGludGVybmFsTWFya1BhcmVudEVsZW1lbnRzQXNEaXJ0eShwYXJlbnQsIG5vZGVNYXAsIGRpcnR5RWxlbWVudHMpO1xuICB9XG5cbiAgY29uc3Qga2V5ID0gbGF0ZXN0Ll9fa2V5O1xuICBlZGl0b3IuX2RpcnR5VHlwZSA9IEhBU19ESVJUWV9OT0RFUztcblxuICBpZiAoJGlzRWxlbWVudE5vZGUobm9kZSkpIHtcbiAgICBkaXJ0eUVsZW1lbnRzLnNldChrZXksIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIC8vIFRPRE8gc3BsaXQgaW50ZXJuYWxseSBNYXJrTm9kZUFzRGlydHkgaW50byB0d28gZGVkaWNhdGVkIEVsZW1lbnQvbGVhdmUgZnVuY3Rpb25zXG4gICAgZWRpdG9yLl9kaXJ0eUxlYXZlcy5hZGQoa2V5KTtcbiAgfVxufVxuZnVuY3Rpb24gaW50ZXJuYWxNYXJrU2libGluZ3NBc0RpcnR5KG5vZGUpIHtcbiAgY29uc3QgcHJldmlvdXNOb2RlID0gbm9kZS5nZXRQcmV2aW91c1NpYmxpbmcoKTtcbiAgY29uc3QgbmV4dE5vZGUgPSBub2RlLmdldE5leHRTaWJsaW5nKCk7XG5cbiAgaWYgKHByZXZpb3VzTm9kZSAhPT0gbnVsbCkge1xuICAgIGludGVybmFsTWFya05vZGVBc0RpcnR5KHByZXZpb3VzTm9kZSk7XG4gIH1cblxuICBpZiAobmV4dE5vZGUgIT09IG51bGwpIHtcbiAgICBpbnRlcm5hbE1hcmtOb2RlQXNEaXJ0eShuZXh0Tm9kZSk7XG4gIH1cbn1cbmZ1bmN0aW9uICRzZXRDb21wb3NpdGlvbktleShjb21wb3NpdGlvbktleSkge1xuICBlcnJvck9uUmVhZE9ubHkoKTtcbiAgY29uc3QgZWRpdG9yID0gZ2V0QWN0aXZlRWRpdG9yKCk7XG4gIGNvbnN0IHByZXZpb3VzQ29tcG9zaXRpb25LZXkgPSBlZGl0b3IuX2NvbXBvc2l0aW9uS2V5O1xuXG4gIGlmIChjb21wb3NpdGlvbktleSAhPT0gcHJldmlvdXNDb21wb3NpdGlvbktleSkge1xuICAgIGVkaXRvci5fY29tcG9zaXRpb25LZXkgPSBjb21wb3NpdGlvbktleTtcblxuICAgIGlmIChwcmV2aW91c0NvbXBvc2l0aW9uS2V5ICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBub2RlID0gJGdldE5vZGVCeUtleShwcmV2aW91c0NvbXBvc2l0aW9uS2V5KTtcblxuICAgICAgaWYgKG5vZGUgIT09IG51bGwpIHtcbiAgICAgICAgbm9kZS5nZXRXcml0YWJsZSgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjb21wb3NpdGlvbktleSAhPT0gbnVsbCkge1xuICAgICAgY29uc3Qgbm9kZSA9ICRnZXROb2RlQnlLZXkoY29tcG9zaXRpb25LZXkpO1xuXG4gICAgICBpZiAobm9kZSAhPT0gbnVsbCkge1xuICAgICAgICBub2RlLmdldFdyaXRhYmxlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiAkZ2V0Q29tcG9zaXRpb25LZXkoKSB7XG4gIGlmIChpc0N1cnJlbnRseVJlYWRPbmx5TW9kZSgpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBlZGl0b3IgPSBnZXRBY3RpdmVFZGl0b3IoKTtcbiAgcmV0dXJuIGVkaXRvci5fY29tcG9zaXRpb25LZXk7XG59XG5mdW5jdGlvbiAkZ2V0Tm9kZUJ5S2V5KGtleSwgX2VkaXRvclN0YXRlKSB7XG4gIGNvbnN0IGVkaXRvclN0YXRlID0gX2VkaXRvclN0YXRlIHx8IGdldEFjdGl2ZUVkaXRvclN0YXRlKCk7XG5cbiAgY29uc3Qgbm9kZSA9IGVkaXRvclN0YXRlLl9ub2RlTWFwLmdldChrZXkpO1xuXG4gIGlmIChub2RlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiBub2RlO1xufVxuZnVuY3Rpb24gZ2V0Tm9kZUZyb21ET01Ob2RlKGRvbSwgZWRpdG9yU3RhdGUpIHtcbiAgY29uc3QgZWRpdG9yID0gZ2V0QWN0aXZlRWRpdG9yKCk7IC8vIEB0cy1pZ25vcmUgV2UgaW50ZW50aW9uYWxseSBhZGQgdGhpcyB0byB0aGUgTm9kZS5cblxuICBjb25zdCBrZXkgPSBkb21bYF9fbGV4aWNhbEtleV8ke2VkaXRvci5fa2V5fWBdO1xuXG4gIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiAkZ2V0Tm9kZUJ5S2V5KGtleSwgZWRpdG9yU3RhdGUpO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiAkZ2V0TmVhcmVzdE5vZGVGcm9tRE9NTm9kZShzdGFydGluZ0RPTSwgZWRpdG9yU3RhdGUpIHtcbiAgbGV0IGRvbSA9IHN0YXJ0aW5nRE9NO1xuXG4gIHdoaWxlIChkb20gIT0gbnVsbCkge1xuICAgIGNvbnN0IG5vZGUgPSBnZXROb2RlRnJvbURPTU5vZGUoZG9tLCBlZGl0b3JTdGF0ZSk7XG5cbiAgICBpZiAobm9kZSAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuXG4gICAgZG9tID0gZ2V0UGFyZW50RWxlbWVudChkb20pO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBjbG9uZURlY29yYXRvcnMoZWRpdG9yKSB7XG4gIGNvbnN0IGN1cnJlbnREZWNvcmF0b3JzID0gZWRpdG9yLl9kZWNvcmF0b3JzO1xuICBjb25zdCBwZW5kaW5nRGVjb3JhdG9ycyA9IE9iamVjdC5hc3NpZ24oe30sIGN1cnJlbnREZWNvcmF0b3JzKTtcbiAgZWRpdG9yLl9wZW5kaW5nRGVjb3JhdG9ycyA9IHBlbmRpbmdEZWNvcmF0b3JzO1xuICByZXR1cm4gcGVuZGluZ0RlY29yYXRvcnM7XG59XG5mdW5jdGlvbiBnZXRFZGl0b3JTdGF0ZVRleHRDb250ZW50KGVkaXRvclN0YXRlKSB7XG4gIHJldHVybiBlZGl0b3JTdGF0ZS5yZWFkKCgpID0+ICRnZXRSb290KCkuZ2V0VGV4dENvbnRlbnQoKSk7XG59XG5mdW5jdGlvbiBtYXJrQWxsTm9kZXNBc0RpcnR5KGVkaXRvciwgdHlwZSkge1xuICAvLyBNYXJrIGFsbCBleGlzdGluZyB0ZXh0IG5vZGVzIGFzIGRpcnR5XG4gIHVwZGF0ZUVkaXRvcihlZGl0b3IsICgpID0+IHtcbiAgICBjb25zdCBlZGl0b3JTdGF0ZSA9IGdldEFjdGl2ZUVkaXRvclN0YXRlKCk7XG5cbiAgICBpZiAoZWRpdG9yU3RhdGUuaXNFbXB0eSgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGUgPT09ICdyb290Jykge1xuICAgICAgJGdldFJvb3QoKS5tYXJrRGlydHkoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBub2RlTWFwID0gZWRpdG9yU3RhdGUuX25vZGVNYXA7XG5cbiAgICBmb3IgKGNvbnN0IFssIG5vZGVdIG9mIG5vZGVNYXApIHtcbiAgICAgIG5vZGUubWFya0RpcnR5KCk7XG4gICAgfVxuICB9LCBlZGl0b3IuX3BlbmRpbmdFZGl0b3JTdGF0ZSA9PT0gbnVsbCA/IHtcbiAgICB0YWc6ICdoaXN0b3J5LW1lcmdlJ1xuICB9IDogdW5kZWZpbmVkKTtcbn1cbmZ1bmN0aW9uICRnZXRSb290KCkge1xuICByZXR1cm4gaW50ZXJuYWxHZXRSb290KGdldEFjdGl2ZUVkaXRvclN0YXRlKCkpO1xufVxuZnVuY3Rpb24gaW50ZXJuYWxHZXRSb290KGVkaXRvclN0YXRlKSB7XG4gIHJldHVybiBlZGl0b3JTdGF0ZS5fbm9kZU1hcC5nZXQoJ3Jvb3QnKTtcbn1cbmZ1bmN0aW9uICRzZXRTZWxlY3Rpb24oc2VsZWN0aW9uKSB7XG4gIGVycm9yT25SZWFkT25seSgpO1xuICBjb25zdCBlZGl0b3JTdGF0ZSA9IGdldEFjdGl2ZUVkaXRvclN0YXRlKCk7XG5cbiAgaWYgKHNlbGVjdGlvbiAhPT0gbnVsbCkge1xuICAgIHtcbiAgICAgIGlmIChPYmplY3QuaXNGcm96ZW4oc2VsZWN0aW9uKSkge1xuICAgICAgICB7XG4gICAgICAgICAgdGhyb3cgRXJyb3IoYCRzZXRTZWxlY3Rpb24gY2FsbGVkIG9uIGZyb3plbiBzZWxlY3Rpb24gb2JqZWN0LiBFbnN1cmUgc2VsZWN0aW9uIGlzIGNsb25lZCBiZWZvcmUgcGFzc2luZyBpbi5gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHNlbGVjdGlvbi5kaXJ0eSA9IHRydWU7XG4gICAgc2VsZWN0aW9uLl9jYWNoZWROb2RlcyA9IG51bGw7XG4gIH1cblxuICBlZGl0b3JTdGF0ZS5fc2VsZWN0aW9uID0gc2VsZWN0aW9uO1xufVxuZnVuY3Rpb24gJGZsdXNoTXV0YXRpb25zKCkge1xuICBlcnJvck9uUmVhZE9ubHkoKTtcbiAgY29uc3QgZWRpdG9yID0gZ2V0QWN0aXZlRWRpdG9yKCk7XG4gIGZsdXNoUm9vdE11dGF0aW9ucyhlZGl0b3IpO1xufVxuZnVuY3Rpb24gZ2V0Tm9kZUZyb21ET00oZG9tKSB7XG4gIGNvbnN0IGVkaXRvciA9IGdldEFjdGl2ZUVkaXRvcigpO1xuICBjb25zdCBub2RlS2V5ID0gZ2V0Tm9kZUtleUZyb21ET00oZG9tLCBlZGl0b3IpO1xuXG4gIGlmIChub2RlS2V5ID09PSBudWxsKSB7XG4gICAgY29uc3Qgcm9vdEVsZW1lbnQgPSBlZGl0b3IuZ2V0Um9vdEVsZW1lbnQoKTtcblxuICAgIGlmIChkb20gPT09IHJvb3RFbGVtZW50KSB7XG4gICAgICByZXR1cm4gJGdldE5vZGVCeUtleSgncm9vdCcpO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuICRnZXROb2RlQnlLZXkobm9kZUtleSk7XG59XG5mdW5jdGlvbiBnZXRUZXh0Tm9kZU9mZnNldChub2RlLCBtb3ZlU2VsZWN0aW9uVG9FbmQpIHtcbiAgcmV0dXJuIG1vdmVTZWxlY3Rpb25Ub0VuZCA/IG5vZGUuZ2V0VGV4dENvbnRlbnRTaXplKCkgOiAwO1xufVxuXG5mdW5jdGlvbiBnZXROb2RlS2V5RnJvbURPTSggLy8gTm90ZSB0aGF0IG5vZGUgaGVyZSByZWZlcnMgdG8gYSBET00gTm9kZSwgbm90IGFuIExleGljYWwgTm9kZVxuICBkb20sIGVkaXRvcikge1xuICBsZXQgbm9kZSA9IGRvbTtcblxuICB3aGlsZSAobm9kZSAhPSBudWxsKSB7XG4gICAgLy8gQHRzLWlnbm9yZSBXZSBpbnRlbnRpb25hbGx5IGFkZCB0aGlzIHRvIHRoZSBOb2RlLlxuICAgIGNvbnN0IGtleSA9IG5vZGVbYF9fbGV4aWNhbEtleV8ke2VkaXRvci5fa2V5fWBdO1xuXG4gICAgaWYgKGtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4ga2V5O1xuICAgIH1cblxuICAgIG5vZGUgPSBnZXRQYXJlbnRFbGVtZW50KG5vZGUpO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGRvZXNDb250YWluR3JhcGhlbWUoc3RyKSB7XG4gIHJldHVybiAvW1xcdUQ4MDAtXFx1REJGRl1bXFx1REMwMC1cXHVERkZGXS9nLnRlc3Qoc3RyKTtcbn1cbmZ1bmN0aW9uIGdldEVkaXRvcnNUb1Byb3BhZ2F0ZShlZGl0b3IpIHtcbiAgY29uc3QgZWRpdG9yc1RvUHJvcGFnYXRlID0gW107XG4gIGxldCBjdXJyZW50RWRpdG9yID0gZWRpdG9yO1xuXG4gIHdoaWxlIChjdXJyZW50RWRpdG9yICE9PSBudWxsKSB7XG4gICAgZWRpdG9yc1RvUHJvcGFnYXRlLnB1c2goY3VycmVudEVkaXRvcik7XG4gICAgY3VycmVudEVkaXRvciA9IGN1cnJlbnRFZGl0b3IuX3BhcmVudEVkaXRvcjtcbiAgfVxuXG4gIHJldHVybiBlZGl0b3JzVG9Qcm9wYWdhdGU7XG59XG5mdW5jdGlvbiBjcmVhdGVVSUQoKSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5yZXBsYWNlKC9bXmEtel0rL2csICcnKS5zdWJzdHIoMCwgNSk7XG59XG5mdW5jdGlvbiBnZXRBbmNob3JUZXh0RnJvbURPTShhbmNob3JOb2RlKSB7XG4gIGlmIChhbmNob3JOb2RlLm5vZGVUeXBlID09PSBET01fVEVYVF9UWVBFKSB7XG4gICAgcmV0dXJuIGFuY2hvck5vZGUubm9kZVZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiAkdXBkYXRlU2VsZWN0ZWRUZXh0RnJvbURPTShpc0NvbXBvc2l0aW9uRW5kLCBlZGl0b3IsIGRhdGEpIHtcbiAgLy8gVXBkYXRlIHRoZSB0ZXh0IGNvbnRlbnQgd2l0aCB0aGUgbGF0ZXN0IGNvbXBvc2l0aW9uIHRleHRcbiAgY29uc3QgZG9tU2VsZWN0aW9uID0gZ2V0RE9NU2VsZWN0aW9uKGVkaXRvci5fd2luZG93KTtcblxuICBpZiAoZG9tU2VsZWN0aW9uID09PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgYW5jaG9yTm9kZSA9IGRvbVNlbGVjdGlvbi5hbmNob3JOb2RlO1xuICBsZXQge1xuICAgIGFuY2hvck9mZnNldCxcbiAgICBmb2N1c09mZnNldFxuICB9ID0gZG9tU2VsZWN0aW9uO1xuXG4gIGlmIChhbmNob3JOb2RlICE9PSBudWxsKSB7XG4gICAgbGV0IHRleHRDb250ZW50ID0gZ2V0QW5jaG9yVGV4dEZyb21ET00oYW5jaG9yTm9kZSk7XG4gICAgY29uc3Qgbm9kZSA9ICRnZXROZWFyZXN0Tm9kZUZyb21ET01Ob2RlKGFuY2hvck5vZGUpO1xuXG4gICAgaWYgKHRleHRDb250ZW50ICE9PSBudWxsICYmICRpc1RleHROb2RlKG5vZGUpKSB7XG4gICAgICBpZiAobm9kZS5jYW5Db250YWluVGFicygpKSB7XG4gICAgICAgIGNvbnN0IGhhc1RhYkNoYXJhY3RlciA9IHRleHRDb250ZW50LmluY2x1ZGVzKCdcXHQnKTsgLy8gQXQgcHJlc2VudCwgdGhpcyBjb25kaXRpb24gaXMgcHJpbWFyaWx5IHVzZWQgZm9yIGNvZGUgaGlnaGxpZ2h0cyB3aGVuXG4gICAgICAgIC8vIGdyb3VwZWQgdG9nZXRoZXIgaW4gbGluZXMgKGRpdnMpLiBJZiBhIGNvZGUgaGlnaGxpZ2h0IGluY2x1ZGVzIGEgdGFiLFxuICAgICAgICAvLyB0aGUgbmV3bHkgdHlwZWQgY2hhcmFjdGVyIG1heSBiZSBtaXNzaW5nIGZyb20gdGhlIERPTSdzIHRleHRDb250ZW50LlxuICAgICAgICAvLyBMZXQncyB0YWtlIGFuIGV4YW1wbGUuIElmIGEgTGluZWRDb2RlTm9kZSBsb29rZWQgcm91Z2hseSBsaWtlIHRoaXM6XG4gICAgICAgIC8vIDxjb2RlPjxkaXY+PGNvZGVIaWdobGlnaHQgLz48Y29kZUhpZ2hsaWdodCAvPjwvZGl2PjwvY29kZT4sXG4gICAgICAgIC8vIHRoZSBmb2xsb3dpbmcgY291bGQgb2NjdXIgd2hlbiB1c2luZyB0YWJzOlxuICAgICAgICAvLyBhLiAvdGNvbnN0IC0tdHlwZS0tPiAnZCcgYXQgb2Zmc2V0IDEgLS1nZXQtLT4gL3Rjb25zdFxuICAgICAgICAvLyAgICAtIE1pc3NpbmcgJ2QnXG4gICAgICAgIC8vIGIuIC90Y29uc3QgLS10eXBlLS0+ICdkJyBhdCBvZmZzZXQgMyAtLWdldC0tPiAvdGNvbmRzdFxuICAgICAgICAvLyAgICAtLXR5cGUtLT4gJ2QnIGF0IG9mZnNldCAzIC0tZ2V0LS0+IC90Y29uZHN0XG4gICAgICAgIC8vICAgIC0gTWlzc2luZyBzZWNvbmQgJ2QnXG4gICAgICAgIC8vIEluIHRoZXNlIGNhc2VzLCB3ZSBjYW4gZml4IHRoZSBwcm9ibGVtIGJ5IG1hbnVhbGx5IGluc2VydGluZyB0aGVcbiAgICAgICAgLy8gbmV3bHkgdHlwZWQgY2hhcmFjdGVyIHdoZXJlIHdlIGtub3cgaXQgc2hvdWxkIGhhdmUgYmVlbi5cblxuICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCA+IDAgJiYgaGFzVGFiQ2hhcmFjdGVyKSB7XG4gICAgICAgICAgY29uc3Qgc2VsZWN0aW9uT2Zmc2V0ID0gZGF0YS5sZW5ndGg7XG4gICAgICAgICAgY29uc3QgaW5zZXJ0aW9uT2Zmc2V0ID0gYW5jaG9yT2Zmc2V0ICsgc2VsZWN0aW9uT2Zmc2V0IC0gMTtcbiAgICAgICAgICBjb25zdCBiZWZvcmVJbnNlcnRpb24gPSB0ZXh0Q29udGVudC5zbGljZSgwLCBpbnNlcnRpb25PZmZzZXQpO1xuICAgICAgICAgIGNvbnN0IGFmdGVySW5zZXJ0aW9uID0gdGV4dENvbnRlbnQuc2xpY2UoaW5zZXJ0aW9uT2Zmc2V0LCB0ZXh0Q29udGVudC5sZW5ndGgpO1xuICAgICAgICAgIHRleHRDb250ZW50ID0gYCR7YmVmb3JlSW5zZXJ0aW9ufSR7ZGF0YX0ke2FmdGVySW5zZXJ0aW9ufWA7XG4gICAgICAgICAgYW5jaG9yT2Zmc2V0ICs9IHNlbGVjdGlvbk9mZnNldDtcbiAgICAgICAgICBmb2N1c09mZnNldCArPSBzZWxlY3Rpb25PZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgIH0gLy8gRGF0YSBpcyBpbnRlbnRpb25hbGx5IHRydXRoeSwgYXMgd2UgY2hlY2sgZm9yIGJvb2xlYW4sIG51bGwgYW5kIGVtcHR5IHN0cmluZy5cblxuXG4gICAgICBpZiAodGV4dENvbnRlbnQgPT09IENPTVBPU0lUSU9OX1NVRkZJWCAmJiBkYXRhKSB7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IGRhdGEubGVuZ3RoO1xuICAgICAgICB0ZXh0Q29udGVudCA9IGRhdGE7XG4gICAgICAgIGFuY2hvck9mZnNldCA9IG9mZnNldDtcbiAgICAgICAgZm9jdXNPZmZzZXQgPSBvZmZzZXQ7XG4gICAgICB9XG5cbiAgICAgIGlmICh0ZXh0Q29udGVudCAhPT0gbnVsbCkge1xuICAgICAgICAkdXBkYXRlVGV4dE5vZGVGcm9tRE9NQ29udGVudChub2RlLCB0ZXh0Q29udGVudCwgYW5jaG9yT2Zmc2V0LCBmb2N1c09mZnNldCwgaXNDb21wb3NpdGlvbkVuZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiAkdXBkYXRlVGV4dE5vZGVGcm9tRE9NQ29udGVudCh0ZXh0Tm9kZSwgdGV4dENvbnRlbnQsIGFuY2hvck9mZnNldCwgZm9jdXNPZmZzZXQsIGNvbXBvc2l0aW9uRW5kKSB7XG4gIGxldCBub2RlID0gdGV4dE5vZGU7XG5cbiAgaWYgKG5vZGUuaXNBdHRhY2hlZCgpICYmIChjb21wb3NpdGlvbkVuZCB8fCAhbm9kZS5pc0RpcnR5KCkpKSB7XG4gICAgY29uc3QgaXNDb21wb3NpbmcgPSBub2RlLmlzQ29tcG9zaW5nKCk7XG4gICAgbGV0IG5vcm1hbGl6ZWRUZXh0Q29udGVudCA9IHRleHRDb250ZW50O1xuXG4gICAgaWYgKChpc0NvbXBvc2luZyB8fCBjb21wb3NpdGlvbkVuZCkgJiYgdGV4dENvbnRlbnRbdGV4dENvbnRlbnQubGVuZ3RoIC0gMV0gPT09IENPTVBPU0lUSU9OX1NVRkZJWCkge1xuICAgICAgbm9ybWFsaXplZFRleHRDb250ZW50ID0gdGV4dENvbnRlbnQuc2xpY2UoMCwgLTEpO1xuICAgIH1cblxuICAgIGNvbnN0IHByZXZUZXh0Q29udGVudCA9IG5vZGUuZ2V0VGV4dENvbnRlbnQoKTtcblxuICAgIGlmIChjb21wb3NpdGlvbkVuZCB8fCBub3JtYWxpemVkVGV4dENvbnRlbnQgIT09IHByZXZUZXh0Q29udGVudCkge1xuICAgICAgaWYgKG5vcm1hbGl6ZWRUZXh0Q29udGVudCA9PT0gJycpIHtcbiAgICAgICAgJHNldENvbXBvc2l0aW9uS2V5KG51bGwpO1xuXG4gICAgICAgIGlmICghSVNfU0FGQVJJICYmICFJU19JT1MgJiYgIUlTX0FQUExFX1dFQktJVCkge1xuICAgICAgICAgIC8vIEZvciBjb21wb3NpdGlvbiAobWFpbmx5IEFuZHJvaWQpLCB3ZSBoYXZlIHRvIHJlbW92ZSB0aGUgbm9kZSBvbiBhIGxhdGVyIHVwZGF0ZVxuICAgICAgICAgIGNvbnN0IGVkaXRvciA9IGdldEFjdGl2ZUVkaXRvcigpO1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgZWRpdG9yLnVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChub2RlLmlzQXR0YWNoZWQoKSkge1xuICAgICAgICAgICAgICAgIG5vZGUucmVtb3ZlKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sIDIwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub2RlLnJlbW92ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwYXJlbnQgPSBub2RlLmdldFBhcmVudCgpO1xuICAgICAgY29uc3QgcHJldlNlbGVjdGlvbiA9ICRnZXRQcmV2aW91c1NlbGVjdGlvbigpO1xuICAgICAgY29uc3QgY29tcG9zaXRpb25LZXkgPSAkZ2V0Q29tcG9zaXRpb25LZXkoKTtcbiAgICAgIGNvbnN0IG5vZGVLZXkgPSBub2RlLmdldEtleSgpO1xuXG4gICAgICBpZiAobm9kZS5pc1Rva2VuKCkgfHwgY29tcG9zaXRpb25LZXkgIT09IG51bGwgJiYgbm9kZUtleSA9PT0gY29tcG9zaXRpb25LZXkgJiYgIWlzQ29tcG9zaW5nIHx8IC8vIENoZWNrIGlmIGNoYXJhY3RlciB3YXMgYWRkZWQgYXQgdGhlIHN0YXJ0LCBhbmQgd2UgbmVlZFxuICAgICAgICAvLyB0byBjbGVhciB0aGlzIGlucHV0IGZyb20gb2NjdXJyaW5nIGFzIHRoYXQgYWN0aW9uIHdhc24ndFxuICAgICAgICAvLyBwZXJtaXR0ZWQuXG4gICAgICAgIHBhcmVudCAhPT0gbnVsbCAmJiAkaXNSYW5nZVNlbGVjdGlvbihwcmV2U2VsZWN0aW9uKSAmJiAhcGFyZW50LmNhbkluc2VydFRleHRCZWZvcmUoKSAmJiBwcmV2U2VsZWN0aW9uLmFuY2hvci5vZmZzZXQgPT09IDApIHtcbiAgICAgICAgbm9kZS5tYXJrRGlydHkoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzZWxlY3Rpb24gPSAkZ2V0U2VsZWN0aW9uKCk7XG5cbiAgICAgIGlmICghJGlzUmFuZ2VTZWxlY3Rpb24oc2VsZWN0aW9uKSB8fCBhbmNob3JPZmZzZXQgPT09IG51bGwgfHwgZm9jdXNPZmZzZXQgPT09IG51bGwpIHtcbiAgICAgICAgbm9kZS5zZXRUZXh0Q29udGVudChub3JtYWxpemVkVGV4dENvbnRlbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNlbGVjdGlvbi5zZXRUZXh0Tm9kZVJhbmdlKG5vZGUsIGFuY2hvck9mZnNldCwgbm9kZSwgZm9jdXNPZmZzZXQpO1xuXG4gICAgICBpZiAobm9kZS5pc1NlZ21lbnRlZCgpKSB7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsVGV4dENvbnRlbnQgPSBub2RlLmdldFRleHRDb250ZW50KCk7XG4gICAgICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gJGNyZWF0ZVRleHROb2RlKG9yaWdpbmFsVGV4dENvbnRlbnQpO1xuICAgICAgICBub2RlLnJlcGxhY2UocmVwbGFjZW1lbnQpO1xuICAgICAgICBub2RlID0gcmVwbGFjZW1lbnQ7XG4gICAgICB9XG5cbiAgICAgIG5vZGUuc2V0VGV4dENvbnRlbnQobm9ybWFsaXplZFRleHRDb250ZW50KTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gJHByZXZpb3VzU2libGluZ0RvZXNOb3RBY2NlcHRUZXh0KG5vZGUpIHtcbiAgY29uc3QgcHJldmlvdXNTaWJsaW5nID0gbm9kZS5nZXRQcmV2aW91c1NpYmxpbmcoKTtcbiAgcmV0dXJuICgkaXNUZXh0Tm9kZShwcmV2aW91c1NpYmxpbmcpIHx8ICRpc0VsZW1lbnROb2RlKHByZXZpb3VzU2libGluZykgJiYgcHJldmlvdXNTaWJsaW5nLmlzSW5saW5lKCkpICYmICFwcmV2aW91c1NpYmxpbmcuY2FuSW5zZXJ0VGV4dEFmdGVyKCk7XG59IC8vIFRoaXMgZnVuY3Rpb24gaXMgY29ubmVjdGVkIHRvICRzaG91bGRQcmV2ZW50RGVmYXVsdEFuZEluc2VydFRleHQgYW5kIGRldGVybWluZXMgd2hldGhlciB0aGVcbi8vIFRleHROb2RlIGJvdW5kYXJpZXMgYXJlIHdyaXRhYmxlIG9yIHdlIHNob3VsZCB1c2UgdGhlIHByZXZpb3VzL25leHQgc2libGluZyBpbnN0ZWFkLiBGb3IgZXhhbXBsZSxcbi8vIGluIHRoZSBjYXNlIG9mIGEgTGlua05vZGUsIGJvdW5kYXJpZXMgYXJlIG5vdCB3cml0YWJsZS5cblxuXG5mdW5jdGlvbiAkc2hvdWxkSW5zZXJ0VGV4dEFmdGVyT3JCZWZvcmVUZXh0Tm9kZShzZWxlY3Rpb24sIG5vZGUpIHtcbiAgaWYgKG5vZGUuaXNTZWdtZW50ZWQoKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaWYgKCFzZWxlY3Rpb24uaXNDb2xsYXBzZWQoKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGNvbnN0IG9mZnNldCA9IHNlbGVjdGlvbi5hbmNob3Iub2Zmc2V0O1xuICBjb25zdCBwYXJlbnQgPSBub2RlLmdldFBhcmVudE9yVGhyb3coKTtcbiAgY29uc3QgaXNUb2tlbiA9IG5vZGUuaXNUb2tlbigpO1xuXG4gIGlmIChvZmZzZXQgPT09IDApIHtcbiAgICByZXR1cm4gIW5vZGUuY2FuSW5zZXJ0VGV4dEJlZm9yZSgpIHx8ICFwYXJlbnQuY2FuSW5zZXJ0VGV4dEJlZm9yZSgpIHx8IGlzVG9rZW4gfHwgJHByZXZpb3VzU2libGluZ0RvZXNOb3RBY2NlcHRUZXh0KG5vZGUpO1xuICB9IGVsc2UgaWYgKG9mZnNldCA9PT0gbm9kZS5nZXRUZXh0Q29udGVudFNpemUoKSkge1xuICAgIHJldHVybiAhbm9kZS5jYW5JbnNlcnRUZXh0QWZ0ZXIoKSB8fCAhcGFyZW50LmNhbkluc2VydFRleHRBZnRlcigpIHx8IGlzVG9rZW47XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5mdW5jdGlvbiBpc1RhYihrZXlDb2RlLCBhbHRLZXksIGN0cmxLZXksIG1ldGFLZXkpIHtcbiAgcmV0dXJuIGtleUNvZGUgPT09IDkgJiYgIWFsdEtleSAmJiAhY3RybEtleSAmJiAhbWV0YUtleTtcbn1cbmZ1bmN0aW9uIGlzQm9sZChrZXlDb2RlLCBhbHRLZXksIG1ldGFLZXksIGN0cmxLZXkpIHtcbiAgcmV0dXJuIGtleUNvZGUgPT09IDY2ICYmICFhbHRLZXkgJiYgY29udHJvbE9yTWV0YShtZXRhS2V5LCBjdHJsS2V5KTtcbn1cbmZ1bmN0aW9uIGlzSXRhbGljKGtleUNvZGUsIGFsdEtleSwgbWV0YUtleSwgY3RybEtleSkge1xuICByZXR1cm4ga2V5Q29kZSA9PT0gNzMgJiYgIWFsdEtleSAmJiBjb250cm9sT3JNZXRhKG1ldGFLZXksIGN0cmxLZXkpO1xufVxuZnVuY3Rpb24gaXNVbmRlcmxpbmUoa2V5Q29kZSwgYWx0S2V5LCBtZXRhS2V5LCBjdHJsS2V5KSB7XG4gIHJldHVybiBrZXlDb2RlID09PSA4NSAmJiAhYWx0S2V5ICYmIGNvbnRyb2xPck1ldGEobWV0YUtleSwgY3RybEtleSk7XG59XG5mdW5jdGlvbiBpc1BhcmFncmFwaChrZXlDb2RlLCBzaGlmdEtleSkge1xuICByZXR1cm4gaXNSZXR1cm4oa2V5Q29kZSkgJiYgIXNoaWZ0S2V5O1xufVxuZnVuY3Rpb24gaXNMaW5lQnJlYWsoa2V5Q29kZSwgc2hpZnRLZXkpIHtcbiAgcmV0dXJuIGlzUmV0dXJuKGtleUNvZGUpICYmIHNoaWZ0S2V5O1xufSAvLyBJbnNlcnRzIGEgbmV3IGxpbmUgYWZ0ZXIgdGhlIHNlbGVjdGlvblxuXG5mdW5jdGlvbiBpc09wZW5MaW5lQnJlYWsoa2V5Q29kZSwgY3RybEtleSkge1xuICAvLyA3OSA9IEtleU9cbiAgcmV0dXJuIElTX0FQUExFICYmIGN0cmxLZXkgJiYga2V5Q29kZSA9PT0gNzk7XG59XG5mdW5jdGlvbiBpc0RlbGV0ZVdvcmRCYWNrd2FyZChrZXlDb2RlLCBhbHRLZXksIGN0cmxLZXkpIHtcbiAgcmV0dXJuIGlzQmFja3NwYWNlKGtleUNvZGUpICYmIChJU19BUFBMRSA/IGFsdEtleSA6IGN0cmxLZXkpO1xufVxuZnVuY3Rpb24gaXNEZWxldGVXb3JkRm9yd2FyZChrZXlDb2RlLCBhbHRLZXksIGN0cmxLZXkpIHtcbiAgcmV0dXJuIGlzRGVsZXRlKGtleUNvZGUpICYmIChJU19BUFBMRSA/IGFsdEtleSA6IGN0cmxLZXkpO1xufVxuZnVuY3Rpb24gaXNEZWxldGVMaW5lQmFja3dhcmQoa2V5Q29kZSwgbWV0YUtleSkge1xuICByZXR1cm4gSVNfQVBQTEUgJiYgbWV0YUtleSAmJiBpc0JhY2tzcGFjZShrZXlDb2RlKTtcbn1cbmZ1bmN0aW9uIGlzRGVsZXRlTGluZUZvcndhcmQoa2V5Q29kZSwgbWV0YUtleSkge1xuICByZXR1cm4gSVNfQVBQTEUgJiYgbWV0YUtleSAmJiBpc0RlbGV0ZShrZXlDb2RlKTtcbn1cbmZ1bmN0aW9uIGlzRGVsZXRlQmFja3dhcmQoa2V5Q29kZSwgYWx0S2V5LCBtZXRhS2V5LCBjdHJsS2V5KSB7XG4gIGlmIChJU19BUFBMRSkge1xuICAgIGlmIChhbHRLZXkgfHwgbWV0YUtleSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiBpc0JhY2tzcGFjZShrZXlDb2RlKSB8fCBrZXlDb2RlID09PSA3MiAmJiBjdHJsS2V5O1xuICB9XG5cbiAgaWYgKGN0cmxLZXkgfHwgYWx0S2V5IHx8IG1ldGFLZXkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gaXNCYWNrc3BhY2Uoa2V5Q29kZSk7XG59XG5mdW5jdGlvbiBpc0RlbGV0ZUZvcndhcmQoa2V5Q29kZSwgY3RybEtleSwgc2hpZnRLZXksIGFsdEtleSwgbWV0YUtleSkge1xuICBpZiAoSVNfQVBQTEUpIHtcbiAgICBpZiAoc2hpZnRLZXkgfHwgYWx0S2V5IHx8IG1ldGFLZXkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gaXNEZWxldGUoa2V5Q29kZSkgfHwga2V5Q29kZSA9PT0gNjggJiYgY3RybEtleTtcbiAgfVxuXG4gIGlmIChjdHJsS2V5IHx8IGFsdEtleSB8fCBtZXRhS2V5KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIGlzRGVsZXRlKGtleUNvZGUpO1xufVxuZnVuY3Rpb24gaXNVbmRvKGtleUNvZGUsIHNoaWZ0S2V5LCBtZXRhS2V5LCBjdHJsS2V5KSB7XG4gIHJldHVybiBrZXlDb2RlID09PSA5MCAmJiAhc2hpZnRLZXkgJiYgY29udHJvbE9yTWV0YShtZXRhS2V5LCBjdHJsS2V5KTtcbn1cbmZ1bmN0aW9uIGlzUmVkbyhrZXlDb2RlLCBzaGlmdEtleSwgbWV0YUtleSwgY3RybEtleSkge1xuICBpZiAoSVNfQVBQTEUpIHtcbiAgICByZXR1cm4ga2V5Q29kZSA9PT0gOTAgJiYgbWV0YUtleSAmJiBzaGlmdEtleTtcbiAgfVxuXG4gIHJldHVybiBrZXlDb2RlID09PSA4OSAmJiBjdHJsS2V5IHx8IGtleUNvZGUgPT09IDkwICYmIGN0cmxLZXkgJiYgc2hpZnRLZXk7XG59XG5mdW5jdGlvbiBpc0NvcHkoa2V5Q29kZSwgc2hpZnRLZXksIG1ldGFLZXksIGN0cmxLZXkpIHtcbiAgaWYgKHNoaWZ0S2V5KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKGtleUNvZGUgPT09IDY3KSB7XG4gICAgcmV0dXJuIElTX0FQUExFID8gbWV0YUtleSA6IGN0cmxLZXk7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBpc0N1dChrZXlDb2RlLCBzaGlmdEtleSwgbWV0YUtleSwgY3RybEtleSkge1xuICBpZiAoc2hpZnRLZXkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoa2V5Q29kZSA9PT0gODgpIHtcbiAgICByZXR1cm4gSVNfQVBQTEUgPyBtZXRhS2V5IDogY3RybEtleTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gaXNBcnJvd0xlZnQoa2V5Q29kZSkge1xuICByZXR1cm4ga2V5Q29kZSA9PT0gMzc7XG59XG5cbmZ1bmN0aW9uIGlzQXJyb3dSaWdodChrZXlDb2RlKSB7XG4gIHJldHVybiBrZXlDb2RlID09PSAzOTtcbn1cblxuZnVuY3Rpb24gaXNBcnJvd1VwKGtleUNvZGUpIHtcbiAgcmV0dXJuIGtleUNvZGUgPT09IDM4O1xufVxuXG5mdW5jdGlvbiBpc0Fycm93RG93bihrZXlDb2RlKSB7XG4gIHJldHVybiBrZXlDb2RlID09PSA0MDtcbn1cblxuZnVuY3Rpb24gaXNNb3ZlQmFja3dhcmQoa2V5Q29kZSwgY3RybEtleSwgYWx0S2V5LCBtZXRhS2V5KSB7XG4gIHJldHVybiBpc0Fycm93TGVmdChrZXlDb2RlKSAmJiAhY3RybEtleSAmJiAhbWV0YUtleSAmJiAhYWx0S2V5O1xufVxuZnVuY3Rpb24gaXNNb3ZlVG9TdGFydChrZXlDb2RlLCBjdHJsS2V5LCBzaGlmdEtleSwgYWx0S2V5LCBtZXRhS2V5KSB7XG4gIHJldHVybiBpc0Fycm93TGVmdChrZXlDb2RlKSAmJiAhYWx0S2V5ICYmICFzaGlmdEtleSAmJiAoY3RybEtleSB8fCBtZXRhS2V5KTtcbn1cbmZ1bmN0aW9uIGlzTW92ZUZvcndhcmQoa2V5Q29kZSwgY3RybEtleSwgYWx0S2V5LCBtZXRhS2V5KSB7XG4gIHJldHVybiBpc0Fycm93UmlnaHQoa2V5Q29kZSkgJiYgIWN0cmxLZXkgJiYgIW1ldGFLZXkgJiYgIWFsdEtleTtcbn1cbmZ1bmN0aW9uIGlzTW92ZVRvRW5kKGtleUNvZGUsIGN0cmxLZXksIHNoaWZ0S2V5LCBhbHRLZXksIG1ldGFLZXkpIHtcbiAgcmV0dXJuIGlzQXJyb3dSaWdodChrZXlDb2RlKSAmJiAhYWx0S2V5ICYmICFzaGlmdEtleSAmJiAoY3RybEtleSB8fCBtZXRhS2V5KTtcbn1cbmZ1bmN0aW9uIGlzTW92ZVVwKGtleUNvZGUsIGN0cmxLZXksIG1ldGFLZXkpIHtcbiAgcmV0dXJuIGlzQXJyb3dVcChrZXlDb2RlKSAmJiAhY3RybEtleSAmJiAhbWV0YUtleTtcbn1cbmZ1bmN0aW9uIGlzTW92ZURvd24oa2V5Q29kZSwgY3RybEtleSwgbWV0YUtleSkge1xuICByZXR1cm4gaXNBcnJvd0Rvd24oa2V5Q29kZSkgJiYgIWN0cmxLZXkgJiYgIW1ldGFLZXk7XG59XG5mdW5jdGlvbiBpc01vZGlmaWVyKGN0cmxLZXksIHNoaWZ0S2V5LCBhbHRLZXksIG1ldGFLZXkpIHtcbiAgcmV0dXJuIGN0cmxLZXkgfHwgc2hpZnRLZXkgfHwgYWx0S2V5IHx8IG1ldGFLZXk7XG59XG5mdW5jdGlvbiBpc1NwYWNlKGtleUNvZGUpIHtcbiAgcmV0dXJuIGtleUNvZGUgPT09IDMyO1xufVxuZnVuY3Rpb24gY29udHJvbE9yTWV0YShtZXRhS2V5LCBjdHJsS2V5KSB7XG4gIGlmIChJU19BUFBMRSkge1xuICAgIHJldHVybiBtZXRhS2V5O1xuICB9XG5cbiAgcmV0dXJuIGN0cmxLZXk7XG59XG5mdW5jdGlvbiBpc1JldHVybihrZXlDb2RlKSB7XG4gIHJldHVybiBrZXlDb2RlID09PSAxMztcbn1cbmZ1bmN0aW9uIGlzQmFja3NwYWNlKGtleUNvZGUpIHtcbiAgcmV0dXJuIGtleUNvZGUgPT09IDg7XG59XG5mdW5jdGlvbiBpc0VzY2FwZShrZXlDb2RlKSB7XG4gIHJldHVybiBrZXlDb2RlID09PSAyNztcbn1cbmZ1bmN0aW9uIGlzRGVsZXRlKGtleUNvZGUpIHtcbiAgcmV0dXJuIGtleUNvZGUgPT09IDQ2O1xufVxuZnVuY3Rpb24gZ2V0Q2FjaGVkQ2xhc3NOYW1lQXJyYXkoY2xhc3NOYW1lc1RoZW1lLCBjbGFzc05hbWVUaGVtZVR5cGUpIHtcbiAgY29uc3QgY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXNUaGVtZVtjbGFzc05hbWVUaGVtZVR5cGVdOyAvLyBBcyB3ZSdyZSB1c2luZyBjbGFzc0xpc3QsIHdlIG5lZWRcbiAgLy8gdG8gaGFuZGxlIGNsYXNzTmFtZSB0b2tlbnMgdGhhdCBoYXZlIHNwYWNlcy5cbiAgLy8gVGhlIGVhc2llc3Qgd2F5IHRvIGRvIHRoaXMgdG8gY29udmVydCB0aGVcbiAgLy8gY2xhc3NOYW1lIHRva2VucyB0byBhbiBhcnJheSB0aGF0IGNhbiBiZVxuICAvLyBhcHBsaWVkIHRvIGNsYXNzTGlzdC5hZGQoKS9yZW1vdmUoKS5cblxuICBpZiAodHlwZW9mIGNsYXNzTmFtZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgY29uc3QgY2xhc3NOYW1lc0FyciA9IGNsYXNzTmFtZXMuc3BsaXQoJyAnKTtcbiAgICBjbGFzc05hbWVzVGhlbWVbY2xhc3NOYW1lVGhlbWVUeXBlXSA9IGNsYXNzTmFtZXNBcnI7XG4gICAgcmV0dXJuIGNsYXNzTmFtZXNBcnI7XG4gIH1cblxuICByZXR1cm4gY2xhc3NOYW1lcztcbn1cbmZ1bmN0aW9uIHNldE11dGF0ZWROb2RlKG11dGF0ZWROb2RlcywgcmVnaXN0ZXJlZE5vZGVzLCBtdXRhdGlvbkxpc3RlbmVycywgbm9kZSwgbXV0YXRpb24pIHtcbiAgaWYgKG11dGF0aW9uTGlzdGVuZXJzLnNpemUgPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBub2RlVHlwZSA9IG5vZGUuX190eXBlO1xuICBjb25zdCBub2RlS2V5ID0gbm9kZS5fX2tleTtcbiAgY29uc3QgcmVnaXN0ZXJlZE5vZGUgPSByZWdpc3RlcmVkTm9kZXMuZ2V0KG5vZGVUeXBlKTtcblxuICBpZiAocmVnaXN0ZXJlZE5vZGUgPT09IHVuZGVmaW5lZCkge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGBUeXBlICR7bm9kZVR5cGV9IG5vdCBpbiByZWdpc3RlcmVkTm9kZXNgKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBrbGFzcyA9IHJlZ2lzdGVyZWROb2RlLmtsYXNzO1xuICBsZXQgbXV0YXRlZE5vZGVzQnlUeXBlID0gbXV0YXRlZE5vZGVzLmdldChrbGFzcyk7XG5cbiAgaWYgKG11dGF0ZWROb2Rlc0J5VHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbXV0YXRlZE5vZGVzQnlUeXBlID0gbmV3IE1hcCgpO1xuICAgIG11dGF0ZWROb2Rlcy5zZXQoa2xhc3MsIG11dGF0ZWROb2Rlc0J5VHlwZSk7XG4gIH1cblxuICBjb25zdCBwcmV2TXV0YXRpb24gPSBtdXRhdGVkTm9kZXNCeVR5cGUuZ2V0KG5vZGVLZXkpOyAvLyBJZiB0aGUgbm9kZSBoYXMgYWxyZWFkeSBiZWVuIFwiZGVzdHJveWVkXCIsIHlldCB3ZSBhcmVcbiAgLy8gcmUtbWFraW5nIGl0LCB0aGVuIHRoaXMgbWVhbnMgYSBtb3ZlIGxpa2VseSBoYXBwZW5lZC5cbiAgLy8gV2Ugc2hvdWxkIGNoYW5nZSB0aGUgbXV0YXRpb24gdG8gYmUgdGhhdCBvZiBcInVwZGF0ZWRcIlxuICAvLyBpbnN0ZWFkLlxuXG4gIGNvbnN0IGlzTW92ZSA9IHByZXZNdXRhdGlvbiA9PT0gJ2Rlc3Ryb3llZCcgJiYgbXV0YXRpb24gPT09ICdjcmVhdGVkJztcblxuICBpZiAocHJldk11dGF0aW9uID09PSB1bmRlZmluZWQgfHwgaXNNb3ZlKSB7XG4gICAgbXV0YXRlZE5vZGVzQnlUeXBlLnNldChub2RlS2V5LCBpc01vdmUgPyAndXBkYXRlZCcgOiBtdXRhdGlvbik7XG4gIH1cbn1cbmZ1bmN0aW9uICRub2Rlc09mVHlwZShrbGFzcykge1xuICBjb25zdCBlZGl0b3JTdGF0ZSA9IGdldEFjdGl2ZUVkaXRvclN0YXRlKCk7XG4gIGNvbnN0IHJlYWRPbmx5ID0gZWRpdG9yU3RhdGUuX3JlYWRPbmx5O1xuICBjb25zdCBrbGFzc1R5cGUgPSBrbGFzcy5nZXRUeXBlKCk7XG4gIGNvbnN0IG5vZGVzID0gZWRpdG9yU3RhdGUuX25vZGVNYXA7XG4gIGNvbnN0IG5vZGVzT2ZUeXBlID0gW107XG5cbiAgZm9yIChjb25zdCBbLCBub2RlXSBvZiBub2Rlcykge1xuICAgIGlmIChub2RlIGluc3RhbmNlb2Yga2xhc3MgJiYgbm9kZS5fX3R5cGUgPT09IGtsYXNzVHlwZSAmJiAocmVhZE9ubHkgfHwgbm9kZS5pc0F0dGFjaGVkKCkpKSB7XG4gICAgICBub2Rlc09mVHlwZS5wdXNoKG5vZGUpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBub2Rlc09mVHlwZTtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZUVsZW1lbnQoZWxlbWVudCwgaXNCYWNrd2FyZCwgZm9jdXNPZmZzZXQpIHtcbiAgY29uc3QgcGFyZW50ID0gZWxlbWVudC5nZXRQYXJlbnQoKTtcbiAgbGV0IG9mZnNldCA9IGZvY3VzT2Zmc2V0O1xuICBsZXQgYmxvY2sgPSBlbGVtZW50O1xuXG4gIGlmIChwYXJlbnQgIT09IG51bGwpIHtcbiAgICBpZiAoaXNCYWNrd2FyZCAmJiBmb2N1c09mZnNldCA9PT0gMCkge1xuICAgICAgb2Zmc2V0ID0gYmxvY2suZ2V0SW5kZXhXaXRoaW5QYXJlbnQoKTtcbiAgICAgIGJsb2NrID0gcGFyZW50O1xuICAgIH0gZWxzZSBpZiAoIWlzQmFja3dhcmQgJiYgZm9jdXNPZmZzZXQgPT09IGJsb2NrLmdldENoaWxkcmVuU2l6ZSgpKSB7XG4gICAgICBvZmZzZXQgPSBibG9jay5nZXRJbmRleFdpdGhpblBhcmVudCgpICsgMTtcbiAgICAgIGJsb2NrID0gcGFyZW50O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBibG9jay5nZXRDaGlsZEF0SW5kZXgoaXNCYWNrd2FyZCA/IG9mZnNldCAtIDEgOiBvZmZzZXQpO1xufVxuXG5mdW5jdGlvbiAkZ2V0QWRqYWNlbnROb2RlKGZvY3VzLCBpc0JhY2t3YXJkKSB7XG4gIGNvbnN0IGZvY3VzT2Zmc2V0ID0gZm9jdXMub2Zmc2V0O1xuXG4gIGlmIChmb2N1cy50eXBlID09PSAnZWxlbWVudCcpIHtcbiAgICBjb25zdCBibG9jayA9IGZvY3VzLmdldE5vZGUoKTtcbiAgICByZXR1cm4gcmVzb2x2ZUVsZW1lbnQoYmxvY2ssIGlzQmFja3dhcmQsIGZvY3VzT2Zmc2V0KTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBmb2N1c05vZGUgPSBmb2N1cy5nZXROb2RlKCk7XG5cbiAgICBpZiAoaXNCYWNrd2FyZCAmJiBmb2N1c09mZnNldCA9PT0gMCB8fCAhaXNCYWNrd2FyZCAmJiBmb2N1c09mZnNldCA9PT0gZm9jdXNOb2RlLmdldFRleHRDb250ZW50U2l6ZSgpKSB7XG4gICAgICBjb25zdCBwb3NzaWJsZU5vZGUgPSBpc0JhY2t3YXJkID8gZm9jdXNOb2RlLmdldFByZXZpb3VzU2libGluZygpIDogZm9jdXNOb2RlLmdldE5leHRTaWJsaW5nKCk7XG5cbiAgICAgIGlmIChwb3NzaWJsZU5vZGUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVFbGVtZW50KGZvY3VzTm9kZS5nZXRQYXJlbnRPclRocm93KCksIGlzQmFja3dhcmQsIGZvY3VzTm9kZS5nZXRJbmRleFdpdGhpblBhcmVudCgpICsgKGlzQmFja3dhcmQgPyAwIDogMSkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcG9zc2libGVOb2RlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gaXNGaXJlZm94Q2xpcGJvYXJkRXZlbnRzKGVkaXRvcikge1xuICBjb25zdCBldmVudCA9IGdldFdpbmRvdyhlZGl0b3IpLmV2ZW50O1xuICBjb25zdCBpbnB1dFR5cGUgPSBldmVudCAmJiBldmVudC5pbnB1dFR5cGU7XG4gIHJldHVybiBpbnB1dFR5cGUgPT09ICdpbnNlcnRGcm9tUGFzdGUnIHx8IGlucHV0VHlwZSA9PT0gJ2luc2VydEZyb21QYXN0ZUFzUXVvdGF0aW9uJztcbn1cbmZ1bmN0aW9uIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIGNvbW1hbmQsIHBheWxvYWQpIHtcbiAgcmV0dXJuIHRyaWdnZXJDb21tYW5kTGlzdGVuZXJzKGVkaXRvciwgY29tbWFuZCwgcGF5bG9hZCk7XG59XG5mdW5jdGlvbiAkdGV4dENvbnRlbnRSZXF1aXJlc0RvdWJsZUxpbmVicmVha0F0RW5kKG5vZGUpIHtcbiAgcmV0dXJuICEkaXNSb290Tm9kZShub2RlKSAmJiAhbm9kZS5pc0xhc3RDaGlsZCgpICYmICFub2RlLmlzSW5saW5lKCk7XG59XG5mdW5jdGlvbiBnZXRFbGVtZW50QnlLZXlPclRocm93KGVkaXRvciwga2V5KSB7XG4gIGNvbnN0IGVsZW1lbnQgPSBlZGl0b3IuX2tleVRvRE9NTWFwLmdldChrZXkpO1xuXG4gIGlmIChlbGVtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICB7XG4gICAgICB0aHJvdyBFcnJvcihgUmVjb25jaWxpYXRpb246IGNvdWxkIG5vdCBmaW5kIERPTSBlbGVtZW50IGZvciBub2RlIGtleSAke2tleX1gKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZWxlbWVudDtcbn1cbmZ1bmN0aW9uIGdldFBhcmVudEVsZW1lbnQobm9kZSkge1xuICBjb25zdCBwYXJlbnRFbGVtZW50ID0gbm9kZS5hc3NpZ25lZFNsb3QgfHwgbm9kZS5wYXJlbnRFbGVtZW50O1xuICByZXR1cm4gcGFyZW50RWxlbWVudCAhPT0gbnVsbCAmJiBwYXJlbnRFbGVtZW50Lm5vZGVUeXBlID09PSAxMSA/IHBhcmVudEVsZW1lbnQuaG9zdCA6IHBhcmVudEVsZW1lbnQ7XG59XG5mdW5jdGlvbiBzY3JvbGxJbnRvVmlld0lmTmVlZGVkKGVkaXRvciwgc2VsZWN0aW9uUmVjdCwgcm9vdEVsZW1lbnQpIHtcbiAgY29uc3QgZG9jID0gcm9vdEVsZW1lbnQub3duZXJEb2N1bWVudDtcbiAgY29uc3QgZGVmYXVsdFZpZXcgPSBkb2MuZGVmYXVsdFZpZXc7XG5cbiAgaWYgKGRlZmF1bHRWaWV3ID09PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IHtcbiAgICB0b3A6IGN1cnJlbnRUb3AsXG4gICAgYm90dG9tOiBjdXJyZW50Qm90dG9tXG4gIH0gPSBzZWxlY3Rpb25SZWN0O1xuICBsZXQgdGFyZ2V0VG9wID0gMDtcbiAgbGV0IHRhcmdldEJvdHRvbSA9IDA7XG4gIGxldCBlbGVtZW50ID0gcm9vdEVsZW1lbnQ7XG5cbiAgd2hpbGUgKGVsZW1lbnQgIT09IG51bGwpIHtcbiAgICBjb25zdCBpc0JvZHlFbGVtZW50ID0gZWxlbWVudCA9PT0gZG9jLmJvZHk7XG5cbiAgICBpZiAoaXNCb2R5RWxlbWVudCkge1xuICAgICAgdGFyZ2V0VG9wID0gMDtcbiAgICAgIHRhcmdldEJvdHRvbSA9IGdldFdpbmRvdyhlZGl0b3IpLmlubmVySGVpZ2h0O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0YXJnZXRSZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHRhcmdldFRvcCA9IHRhcmdldFJlY3QudG9wO1xuICAgICAgdGFyZ2V0Qm90dG9tID0gdGFyZ2V0UmVjdC5ib3R0b207XG4gICAgfVxuXG4gICAgbGV0IGRpZmYgPSAwO1xuXG4gICAgaWYgKGN1cnJlbnRUb3AgPCB0YXJnZXRUb3ApIHtcbiAgICAgIGRpZmYgPSAtKHRhcmdldFRvcCAtIGN1cnJlbnRUb3ApO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudEJvdHRvbSA+IHRhcmdldEJvdHRvbSkge1xuICAgICAgZGlmZiA9IGN1cnJlbnRCb3R0b20gLSB0YXJnZXRCb3R0b207XG4gICAgfVxuXG4gICAgaWYgKGRpZmYgIT09IDApIHtcbiAgICAgIGlmIChpc0JvZHlFbGVtZW50KSB7XG4gICAgICAgIC8vIE9ubHkgaGFuZGxlcyBzY3JvbGxpbmcgb2YgWSBheGlzXG4gICAgICAgIGRlZmF1bHRWaWV3LnNjcm9sbEJ5KDAsIGRpZmYpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2Nyb2xsVG9wID0gZWxlbWVudC5zY3JvbGxUb3A7XG4gICAgICAgIGVsZW1lbnQuc2Nyb2xsVG9wICs9IGRpZmY7XG4gICAgICAgIGNvbnN0IHlPZmZzZXQgPSBlbGVtZW50LnNjcm9sbFRvcCAtIHNjcm9sbFRvcDtcbiAgICAgICAgY3VycmVudFRvcCAtPSB5T2Zmc2V0O1xuICAgICAgICBjdXJyZW50Qm90dG9tIC09IHlPZmZzZXQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGlzQm9keUVsZW1lbnQpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGVsZW1lbnQgPSBnZXRQYXJlbnRFbGVtZW50KGVsZW1lbnQpO1xuICB9XG59XG5mdW5jdGlvbiAkYWRkVXBkYXRlVGFnKHRhZykge1xuICBlcnJvck9uUmVhZE9ubHkoKTtcbiAgY29uc3QgZWRpdG9yID0gZ2V0QWN0aXZlRWRpdG9yKCk7XG5cbiAgZWRpdG9yLl91cGRhdGVUYWdzLmFkZCh0YWcpO1xufVxuZnVuY3Rpb24gJG1heWJlTW92ZUNoaWxkcmVuU2VsZWN0aW9uVG9QYXJlbnQocGFyZW50Tm9kZSwgb2Zmc2V0ID0gMCkge1xuICBpZiAob2Zmc2V0ICE9PSAwKSB7XG4gICAge1xuICAgICAgdGhyb3cgRXJyb3IoYFRPRE9gKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBzZWxlY3Rpb24gPSAkZ2V0U2VsZWN0aW9uKCk7XG5cbiAgaWYgKCEkaXNSYW5nZVNlbGVjdGlvbihzZWxlY3Rpb24pIHx8ICEkaXNFbGVtZW50Tm9kZShwYXJlbnROb2RlKSkge1xuICAgIHJldHVybiBzZWxlY3Rpb247XG4gIH1cblxuICBjb25zdCB7XG4gICAgYW5jaG9yLFxuICAgIGZvY3VzXG4gIH0gPSBzZWxlY3Rpb247XG4gIGNvbnN0IGFuY2hvck5vZGUgPSBhbmNob3IuZ2V0Tm9kZSgpO1xuICBjb25zdCBmb2N1c05vZGUgPSBmb2N1cy5nZXROb2RlKCk7XG5cbiAgaWYgKCRoYXNBbmNlc3RvcihhbmNob3JOb2RlLCBwYXJlbnROb2RlKSkge1xuICAgIGFuY2hvci5zZXQocGFyZW50Tm9kZS5fX2tleSwgMCwgJ2VsZW1lbnQnKTtcbiAgfVxuXG4gIGlmICgkaGFzQW5jZXN0b3IoZm9jdXNOb2RlLCBwYXJlbnROb2RlKSkge1xuICAgIGZvY3VzLnNldChwYXJlbnROb2RlLl9fa2V5LCAwLCAnZWxlbWVudCcpO1xuICB9XG5cbiAgcmV0dXJuIHNlbGVjdGlvbjtcbn1cbmZ1bmN0aW9uICRoYXNBbmNlc3RvcihjaGlsZCwgdGFyZ2V0Tm9kZSkge1xuICBsZXQgcGFyZW50ID0gY2hpbGQuZ2V0UGFyZW50KCk7XG5cbiAgd2hpbGUgKHBhcmVudCAhPT0gbnVsbCkge1xuICAgIGlmIChwYXJlbnQuaXModGFyZ2V0Tm9kZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHBhcmVudCA9IHBhcmVudC5nZXRQYXJlbnQoKTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGdldERlZmF1bHRWaWV3KGRvbUVsZW0pIHtcbiAgY29uc3Qgb3duZXJEb2MgPSBkb21FbGVtLm93bmVyRG9jdW1lbnQ7XG4gIHJldHVybiBvd25lckRvYyAmJiBvd25lckRvYy5kZWZhdWx0VmlldyB8fCBudWxsO1xufVxuZnVuY3Rpb24gZ2V0V2luZG93KGVkaXRvcikge1xuICBjb25zdCB3aW5kb3dPYmogPSBlZGl0b3IuX3dpbmRvdztcblxuICBpZiAod2luZG93T2JqID09PSBudWxsKSB7XG4gICAge1xuICAgICAgdGhyb3cgRXJyb3IoYHdpbmRvdyBvYmplY3Qgbm90IGZvdW5kYCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHdpbmRvd09iajtcbn1cbmZ1bmN0aW9uICRpc0lubGluZUVsZW1lbnRPckRlY29yYXRvck5vZGUobm9kZSkge1xuICByZXR1cm4gJGlzRWxlbWVudE5vZGUobm9kZSkgJiYgbm9kZS5pc0lubGluZSgpIHx8ICRpc0RlY29yYXRvck5vZGUobm9kZSkgJiYgbm9kZS5pc0lubGluZSgpO1xufVxuZnVuY3Rpb24gJGdldE5lYXJlc3RSb290T3JTaGFkb3dSb290KG5vZGUpIHtcbiAgbGV0IHBhcmVudCA9IG5vZGUuZ2V0UGFyZW50T3JUaHJvdygpO1xuXG4gIHdoaWxlIChwYXJlbnQgIT09IG51bGwpIHtcbiAgICBpZiAoJGlzUm9vdE9yU2hhZG93Um9vdChwYXJlbnQpKSB7XG4gICAgICByZXR1cm4gcGFyZW50O1xuICAgIH1cblxuICAgIHBhcmVudCA9IHBhcmVudC5nZXRQYXJlbnRPclRocm93KCk7XG4gIH1cblxuICByZXR1cm4gcGFyZW50O1xufVxuZnVuY3Rpb24gJGlzUm9vdE9yU2hhZG93Um9vdChub2RlKSB7XG4gIHJldHVybiAkaXNSb290Tm9kZShub2RlKSB8fCAkaXNFbGVtZW50Tm9kZShub2RlKSAmJiBub2RlLmlzU2hhZG93Um9vdCgpO1xufVxuZnVuY3Rpb24gJGNvcHlOb2RlKG5vZGUpIHtcbiAgLy8gQHRzLWlnbm9yZVxuICBjb25zdCBjb3B5ID0gbm9kZS5jb25zdHJ1Y3Rvci5jbG9uZShub2RlKTtcbiAgJHNldE5vZGVLZXkoY29weSwgbnVsbCk7XG4gIHJldHVybiBjb3B5O1xufVxuZnVuY3Rpb24gJGFwcGx5Tm9kZVJlcGxhY2VtZW50KG5vZGUpIHtcbiAgY29uc3QgZWRpdG9yID0gZ2V0QWN0aXZlRWRpdG9yKCk7XG4gIGNvbnN0IG5vZGVUeXBlID0gbm9kZS5jb25zdHJ1Y3Rvci5nZXRUeXBlKCk7XG5cbiAgY29uc3QgcmVnaXN0ZXJlZE5vZGUgPSBlZGl0b3IuX25vZGVzLmdldChub2RlVHlwZSk7XG5cbiAgaWYgKHJlZ2lzdGVyZWROb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICB7XG4gICAgICB0aHJvdyBFcnJvcihgJGluaXRpYWxpemVOb2RlIGZhaWxlZC4gRW5zdXJlIG5vZGUgaGFzIGJlZW4gcmVnaXN0ZXJlZCB0byB0aGUgZWRpdG9yLiBZb3UgY2FuIGRvIHRoaXMgYnkgcGFzc2luZyB0aGUgbm9kZSBjbGFzcyB2aWEgdGhlIFwibm9kZXNcIiBhcnJheSBpbiB0aGUgZWRpdG9yIGNvbmZpZy5gKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCByZXBsYWNlRnVuYyA9IHJlZ2lzdGVyZWROb2RlLnJlcGxhY2U7XG5cbiAgaWYgKHJlcGxhY2VGdW5jICE9PSBudWxsKSB7XG4gICAgY29uc3QgcmVwbGFjZW1lbnROb2RlID0gcmVwbGFjZUZ1bmMobm9kZSk7XG5cbiAgICBpZiAoIShyZXBsYWNlbWVudE5vZGUgaW5zdGFuY2VvZiBub2RlLmNvbnN0cnVjdG9yKSkge1xuICAgICAge1xuICAgICAgICB0aHJvdyBFcnJvcihgJGluaXRpYWxpemVOb2RlIGZhaWxlZC4gRW5zdXJlIHJlcGxhY2VtZW50IG5vZGUgaXMgYSBzdWJjbGFzcyBvZiB0aGUgb3JpZ2luYWwgbm9kZS5gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVwbGFjZW1lbnROb2RlO1xuICB9XG5cbiAgcmV0dXJuIG5vZGU7XG59XG5mdW5jdGlvbiBlcnJvck9uSW5zZXJ0VGV4dE5vZGVPblJvb3Qobm9kZSwgaW5zZXJ0Tm9kZSkge1xuICBjb25zdCBwYXJlbnROb2RlID0gbm9kZS5nZXRQYXJlbnQoKTtcblxuICBpZiAoJGlzUm9vdE5vZGUocGFyZW50Tm9kZSkgJiYgISRpc0VsZW1lbnROb2RlKGluc2VydE5vZGUpICYmICEkaXNEZWNvcmF0b3JOb2RlKGluc2VydE5vZGUpKSB7XG4gICAge1xuICAgICAgdGhyb3cgRXJyb3IoYE9ubHkgZWxlbWVudCBvciBkZWNvcmF0b3Igbm9kZXMgY2FuIGJlIGluc2VydGVkIGluIHRvIHRoZSByb290IG5vZGVgKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlQmxvY2tDdXJzb3JFbGVtZW50KGVkaXRvckNvbmZpZykge1xuICBjb25zdCB0aGVtZSA9IGVkaXRvckNvbmZpZy50aGVtZTtcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBlbGVtZW50LmNvbnRlbnRFZGl0YWJsZSA9ICdmYWxzZSc7XG4gIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWxleGljYWwtY3Vyc29yJywgJ3RydWUnKTtcbiAgbGV0IGJsb2NrQ3Vyc29yVGhlbWUgPSB0aGVtZS5ibG9ja0N1cnNvcjtcblxuICBpZiAoYmxvY2tDdXJzb3JUaGVtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKHR5cGVvZiBibG9ja0N1cnNvclRoZW1lID09PSAnc3RyaW5nJykge1xuICAgICAgY29uc3QgY2xhc3NOYW1lc0FyciA9IGJsb2NrQ3Vyc29yVGhlbWUuc3BsaXQoJyAnKTsgLy8gQHRzLWV4cGVjdC1lcnJvcjogaW50ZW50aW9uYWxcblxuICAgICAgYmxvY2tDdXJzb3JUaGVtZSA9IHRoZW1lLmJsb2NrQ3Vyc29yID0gY2xhc3NOYW1lc0FycjtcbiAgICB9XG5cbiAgICBpZiAoYmxvY2tDdXJzb3JUaGVtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4uYmxvY2tDdXJzb3JUaGVtZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIG5lZWRzQmxvY2tDdXJzb3Iobm9kZSkge1xuICByZXR1cm4gKCRpc0RlY29yYXRvck5vZGUobm9kZSkgfHwgJGlzRWxlbWVudE5vZGUobm9kZSkgJiYgIW5vZGUuY2FuQmVFbXB0eSgpKSAmJiAhbm9kZS5pc0lubGluZSgpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVET01CbG9ja0N1cnNvckVsZW1lbnQoYmxvY2tDdXJzb3JFbGVtZW50LCBlZGl0b3IsIHJvb3RFbGVtZW50KSB7XG4gIHJvb3RFbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjYXJldC1jb2xvcicpO1xuICBlZGl0b3IuX2Jsb2NrQ3Vyc29yRWxlbWVudCA9IG51bGw7XG4gIGNvbnN0IHBhcmVudEVsZW1lbnQgPSBibG9ja0N1cnNvckVsZW1lbnQucGFyZW50RWxlbWVudDtcblxuICBpZiAocGFyZW50RWxlbWVudCAhPT0gbnVsbCkge1xuICAgIHBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoYmxvY2tDdXJzb3JFbGVtZW50KTtcbiAgfVxufVxuZnVuY3Rpb24gdXBkYXRlRE9NQmxvY2tDdXJzb3JFbGVtZW50KGVkaXRvciwgcm9vdEVsZW1lbnQsIG5leHRTZWxlY3Rpb24pIHtcbiAgbGV0IGJsb2NrQ3Vyc29yRWxlbWVudCA9IGVkaXRvci5fYmxvY2tDdXJzb3JFbGVtZW50O1xuXG4gIGlmICgkaXNSYW5nZVNlbGVjdGlvbihuZXh0U2VsZWN0aW9uKSAmJiBuZXh0U2VsZWN0aW9uLmlzQ29sbGFwc2VkKCkgJiYgbmV4dFNlbGVjdGlvbi5hbmNob3IudHlwZSA9PT0gJ2VsZW1lbnQnICYmIHJvb3RFbGVtZW50LmNvbnRhaW5zKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpKSB7XG4gICAgY29uc3QgYW5jaG9yID0gbmV4dFNlbGVjdGlvbi5hbmNob3I7XG4gICAgY29uc3QgZWxlbWVudE5vZGUgPSBhbmNob3IuZ2V0Tm9kZSgpO1xuICAgIGNvbnN0IG9mZnNldCA9IGFuY2hvci5vZmZzZXQ7XG4gICAgY29uc3QgZWxlbWVudE5vZGVTaXplID0gZWxlbWVudE5vZGUuZ2V0Q2hpbGRyZW5TaXplKCk7XG4gICAgbGV0IGlzQmxvY2tDdXJzb3IgPSBmYWxzZTtcbiAgICBsZXQgaW5zZXJ0QmVmb3JlRWxlbWVudCA9IG51bGw7XG5cbiAgICBpZiAob2Zmc2V0ID09PSBlbGVtZW50Tm9kZVNpemUpIHtcbiAgICAgIGNvbnN0IGNoaWxkID0gZWxlbWVudE5vZGUuZ2V0Q2hpbGRBdEluZGV4KG9mZnNldCAtIDEpO1xuXG4gICAgICBpZiAobmVlZHNCbG9ja0N1cnNvcihjaGlsZCkpIHtcbiAgICAgICAgaXNCbG9ja0N1cnNvciA9IHRydWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNoaWxkID0gZWxlbWVudE5vZGUuZ2V0Q2hpbGRBdEluZGV4KG9mZnNldCk7XG5cbiAgICAgIGlmIChuZWVkc0Jsb2NrQ3Vyc29yKGNoaWxkKSkge1xuICAgICAgICBjb25zdCBzaWJsaW5nID0gY2hpbGQuZ2V0UHJldmlvdXNTaWJsaW5nKCk7XG5cbiAgICAgICAgaWYgKHNpYmxpbmcgPT09IG51bGwgfHwgbmVlZHNCbG9ja0N1cnNvcihzaWJsaW5nKSkge1xuICAgICAgICAgIGlzQmxvY2tDdXJzb3IgPSB0cnVlO1xuICAgICAgICAgIGluc2VydEJlZm9yZUVsZW1lbnQgPSBlZGl0b3IuZ2V0RWxlbWVudEJ5S2V5KGNoaWxkLl9fa2V5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpc0Jsb2NrQ3Vyc29yKSB7XG4gICAgICBjb25zdCBlbGVtZW50RE9NID0gZWRpdG9yLmdldEVsZW1lbnRCeUtleShlbGVtZW50Tm9kZS5fX2tleSk7XG5cbiAgICAgIGlmIChibG9ja0N1cnNvckVsZW1lbnQgPT09IG51bGwpIHtcbiAgICAgICAgZWRpdG9yLl9ibG9ja0N1cnNvckVsZW1lbnQgPSBibG9ja0N1cnNvckVsZW1lbnQgPSBjcmVhdGVCbG9ja0N1cnNvckVsZW1lbnQoZWRpdG9yLl9jb25maWcpO1xuICAgICAgfVxuXG4gICAgICByb290RWxlbWVudC5zdHlsZS5jYXJldENvbG9yID0gJ3RyYW5zcGFyZW50JztcblxuICAgICAgaWYgKGluc2VydEJlZm9yZUVsZW1lbnQgPT09IG51bGwpIHtcbiAgICAgICAgZWxlbWVudERPTS5hcHBlbmRDaGlsZChibG9ja0N1cnNvckVsZW1lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudERPTS5pbnNlcnRCZWZvcmUoYmxvY2tDdXJzb3JFbGVtZW50LCBpbnNlcnRCZWZvcmVFbGVtZW50KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSAvLyBSZW1vdmUgY3Vyc29yXG5cblxuICBpZiAoYmxvY2tDdXJzb3JFbGVtZW50ICE9PSBudWxsKSB7XG4gICAgcmVtb3ZlRE9NQmxvY2tDdXJzb3JFbGVtZW50KGJsb2NrQ3Vyc29yRWxlbWVudCwgZWRpdG9yLCByb290RWxlbWVudCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGdldERPTVNlbGVjdGlvbih0YXJnZXRXaW5kb3cpIHtcbiAgcmV0dXJuICFDQU5fVVNFX0RPTSA/IG51bGwgOiAodGFyZ2V0V2luZG93IHx8IHdpbmRvdykuZ2V0U2VsZWN0aW9uKCk7XG59XG5mdW5jdGlvbiAkc3BsaXROb2RlKG5vZGUsIG9mZnNldCkge1xuICBsZXQgc3RhcnROb2RlID0gbm9kZS5nZXRDaGlsZEF0SW5kZXgob2Zmc2V0KTtcblxuICBpZiAoc3RhcnROb2RlID09IG51bGwpIHtcbiAgICBzdGFydE5vZGUgPSBub2RlO1xuICB9XG5cbiAgaWYgKCEhJGlzUm9vdE9yU2hhZG93Um9vdChub2RlKSkge1xuICAgIHRocm93IEVycm9yKGBDYW4gbm90IGNhbGwgJHNwbGl0Tm9kZSgpIG9uIHJvb3QgZWxlbWVudGApO1xuICB9XG5cbiAgY29uc3QgcmVjdXJzZSA9IGN1cnJlbnROb2RlID0+IHtcbiAgICBjb25zdCBwYXJlbnQgPSBjdXJyZW50Tm9kZS5nZXRQYXJlbnRPclRocm93KCk7XG4gICAgY29uc3QgaXNQYXJlbnRSb290ID0gJGlzUm9vdE9yU2hhZG93Um9vdChwYXJlbnQpOyAvLyBUaGUgbm9kZSB3ZSBzdGFydCBzcGxpdCBmcm9tIChsZWFmKSBpcyBtb3ZlZCwgYnV0IGl0cyByZWN1cnNpdmVcbiAgICAvLyBwYXJlbnRzIGFyZSBjb3BpZWQgdG8gY3JlYXRlIHNlcGFyYXRlIHRyZWVcblxuICAgIGNvbnN0IG5vZGVUb01vdmUgPSBjdXJyZW50Tm9kZSA9PT0gc3RhcnROb2RlICYmICFpc1BhcmVudFJvb3QgPyBjdXJyZW50Tm9kZSA6ICRjb3B5Tm9kZShjdXJyZW50Tm9kZSk7XG5cbiAgICBpZiAoaXNQYXJlbnRSb290KSB7XG4gICAgICBjdXJyZW50Tm9kZS5pbnNlcnRBZnRlcihub2RlVG9Nb3ZlKTtcbiAgICAgIHJldHVybiBbY3VycmVudE5vZGUsIG5vZGVUb01vdmUsIG5vZGVUb01vdmVdO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBbbGVmdFRyZWUsIHJpZ2h0VHJlZSwgbmV3UGFyZW50XSA9IHJlY3Vyc2UocGFyZW50KTtcbiAgICAgIGNvbnN0IG5leHRTaWJsaW5ncyA9IGN1cnJlbnROb2RlLmdldE5leHRTaWJsaW5ncygpO1xuICAgICAgbmV3UGFyZW50LmFwcGVuZChub2RlVG9Nb3ZlLCAuLi5uZXh0U2libGluZ3MpO1xuICAgICAgcmV0dXJuIFtsZWZ0VHJlZSwgcmlnaHRUcmVlLCBub2RlVG9Nb3ZlXTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgW2xlZnRUcmVlLCByaWdodFRyZWVdID0gcmVjdXJzZShzdGFydE5vZGUpO1xuICByZXR1cm4gW2xlZnRUcmVlLCByaWdodFRyZWVdO1xufVxuZnVuY3Rpb24gJGZpbmRNYXRjaGluZ1BhcmVudChzdGFydGluZ05vZGUsIGZpbmRGbikge1xuICBsZXQgY3VyciA9IHN0YXJ0aW5nTm9kZTtcblxuICB3aGlsZSAoY3VyciAhPT0gJGdldFJvb3QoKSAmJiBjdXJyICE9IG51bGwpIHtcbiAgICBpZiAoZmluZEZuKGN1cnIpKSB7XG4gICAgICByZXR1cm4gY3VycjtcbiAgICB9XG5cbiAgICBjdXJyID0gY3Vyci5nZXRQYXJlbnQoKTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gJGdldENoaWxkcmVuUmVjdXJzaXZlbHkobm9kZSkge1xuICBjb25zdCBub2RlcyA9IFtdO1xuICBjb25zdCBzdGFjayA9IFtub2RlXTtcblxuICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGN1cnJlbnROb2RlID0gc3RhY2sucG9wKCk7XG5cbiAgICBpZiAoIShjdXJyZW50Tm9kZSAhPT0gdW5kZWZpbmVkKSkge1xuICAgICAgdGhyb3cgRXJyb3IoYFN0YWNrLmxlbmd0aCA+IDA7IGNhbid0IGJlIHVuZGVmaW5lZGApO1xuICAgIH1cblxuICAgIGlmICgkaXNFbGVtZW50Tm9kZShjdXJyZW50Tm9kZSkpIHtcbiAgICAgIHN0YWNrLnVuc2hpZnQoLi4uY3VycmVudE5vZGUuZ2V0Q2hpbGRyZW4oKSk7XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnROb2RlICE9PSBub2RlKSB7XG4gICAgICBub2Rlcy5wdXNoKGN1cnJlbnROb2RlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbm9kZXM7XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cbmZ1bmN0aW9uICRnYXJiYWdlQ29sbGVjdERldGFjaGVkRGVjb3JhdG9ycyhlZGl0b3IsIHBlbmRpbmdFZGl0b3JTdGF0ZSkge1xuICBjb25zdCBjdXJyZW50RGVjb3JhdG9ycyA9IGVkaXRvci5fZGVjb3JhdG9ycztcbiAgY29uc3QgcGVuZGluZ0RlY29yYXRvcnMgPSBlZGl0b3IuX3BlbmRpbmdEZWNvcmF0b3JzO1xuICBsZXQgZGVjb3JhdG9ycyA9IHBlbmRpbmdEZWNvcmF0b3JzIHx8IGN1cnJlbnREZWNvcmF0b3JzO1xuICBjb25zdCBub2RlTWFwID0gcGVuZGluZ0VkaXRvclN0YXRlLl9ub2RlTWFwO1xuICBsZXQga2V5O1xuXG4gIGZvciAoa2V5IGluIGRlY29yYXRvcnMpIHtcbiAgICBpZiAoIW5vZGVNYXAuaGFzKGtleSkpIHtcbiAgICAgIGlmIChkZWNvcmF0b3JzID09PSBjdXJyZW50RGVjb3JhdG9ycykge1xuICAgICAgICBkZWNvcmF0b3JzID0gY2xvbmVEZWNvcmF0b3JzKGVkaXRvcik7XG4gICAgICB9XG5cbiAgICAgIGRlbGV0ZSBkZWNvcmF0b3JzW2tleV07XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uICRnYXJiYWdlQ29sbGVjdERldGFjaGVkRGVlcENoaWxkTm9kZXMobm9kZSwgcGFyZW50S2V5LCBwcmV2Tm9kZU1hcCwgbm9kZU1hcCwgZGlydHlOb2Rlcykge1xuICBsZXQgY2hpbGQgPSBub2RlLmdldEZpcnN0Q2hpbGQoKTtcblxuICB3aGlsZSAoY2hpbGQgIT09IG51bGwpIHtcbiAgICBjb25zdCBjaGlsZEtleSA9IGNoaWxkLl9fa2V5O1xuXG4gICAgaWYgKGNoaWxkICE9PSB1bmRlZmluZWQgJiYgY2hpbGQuX19wYXJlbnQgPT09IHBhcmVudEtleSkge1xuICAgICAgaWYgKCRpc0VsZW1lbnROb2RlKGNoaWxkKSkge1xuICAgICAgICAkZ2FyYmFnZUNvbGxlY3REZXRhY2hlZERlZXBDaGlsZE5vZGVzKGNoaWxkLCBjaGlsZEtleSwgcHJldk5vZGVNYXAsIG5vZGVNYXAsIGRpcnR5Tm9kZXMpO1xuICAgICAgfSAvLyBJZiB3ZSBoYXZlIGNyZWF0ZWQgYSBub2RlIGFuZCBpdCB3YXMgZGVyZWZlcmVuY2VkLCB0aGVuIGFsc29cbiAgICAgIC8vIHJlbW92ZSBpdCBmcm9tIG91dCBkaXJ0eSBub2RlcyBTZXQuXG5cblxuICAgICAgaWYgKCFwcmV2Tm9kZU1hcC5oYXMoY2hpbGRLZXkpKSB7XG4gICAgICAgIGRpcnR5Tm9kZXMuZGVsZXRlKGNoaWxkS2V5KTtcbiAgICAgIH1cblxuICAgICAgbm9kZU1hcC5kZWxldGUoY2hpbGRLZXkpO1xuICAgIH1cblxuICAgIGNoaWxkID0gY2hpbGQuaXNBdHRhY2hlZCgpID8gY2hpbGQuZ2V0TmV4dFNpYmxpbmcoKSA6IG51bGw7XG4gIH1cbn1cblxuZnVuY3Rpb24gJGdhcmJhZ2VDb2xsZWN0RGV0YWNoZWROb2RlcyhwcmV2RWRpdG9yU3RhdGUsIGVkaXRvclN0YXRlLCBkaXJ0eUxlYXZlcywgZGlydHlFbGVtZW50cykge1xuICBjb25zdCBwcmV2Tm9kZU1hcCA9IHByZXZFZGl0b3JTdGF0ZS5fbm9kZU1hcDtcbiAgY29uc3Qgbm9kZU1hcCA9IGVkaXRvclN0YXRlLl9ub2RlTWFwO1xuXG4gIGZvciAoY29uc3Qgbm9kZUtleSBvZiBkaXJ0eUxlYXZlcykge1xuICAgIGNvbnN0IG5vZGUgPSBub2RlTWFwLmdldChub2RlS2V5KTtcblxuICAgIGlmIChub2RlICE9PSB1bmRlZmluZWQgJiYgIW5vZGUuaXNBdHRhY2hlZCgpKSB7XG4gICAgICBpZiAoIXByZXZOb2RlTWFwLmhhcyhub2RlS2V5KSkge1xuICAgICAgICBkaXJ0eUxlYXZlcy5kZWxldGUobm9kZUtleSk7XG4gICAgICB9XG5cbiAgICAgIG5vZGVNYXAuZGVsZXRlKG5vZGVLZXkpO1xuICAgIH1cbiAgfVxuXG4gIGZvciAoY29uc3QgW25vZGVLZXldIG9mIGRpcnR5RWxlbWVudHMpIHtcbiAgICBjb25zdCBub2RlID0gbm9kZU1hcC5nZXQobm9kZUtleSk7XG5cbiAgICBpZiAobm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBHYXJiYWdlIGNvbGxlY3Qgbm9kZSBhbmQgaXRzIGNoaWxkcmVuIGlmIHRoZXkgZXhpc3RcbiAgICAgIGlmICghbm9kZS5pc0F0dGFjaGVkKCkpIHtcbiAgICAgICAgaWYgKCRpc0VsZW1lbnROb2RlKG5vZGUpKSB7XG4gICAgICAgICAgJGdhcmJhZ2VDb2xsZWN0RGV0YWNoZWREZWVwQ2hpbGROb2Rlcyhub2RlLCBub2RlS2V5LCBwcmV2Tm9kZU1hcCwgbm9kZU1hcCwgZGlydHlFbGVtZW50cyk7XG4gICAgICAgIH0gLy8gSWYgd2UgaGF2ZSBjcmVhdGVkIGEgbm9kZSBhbmQgaXQgd2FzIGRlcmVmZXJlbmNlZCwgdGhlbiBhbHNvXG4gICAgICAgIC8vIHJlbW92ZSBpdCBmcm9tIG91dCBkaXJ0eSBub2RlcyBTZXQuXG5cblxuICAgICAgICBpZiAoIXByZXZOb2RlTWFwLmhhcyhub2RlS2V5KSkge1xuICAgICAgICAgIGRpcnR5RWxlbWVudHMuZGVsZXRlKG5vZGVLZXkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbm9kZU1hcC5kZWxldGUobm9kZUtleSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cblxuZnVuY3Rpb24gJGNhblNpbXBsZVRleHROb2Rlc0JlTWVyZ2VkKG5vZGUxLCBub2RlMikge1xuICBjb25zdCBub2RlMU1vZGUgPSBub2RlMS5fX21vZGU7XG4gIGNvbnN0IG5vZGUxRm9ybWF0ID0gbm9kZTEuX19mb3JtYXQ7XG4gIGNvbnN0IG5vZGUxU3R5bGUgPSBub2RlMS5fX3N0eWxlO1xuICBjb25zdCBub2RlMk1vZGUgPSBub2RlMi5fX21vZGU7XG4gIGNvbnN0IG5vZGUyRm9ybWF0ID0gbm9kZTIuX19mb3JtYXQ7XG4gIGNvbnN0IG5vZGUyU3R5bGUgPSBub2RlMi5fX3N0eWxlO1xuICByZXR1cm4gKG5vZGUxTW9kZSA9PT0gbnVsbCB8fCBub2RlMU1vZGUgPT09IG5vZGUyTW9kZSkgJiYgKG5vZGUxRm9ybWF0ID09PSBudWxsIHx8IG5vZGUxRm9ybWF0ID09PSBub2RlMkZvcm1hdCkgJiYgKG5vZGUxU3R5bGUgPT09IG51bGwgfHwgbm9kZTFTdHlsZSA9PT0gbm9kZTJTdHlsZSk7XG59XG5cbmZ1bmN0aW9uICRtZXJnZVRleHROb2Rlcyhub2RlMSwgbm9kZTIpIHtcbiAgY29uc3Qgd3JpdGFibGVOb2RlMSA9IG5vZGUxLm1lcmdlV2l0aFNpYmxpbmcobm9kZTIpO1xuXG4gIGNvbnN0IG5vcm1hbGl6ZWROb2RlcyA9IGdldEFjdGl2ZUVkaXRvcigpLl9ub3JtYWxpemVkTm9kZXM7XG5cbiAgbm9ybWFsaXplZE5vZGVzLmFkZChub2RlMS5fX2tleSk7XG4gIG5vcm1hbGl6ZWROb2Rlcy5hZGQobm9kZTIuX19rZXkpO1xuICByZXR1cm4gd3JpdGFibGVOb2RlMTtcbn1cblxuZnVuY3Rpb24gJG5vcm1hbGl6ZVRleHROb2RlKHRleHROb2RlKSB7XG4gIGxldCBub2RlID0gdGV4dE5vZGU7XG5cbiAgaWYgKG5vZGUuX190ZXh0ID09PSAnJyAmJiBub2RlLmlzU2ltcGxlVGV4dCgpICYmICFub2RlLmlzVW5tZXJnZWFibGUoKSkge1xuICAgIG5vZGUucmVtb3ZlKCk7XG4gICAgcmV0dXJuO1xuICB9IC8vIEJhY2t3YXJkXG5cblxuICBsZXQgcHJldmlvdXNOb2RlO1xuXG4gIHdoaWxlICgocHJldmlvdXNOb2RlID0gbm9kZS5nZXRQcmV2aW91c1NpYmxpbmcoKSkgIT09IG51bGwgJiYgJGlzVGV4dE5vZGUocHJldmlvdXNOb2RlKSAmJiBwcmV2aW91c05vZGUuaXNTaW1wbGVUZXh0KCkgJiYgIXByZXZpb3VzTm9kZS5pc1VubWVyZ2VhYmxlKCkpIHtcbiAgICBpZiAocHJldmlvdXNOb2RlLl9fdGV4dCA9PT0gJycpIHtcbiAgICAgIHByZXZpb3VzTm9kZS5yZW1vdmUoKTtcbiAgICB9IGVsc2UgaWYgKCRjYW5TaW1wbGVUZXh0Tm9kZXNCZU1lcmdlZChwcmV2aW91c05vZGUsIG5vZGUpKSB7XG4gICAgICBub2RlID0gJG1lcmdlVGV4dE5vZGVzKHByZXZpb3VzTm9kZSwgbm9kZSk7XG4gICAgICBicmVhaztcbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9IC8vIEZvcndhcmRcblxuXG4gIGxldCBuZXh0Tm9kZTtcblxuICB3aGlsZSAoKG5leHROb2RlID0gbm9kZS5nZXROZXh0U2libGluZygpKSAhPT0gbnVsbCAmJiAkaXNUZXh0Tm9kZShuZXh0Tm9kZSkgJiYgbmV4dE5vZGUuaXNTaW1wbGVUZXh0KCkgJiYgIW5leHROb2RlLmlzVW5tZXJnZWFibGUoKSkge1xuICAgIGlmIChuZXh0Tm9kZS5fX3RleHQgPT09ICcnKSB7XG4gICAgICBuZXh0Tm9kZS5yZW1vdmUoKTtcbiAgICB9IGVsc2UgaWYgKCRjYW5TaW1wbGVUZXh0Tm9kZXNCZU1lcmdlZChub2RlLCBuZXh0Tm9kZSkpIHtcbiAgICAgIG5vZGUgPSAkbWVyZ2VUZXh0Tm9kZXMobm9kZSwgbmV4dE5vZGUpO1xuICAgICAgYnJlYWs7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gJG5vcm1hbGl6ZVNlbGVjdGlvbihzZWxlY3Rpb24pIHtcbiAgJG5vcm1hbGl6ZVBvaW50KHNlbGVjdGlvbi5hbmNob3IpO1xuICAkbm9ybWFsaXplUG9pbnQoc2VsZWN0aW9uLmZvY3VzKTtcbiAgcmV0dXJuIHNlbGVjdGlvbjtcbn1cblxuZnVuY3Rpb24gJG5vcm1hbGl6ZVBvaW50KHBvaW50KSB7XG4gIHdoaWxlIChwb2ludC50eXBlID09PSAnZWxlbWVudCcpIHtcbiAgICBjb25zdCBub2RlID0gcG9pbnQuZ2V0Tm9kZSgpO1xuICAgIGNvbnN0IG9mZnNldCA9IHBvaW50Lm9mZnNldDtcbiAgICBsZXQgbmV4dE5vZGU7XG4gICAgbGV0IG5leHRPZmZzZXRBdEVuZDtcblxuICAgIGlmIChvZmZzZXQgPT09IG5vZGUuZ2V0Q2hpbGRyZW5TaXplKCkpIHtcbiAgICAgIG5leHROb2RlID0gbm9kZS5nZXRDaGlsZEF0SW5kZXgob2Zmc2V0IC0gMSk7XG4gICAgICBuZXh0T2Zmc2V0QXRFbmQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXh0Tm9kZSA9IG5vZGUuZ2V0Q2hpbGRBdEluZGV4KG9mZnNldCk7XG4gICAgICBuZXh0T2Zmc2V0QXRFbmQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoJGlzVGV4dE5vZGUobmV4dE5vZGUpKSB7XG4gICAgICBwb2ludC5zZXQobmV4dE5vZGUuX19rZXksIG5leHRPZmZzZXRBdEVuZCA/IG5leHROb2RlLmdldFRleHRDb250ZW50U2l6ZSgpIDogMCwgJ3RleHQnKTtcbiAgICAgIGJyZWFrO1xuICAgIH0gZWxzZSBpZiAoISRpc0VsZW1lbnROb2RlKG5leHROb2RlKSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcG9pbnQuc2V0KG5leHROb2RlLl9fa2V5LCBuZXh0T2Zmc2V0QXRFbmQgPyBuZXh0Tm9kZS5nZXRDaGlsZHJlblNpemUoKSA6IDAsICdlbGVtZW50Jyk7XG4gIH1cbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xubGV0IHN1YlRyZWVUZXh0Q29udGVudCA9ICcnO1xubGV0IHN1YlRyZWVEaXJlY3Rpb25lZFRleHRDb250ZW50ID0gJyc7XG5sZXQgZWRpdG9yVGV4dENvbnRlbnQgPSAnJztcbmxldCBhY3RpdmVFZGl0b3JDb25maWc7XG5sZXQgYWN0aXZlRWRpdG9yJDE7XG5sZXQgYWN0aXZlRWRpdG9yTm9kZXM7XG5sZXQgdHJlYXRBbGxOb2Rlc0FzRGlydHkgPSBmYWxzZTtcbmxldCBhY3RpdmVFZGl0b3JTdGF0ZVJlYWRPbmx5ID0gZmFsc2U7XG5sZXQgYWN0aXZlTXV0YXRpb25MaXN0ZW5lcnM7XG5sZXQgYWN0aXZlVGV4dERpcmVjdGlvbiA9IG51bGw7XG5sZXQgYWN0aXZlRGlydHlFbGVtZW50cztcbmxldCBhY3RpdmVEaXJ0eUxlYXZlcztcbmxldCBhY3RpdmVQcmV2Tm9kZU1hcDtcbmxldCBhY3RpdmVOZXh0Tm9kZU1hcDtcbmxldCBhY3RpdmVQcmV2S2V5VG9ET01NYXA7XG5sZXQgbXV0YXRlZE5vZGVzO1xuXG5mdW5jdGlvbiBkZXN0cm95Tm9kZShrZXksIHBhcmVudERPTSkge1xuICBjb25zdCBub2RlID0gYWN0aXZlUHJldk5vZGVNYXAuZ2V0KGtleSk7XG5cbiAgaWYgKHBhcmVudERPTSAhPT0gbnVsbCkge1xuICAgIGNvbnN0IGRvbSA9IGdldFByZXZFbGVtZW50QnlLZXlPclRocm93KGtleSk7XG5cbiAgICBpZiAoZG9tLnBhcmVudE5vZGUgPT09IHBhcmVudERPTSkge1xuICAgICAgcGFyZW50RE9NLnJlbW92ZUNoaWxkKGRvbSk7XG4gICAgfVxuICB9IC8vIFRoaXMgbG9naWMgaXMgcmVhbGx5IGltcG9ydGFudCwgb3RoZXJ3aXNlIHdlIHdpbGwgbGVhayBET00gbm9kZXNcbiAgLy8gd2hlbiB0aGVpciBjb3JyZXNwb25kaW5nIExleGljYWxOb2RlcyBhcmUgcmVtb3ZlZCBmcm9tIHRoZSBlZGl0b3Igc3RhdGUuXG5cblxuICBpZiAoIWFjdGl2ZU5leHROb2RlTWFwLmhhcyhrZXkpKSB7XG4gICAgYWN0aXZlRWRpdG9yJDEuX2tleVRvRE9NTWFwLmRlbGV0ZShrZXkpO1xuICB9XG5cbiAgaWYgKCRpc0VsZW1lbnROb2RlKG5vZGUpKSB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBjcmVhdGVDaGlsZHJlbkFycmF5KG5vZGUsIGFjdGl2ZVByZXZOb2RlTWFwKTtcbiAgICBkZXN0cm95Q2hpbGRyZW4oY2hpbGRyZW4sIDAsIGNoaWxkcmVuLmxlbmd0aCAtIDEsIG51bGwpO1xuICB9XG5cbiAgaWYgKG5vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHNldE11dGF0ZWROb2RlKG11dGF0ZWROb2RlcywgYWN0aXZlRWRpdG9yTm9kZXMsIGFjdGl2ZU11dGF0aW9uTGlzdGVuZXJzLCBub2RlLCAnZGVzdHJveWVkJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGVzdHJveUNoaWxkcmVuKGNoaWxkcmVuLCBfc3RhcnRJbmRleCwgZW5kSW5kZXgsIGRvbSkge1xuICBsZXQgc3RhcnRJbmRleCA9IF9zdGFydEluZGV4O1xuXG4gIGZvciAoOyBzdGFydEluZGV4IDw9IGVuZEluZGV4OyArK3N0YXJ0SW5kZXgpIHtcbiAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW3N0YXJ0SW5kZXhdO1xuXG4gICAgaWYgKGNoaWxkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGRlc3Ryb3lOb2RlKGNoaWxkLCBkb20pO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzZXRUZXh0QWxpZ24oZG9tU3R5bGUsIHZhbHVlKSB7XG4gIGRvbVN0eWxlLnNldFByb3BlcnR5KCd0ZXh0LWFsaWduJywgdmFsdWUpO1xufVxuXG5jb25zdCBERUZBVUxUX0lOREVOVF9WQUxVRSA9ICcyMHB4JztcblxuZnVuY3Rpb24gc2V0RWxlbWVudEluZGVudChkb20sIGluZGVudCkge1xuICBjb25zdCBpbmRlbnRDbGFzc05hbWUgPSBhY3RpdmVFZGl0b3JDb25maWcudGhlbWUuaW5kZW50O1xuXG4gIGlmICh0eXBlb2YgaW5kZW50Q2xhc3NOYW1lID09PSAnc3RyaW5nJykge1xuICAgIGNvbnN0IGVsZW1lbnRIYXNDbGFzc05hbWUgPSBkb20uY2xhc3NMaXN0LmNvbnRhaW5zKGluZGVudENsYXNzTmFtZSk7XG5cbiAgICBpZiAoaW5kZW50ID4gMCAmJiAhZWxlbWVudEhhc0NsYXNzTmFtZSkge1xuICAgICAgZG9tLmNsYXNzTGlzdC5hZGQoaW5kZW50Q2xhc3NOYW1lKTtcbiAgICB9IGVsc2UgaWYgKGluZGVudCA8IDEgJiYgZWxlbWVudEhhc0NsYXNzTmFtZSkge1xuICAgICAgZG9tLmNsYXNzTGlzdC5yZW1vdmUoaW5kZW50Q2xhc3NOYW1lKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBpbmRlbnRhdGlvbkJhc2VWYWx1ZSA9IGdldENvbXB1dGVkU3R5bGUoZG9tKS5nZXRQcm9wZXJ0eVZhbHVlKCctLWxleGljYWwtaW5kZW50LWJhc2UtdmFsdWUnKSB8fCBERUZBVUxUX0lOREVOVF9WQUxVRTtcbiAgZG9tLnN0eWxlLnNldFByb3BlcnR5KCdwYWRkaW5nLWlubGluZS1zdGFydCcsIGluZGVudCA9PT0gMCA/ICcnIDogYGNhbGMoJHtpbmRlbnR9ICogJHtpbmRlbnRhdGlvbkJhc2VWYWx1ZX0pYCk7XG59XG5cbmZ1bmN0aW9uIHNldEVsZW1lbnRGb3JtYXQoZG9tLCBmb3JtYXQpIHtcbiAgY29uc3QgZG9tU3R5bGUgPSBkb20uc3R5bGU7XG5cbiAgaWYgKGZvcm1hdCA9PT0gMCkge1xuICAgIHNldFRleHRBbGlnbihkb21TdHlsZSwgJycpO1xuICB9IGVsc2UgaWYgKGZvcm1hdCA9PT0gSVNfQUxJR05fTEVGVCkge1xuICAgIHNldFRleHRBbGlnbihkb21TdHlsZSwgJ2xlZnQnKTtcbiAgfSBlbHNlIGlmIChmb3JtYXQgPT09IElTX0FMSUdOX0NFTlRFUikge1xuICAgIHNldFRleHRBbGlnbihkb21TdHlsZSwgJ2NlbnRlcicpO1xuICB9IGVsc2UgaWYgKGZvcm1hdCA9PT0gSVNfQUxJR05fUklHSFQpIHtcbiAgICBzZXRUZXh0QWxpZ24oZG9tU3R5bGUsICdyaWdodCcpO1xuICB9IGVsc2UgaWYgKGZvcm1hdCA9PT0gSVNfQUxJR05fSlVTVElGWSkge1xuICAgIHNldFRleHRBbGlnbihkb21TdHlsZSwgJ2p1c3RpZnknKTtcbiAgfSBlbHNlIGlmIChmb3JtYXQgPT09IElTX0FMSUdOX1NUQVJUKSB7XG4gICAgc2V0VGV4dEFsaWduKGRvbVN0eWxlLCAnc3RhcnQnKTtcbiAgfSBlbHNlIGlmIChmb3JtYXQgPT09IElTX0FMSUdOX0VORCkge1xuICAgIHNldFRleHRBbGlnbihkb21TdHlsZSwgJ2VuZCcpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU5vZGUoa2V5LCBwYXJlbnRET00sIGluc2VydERPTSkge1xuICBjb25zdCBub2RlID0gYWN0aXZlTmV4dE5vZGVNYXAuZ2V0KGtleSk7XG5cbiAgaWYgKG5vZGUgPT09IHVuZGVmaW5lZCkge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGBjcmVhdGVOb2RlOiBub2RlIGRvZXMgbm90IGV4aXN0IGluIG5vZGVNYXBgKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBkb20gPSBub2RlLmNyZWF0ZURPTShhY3RpdmVFZGl0b3JDb25maWcsIGFjdGl2ZUVkaXRvciQxKTtcbiAgc3RvcmVET01XaXRoS2V5KGtleSwgZG9tLCBhY3RpdmVFZGl0b3IkMSk7IC8vIFRoaXMgaGVscHMgcHJlc2VydmUgdGhlIHRleHQsIGFuZCBzdG9wcyBzcGVsbCBjaGVjayB0b29scyBmcm9tXG4gIC8vIG1lcmdpbmcgb3IgYnJlYWsgdGhlIHNwYW5zICh3aGljaCBoYXBwZW5zIGlmIHRoZXkgYXJlIG1pc3NpbmdcbiAgLy8gdGhpcyBhdHRyaWJ1dGUpLlxuXG4gIGlmICgkaXNUZXh0Tm9kZShub2RlKSkge1xuICAgIGRvbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbGV4aWNhbC10ZXh0JywgJ3RydWUnKTtcbiAgfSBlbHNlIGlmICgkaXNEZWNvcmF0b3JOb2RlKG5vZGUpKSB7XG4gICAgZG9tLnNldEF0dHJpYnV0ZSgnZGF0YS1sZXhpY2FsLWRlY29yYXRvcicsICd0cnVlJyk7XG4gIH1cblxuICBpZiAoJGlzRWxlbWVudE5vZGUobm9kZSkpIHtcbiAgICBjb25zdCBpbmRlbnQgPSBub2RlLl9faW5kZW50O1xuICAgIGNvbnN0IGNoaWxkcmVuU2l6ZSA9IG5vZGUuX19zaXplO1xuXG4gICAgaWYgKGluZGVudCAhPT0gMCkge1xuICAgICAgc2V0RWxlbWVudEluZGVudChkb20sIGluZGVudCk7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkcmVuU2l6ZSAhPT0gMCkge1xuICAgICAgY29uc3QgZW5kSW5kZXggPSBjaGlsZHJlblNpemUgLSAxO1xuICAgICAgY29uc3QgY2hpbGRyZW4gPSBjcmVhdGVDaGlsZHJlbkFycmF5KG5vZGUsIGFjdGl2ZU5leHROb2RlTWFwKTtcbiAgICAgIGNyZWF0ZUNoaWxkcmVuV2l0aERpcmVjdGlvbihjaGlsZHJlbiwgZW5kSW5kZXgsIG5vZGUsIGRvbSk7XG4gICAgfVxuXG4gICAgY29uc3QgZm9ybWF0ID0gbm9kZS5fX2Zvcm1hdDtcblxuICAgIGlmIChmb3JtYXQgIT09IDApIHtcbiAgICAgIHNldEVsZW1lbnRGb3JtYXQoZG9tLCBmb3JtYXQpO1xuICAgIH1cblxuICAgIGlmICghbm9kZS5pc0lubGluZSgpKSB7XG4gICAgICByZWNvbmNpbGVFbGVtZW50VGVybWluYXRpbmdMaW5lQnJlYWsobnVsbCwgbm9kZSwgZG9tKTtcbiAgICB9XG5cbiAgICBpZiAoJHRleHRDb250ZW50UmVxdWlyZXNEb3VibGVMaW5lYnJlYWtBdEVuZChub2RlKSkge1xuICAgICAgc3ViVHJlZVRleHRDb250ZW50ICs9IERPVUJMRV9MSU5FX0JSRUFLO1xuICAgICAgZWRpdG9yVGV4dENvbnRlbnQgKz0gRE9VQkxFX0xJTkVfQlJFQUs7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGNvbnN0IHRleHQgPSBub2RlLmdldFRleHRDb250ZW50KCk7XG5cbiAgICBpZiAoJGlzRGVjb3JhdG9yTm9kZShub2RlKSkge1xuICAgICAgY29uc3QgZGVjb3JhdG9yID0gbm9kZS5kZWNvcmF0ZShhY3RpdmVFZGl0b3IkMSwgYWN0aXZlRWRpdG9yQ29uZmlnKTtcblxuICAgICAgaWYgKGRlY29yYXRvciAhPT0gbnVsbCkge1xuICAgICAgICByZWNvbmNpbGVEZWNvcmF0b3Ioa2V5LCBkZWNvcmF0b3IpO1xuICAgICAgfSAvLyBEZWNvcmF0b3JzIGFyZSBhbHdheXMgbm9uIGVkaXRhYmxlXG5cblxuICAgICAgZG9tLmNvbnRlbnRFZGl0YWJsZSA9ICdmYWxzZSc7XG4gICAgfSBlbHNlIGlmICgkaXNUZXh0Tm9kZShub2RlKSkge1xuICAgICAgaWYgKCFub2RlLmlzRGlyZWN0aW9ubGVzcygpKSB7XG4gICAgICAgIHN1YlRyZWVEaXJlY3Rpb25lZFRleHRDb250ZW50ICs9IHRleHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc3ViVHJlZVRleHRDb250ZW50ICs9IHRleHQ7XG4gICAgZWRpdG9yVGV4dENvbnRlbnQgKz0gdGV4dDtcbiAgfVxuXG4gIGlmIChwYXJlbnRET00gIT09IG51bGwpIHtcbiAgICBpZiAoaW5zZXJ0RE9NICE9IG51bGwpIHtcbiAgICAgIHBhcmVudERPTS5pbnNlcnRCZWZvcmUoZG9tLCBpbnNlcnRET00pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBpbnRlcm5hbCBmaWVsZFxuICAgICAgY29uc3QgcG9zc2libGVMaW5lQnJlYWsgPSBwYXJlbnRET00uX19sZXhpY2FsTGluZUJyZWFrO1xuXG4gICAgICBpZiAocG9zc2libGVMaW5lQnJlYWsgIT0gbnVsbCkge1xuICAgICAgICBwYXJlbnRET00uaW5zZXJ0QmVmb3JlKGRvbSwgcG9zc2libGVMaW5lQnJlYWspO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyZW50RE9NLmFwcGVuZENoaWxkKGRvbSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAge1xuICAgIC8vIEZyZWV6ZSB0aGUgbm9kZSBpbiBERVYgdG8gcHJldmVudCBhY2NpZGVudGFsIG11dGF0aW9uc1xuICAgIE9iamVjdC5mcmVlemUobm9kZSk7XG4gIH1cblxuICBzZXRNdXRhdGVkTm9kZShtdXRhdGVkTm9kZXMsIGFjdGl2ZUVkaXRvck5vZGVzLCBhY3RpdmVNdXRhdGlvbkxpc3RlbmVycywgbm9kZSwgJ2NyZWF0ZWQnKTtcbiAgcmV0dXJuIGRvbTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ2hpbGRyZW5XaXRoRGlyZWN0aW9uKGNoaWxkcmVuLCBlbmRJbmRleCwgZWxlbWVudCwgZG9tKSB7XG4gIGNvbnN0IHByZXZpb3VzU3ViVHJlZURpcmVjdGlvbmVkVGV4dENvbnRlbnQgPSBzdWJUcmVlRGlyZWN0aW9uZWRUZXh0Q29udGVudDtcbiAgc3ViVHJlZURpcmVjdGlvbmVkVGV4dENvbnRlbnQgPSAnJztcbiAgY3JlYXRlQ2hpbGRyZW4oY2hpbGRyZW4sIGVsZW1lbnQsIDAsIGVuZEluZGV4LCBkb20sIG51bGwpO1xuICByZWNvbmNpbGVCbG9ja0RpcmVjdGlvbihlbGVtZW50LCBkb20pO1xuICBzdWJUcmVlRGlyZWN0aW9uZWRUZXh0Q29udGVudCA9IHByZXZpb3VzU3ViVHJlZURpcmVjdGlvbmVkVGV4dENvbnRlbnQ7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNoaWxkcmVuKGNoaWxkcmVuLCBlbGVtZW50LCBfc3RhcnRJbmRleCwgZW5kSW5kZXgsIGRvbSwgaW5zZXJ0RE9NKSB7XG4gIGNvbnN0IHByZXZpb3VzU3ViVHJlZVRleHRDb250ZW50ID0gc3ViVHJlZVRleHRDb250ZW50O1xuICBzdWJUcmVlVGV4dENvbnRlbnQgPSAnJztcbiAgbGV0IHN0YXJ0SW5kZXggPSBfc3RhcnRJbmRleDtcblxuICBmb3IgKDsgc3RhcnRJbmRleCA8PSBlbmRJbmRleDsgKytzdGFydEluZGV4KSB7XG4gICAgY3JlYXRlTm9kZShjaGlsZHJlbltzdGFydEluZGV4XSwgZG9tLCBpbnNlcnRET00pO1xuICB9XG5cbiAgaWYgKCR0ZXh0Q29udGVudFJlcXVpcmVzRG91YmxlTGluZWJyZWFrQXRFbmQoZWxlbWVudCkpIHtcbiAgICBzdWJUcmVlVGV4dENvbnRlbnQgKz0gRE9VQkxFX0xJTkVfQlJFQUs7XG4gIH0gLy8gQHRzLWV4cGVjdC1lcnJvcjogaW50ZXJuYWwgZmllbGRcblxuXG4gIGRvbS5fX2xleGljYWxUZXh0Q29udGVudCA9IHN1YlRyZWVUZXh0Q29udGVudDtcbiAgc3ViVHJlZVRleHRDb250ZW50ID0gcHJldmlvdXNTdWJUcmVlVGV4dENvbnRlbnQgKyBzdWJUcmVlVGV4dENvbnRlbnQ7XG59XG5cbmZ1bmN0aW9uIGlzTGFzdENoaWxkTGluZUJyZWFrT3JEZWNvcmF0b3IoY2hpbGRLZXksIG5vZGVNYXApIHtcbiAgY29uc3Qgbm9kZSA9IG5vZGVNYXAuZ2V0KGNoaWxkS2V5KTtcbiAgcmV0dXJuICRpc0xpbmVCcmVha05vZGUobm9kZSkgfHwgJGlzRGVjb3JhdG9yTm9kZShub2RlKSAmJiBub2RlLmlzSW5saW5lKCk7XG59IC8vIElmIHdlIGVuZCBhbiBlbGVtZW50IHdpdGggYSBMaW5lQnJlYWtOb2RlLCB0aGVuIHdlIG5lZWQgdG8gYWRkIGFuIGFkZGl0aW9uYWwgPGJyPlxuXG5cbmZ1bmN0aW9uIHJlY29uY2lsZUVsZW1lbnRUZXJtaW5hdGluZ0xpbmVCcmVhayhwcmV2RWxlbWVudCwgbmV4dEVsZW1lbnQsIGRvbSkge1xuICBjb25zdCBwcmV2TGluZUJyZWFrID0gcHJldkVsZW1lbnQgIT09IG51bGwgJiYgKHByZXZFbGVtZW50Ll9fc2l6ZSA9PT0gMCB8fCBpc0xhc3RDaGlsZExpbmVCcmVha09yRGVjb3JhdG9yKHByZXZFbGVtZW50Ll9fbGFzdCwgYWN0aXZlUHJldk5vZGVNYXApKTtcbiAgY29uc3QgbmV4dExpbmVCcmVhayA9IG5leHRFbGVtZW50Ll9fc2l6ZSA9PT0gMCB8fCBpc0xhc3RDaGlsZExpbmVCcmVha09yRGVjb3JhdG9yKG5leHRFbGVtZW50Ll9fbGFzdCwgYWN0aXZlTmV4dE5vZGVNYXApO1xuXG4gIGlmIChwcmV2TGluZUJyZWFrKSB7XG4gICAgaWYgKCFuZXh0TGluZUJyZWFrKSB7XG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBpbnRlcm5hbCBmaWVsZFxuICAgICAgY29uc3QgZWxlbWVudCA9IGRvbS5fX2xleGljYWxMaW5lQnJlYWs7XG5cbiAgICAgIGlmIChlbGVtZW50ICE9IG51bGwpIHtcbiAgICAgICAgZG9tLnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xuICAgICAgfSAvLyBAdHMtZXhwZWN0LWVycm9yOiBpbnRlcm5hbCBmaWVsZFxuXG5cbiAgICAgIGRvbS5fX2xleGljYWxMaW5lQnJlYWsgPSBudWxsO1xuICAgIH1cbiAgfSBlbHNlIGlmIChuZXh0TGluZUJyZWFrKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2JyJyk7IC8vIEB0cy1leHBlY3QtZXJyb3I6IGludGVybmFsIGZpZWxkXG5cbiAgICBkb20uX19sZXhpY2FsTGluZUJyZWFrID0gZWxlbWVudDtcbiAgICBkb20uYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVjb25jaWxlQmxvY2tEaXJlY3Rpb24oZWxlbWVudCwgZG9tKSB7XG4gIGNvbnN0IHByZXZpb3VzU3ViVHJlZURpcmVjdGlvblRleHRDb250ZW50ID0gLy8gQHRzLWV4cGVjdC1lcnJvcjogaW50ZXJuYWwgZmllbGRcbiAgICBkb20uX19sZXhpY2FsRGlyVGV4dENvbnRlbnQ7IC8vIEB0cy1leHBlY3QtZXJyb3I6IGludGVybmFsIGZpZWxkXG5cbiAgY29uc3QgcHJldmlvdXNEaXJlY3Rpb24gPSBkb20uX19sZXhpY2FsRGlyO1xuXG4gIGlmIChwcmV2aW91c1N1YlRyZWVEaXJlY3Rpb25UZXh0Q29udGVudCAhPT0gc3ViVHJlZURpcmVjdGlvbmVkVGV4dENvbnRlbnQgfHwgcHJldmlvdXNEaXJlY3Rpb24gIT09IGFjdGl2ZVRleHREaXJlY3Rpb24pIHtcbiAgICBjb25zdCBoYXNFbXB0eURpcmVjdGlvbmVkVGV4dENvbnRlbnQgPSBzdWJUcmVlRGlyZWN0aW9uZWRUZXh0Q29udGVudCA9PT0gJyc7XG4gICAgY29uc3QgZGlyZWN0aW9uID0gaGFzRW1wdHlEaXJlY3Rpb25lZFRleHRDb250ZW50ID8gYWN0aXZlVGV4dERpcmVjdGlvbiA6IGdldFRleHREaXJlY3Rpb24oc3ViVHJlZURpcmVjdGlvbmVkVGV4dENvbnRlbnQpO1xuXG4gICAgaWYgKGRpcmVjdGlvbiAhPT0gcHJldmlvdXNEaXJlY3Rpb24pIHtcbiAgICAgIGNvbnN0IGNsYXNzTGlzdCA9IGRvbS5jbGFzc0xpc3Q7XG4gICAgICBjb25zdCB0aGVtZSA9IGFjdGl2ZUVkaXRvckNvbmZpZy50aGVtZTtcbiAgICAgIGxldCBwcmV2aW91c0RpcmVjdGlvblRoZW1lID0gcHJldmlvdXNEaXJlY3Rpb24gIT09IG51bGwgPyB0aGVtZVtwcmV2aW91c0RpcmVjdGlvbl0gOiB1bmRlZmluZWQ7XG4gICAgICBsZXQgbmV4dERpcmVjdGlvblRoZW1lID0gZGlyZWN0aW9uICE9PSBudWxsID8gdGhlbWVbZGlyZWN0aW9uXSA6IHVuZGVmaW5lZDsgLy8gUmVtb3ZlIHRoZSBvbGQgdGhlbWUgY2xhc3NlcyBpZiB0aGV5IGV4aXN0XG5cbiAgICAgIGlmIChwcmV2aW91c0RpcmVjdGlvblRoZW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwcmV2aW91c0RpcmVjdGlvblRoZW1lID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGNvbnN0IGNsYXNzTmFtZXNBcnIgPSBwcmV2aW91c0RpcmVjdGlvblRoZW1lLnNwbGl0KCcgJyk7XG4gICAgICAgICAgcHJldmlvdXNEaXJlY3Rpb25UaGVtZSA9IHRoZW1lW3ByZXZpb3VzRGlyZWN0aW9uXSA9IGNsYXNzTmFtZXNBcnI7XG4gICAgICAgIH0gLy8gQHRzLWlnbm9yZTogaW50ZW50aW9uYWxcblxuXG4gICAgICAgIGNsYXNzTGlzdC5yZW1vdmUoLi4ucHJldmlvdXNEaXJlY3Rpb25UaGVtZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkaXJlY3Rpb24gPT09IG51bGwgfHwgaGFzRW1wdHlEaXJlY3Rpb25lZFRleHRDb250ZW50ICYmIGRpcmVjdGlvbiA9PT0gJ2x0cicpIHtcbiAgICAgICAgLy8gUmVtb3ZlIGRpcmVjdGlvblxuICAgICAgICBkb20ucmVtb3ZlQXR0cmlidXRlKCdkaXInKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEFwcGx5IHRoZSBuZXcgdGhlbWUgY2xhc3NlcyBpZiB0aGV5IGV4aXN0XG4gICAgICAgIGlmIChuZXh0RGlyZWN0aW9uVGhlbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgbmV4dERpcmVjdGlvblRoZW1lID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgY29uc3QgY2xhc3NOYW1lc0FyciA9IG5leHREaXJlY3Rpb25UaGVtZS5zcGxpdCgnICcpOyAvLyBAdHMtZXhwZWN0LWVycm9yOiBpbnRlbnRpb25hbFxuXG4gICAgICAgICAgICBuZXh0RGlyZWN0aW9uVGhlbWUgPSB0aGVtZVtkaXJlY3Rpb25dID0gY2xhc3NOYW1lc0FycjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAobmV4dERpcmVjdGlvblRoZW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNsYXNzTGlzdC5hZGQoLi4ubmV4dERpcmVjdGlvblRoZW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gLy8gVXBkYXRlIGRpcmVjdGlvblxuXG5cbiAgICAgICAgZG9tLmRpciA9IGRpcmVjdGlvbjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFhY3RpdmVFZGl0b3JTdGF0ZVJlYWRPbmx5KSB7XG4gICAgICAgIGNvbnN0IHdyaXRhYmxlTm9kZSA9IGVsZW1lbnQuZ2V0V3JpdGFibGUoKTtcbiAgICAgICAgd3JpdGFibGVOb2RlLl9fZGlyID0gZGlyZWN0aW9uO1xuICAgICAgfVxuICAgIH1cblxuICAgIGFjdGl2ZVRleHREaXJlY3Rpb24gPSBkaXJlY3Rpb247IC8vIEB0cy1leHBlY3QtZXJyb3I6IGludGVybmFsIGZpZWxkXG5cbiAgICBkb20uX19sZXhpY2FsRGlyVGV4dENvbnRlbnQgPSBzdWJUcmVlRGlyZWN0aW9uZWRUZXh0Q29udGVudDsgLy8gQHRzLWV4cGVjdC1lcnJvcjogaW50ZXJuYWwgZmllbGRcblxuICAgIGRvbS5fX2xleGljYWxEaXIgPSBkaXJlY3Rpb247XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVjb25jaWxlQ2hpbGRyZW5XaXRoRGlyZWN0aW9uKHByZXZFbGVtZW50LCBuZXh0RWxlbWVudCwgZG9tKSB7XG4gIGNvbnN0IHByZXZpb3VzU3ViVHJlZURpcmVjdGlvblRleHRDb250ZW50ID0gc3ViVHJlZURpcmVjdGlvbmVkVGV4dENvbnRlbnQ7XG4gIHN1YlRyZWVEaXJlY3Rpb25lZFRleHRDb250ZW50ID0gJyc7XG4gIHJlY29uY2lsZUNoaWxkcmVuKHByZXZFbGVtZW50LCBuZXh0RWxlbWVudCwgZG9tKTtcbiAgcmVjb25jaWxlQmxvY2tEaXJlY3Rpb24obmV4dEVsZW1lbnQsIGRvbSk7XG4gIHN1YlRyZWVEaXJlY3Rpb25lZFRleHRDb250ZW50ID0gcHJldmlvdXNTdWJUcmVlRGlyZWN0aW9uVGV4dENvbnRlbnQ7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNoaWxkcmVuQXJyYXkoZWxlbWVudCwgbm9kZU1hcCkge1xuICBjb25zdCBjaGlsZHJlbiA9IFtdO1xuICBsZXQgbm9kZUtleSA9IGVsZW1lbnQuX19maXJzdDtcblxuICB3aGlsZSAobm9kZUtleSAhPT0gbnVsbCkge1xuICAgIGNvbnN0IG5vZGUgPSBub2RlTWFwLmdldChub2RlS2V5KTtcblxuICAgIGlmIChub2RlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoYGNyZWF0ZUNoaWxkcmVuQXJyYXk6IG5vZGUgZG9lcyBub3QgZXhpc3QgaW4gbm9kZU1hcGApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNoaWxkcmVuLnB1c2gobm9kZUtleSk7XG4gICAgbm9kZUtleSA9IG5vZGUuX19uZXh0O1xuICB9XG5cbiAgcmV0dXJuIGNoaWxkcmVuO1xufVxuXG5mdW5jdGlvbiByZWNvbmNpbGVDaGlsZHJlbihwcmV2RWxlbWVudCwgbmV4dEVsZW1lbnQsIGRvbSkge1xuICBjb25zdCBwcmV2aW91c1N1YlRyZWVUZXh0Q29udGVudCA9IHN1YlRyZWVUZXh0Q29udGVudDtcbiAgY29uc3QgcHJldkNoaWxkcmVuU2l6ZSA9IHByZXZFbGVtZW50Ll9fc2l6ZTtcbiAgY29uc3QgbmV4dENoaWxkcmVuU2l6ZSA9IG5leHRFbGVtZW50Ll9fc2l6ZTtcbiAgc3ViVHJlZVRleHRDb250ZW50ID0gJyc7XG5cbiAgaWYgKHByZXZDaGlsZHJlblNpemUgPT09IDEgJiYgbmV4dENoaWxkcmVuU2l6ZSA9PT0gMSkge1xuICAgIGNvbnN0IHByZXZGaXJzdENoaWxkS2V5ID0gcHJldkVsZW1lbnQuX19maXJzdDtcbiAgICBjb25zdCBuZXh0RnJzdENoaWxkS2V5ID0gbmV4dEVsZW1lbnQuX19maXJzdDtcblxuICAgIGlmIChwcmV2Rmlyc3RDaGlsZEtleSA9PT0gbmV4dEZyc3RDaGlsZEtleSkge1xuICAgICAgcmVjb25jaWxlTm9kZShwcmV2Rmlyc3RDaGlsZEtleSwgZG9tKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbGFzdERPTSA9IGdldFByZXZFbGVtZW50QnlLZXlPclRocm93KHByZXZGaXJzdENoaWxkS2V5KTtcbiAgICAgIGNvbnN0IHJlcGxhY2VtZW50RE9NID0gY3JlYXRlTm9kZShuZXh0RnJzdENoaWxkS2V5LCBudWxsLCBudWxsKTtcbiAgICAgIGRvbS5yZXBsYWNlQ2hpbGQocmVwbGFjZW1lbnRET00sIGxhc3RET00pO1xuICAgICAgZGVzdHJveU5vZGUocHJldkZpcnN0Q2hpbGRLZXksIG51bGwpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjb25zdCBwcmV2Q2hpbGRyZW4gPSBjcmVhdGVDaGlsZHJlbkFycmF5KHByZXZFbGVtZW50LCBhY3RpdmVQcmV2Tm9kZU1hcCk7XG4gICAgY29uc3QgbmV4dENoaWxkcmVuID0gY3JlYXRlQ2hpbGRyZW5BcnJheShuZXh0RWxlbWVudCwgYWN0aXZlTmV4dE5vZGVNYXApO1xuXG4gICAgaWYgKHByZXZDaGlsZHJlblNpemUgPT09IDApIHtcbiAgICAgIGlmIChuZXh0Q2hpbGRyZW5TaXplICE9PSAwKSB7XG4gICAgICAgIGNyZWF0ZUNoaWxkcmVuKG5leHRDaGlsZHJlbiwgbmV4dEVsZW1lbnQsIDAsIG5leHRDaGlsZHJlblNpemUgLSAxLCBkb20sIG51bGwpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobmV4dENoaWxkcmVuU2l6ZSA9PT0gMCkge1xuICAgICAgaWYgKHByZXZDaGlsZHJlblNpemUgIT09IDApIHtcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogaW50ZXJuYWwgZmllbGRcbiAgICAgICAgY29uc3QgbGV4aWNhbExpbmVCcmVhayA9IGRvbS5fX2xleGljYWxMaW5lQnJlYWs7XG4gICAgICAgIGNvbnN0IGNhblVzZUZhc3RQYXRoID0gbGV4aWNhbExpbmVCcmVhayA9PSBudWxsO1xuICAgICAgICBkZXN0cm95Q2hpbGRyZW4ocHJldkNoaWxkcmVuLCAwLCBwcmV2Q2hpbGRyZW5TaXplIC0gMSwgY2FuVXNlRmFzdFBhdGggPyBudWxsIDogZG9tKTtcblxuICAgICAgICBpZiAoY2FuVXNlRmFzdFBhdGgpIHtcbiAgICAgICAgICAvLyBGYXN0IHBhdGggZm9yIHJlbW92aW5nIERPTSBub2Rlc1xuICAgICAgICAgIGRvbS50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlY29uY2lsZU5vZGVDaGlsZHJlbihuZXh0RWxlbWVudCwgcHJldkNoaWxkcmVuLCBuZXh0Q2hpbGRyZW4sIHByZXZDaGlsZHJlblNpemUsIG5leHRDaGlsZHJlblNpemUsIGRvbSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCR0ZXh0Q29udGVudFJlcXVpcmVzRG91YmxlTGluZWJyZWFrQXRFbmQobmV4dEVsZW1lbnQpKSB7XG4gICAgc3ViVHJlZVRleHRDb250ZW50ICs9IERPVUJMRV9MSU5FX0JSRUFLO1xuICB9IC8vIEB0cy1leHBlY3QtZXJyb3I6IGludGVybmFsIGZpZWxkXG5cblxuICBkb20uX19sZXhpY2FsVGV4dENvbnRlbnQgPSBzdWJUcmVlVGV4dENvbnRlbnQ7XG4gIHN1YlRyZWVUZXh0Q29udGVudCA9IHByZXZpb3VzU3ViVHJlZVRleHRDb250ZW50ICsgc3ViVHJlZVRleHRDb250ZW50O1xufVxuXG5mdW5jdGlvbiByZWNvbmNpbGVOb2RlKGtleSwgcGFyZW50RE9NKSB7XG4gIGNvbnN0IHByZXZOb2RlID0gYWN0aXZlUHJldk5vZGVNYXAuZ2V0KGtleSk7XG4gIGxldCBuZXh0Tm9kZSA9IGFjdGl2ZU5leHROb2RlTWFwLmdldChrZXkpO1xuXG4gIGlmIChwcmV2Tm9kZSA9PT0gdW5kZWZpbmVkIHx8IG5leHROb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICB7XG4gICAgICB0aHJvdyBFcnJvcihgcmVjb25jaWxlTm9kZTogcHJldk5vZGUgb3IgbmV4dE5vZGUgZG9lcyBub3QgZXhpc3QgaW4gbm9kZU1hcGApO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGlzRGlydHkgPSB0cmVhdEFsbE5vZGVzQXNEaXJ0eSB8fCBhY3RpdmVEaXJ0eUxlYXZlcy5oYXMoa2V5KSB8fCBhY3RpdmVEaXJ0eUVsZW1lbnRzLmhhcyhrZXkpO1xuICBjb25zdCBkb20gPSBnZXRFbGVtZW50QnlLZXlPclRocm93KGFjdGl2ZUVkaXRvciQxLCBrZXkpOyAvLyBJZiB0aGUgbm9kZSBrZXkgcG9pbnRzIHRvIHRoZSBzYW1lIGluc3RhbmNlIGluIGJvdGggc3RhdGVzXG4gIC8vIGFuZCBpc24ndCBkaXJ0eSwgd2UganVzdCB1cGRhdGUgdGhlIHRleHQgY29udGVudCBjYWNoZVxuICAvLyBhbmQgcmV0dXJuIHRoZSBleGlzdGluZyBET00gTm9kZS5cblxuICBpZiAocHJldk5vZGUgPT09IG5leHROb2RlICYmICFpc0RpcnR5KSB7XG4gICAgaWYgKCRpc0VsZW1lbnROb2RlKHByZXZOb2RlKSkge1xuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogaW50ZXJuYWwgZmllbGRcbiAgICAgIGNvbnN0IHByZXZpb3VzU3ViVHJlZVRleHRDb250ZW50ID0gZG9tLl9fbGV4aWNhbFRleHRDb250ZW50O1xuXG4gICAgICBpZiAocHJldmlvdXNTdWJUcmVlVGV4dENvbnRlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzdWJUcmVlVGV4dENvbnRlbnQgKz0gcHJldmlvdXNTdWJUcmVlVGV4dENvbnRlbnQ7XG4gICAgICAgIGVkaXRvclRleHRDb250ZW50ICs9IHByZXZpb3VzU3ViVHJlZVRleHRDb250ZW50O1xuICAgICAgfSAvLyBAdHMtZXhwZWN0LWVycm9yOiBpbnRlcm5hbCBmaWVsZFxuXG5cbiAgICAgIGNvbnN0IHByZXZpb3VzU3ViVHJlZURpcmVjdGlvblRleHRDb250ZW50ID0gZG9tLl9fbGV4aWNhbERpclRleHRDb250ZW50O1xuXG4gICAgICBpZiAocHJldmlvdXNTdWJUcmVlRGlyZWN0aW9uVGV4dENvbnRlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzdWJUcmVlRGlyZWN0aW9uZWRUZXh0Q29udGVudCArPSBwcmV2aW91c1N1YlRyZWVEaXJlY3Rpb25UZXh0Q29udGVudDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdGV4dCA9IHByZXZOb2RlLmdldFRleHRDb250ZW50KCk7XG5cbiAgICAgIGlmICgkaXNUZXh0Tm9kZShwcmV2Tm9kZSkgJiYgIXByZXZOb2RlLmlzRGlyZWN0aW9ubGVzcygpKSB7XG4gICAgICAgIHN1YlRyZWVEaXJlY3Rpb25lZFRleHRDb250ZW50ICs9IHRleHQ7XG4gICAgICB9XG5cbiAgICAgIGVkaXRvclRleHRDb250ZW50ICs9IHRleHQ7XG4gICAgICBzdWJUcmVlVGV4dENvbnRlbnQgKz0gdGV4dDtcbiAgICB9XG5cbiAgICByZXR1cm4gZG9tO1xuICB9IC8vIElmIHRoZSBub2RlIGtleSBkb2Vzbid0IHBvaW50IHRvIHRoZSBzYW1lIGluc3RhbmNlIGluIGJvdGggbWFwcyxcbiAgLy8gaXQgbWVhbnMgaXQgd2VyZSBjbG9uZWQuIElmIHRoZXkncmUgYWxzbyBkaXJ0eSwgd2UgbWFyayB0aGVtIGFzIG11dGF0ZWQuXG5cblxuICBpZiAocHJldk5vZGUgIT09IG5leHROb2RlICYmIGlzRGlydHkpIHtcbiAgICBzZXRNdXRhdGVkTm9kZShtdXRhdGVkTm9kZXMsIGFjdGl2ZUVkaXRvck5vZGVzLCBhY3RpdmVNdXRhdGlvbkxpc3RlbmVycywgbmV4dE5vZGUsICd1cGRhdGVkJyk7XG4gIH0gLy8gVXBkYXRlIG5vZGUuIElmIGl0IHJldHVybnMgdHJ1ZSwgd2UgbmVlZCB0byB1bm1vdW50IGFuZCByZS1jcmVhdGUgdGhlIG5vZGVcblxuXG4gIGlmIChuZXh0Tm9kZS51cGRhdGVET00ocHJldk5vZGUsIGRvbSwgYWN0aXZlRWRpdG9yQ29uZmlnKSkge1xuICAgIGNvbnN0IHJlcGxhY2VtZW50RE9NID0gY3JlYXRlTm9kZShrZXksIG51bGwsIG51bGwpO1xuXG4gICAgaWYgKHBhcmVudERPTSA9PT0gbnVsbCkge1xuICAgICAge1xuICAgICAgICB0aHJvdyBFcnJvcihgcmVjb25jaWxlTm9kZTogcGFyZW50RE9NIGlzIG51bGxgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwYXJlbnRET00ucmVwbGFjZUNoaWxkKHJlcGxhY2VtZW50RE9NLCBkb20pO1xuICAgIGRlc3Ryb3lOb2RlKGtleSwgbnVsbCk7XG4gICAgcmV0dXJuIHJlcGxhY2VtZW50RE9NO1xuICB9XG5cbiAgaWYgKCRpc0VsZW1lbnROb2RlKHByZXZOb2RlKSAmJiAkaXNFbGVtZW50Tm9kZShuZXh0Tm9kZSkpIHtcbiAgICAvLyBSZWNvbmNpbGUgZWxlbWVudCBjaGlsZHJlblxuICAgIGNvbnN0IG5leHRJbmRlbnQgPSBuZXh0Tm9kZS5fX2luZGVudDtcblxuICAgIGlmIChuZXh0SW5kZW50ICE9PSBwcmV2Tm9kZS5fX2luZGVudCkge1xuICAgICAgc2V0RWxlbWVudEluZGVudChkb20sIG5leHRJbmRlbnQpO1xuICAgIH1cblxuICAgIGNvbnN0IG5leHRGb3JtYXQgPSBuZXh0Tm9kZS5fX2Zvcm1hdDtcblxuICAgIGlmIChuZXh0Rm9ybWF0ICE9PSBwcmV2Tm9kZS5fX2Zvcm1hdCkge1xuICAgICAgc2V0RWxlbWVudEZvcm1hdChkb20sIG5leHRGb3JtYXQpO1xuICAgIH1cblxuICAgIGlmIChpc0RpcnR5KSB7XG4gICAgICByZWNvbmNpbGVDaGlsZHJlbldpdGhEaXJlY3Rpb24ocHJldk5vZGUsIG5leHROb2RlLCBkb20pO1xuXG4gICAgICBpZiAoISRpc1Jvb3ROb2RlKG5leHROb2RlKSAmJiAhbmV4dE5vZGUuaXNJbmxpbmUoKSkge1xuICAgICAgICByZWNvbmNpbGVFbGVtZW50VGVybWluYXRpbmdMaW5lQnJlYWsocHJldk5vZGUsIG5leHROb2RlLCBkb20pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICgkdGV4dENvbnRlbnRSZXF1aXJlc0RvdWJsZUxpbmVicmVha0F0RW5kKG5leHROb2RlKSkge1xuICAgICAgc3ViVHJlZVRleHRDb250ZW50ICs9IERPVUJMRV9MSU5FX0JSRUFLO1xuICAgICAgZWRpdG9yVGV4dENvbnRlbnQgKz0gRE9VQkxFX0xJTkVfQlJFQUs7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGNvbnN0IHRleHQgPSBuZXh0Tm9kZS5nZXRUZXh0Q29udGVudCgpO1xuXG4gICAgaWYgKCRpc0RlY29yYXRvck5vZGUobmV4dE5vZGUpKSB7XG4gICAgICBjb25zdCBkZWNvcmF0b3IgPSBuZXh0Tm9kZS5kZWNvcmF0ZShhY3RpdmVFZGl0b3IkMSwgYWN0aXZlRWRpdG9yQ29uZmlnKTtcblxuICAgICAgaWYgKGRlY29yYXRvciAhPT0gbnVsbCkge1xuICAgICAgICByZWNvbmNpbGVEZWNvcmF0b3Ioa2V5LCBkZWNvcmF0b3IpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoJGlzVGV4dE5vZGUobmV4dE5vZGUpICYmICFuZXh0Tm9kZS5pc0RpcmVjdGlvbmxlc3MoKSkge1xuICAgICAgLy8gSGFuZGxlIHRleHQgY29udGVudCwgZm9yIExUUiwgTFRSIGNhc2VzLlxuICAgICAgc3ViVHJlZURpcmVjdGlvbmVkVGV4dENvbnRlbnQgKz0gdGV4dDtcbiAgICB9XG5cbiAgICBzdWJUcmVlVGV4dENvbnRlbnQgKz0gdGV4dDtcbiAgICBlZGl0b3JUZXh0Q29udGVudCArPSB0ZXh0O1xuICB9XG5cbiAgaWYgKCFhY3RpdmVFZGl0b3JTdGF0ZVJlYWRPbmx5ICYmICRpc1Jvb3ROb2RlKG5leHROb2RlKSAmJiBuZXh0Tm9kZS5fX2NhY2hlZFRleHQgIT09IGVkaXRvclRleHRDb250ZW50KSB7XG4gICAgLy8gQ2FjaGUgdGhlIGxhdGVzdCB0ZXh0IGNvbnRlbnQuXG4gICAgbmV4dE5vZGUgPSBuZXh0Tm9kZS5nZXRXcml0YWJsZSgpO1xuICAgIG5leHROb2RlLl9fY2FjaGVkVGV4dCA9IGVkaXRvclRleHRDb250ZW50O1xuICB9XG5cbiAge1xuICAgIC8vIEZyZWV6ZSB0aGUgbm9kZSBpbiBERVYgdG8gcHJldmVudCBhY2NpZGVudGFsIG11dGF0aW9uc1xuICAgIE9iamVjdC5mcmVlemUobmV4dE5vZGUpO1xuICB9XG5cbiAgcmV0dXJuIGRvbTtcbn1cblxuZnVuY3Rpb24gcmVjb25jaWxlRGVjb3JhdG9yKGtleSwgZGVjb3JhdG9yKSB7XG4gIGxldCBwZW5kaW5nRGVjb3JhdG9ycyA9IGFjdGl2ZUVkaXRvciQxLl9wZW5kaW5nRGVjb3JhdG9ycztcbiAgY29uc3QgY3VycmVudERlY29yYXRvcnMgPSBhY3RpdmVFZGl0b3IkMS5fZGVjb3JhdG9ycztcblxuICBpZiAocGVuZGluZ0RlY29yYXRvcnMgPT09IG51bGwpIHtcbiAgICBpZiAoY3VycmVudERlY29yYXRvcnNba2V5XSA9PT0gZGVjb3JhdG9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcGVuZGluZ0RlY29yYXRvcnMgPSBjbG9uZURlY29yYXRvcnMoYWN0aXZlRWRpdG9yJDEpO1xuICB9XG5cbiAgcGVuZGluZ0RlY29yYXRvcnNba2V5XSA9IGRlY29yYXRvcjtcbn1cblxuZnVuY3Rpb24gZ2V0Rmlyc3RDaGlsZChlbGVtZW50KSB7XG4gIHJldHVybiBlbGVtZW50LmZpcnN0Q2hpbGQ7XG59XG5cbmZ1bmN0aW9uIGdldE5leHRTaWJsaW5nKGVsZW1lbnQpIHtcbiAgbGV0IG5leHRTaWJsaW5nID0gZWxlbWVudC5uZXh0U2libGluZztcblxuICBpZiAobmV4dFNpYmxpbmcgIT09IG51bGwgJiYgbmV4dFNpYmxpbmcgPT09IGFjdGl2ZUVkaXRvciQxLl9ibG9ja0N1cnNvckVsZW1lbnQpIHtcbiAgICBuZXh0U2libGluZyA9IG5leHRTaWJsaW5nLm5leHRTaWJsaW5nO1xuICB9XG5cbiAgcmV0dXJuIG5leHRTaWJsaW5nO1xufVxuXG5mdW5jdGlvbiByZWNvbmNpbGVOb2RlQ2hpbGRyZW4obmV4dEVsZW1lbnQsIHByZXZDaGlsZHJlbiwgbmV4dENoaWxkcmVuLCBwcmV2Q2hpbGRyZW5MZW5ndGgsIG5leHRDaGlsZHJlbkxlbmd0aCwgZG9tKSB7XG4gIGNvbnN0IHByZXZFbmRJbmRleCA9IHByZXZDaGlsZHJlbkxlbmd0aCAtIDE7XG4gIGNvbnN0IG5leHRFbmRJbmRleCA9IG5leHRDaGlsZHJlbkxlbmd0aCAtIDE7XG4gIGxldCBwcmV2Q2hpbGRyZW5TZXQ7XG4gIGxldCBuZXh0Q2hpbGRyZW5TZXQ7XG4gIGxldCBzaWJsaW5nRE9NID0gZ2V0Rmlyc3RDaGlsZChkb20pO1xuICBsZXQgcHJldkluZGV4ID0gMDtcbiAgbGV0IG5leHRJbmRleCA9IDA7XG5cbiAgd2hpbGUgKHByZXZJbmRleCA8PSBwcmV2RW5kSW5kZXggJiYgbmV4dEluZGV4IDw9IG5leHRFbmRJbmRleCkge1xuICAgIGNvbnN0IHByZXZLZXkgPSBwcmV2Q2hpbGRyZW5bcHJldkluZGV4XTtcbiAgICBjb25zdCBuZXh0S2V5ID0gbmV4dENoaWxkcmVuW25leHRJbmRleF07XG5cbiAgICBpZiAocHJldktleSA9PT0gbmV4dEtleSkge1xuICAgICAgc2libGluZ0RPTSA9IGdldE5leHRTaWJsaW5nKHJlY29uY2lsZU5vZGUobmV4dEtleSwgZG9tKSk7XG4gICAgICBwcmV2SW5kZXgrKztcbiAgICAgIG5leHRJbmRleCsrO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocHJldkNoaWxkcmVuU2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJldkNoaWxkcmVuU2V0ID0gbmV3IFNldChwcmV2Q2hpbGRyZW4pO1xuICAgICAgfVxuXG4gICAgICBpZiAobmV4dENoaWxkcmVuU2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV4dENoaWxkcmVuU2V0ID0gbmV3IFNldChuZXh0Q2hpbGRyZW4pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBuZXh0SGFzUHJldktleSA9IG5leHRDaGlsZHJlblNldC5oYXMocHJldktleSk7XG4gICAgICBjb25zdCBwcmV2SGFzTmV4dEtleSA9IHByZXZDaGlsZHJlblNldC5oYXMobmV4dEtleSk7XG5cbiAgICAgIGlmICghbmV4dEhhc1ByZXZLZXkpIHtcbiAgICAgICAgLy8gUmVtb3ZlIHByZXZcbiAgICAgICAgc2libGluZ0RPTSA9IGdldE5leHRTaWJsaW5nKGdldFByZXZFbGVtZW50QnlLZXlPclRocm93KHByZXZLZXkpKTtcbiAgICAgICAgZGVzdHJveU5vZGUocHJldktleSwgZG9tKTtcbiAgICAgICAgcHJldkluZGV4Kys7XG4gICAgICB9IGVsc2UgaWYgKCFwcmV2SGFzTmV4dEtleSkge1xuICAgICAgICAvLyBDcmVhdGUgbmV4dFxuICAgICAgICBjcmVhdGVOb2RlKG5leHRLZXksIGRvbSwgc2libGluZ0RPTSk7XG4gICAgICAgIG5leHRJbmRleCsrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTW92ZSBuZXh0XG4gICAgICAgIGNvbnN0IGNoaWxkRE9NID0gZ2V0RWxlbWVudEJ5S2V5T3JUaHJvdyhhY3RpdmVFZGl0b3IkMSwgbmV4dEtleSk7XG5cbiAgICAgICAgaWYgKGNoaWxkRE9NID09PSBzaWJsaW5nRE9NKSB7XG4gICAgICAgICAgc2libGluZ0RPTSA9IGdldE5leHRTaWJsaW5nKHJlY29uY2lsZU5vZGUobmV4dEtleSwgZG9tKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHNpYmxpbmdET00gIT0gbnVsbCkge1xuICAgICAgICAgICAgZG9tLmluc2VydEJlZm9yZShjaGlsZERPTSwgc2libGluZ0RPTSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRvbS5hcHBlbmRDaGlsZChjaGlsZERPTSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmVjb25jaWxlTm9kZShuZXh0S2V5LCBkb20pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJldkluZGV4Kys7XG4gICAgICAgIG5leHRJbmRleCsrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGFwcGVuZE5ld0NoaWxkcmVuID0gcHJldkluZGV4ID4gcHJldkVuZEluZGV4O1xuICBjb25zdCByZW1vdmVPbGRDaGlsZHJlbiA9IG5leHRJbmRleCA+IG5leHRFbmRJbmRleDtcblxuICBpZiAoYXBwZW5kTmV3Q2hpbGRyZW4gJiYgIXJlbW92ZU9sZENoaWxkcmVuKSB7XG4gICAgY29uc3QgcHJldmlvdXNOb2RlID0gbmV4dENoaWxkcmVuW25leHRFbmRJbmRleCArIDFdO1xuICAgIGNvbnN0IGluc2VydERPTSA9IHByZXZpb3VzTm9kZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGFjdGl2ZUVkaXRvciQxLmdldEVsZW1lbnRCeUtleShwcmV2aW91c05vZGUpO1xuICAgIGNyZWF0ZUNoaWxkcmVuKG5leHRDaGlsZHJlbiwgbmV4dEVsZW1lbnQsIG5leHRJbmRleCwgbmV4dEVuZEluZGV4LCBkb20sIGluc2VydERPTSk7XG4gIH0gZWxzZSBpZiAocmVtb3ZlT2xkQ2hpbGRyZW4gJiYgIWFwcGVuZE5ld0NoaWxkcmVuKSB7XG4gICAgZGVzdHJveUNoaWxkcmVuKHByZXZDaGlsZHJlbiwgcHJldkluZGV4LCBwcmV2RW5kSW5kZXgsIGRvbSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVjb25jaWxlUm9vdChwcmV2RWRpdG9yU3RhdGUsIG5leHRFZGl0b3JTdGF0ZSwgZWRpdG9yLCBkaXJ0eVR5cGUsIGRpcnR5RWxlbWVudHMsIGRpcnR5TGVhdmVzKSB7XG4gIC8vIFdlIGNhY2hlIHRleHQgY29udGVudCB0byBtYWtlIHJldHJpZXZhbCBtb3JlIGVmZmljaWVudC5cbiAgLy8gVGhlIGNhY2hlIG11c3QgYmUgcmVidWlsdCBkdXJpbmcgcmVjb25jaWxpYXRpb24gdG8gYWNjb3VudCBmb3IgYW55IGNoYW5nZXMuXG4gIHN1YlRyZWVUZXh0Q29udGVudCA9ICcnO1xuICBlZGl0b3JUZXh0Q29udGVudCA9ICcnO1xuICBzdWJUcmVlRGlyZWN0aW9uZWRUZXh0Q29udGVudCA9ICcnOyAvLyBSYXRoZXIgdGhhbiBwYXNzIGFyb3VuZCBhIGxvYWQgb2YgYXJndW1lbnRzIHRocm91Z2ggdGhlIHN0YWNrIHJlY3Vyc2l2ZWx5XG4gIC8vIHdlIGluc3RlYWQgc2V0IHRoZW0gYXMgYmluZGluZ3Mgd2l0aGluIHRoZSBzY29wZSBvZiB0aGUgbW9kdWxlLlxuXG4gIHRyZWF0QWxsTm9kZXNBc0RpcnR5ID0gZGlydHlUeXBlID09PSBGVUxMX1JFQ09OQ0lMRTtcbiAgYWN0aXZlVGV4dERpcmVjdGlvbiA9IG51bGw7XG4gIGFjdGl2ZUVkaXRvciQxID0gZWRpdG9yO1xuICBhY3RpdmVFZGl0b3JDb25maWcgPSBlZGl0b3IuX2NvbmZpZztcbiAgYWN0aXZlRWRpdG9yTm9kZXMgPSBlZGl0b3IuX25vZGVzO1xuICBhY3RpdmVNdXRhdGlvbkxpc3RlbmVycyA9IGFjdGl2ZUVkaXRvciQxLl9saXN0ZW5lcnMubXV0YXRpb247XG4gIGFjdGl2ZURpcnR5RWxlbWVudHMgPSBkaXJ0eUVsZW1lbnRzO1xuICBhY3RpdmVEaXJ0eUxlYXZlcyA9IGRpcnR5TGVhdmVzO1xuICBhY3RpdmVQcmV2Tm9kZU1hcCA9IHByZXZFZGl0b3JTdGF0ZS5fbm9kZU1hcDtcbiAgYWN0aXZlTmV4dE5vZGVNYXAgPSBuZXh0RWRpdG9yU3RhdGUuX25vZGVNYXA7XG4gIGFjdGl2ZUVkaXRvclN0YXRlUmVhZE9ubHkgPSBuZXh0RWRpdG9yU3RhdGUuX3JlYWRPbmx5O1xuICBhY3RpdmVQcmV2S2V5VG9ET01NYXAgPSBuZXcgTWFwKGVkaXRvci5fa2V5VG9ET01NYXApOyAvLyBXZSBrZWVwIHRyYWNrIG9mIG11dGF0ZWQgbm9kZXMgc28gd2UgY2FuIHRyaWdnZXIgbXV0YXRpb25cbiAgLy8gbGlzdGVuZXJzIGxhdGVyIGluIHRoZSB1cGRhdGUgY3ljbGUuXG5cbiAgY29uc3QgY3VycmVudE11dGF0ZWROb2RlcyA9IG5ldyBNYXAoKTtcbiAgbXV0YXRlZE5vZGVzID0gY3VycmVudE11dGF0ZWROb2RlcztcbiAgcmVjb25jaWxlTm9kZSgncm9vdCcsIG51bGwpOyAvLyBXZSBkb24ndCB3YW50IGEgYnVuY2ggb2Ygdm9pZCBjaGVja3MgdGhyb3VnaG91dCB0aGUgc2NvcGVcbiAgLy8gc28gaW5zdGVhZCB3ZSBtYWtlIGl0IHNlZW0gdGhhdCB0aGVzZSB2YWx1ZXMgYXJlIGFsd2F5cyBzZXQuXG4gIC8vIFdlIGFsc28gd2FudCB0byBtYWtlIHN1cmUgd2UgY2xlYXIgdGhlbSBkb3duLCBvdGhlcndpc2Ugd2VcbiAgLy8gY2FuIGxlYWsgbWVtb3J5LlxuICAvLyBAdHMtaWdub3JlXG5cbiAgYWN0aXZlRWRpdG9yJDEgPSB1bmRlZmluZWQ7IC8vIEB0cy1pZ25vcmVcblxuICBhY3RpdmVFZGl0b3JOb2RlcyA9IHVuZGVmaW5lZDsgLy8gQHRzLWlnbm9yZVxuXG4gIGFjdGl2ZURpcnR5RWxlbWVudHMgPSB1bmRlZmluZWQ7IC8vIEB0cy1pZ25vcmVcblxuICBhY3RpdmVEaXJ0eUxlYXZlcyA9IHVuZGVmaW5lZDsgLy8gQHRzLWlnbm9yZVxuXG4gIGFjdGl2ZVByZXZOb2RlTWFwID0gdW5kZWZpbmVkOyAvLyBAdHMtaWdub3JlXG5cbiAgYWN0aXZlTmV4dE5vZGVNYXAgPSB1bmRlZmluZWQ7IC8vIEB0cy1pZ25vcmVcblxuICBhY3RpdmVFZGl0b3JDb25maWcgPSB1bmRlZmluZWQ7IC8vIEB0cy1pZ25vcmVcblxuICBhY3RpdmVQcmV2S2V5VG9ET01NYXAgPSB1bmRlZmluZWQ7IC8vIEB0cy1pZ25vcmVcblxuICBtdXRhdGVkTm9kZXMgPSB1bmRlZmluZWQ7XG4gIHJldHVybiBjdXJyZW50TXV0YXRlZE5vZGVzO1xufVxuZnVuY3Rpb24gc3RvcmVET01XaXRoS2V5KGtleSwgZG9tLCBlZGl0b3IpIHtcbiAgY29uc3Qga2V5VG9ET01NYXAgPSBlZGl0b3IuX2tleVRvRE9NTWFwOyAvLyBAdHMtaWdub3JlIFdlIGludGVudGlvbmFsbHkgYWRkIHRoaXMgdG8gdGhlIE5vZGUuXG5cbiAgZG9tWydfX2xleGljYWxLZXlfJyArIGVkaXRvci5fa2V5XSA9IGtleTtcbiAga2V5VG9ET01NYXAuc2V0KGtleSwgZG9tKTtcbn1cblxuZnVuY3Rpb24gZ2V0UHJldkVsZW1lbnRCeUtleU9yVGhyb3coa2V5KSB7XG4gIGNvbnN0IGVsZW1lbnQgPSBhY3RpdmVQcmV2S2V5VG9ET01NYXAuZ2V0KGtleSk7XG5cbiAgaWYgKGVsZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGBSZWNvbmNpbGlhdGlvbjogY291bGQgbm90IGZpbmQgRE9NIGVsZW1lbnQgZm9yIG5vZGUga2V5ICR7a2V5fWApO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBlbGVtZW50O1xufVxuXG4vKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5jb25zdCBQQVNTX1RIUk9VR0hfQ09NTUFORCA9IE9iamVjdC5mcmVlemUoe30pO1xuY29uc3QgQU5EUk9JRF9DT01QT1NJVElPTl9MQVRFTkNZID0gMzA7XG5jb25zdCByb290RWxlbWVudEV2ZW50cyA9IFtbJ2tleWRvd24nLCBvbktleURvd25dLCBbJ3BvaW50ZXJkb3duJywgb25Qb2ludGVyRG93bl0sIFsnY29tcG9zaXRpb25zdGFydCcsIG9uQ29tcG9zaXRpb25TdGFydF0sIFsnY29tcG9zaXRpb25lbmQnLCBvbkNvbXBvc2l0aW9uRW5kXSwgWydpbnB1dCcsIG9uSW5wdXRdLCBbJ2NsaWNrJywgb25DbGlja10sIFsnY3V0JywgUEFTU19USFJPVUdIX0NPTU1BTkRdLCBbJ2NvcHknLCBQQVNTX1RIUk9VR0hfQ09NTUFORF0sIFsnZHJhZ3N0YXJ0JywgUEFTU19USFJPVUdIX0NPTU1BTkRdLCBbJ2RyYWdvdmVyJywgUEFTU19USFJPVUdIX0NPTU1BTkRdLCBbJ2RyYWdlbmQnLCBQQVNTX1RIUk9VR0hfQ09NTUFORF0sIFsncGFzdGUnLCBQQVNTX1RIUk9VR0hfQ09NTUFORF0sIFsnZm9jdXMnLCBQQVNTX1RIUk9VR0hfQ09NTUFORF0sIFsnYmx1cicsIFBBU1NfVEhST1VHSF9DT01NQU5EXSwgWydkcm9wJywgUEFTU19USFJPVUdIX0NPTU1BTkRdXTtcblxuaWYgKENBTl9VU0VfQkVGT1JFX0lOUFVUKSB7XG4gIHJvb3RFbGVtZW50RXZlbnRzLnB1c2goWydiZWZvcmVpbnB1dCcsIChldmVudCwgZWRpdG9yKSA9PiBvbkJlZm9yZUlucHV0KGV2ZW50LCBlZGl0b3IpXSk7XG59XG5cbmxldCBsYXN0S2V5RG93blRpbWVTdGFtcCA9IDA7XG5sZXQgbGFzdEtleUNvZGUgPSAwO1xubGV0IGxhc3RCZWZvcmVJbnB1dEluc2VydFRleHRUaW1lU3RhbXAgPSAwO1xubGV0IHVucHJvY2Vzc2VkQmVmb3JlSW5wdXREYXRhID0gbnVsbDtcbmxldCByb290RWxlbWVudHNSZWdpc3RlcmVkID0gMDtcbmxldCBpc1NlbGVjdGlvbkNoYW5nZUZyb21ET01VcGRhdGUgPSBmYWxzZTtcbmxldCBpc1NlbGVjdGlvbkNoYW5nZUZyb21Nb3VzZURvd24gPSBmYWxzZTtcbmxldCBpc0luc2VydExpbmVCcmVhayA9IGZhbHNlO1xubGV0IGlzRmlyZWZveEVuZGluZ0NvbXBvc2l0aW9uID0gZmFsc2U7XG5sZXQgY29sbGFwc2VkU2VsZWN0aW9uRm9ybWF0ID0gWzAsICcnLCAwLCAncm9vdCcsIDBdOyAvLyBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIExleGljYWwgc2hvdWxkIGF0dGVtcHQgdG8gb3ZlcnJpZGVcbi8vIHRoZSBkZWZhdWx0IGJyb3dzZXIgYmVoYXZpb3IgZm9yIGluc2VydGlvbiBvZiB0ZXh0IGFuZCB1c2UgaXRzIG93biBpbnRlcm5hbFxuLy8gaGV1cmlzdGljcy4gVGhpcyBpcyBhbiBleHRyZW1lbHkgaW1wb3J0YW50IGZ1bmN0aW9uLCBhbmQgbWFrZXMgbXVjaCBvZiBMZXhpY2FsXG4vLyB3b3JrIGFzIGludGVuZGVkIGJldHdlZW4gZGlmZmVyZW50IGJyb3dzZXJzIGFuZCBhY3Jvc3Mgd29yZCwgbGluZSBhbmQgY2hhcmFjdGVyXG4vLyBib3VuZGFyeS9mb3JtYXRzLiBJdCBhbHNvIGlzIGltcG9ydGFudCBmb3IgdGV4dCByZXBsYWNlbWVudCwgbm9kZSBzY2hlbWFzIGFuZFxuLy8gY29tcG9zaXRpb24gbWVjaGFuaWNzLlxuXG5mdW5jdGlvbiAkc2hvdWxkUHJldmVudERlZmF1bHRBbmRJbnNlcnRUZXh0KHNlbGVjdGlvbiwgZG9tVGFyZ2V0UmFuZ2UsIHRleHQsIHRpbWVTdGFtcCwgaXNCZWZvcmVJbnB1dCkge1xuICBjb25zdCBhbmNob3IgPSBzZWxlY3Rpb24uYW5jaG9yO1xuICBjb25zdCBmb2N1cyA9IHNlbGVjdGlvbi5mb2N1cztcbiAgY29uc3QgYW5jaG9yTm9kZSA9IGFuY2hvci5nZXROb2RlKCk7XG4gIGNvbnN0IGVkaXRvciA9IGdldEFjdGl2ZUVkaXRvcigpO1xuICBjb25zdCBkb21TZWxlY3Rpb24gPSBnZXRET01TZWxlY3Rpb24oZWRpdG9yLl93aW5kb3cpO1xuICBjb25zdCBkb21BbmNob3JOb2RlID0gZG9tU2VsZWN0aW9uICE9PSBudWxsID8gZG9tU2VsZWN0aW9uLmFuY2hvck5vZGUgOiBudWxsO1xuICBjb25zdCBhbmNob3JLZXkgPSBhbmNob3Iua2V5O1xuICBjb25zdCBiYWNraW5nQW5jaG9yRWxlbWVudCA9IGVkaXRvci5nZXRFbGVtZW50QnlLZXkoYW5jaG9yS2V5KTtcbiAgY29uc3QgdGV4dExlbmd0aCA9IHRleHQubGVuZ3RoO1xuICByZXR1cm4gYW5jaG9yS2V5ICE9PSBmb2N1cy5rZXkgfHwgLy8gSWYgd2UncmUgd29ya2luZyB3aXRoIGEgbm9uLXRleHQgbm9kZS5cbiAgICAhJGlzVGV4dE5vZGUoYW5jaG9yTm9kZSkgfHwgLy8gSWYgd2UgYXJlIHJlcGxhY2luZyBhIHJhbmdlIHdpdGggYSBzaW5nbGUgY2hhcmFjdGVyIG9yIGdyYXBoZW1lLCBhbmQgbm90IGNvbXBvc2luZy5cbiAgICAoIWlzQmVmb3JlSW5wdXQgJiYgKCFDQU5fVVNFX0JFRk9SRV9JTlBVVCB8fCAvLyBXZSBjaGVjayB0byBzZWUgaWYgdGhlcmUgaGFzIGJlZW5cbiAgICAgIC8vIGEgcmVjZW50IGJlZm9yZWlucHV0IGV2ZW50IGZvciBcInRleHRJbnB1dFwiLiBJZiB0aGVyZSBoYXMgYmVlbiBvbmUgaW4gdGhlIGxhc3RcbiAgICAgIC8vIDUwbXMgdGhlbiB3ZSBwcm9jZWVkIGFzIG5vcm1hbC4gSG93ZXZlciwgaWYgdGhlcmUgaXMgbm90LCB0aGVuIHRoaXMgaXMgbGlrZWx5XG4gICAgICAvLyBhIGRhbmdsaW5nIGBpbnB1dGAgZXZlbnQgY2F1c2VkIGJ5IGV4ZWNDb21tYW5kKCdpbnNlcnRUZXh0JykuXG4gICAgICBsYXN0QmVmb3JlSW5wdXRJbnNlcnRUZXh0VGltZVN0YW1wIDwgdGltZVN0YW1wICsgNTApIHx8IGFuY2hvck5vZGUuaXNEaXJ0eSgpICYmIHRleHRMZW5ndGggPCAyIHx8IGRvZXNDb250YWluR3JhcGhlbWUodGV4dCkpICYmIGFuY2hvci5vZmZzZXQgIT09IGZvY3VzLm9mZnNldCAmJiAhYW5jaG9yTm9kZS5pc0NvbXBvc2luZygpIHx8IC8vIEFueSBub24gc3RhbmRhcmQgdGV4dCBub2RlLlxuICAgICRpc1Rva2VuT3JTZWdtZW50ZWQoYW5jaG9yTm9kZSkgfHwgLy8gSWYgdGhlIHRleHQgbGVuZ3RoIGlzIG1vcmUgdGhhbiBhIHNpbmdsZSBjaGFyYWN0ZXIgYW5kIHdlJ3JlIGVpdGhlclxuICAgIC8vIGRlYWxpbmcgd2l0aCB0aGlzIGluIFwiYmVmb3JlaW5wdXRcIiBvciB3aGVyZSB0aGUgbm9kZSBoYXMgYWxyZWFkeSByZWNlbnRseVxuICAgIC8vIGJlZW4gY2hhbmdlZCAodGh1cyBpcyBkaXJ0eSkuXG4gICAgYW5jaG9yTm9kZS5pc0RpcnR5KCkgJiYgdGV4dExlbmd0aCA+IDEgfHwgLy8gSWYgdGhlIERPTSBzZWxlY3Rpb24gZWxlbWVudCBpcyBub3QgdGhlIHNhbWUgYXMgdGhlIGJhY2tpbmcgbm9kZSBkdXJpbmcgYmVmb3JlaW5wdXQuXG4gICAgKGlzQmVmb3JlSW5wdXQgfHwgIUNBTl9VU0VfQkVGT1JFX0lOUFVUKSAmJiBiYWNraW5nQW5jaG9yRWxlbWVudCAhPT0gbnVsbCAmJiAhYW5jaG9yTm9kZS5pc0NvbXBvc2luZygpICYmIGRvbUFuY2hvck5vZGUgIT09IGdldERPTVRleHROb2RlKGJhY2tpbmdBbmNob3JFbGVtZW50KSB8fCAvLyBJZiBUYXJnZXRSYW5nZSBpcyBub3QgdGhlIHNhbWUgYXMgdGhlIERPTSBzZWxlY3Rpb247IGJyb3dzZXIgdHJ5aW5nIHRvIGVkaXQgcmFuZG9tIHBhcnRzXG4gICAgLy8gb2YgdGhlIGVkaXRvci5cbiAgICBkb21TZWxlY3Rpb24gIT09IG51bGwgJiYgZG9tVGFyZ2V0UmFuZ2UgIT09IG51bGwgJiYgKCFkb21UYXJnZXRSYW5nZS5jb2xsYXBzZWQgfHwgZG9tVGFyZ2V0UmFuZ2Uuc3RhcnRDb250YWluZXIgIT09IGRvbVNlbGVjdGlvbi5hbmNob3JOb2RlIHx8IGRvbVRhcmdldFJhbmdlLnN0YXJ0T2Zmc2V0ICE9PSBkb21TZWxlY3Rpb24uYW5jaG9yT2Zmc2V0KSB8fCAvLyBDaGVjayBpZiB3ZSdyZSBjaGFuZ2luZyBmcm9tIGJvbGQgdG8gaXRhbGljcywgb3Igc29tZSBvdGhlciBmb3JtYXQuXG4gICAgYW5jaG9yTm9kZS5nZXRGb3JtYXQoKSAhPT0gc2VsZWN0aW9uLmZvcm1hdCB8fCBhbmNob3JOb2RlLmdldFN0eWxlKCkgIT09IHNlbGVjdGlvbi5zdHlsZSB8fCAvLyBPbmUgbGFzdCBzZXQgb2YgaGV1cmlzdGljcyB0byBjaGVjayBhZ2FpbnN0LlxuICAgICRzaG91bGRJbnNlcnRUZXh0QWZ0ZXJPckJlZm9yZVRleHROb2RlKHNlbGVjdGlvbiwgYW5jaG9yTm9kZSk7XG59XG5cbmZ1bmN0aW9uIHNob3VsZFNraXBTZWxlY3Rpb25DaGFuZ2UoZG9tTm9kZSwgb2Zmc2V0KSB7XG4gIHJldHVybiBkb21Ob2RlICE9PSBudWxsICYmIGRvbU5vZGUubm9kZVZhbHVlICE9PSBudWxsICYmIGRvbU5vZGUubm9kZVR5cGUgPT09IERPTV9URVhUX1RZUEUgJiYgb2Zmc2V0ICE9PSAwICYmIG9mZnNldCAhPT0gZG9tTm9kZS5ub2RlVmFsdWUubGVuZ3RoO1xufVxuXG5mdW5jdGlvbiBvblNlbGVjdGlvbkNoYW5nZShkb21TZWxlY3Rpb24sIGVkaXRvciwgaXNBY3RpdmUpIHtcbiAgY29uc3Qge1xuICAgIGFuY2hvck5vZGU6IGFuY2hvckRPTSxcbiAgICBhbmNob3JPZmZzZXQsXG4gICAgZm9jdXNOb2RlOiBmb2N1c0RPTSxcbiAgICBmb2N1c09mZnNldFxuICB9ID0gZG9tU2VsZWN0aW9uO1xuXG4gIGlmIChpc1NlbGVjdGlvbkNoYW5nZUZyb21ET01VcGRhdGUpIHtcbiAgICBpc1NlbGVjdGlvbkNoYW5nZUZyb21ET01VcGRhdGUgPSBmYWxzZTsgLy8gSWYgbmF0aXZlIERPTSBzZWxlY3Rpb24gaXMgb24gYSBET00gZWxlbWVudCwgdGhlblxuICAgIC8vIHdlIHNob3VsZCBjb250aW51ZSBhcyB1c3VhbCwgYXMgTGV4aWNhbCdzIHNlbGVjdGlvblxuICAgIC8vIG1heSBoYXZlIG5vcm1hbGl6ZWQgdG8gYSBiZXR0ZXIgY2hpbGQuIElmIHRoZSBET01cbiAgICAvLyBlbGVtZW50IGlzIGEgdGV4dCBub2RlLCB3ZSBjYW4gc2FmZWx5IGFwcGx5IHRoaXNcbiAgICAvLyBvcHRpbWl6YXRpb24gYW5kIHNraXAgdGhlIHNlbGVjdGlvbiBjaGFuZ2UgZW50aXJlbHkuXG4gICAgLy8gV2UgYWxzbyBuZWVkIHRvIGNoZWNrIGlmIHRoZSBvZmZzZXQgaXMgYXQgdGhlIGJvdW5kYXJ5LFxuICAgIC8vIGJlY2F1c2UgaW4gdGhpcyBjYXNlLCB3ZSBtaWdodCBuZWVkIHRvIG5vcm1hbGl6ZSB0byBhXG4gICAgLy8gc2libGluZyBpbnN0ZWFkLlxuXG4gICAgaWYgKHNob3VsZFNraXBTZWxlY3Rpb25DaGFuZ2UoYW5jaG9yRE9NLCBhbmNob3JPZmZzZXQpICYmIHNob3VsZFNraXBTZWxlY3Rpb25DaGFuZ2UoZm9jdXNET00sIGZvY3VzT2Zmc2V0KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZUVkaXRvcihlZGl0b3IsICgpID0+IHtcbiAgICAvLyBOb24tYWN0aXZlIGVkaXRvciBkb24ndCBuZWVkIGFueSBleHRyYSBsb2dpYyBmb3Igc2VsZWN0aW9uLCBpdCBvbmx5IG5lZWRzIHVwZGF0ZVxuICAgIC8vIHRvIHJlY29uY2lsZSBzZWxlY3Rpb24gKHNldCBpdCB0byBudWxsKSB0byBlbnN1cmUgdGhhdCBvbmx5IG9uZSBlZGl0b3IgaGFzIG5vbi1udWxsIHNlbGVjdGlvbi5cbiAgICBpZiAoIWlzQWN0aXZlKSB7XG4gICAgICAkc2V0U2VsZWN0aW9uKG51bGwpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghaXNTZWxlY3Rpb25XaXRoaW5FZGl0b3IoZWRpdG9yLCBhbmNob3JET00sIGZvY3VzRE9NKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHNlbGVjdGlvbiA9ICRnZXRTZWxlY3Rpb24oKTsgLy8gVXBkYXRlIHRoZSBzZWxlY3Rpb24gZm9ybWF0XG5cbiAgICBpZiAoJGlzUmFuZ2VTZWxlY3Rpb24oc2VsZWN0aW9uKSkge1xuICAgICAgY29uc3QgYW5jaG9yID0gc2VsZWN0aW9uLmFuY2hvcjtcbiAgICAgIGNvbnN0IGFuY2hvck5vZGUgPSBhbmNob3IuZ2V0Tm9kZSgpO1xuXG4gICAgICBpZiAoc2VsZWN0aW9uLmlzQ29sbGFwc2VkKCkpIHtcbiAgICAgICAgLy8gQmFkbHkgaW50ZXJwcmV0ZWQgcmFuZ2Ugc2VsZWN0aW9uIHdoZW4gY29sbGFwc2VkIC0gIzE0ODJcbiAgICAgICAgaWYgKGRvbVNlbGVjdGlvbi50eXBlID09PSAnUmFuZ2UnICYmIGRvbVNlbGVjdGlvbi5hbmNob3JOb2RlID09PSBkb21TZWxlY3Rpb24uZm9jdXNOb2RlKSB7XG4gICAgICAgICAgc2VsZWN0aW9uLmRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgfSAvLyBJZiB3ZSBoYXZlIG1hcmtlZCBhIGNvbGxhcHNlZCBzZWxlY3Rpb24gZm9ybWF0LCBhbmQgd2UncmVcbiAgICAgICAgLy8gd2l0aGluIHRoZSBnaXZlbiB0aW1lIHJhbmdlIOKAkyB0aGVuIGF0dGVtcHQgdG8gdXNlIHRoYXQgZm9ybWF0XG4gICAgICAgIC8vIGluc3RlYWQgb2YgZ2V0dGluZyB0aGUgZm9ybWF0IGZyb20gdGhlIGFuY2hvciBub2RlLlxuXG5cbiAgICAgICAgY29uc3Qgd2luZG93RXZlbnQgPSBnZXRXaW5kb3coZWRpdG9yKS5ldmVudDtcbiAgICAgICAgY29uc3QgY3VycmVudFRpbWVTdGFtcCA9IHdpbmRvd0V2ZW50ID8gd2luZG93RXZlbnQudGltZVN0YW1wIDogcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgIGNvbnN0IFtsYXN0Rm9ybWF0LCBsYXN0U3R5bGUsIGxhc3RPZmZzZXQsIGxhc3RLZXksIHRpbWVTdGFtcF0gPSBjb2xsYXBzZWRTZWxlY3Rpb25Gb3JtYXQ7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRUaW1lU3RhbXAgPCB0aW1lU3RhbXAgKyAyMDAgJiYgYW5jaG9yLm9mZnNldCA9PT0gbGFzdE9mZnNldCAmJiBhbmNob3Iua2V5ID09PSBsYXN0S2V5KSB7XG4gICAgICAgICAgc2VsZWN0aW9uLmZvcm1hdCA9IGxhc3RGb3JtYXQ7XG4gICAgICAgICAgc2VsZWN0aW9uLnN0eWxlID0gbGFzdFN0eWxlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChhbmNob3IudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICBzZWxlY3Rpb24uZm9ybWF0ID0gYW5jaG9yTm9kZS5nZXRGb3JtYXQoKTtcbiAgICAgICAgICAgIHNlbGVjdGlvbi5zdHlsZSA9IGFuY2hvck5vZGUuZ2V0U3R5bGUoKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGFuY2hvci50eXBlID09PSAnZWxlbWVudCcpIHtcbiAgICAgICAgICAgIHNlbGVjdGlvbi5mb3JtYXQgPSAwO1xuICAgICAgICAgICAgc2VsZWN0aW9uLnN0eWxlID0gJyc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgY29tYmluZWRGb3JtYXQgPSBJU19BTExfRk9STUFUVElORztcbiAgICAgICAgbGV0IGhhc1RleHROb2RlcyA9IGZhbHNlO1xuICAgICAgICBjb25zdCBub2RlcyA9IHNlbGVjdGlvbi5nZXROb2RlcygpO1xuICAgICAgICBjb25zdCBub2Rlc0xlbmd0aCA9IG5vZGVzLmxlbmd0aDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbaV07XG5cbiAgICAgICAgICBpZiAoJGlzVGV4dE5vZGUobm9kZSkpIHtcbiAgICAgICAgICAgIC8vIFRPRE86IHdoYXQgYWJvdXQgc3R5bGU/XG4gICAgICAgICAgICBoYXNUZXh0Tm9kZXMgPSB0cnVlO1xuICAgICAgICAgICAgY29tYmluZWRGb3JtYXQgJj0gbm9kZS5nZXRGb3JtYXQoKTtcblxuICAgICAgICAgICAgaWYgKGNvbWJpbmVkRm9ybWF0ID09PSAwKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGVjdGlvbi5mb3JtYXQgPSBoYXNUZXh0Tm9kZXMgPyBjb21iaW5lZEZvcm1hdCA6IDA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgU0VMRUNUSU9OX0NIQU5HRV9DT01NQU5ELCB1bmRlZmluZWQpO1xuICB9KTtcbn0gLy8gVGhpcyBpcyBhIHdvcmstYXJvdW5kIGlzIG1haW5seSBDaHJvbWUgc3BlY2lmaWMgYnVnIHdoZXJlIGlmIHlvdSBzZWxlY3Rcbi8vIHRoZSBjb250ZW50cyBvZiBhbiBlbXB0eSBibG9jaywgeW91IGNhbm5vdCBlYXNpbHkgdW5zZWxlY3QgYW55dGhpbmcuXG4vLyBUaGlzIHJlc3VsdHMgaW4gYSB0aW55IHNlbGVjdGlvbiBib3ggdGhhdCBsb29rcyBidWdneS9icm9rZW4uIFRoaXMgY2FuXG4vLyBhbHNvIGhlbHAgb3RoZXIgYnJvd3NlcnMgd2hlbiBzZWxlY3Rpb24gbWlnaHQgXCJhcHBlYXJcIiBsb3N0LCB3aGVuIGl0XG4vLyByZWFsbHkgaXNuJ3QuXG5cblxuZnVuY3Rpb24gb25DbGljayhldmVudCwgZWRpdG9yKSB7XG4gIHVwZGF0ZUVkaXRvcihlZGl0b3IsICgpID0+IHtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSAkZ2V0U2VsZWN0aW9uKCk7XG4gICAgY29uc3QgZG9tU2VsZWN0aW9uID0gZ2V0RE9NU2VsZWN0aW9uKGVkaXRvci5fd2luZG93KTtcbiAgICBjb25zdCBsYXN0U2VsZWN0aW9uID0gJGdldFByZXZpb3VzU2VsZWN0aW9uKCk7XG5cbiAgICBpZiAoJGlzUmFuZ2VTZWxlY3Rpb24oc2VsZWN0aW9uKSkge1xuICAgICAgY29uc3QgYW5jaG9yID0gc2VsZWN0aW9uLmFuY2hvcjtcbiAgICAgIGNvbnN0IGFuY2hvck5vZGUgPSBhbmNob3IuZ2V0Tm9kZSgpO1xuXG4gICAgICBpZiAoZG9tU2VsZWN0aW9uICYmIGFuY2hvci50eXBlID09PSAnZWxlbWVudCcgJiYgYW5jaG9yLm9mZnNldCA9PT0gMCAmJiBzZWxlY3Rpb24uaXNDb2xsYXBzZWQoKSAmJiAhJGlzUm9vdE5vZGUoYW5jaG9yTm9kZSkgJiYgJGdldFJvb3QoKS5nZXRDaGlsZHJlblNpemUoKSA9PT0gMSAmJiBhbmNob3JOb2RlLmdldFRvcExldmVsRWxlbWVudE9yVGhyb3coKS5pc0VtcHR5KCkgJiYgbGFzdFNlbGVjdGlvbiAhPT0gbnVsbCAmJiBzZWxlY3Rpb24uaXMobGFzdFNlbGVjdGlvbikpIHtcbiAgICAgICAgZG9tU2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgICAgICBzZWxlY3Rpb24uZGlydHkgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIENMSUNLX0NPTU1BTkQsIGV2ZW50KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG9uUG9pbnRlckRvd24oZXZlbnQsIGVkaXRvcikge1xuICAvLyBUT0RPIGltcGxlbWVudCB0ZXh0IGRyYWcgJiBkcm9wXG4gIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgY29uc3QgcG9pbnRlclR5cGUgPSBldmVudC5wb2ludGVyVHlwZTtcblxuICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgTm9kZSAmJiBwb2ludGVyVHlwZSAhPT0gJ3RvdWNoJykge1xuICAgIHVwZGF0ZUVkaXRvcihlZGl0b3IsICgpID0+IHtcbiAgICAgIC8vIERyYWcgJiBkcm9wIHNob3VsZCBub3QgcmVjb21wdXRlIHNlbGVjdGlvbiB1bnRpbCBtb3VzZSB1cDsgb3RoZXJ3aXNlIHRoZSBpbml0aWFsbHlcbiAgICAgIC8vIHNlbGVjdGVkIGNvbnRlbnQgaXMgbG9zdC5cbiAgICAgIGlmICghJGlzU2VsZWN0aW9uQ2FwdHVyZWRJbkRlY29yYXRvcih0YXJnZXQpKSB7XG4gICAgICAgIGlzU2VsZWN0aW9uQ2hhbmdlRnJvbU1vdXNlRG93biA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0VGFyZ2V0UmFuZ2UoZXZlbnQpIHtcbiAgaWYgKCFldmVudC5nZXRUYXJnZXRSYW5nZXMpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IHRhcmdldFJhbmdlcyA9IGV2ZW50LmdldFRhcmdldFJhbmdlcygpO1xuXG4gIGlmICh0YXJnZXRSYW5nZXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0UmFuZ2VzWzBdO1xufVxuXG5mdW5jdGlvbiAkY2FuUmVtb3ZlVGV4dChhbmNob3JOb2RlLCBmb2N1c05vZGUpIHtcbiAgcmV0dXJuIGFuY2hvck5vZGUgIT09IGZvY3VzTm9kZSB8fCAkaXNFbGVtZW50Tm9kZShhbmNob3JOb2RlKSB8fCAkaXNFbGVtZW50Tm9kZShmb2N1c05vZGUpIHx8ICFhbmNob3JOb2RlLmlzVG9rZW4oKSB8fCAhZm9jdXNOb2RlLmlzVG9rZW4oKTtcbn1cblxuZnVuY3Rpb24gaXNQb3NzaWJseUFuZHJvaWRLZXlQcmVzcyh0aW1lU3RhbXApIHtcbiAgcmV0dXJuIGxhc3RLZXlDb2RlID09PSAyMjkgJiYgdGltZVN0YW1wIDwgbGFzdEtleURvd25UaW1lU3RhbXAgKyBBTkRST0lEX0NPTVBPU0lUSU9OX0xBVEVOQ1k7XG59XG5cbmZ1bmN0aW9uIG9uQmVmb3JlSW5wdXQoZXZlbnQsIGVkaXRvcikge1xuICBjb25zdCBpbnB1dFR5cGUgPSBldmVudC5pbnB1dFR5cGU7XG4gIGNvbnN0IHRhcmdldFJhbmdlID0gZ2V0VGFyZ2V0UmFuZ2UoZXZlbnQpOyAvLyBXZSBsZXQgdGhlIGJyb3dzZXIgZG8gaXRzIG93biB0aGluZyBmb3IgY29tcG9zaXRpb24uXG5cbiAgaWYgKGlucHV0VHlwZSA9PT0gJ2RlbGV0ZUNvbXBvc2l0aW9uVGV4dCcgfHwgLy8gSWYgd2UncmUgcGFzdGluZyBpbiBGRiwgd2Ugc2hvdWxkbid0IGdldCB0aGlzIGV2ZW50XG4gICAgLy8gYXMgdGhlIGBwYXN0ZWAgZXZlbnQgc2hvdWxkIGhhdmUgdHJpZ2dlcmVkLCB1bmxlc3MgdGhlXG4gICAgLy8gdXNlciBoYXMgZG9tLmV2ZW50LmNsaXBib2FyZGV2ZW50cy5lbmFibGVkIGRpc2FibGVkIGluXG4gICAgLy8gYWJvdXQ6Y29uZmlnLiBJbiB0aGF0IGNhc2UsIHdlIG5lZWQgdG8gcHJvY2VzcyB0aGVcbiAgICAvLyBwYXN0ZWQgY29udGVudCBpbiB0aGUgRE9NIG11dGF0aW9uIHBoYXNlLlxuICAgIElTX0ZJUkVGT1ggJiYgaXNGaXJlZm94Q2xpcGJvYXJkRXZlbnRzKGVkaXRvcikpIHtcbiAgICByZXR1cm47XG4gIH0gZWxzZSBpZiAoaW5wdXRUeXBlID09PSAnaW5zZXJ0Q29tcG9zaXRpb25UZXh0Jykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHVwZGF0ZUVkaXRvcihlZGl0b3IsICgpID0+IHtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSAkZ2V0U2VsZWN0aW9uKCk7XG5cbiAgICBpZiAoaW5wdXRUeXBlID09PSAnZGVsZXRlQ29udGVudEJhY2t3YXJkJykge1xuICAgICAgaWYgKHNlbGVjdGlvbiA9PT0gbnVsbCkge1xuICAgICAgICAvLyBVc2UgcHJldmlvdXMgc2VsZWN0aW9uXG4gICAgICAgIGNvbnN0IHByZXZTZWxlY3Rpb24gPSAkZ2V0UHJldmlvdXNTZWxlY3Rpb24oKTtcblxuICAgICAgICBpZiAoISRpc1JhbmdlU2VsZWN0aW9uKHByZXZTZWxlY3Rpb24pKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNldFNlbGVjdGlvbihwcmV2U2VsZWN0aW9uLmNsb25lKCkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoJGlzUmFuZ2VTZWxlY3Rpb24oc2VsZWN0aW9uKSkge1xuICAgICAgICAvLyBVc2VkIGZvciBoYW5kbGluZyBiYWNrc3BhY2UgaW4gQW5kcm9pZC5cbiAgICAgICAgaWYgKGlzUG9zc2libHlBbmRyb2lkS2V5UHJlc3MoZXZlbnQudGltZVN0YW1wKSAmJiBlZGl0b3IuaXNDb21wb3NpbmcoKSAmJiBzZWxlY3Rpb24uYW5jaG9yLmtleSA9PT0gc2VsZWN0aW9uLmZvY3VzLmtleSkge1xuICAgICAgICAgICRzZXRDb21wb3NpdGlvbktleShudWxsKTtcbiAgICAgICAgICBsYXN0S2V5RG93blRpbWVTdGFtcCA9IDA7IC8vIEZpeGVzIGFuIEFuZHJvaWQgYnVnIHdoZXJlIHNlbGVjdGlvbiBmbGlja2VycyB3aGVuIGJhY2tzcGFjaW5nXG5cbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHVwZGF0ZUVkaXRvcihlZGl0b3IsICgpID0+IHtcbiAgICAgICAgICAgICAgJHNldENvbXBvc2l0aW9uS2V5KG51bGwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSwgQU5EUk9JRF9DT01QT1NJVElPTl9MQVRFTkNZKTtcblxuICAgICAgICAgIGlmICgkaXNSYW5nZVNlbGVjdGlvbihzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgICBjb25zdCBhbmNob3JOb2RlID0gc2VsZWN0aW9uLmFuY2hvci5nZXROb2RlKCk7XG4gICAgICAgICAgICBhbmNob3JOb2RlLm1hcmtEaXJ0eSgpO1xuICAgICAgICAgICAgc2VsZWN0aW9uLmZvcm1hdCA9IGFuY2hvck5vZGUuZ2V0Rm9ybWF0KCk7XG4gICAgICAgICAgICBzZWxlY3Rpb24uc3R5bGUgPSBhbmNob3JOb2RlLmdldFN0eWxlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgREVMRVRFX0NIQVJBQ1RFUl9DT01NQU5ELCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoISRpc1JhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gZXZlbnQuZGF0YTsgLy8gVGhpcyByZXByZXNlbnRzIHRoZSBjYXNlIHdoZW4gdHdvIGJlZm9yZWlucHV0IGV2ZW50cyBhcmUgdHJpZ2dlcmVkIGF0IHRoZSBzYW1lIHRpbWUgKHdpdGhvdXQgYVxuICAgIC8vIGZ1bGwgZXZlbnQgbG9vcCBlbmRpbmcgYXQgaW5wdXQpLiBUaGlzIGhhcHBlbnMgd2l0aCBNYWNPUyB3aXRoIHRoZSBkZWZhdWx0IGtleWJvYXJkIHNldHRpbmdzLFxuICAgIC8vIGEgY29tYmluYXRpb24gb2YgYXV0b2NvcnJlY3Rpb24gKyBhdXRvY2FwaXRhbGl6YXRpb24uXG4gICAgLy8gSGF2aW5nIExleGljYWwgcnVuIGV2ZXJ5dGhpbmcgaW4gY29udHJvbGxlZCBtb2RlIHdvdWxkIGZpeCB0aGUgaXNzdWUgd2l0aG91dCBhZGRpdGlvbmFsIGNvZGVcbiAgICAvLyBidXQgdGhpcyB3b3VsZCBraWxsIHRoZSBtYXNzaXZlIHBlcmZvcm1hbmNlIHdpbiBmcm9tIHRoZSBtb3N0IGNvbW1vbiB0eXBpbmcgZXZlbnQuXG4gICAgLy8gQWx0ZXJuYXRpdmVseSwgd2hlbiB0aGlzIGhhcHBlbnMgd2UgY2FuIHByZW1hdHVyZWx5IHVwZGF0ZSBvdXIgRWRpdG9yU3RhdGUgYmFzZWQgb24gdGhlIERPTVxuICAgIC8vIGNvbnRlbnQsIGEgam9iIHRoYXQgd291bGQgdXN1YWxseSBiZSB0aGUgaW5wdXQgZXZlbnQncyByZXNwb25zaWJpbGl0eS5cblxuICAgIGlmICh1bnByb2Nlc3NlZEJlZm9yZUlucHV0RGF0YSAhPT0gbnVsbCkge1xuICAgICAgJHVwZGF0ZVNlbGVjdGVkVGV4dEZyb21ET00oZmFsc2UsIGVkaXRvciwgdW5wcm9jZXNzZWRCZWZvcmVJbnB1dERhdGEpO1xuICAgIH1cblxuICAgIGlmICgoIXNlbGVjdGlvbi5kaXJ0eSB8fCB1bnByb2Nlc3NlZEJlZm9yZUlucHV0RGF0YSAhPT0gbnVsbCkgJiYgc2VsZWN0aW9uLmlzQ29sbGFwc2VkKCkgJiYgISRpc1Jvb3ROb2RlKHNlbGVjdGlvbi5hbmNob3IuZ2V0Tm9kZSgpKSAmJiB0YXJnZXRSYW5nZSAhPT0gbnVsbCkge1xuICAgICAgc2VsZWN0aW9uLmFwcGx5RE9NUmFuZ2UodGFyZ2V0UmFuZ2UpO1xuICAgIH1cblxuICAgIHVucHJvY2Vzc2VkQmVmb3JlSW5wdXREYXRhID0gbnVsbDtcbiAgICBjb25zdCBhbmNob3IgPSBzZWxlY3Rpb24uYW5jaG9yO1xuICAgIGNvbnN0IGZvY3VzID0gc2VsZWN0aW9uLmZvY3VzO1xuICAgIGNvbnN0IGFuY2hvck5vZGUgPSBhbmNob3IuZ2V0Tm9kZSgpO1xuICAgIGNvbnN0IGZvY3VzTm9kZSA9IGZvY3VzLmdldE5vZGUoKTtcblxuICAgIGlmIChpbnB1dFR5cGUgPT09ICdpbnNlcnRUZXh0JyB8fCBpbnB1dFR5cGUgPT09ICdpbnNlcnRUcmFuc3Bvc2UnKSB7XG4gICAgICBpZiAoZGF0YSA9PT0gJ1xcbicpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgSU5TRVJUX0xJTkVfQlJFQUtfQ09NTUFORCwgZmFsc2UpO1xuICAgICAgfSBlbHNlIGlmIChkYXRhID09PSBET1VCTEVfTElORV9CUkVBSykge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBJTlNFUlRfUEFSQUdSQVBIX0NPTU1BTkQsIHVuZGVmaW5lZCk7XG4gICAgICB9IGVsc2UgaWYgKGRhdGEgPT0gbnVsbCAmJiBldmVudC5kYXRhVHJhbnNmZXIpIHtcbiAgICAgICAgLy8gR2V0cyBhcm91bmQgYSBTYWZhcmkgdGV4dCByZXBsYWNlbWVudCBidWcuXG4gICAgICAgIGNvbnN0IHRleHQgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBzZWxlY3Rpb24uaW5zZXJ0UmF3VGV4dCh0ZXh0KTtcbiAgICAgIH0gZWxzZSBpZiAoZGF0YSAhPSBudWxsICYmICRzaG91bGRQcmV2ZW50RGVmYXVsdEFuZEluc2VydFRleHQoc2VsZWN0aW9uLCB0YXJnZXRSYW5nZSwgZGF0YSwgZXZlbnQudGltZVN0YW1wLCB0cnVlKSkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBDT05UUk9MTEVEX1RFWFRfSU5TRVJUSU9OX0NPTU1BTkQsIGRhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdW5wcm9jZXNzZWRCZWZvcmVJbnB1dERhdGEgPSBkYXRhO1xuICAgICAgfVxuXG4gICAgICBsYXN0QmVmb3JlSW5wdXRJbnNlcnRUZXh0VGltZVN0YW1wID0gZXZlbnQudGltZVN0YW1wO1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gUHJldmVudCB0aGUgYnJvd3NlciBmcm9tIGNhcnJ5aW5nIG91dFxuICAgIC8vIHRoZSBpbnB1dCBldmVudCwgc28gd2UgY2FuIGNvbnRyb2wgdGhlXG4gICAgLy8gb3V0cHV0LlxuXG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgc3dpdGNoIChpbnB1dFR5cGUpIHtcbiAgICAgIGNhc2UgJ2luc2VydEZyb21ZYW5rJzpcbiAgICAgIGNhc2UgJ2luc2VydEZyb21Ecm9wJzpcbiAgICAgIGNhc2UgJ2luc2VydFJlcGxhY2VtZW50VGV4dCc6XG4gICAgICB7XG4gICAgICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIENPTlRST0xMRURfVEVYVF9JTlNFUlRJT05fQ09NTUFORCwgZXZlbnQpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSAnaW5zZXJ0RnJvbUNvbXBvc2l0aW9uJzpcbiAgICAgIHtcbiAgICAgICAgLy8gVGhpcyBpcyB0aGUgZW5kIG9mIGNvbXBvc2l0aW9uXG4gICAgICAgICRzZXRDb21wb3NpdGlvbktleShudWxsKTtcbiAgICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgQ09OVFJPTExFRF9URVhUX0lOU0VSVElPTl9DT01NQU5ELCBldmVudCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdpbnNlcnRMaW5lQnJlYWsnOlxuICAgICAge1xuICAgICAgICAvLyBVc2VkIGZvciBBbmRyb2lkXG4gICAgICAgICRzZXRDb21wb3NpdGlvbktleShudWxsKTtcbiAgICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgSU5TRVJUX0xJTkVfQlJFQUtfQ09NTUFORCwgZmFsc2UpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSAnaW5zZXJ0UGFyYWdyYXBoJzpcbiAgICAgIHtcbiAgICAgICAgLy8gVXNlZCBmb3IgQW5kcm9pZFxuICAgICAgICAkc2V0Q29tcG9zaXRpb25LZXkobnVsbCk7IC8vIFNvbWUgYnJvd3NlcnMgZG8gbm90IHByb3ZpZGUgdGhlIHR5cGUgXCJpbnNlcnRMaW5lQnJlYWtcIi5cbiAgICAgICAgLy8gU28gaW5zdGVhZCwgd2UgbmVlZCB0byBpbmZlciBpdCBmcm9tIHRoZSBrZXlib2FyZCBldmVudC5cblxuICAgICAgICBpZiAoaXNJbnNlcnRMaW5lQnJlYWspIHtcbiAgICAgICAgICBpc0luc2VydExpbmVCcmVhayA9IGZhbHNlO1xuICAgICAgICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIElOU0VSVF9MSU5FX0JSRUFLX0NPTU1BTkQsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBJTlNFUlRfUEFSQUdSQVBIX0NPTU1BTkQsIHVuZGVmaW5lZCk7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSAnaW5zZXJ0RnJvbVBhc3RlJzpcbiAgICAgIGNhc2UgJ2luc2VydEZyb21QYXN0ZUFzUXVvdGF0aW9uJzpcbiAgICAgIHtcbiAgICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgUEFTVEVfQ09NTUFORCwgZXZlbnQpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVsZXRlQnlDb21wb3NpdGlvbic6XG4gICAgICB7XG4gICAgICAgIGlmICgkY2FuUmVtb3ZlVGV4dChhbmNob3JOb2RlLCBmb2N1c05vZGUpKSB7XG4gICAgICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgUkVNT1ZFX1RFWFRfQ09NTUFORCwgdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWxldGVCeURyYWcnOlxuICAgICAgY2FzZSAnZGVsZXRlQnlDdXQnOlxuICAgICAge1xuICAgICAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBSRU1PVkVfVEVYVF9DT01NQU5ELCB1bmRlZmluZWQpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVsZXRlQ29udGVudCc6XG4gICAgICB7XG4gICAgICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIERFTEVURV9DSEFSQUNURVJfQ09NTUFORCwgZmFsc2UpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVsZXRlV29yZEJhY2t3YXJkJzpcbiAgICAgIHtcbiAgICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgREVMRVRFX1dPUkRfQ09NTUFORCwgdHJ1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWxldGVXb3JkRm9yd2FyZCc6XG4gICAgICB7XG4gICAgICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIERFTEVURV9XT1JEX0NPTU1BTkQsIGZhbHNlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlbGV0ZUhhcmRMaW5lQmFja3dhcmQnOlxuICAgICAgY2FzZSAnZGVsZXRlU29mdExpbmVCYWNrd2FyZCc6XG4gICAgICB7XG4gICAgICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIERFTEVURV9MSU5FX0NPTU1BTkQsIHRydWUpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVsZXRlQ29udGVudEZvcndhcmQnOlxuICAgICAgY2FzZSAnZGVsZXRlSGFyZExpbmVGb3J3YXJkJzpcbiAgICAgIGNhc2UgJ2RlbGV0ZVNvZnRMaW5lRm9yd2FyZCc6XG4gICAgICB7XG4gICAgICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIERFTEVURV9MSU5FX0NPTU1BTkQsIGZhbHNlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2Zvcm1hdFN0cmlrZVRocm91Z2gnOlxuICAgICAge1xuICAgICAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBGT1JNQVRfVEVYVF9DT01NQU5ELCAnc3RyaWtldGhyb3VnaCcpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZm9ybWF0Qm9sZCc6XG4gICAgICB7XG4gICAgICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIEZPUk1BVF9URVhUX0NPTU1BTkQsICdib2xkJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdmb3JtYXRJdGFsaWMnOlxuICAgICAge1xuICAgICAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBGT1JNQVRfVEVYVF9DT01NQU5ELCAnaXRhbGljJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdmb3JtYXRVbmRlcmxpbmUnOlxuICAgICAge1xuICAgICAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBGT1JNQVRfVEVYVF9DT01NQU5ELCAndW5kZXJsaW5lJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdoaXN0b3J5VW5kbyc6XG4gICAgICB7XG4gICAgICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIFVORE9fQ09NTUFORCwgdW5kZWZpbmVkKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2hpc3RvcnlSZWRvJzpcbiAgICAgIHtcbiAgICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgUkVET19DT01NQU5ELCB1bmRlZmluZWQpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG9uSW5wdXQoZXZlbnQsIGVkaXRvcikge1xuICAvLyBXZSBkb24ndCB3YW50IHRoZSBvbklucHV0IHRvIGJ1YmJsZSwgaW4gdGhlIGNhc2Ugb2YgbmVzdGVkIGVkaXRvcnMuXG4gIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICB1cGRhdGVFZGl0b3IoZWRpdG9yLCAoKSA9PiB7XG4gICAgY29uc3Qgc2VsZWN0aW9uID0gJGdldFNlbGVjdGlvbigpO1xuICAgIGNvbnN0IGRhdGEgPSBldmVudC5kYXRhO1xuICAgIGNvbnN0IHRhcmdldFJhbmdlID0gZ2V0VGFyZ2V0UmFuZ2UoZXZlbnQpO1xuXG4gICAgaWYgKGRhdGEgIT0gbnVsbCAmJiAkaXNSYW5nZVNlbGVjdGlvbihzZWxlY3Rpb24pICYmICRzaG91bGRQcmV2ZW50RGVmYXVsdEFuZEluc2VydFRleHQoc2VsZWN0aW9uLCB0YXJnZXRSYW5nZSwgZGF0YSwgZXZlbnQudGltZVN0YW1wLCBmYWxzZSkpIHtcbiAgICAgIC8vIEdpdmVuIHdlJ3JlIG92ZXItcmlkaW5nIHRoZSBkZWZhdWx0IGJlaGF2aW9yLCB3ZSB3aWxsIG5lZWRcbiAgICAgIC8vIHRvIGVuc3VyZSB0byBkaXNhYmxlIGNvbXBvc2l0aW9uIGJlZm9yZSBkaXNwYXRjaGluZyB0aGVcbiAgICAgIC8vIGluc2VydFRleHQgY29tbWFuZCBmb3Igd2hlbiBjaGFuZ2luZyB0aGUgc2VxdWVuY2UgZm9yIEZGLlxuICAgICAgaWYgKGlzRmlyZWZveEVuZGluZ0NvbXBvc2l0aW9uKSB7XG4gICAgICAgIG9uQ29tcG9zaXRpb25FbmRJbXBsKGVkaXRvciwgZGF0YSk7XG4gICAgICAgIGlzRmlyZWZveEVuZGluZ0NvbXBvc2l0aW9uID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGFuY2hvciA9IHNlbGVjdGlvbi5hbmNob3I7XG4gICAgICBjb25zdCBhbmNob3JOb2RlID0gYW5jaG9yLmdldE5vZGUoKTtcbiAgICAgIGNvbnN0IGRvbVNlbGVjdGlvbiA9IGdldERPTVNlbGVjdGlvbihlZGl0b3IuX3dpbmRvdyk7XG5cbiAgICAgIGlmIChkb21TZWxlY3Rpb24gPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBvZmZzZXQgPSBhbmNob3Iub2Zmc2V0OyAvLyBJZiB0aGUgY29udGVudCBpcyB0aGUgc2FtZSBhcyBpbnNlcnRlZCwgdGhlbiBkb24ndCBkaXNwYXRjaCBhbiBpbnNlcnRpb24uXG4gICAgICAvLyBHaXZlbiBvbklucHV0IGRvZXNuJ3QgdGFrZSB0aGUgY3VycmVudCBzZWxlY3Rpb24gKGl0IHVzZXMgdGhlIHByZXZpb3VzKVxuICAgICAgLy8gd2UgY2FuIGNvbXBhcmUgdGhhdCBhZ2FpbnN0IHdoYXQgdGhlIERPTSBjdXJyZW50bHkgc2F5cy5cblxuICAgICAgaWYgKCFDQU5fVVNFX0JFRk9SRV9JTlBVVCB8fCBzZWxlY3Rpb24uaXNDb2xsYXBzZWQoKSB8fCAhJGlzVGV4dE5vZGUoYW5jaG9yTm9kZSkgfHwgZG9tU2VsZWN0aW9uLmFuY2hvck5vZGUgPT09IG51bGwgfHwgYW5jaG9yTm9kZS5nZXRUZXh0Q29udGVudCgpLnNsaWNlKDAsIG9mZnNldCkgKyBkYXRhICsgYW5jaG9yTm9kZS5nZXRUZXh0Q29udGVudCgpLnNsaWNlKG9mZnNldCArIHNlbGVjdGlvbi5mb2N1cy5vZmZzZXQpICE9PSBnZXRBbmNob3JUZXh0RnJvbURPTShkb21TZWxlY3Rpb24uYW5jaG9yTm9kZSkpIHtcbiAgICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgQ09OVFJPTExFRF9URVhUX0lOU0VSVElPTl9DT01NQU5ELCBkYXRhKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdGV4dExlbmd0aCA9IGRhdGEubGVuZ3RoOyAvLyBBbm90aGVyIGhhY2sgZm9yIEZGLCBhcyBpdCdzIHBvc3NpYmxlIHRoYXQgdGhlIElNRSBpcyBzdGlsbFxuICAgICAgLy8gb3BlbiwgZXZlbiB0aG91Z2ggY29tcG9zaXRpb25lbmQgaGFzIGFscmVhZHkgZmlyZWQgKHNpZ2gpLlxuXG4gICAgICBpZiAoSVNfRklSRUZPWCAmJiB0ZXh0TGVuZ3RoID4gMSAmJiBldmVudC5pbnB1dFR5cGUgPT09ICdpbnNlcnRDb21wb3NpdGlvblRleHQnICYmICFlZGl0b3IuaXNDb21wb3NpbmcoKSkge1xuICAgICAgICBzZWxlY3Rpb24uYW5jaG9yLm9mZnNldCAtPSB0ZXh0TGVuZ3RoO1xuICAgICAgfSAvLyBUaGlzIGVuc3VyZXMgY29uc2lzdGVuY3kgb24gQW5kcm9pZC5cblxuXG4gICAgICBpZiAoIUlTX1NBRkFSSSAmJiAhSVNfSU9TICYmICFJU19BUFBMRV9XRUJLSVQgJiYgZWRpdG9yLmlzQ29tcG9zaW5nKCkpIHtcbiAgICAgICAgbGFzdEtleURvd25UaW1lU3RhbXAgPSAwO1xuICAgICAgICAkc2V0Q29tcG9zaXRpb25LZXkobnVsbCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNoYXJhY3RlckRhdGEgPSBkYXRhICE9PSBudWxsID8gZGF0YSA6IHVuZGVmaW5lZDtcbiAgICAgICR1cGRhdGVTZWxlY3RlZFRleHRGcm9tRE9NKGZhbHNlLCBlZGl0b3IsIGNoYXJhY3RlckRhdGEpOyAvLyBvbklucHV0IGFsd2F5cyBmaXJlcyBhZnRlciBvbkNvbXBvc2l0aW9uRW5kIGZvciBGRi5cblxuICAgICAgaWYgKGlzRmlyZWZveEVuZGluZ0NvbXBvc2l0aW9uKSB7XG4gICAgICAgIG9uQ29tcG9zaXRpb25FbmRJbXBsKGVkaXRvciwgZGF0YSB8fCB1bmRlZmluZWQpO1xuICAgICAgICBpc0ZpcmVmb3hFbmRpbmdDb21wb3NpdGlvbiA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0gLy8gQWxzbyBmbHVzaCBhbnkgb3RoZXIgbXV0YXRpb25zIHRoYXQgbWlnaHQgaGF2ZSBvY2N1cnJlZFxuICAgIC8vIHNpbmNlIHRoZSBjaGFuZ2UuXG5cblxuICAgICRmbHVzaE11dGF0aW9ucygpO1xuICB9KTtcbiAgdW5wcm9jZXNzZWRCZWZvcmVJbnB1dERhdGEgPSBudWxsO1xufVxuXG5mdW5jdGlvbiBvbkNvbXBvc2l0aW9uU3RhcnQoZXZlbnQsIGVkaXRvcikge1xuICB1cGRhdGVFZGl0b3IoZWRpdG9yLCAoKSA9PiB7XG4gICAgY29uc3Qgc2VsZWN0aW9uID0gJGdldFNlbGVjdGlvbigpO1xuXG4gICAgaWYgKCRpc1JhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikgJiYgIWVkaXRvci5pc0NvbXBvc2luZygpKSB7XG4gICAgICBjb25zdCBhbmNob3IgPSBzZWxlY3Rpb24uYW5jaG9yO1xuICAgICAgY29uc3Qgbm9kZSA9IHNlbGVjdGlvbi5hbmNob3IuZ2V0Tm9kZSgpO1xuICAgICAgJHNldENvbXBvc2l0aW9uS2V5KGFuY2hvci5rZXkpO1xuXG4gICAgICBpZiAoIC8vIElmIGl0IGhhcyBiZWVuIDMwbXMgc2luY2UgdGhlIGxhc3Qga2V5ZG93biwgdGhlbiB3ZSBzaG91bGRcbiAgICAgICAgLy8gYXBwbHkgdGhlIGVtcHR5IHNwYWNlIGhldXJpc3RpYy4gV2UgY2FuJ3QgZG8gdGhpcyBmb3IgU2FmYXJpLFxuICAgICAgICAvLyBhcyB0aGUga2V5ZG93biBmaXJlcyBhZnRlciBjb21wb3NpdGlvbiBzdGFydC5cbiAgICAgICAgZXZlbnQudGltZVN0YW1wIDwgbGFzdEtleURvd25UaW1lU3RhbXAgKyBBTkRST0lEX0NPTVBPU0lUSU9OX0xBVEVOQ1kgfHwgLy8gRkYgaGFzIGlzc3VlcyBhcm91bmQgY29tcG9zaW5nIG11bHRpYnl0ZSBjaGFyYWN0ZXJzLCBzbyB3ZSBhbHNvXG4gICAgICAgIC8vIG5lZWQgdG8gaW52b2tlIHRoZSBlbXB0eSBzcGFjZSBoZXVyaXN0aWMgYmVsb3cuXG4gICAgICAgIGFuY2hvci50eXBlID09PSAnZWxlbWVudCcgfHwgIXNlbGVjdGlvbi5pc0NvbGxhcHNlZCgpIHx8IG5vZGUuZ2V0Rm9ybWF0KCkgIT09IHNlbGVjdGlvbi5mb3JtYXQgfHwgbm9kZS5nZXRTdHlsZSgpICE9PSBzZWxlY3Rpb24uc3R5bGUpIHtcbiAgICAgICAgLy8gV2UgaW5zZXJ0IGEgemVybyB3aWR0aCBjaGFyYWN0ZXIsIHJlYWR5IGZvciB0aGUgY29tcG9zaXRpb25cbiAgICAgICAgLy8gdG8gZ2V0IGluc2VydGVkIGludG8gdGhlIG5ldyBub2RlIHdlIGNyZWF0ZS4gSWZcbiAgICAgICAgLy8gd2UgZG9uJ3QgZG8gdGhpcywgU2FmYXJpIHdpbGwgZmFpbCBvbiB1cyBiZWNhdXNlXG4gICAgICAgIC8vIHRoZXJlIGlzIG5vIHRleHQgbm9kZSBtYXRjaGluZyB0aGUgc2VsZWN0aW9uLlxuICAgICAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBDT05UUk9MTEVEX1RFWFRfSU5TRVJUSU9OX0NPTU1BTkQsIENPTVBPU0lUSU9OX1NUQVJUX0NIQVIpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG9uQ29tcG9zaXRpb25FbmRJbXBsKGVkaXRvciwgZGF0YSkge1xuICBjb25zdCBjb21wb3NpdGlvbktleSA9IGVkaXRvci5fY29tcG9zaXRpb25LZXk7XG4gICRzZXRDb21wb3NpdGlvbktleShudWxsKTsgLy8gSGFuZGxlIHRlcm1pbmF0aW9uIG9mIGNvbXBvc2l0aW9uLlxuXG4gIGlmIChjb21wb3NpdGlvbktleSAhPT0gbnVsbCAmJiBkYXRhICE9IG51bGwpIHtcbiAgICAvLyBDb21wb3NpdGlvbiBjYW4gc29tZXRpbWVzIG1vdmUgdG8gYW4gYWRqYWNlbnQgRE9NIG5vZGUgd2hlbiBiYWNrc3BhY2luZy5cbiAgICAvLyBTbyBjaGVjayBmb3IgdGhlIGVtcHR5IGNhc2UuXG4gICAgaWYgKGRhdGEgPT09ICcnKSB7XG4gICAgICBjb25zdCBub2RlID0gJGdldE5vZGVCeUtleShjb21wb3NpdGlvbktleSk7XG4gICAgICBjb25zdCB0ZXh0Tm9kZSA9IGdldERPTVRleHROb2RlKGVkaXRvci5nZXRFbGVtZW50QnlLZXkoY29tcG9zaXRpb25LZXkpKTtcblxuICAgICAgaWYgKHRleHROb2RlICE9PSBudWxsICYmIHRleHROb2RlLm5vZGVWYWx1ZSAhPT0gbnVsbCAmJiAkaXNUZXh0Tm9kZShub2RlKSkge1xuICAgICAgICAkdXBkYXRlVGV4dE5vZGVGcm9tRE9NQ29udGVudChub2RlLCB0ZXh0Tm9kZS5ub2RlVmFsdWUsIG51bGwsIG51bGwsIHRydWUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfSAvLyBDb21wb3NpdGlvbiBjYW4gc29tZXRpbWVzIGJlIHRoYXQgb2YgYSBuZXcgbGluZS4gSW4gd2hpY2ggY2FzZSwgd2UgbmVlZCB0b1xuICAgIC8vIGhhbmRsZSB0aGF0IGFjY29yZGluZ2x5LlxuXG5cbiAgICBpZiAoZGF0YVtkYXRhLmxlbmd0aCAtIDFdID09PSAnXFxuJykge1xuICAgICAgY29uc3Qgc2VsZWN0aW9uID0gJGdldFNlbGVjdGlvbigpO1xuXG4gICAgICBpZiAoJGlzUmFuZ2VTZWxlY3Rpb24oc2VsZWN0aW9uKSkge1xuICAgICAgICAvLyBJZiB0aGUgbGFzdCBjaGFyYWN0ZXIgaXMgYSBsaW5lIGJyZWFrLCB3ZSBhbHNvIG5lZWQgdG8gaW5zZXJ0XG4gICAgICAgIC8vIGEgbGluZSBicmVhay5cbiAgICAgICAgY29uc3QgZm9jdXMgPSBzZWxlY3Rpb24uZm9jdXM7XG4gICAgICAgIHNlbGVjdGlvbi5hbmNob3Iuc2V0KGZvY3VzLmtleSwgZm9jdXMub2Zmc2V0LCBmb2N1cy50eXBlKTtcbiAgICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgS0VZX0VOVEVSX0NPTU1BTkQsIG51bGwpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgJHVwZGF0ZVNlbGVjdGVkVGV4dEZyb21ET00odHJ1ZSwgZWRpdG9yLCBkYXRhKTtcbn1cblxuZnVuY3Rpb24gb25Db21wb3NpdGlvbkVuZChldmVudCwgZWRpdG9yKSB7XG4gIC8vIEZpcmVmb3ggZmlyZXMgb25Db21wb3NpdGlvbkVuZCBiZWZvcmUgb25JbnB1dCwgYnV0IENocm9tZS9XZWJraXQsXG4gIC8vIGZpcmUgb25JbnB1dCBiZWZvcmUgb25Db21wb3NpdGlvbkVuZC4gVG8gZW5zdXJlIHRoZSBzZXF1ZW5jZSB3b3Jrc1xuICAvLyBsaWtlIENocm9tZS9XZWJraXQgd2UgdXNlIHRoZSBpc0ZpcmVmb3hFbmRpbmdDb21wb3NpdGlvbiBmbGFnIHRvXG4gIC8vIGRlZmVyIGhhbmRsaW5nIG9mIG9uQ29tcG9zaXRpb25FbmQgaW4gRmlyZWZveCB0aWxsIHdlIGhhdmUgcHJvY2Vzc2VkXG4gIC8vIHRoZSBsb2dpYyBpbiBvbklucHV0LlxuICBpZiAoSVNfRklSRUZPWCkge1xuICAgIGlzRmlyZWZveEVuZGluZ0NvbXBvc2l0aW9uID0gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICB1cGRhdGVFZGl0b3IoZWRpdG9yLCAoKSA9PiB7XG4gICAgICBvbkNvbXBvc2l0aW9uRW5kSW1wbChlZGl0b3IsIGV2ZW50LmRhdGEpO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIG9uS2V5RG93bihldmVudCwgZWRpdG9yKSB7XG4gIGxhc3RLZXlEb3duVGltZVN0YW1wID0gZXZlbnQudGltZVN0YW1wO1xuICBsYXN0S2V5Q29kZSA9IGV2ZW50LmtleUNvZGU7XG5cbiAgaWYgKGVkaXRvci5pc0NvbXBvc2luZygpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qge1xuICAgIGtleUNvZGUsXG4gICAgc2hpZnRLZXksXG4gICAgY3RybEtleSxcbiAgICBtZXRhS2V5LFxuICAgIGFsdEtleVxuICB9ID0gZXZlbnQ7XG5cbiAgaWYgKGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIEtFWV9ET1dOX0NPTU1BTkQsIGV2ZW50KSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChpc01vdmVGb3J3YXJkKGtleUNvZGUsIGN0cmxLZXksIGFsdEtleSwgbWV0YUtleSkpIHtcbiAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBLRVlfQVJST1dfUklHSFRfQ09NTUFORCwgZXZlbnQpO1xuICB9IGVsc2UgaWYgKGlzTW92ZVRvRW5kKGtleUNvZGUsIGN0cmxLZXksIHNoaWZ0S2V5LCBhbHRLZXksIG1ldGFLZXkpKSB7XG4gICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgTU9WRV9UT19FTkQsIGV2ZW50KTtcbiAgfSBlbHNlIGlmIChpc01vdmVCYWNrd2FyZChrZXlDb2RlLCBjdHJsS2V5LCBhbHRLZXksIG1ldGFLZXkpKSB7XG4gICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgS0VZX0FSUk9XX0xFRlRfQ09NTUFORCwgZXZlbnQpO1xuICB9IGVsc2UgaWYgKGlzTW92ZVRvU3RhcnQoa2V5Q29kZSwgY3RybEtleSwgc2hpZnRLZXksIGFsdEtleSwgbWV0YUtleSkpIHtcbiAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBNT1ZFX1RPX1NUQVJULCBldmVudCk7XG4gIH0gZWxzZSBpZiAoaXNNb3ZlVXAoa2V5Q29kZSwgY3RybEtleSwgbWV0YUtleSkpIHtcbiAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBLRVlfQVJST1dfVVBfQ09NTUFORCwgZXZlbnQpO1xuICB9IGVsc2UgaWYgKGlzTW92ZURvd24oa2V5Q29kZSwgY3RybEtleSwgbWV0YUtleSkpIHtcbiAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBLRVlfQVJST1dfRE9XTl9DT01NQU5ELCBldmVudCk7XG4gIH0gZWxzZSBpZiAoaXNMaW5lQnJlYWsoa2V5Q29kZSwgc2hpZnRLZXkpKSB7XG4gICAgaXNJbnNlcnRMaW5lQnJlYWsgPSB0cnVlO1xuICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIEtFWV9FTlRFUl9DT01NQU5ELCBldmVudCk7XG4gIH0gZWxzZSBpZiAoaXNTcGFjZShrZXlDb2RlKSkge1xuICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIEtFWV9TUEFDRV9DT01NQU5ELCBldmVudCk7XG4gIH0gZWxzZSBpZiAoaXNPcGVuTGluZUJyZWFrKGtleUNvZGUsIGN0cmxLZXkpKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBpc0luc2VydExpbmVCcmVhayA9IHRydWU7XG4gICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgSU5TRVJUX0xJTkVfQlJFQUtfQ09NTUFORCwgdHJ1ZSk7XG4gIH0gZWxzZSBpZiAoaXNQYXJhZ3JhcGgoa2V5Q29kZSwgc2hpZnRLZXkpKSB7XG4gICAgaXNJbnNlcnRMaW5lQnJlYWsgPSBmYWxzZTtcbiAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBLRVlfRU5URVJfQ09NTUFORCwgZXZlbnQpO1xuICB9IGVsc2UgaWYgKGlzRGVsZXRlQmFja3dhcmQoa2V5Q29kZSwgYWx0S2V5LCBtZXRhS2V5LCBjdHJsS2V5KSkge1xuICAgIGlmIChpc0JhY2tzcGFjZShrZXlDb2RlKSkge1xuICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgS0VZX0JBQ0tTUEFDRV9DT01NQU5ELCBldmVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBERUxFVEVfQ0hBUkFDVEVSX0NPTU1BTkQsIHRydWUpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc0VzY2FwZShrZXlDb2RlKSkge1xuICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIEtFWV9FU0NBUEVfQ09NTUFORCwgZXZlbnQpO1xuICB9IGVsc2UgaWYgKGlzRGVsZXRlRm9yd2FyZChrZXlDb2RlLCBjdHJsS2V5LCBzaGlmdEtleSwgYWx0S2V5LCBtZXRhS2V5KSkge1xuICAgIGlmIChpc0RlbGV0ZShrZXlDb2RlKSkge1xuICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgS0VZX0RFTEVURV9DT01NQU5ELCBldmVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBERUxFVEVfQ0hBUkFDVEVSX0NPTU1BTkQsIGZhbHNlKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNEZWxldGVXb3JkQmFja3dhcmQoa2V5Q29kZSwgYWx0S2V5LCBjdHJsS2V5KSkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgREVMRVRFX1dPUkRfQ09NTUFORCwgdHJ1ZSk7XG4gIH0gZWxzZSBpZiAoaXNEZWxldGVXb3JkRm9yd2FyZChrZXlDb2RlLCBhbHRLZXksIGN0cmxLZXkpKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBERUxFVEVfV09SRF9DT01NQU5ELCBmYWxzZSk7XG4gIH0gZWxzZSBpZiAoaXNEZWxldGVMaW5lQmFja3dhcmQoa2V5Q29kZSwgbWV0YUtleSkpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIERFTEVURV9MSU5FX0NPTU1BTkQsIHRydWUpO1xuICB9IGVsc2UgaWYgKGlzRGVsZXRlTGluZUZvcndhcmQoa2V5Q29kZSwgbWV0YUtleSkpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIERFTEVURV9MSU5FX0NPTU1BTkQsIGZhbHNlKTtcbiAgfSBlbHNlIGlmIChpc0JvbGQoa2V5Q29kZSwgYWx0S2V5LCBtZXRhS2V5LCBjdHJsS2V5KSkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgRk9STUFUX1RFWFRfQ09NTUFORCwgJ2JvbGQnKTtcbiAgfSBlbHNlIGlmIChpc1VuZGVybGluZShrZXlDb2RlLCBhbHRLZXksIG1ldGFLZXksIGN0cmxLZXkpKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBGT1JNQVRfVEVYVF9DT01NQU5ELCAndW5kZXJsaW5lJyk7XG4gIH0gZWxzZSBpZiAoaXNJdGFsaWMoa2V5Q29kZSwgYWx0S2V5LCBtZXRhS2V5LCBjdHJsS2V5KSkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgRk9STUFUX1RFWFRfQ09NTUFORCwgJ2l0YWxpYycpO1xuICB9IGVsc2UgaWYgKGlzVGFiKGtleUNvZGUsIGFsdEtleSwgY3RybEtleSwgbWV0YUtleSkpIHtcbiAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBLRVlfVEFCX0NPTU1BTkQsIGV2ZW50KTtcbiAgfSBlbHNlIGlmIChpc1VuZG8oa2V5Q29kZSwgc2hpZnRLZXksIG1ldGFLZXksIGN0cmxLZXkpKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBVTkRPX0NPTU1BTkQsIHVuZGVmaW5lZCk7XG4gIH0gZWxzZSBpZiAoaXNSZWRvKGtleUNvZGUsIHNoaWZ0S2V5LCBtZXRhS2V5LCBjdHJsS2V5KSkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgUkVET19DT01NQU5ELCB1bmRlZmluZWQpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHByZXZTZWxlY3Rpb24gPSBlZGl0b3IuX2VkaXRvclN0YXRlLl9zZWxlY3Rpb247XG5cbiAgICBpZiAoJGlzTm9kZVNlbGVjdGlvbihwcmV2U2VsZWN0aW9uKSkge1xuICAgICAgaWYgKGlzQ29weShrZXlDb2RlLCBzaGlmdEtleSwgbWV0YUtleSwgY3RybEtleSkpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgQ09QWV9DT01NQU5ELCBldmVudCk7XG4gICAgICB9IGVsc2UgaWYgKGlzQ3V0KGtleUNvZGUsIHNoaWZ0S2V5LCBtZXRhS2V5LCBjdHJsS2V5KSkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBDVVRfQ09NTUFORCwgZXZlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChpc01vZGlmaWVyKGN0cmxLZXksIHNoaWZ0S2V5LCBhbHRLZXksIG1ldGFLZXkpKSB7XG4gICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgS0VZX01PRElGSUVSX0NPTU1BTkQsIGV2ZW50KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRSb290RWxlbWVudFJlbW92ZUhhbmRsZXMocm9vdEVsZW1lbnQpIHtcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogaW50ZXJuYWwgZmllbGRcbiAgbGV0IGV2ZW50SGFuZGxlcyA9IHJvb3RFbGVtZW50Ll9fbGV4aWNhbEV2ZW50SGFuZGxlcztcblxuICBpZiAoZXZlbnRIYW5kbGVzID09PSB1bmRlZmluZWQpIHtcbiAgICBldmVudEhhbmRsZXMgPSBbXTsgLy8gQHRzLWV4cGVjdC1lcnJvcjogaW50ZXJuYWwgZmllbGRcblxuICAgIHJvb3RFbGVtZW50Ll9fbGV4aWNhbEV2ZW50SGFuZGxlcyA9IGV2ZW50SGFuZGxlcztcbiAgfVxuXG4gIHJldHVybiBldmVudEhhbmRsZXM7XG59IC8vIE1hcHBpbmcgcm9vdCBlZGl0b3JzIHRvIHRoZWlyIGFjdGl2ZSBuZXN0ZWQgZWRpdG9ycywgY29udGFpbnMgbmVzdGVkIGVkaXRvcnNcbi8vIG1hcHBpbmcgb25seSwgc28gaWYgcm9vdCBlZGl0b3IgaXMgc2VsZWN0ZWQgbWFwIHdpbGwgaGF2ZSBubyByZWZlcmVuY2UgdG8gZnJlZSB1cCBtZW1vcnlcblxuXG5jb25zdCBhY3RpdmVOZXN0ZWRFZGl0b3JzTWFwID0gbmV3IE1hcCgpO1xuXG5mdW5jdGlvbiBvbkRvY3VtZW50U2VsZWN0aW9uQ2hhbmdlKGV2ZW50KSB7XG4gIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgY29uc3QgdGFyZ2V0V2luZG93ID0gdGFyZ2V0ID09IG51bGwgPyBudWxsIDogdGFyZ2V0Lm5vZGVUeXBlID09PSA5ID8gdGFyZ2V0LmRlZmF1bHRWaWV3IDogdGFyZ2V0Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7XG4gIGNvbnN0IGRvbVNlbGVjdGlvbiA9IGdldERPTVNlbGVjdGlvbih0YXJnZXRXaW5kb3cpO1xuXG4gIGlmIChkb21TZWxlY3Rpb24gPT09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBuZXh0QWN0aXZlRWRpdG9yID0gZ2V0TmVhcmVzdEVkaXRvckZyb21ET01Ob2RlKGRvbVNlbGVjdGlvbi5hbmNob3JOb2RlKTtcblxuICBpZiAobmV4dEFjdGl2ZUVkaXRvciA9PT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChpc1NlbGVjdGlvbkNoYW5nZUZyb21Nb3VzZURvd24pIHtcbiAgICBpc1NlbGVjdGlvbkNoYW5nZUZyb21Nb3VzZURvd24gPSBmYWxzZTtcbiAgICB1cGRhdGVFZGl0b3IobmV4dEFjdGl2ZUVkaXRvciwgKCkgPT4ge1xuICAgICAgY29uc3QgbGFzdFNlbGVjdGlvbiA9ICRnZXRQcmV2aW91c1NlbGVjdGlvbigpO1xuICAgICAgY29uc3QgZG9tQW5jaG9yTm9kZSA9IGRvbVNlbGVjdGlvbi5hbmNob3JOb2RlO1xuXG4gICAgICBpZiAoZG9tQW5jaG9yTm9kZSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5vZGVUeXBlID0gZG9tQW5jaG9yTm9kZS5ub2RlVHlwZTsgLy8gSWYgdGhlIHVzZXIgaXMgYXR0ZW1wdGluZyB0byBjbGljayBzZWxlY3Rpb24gYmFjayBvbnRvIHRleHQsIHRoZW5cbiAgICAgIC8vIHdlIHNob3VsZCBhdHRlbXB0IGNyZWF0ZSBhIHJhbmdlIHNlbGVjdGlvbi5cbiAgICAgIC8vIFdoZW4gd2UgY2xpY2sgb24gYW4gZW1wdHkgcGFyYWdyYXBoIG5vZGUgb3IgdGhlIGVuZCBvZiBhIHBhcmFncmFwaCB0aGF0IGVuZHNcbiAgICAgIC8vIHdpdGggYW4gaW1hZ2UvcG9sbCwgdGhlIG5vZGVUeXBlIHdpbGwgYmUgRUxFTUVOVF9OT0RFXG5cbiAgICAgIGlmIChub2RlVHlwZSAhPT0gRE9NX0VMRU1FTlRfVFlQRSAmJiBub2RlVHlwZSAhPT0gRE9NX1RFWFRfVFlQRSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5ld1NlbGVjdGlvbiA9IGludGVybmFsQ3JlYXRlUmFuZ2VTZWxlY3Rpb24obGFzdFNlbGVjdGlvbiwgZG9tU2VsZWN0aW9uLCBuZXh0QWN0aXZlRWRpdG9yKTtcbiAgICAgICRzZXRTZWxlY3Rpb24obmV3U2VsZWN0aW9uKTtcbiAgICB9KTtcbiAgfSAvLyBXaGVuIGVkaXRvciByZWNlaXZlcyBzZWxlY3Rpb24gY2hhbmdlIGV2ZW50LCB3ZSdyZSBjaGVja2luZyBpZlxuICAvLyBpdCBoYXMgYW55IHNpYmxpbmcgZWRpdG9ycyAod2l0aGluIHNhbWUgcGFyZW50IGVkaXRvcikgdGhhdCB3ZXJlIGFjdGl2ZVxuICAvLyBiZWZvcmUsIGFuZCB0cmlnZ2VyIHNlbGVjdGlvbiBjaGFuZ2Ugb24gaXQgdG8gbnVsbGlmeSBzZWxlY3Rpb24uXG5cblxuICBjb25zdCBlZGl0b3JzID0gZ2V0RWRpdG9yc1RvUHJvcGFnYXRlKG5leHRBY3RpdmVFZGl0b3IpO1xuICBjb25zdCByb290RWRpdG9yID0gZWRpdG9yc1tlZGl0b3JzLmxlbmd0aCAtIDFdO1xuICBjb25zdCByb290RWRpdG9yS2V5ID0gcm9vdEVkaXRvci5fa2V5O1xuICBjb25zdCBhY3RpdmVOZXN0ZWRFZGl0b3IgPSBhY3RpdmVOZXN0ZWRFZGl0b3JzTWFwLmdldChyb290RWRpdG9yS2V5KTtcbiAgY29uc3QgcHJldkFjdGl2ZUVkaXRvciA9IGFjdGl2ZU5lc3RlZEVkaXRvciB8fCByb290RWRpdG9yO1xuXG4gIGlmIChwcmV2QWN0aXZlRWRpdG9yICE9PSBuZXh0QWN0aXZlRWRpdG9yKSB7XG4gICAgb25TZWxlY3Rpb25DaGFuZ2UoZG9tU2VsZWN0aW9uLCBwcmV2QWN0aXZlRWRpdG9yLCBmYWxzZSk7XG4gIH1cblxuICBvblNlbGVjdGlvbkNoYW5nZShkb21TZWxlY3Rpb24sIG5leHRBY3RpdmVFZGl0b3IsIHRydWUpOyAvLyBJZiBuZXdseSBzZWxlY3RlZCBlZGl0b3IgaXMgbmVzdGVkLCB0aGVuIGFkZCBpdCB0byB0aGUgbWFwLCBjbGVhbiBtYXAgb3RoZXJ3aXNlXG5cbiAgaWYgKG5leHRBY3RpdmVFZGl0b3IgIT09IHJvb3RFZGl0b3IpIHtcbiAgICBhY3RpdmVOZXN0ZWRFZGl0b3JzTWFwLnNldChyb290RWRpdG9yS2V5LCBuZXh0QWN0aXZlRWRpdG9yKTtcbiAgfSBlbHNlIGlmIChhY3RpdmVOZXN0ZWRFZGl0b3IpIHtcbiAgICBhY3RpdmVOZXN0ZWRFZGl0b3JzTWFwLmRlbGV0ZShyb290RWRpdG9yS2V5KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzdG9wTGV4aWNhbFByb3BhZ2F0aW9uKGV2ZW50KSB7XG4gIC8vIFdlIGF0dGFjaCBhIHNwZWNpYWwgcHJvcGVydHkgdG8gZW5zdXJlIHRoZSBzYW1lIGV2ZW50IGRvZXNuJ3QgcmUtZmlyZVxuICAvLyBmb3IgcGFyZW50IGVkaXRvcnMuXG4gIC8vIEB0cy1pZ25vcmVcbiAgZXZlbnQuX2xleGljYWxIYW5kbGVkID0gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaGFzU3RvcHBlZExleGljYWxQcm9wYWdhdGlvbihldmVudCkge1xuICAvLyBAdHMtaWdub3JlXG4gIGNvbnN0IHN0b3BwZWQgPSBldmVudC5fbGV4aWNhbEhhbmRsZWQgPT09IHRydWU7XG4gIHJldHVybiBzdG9wcGVkO1xufVxuXG5mdW5jdGlvbiBhZGRSb290RWxlbWVudEV2ZW50cyhyb290RWxlbWVudCwgZWRpdG9yKSB7XG4gIC8vIFdlIG9ubHkgd2FudCB0byBoYXZlIGEgc2luZ2xlIGdsb2JhbCBzZWxlY3Rpb25jaGFuZ2UgZXZlbnQgaGFuZGxlciwgc2hhcmVkXG4gIC8vIGJldHdlZW4gYWxsIGVkaXRvciBpbnN0YW5jZXMuXG4gIGlmIChyb290RWxlbWVudHNSZWdpc3RlcmVkID09PSAwKSB7XG4gICAgY29uc3QgZG9jID0gcm9vdEVsZW1lbnQub3duZXJEb2N1bWVudDtcbiAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcignc2VsZWN0aW9uY2hhbmdlJywgb25Eb2N1bWVudFNlbGVjdGlvbkNoYW5nZSk7XG4gIH1cblxuICByb290RWxlbWVudHNSZWdpc3RlcmVkKys7IC8vIEB0cy1leHBlY3QtZXJyb3I6IGludGVybmFsIGZpZWxkXG5cbiAgcm9vdEVsZW1lbnQuX19sZXhpY2FsRWRpdG9yID0gZWRpdG9yO1xuICBjb25zdCByZW1vdmVIYW5kbGVzID0gZ2V0Um9vdEVsZW1lbnRSZW1vdmVIYW5kbGVzKHJvb3RFbGVtZW50KTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHJvb3RFbGVtZW50RXZlbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgW2V2ZW50TmFtZSwgb25FdmVudF0gPSByb290RWxlbWVudEV2ZW50c1tpXTtcbiAgICBjb25zdCBldmVudEhhbmRsZXIgPSB0eXBlb2Ygb25FdmVudCA9PT0gJ2Z1bmN0aW9uJyA/IGV2ZW50ID0+IHtcbiAgICAgIGlmIChoYXNTdG9wcGVkTGV4aWNhbFByb3BhZ2F0aW9uKGV2ZW50KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHN0b3BMZXhpY2FsUHJvcGFnYXRpb24oZXZlbnQpO1xuXG4gICAgICBpZiAoZWRpdG9yLmlzRWRpdGFibGUoKSkge1xuICAgICAgICBvbkV2ZW50KGV2ZW50LCBlZGl0b3IpO1xuICAgICAgfVxuICAgIH0gOiBldmVudCA9PiB7XG4gICAgICBpZiAoaGFzU3RvcHBlZExleGljYWxQcm9wYWdhdGlvbihldmVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzdG9wTGV4aWNhbFByb3BhZ2F0aW9uKGV2ZW50KTtcblxuICAgICAgaWYgKGVkaXRvci5pc0VkaXRhYmxlKCkpIHtcbiAgICAgICAgc3dpdGNoIChldmVudE5hbWUpIHtcbiAgICAgICAgICBjYXNlICdjdXQnOlxuICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIENVVF9DT01NQU5ELCBldmVudCk7XG5cbiAgICAgICAgICBjYXNlICdjb3B5JzpcbiAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBDT1BZX0NPTU1BTkQsIGV2ZW50KTtcblxuICAgICAgICAgIGNhc2UgJ3Bhc3RlJzpcbiAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBQQVNURV9DT01NQU5ELCBldmVudCk7XG5cbiAgICAgICAgICBjYXNlICdkcmFnc3RhcnQnOlxuICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIERSQUdTVEFSVF9DT01NQU5ELCBldmVudCk7XG5cbiAgICAgICAgICBjYXNlICdkcmFnb3Zlcic6XG4gICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgRFJBR09WRVJfQ09NTUFORCwgZXZlbnQpO1xuXG4gICAgICAgICAgY2FzZSAnZHJhZ2VuZCc6XG4gICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgRFJBR0VORF9DT01NQU5ELCBldmVudCk7XG5cbiAgICAgICAgICBjYXNlICdmb2N1cyc6XG4gICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgRk9DVVNfQ09NTUFORCwgZXZlbnQpO1xuXG4gICAgICAgICAgY2FzZSAnYmx1cic6XG4gICAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIEJMVVJfQ09NTUFORCwgZXZlbnQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNhc2UgJ2Ryb3AnOlxuICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIERST1BfQ09NTUFORCwgZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICByb290RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgZXZlbnRIYW5kbGVyKTtcbiAgICByZW1vdmVIYW5kbGVzLnB1c2goKCkgPT4ge1xuICAgICAgcm9vdEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGV2ZW50SGFuZGxlcik7XG4gICAgfSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHJlbW92ZVJvb3RFbGVtZW50RXZlbnRzKHJvb3RFbGVtZW50KSB7XG4gIGlmIChyb290RWxlbWVudHNSZWdpc3RlcmVkICE9PSAwKSB7XG4gICAgcm9vdEVsZW1lbnRzUmVnaXN0ZXJlZC0tOyAvLyBXZSBvbmx5IHdhbnQgdG8gaGF2ZSBhIHNpbmdsZSBnbG9iYWwgc2VsZWN0aW9uY2hhbmdlIGV2ZW50IGhhbmRsZXIsIHNoYXJlZFxuICAgIC8vIGJldHdlZW4gYWxsIGVkaXRvciBpbnN0YW5jZXMuXG5cbiAgICBpZiAocm9vdEVsZW1lbnRzUmVnaXN0ZXJlZCA9PT0gMCkge1xuICAgICAgY29uc3QgZG9jID0gcm9vdEVsZW1lbnQub3duZXJEb2N1bWVudDtcbiAgICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdzZWxlY3Rpb25jaGFuZ2UnLCBvbkRvY3VtZW50U2VsZWN0aW9uQ2hhbmdlKTtcbiAgICB9XG4gIH0gLy8gQHRzLWV4cGVjdC1lcnJvcjogaW50ZXJuYWwgZmllbGRcblxuXG4gIGNvbnN0IGVkaXRvciA9IHJvb3RFbGVtZW50Ll9fbGV4aWNhbEVkaXRvcjtcblxuICBpZiAoZWRpdG9yICE9PSBudWxsICYmIGVkaXRvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY2xlYW5BY3RpdmVOZXN0ZWRFZGl0b3JzTWFwKGVkaXRvcik7IC8vIEB0cy1leHBlY3QtZXJyb3I6IGludGVybmFsIGZpZWxkXG5cbiAgICByb290RWxlbWVudC5fX2xleGljYWxFZGl0b3IgPSBudWxsO1xuICB9XG5cbiAgY29uc3QgcmVtb3ZlSGFuZGxlcyA9IGdldFJvb3RFbGVtZW50UmVtb3ZlSGFuZGxlcyhyb290RWxlbWVudCk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByZW1vdmVIYW5kbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgcmVtb3ZlSGFuZGxlc1tpXSgpO1xuICB9IC8vIEB0cy1leHBlY3QtZXJyb3I6IGludGVybmFsIGZpZWxkXG5cblxuICByb290RWxlbWVudC5fX2xleGljYWxFdmVudEhhbmRsZXMgPSBbXTtcbn1cblxuZnVuY3Rpb24gY2xlYW5BY3RpdmVOZXN0ZWRFZGl0b3JzTWFwKGVkaXRvcikge1xuICBpZiAoZWRpdG9yLl9wYXJlbnRFZGl0b3IgIT09IG51bGwpIHtcbiAgICAvLyBGb3IgbmVzdGVkIGVkaXRvciBjbGVhbnVwIG1hcCBpZiB0aGlzIGVkaXRvciB3YXMgbWFya2VkIGFzIGFjdGl2ZVxuICAgIGNvbnN0IGVkaXRvcnMgPSBnZXRFZGl0b3JzVG9Qcm9wYWdhdGUoZWRpdG9yKTtcbiAgICBjb25zdCByb290RWRpdG9yID0gZWRpdG9yc1tlZGl0b3JzLmxlbmd0aCAtIDFdO1xuICAgIGNvbnN0IHJvb3RFZGl0b3JLZXkgPSByb290RWRpdG9yLl9rZXk7XG5cbiAgICBpZiAoYWN0aXZlTmVzdGVkRWRpdG9yc01hcC5nZXQocm9vdEVkaXRvcktleSkgPT09IGVkaXRvcikge1xuICAgICAgYWN0aXZlTmVzdGVkRWRpdG9yc01hcC5kZWxldGUocm9vdEVkaXRvcktleSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIEZvciB0b3AtbGV2ZWwgZWRpdG9ycyBjbGVhbnVwIG1hcFxuICAgIGFjdGl2ZU5lc3RlZEVkaXRvcnNNYXAuZGVsZXRlKGVkaXRvci5fa2V5KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBtYXJrU2VsZWN0aW9uQ2hhbmdlRnJvbURPTVVwZGF0ZSgpIHtcbiAgaXNTZWxlY3Rpb25DaGFuZ2VGcm9tRE9NVXBkYXRlID0gdHJ1ZTtcbn1cbmZ1bmN0aW9uIG1hcmtDb2xsYXBzZWRTZWxlY3Rpb25Gb3JtYXQoZm9ybWF0LCBzdHlsZSwgb2Zmc2V0LCBrZXksIHRpbWVTdGFtcCkge1xuICBjb2xsYXBzZWRTZWxlY3Rpb25Gb3JtYXQgPSBbZm9ybWF0LCBzdHlsZSwgb2Zmc2V0LCBrZXksIHRpbWVTdGFtcF07XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cbmNsYXNzIFBvaW50IHtcbiAgY29uc3RydWN0b3Ioa2V5LCBvZmZzZXQsIHR5cGUpIHtcbiAgICB0aGlzLl9zZWxlY3Rpb24gPSBudWxsO1xuICAgIHRoaXMua2V5ID0ga2V5O1xuICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0O1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gIH1cblxuICBpcyhwb2ludCkge1xuICAgIHJldHVybiB0aGlzLmtleSA9PT0gcG9pbnQua2V5ICYmIHRoaXMub2Zmc2V0ID09PSBwb2ludC5vZmZzZXQgJiYgdGhpcy50eXBlID09PSBwb2ludC50eXBlO1xuICB9XG5cbiAgaXNCZWZvcmUoYikge1xuICAgIGxldCBhTm9kZSA9IHRoaXMuZ2V0Tm9kZSgpO1xuICAgIGxldCBiTm9kZSA9IGIuZ2V0Tm9kZSgpO1xuICAgIGNvbnN0IGFPZmZzZXQgPSB0aGlzLm9mZnNldDtcbiAgICBjb25zdCBiT2Zmc2V0ID0gYi5vZmZzZXQ7XG5cbiAgICBpZiAoJGlzRWxlbWVudE5vZGUoYU5vZGUpKSB7XG4gICAgICBjb25zdCBhTm9kZURlc2NlbmRhbnQgPSBhTm9kZS5nZXREZXNjZW5kYW50QnlJbmRleChhT2Zmc2V0KTtcbiAgICAgIGFOb2RlID0gYU5vZGVEZXNjZW5kYW50ICE9IG51bGwgPyBhTm9kZURlc2NlbmRhbnQgOiBhTm9kZTtcbiAgICB9XG5cbiAgICBpZiAoJGlzRWxlbWVudE5vZGUoYk5vZGUpKSB7XG4gICAgICBjb25zdCBiTm9kZURlc2NlbmRhbnQgPSBiTm9kZS5nZXREZXNjZW5kYW50QnlJbmRleChiT2Zmc2V0KTtcbiAgICAgIGJOb2RlID0gYk5vZGVEZXNjZW5kYW50ICE9IG51bGwgPyBiTm9kZURlc2NlbmRhbnQgOiBiTm9kZTtcbiAgICB9XG5cbiAgICBpZiAoYU5vZGUgPT09IGJOb2RlKSB7XG4gICAgICByZXR1cm4gYU9mZnNldCA8IGJPZmZzZXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFOb2RlLmlzQmVmb3JlKGJOb2RlKTtcbiAgfVxuXG4gIGdldE5vZGUoKSB7XG4gICAgY29uc3Qga2V5ID0gdGhpcy5rZXk7XG4gICAgY29uc3Qgbm9kZSA9ICRnZXROb2RlQnlLZXkoa2V5KTtcblxuICAgIGlmIChub2RlID09PSBudWxsKSB7XG4gICAgICB7XG4gICAgICAgIHRocm93IEVycm9yKGBQb2ludC5nZXROb2RlOiBub2RlIG5vdCBmb3VuZGApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBub2RlO1xuICB9XG5cbiAgc2V0KGtleSwgb2Zmc2V0LCB0eXBlKSB7XG4gICAgY29uc3Qgc2VsZWN0aW9uID0gdGhpcy5fc2VsZWN0aW9uO1xuICAgIGNvbnN0IG9sZEtleSA9IHRoaXMua2V5O1xuICAgIHRoaXMua2V5ID0ga2V5O1xuICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0O1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG5cbiAgICBpZiAoIWlzQ3VycmVudGx5UmVhZE9ubHlNb2RlKCkpIHtcbiAgICAgIGlmICgkZ2V0Q29tcG9zaXRpb25LZXkoKSA9PT0gb2xkS2V5KSB7XG4gICAgICAgICRzZXRDb21wb3NpdGlvbktleShrZXkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2VsZWN0aW9uICE9PSBudWxsKSB7XG4gICAgICAgIHNlbGVjdGlvbi5fY2FjaGVkTm9kZXMgPSBudWxsO1xuICAgICAgICBzZWxlY3Rpb24uZGlydHkgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG59XG5cbmZ1bmN0aW9uICRjcmVhdGVQb2ludChrZXksIG9mZnNldCwgdHlwZSkge1xuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBpbnRlbnRpb25hbGx5IGNhc3QgYXMgd2UgdXNlIGEgY2xhc3MgZm9yIHBlcmYgcmVhc29uc1xuICByZXR1cm4gbmV3IFBvaW50KGtleSwgb2Zmc2V0LCB0eXBlKTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0UG9pbnRPbk5vZGUocG9pbnQsIG5vZGUpIHtcbiAgbGV0IGtleSA9IG5vZGUuX19rZXk7XG4gIGxldCBvZmZzZXQgPSBwb2ludC5vZmZzZXQ7XG4gIGxldCB0eXBlID0gJ2VsZW1lbnQnO1xuXG4gIGlmICgkaXNUZXh0Tm9kZShub2RlKSkge1xuICAgIHR5cGUgPSAndGV4dCc7XG4gICAgY29uc3QgdGV4dENvbnRlbnRMZW5ndGggPSBub2RlLmdldFRleHRDb250ZW50U2l6ZSgpO1xuXG4gICAgaWYgKG9mZnNldCA+IHRleHRDb250ZW50TGVuZ3RoKSB7XG4gICAgICBvZmZzZXQgPSB0ZXh0Q29udGVudExlbmd0aDtcbiAgICB9XG4gIH0gZWxzZSBpZiAoISRpc0VsZW1lbnROb2RlKG5vZGUpKSB7XG4gICAgY29uc3QgbmV4dFNpYmxpbmcgPSBub2RlLmdldE5leHRTaWJsaW5nKCk7XG5cbiAgICBpZiAoJGlzVGV4dE5vZGUobmV4dFNpYmxpbmcpKSB7XG4gICAgICBrZXkgPSBuZXh0U2libGluZy5fX2tleTtcbiAgICAgIG9mZnNldCA9IDA7XG4gICAgICB0eXBlID0gJ3RleHQnO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBwYXJlbnROb2RlID0gbm9kZS5nZXRQYXJlbnQoKTtcblxuICAgICAgaWYgKHBhcmVudE5vZGUpIHtcbiAgICAgICAga2V5ID0gcGFyZW50Tm9kZS5fX2tleTtcbiAgICAgICAgb2Zmc2V0ID0gbm9kZS5nZXRJbmRleFdpdGhpblBhcmVudCgpICsgMTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwb2ludC5zZXQoa2V5LCBvZmZzZXQsIHR5cGUpO1xufVxuXG5mdW5jdGlvbiAkbW92ZVNlbGVjdGlvblBvaW50VG9FbmQocG9pbnQsIG5vZGUpIHtcbiAgaWYgKCRpc0VsZW1lbnROb2RlKG5vZGUpKSB7XG4gICAgY29uc3QgbGFzdE5vZGUgPSBub2RlLmdldExhc3REZXNjZW5kYW50KCk7XG5cbiAgICBpZiAoJGlzRWxlbWVudE5vZGUobGFzdE5vZGUpIHx8ICRpc1RleHROb2RlKGxhc3ROb2RlKSkge1xuICAgICAgc2VsZWN0UG9pbnRPbk5vZGUocG9pbnQsIGxhc3ROb2RlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZWN0UG9pbnRPbk5vZGUocG9pbnQsIG5vZGUpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBzZWxlY3RQb2ludE9uTm9kZShwb2ludCwgbm9kZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gJHRyYW5zZmVyU3RhcnRpbmdFbGVtZW50UG9pbnRUb1RleHRQb2ludChzdGFydCwgZW5kLCBmb3JtYXQsIHN0eWxlKSB7XG4gIGNvbnN0IGVsZW1lbnQgPSBzdGFydC5nZXROb2RlKCk7XG4gIGNvbnN0IHBsYWNlbWVudE5vZGUgPSBlbGVtZW50LmdldENoaWxkQXRJbmRleChzdGFydC5vZmZzZXQpO1xuICBjb25zdCB0ZXh0Tm9kZSA9ICRjcmVhdGVUZXh0Tm9kZSgpO1xuICBjb25zdCB0YXJnZXQgPSAkaXNSb290Tm9kZShlbGVtZW50KSA/ICRjcmVhdGVQYXJhZ3JhcGhOb2RlKCkuYXBwZW5kKHRleHROb2RlKSA6IHRleHROb2RlO1xuICB0ZXh0Tm9kZS5zZXRGb3JtYXQoZm9ybWF0KTtcbiAgdGV4dE5vZGUuc2V0U3R5bGUoc3R5bGUpO1xuXG4gIGlmIChwbGFjZW1lbnROb2RlID09PSBudWxsKSB7XG4gICAgZWxlbWVudC5hcHBlbmQodGFyZ2V0KTtcbiAgfSBlbHNlIHtcbiAgICBwbGFjZW1lbnROb2RlLmluc2VydEJlZm9yZSh0YXJnZXQpO1xuICB9IC8vIFRyYW5zZmVyIHRoZSBlbGVtZW50IHBvaW50IHRvIGEgdGV4dCBwb2ludC5cblxuXG4gIGlmIChzdGFydC5pcyhlbmQpKSB7XG4gICAgZW5kLnNldCh0ZXh0Tm9kZS5fX2tleSwgMCwgJ3RleHQnKTtcbiAgfVxuXG4gIHN0YXJ0LnNldCh0ZXh0Tm9kZS5fX2tleSwgMCwgJ3RleHQnKTtcbn1cblxuZnVuY3Rpb24gJHNldFBvaW50VmFsdWVzKHBvaW50LCBrZXksIG9mZnNldCwgdHlwZSkge1xuICBwb2ludC5rZXkgPSBrZXk7XG4gIHBvaW50Lm9mZnNldCA9IG9mZnNldDtcbiAgcG9pbnQudHlwZSA9IHR5cGU7XG59XG5cbmNsYXNzIE5vZGVTZWxlY3Rpb24ge1xuICBjb25zdHJ1Y3RvcihvYmplY3RzKSB7XG4gICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuICAgIHRoaXMuX25vZGVzID0gb2JqZWN0cztcbiAgICB0aGlzLl9jYWNoZWROb2RlcyA9IG51bGw7XG4gIH1cblxuICBpcyhzZWxlY3Rpb24pIHtcbiAgICBpZiAoISRpc05vZGVTZWxlY3Rpb24oc2VsZWN0aW9uKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGEgPSB0aGlzLl9ub2RlcztcbiAgICBjb25zdCBiID0gc2VsZWN0aW9uLl9ub2RlcztcbiAgICByZXR1cm4gYS5zaXplID09PSBiLnNpemUgJiYgQXJyYXkuZnJvbShhKS5ldmVyeShrZXkgPT4gYi5oYXMoa2V5KSk7XG4gIH1cblxuICBhZGQoa2V5KSB7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG5cbiAgICB0aGlzLl9ub2Rlcy5hZGQoa2V5KTtcblxuICAgIHRoaXMuX2NhY2hlZE5vZGVzID0gbnVsbDtcbiAgfVxuXG4gIGRlbGV0ZShrZXkpIHtcbiAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcblxuICAgIHRoaXMuX25vZGVzLmRlbGV0ZShrZXkpO1xuXG4gICAgdGhpcy5fY2FjaGVkTm9kZXMgPSBudWxsO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG5cbiAgICB0aGlzLl9ub2Rlcy5jbGVhcigpO1xuXG4gICAgdGhpcy5fY2FjaGVkTm9kZXMgPSBudWxsO1xuICB9XG5cbiAgaGFzKGtleSkge1xuICAgIHJldHVybiB0aGlzLl9ub2Rlcy5oYXMoa2V5KTtcbiAgfVxuXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgTm9kZVNlbGVjdGlvbihuZXcgU2V0KHRoaXMuX25vZGVzKSk7XG4gIH1cblxuICBleHRyYWN0KCkge1xuICAgIHJldHVybiB0aGlzLmdldE5vZGVzKCk7XG4gIH1cblxuICBpbnNlcnRSYXdUZXh0KHRleHQpIHsvLyBEbyBub3RoaW5nP1xuICB9XG5cbiAgaW5zZXJ0VGV4dCgpIHsvLyBEbyBub3RoaW5nP1xuICB9XG5cbiAgaW5zZXJ0Tm9kZXMobm9kZXMsIHNlbGVjdFN0YXJ0KSB7XG4gICAgY29uc3Qgc2VsZWN0ZWROb2RlcyA9IHRoaXMuZ2V0Tm9kZXMoKTtcbiAgICBjb25zdCBzZWxlY3RlZE5vZGVzTGVuZ3RoID0gc2VsZWN0ZWROb2Rlcy5sZW5ndGg7XG4gICAgY29uc3QgbGFzdFNlbGVjdGVkTm9kZSA9IHNlbGVjdGVkTm9kZXNbc2VsZWN0ZWROb2Rlc0xlbmd0aCAtIDFdO1xuICAgIGxldCBzZWxlY3Rpb25BdEVuZDsgLy8gSW5zZXJ0IG5vZGVzXG5cbiAgICBpZiAoJGlzVGV4dE5vZGUobGFzdFNlbGVjdGVkTm9kZSkpIHtcbiAgICAgIHNlbGVjdGlvbkF0RW5kID0gbGFzdFNlbGVjdGVkTm9kZS5zZWxlY3QoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaW5kZXggPSBsYXN0U2VsZWN0ZWROb2RlLmdldEluZGV4V2l0aGluUGFyZW50KCkgKyAxO1xuICAgICAgc2VsZWN0aW9uQXRFbmQgPSBsYXN0U2VsZWN0ZWROb2RlLmdldFBhcmVudE9yVGhyb3coKS5zZWxlY3QoaW5kZXgsIGluZGV4KTtcbiAgICB9XG5cbiAgICBzZWxlY3Rpb25BdEVuZC5pbnNlcnROb2Rlcyhub2Rlcywgc2VsZWN0U3RhcnQpOyAvLyBSZW1vdmUgc2VsZWN0ZWQgbm9kZXNcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZWN0ZWROb2Rlc0xlbmd0aDsgaSsrKSB7XG4gICAgICBzZWxlY3RlZE5vZGVzW2ldLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZ2V0Tm9kZXMoKSB7XG4gICAgY29uc3QgY2FjaGVkTm9kZXMgPSB0aGlzLl9jYWNoZWROb2RlcztcblxuICAgIGlmIChjYWNoZWROb2RlcyAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGNhY2hlZE5vZGVzO1xuICAgIH1cblxuICAgIGNvbnN0IG9iamVjdHMgPSB0aGlzLl9ub2RlcztcbiAgICBjb25zdCBub2RlcyA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBvYmplY3Qgb2Ygb2JqZWN0cykge1xuICAgICAgY29uc3Qgbm9kZSA9ICRnZXROb2RlQnlLZXkob2JqZWN0KTtcblxuICAgICAgaWYgKG5vZGUgIT09IG51bGwpIHtcbiAgICAgICAgbm9kZXMucHVzaChub2RlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWlzQ3VycmVudGx5UmVhZE9ubHlNb2RlKCkpIHtcbiAgICAgIHRoaXMuX2NhY2hlZE5vZGVzID0gbm9kZXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5vZGVzO1xuICB9XG5cbiAgZ2V0VGV4dENvbnRlbnQoKSB7XG4gICAgY29uc3Qgbm9kZXMgPSB0aGlzLmdldE5vZGVzKCk7XG4gICAgbGV0IHRleHRDb250ZW50ID0gJyc7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0ZXh0Q29udGVudCArPSBub2Rlc1tpXS5nZXRUZXh0Q29udGVudCgpO1xuICAgIH1cblxuICAgIHJldHVybiB0ZXh0Q29udGVudDtcbiAgfVxuXG59XG5mdW5jdGlvbiAkaXNSYW5nZVNlbGVjdGlvbih4KSB7XG4gIHJldHVybiB4IGluc3RhbmNlb2YgUmFuZ2VTZWxlY3Rpb247XG59XG5jbGFzcyBHcmlkU2VsZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoZ3JpZEtleSwgYW5jaG9yLCBmb2N1cykge1xuICAgIHRoaXMuZ3JpZEtleSA9IGdyaWRLZXk7XG4gICAgdGhpcy5hbmNob3IgPSBhbmNob3I7XG4gICAgdGhpcy5mb2N1cyA9IGZvY3VzO1xuICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICB0aGlzLl9jYWNoZWROb2RlcyA9IG51bGw7XG4gICAgYW5jaG9yLl9zZWxlY3Rpb24gPSB0aGlzO1xuICAgIGZvY3VzLl9zZWxlY3Rpb24gPSB0aGlzO1xuICB9XG5cbiAgaXMoc2VsZWN0aW9uKSB7XG4gICAgaWYgKCFERVBSRUNBVEVEXyRpc0dyaWRTZWxlY3Rpb24oc2VsZWN0aW9uKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmdyaWRLZXkgPT09IHNlbGVjdGlvbi5ncmlkS2V5ICYmIHRoaXMuYW5jaG9yLmlzKHNlbGVjdGlvbi5hbmNob3IpICYmIHRoaXMuZm9jdXMuaXMoc2VsZWN0aW9uLmZvY3VzKTtcbiAgfVxuXG4gIHNldChncmlkS2V5LCBhbmNob3JDZWxsS2V5LCBmb2N1c0NlbGxLZXkpIHtcbiAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgICB0aGlzLmdyaWRLZXkgPSBncmlkS2V5O1xuICAgIHRoaXMuYW5jaG9yLmtleSA9IGFuY2hvckNlbGxLZXk7XG4gICAgdGhpcy5mb2N1cy5rZXkgPSBmb2N1c0NlbGxLZXk7XG4gICAgdGhpcy5fY2FjaGVkTm9kZXMgPSBudWxsO1xuICB9XG5cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBHcmlkU2VsZWN0aW9uKHRoaXMuZ3JpZEtleSwgdGhpcy5hbmNob3IsIHRoaXMuZm9jdXMpO1xuICB9XG5cbiAgaXNDb2xsYXBzZWQoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaXNCYWNrd2FyZCgpIHtcbiAgICByZXR1cm4gdGhpcy5mb2N1cy5pc0JlZm9yZSh0aGlzLmFuY2hvcik7XG4gIH1cblxuICBnZXRDaGFyYWN0ZXJPZmZzZXRzKCkge1xuICAgIHJldHVybiBnZXRDaGFyYWN0ZXJPZmZzZXRzKHRoaXMpO1xuICB9XG5cbiAgZXh0cmFjdCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXROb2RlcygpO1xuICB9XG5cbiAgaW5zZXJ0UmF3VGV4dCh0ZXh0KSB7Ly8gRG8gbm90aGluZz9cbiAgfVxuXG4gIGluc2VydFRleHQoKSB7Ly8gRG8gbm90aGluZz9cbiAgfVxuXG4gIGluc2VydE5vZGVzKG5vZGVzLCBzZWxlY3RTdGFydCkge1xuICAgIGNvbnN0IGZvY3VzTm9kZSA9IHRoaXMuZm9jdXMuZ2V0Tm9kZSgpO1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9ICRub3JtYWxpemVTZWxlY3Rpb24oZm9jdXNOb2RlLnNlbGVjdCgwLCBmb2N1c05vZGUuZ2V0Q2hpbGRyZW5TaXplKCkpKTtcbiAgICByZXR1cm4gc2VsZWN0aW9uLmluc2VydE5vZGVzKG5vZGVzLCBzZWxlY3RTdGFydCk7XG4gIH0gLy8gVE9ETyBEZXByZWNhdGUgdGhpcyBtZXRob2QuIEl0J3MgY29uZnVzaW5nIHdoZW4gdXNlZCB3aXRoIGNvbHNwYW58cm93c3BhblxuXG5cbiAgZ2V0U2hhcGUoKSB7XG4gICAgY29uc3QgYW5jaG9yQ2VsbE5vZGUgPSAkZ2V0Tm9kZUJ5S2V5KHRoaXMuYW5jaG9yLmtleSk7XG5cbiAgICBpZiAoIShhbmNob3JDZWxsTm9kZSAhPT0gbnVsbCkpIHtcbiAgICAgIHRocm93IEVycm9yKGBnZXROb2RlczogZXhwZWN0ZWQgdG8gZmluZCBBbmNob3JOb2RlYCk7XG4gICAgfVxuXG4gICAgY29uc3QgYW5jaG9yQ2VsbE5vZGVJbmRleCA9IGFuY2hvckNlbGxOb2RlLmdldEluZGV4V2l0aGluUGFyZW50KCk7XG4gICAgY29uc3QgYW5jaG9yQ2VsUm93ZUluZGV4ID0gYW5jaG9yQ2VsbE5vZGUuZ2V0UGFyZW50T3JUaHJvdygpLmdldEluZGV4V2l0aGluUGFyZW50KCk7XG4gICAgY29uc3QgZm9jdXNDZWxsTm9kZSA9ICRnZXROb2RlQnlLZXkodGhpcy5mb2N1cy5rZXkpO1xuXG4gICAgaWYgKCEoZm9jdXNDZWxsTm9kZSAhPT0gbnVsbCkpIHtcbiAgICAgIHRocm93IEVycm9yKGBnZXROb2RlczogZXhwZWN0ZWQgdG8gZmluZCBGb2N1c05vZGVgKTtcbiAgICB9XG5cbiAgICBjb25zdCBmb2N1c0NlbGxOb2RlSW5kZXggPSBmb2N1c0NlbGxOb2RlLmdldEluZGV4V2l0aGluUGFyZW50KCk7XG4gICAgY29uc3QgZm9jdXNDZWxsUm93SW5kZXggPSBmb2N1c0NlbGxOb2RlLmdldFBhcmVudE9yVGhyb3coKS5nZXRJbmRleFdpdGhpblBhcmVudCgpO1xuICAgIGNvbnN0IHN0YXJ0WCA9IE1hdGgubWluKGFuY2hvckNlbGxOb2RlSW5kZXgsIGZvY3VzQ2VsbE5vZGVJbmRleCk7XG4gICAgY29uc3Qgc3RvcFggPSBNYXRoLm1heChhbmNob3JDZWxsTm9kZUluZGV4LCBmb2N1c0NlbGxOb2RlSW5kZXgpO1xuICAgIGNvbnN0IHN0YXJ0WSA9IE1hdGgubWluKGFuY2hvckNlbFJvd2VJbmRleCwgZm9jdXNDZWxsUm93SW5kZXgpO1xuICAgIGNvbnN0IHN0b3BZID0gTWF0aC5tYXgoYW5jaG9yQ2VsUm93ZUluZGV4LCBmb2N1c0NlbGxSb3dJbmRleCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGZyb21YOiBNYXRoLm1pbihzdGFydFgsIHN0b3BYKSxcbiAgICAgIGZyb21ZOiBNYXRoLm1pbihzdGFydFksIHN0b3BZKSxcbiAgICAgIHRvWDogTWF0aC5tYXgoc3RhcnRYLCBzdG9wWCksXG4gICAgICB0b1k6IE1hdGgubWF4KHN0YXJ0WSwgc3RvcFkpXG4gICAgfTtcbiAgfVxuXG4gIGdldE5vZGVzKCkge1xuICAgIGNvbnN0IGNhY2hlZE5vZGVzID0gdGhpcy5fY2FjaGVkTm9kZXM7XG5cbiAgICBpZiAoY2FjaGVkTm9kZXMgIT09IG51bGwpIHtcbiAgICAgIHJldHVybiBjYWNoZWROb2RlcztcbiAgICB9XG5cbiAgICBjb25zdCBhbmNob3JOb2RlID0gdGhpcy5hbmNob3IuZ2V0Tm9kZSgpO1xuICAgIGNvbnN0IGZvY3VzTm9kZSA9IHRoaXMuZm9jdXMuZ2V0Tm9kZSgpO1xuICAgIGNvbnN0IGFuY2hvckNlbGwgPSAkZmluZE1hdGNoaW5nUGFyZW50KGFuY2hvck5vZGUsIERFUFJFQ0FURURfJGlzR3JpZENlbGxOb2RlKTtcbiAgICBjb25zdCBmb2N1c0NlbGwgPSAkZmluZE1hdGNoaW5nUGFyZW50KGZvY3VzTm9kZSwgREVQUkVDQVRFRF8kaXNHcmlkQ2VsbE5vZGUpO1xuXG4gICAgaWYgKCFERVBSRUNBVEVEXyRpc0dyaWRDZWxsTm9kZShhbmNob3JDZWxsKSkge1xuICAgICAgdGhyb3cgRXJyb3IoYEV4cGVjdGVkIEdyaWRTZWxlY3Rpb24gYW5jaG9yIHRvIGJlIChvciBhIGNoaWxkIG9mKSBHcmlkQ2VsbE5vZGVgKTtcbiAgICB9XG5cbiAgICBpZiAoIURFUFJFQ0FURURfJGlzR3JpZENlbGxOb2RlKGZvY3VzQ2VsbCkpIHtcbiAgICAgIHRocm93IEVycm9yKGBFeHBlY3RlZCBHcmlkU2VsZWN0aW9uIGZvY3VzIHRvIGJlIChvciBhIGNoaWxkIG9mKSBHcmlkQ2VsbE5vZGVgKTtcbiAgICB9XG5cbiAgICBjb25zdCBhbmNob3JSb3cgPSBhbmNob3JDZWxsLmdldFBhcmVudCgpO1xuXG4gICAgaWYgKCFERVBSRUNBVEVEXyRpc0dyaWRSb3dOb2RlKGFuY2hvclJvdykpIHtcbiAgICAgIHRocm93IEVycm9yKGBFeHBlY3RlZCBhbmNob3JDZWxsIHRvIGhhdmUgYSBwYXJlbnQgR3JpZFJvd05vZGVgKTtcbiAgICB9XG5cbiAgICBjb25zdCBncmlkTm9kZSA9IGFuY2hvclJvdy5nZXRQYXJlbnQoKTtcblxuICAgIGlmICghREVQUkVDQVRFRF8kaXNHcmlkTm9kZShncmlkTm9kZSkpIHtcbiAgICAgIHRocm93IEVycm9yKGBFeHBlY3RlZCB0YWJsZU5vZGUgdG8gaGF2ZSBhIHBhcmVudCBHcmlkTm9kZWApO1xuICAgIH0gLy8gVE9ETyBNYXBwaW5nIHRoZSB3aG9sZSBHcmlkIGV2ZXJ5IHRpbWUgbm90IGVmZmljaWVudC4gV2UgbmVlZCB0byBjb21wdXRlIHRoZSBlbnRpcmUgc3RhdGUgb25seVxuICAgIC8vIG9uY2UgKG9uIGxvYWQpIGFuZCBpdGVyYXRlIG9uIGl0IGFzIHVwZGF0ZXMgb2NjdXIuIEhvd2V2ZXIsIHRvIGRvIHRoaXMgd2UgbmVlZCB0byBoYXZlIHRoZVxuICAgIC8vIGFiaWxpdHkgdG8gc3RvcmUgYSBzdGF0ZS4gS2lsbGluZyBHcmlkU2VsZWN0aW9uIGFuZCBtb3ZpbmcgdGhlIGxvZ2ljIHRvIHRoZSBwbHVnaW4gd291bGQgbWFrZVxuICAgIC8vIHRoaXMgcG9zc2libGUuXG5cblxuICAgIGNvbnN0IFttYXAsIGNlbGxBTWFwLCBjZWxsQk1hcF0gPSBjb21wdXRlR3JpZE1hcChncmlkTm9kZSwgYW5jaG9yQ2VsbCwgZm9jdXNDZWxsKTtcbiAgICBsZXQgbWluQ29sdW1uID0gTWF0aC5taW4oY2VsbEFNYXAuc3RhcnRDb2x1bW4sIGNlbGxCTWFwLnN0YXJ0Q29sdW1uKTtcbiAgICBsZXQgbWluUm93ID0gTWF0aC5taW4oY2VsbEFNYXAuc3RhcnRSb3csIGNlbGxCTWFwLnN0YXJ0Um93KTtcbiAgICBsZXQgbWF4Q29sdW1uID0gTWF0aC5tYXgoY2VsbEFNYXAuc3RhcnRDb2x1bW4gKyBjZWxsQU1hcC5jZWxsLl9fY29sU3BhbiAtIDEsIGNlbGxCTWFwLnN0YXJ0Q29sdW1uICsgY2VsbEJNYXAuY2VsbC5fX2NvbFNwYW4gLSAxKTtcbiAgICBsZXQgbWF4Um93ID0gTWF0aC5tYXgoY2VsbEFNYXAuc3RhcnRSb3cgKyBjZWxsQU1hcC5jZWxsLl9fcm93U3BhbiAtIDEsIGNlbGxCTWFwLnN0YXJ0Um93ICsgY2VsbEJNYXAuY2VsbC5fX3Jvd1NwYW4gLSAxKTtcbiAgICBsZXQgZXhwbG9yZWRNaW5Db2x1bW4gPSBtaW5Db2x1bW47XG4gICAgbGV0IGV4cGxvcmVkTWluUm93ID0gbWluUm93O1xuICAgIGxldCBleHBsb3JlZE1heENvbHVtbiA9IG1pbkNvbHVtbjtcbiAgICBsZXQgZXhwbG9yZWRNYXhSb3cgPSBtaW5Sb3c7XG5cbiAgICBmdW5jdGlvbiBleHBhbmRCb3VuZGFyeShtYXBWYWx1ZSkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBjZWxsLFxuICAgICAgICBzdGFydENvbHVtbjogY2VsbFN0YXJ0Q29sdW1uLFxuICAgICAgICBzdGFydFJvdzogY2VsbFN0YXJ0Um93XG4gICAgICB9ID0gbWFwVmFsdWU7XG4gICAgICBtaW5Db2x1bW4gPSBNYXRoLm1pbihtaW5Db2x1bW4sIGNlbGxTdGFydENvbHVtbik7XG4gICAgICBtaW5Sb3cgPSBNYXRoLm1pbihtaW5Sb3csIGNlbGxTdGFydFJvdyk7XG4gICAgICBtYXhDb2x1bW4gPSBNYXRoLm1heChtYXhDb2x1bW4sIGNlbGxTdGFydENvbHVtbiArIGNlbGwuX19jb2xTcGFuIC0gMSk7XG4gICAgICBtYXhSb3cgPSBNYXRoLm1heChtYXhSb3csIGNlbGxTdGFydFJvdyArIGNlbGwuX19yb3dTcGFuIC0gMSk7XG4gICAgfVxuXG4gICAgd2hpbGUgKG1pbkNvbHVtbiA8IGV4cGxvcmVkTWluQ29sdW1uIHx8IG1pblJvdyA8IGV4cGxvcmVkTWluUm93IHx8IG1heENvbHVtbiA+IGV4cGxvcmVkTWF4Q29sdW1uIHx8IG1heFJvdyA+IGV4cGxvcmVkTWF4Um93KSB7XG4gICAgICBpZiAobWluQ29sdW1uIDwgZXhwbG9yZWRNaW5Db2x1bW4pIHtcbiAgICAgICAgLy8gRXhwYW5kIG9uIHRoZSBsZWZ0XG4gICAgICAgIGNvbnN0IHJvd0RpZmYgPSBleHBsb3JlZE1heFJvdyAtIGV4cGxvcmVkTWluUm93O1xuICAgICAgICBjb25zdCBwcmV2aW91c0NvbHVtbiA9IGV4cGxvcmVkTWluQ29sdW1uIC0gMTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSByb3dEaWZmOyBpKyspIHtcbiAgICAgICAgICBleHBhbmRCb3VuZGFyeShtYXBbZXhwbG9yZWRNaW5Sb3cgKyBpXVtwcmV2aW91c0NvbHVtbl0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwbG9yZWRNaW5Db2x1bW4gPSBwcmV2aW91c0NvbHVtbjtcbiAgICAgIH1cblxuICAgICAgaWYgKG1pblJvdyA8IGV4cGxvcmVkTWluUm93KSB7XG4gICAgICAgIC8vIEV4cGFuZCBvbiB0b3BcbiAgICAgICAgY29uc3QgY29sdW1uRGlmZiA9IGV4cGxvcmVkTWF4Q29sdW1uIC0gZXhwbG9yZWRNaW5Db2x1bW47XG4gICAgICAgIGNvbnN0IHByZXZpb3VzUm93ID0gZXhwbG9yZWRNaW5Sb3cgLSAxO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IGNvbHVtbkRpZmY7IGkrKykge1xuICAgICAgICAgIGV4cGFuZEJvdW5kYXJ5KG1hcFtwcmV2aW91c1Jvd11bZXhwbG9yZWRNaW5Db2x1bW4gKyBpXSk7XG4gICAgICAgIH1cblxuICAgICAgICBleHBsb3JlZE1pblJvdyA9IHByZXZpb3VzUm93O1xuICAgICAgfVxuXG4gICAgICBpZiAobWF4Q29sdW1uID4gZXhwbG9yZWRNYXhDb2x1bW4pIHtcbiAgICAgICAgLy8gRXhwYW5kIG9uIHRoZSByaWdodFxuICAgICAgICBjb25zdCByb3dEaWZmID0gZXhwbG9yZWRNYXhSb3cgLSBleHBsb3JlZE1pblJvdztcbiAgICAgICAgY29uc3QgbmV4dENvbHVtbiA9IGV4cGxvcmVkTWF4Q29sdW1uICsgMTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSByb3dEaWZmOyBpKyspIHtcbiAgICAgICAgICBleHBhbmRCb3VuZGFyeShtYXBbZXhwbG9yZWRNaW5Sb3cgKyBpXVtuZXh0Q29sdW1uXSk7XG4gICAgICAgIH1cblxuICAgICAgICBleHBsb3JlZE1heENvbHVtbiA9IG5leHRDb2x1bW47XG4gICAgICB9XG5cbiAgICAgIGlmIChtYXhSb3cgPiBleHBsb3JlZE1heFJvdykge1xuICAgICAgICAvLyBFeHBhbmQgb24gdGhlIGJvdHRvbVxuICAgICAgICBjb25zdCBjb2x1bW5EaWZmID0gZXhwbG9yZWRNYXhDb2x1bW4gLSBleHBsb3JlZE1pbkNvbHVtbjtcbiAgICAgICAgY29uc3QgbmV4dFJvdyA9IGV4cGxvcmVkTWF4Um93ICsgMTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBjb2x1bW5EaWZmOyBpKyspIHtcbiAgICAgICAgICBleHBhbmRCb3VuZGFyeShtYXBbbmV4dFJvd11bZXhwbG9yZWRNaW5Db2x1bW4gKyBpXSk7XG4gICAgICAgIH1cblxuICAgICAgICBleHBsb3JlZE1heFJvdyA9IG5leHRSb3c7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgbm9kZXMgPSBbZ3JpZE5vZGVdO1xuICAgIGxldCBsYXN0Um93ID0gbnVsbDtcblxuICAgIGZvciAobGV0IGkgPSBtaW5Sb3c7IGkgPD0gbWF4Um93OyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSBtaW5Db2x1bW47IGogPD0gbWF4Q29sdW1uOyBqKyspIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIGNlbGxcbiAgICAgICAgfSA9IG1hcFtpXVtqXTtcbiAgICAgICAgY29uc3QgY3VycmVudFJvdyA9IGNlbGwuZ2V0UGFyZW50KCk7XG5cbiAgICAgICAgaWYgKCFERVBSRUNBVEVEXyRpc0dyaWRSb3dOb2RlKGN1cnJlbnRSb3cpKSB7XG4gICAgICAgICAgdGhyb3cgRXJyb3IoYEV4cGVjdGVkIEdyaWRDZWxsTm9kZSBwYXJlbnQgdG8gYmUgYSBHcmlkUm93Tm9kZWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGN1cnJlbnRSb3cgIT09IGxhc3RSb3cpIHtcbiAgICAgICAgICBub2Rlcy5wdXNoKGN1cnJlbnRSb3cpO1xuICAgICAgICB9XG5cbiAgICAgICAgbm9kZXMucHVzaChjZWxsLCAuLi4kZ2V0Q2hpbGRyZW5SZWN1cnNpdmVseShjZWxsKSk7XG4gICAgICAgIGxhc3RSb3cgPSBjdXJyZW50Um93O1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghaXNDdXJyZW50bHlSZWFkT25seU1vZGUoKSkge1xuICAgICAgdGhpcy5fY2FjaGVkTm9kZXMgPSBub2RlcztcbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZXM7XG4gIH1cblxuICBnZXRUZXh0Q29udGVudCgpIHtcbiAgICBjb25zdCBub2RlcyA9IHRoaXMuZ2V0Tm9kZXMoKTtcbiAgICBsZXQgdGV4dENvbnRlbnQgPSAnJztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRleHRDb250ZW50ICs9IG5vZGVzW2ldLmdldFRleHRDb250ZW50KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRleHRDb250ZW50O1xuICB9XG5cbn1cbmZ1bmN0aW9uIERFUFJFQ0FURURfJGlzR3JpZFNlbGVjdGlvbih4KSB7XG4gIHJldHVybiB4IGluc3RhbmNlb2YgR3JpZFNlbGVjdGlvbjtcbn1cbmNsYXNzIFJhbmdlU2VsZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoYW5jaG9yLCBmb2N1cywgZm9ybWF0LCBzdHlsZSkge1xuICAgIHRoaXMuYW5jaG9yID0gYW5jaG9yO1xuICAgIHRoaXMuZm9jdXMgPSBmb2N1cztcbiAgICB0aGlzLmRpcnR5ID0gZmFsc2U7XG4gICAgdGhpcy5mb3JtYXQgPSBmb3JtYXQ7XG4gICAgdGhpcy5zdHlsZSA9IHN0eWxlO1xuICAgIHRoaXMuX2NhY2hlZE5vZGVzID0gbnVsbDtcbiAgICBhbmNob3IuX3NlbGVjdGlvbiA9IHRoaXM7XG4gICAgZm9jdXMuX3NlbGVjdGlvbiA9IHRoaXM7XG4gIH1cblxuICBpcyhzZWxlY3Rpb24pIHtcbiAgICBpZiAoISRpc1JhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5hbmNob3IuaXMoc2VsZWN0aW9uLmFuY2hvcikgJiYgdGhpcy5mb2N1cy5pcyhzZWxlY3Rpb24uZm9jdXMpICYmIHRoaXMuZm9ybWF0ID09PSBzZWxlY3Rpb24uZm9ybWF0ICYmIHRoaXMuc3R5bGUgPT09IHNlbGVjdGlvbi5zdHlsZTtcbiAgfVxuXG4gIGlzQmFja3dhcmQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZm9jdXMuaXNCZWZvcmUodGhpcy5hbmNob3IpO1xuICB9XG5cbiAgaXNDb2xsYXBzZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuYW5jaG9yLmlzKHRoaXMuZm9jdXMpO1xuICB9XG5cbiAgZ2V0Tm9kZXMoKSB7XG4gICAgY29uc3QgY2FjaGVkTm9kZXMgPSB0aGlzLl9jYWNoZWROb2RlcztcblxuICAgIGlmIChjYWNoZWROb2RlcyAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGNhY2hlZE5vZGVzO1xuICAgIH1cblxuICAgIGNvbnN0IGFuY2hvciA9IHRoaXMuYW5jaG9yO1xuICAgIGNvbnN0IGZvY3VzID0gdGhpcy5mb2N1cztcbiAgICBjb25zdCBpc0JlZm9yZSA9IGFuY2hvci5pc0JlZm9yZShmb2N1cyk7XG4gICAgY29uc3QgZmlyc3RQb2ludCA9IGlzQmVmb3JlID8gYW5jaG9yIDogZm9jdXM7XG4gICAgY29uc3QgbGFzdFBvaW50ID0gaXNCZWZvcmUgPyBmb2N1cyA6IGFuY2hvcjtcbiAgICBsZXQgZmlyc3ROb2RlID0gZmlyc3RQb2ludC5nZXROb2RlKCk7XG4gICAgbGV0IGxhc3ROb2RlID0gbGFzdFBvaW50LmdldE5vZGUoKTtcbiAgICBjb25zdCBzdGFydE9mZnNldCA9IGZpcnN0UG9pbnQub2Zmc2V0O1xuICAgIGNvbnN0IGVuZE9mZnNldCA9IGxhc3RQb2ludC5vZmZzZXQ7XG5cbiAgICBpZiAoJGlzRWxlbWVudE5vZGUoZmlyc3ROb2RlKSkge1xuICAgICAgY29uc3QgZmlyc3ROb2RlRGVzY2VuZGFudCA9IGZpcnN0Tm9kZS5nZXREZXNjZW5kYW50QnlJbmRleChzdGFydE9mZnNldCk7XG4gICAgICBmaXJzdE5vZGUgPSBmaXJzdE5vZGVEZXNjZW5kYW50ICE9IG51bGwgPyBmaXJzdE5vZGVEZXNjZW5kYW50IDogZmlyc3ROb2RlO1xuICAgIH1cblxuICAgIGlmICgkaXNFbGVtZW50Tm9kZShsYXN0Tm9kZSkpIHtcbiAgICAgIGxldCBsYXN0Tm9kZURlc2NlbmRhbnQgPSBsYXN0Tm9kZS5nZXREZXNjZW5kYW50QnlJbmRleChlbmRPZmZzZXQpOyAvLyBXZSBkb24ndCB3YW50IHRvIG92ZXItc2VsZWN0LCBhcyBub2RlIHNlbGVjdGlvbiBpbmZlcnMgdGhlIGNoaWxkIGJlZm9yZVxuICAgICAgLy8gdGhlIGxhc3QgZGVzY2VuZGFudCwgbm90IGluY2x1ZGluZyB0aGF0IGRlc2NlbmRhbnQuXG5cbiAgICAgIGlmIChsYXN0Tm9kZURlc2NlbmRhbnQgIT09IG51bGwgJiYgbGFzdE5vZGVEZXNjZW5kYW50ICE9PSBmaXJzdE5vZGUgJiYgbGFzdE5vZGUuZ2V0Q2hpbGRBdEluZGV4KGVuZE9mZnNldCkgPT09IGxhc3ROb2RlRGVzY2VuZGFudCkge1xuICAgICAgICBsYXN0Tm9kZURlc2NlbmRhbnQgPSBsYXN0Tm9kZURlc2NlbmRhbnQuZ2V0UHJldmlvdXNTaWJsaW5nKCk7XG4gICAgICB9XG5cbiAgICAgIGxhc3ROb2RlID0gbGFzdE5vZGVEZXNjZW5kYW50ICE9IG51bGwgPyBsYXN0Tm9kZURlc2NlbmRhbnQgOiBsYXN0Tm9kZTtcbiAgICB9XG5cbiAgICBsZXQgbm9kZXM7XG5cbiAgICBpZiAoZmlyc3ROb2RlLmlzKGxhc3ROb2RlKSkge1xuICAgICAgaWYgKCRpc0VsZW1lbnROb2RlKGZpcnN0Tm9kZSkgJiYgZmlyc3ROb2RlLmdldENoaWxkcmVuU2l6ZSgpID4gMCkge1xuICAgICAgICBub2RlcyA9IFtdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9kZXMgPSBbZmlyc3ROb2RlXTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbm9kZXMgPSBmaXJzdE5vZGUuZ2V0Tm9kZXNCZXR3ZWVuKGxhc3ROb2RlKTtcbiAgICB9XG5cbiAgICBpZiAoIWlzQ3VycmVudGx5UmVhZE9ubHlNb2RlKCkpIHtcbiAgICAgIHRoaXMuX2NhY2hlZE5vZGVzID0gbm9kZXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5vZGVzO1xuICB9XG5cbiAgc2V0VGV4dE5vZGVSYW5nZShhbmNob3JOb2RlLCBhbmNob3JPZmZzZXQsIGZvY3VzTm9kZSwgZm9jdXNPZmZzZXQpIHtcbiAgICAkc2V0UG9pbnRWYWx1ZXModGhpcy5hbmNob3IsIGFuY2hvck5vZGUuX19rZXksIGFuY2hvck9mZnNldCwgJ3RleHQnKTtcbiAgICAkc2V0UG9pbnRWYWx1ZXModGhpcy5mb2N1cywgZm9jdXNOb2RlLl9fa2V5LCBmb2N1c09mZnNldCwgJ3RleHQnKTtcbiAgICB0aGlzLl9jYWNoZWROb2RlcyA9IG51bGw7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gIH1cblxuICBnZXRUZXh0Q29udGVudCgpIHtcbiAgICBjb25zdCBub2RlcyA9IHRoaXMuZ2V0Tm9kZXMoKTtcblxuICAgIGlmIChub2Rlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICBjb25zdCBmaXJzdE5vZGUgPSBub2Rlc1swXTtcbiAgICBjb25zdCBsYXN0Tm9kZSA9IG5vZGVzW25vZGVzLmxlbmd0aCAtIDFdO1xuICAgIGNvbnN0IGFuY2hvciA9IHRoaXMuYW5jaG9yO1xuICAgIGNvbnN0IGZvY3VzID0gdGhpcy5mb2N1cztcbiAgICBjb25zdCBpc0JlZm9yZSA9IGFuY2hvci5pc0JlZm9yZShmb2N1cyk7XG4gICAgY29uc3QgW2FuY2hvck9mZnNldCwgZm9jdXNPZmZzZXRdID0gZ2V0Q2hhcmFjdGVyT2Zmc2V0cyh0aGlzKTtcbiAgICBsZXQgdGV4dENvbnRlbnQgPSAnJztcbiAgICBsZXQgcHJldldhc0VsZW1lbnQgPSB0cnVlO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldO1xuXG4gICAgICBpZiAoJGlzRWxlbWVudE5vZGUobm9kZSkgJiYgIW5vZGUuaXNJbmxpbmUoKSkge1xuICAgICAgICBpZiAoIXByZXZXYXNFbGVtZW50KSB7XG4gICAgICAgICAgdGV4dENvbnRlbnQgKz0gJ1xcbic7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobm9kZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICBwcmV2V2FzRWxlbWVudCA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByZXZXYXNFbGVtZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJldldhc0VsZW1lbnQgPSBmYWxzZTtcblxuICAgICAgICBpZiAoJGlzVGV4dE5vZGUobm9kZSkpIHtcbiAgICAgICAgICBsZXQgdGV4dCA9IG5vZGUuZ2V0VGV4dENvbnRlbnQoKTtcblxuICAgICAgICAgIGlmIChub2RlID09PSBmaXJzdE5vZGUpIHtcbiAgICAgICAgICAgIGlmIChub2RlID09PSBsYXN0Tm9kZSkge1xuICAgICAgICAgICAgICBpZiAoYW5jaG9yLnR5cGUgIT09ICdlbGVtZW50JyB8fCBmb2N1cy50eXBlICE9PSAnZWxlbWVudCcgfHwgZm9jdXMub2Zmc2V0ID09PSBhbmNob3Iub2Zmc2V0KSB7XG4gICAgICAgICAgICAgICAgdGV4dCA9IGFuY2hvck9mZnNldCA8IGZvY3VzT2Zmc2V0ID8gdGV4dC5zbGljZShhbmNob3JPZmZzZXQsIGZvY3VzT2Zmc2V0KSA6IHRleHQuc2xpY2UoZm9jdXNPZmZzZXQsIGFuY2hvck9mZnNldCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRleHQgPSBpc0JlZm9yZSA/IHRleHQuc2xpY2UoYW5jaG9yT2Zmc2V0KSA6IHRleHQuc2xpY2UoZm9jdXNPZmZzZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAobm9kZSA9PT0gbGFzdE5vZGUpIHtcbiAgICAgICAgICAgIHRleHQgPSBpc0JlZm9yZSA/IHRleHQuc2xpY2UoMCwgZm9jdXNPZmZzZXQpIDogdGV4dC5zbGljZSgwLCBhbmNob3JPZmZzZXQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRleHRDb250ZW50ICs9IHRleHQ7XG4gICAgICAgIH0gZWxzZSBpZiAoKCRpc0RlY29yYXRvck5vZGUobm9kZSkgfHwgJGlzTGluZUJyZWFrTm9kZShub2RlKSkgJiYgKG5vZGUgIT09IGxhc3ROb2RlIHx8ICF0aGlzLmlzQ29sbGFwc2VkKCkpKSB7XG4gICAgICAgICAgdGV4dENvbnRlbnQgKz0gbm9kZS5nZXRUZXh0Q29udGVudCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRleHRDb250ZW50O1xuICB9XG5cbiAgYXBwbHlET01SYW5nZShyYW5nZSkge1xuICAgIGNvbnN0IGVkaXRvciA9IGdldEFjdGl2ZUVkaXRvcigpO1xuICAgIGNvbnN0IGN1cnJlbnRFZGl0b3JTdGF0ZSA9IGVkaXRvci5nZXRFZGl0b3JTdGF0ZSgpO1xuICAgIGNvbnN0IGxhc3RTZWxlY3Rpb24gPSBjdXJyZW50RWRpdG9yU3RhdGUuX3NlbGVjdGlvbjtcbiAgICBjb25zdCByZXNvbHZlZFNlbGVjdGlvblBvaW50cyA9IGludGVybmFsUmVzb2x2ZVNlbGVjdGlvblBvaW50cyhyYW5nZS5zdGFydENvbnRhaW5lciwgcmFuZ2Uuc3RhcnRPZmZzZXQsIHJhbmdlLmVuZENvbnRhaW5lciwgcmFuZ2UuZW5kT2Zmc2V0LCBlZGl0b3IsIGxhc3RTZWxlY3Rpb24pO1xuXG4gICAgaWYgKHJlc29sdmVkU2VsZWN0aW9uUG9pbnRzID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgW2FuY2hvclBvaW50LCBmb2N1c1BvaW50XSA9IHJlc29sdmVkU2VsZWN0aW9uUG9pbnRzO1xuICAgICRzZXRQb2ludFZhbHVlcyh0aGlzLmFuY2hvciwgYW5jaG9yUG9pbnQua2V5LCBhbmNob3JQb2ludC5vZmZzZXQsIGFuY2hvclBvaW50LnR5cGUpO1xuICAgICRzZXRQb2ludFZhbHVlcyh0aGlzLmZvY3VzLCBmb2N1c1BvaW50LmtleSwgZm9jdXNQb2ludC5vZmZzZXQsIGZvY3VzUG9pbnQudHlwZSk7XG4gICAgdGhpcy5fY2FjaGVkTm9kZXMgPSBudWxsO1xuICB9XG5cbiAgY2xvbmUoKSB7XG4gICAgY29uc3QgYW5jaG9yID0gdGhpcy5hbmNob3I7XG4gICAgY29uc3QgZm9jdXMgPSB0aGlzLmZvY3VzO1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9IG5ldyBSYW5nZVNlbGVjdGlvbigkY3JlYXRlUG9pbnQoYW5jaG9yLmtleSwgYW5jaG9yLm9mZnNldCwgYW5jaG9yLnR5cGUpLCAkY3JlYXRlUG9pbnQoZm9jdXMua2V5LCBmb2N1cy5vZmZzZXQsIGZvY3VzLnR5cGUpLCB0aGlzLmZvcm1hdCwgdGhpcy5zdHlsZSk7XG4gICAgcmV0dXJuIHNlbGVjdGlvbjtcbiAgfVxuXG4gIHRvZ2dsZUZvcm1hdChmb3JtYXQpIHtcbiAgICB0aGlzLmZvcm1hdCA9IHRvZ2dsZVRleHRGb3JtYXRUeXBlKHRoaXMuZm9ybWF0LCBmb3JtYXQsIG51bGwpO1xuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICB9XG5cbiAgc2V0U3R5bGUoc3R5bGUpIHtcbiAgICB0aGlzLnN0eWxlID0gc3R5bGU7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gIH1cblxuICBoYXNGb3JtYXQodHlwZSkge1xuICAgIGNvbnN0IGZvcm1hdEZsYWcgPSBURVhUX1RZUEVfVE9fRk9STUFUW3R5cGVdO1xuICAgIHJldHVybiAodGhpcy5mb3JtYXQgJiBmb3JtYXRGbGFnKSAhPT0gMDtcbiAgfVxuXG4gIGluc2VydFJhd1RleHQodGV4dCkge1xuICAgIGNvbnN0IHBhcnRzID0gdGV4dC5zcGxpdCgvXFxyP1xcbi8pO1xuXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdGhpcy5pbnNlcnRUZXh0KHRleHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBub2RlcyA9IFtdO1xuICAgICAgY29uc3QgbGVuZ3RoID0gcGFydHMubGVuZ3RoO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHBhcnQgPSBwYXJ0c1tpXTtcblxuICAgICAgICBpZiAocGFydCAhPT0gJycpIHtcbiAgICAgICAgICBub2Rlcy5wdXNoKCRjcmVhdGVUZXh0Tm9kZShwYXJ0KSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaSAhPT0gbGVuZ3RoIC0gMSkge1xuICAgICAgICAgIG5vZGVzLnB1c2goJGNyZWF0ZUxpbmVCcmVha05vZGUoKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5pbnNlcnROb2Rlcyhub2Rlcyk7XG4gICAgfVxuICB9XG5cbiAgaW5zZXJ0VGV4dCh0ZXh0KSB7XG4gICAgY29uc3QgYW5jaG9yID0gdGhpcy5hbmNob3I7XG4gICAgY29uc3QgZm9jdXMgPSB0aGlzLmZvY3VzO1xuICAgIGNvbnN0IGlzQmVmb3JlID0gdGhpcy5pc0NvbGxhcHNlZCgpIHx8IGFuY2hvci5pc0JlZm9yZShmb2N1cyk7XG4gICAgY29uc3QgZm9ybWF0ID0gdGhpcy5mb3JtYXQ7XG4gICAgY29uc3Qgc3R5bGUgPSB0aGlzLnN0eWxlO1xuXG4gICAgaWYgKGlzQmVmb3JlICYmIGFuY2hvci50eXBlID09PSAnZWxlbWVudCcpIHtcbiAgICAgICR0cmFuc2ZlclN0YXJ0aW5nRWxlbWVudFBvaW50VG9UZXh0UG9pbnQoYW5jaG9yLCBmb2N1cywgZm9ybWF0LCBzdHlsZSk7XG4gICAgfSBlbHNlIGlmICghaXNCZWZvcmUgJiYgZm9jdXMudHlwZSA9PT0gJ2VsZW1lbnQnKSB7XG4gICAgICAkdHJhbnNmZXJTdGFydGluZ0VsZW1lbnRQb2ludFRvVGV4dFBvaW50KGZvY3VzLCBhbmNob3IsIGZvcm1hdCwgc3R5bGUpO1xuICAgIH1cblxuICAgIGNvbnN0IHNlbGVjdGVkTm9kZXMgPSB0aGlzLmdldE5vZGVzKCk7XG4gICAgY29uc3Qgc2VsZWN0ZWROb2Rlc0xlbmd0aCA9IHNlbGVjdGVkTm9kZXMubGVuZ3RoO1xuICAgIGNvbnN0IGZpcnN0UG9pbnQgPSBpc0JlZm9yZSA/IGFuY2hvciA6IGZvY3VzO1xuICAgIGNvbnN0IGVuZFBvaW50ID0gaXNCZWZvcmUgPyBmb2N1cyA6IGFuY2hvcjtcbiAgICBjb25zdCBzdGFydE9mZnNldCA9IGZpcnN0UG9pbnQub2Zmc2V0O1xuICAgIGNvbnN0IGVuZE9mZnNldCA9IGVuZFBvaW50Lm9mZnNldDtcbiAgICBsZXQgZmlyc3ROb2RlID0gc2VsZWN0ZWROb2Rlc1swXTtcblxuICAgIGlmICghJGlzVGV4dE5vZGUoZmlyc3ROb2RlKSkge1xuICAgICAge1xuICAgICAgICB0aHJvdyBFcnJvcihgaW5zZXJ0VGV4dDogZmlyc3Qgbm9kZSBpcyBub3QgYSB0ZXh0IG5vZGVgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBmaXJzdE5vZGVUZXh0ID0gZmlyc3ROb2RlLmdldFRleHRDb250ZW50KCk7XG4gICAgY29uc3QgZmlyc3ROb2RlVGV4dExlbmd0aCA9IGZpcnN0Tm9kZVRleHQubGVuZ3RoO1xuICAgIGNvbnN0IGZpcnN0Tm9kZVBhcmVudCA9IGZpcnN0Tm9kZS5nZXRQYXJlbnRPclRocm93KCk7XG4gICAgY29uc3QgbGFzdEluZGV4ID0gc2VsZWN0ZWROb2Rlc0xlbmd0aCAtIDE7XG4gICAgbGV0IGxhc3ROb2RlID0gc2VsZWN0ZWROb2Rlc1tsYXN0SW5kZXhdO1xuXG4gICAgaWYgKHRoaXMuaXNDb2xsYXBzZWQoKSAmJiBzdGFydE9mZnNldCA9PT0gZmlyc3ROb2RlVGV4dExlbmd0aCAmJiAoZmlyc3ROb2RlLmlzU2VnbWVudGVkKCkgfHwgZmlyc3ROb2RlLmlzVG9rZW4oKSB8fCAhZmlyc3ROb2RlLmNhbkluc2VydFRleHRBZnRlcigpIHx8ICFmaXJzdE5vZGVQYXJlbnQuY2FuSW5zZXJ0VGV4dEFmdGVyKCkgJiYgZmlyc3ROb2RlLmdldE5leHRTaWJsaW5nKCkgPT09IG51bGwpKSB7XG4gICAgICBsZXQgbmV4dFNpYmxpbmcgPSBmaXJzdE5vZGUuZ2V0TmV4dFNpYmxpbmcoKTtcblxuICAgICAgaWYgKCEkaXNUZXh0Tm9kZShuZXh0U2libGluZykgfHwgJGlzVG9rZW5PclNlZ21lbnRlZChuZXh0U2libGluZykpIHtcbiAgICAgICAgbmV4dFNpYmxpbmcgPSAkY3JlYXRlVGV4dE5vZGUoKTtcbiAgICAgICAgbmV4dFNpYmxpbmcuc2V0Rm9ybWF0KGZvcm1hdCk7XG5cbiAgICAgICAgaWYgKCFmaXJzdE5vZGVQYXJlbnQuY2FuSW5zZXJ0VGV4dEFmdGVyKCkpIHtcbiAgICAgICAgICBmaXJzdE5vZGVQYXJlbnQuaW5zZXJ0QWZ0ZXIobmV4dFNpYmxpbmcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpcnN0Tm9kZS5pbnNlcnRBZnRlcihuZXh0U2libGluZyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbmV4dFNpYmxpbmcuc2VsZWN0KDAsIDApO1xuICAgICAgZmlyc3ROb2RlID0gbmV4dFNpYmxpbmc7XG5cbiAgICAgIGlmICh0ZXh0ICE9PSAnJykge1xuICAgICAgICB0aGlzLmluc2VydFRleHQodGV4dCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNDb2xsYXBzZWQoKSAmJiBzdGFydE9mZnNldCA9PT0gMCAmJiAoZmlyc3ROb2RlLmlzU2VnbWVudGVkKCkgfHwgZmlyc3ROb2RlLmlzVG9rZW4oKSB8fCAhZmlyc3ROb2RlLmNhbkluc2VydFRleHRCZWZvcmUoKSB8fCAhZmlyc3ROb2RlUGFyZW50LmNhbkluc2VydFRleHRCZWZvcmUoKSAmJiBmaXJzdE5vZGUuZ2V0UHJldmlvdXNTaWJsaW5nKCkgPT09IG51bGwpKSB7XG4gICAgICBsZXQgcHJldlNpYmxpbmcgPSBmaXJzdE5vZGUuZ2V0UHJldmlvdXNTaWJsaW5nKCk7XG5cbiAgICAgIGlmICghJGlzVGV4dE5vZGUocHJldlNpYmxpbmcpIHx8ICRpc1Rva2VuT3JTZWdtZW50ZWQocHJldlNpYmxpbmcpKSB7XG4gICAgICAgIHByZXZTaWJsaW5nID0gJGNyZWF0ZVRleHROb2RlKCk7XG4gICAgICAgIHByZXZTaWJsaW5nLnNldEZvcm1hdChmb3JtYXQpO1xuXG4gICAgICAgIGlmICghZmlyc3ROb2RlUGFyZW50LmNhbkluc2VydFRleHRCZWZvcmUoKSkge1xuICAgICAgICAgIGZpcnN0Tm9kZVBhcmVudC5pbnNlcnRCZWZvcmUocHJldlNpYmxpbmcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpcnN0Tm9kZS5pbnNlcnRCZWZvcmUocHJldlNpYmxpbmcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHByZXZTaWJsaW5nLnNlbGVjdCgpO1xuICAgICAgZmlyc3ROb2RlID0gcHJldlNpYmxpbmc7XG5cbiAgICAgIGlmICh0ZXh0ICE9PSAnJykge1xuICAgICAgICB0aGlzLmluc2VydFRleHQodGV4dCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGZpcnN0Tm9kZS5pc1NlZ21lbnRlZCgpICYmIHN0YXJ0T2Zmc2V0ICE9PSBmaXJzdE5vZGVUZXh0TGVuZ3RoKSB7XG4gICAgICBjb25zdCB0ZXh0Tm9kZSA9ICRjcmVhdGVUZXh0Tm9kZShmaXJzdE5vZGUuZ2V0VGV4dENvbnRlbnQoKSk7XG4gICAgICB0ZXh0Tm9kZS5zZXRGb3JtYXQoZm9ybWF0KTtcbiAgICAgIGZpcnN0Tm9kZS5yZXBsYWNlKHRleHROb2RlKTtcbiAgICAgIGZpcnN0Tm9kZSA9IHRleHROb2RlO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNDb2xsYXBzZWQoKSAmJiB0ZXh0ICE9PSAnJykge1xuICAgICAgLy8gV2hlbiB0aGUgZmlyc3ROb2RlIG9yIGxhc3ROb2RlIHBhcmVudHMgYXJlIGVsZW1lbnRzIHRoYXRcbiAgICAgIC8vIGRvIG5vdCBhbGxvdyB0ZXh0IHRvIGJlIGluc2VydGVkIGJlZm9yZSBvciBhZnRlciwgd2UgZmlyc3RcbiAgICAgIC8vIGNsZWFyIHRoZSBjb250ZW50LiBUaGVuIHdlIG5vcm1hbGl6ZSBzZWxlY3Rpb24sIHRoZW4gaW5zZXJ0XG4gICAgICAvLyB0aGUgbmV3IGNvbnRlbnQuXG4gICAgICBjb25zdCBsYXN0Tm9kZVBhcmVudCA9IGxhc3ROb2RlLmdldFBhcmVudCgpO1xuXG4gICAgICBpZiAoIWZpcnN0Tm9kZVBhcmVudC5jYW5JbnNlcnRUZXh0QmVmb3JlKCkgfHwgIWZpcnN0Tm9kZVBhcmVudC5jYW5JbnNlcnRUZXh0QWZ0ZXIoKSB8fCAkaXNFbGVtZW50Tm9kZShsYXN0Tm9kZVBhcmVudCkgJiYgKCFsYXN0Tm9kZVBhcmVudC5jYW5JbnNlcnRUZXh0QmVmb3JlKCkgfHwgIWxhc3ROb2RlUGFyZW50LmNhbkluc2VydFRleHRBZnRlcigpKSkge1xuICAgICAgICB0aGlzLmluc2VydFRleHQoJycpO1xuICAgICAgICBub3JtYWxpemVTZWxlY3Rpb25Qb2ludHNGb3JCb3VuZGFyaWVzKHRoaXMuYW5jaG9yLCB0aGlzLmZvY3VzLCBudWxsKTtcbiAgICAgICAgdGhpcy5pbnNlcnRUZXh0KHRleHQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNlbGVjdGVkTm9kZXNMZW5ndGggPT09IDEpIHtcbiAgICAgIGlmIChmaXJzdE5vZGUuaXNUb2tlbigpKSB7XG4gICAgICAgIGNvbnN0IHRleHROb2RlID0gJGNyZWF0ZVRleHROb2RlKHRleHQpO1xuICAgICAgICB0ZXh0Tm9kZS5zZWxlY3QoKTtcbiAgICAgICAgZmlyc3ROb2RlLnJlcGxhY2UodGV4dE5vZGUpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGZpcnN0Tm9kZUZvcm1hdCA9IGZpcnN0Tm9kZS5nZXRGb3JtYXQoKTtcbiAgICAgIGNvbnN0IGZpcnN0Tm9kZVN0eWxlID0gZmlyc3ROb2RlLmdldFN0eWxlKCk7XG5cbiAgICAgIGlmIChzdGFydE9mZnNldCA9PT0gZW5kT2Zmc2V0ICYmIChmaXJzdE5vZGVGb3JtYXQgIT09IGZvcm1hdCB8fCBmaXJzdE5vZGVTdHlsZSAhPT0gc3R5bGUpKSB7XG4gICAgICAgIGlmIChmaXJzdE5vZGUuZ2V0VGV4dENvbnRlbnQoKSA9PT0gJycpIHtcbiAgICAgICAgICBmaXJzdE5vZGUuc2V0Rm9ybWF0KGZvcm1hdCk7XG4gICAgICAgICAgZmlyc3ROb2RlLnNldFN0eWxlKHN0eWxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB0ZXh0Tm9kZSA9ICRjcmVhdGVUZXh0Tm9kZSh0ZXh0KTtcbiAgICAgICAgICB0ZXh0Tm9kZS5zZXRGb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgICB0ZXh0Tm9kZS5zZXRTdHlsZShzdHlsZSk7XG4gICAgICAgICAgdGV4dE5vZGUuc2VsZWN0KCk7XG5cbiAgICAgICAgICBpZiAoc3RhcnRPZmZzZXQgPT09IDApIHtcbiAgICAgICAgICAgIGZpcnN0Tm9kZS5pbnNlcnRCZWZvcmUodGV4dE5vZGUsIGZhbHNlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgW3RhcmdldE5vZGVdID0gZmlyc3ROb2RlLnNwbGl0VGV4dChzdGFydE9mZnNldCk7XG4gICAgICAgICAgICB0YXJnZXROb2RlLmluc2VydEFmdGVyKHRleHROb2RlLCBmYWxzZSk7XG4gICAgICAgICAgfSAvLyBXaGVuIGNvbXBvc2luZywgd2UgbmVlZCB0byBhZGp1c3QgdGhlIGFuY2hvciBvZmZzZXQgc28gdGhhdFxuICAgICAgICAgIC8vIHdlIGNvcnJlY3RseSByZXBsYWNlIHRoYXQgcmlnaHQgcmFuZ2UuXG5cblxuICAgICAgICAgIGlmICh0ZXh0Tm9kZS5pc0NvbXBvc2luZygpICYmIHRoaXMuYW5jaG9yLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgdGhpcy5hbmNob3Iub2Zmc2V0IC09IHRleHQubGVuZ3RoO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBkZWxDb3VudCA9IGVuZE9mZnNldCAtIHN0YXJ0T2Zmc2V0O1xuICAgICAgZmlyc3ROb2RlID0gZmlyc3ROb2RlLnNwbGljZVRleHQoc3RhcnRPZmZzZXQsIGRlbENvdW50LCB0ZXh0LCB0cnVlKTtcblxuICAgICAgaWYgKGZpcnN0Tm9kZS5nZXRUZXh0Q29udGVudCgpID09PSAnJykge1xuICAgICAgICBmaXJzdE5vZGUucmVtb3ZlKCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuYW5jaG9yLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICBpZiAoZmlyc3ROb2RlLmlzQ29tcG9zaW5nKCkpIHtcbiAgICAgICAgICAvLyBXaGVuIGNvbXBvc2luZywgd2UgbmVlZCB0byBhZGp1c3QgdGhlIGFuY2hvciBvZmZzZXQgc28gdGhhdFxuICAgICAgICAgIC8vIHdlIGNvcnJlY3RseSByZXBsYWNlIHRoYXQgcmlnaHQgcmFuZ2UuXG4gICAgICAgICAgdGhpcy5hbmNob3Iub2Zmc2V0IC09IHRleHQubGVuZ3RoO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZm9ybWF0ID0gZmlyc3ROb2RlRm9ybWF0O1xuICAgICAgICAgIHRoaXMuc3R5bGUgPSBmaXJzdE5vZGVTdHlsZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBtYXJrZWROb2RlS2V5c0ZvcktlZXAgPSBuZXcgU2V0KFsuLi5maXJzdE5vZGUuZ2V0UGFyZW50S2V5cygpLCAuLi5sYXN0Tm9kZS5nZXRQYXJlbnRLZXlzKCldKTsgLy8gV2UgaGF2ZSB0byBnZXQgdGhlIHBhcmVudCBlbGVtZW50cyBiZWZvcmUgdGhlIG5leHQgc2VjdGlvbixcbiAgICAgIC8vIGFzIGluIHRoYXQgc2VjdGlvbiB3ZSBtaWdodCBtdXRhdGUgdGhlIGxhc3ROb2RlLlxuXG4gICAgICBjb25zdCBmaXJzdEVsZW1lbnQgPSAkaXNFbGVtZW50Tm9kZShmaXJzdE5vZGUpID8gZmlyc3ROb2RlIDogZmlyc3ROb2RlLmdldFBhcmVudE9yVGhyb3coKTtcbiAgICAgIGxldCBsYXN0RWxlbWVudCA9ICRpc0VsZW1lbnROb2RlKGxhc3ROb2RlKSA/IGxhc3ROb2RlIDogbGFzdE5vZGUuZ2V0UGFyZW50T3JUaHJvdygpO1xuICAgICAgbGV0IGxhc3RFbGVtZW50Q2hpbGQgPSBsYXN0Tm9kZTsgLy8gSWYgdGhlIGxhc3QgZWxlbWVudCBpcyBpbmxpbmUsIHdlIHNob3VsZCBpbnN0ZWFkIGxvb2sgYXQgZ2V0dGluZ1xuICAgICAgLy8gdGhlIG5vZGVzIG9mIGl0cyBwYXJlbnQsIHJhdGhlciB0aGFuIGl0c2VsZi4gVGhpcyBiZWhhdmlvciB3aWxsXG4gICAgICAvLyB0aGVuIGJldHRlciBtYXRjaCBob3cgdGV4dCBub2RlIGluc2VydGlvbnMgd29yay4gV2Ugd2lsbCBuZWVkIHRvXG4gICAgICAvLyBhbHNvIHVwZGF0ZSB0aGUgbGFzdCBlbGVtZW50J3MgY2hpbGQgYWNjb3JkaW5nbHkgYXMgd2UgZG8gdGhpcy5cblxuICAgICAgaWYgKCFmaXJzdEVsZW1lbnQuaXMobGFzdEVsZW1lbnQpICYmIGxhc3RFbGVtZW50LmlzSW5saW5lKCkpIHtcbiAgICAgICAgLy8gS2VlcCB0cmF2ZXJzaW5nIHRpbGwgd2UgaGF2ZSBhIG5vbi1pbmxpbmUgZWxlbWVudCBwYXJlbnQuXG4gICAgICAgIGRvIHtcbiAgICAgICAgICBsYXN0RWxlbWVudENoaWxkID0gbGFzdEVsZW1lbnQ7XG4gICAgICAgICAgbGFzdEVsZW1lbnQgPSBsYXN0RWxlbWVudC5nZXRQYXJlbnRPclRocm93KCk7XG4gICAgICAgIH0gd2hpbGUgKGxhc3RFbGVtZW50LmlzSW5saW5lKCkpO1xuICAgICAgfSAvLyBIYW5kbGUgbXV0YXRpb25zIHRvIHRoZSBsYXN0IG5vZGUuXG5cblxuICAgICAgaWYgKGVuZFBvaW50LnR5cGUgPT09ICd0ZXh0JyAmJiAoZW5kT2Zmc2V0ICE9PSAwIHx8IGxhc3ROb2RlLmdldFRleHRDb250ZW50KCkgPT09ICcnKSB8fCBlbmRQb2ludC50eXBlID09PSAnZWxlbWVudCcgJiYgbGFzdE5vZGUuZ2V0SW5kZXhXaXRoaW5QYXJlbnQoKSA8IGVuZE9mZnNldCkge1xuICAgICAgICBpZiAoJGlzVGV4dE5vZGUobGFzdE5vZGUpICYmICFsYXN0Tm9kZS5pc1Rva2VuKCkgJiYgZW5kT2Zmc2V0ICE9PSBsYXN0Tm9kZS5nZXRUZXh0Q29udGVudFNpemUoKSkge1xuICAgICAgICAgIGlmIChsYXN0Tm9kZS5pc1NlZ21lbnRlZCgpKSB7XG4gICAgICAgICAgICBjb25zdCB0ZXh0Tm9kZSA9ICRjcmVhdGVUZXh0Tm9kZShsYXN0Tm9kZS5nZXRUZXh0Q29udGVudCgpKTtcbiAgICAgICAgICAgIGxhc3ROb2RlLnJlcGxhY2UodGV4dE5vZGUpO1xuICAgICAgICAgICAgbGFzdE5vZGUgPSB0ZXh0Tm9kZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsYXN0Tm9kZSA9IGxhc3ROb2RlLnNwbGljZVRleHQoMCwgZW5kT2Zmc2V0LCAnJyk7XG4gICAgICAgICAgbWFya2VkTm9kZUtleXNGb3JLZWVwLmFkZChsYXN0Tm9kZS5fX2tleSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgbGFzdE5vZGVQYXJlbnQgPSBsYXN0Tm9kZS5nZXRQYXJlbnRPclRocm93KCk7XG5cbiAgICAgICAgICBpZiAoIWxhc3ROb2RlUGFyZW50LmNhbkJlRW1wdHkoKSAmJiBsYXN0Tm9kZVBhcmVudC5nZXRDaGlsZHJlblNpemUoKSA9PT0gMSkge1xuICAgICAgICAgICAgbGFzdE5vZGVQYXJlbnQucmVtb3ZlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxhc3ROb2RlLnJlbW92ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWFya2VkTm9kZUtleXNGb3JLZWVwLmFkZChsYXN0Tm9kZS5fX2tleSk7XG4gICAgICB9IC8vIEVpdGhlciBtb3ZlIHRoZSByZW1haW5pbmcgbm9kZXMgb2YgdGhlIGxhc3QgcGFyZW50IHRvIGFmdGVyXG4gICAgICAvLyB0aGUgZmlyc3QgY2hpbGQsIG9yIHJlbW92ZSB0aGVtIGVudGlyZWx5LiBJZiB0aGUgbGFzdCBwYXJlbnRcbiAgICAgIC8vIGlzIHRoZSBzYW1lIGFzIHRoZSBmaXJzdCBwYXJlbnQsIHRoaXMgbG9naWMgYWxzbyB3b3Jrcy5cblxuXG4gICAgICBjb25zdCBsYXN0Tm9kZUNoaWxkcmVuID0gbGFzdEVsZW1lbnQuZ2V0Q2hpbGRyZW4oKTtcbiAgICAgIGNvbnN0IHNlbGVjdGVkTm9kZXNTZXQgPSBuZXcgU2V0KHNlbGVjdGVkTm9kZXMpO1xuICAgICAgY29uc3QgZmlyc3RBbmRMYXN0RWxlbWVudHNBcmVFcXVhbCA9IGZpcnN0RWxlbWVudC5pcyhsYXN0RWxlbWVudCk7IC8vIFdlIGNob29zZSBhIHRhcmdldCB0byBpbnNlcnQgYWxsIG5vZGVzIGFmdGVyLiBJbiB0aGUgY2FzZSBvZiBoYXZpbmdcbiAgICAgIC8vIGFuZCBpbmxpbmUgc3RhcnRpbmcgcGFyZW50IGVsZW1lbnQgd2l0aCBhIHN0YXJ0aW5nIG5vZGUgdGhhdCBoYXMgbm9cbiAgICAgIC8vIHNpYmxpbmdzLCB3ZSBzaG91bGQgaW5zZXJ0IGFmdGVyIHRoZSBzdGFydGluZyBwYXJlbnQgZWxlbWVudCwgb3RoZXJ3aXNlXG4gICAgICAvLyB3ZSB3aWxsIGluY29ycmVjdGx5IG1lcmdlIGludG8gdGhlIHN0YXJ0aW5nIHBhcmVudCBlbGVtZW50LlxuICAgICAgLy8gVE9ETzogc2hvdWxkIHdlIGtlZXAgb24gdHJhdmVyc2luZyBwYXJlbnRzIGlmIHdlJ3JlIGluc2lkZSBhbm90aGVyXG4gICAgICAvLyBuZXN0ZWQgaW5saW5lIGVsZW1lbnQ/XG5cbiAgICAgIGNvbnN0IGluc2VydGlvblRhcmdldCA9IGZpcnN0RWxlbWVudC5pc0lubGluZSgpICYmIGZpcnN0Tm9kZS5nZXROZXh0U2libGluZygpID09PSBudWxsID8gZmlyc3RFbGVtZW50IDogZmlyc3ROb2RlO1xuXG4gICAgICBmb3IgKGxldCBpID0gbGFzdE5vZGVDaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBjb25zdCBsYXN0Tm9kZUNoaWxkID0gbGFzdE5vZGVDaGlsZHJlbltpXTtcblxuICAgICAgICBpZiAobGFzdE5vZGVDaGlsZC5pcyhmaXJzdE5vZGUpIHx8ICRpc0VsZW1lbnROb2RlKGxhc3ROb2RlQ2hpbGQpICYmIGxhc3ROb2RlQ2hpbGQuaXNQYXJlbnRPZihmaXJzdE5vZGUpKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGFzdE5vZGVDaGlsZC5pc0F0dGFjaGVkKCkpIHtcbiAgICAgICAgICBpZiAoIXNlbGVjdGVkTm9kZXNTZXQuaGFzKGxhc3ROb2RlQ2hpbGQpIHx8IGxhc3ROb2RlQ2hpbGQuaXMobGFzdEVsZW1lbnRDaGlsZCkpIHtcbiAgICAgICAgICAgIGlmICghZmlyc3RBbmRMYXN0RWxlbWVudHNBcmVFcXVhbCkge1xuICAgICAgICAgICAgICBpbnNlcnRpb25UYXJnZXQuaW5zZXJ0QWZ0ZXIobGFzdE5vZGVDaGlsZCwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsYXN0Tm9kZUNoaWxkLnJlbW92ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIWZpcnN0QW5kTGFzdEVsZW1lbnRzQXJlRXF1YWwpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBhbHJlYWR5IG1vdmVkIG91dCBhbGwgdGhlIG5vZGVzIG9mIHRoZVxuICAgICAgICAvLyBsYXN0IHBhcmVudCwgYW5kIGlmIHNvLCB0cmF2ZXJzZSB0aGUgcGFyZW50IHRyZWUgYW5kIG1hcmtcbiAgICAgICAgLy8gdGhlbSBhbGwgYXMgYmVpbmcgYWJsZSB0byBkZWxldGVkIHRvby5cbiAgICAgICAgbGV0IHBhcmVudCA9IGxhc3RFbGVtZW50O1xuICAgICAgICBsZXQgbGFzdFJlbW92ZWRQYXJlbnQgPSBudWxsO1xuXG4gICAgICAgIHdoaWxlIChwYXJlbnQgIT09IG51bGwpIHtcbiAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IHBhcmVudC5nZXRDaGlsZHJlbigpO1xuICAgICAgICAgIGNvbnN0IGNoaWxkcmVuTGVuZ3RoID0gY2hpbGRyZW4ubGVuZ3RoO1xuXG4gICAgICAgICAgaWYgKGNoaWxkcmVuTGVuZ3RoID09PSAwIHx8IGNoaWxkcmVuW2NoaWxkcmVuTGVuZ3RoIC0gMV0uaXMobGFzdFJlbW92ZWRQYXJlbnQpKSB7XG4gICAgICAgICAgICBtYXJrZWROb2RlS2V5c0ZvcktlZXAuZGVsZXRlKHBhcmVudC5fX2tleSk7XG4gICAgICAgICAgICBsYXN0UmVtb3ZlZFBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQuZ2V0UGFyZW50KCk7XG4gICAgICAgIH1cbiAgICAgIH0gLy8gRW5zdXJlIHdlIGRvIHNwbGljaW5nIGFmdGVyIG1vdmluZyBvZiBub2RlcywgYXMgc3BsaWNpbmdcbiAgICAgIC8vIGNhbiBoYXZlIHNpZGUtZWZmZWN0cyAoaW4gdGhlIGNhc2Ugb2YgaGFzaHRhZ3MpLlxuXG5cbiAgICAgIGlmICghZmlyc3ROb2RlLmlzVG9rZW4oKSkge1xuICAgICAgICBmaXJzdE5vZGUgPSBmaXJzdE5vZGUuc3BsaWNlVGV4dChzdGFydE9mZnNldCwgZmlyc3ROb2RlVGV4dExlbmd0aCAtIHN0YXJ0T2Zmc2V0LCB0ZXh0LCB0cnVlKTtcblxuICAgICAgICBpZiAoZmlyc3ROb2RlLmdldFRleHRDb250ZW50KCkgPT09ICcnKSB7XG4gICAgICAgICAgZmlyc3ROb2RlLnJlbW92ZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKGZpcnN0Tm9kZS5pc0NvbXBvc2luZygpICYmIHRoaXMuYW5jaG9yLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgIC8vIFdoZW4gY29tcG9zaW5nLCB3ZSBuZWVkIHRvIGFkanVzdCB0aGUgYW5jaG9yIG9mZnNldCBzbyB0aGF0XG4gICAgICAgICAgLy8gd2UgY29ycmVjdGx5IHJlcGxhY2UgdGhhdCByaWdodCByYW5nZS5cbiAgICAgICAgICB0aGlzLmFuY2hvci5vZmZzZXQgLT0gdGV4dC5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc3RhcnRPZmZzZXQgPT09IGZpcnN0Tm9kZVRleHRMZW5ndGgpIHtcbiAgICAgICAgZmlyc3ROb2RlLnNlbGVjdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdGV4dE5vZGUgPSAkY3JlYXRlVGV4dE5vZGUodGV4dCk7XG4gICAgICAgIHRleHROb2RlLnNlbGVjdCgpO1xuICAgICAgICBmaXJzdE5vZGUucmVwbGFjZSh0ZXh0Tm9kZSk7XG4gICAgICB9IC8vIFJlbW92ZSBhbGwgc2VsZWN0ZWQgbm9kZXMgdGhhdCBoYXZlbid0IGFscmVhZHkgYmVlbiByZW1vdmVkLlxuXG5cbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2VsZWN0ZWROb2Rlc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkTm9kZSA9IHNlbGVjdGVkTm9kZXNbaV07XG4gICAgICAgIGNvbnN0IGtleSA9IHNlbGVjdGVkTm9kZS5fX2tleTtcblxuICAgICAgICBpZiAoIW1hcmtlZE5vZGVLZXlzRm9yS2VlcC5oYXMoa2V5KSkge1xuICAgICAgICAgIHNlbGVjdGVkTm9kZS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJlbW92ZVRleHQoKSB7XG4gICAgdGhpcy5pbnNlcnRUZXh0KCcnKTtcbiAgfVxuXG4gIGZvcm1hdFRleHQoZm9ybWF0VHlwZSkge1xuICAgIGlmICh0aGlzLmlzQ29sbGFwc2VkKCkpIHtcbiAgICAgIHRoaXMudG9nZ2xlRm9ybWF0KGZvcm1hdFR5cGUpOyAvLyBXaGVuIGNoYW5naW5nIGZvcm1hdCwgd2Ugc2hvdWxkIHN0b3AgY29tcG9zaXRpb25cblxuICAgICAgJHNldENvbXBvc2l0aW9uS2V5KG51bGwpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHNlbGVjdGVkTm9kZXMgPSB0aGlzLmdldE5vZGVzKCk7XG4gICAgY29uc3Qgc2VsZWN0ZWRUZXh0Tm9kZXMgPSBbXTtcblxuICAgIGZvciAoY29uc3Qgc2VsZWN0ZWROb2RlIG9mIHNlbGVjdGVkTm9kZXMpIHtcbiAgICAgIGlmICgkaXNUZXh0Tm9kZShzZWxlY3RlZE5vZGUpKSB7XG4gICAgICAgIHNlbGVjdGVkVGV4dE5vZGVzLnB1c2goc2VsZWN0ZWROb2RlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBzZWxlY3RlZFRleHROb2Rlc0xlbmd0aCA9IHNlbGVjdGVkVGV4dE5vZGVzLmxlbmd0aDtcblxuICAgIGlmIChzZWxlY3RlZFRleHROb2Rlc0xlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy50b2dnbGVGb3JtYXQoZm9ybWF0VHlwZSk7IC8vIFdoZW4gY2hhbmdpbmcgZm9ybWF0LCB3ZSBzaG91bGQgc3RvcCBjb21wb3NpdGlvblxuXG4gICAgICAkc2V0Q29tcG9zaXRpb25LZXkobnVsbCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYW5jaG9yID0gdGhpcy5hbmNob3I7XG4gICAgY29uc3QgZm9jdXMgPSB0aGlzLmZvY3VzO1xuICAgIGNvbnN0IGlzQmFja3dhcmQgPSB0aGlzLmlzQmFja3dhcmQoKTtcbiAgICBjb25zdCBzdGFydFBvaW50ID0gaXNCYWNrd2FyZCA/IGZvY3VzIDogYW5jaG9yO1xuICAgIGNvbnN0IGVuZFBvaW50ID0gaXNCYWNrd2FyZCA/IGFuY2hvciA6IGZvY3VzO1xuICAgIGxldCBmaXJzdEluZGV4ID0gMDtcbiAgICBsZXQgZmlyc3ROb2RlID0gc2VsZWN0ZWRUZXh0Tm9kZXNbMF07XG4gICAgbGV0IHN0YXJ0T2Zmc2V0ID0gc3RhcnRQb2ludC50eXBlID09PSAnZWxlbWVudCcgPyAwIDogc3RhcnRQb2ludC5vZmZzZXQ7IC8vIEluIGNhc2Ugc2VsZWN0aW9uIHN0YXJ0ZWQgYXQgdGhlIGVuZCBvZiB0ZXh0IG5vZGUgdXNlIG5leHQgdGV4dCBub2RlXG5cbiAgICBpZiAoc3RhcnRQb2ludC50eXBlID09PSAndGV4dCcgJiYgc3RhcnRPZmZzZXQgPT09IGZpcnN0Tm9kZS5nZXRUZXh0Q29udGVudFNpemUoKSkge1xuICAgICAgZmlyc3RJbmRleCA9IDE7XG4gICAgICBmaXJzdE5vZGUgPSBzZWxlY3RlZFRleHROb2Rlc1sxXTtcbiAgICAgIHN0YXJ0T2Zmc2V0ID0gMDtcbiAgICB9XG5cbiAgICBpZiAoZmlyc3ROb2RlID09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBmaXJzdE5leHRGb3JtYXQgPSBmaXJzdE5vZGUuZ2V0Rm9ybWF0RmxhZ3MoZm9ybWF0VHlwZSwgbnVsbCk7XG4gICAgY29uc3QgbGFzdEluZGV4ID0gc2VsZWN0ZWRUZXh0Tm9kZXNMZW5ndGggLSAxO1xuICAgIGxldCBsYXN0Tm9kZSA9IHNlbGVjdGVkVGV4dE5vZGVzW2xhc3RJbmRleF07XG4gICAgY29uc3QgZW5kT2Zmc2V0ID0gZW5kUG9pbnQudHlwZSA9PT0gJ3RleHQnID8gZW5kUG9pbnQub2Zmc2V0IDogbGFzdE5vZGUuZ2V0VGV4dENvbnRlbnRTaXplKCk7IC8vIFNpbmdsZSBub2RlIHNlbGVjdGVkXG5cbiAgICBpZiAoZmlyc3ROb2RlLmlzKGxhc3ROb2RlKSkge1xuICAgICAgLy8gTm8gYWN0dWFsIHRleHQgaXMgc2VsZWN0ZWQsIHNvIGRvIG5vdGhpbmcuXG4gICAgICBpZiAoc3RhcnRPZmZzZXQgPT09IGVuZE9mZnNldCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIFRoZSBlbnRpcmUgbm9kZSBpcyBzZWxlY3RlZCwgc28ganVzdCBmb3JtYXQgaXRcblxuXG4gICAgICBpZiAoc3RhcnRPZmZzZXQgPT09IDAgJiYgZW5kT2Zmc2V0ID09PSBmaXJzdE5vZGUuZ2V0VGV4dENvbnRlbnRTaXplKCkpIHtcbiAgICAgICAgZmlyc3ROb2RlLnNldEZvcm1hdChmaXJzdE5leHRGb3JtYXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTm9kZSBpcyBwYXJ0aWFsbHkgc2VsZWN0ZWQsIHNvIHNwbGl0IGl0IGludG8gdHdvIG5vZGVzXG4gICAgICAgIC8vIGFkZCBzdHlsZSB0aGUgc2VsZWN0ZWQgb25lLlxuICAgICAgICBjb25zdCBzcGxpdE5vZGVzID0gZmlyc3ROb2RlLnNwbGl0VGV4dChzdGFydE9mZnNldCwgZW5kT2Zmc2V0KTtcbiAgICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSBzdGFydE9mZnNldCA9PT0gMCA/IHNwbGl0Tm9kZXNbMF0gOiBzcGxpdE5vZGVzWzFdO1xuICAgICAgICByZXBsYWNlbWVudC5zZXRGb3JtYXQoZmlyc3ROZXh0Rm9ybWF0KTsgLy8gVXBkYXRlIHNlbGVjdGlvbiBvbmx5IGlmIHN0YXJ0cy9lbmRzIG9uIHRleHQgbm9kZVxuXG4gICAgICAgIGlmIChzdGFydFBvaW50LnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgIHN0YXJ0UG9pbnQuc2V0KHJlcGxhY2VtZW50Ll9fa2V5LCAwLCAndGV4dCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVuZFBvaW50LnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgIGVuZFBvaW50LnNldChyZXBsYWNlbWVudC5fX2tleSwgZW5kT2Zmc2V0IC0gc3RhcnRPZmZzZXQsICd0ZXh0Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5mb3JtYXQgPSBmaXJzdE5leHRGb3JtYXQ7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBNdWx0aXBsZSBub2RlcyBzZWxlY3RlZFxuICAgIC8vIFRoZSBlbnRpcmUgZmlyc3Qgbm9kZSBpc24ndCBzZWxlY3RlZCwgc28gc3BsaXQgaXRcblxuXG4gICAgaWYgKHN0YXJ0T2Zmc2V0ICE9PSAwKSB7XG4gICAgICBbLCBmaXJzdE5vZGVdID0gZmlyc3ROb2RlLnNwbGl0VGV4dChzdGFydE9mZnNldCk7XG4gICAgICBzdGFydE9mZnNldCA9IDA7XG4gICAgfVxuXG4gICAgZmlyc3ROb2RlLnNldEZvcm1hdChmaXJzdE5leHRGb3JtYXQpO1xuICAgIGNvbnN0IGxhc3ROZXh0Rm9ybWF0ID0gbGFzdE5vZGUuZ2V0Rm9ybWF0RmxhZ3MoZm9ybWF0VHlwZSwgZmlyc3ROZXh0Rm9ybWF0KTsgLy8gSWYgdGhlIG9mZnNldCBpcyAwLCBpdCBtZWFucyBubyBhY3R1YWwgY2hhcmFjdGVycyBhcmUgc2VsZWN0ZWQsXG4gICAgLy8gc28gd2Ugc2tpcCBmb3JtYXR0aW5nIHRoZSBsYXN0IG5vZGUgYWx0b2dldGhlci5cblxuICAgIGlmIChlbmRPZmZzZXQgPiAwKSB7XG4gICAgICBpZiAoZW5kT2Zmc2V0ICE9PSBsYXN0Tm9kZS5nZXRUZXh0Q29udGVudFNpemUoKSkge1xuICAgICAgICBbbGFzdE5vZGVdID0gbGFzdE5vZGUuc3BsaXRUZXh0KGVuZE9mZnNldCk7XG4gICAgICB9XG5cbiAgICAgIGxhc3ROb2RlLnNldEZvcm1hdChsYXN0TmV4dEZvcm1hdCk7XG4gICAgfSAvLyBQcm9jZXNzIGFsbCB0ZXh0IG5vZGVzIGluIGJldHdlZW5cblxuXG4gICAgZm9yIChsZXQgaSA9IGZpcnN0SW5kZXggKyAxOyBpIDwgbGFzdEluZGV4OyBpKyspIHtcbiAgICAgIGNvbnN0IHRleHROb2RlID0gc2VsZWN0ZWRUZXh0Tm9kZXNbaV07XG5cbiAgICAgIGlmICghdGV4dE5vZGUuaXNUb2tlbigpKSB7XG4gICAgICAgIGNvbnN0IG5leHRGb3JtYXQgPSB0ZXh0Tm9kZS5nZXRGb3JtYXRGbGFncyhmb3JtYXRUeXBlLCBsYXN0TmV4dEZvcm1hdCk7XG4gICAgICAgIHRleHROb2RlLnNldEZvcm1hdChuZXh0Rm9ybWF0KTtcbiAgICAgIH1cbiAgICB9IC8vIFVwZGF0ZSBzZWxlY3Rpb24gb25seSBpZiBzdGFydHMvZW5kcyBvbiB0ZXh0IG5vZGVcblxuXG4gICAgaWYgKHN0YXJ0UG9pbnQudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICBzdGFydFBvaW50LnNldChmaXJzdE5vZGUuX19rZXksIHN0YXJ0T2Zmc2V0LCAndGV4dCcpO1xuICAgIH1cblxuICAgIGlmIChlbmRQb2ludC50eXBlID09PSAndGV4dCcpIHtcbiAgICAgIGVuZFBvaW50LnNldChsYXN0Tm9kZS5fX2tleSwgZW5kT2Zmc2V0LCAndGV4dCcpO1xuICAgIH1cblxuICAgIHRoaXMuZm9ybWF0ID0gZmlyc3ROZXh0Rm9ybWF0IHwgbGFzdE5leHRGb3JtYXQ7XG4gIH1cblxuICBpbnNlcnROb2Rlcyhub2Rlcywgc2VsZWN0U3RhcnQpIHtcbiAgICAvLyBJZiB0aGVyZSBpcyBhIHJhbmdlIHNlbGVjdGVkIHJlbW92ZSB0aGUgdGV4dCBpbiBpdFxuICAgIGlmICghdGhpcy5pc0NvbGxhcHNlZCgpKSB7XG4gICAgICBjb25zdCBzZWxlY3Rpb25FbmQgPSB0aGlzLmlzQmFja3dhcmQoKSA/IHRoaXMuYW5jaG9yIDogdGhpcy5mb2N1cztcbiAgICAgIGNvbnN0IG5leHRTaWJsaW5nID0gc2VsZWN0aW9uRW5kLmdldE5vZGUoKS5nZXROZXh0U2libGluZygpO1xuICAgICAgY29uc3QgbmV4dFNpYmxpbmdLZXkgPSBuZXh0U2libGluZyA/IG5leHRTaWJsaW5nLmdldEtleSgpIDogbnVsbDtcbiAgICAgIGNvbnN0IHByZXZTaWJsaW5nID0gc2VsZWN0aW9uRW5kLmdldE5vZGUoKS5nZXRQcmV2aW91c1NpYmxpbmcoKTtcbiAgICAgIGNvbnN0IHByZXZTaWJsaW5nS2V5ID0gcHJldlNpYmxpbmcgPyBwcmV2U2libGluZy5nZXRLZXkoKSA6IG51bGw7XG4gICAgICB0aGlzLnJlbW92ZVRleHQoKTsgLy8gSWYgdGhlIHNlbGVjdGlvbiBoYXMgYmVlbiBtb3ZlZCB0byBhbiBhZGphY2VudCBpbmxpbmUgZWxlbWVudCwgY3JlYXRlXG4gICAgICAvLyBhIHRlbXBvcmFyeSB0ZXh0IG5vZGUgdGhhdCB3ZSBjYW4gaW5zZXJ0IHRoZSBub2RlcyBhZnRlci5cblxuICAgICAgaWYgKHRoaXMuaXNDb2xsYXBzZWQoKSAmJiB0aGlzLmZvY3VzLnR5cGUgPT09ICdlbGVtZW50Jykge1xuICAgICAgICBsZXQgdGV4dE5vZGU7XG5cbiAgICAgICAgaWYgKHRoaXMuZm9jdXMua2V5ID09PSBuZXh0U2libGluZ0tleSAmJiB0aGlzLmZvY3VzLm9mZnNldCA9PT0gMCkge1xuICAgICAgICAgIHRleHROb2RlID0gJGNyZWF0ZVRleHROb2RlKCk7XG4gICAgICAgICAgdGhpcy5mb2N1cy5nZXROb2RlKCkuaW5zZXJ0QmVmb3JlKHRleHROb2RlKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmZvY3VzLmtleSA9PT0gcHJldlNpYmxpbmdLZXkgJiYgdGhpcy5mb2N1cy5vZmZzZXQgPT09IHRoaXMuZm9jdXMuZ2V0Tm9kZSgpLmdldENoaWxkcmVuU2l6ZSgpKSB7XG4gICAgICAgICAgdGV4dE5vZGUgPSAkY3JlYXRlVGV4dE5vZGUoKTtcbiAgICAgICAgICB0aGlzLmZvY3VzLmdldE5vZGUoKS5pbnNlcnRBZnRlcih0ZXh0Tm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGV4dE5vZGUpIHtcbiAgICAgICAgICB0aGlzLmZvY3VzLnNldCh0ZXh0Tm9kZS5fX2tleSwgMCwgJ3RleHQnKTtcbiAgICAgICAgICB0aGlzLmFuY2hvci5zZXQodGV4dE5vZGUuX19rZXksIDAsICd0ZXh0Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBhbmNob3IgPSB0aGlzLmFuY2hvcjtcbiAgICBjb25zdCBhbmNob3JPZmZzZXQgPSBhbmNob3Iub2Zmc2V0O1xuICAgIGNvbnN0IGFuY2hvck5vZGUgPSBhbmNob3IuZ2V0Tm9kZSgpO1xuICAgIGxldCB0YXJnZXQgPSBhbmNob3JOb2RlO1xuXG4gICAgaWYgKGFuY2hvci50eXBlID09PSAnZWxlbWVudCcpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBhbmNob3IuZ2V0Tm9kZSgpO1xuICAgICAgY29uc3QgcGxhY2VtZW50Tm9kZSA9IGVsZW1lbnQuZ2V0Q2hpbGRBdEluZGV4KGFuY2hvck9mZnNldCAtIDEpO1xuXG4gICAgICBpZiAocGxhY2VtZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgICAgICB0YXJnZXQgPSBlbGVtZW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0ID0gcGxhY2VtZW50Tm9kZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBzaWJsaW5ncyA9IFtdOyAvLyBHZXQgYWxsIHJlbWFpbmluZyB0ZXh0IG5vZGUgc2libGluZ3MgaW4gdGhpcyBlbGVtZW50IHNvIHdlIGNhblxuICAgIC8vIGFwcGVuZCB0aGVtIGFmdGVyIHRoZSBsYXN0IG5vZGUgd2UncmUgaW5zZXJ0aW5nLlxuXG4gICAgY29uc3QgbmV4dFNpYmxpbmdzID0gYW5jaG9yTm9kZS5nZXROZXh0U2libGluZ3MoKTtcbiAgICBjb25zdCB0b3BMZXZlbEVsZW1lbnQgPSAkaXNSb290T3JTaGFkb3dSb290KGFuY2hvck5vZGUpID8gbnVsbCA6IGFuY2hvck5vZGUuZ2V0VG9wTGV2ZWxFbGVtZW50T3JUaHJvdygpO1xuXG4gICAgaWYgKCRpc1RleHROb2RlKGFuY2hvck5vZGUpKSB7XG4gICAgICBjb25zdCB0ZXh0Q29udGVudCA9IGFuY2hvck5vZGUuZ2V0VGV4dENvbnRlbnQoKTtcbiAgICAgIGNvbnN0IHRleHRDb250ZW50TGVuZ3RoID0gdGV4dENvbnRlbnQubGVuZ3RoO1xuXG4gICAgICBpZiAoYW5jaG9yT2Zmc2V0ID09PSAwICYmIHRleHRDb250ZW50TGVuZ3RoICE9PSAwKSB7XG4gICAgICAgIGNvbnN0IHByZXZTaWJsaW5nID0gYW5jaG9yTm9kZS5nZXRQcmV2aW91c1NpYmxpbmcoKTtcblxuICAgICAgICBpZiAocHJldlNpYmxpbmcgIT09IG51bGwpIHtcbiAgICAgICAgICB0YXJnZXQgPSBwcmV2U2libGluZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0YXJnZXQgPSBhbmNob3JOb2RlLmdldFBhcmVudE9yVGhyb3coKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNpYmxpbmdzLnB1c2goYW5jaG9yTm9kZSk7XG4gICAgICB9IGVsc2UgaWYgKGFuY2hvck9mZnNldCA9PT0gdGV4dENvbnRlbnRMZW5ndGgpIHtcbiAgICAgICAgdGFyZ2V0ID0gYW5jaG9yTm9kZTtcbiAgICAgIH0gZWxzZSBpZiAoYW5jaG9yTm9kZS5pc1Rva2VuKCkpIHtcbiAgICAgICAgLy8gRG8gbm90aGluZyBpZiB3ZSdyZSBpbnNpZGUgYSB0b2tlbiBub2RlXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIElmIHdlIHN0YXJ0ZWQgd2l0aCBhIHJhbmdlIHNlbGVjdGVkIGdyYWIgdGhlIGRhbmdsaW5nVGV4dCBhZnRlciB0aGVcbiAgICAgICAgLy8gZW5kIG9mIHRoZSBzZWxlY3Rpb24gYW5kIHB1dCBpdCBvbiBvdXIgc2libGluZ3MgYXJyYXkgc28gd2UgY2FuXG4gICAgICAgIC8vIGFwcGVuZCBpdCBhZnRlciB0aGUgbGFzdCBub2RlIHdlJ3JlIGluc2VydGluZ1xuICAgICAgICBsZXQgZGFuZ2xpbmdUZXh0O1xuICAgICAgICBbdGFyZ2V0LCBkYW5nbGluZ1RleHRdID0gYW5jaG9yTm9kZS5zcGxpdFRleHQoYW5jaG9yT2Zmc2V0KTtcbiAgICAgICAgc2libGluZ3MucHVzaChkYW5nbGluZ1RleHQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0aW5nTm9kZSA9IHRhcmdldDtcbiAgICBzaWJsaW5ncy5wdXNoKC4uLm5leHRTaWJsaW5ncyk7XG4gICAgY29uc3QgZmlyc3ROb2RlID0gbm9kZXNbMF07XG4gICAgbGV0IGRpZFJlcGxhY2VPck1lcmdlID0gZmFsc2U7XG4gICAgbGV0IGxhc3ROb2RlID0gbnVsbDsgLy8gVGltZSB0byBpbnNlcnQgdGhlIG5vZGVzIVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldO1xuXG4gICAgICBpZiAoISRpc1Jvb3RPclNoYWRvd1Jvb3QodGFyZ2V0KSAmJiAhJGlzRGVjb3JhdG9yTm9kZSh0YXJnZXQpICYmICRpc0VsZW1lbnROb2RlKG5vZGUpICYmICFub2RlLmlzSW5saW5lKCkpIHtcbiAgICAgICAgLy8gLS0tLS1cbiAgICAgICAgLy8gSGV1cmlzdGljcyBmb3IgdGhlIHJlcGxhY2VtZW50IG9yIG1lcmdpbmcgb2YgZWxlbWVudHNcbiAgICAgICAgLy8gLS0tLS1cbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBhbiBpbmNvbWluZyBlbGVtZW50IG5vZGUgYXMgdGhlIGZpcnN0IG5vZGUsIHRoZW4gd2UnbGwgbmVlZFxuICAgICAgICAvLyBzZWUgaWYgd2UgY2FuIG1lcmdlIGFueSBkZXNjZW5kYW50IGxlYWYgbm9kZXMgaW50byBvdXIgZXhpc3RpbmcgdGFyZ2V0LlxuICAgICAgICAvLyBXZSBjYW4gZG8gdGhpcyBieSBmaW5kaW5nIHRoZSBmaXJzdCBkZXNjZW5kYW50IGluIG91ciBub2RlIGFuZCB0aGVuIHdlIGNhblxuICAgICAgICAvLyBwbHVjayBpdCBhbmQgaXRzIHBhcmVudCAoc2libGluZ3MgaW5jbHVkZWQpIG91dCBhbmQgaW5zZXJ0IHRoZW0gZGlyZWN0bHlcbiAgICAgICAgLy8gaW50byBvdXIgdGFyZ2V0LiBXZSBvbmx5IGRvIHRoaXMgZm9yIHRoZSBmaXJzdCBub2RlLCBhcyB3ZSBhcmUgb25seVxuICAgICAgICAvLyBpbnRlcmVzdGVkIGluIG1lcmdpbmcgd2l0aCB0aGUgYW5jaG9yLCB3aGljaCBpcyBvdXIgdGFyZ2V0LlxuICAgICAgICAvL1xuICAgICAgICAvLyBJZiB3ZSBhcHBseSBlaXRoZXIgdGhlIHJlcGxhY2VtZW50IG9yIG1lcmdpbmcgaGV1cmlzdGljcywgd2UgbmVlZCB0byBiZVxuICAgICAgICAvLyBjYXJlZnVsIHRoYXQgd2UncmUgbm90IHRyeWluZyB0byBpbnNlcnQgYSBub24tZWxlbWVudCBub2RlIGludG8gYSByb290IG5vZGUsXG4gICAgICAgIC8vIHNvIHdlIGNoZWNrIGlmIHRoZSB0YXJnZXQncyBwYXJlbnQgYWZ0ZXIgdGhpcyBsb2dpYyBpcyB0aGUgcm9vdCBub2RlIGFuZCBpZlxuICAgICAgICAvLyBzbyB3ZSB0cmlnZ2VyIGFuIGludmFyaWFudCB0byBlbnN1cmUgdGhpcyBwcm9ibGVtIGlzIGNhdWdodCBpbiBkZXZlbG9wbWVudFxuICAgICAgICAvLyBhbmQgZml4ZWQgYWNjb3JkaW5nbHkuXG4gICAgICAgIGlmIChub2RlLmlzKGZpcnN0Tm9kZSkpIHtcbiAgICAgICAgICBpZiAoJGlzRWxlbWVudE5vZGUodGFyZ2V0KSAmJiB0YXJnZXQuaXNFbXB0eSgpICYmIHRhcmdldC5jYW5SZXBsYWNlV2l0aChub2RlKSkge1xuICAgICAgICAgICAgdGFyZ2V0LnJlcGxhY2Uobm9kZSk7XG4gICAgICAgICAgICB0YXJnZXQgPSBub2RlO1xuICAgICAgICAgICAgZGlkUmVwbGFjZU9yTWVyZ2UgPSB0cnVlO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfSAvLyBXZSBtYXkgaGF2ZSBhIG5vZGUgdHJlZSB3aGVyZSB0aGVyZSBhcmUgbWFueSBsZXZlbHMsIGZvciBleGFtcGxlIHdpdGhcbiAgICAgICAgICAvLyBsaXN0cyBhbmQgdGFibGVzLiBTbyBsZXQncyBmaW5kIHRoZSBmaXJzdCBkZXNjZW5kYW50IHRvIHRyeSBhbmQgbWVyZ2VcbiAgICAgICAgICAvLyB3aXRoLiBTbyBpZiB3ZSBoYXZlIHRoZSB0YXJnZXQ6XG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBQYXJhZ3JhcGggKDEpXG4gICAgICAgICAgLy8gICBUZXh0ICgyKVxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gYW5kIHdlIGFyZSB0cnlpbmcgdG8gaW5zZXJ0OlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gTGlzdE5vZGUgKDMpXG4gICAgICAgICAgLy8gICBMaXN0SXRlbU5vZGUgKDQpXG4gICAgICAgICAgLy8gICAgIFRleHQgKDUpXG4gICAgICAgICAgLy8gICBMaXN0SXRlbU5vZGUgKDYpXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBUaGUgcmVzdWx0IHdvdWxkIGJlOlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gUGFyYWdyYXBoICgxKVxuICAgICAgICAgIC8vICAgVGV4dCAoMilcbiAgICAgICAgICAvLyAgIFRleHQgKDUpXG4gICAgICAgICAgLy9cblxuXG4gICAgICAgICAgY29uc3QgZmlyc3REZXNjZW5kYW50ID0gbm9kZS5nZXRGaXJzdERlc2NlbmRhbnQoKTtcblxuICAgICAgICAgIGlmICgkaXNMZWFmTm9kZShmaXJzdERlc2NlbmRhbnQpKSB7XG4gICAgICAgICAgICBsZXQgZWxlbWVudCA9IGZpcnN0RGVzY2VuZGFudC5nZXRQYXJlbnRPclRocm93KCk7XG5cbiAgICAgICAgICAgIHdoaWxlIChlbGVtZW50LmlzSW5saW5lKCkpIHtcbiAgICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQuZ2V0UGFyZW50T3JUaHJvdygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IGVsZW1lbnQuZ2V0Q2hpbGRyZW4oKTtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuTGVuZ3RoID0gY2hpbGRyZW4ubGVuZ3RoO1xuXG4gICAgICAgICAgICBpZiAoJGlzRWxlbWVudE5vZGUodGFyZ2V0KSkge1xuICAgICAgICAgICAgICBsZXQgZmlyc3RDaGlsZCA9IHRhcmdldC5nZXRGaXJzdENoaWxkKCk7XG5cbiAgICAgICAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBjaGlsZHJlbkxlbmd0aDsgcysrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltzXTtcblxuICAgICAgICAgICAgICAgIGlmIChmaXJzdENoaWxkID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICB0YXJnZXQuYXBwZW5kKGNoaWxkKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgZmlyc3RDaGlsZC5pbnNlcnRBZnRlcihjaGlsZCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZmlyc3RDaGlsZCA9IGNoaWxkO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBmb3IgKGxldCBzID0gY2hpbGRyZW5MZW5ndGggLSAxOyBzID49IDA7IHMtLSkge1xuICAgICAgICAgICAgICAgIHRhcmdldC5pbnNlcnRBZnRlcihjaGlsZHJlbltzXSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQuZ2V0UGFyZW50T3JUaHJvdygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsYXN0Tm9kZSA9IGNoaWxkcmVuW2NoaWxkcmVuTGVuZ3RoIC0gMV07XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICAgICAgZGlkUmVwbGFjZU9yTWVyZ2UgPSB0cnVlO1xuXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5pcyhub2RlKSkge1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoJGlzVGV4dE5vZGUodGFyZ2V0KSkge1xuICAgICAgICAgIGlmICh0b3BMZXZlbEVsZW1lbnQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoYGluc2VydE5vZGU6IHRvcExldmVsRWxlbWVudCBpcyByb290IG5vZGVgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0YXJnZXQgPSB0b3BMZXZlbEVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZGlkUmVwbGFjZU9yTWVyZ2UgJiYgISRpc0RlY29yYXRvck5vZGUobm9kZSkgJiYgJGlzUm9vdE9yU2hhZG93Um9vdCh0YXJnZXQuZ2V0UGFyZW50KCkpKSB7XG4gICAgICAgIHtcbiAgICAgICAgICB0aHJvdyBFcnJvcihgaW5zZXJ0Tm9kZXM6IGNhbm5vdCBpbnNlcnQgYSBub24tZWxlbWVudCBpbnRvIGEgcm9vdCBub2RlYCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZGlkUmVwbGFjZU9yTWVyZ2UgPSBmYWxzZTtcblxuICAgICAgaWYgKCRpc0VsZW1lbnROb2RlKHRhcmdldCkgJiYgIXRhcmdldC5pc0lubGluZSgpKSB7XG4gICAgICAgIGxhc3ROb2RlID0gbm9kZTtcblxuICAgICAgICBpZiAoJGlzRGVjb3JhdG9yTm9kZShub2RlKSAmJiAhbm9kZS5pc0lubGluZSgpKSB7XG4gICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0Lmluc2VydEFmdGVyKG5vZGUsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIGlmICghJGlzRWxlbWVudE5vZGUobm9kZSkpIHtcbiAgICAgICAgICBjb25zdCBmaXJzdENoaWxkID0gdGFyZ2V0LmdldEZpcnN0Q2hpbGQoKTtcblxuICAgICAgICAgIGlmIChmaXJzdENoaWxkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBmaXJzdENoaWxkLmluc2VydEJlZm9yZShub2RlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0LmFwcGVuZChub2RlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0YXJnZXQgPSBub2RlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghbm9kZS5jYW5CZUVtcHR5KCkgJiYgbm9kZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICgkaXNSb290Tm9kZSh0YXJnZXQpKSB7XG4gICAgICAgICAgICBjb25zdCBwbGFjZW1lbnROb2RlID0gdGFyZ2V0LmdldENoaWxkQXRJbmRleChhbmNob3JPZmZzZXQpO1xuXG4gICAgICAgICAgICBpZiAocGxhY2VtZW50Tm9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBwbGFjZW1lbnROb2RlLmluc2VydEJlZm9yZShub2RlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRhcmdldC5hcHBlbmQobm9kZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRhcmdldCA9IG5vZGU7XG4gICAgICAgICAgfSBlbHNlIGlmIChub2RlLmlzSW5saW5lKCkpIHtcbiAgICAgICAgICAgIHRhcmdldC5hcHBlbmQobm9kZSk7XG4gICAgICAgICAgICB0YXJnZXQgPSBub2RlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQuaW5zZXJ0QWZ0ZXIobm9kZSwgZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghJGlzRWxlbWVudE5vZGUobm9kZSkgfHwgJGlzRWxlbWVudE5vZGUobm9kZSkgJiYgbm9kZS5pc0lubGluZSgpIHx8ICRpc0RlY29yYXRvck5vZGUodGFyZ2V0KSAmJiAhdGFyZ2V0LmlzSW5saW5lKCkpIHtcbiAgICAgICAgbGFzdE5vZGUgPSBub2RlOyAvLyB3aGVuIHBhc3RpbmcgdG9wIGxldmVsIG5vZGUgaW4gdGhlIG1pZGRsZSBvZiBwYXJhZ3JhcGhcbiAgICAgICAgLy8gd2UgbmVlZCB0byBzcGxpdCBwYXJhZ3JhcGggaW5zdGVhZCBvZiBwbGFjaW5nIGl0IGlubGluZVxuXG4gICAgICAgIGlmICgkaXNSYW5nZVNlbGVjdGlvbih0aGlzKSAmJiAkaXNEZWNvcmF0b3JOb2RlKG5vZGUpICYmICgkaXNFbGVtZW50Tm9kZSh0YXJnZXQpIHx8ICRpc1RleHROb2RlKHRhcmdldCkpICYmICFub2RlLmlzSW5saW5lKCkpIHtcbiAgICAgICAgICBsZXQgc3BsaXROb2RlO1xuICAgICAgICAgIGxldCBzcGxpdE9mZnNldDtcblxuICAgICAgICAgIGlmICgkaXNUZXh0Tm9kZSh0YXJnZXQpKSB7XG4gICAgICAgICAgICBzcGxpdE5vZGUgPSB0YXJnZXQuZ2V0UGFyZW50T3JUaHJvdygpO1xuICAgICAgICAgICAgY29uc3QgW3RleHROb2RlXSA9IHRhcmdldC5zcGxpdFRleHQoYW5jaG9yT2Zmc2V0KTtcbiAgICAgICAgICAgIHNwbGl0T2Zmc2V0ID0gdGV4dE5vZGUuZ2V0SW5kZXhXaXRoaW5QYXJlbnQoKSArIDE7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNwbGl0Tm9kZSA9IHRhcmdldDtcbiAgICAgICAgICAgIHNwbGl0T2Zmc2V0ID0gYW5jaG9yT2Zmc2V0O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IFssIHJpZ2h0VHJlZV0gPSAkc3BsaXROb2RlKHNwbGl0Tm9kZSwgc3BsaXRPZmZzZXQpO1xuICAgICAgICAgIHRhcmdldCA9IHJpZ2h0VHJlZS5pbnNlcnRCZWZvcmUobm9kZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0Lmluc2VydEFmdGVyKG5vZGUsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgbmV4dFRhcmdldCA9IHRhcmdldC5nZXRQYXJlbnRPclRocm93KCk7IC8vIGlmIHdlJ3JlIGluc2VydGluZyBhbiBFbGVtZW50IGFmdGVyIGEgTGluZUJyZWFrLCB3ZSB3YW50IHRvIG1vdmUgdGhlIHRhcmdldCB0byB0aGUgcGFyZW50XG4gICAgICAgIC8vIGFuZCByZW1vdmUgdGhlIExpbmVCcmVhayBzbyB3ZSBkb24ndCBoYXZlIGVtcHR5IHNwYWNlLlxuXG4gICAgICAgIGlmICgkaXNMaW5lQnJlYWtOb2RlKHRhcmdldCkpIHtcbiAgICAgICAgICB0YXJnZXQucmVtb3ZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0YXJnZXQgPSBuZXh0VGFyZ2V0OyAvLyBSZS10cnkgYWdhaW4gd2l0aCB0aGUgdGFyZ2V0IGJlaW5nIHRoZSBwYXJlbnRcblxuICAgICAgICBpLS07XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzZWxlY3RTdGFydCkge1xuICAgICAgLy8gSGFuZGxlIG1vdmluZyBzZWxlY3Rpb24gdG8gc3RhcnQgZm9yIGFsbCBub2Rlc1xuICAgICAgaWYgKCRpc1RleHROb2RlKHN0YXJ0aW5nTm9kZSkpIHtcbiAgICAgICAgc3RhcnRpbmdOb2RlLnNlbGVjdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcHJldlNpYmxpbmcgPSB0YXJnZXQuZ2V0UHJldmlvdXNTaWJsaW5nKCk7XG5cbiAgICAgICAgaWYgKCRpc1RleHROb2RlKHByZXZTaWJsaW5nKSkge1xuICAgICAgICAgIHByZXZTaWJsaW5nLnNlbGVjdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGFyZ2V0LmdldEluZGV4V2l0aGluUGFyZW50KCk7XG4gICAgICAgICAgdGFyZ2V0LmdldFBhcmVudE9yVGhyb3coKS5zZWxlY3QoaW5kZXgsIGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICgkaXNFbGVtZW50Tm9kZSh0YXJnZXQpKSB7XG4gICAgICAvLyBJZiB0aGUgbGFzdCBub2RlIHRvIGJlIGluc2VydGVkIHdhcyBhIHRleHQgbm9kZSxcbiAgICAgIC8vIHRoZW4gd2Ugc2hvdWxkIGF0dGVtcHQgdG8gbW92ZSBzZWxlY3Rpb24gdG8gdGhhdC5cbiAgICAgIGNvbnN0IGxhc3RDaGlsZCA9ICRpc1RleHROb2RlKGxhc3ROb2RlKSA/IGxhc3ROb2RlIDogJGlzRWxlbWVudE5vZGUobGFzdE5vZGUpICYmIGxhc3ROb2RlLmlzSW5saW5lKCkgPyBsYXN0Tm9kZS5nZXRMYXN0RGVzY2VuZGFudCgpIDogdGFyZ2V0LmdldExhc3REZXNjZW5kYW50KCk7XG5cbiAgICAgIGlmICghc2VsZWN0U3RhcnQpIHtcbiAgICAgICAgLy8gSGFuZGxlIG1vdmluZyBzZWxlY3Rpb24gdG8gZW5kIGZvciBlbGVtZW50c1xuICAgICAgICBpZiAobGFzdENoaWxkID09PSBudWxsKSB7XG4gICAgICAgICAgdGFyZ2V0LnNlbGVjdCgpO1xuICAgICAgICB9IGVsc2UgaWYgKCRpc1RleHROb2RlKGxhc3RDaGlsZCkpIHtcbiAgICAgICAgICBpZiAobGFzdENoaWxkLmdldFRleHRDb250ZW50KCkgPT09ICcnKSB7XG4gICAgICAgICAgICBsYXN0Q2hpbGQuc2VsZWN0UHJldmlvdXMoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGFzdENoaWxkLnNlbGVjdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsYXN0Q2hpbGQuc2VsZWN0TmV4dCgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzaWJsaW5ncy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxUYXJnZXQgPSB0YXJnZXQ7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IHNpYmxpbmdzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgY29uc3Qgc2libGluZyA9IHNpYmxpbmdzW2ldO1xuICAgICAgICAgIGNvbnN0IHByZXZQYXJlbnQgPSBzaWJsaW5nLmdldFBhcmVudE9yVGhyb3coKTtcblxuICAgICAgICAgIGlmICgkaXNFbGVtZW50Tm9kZSh0YXJnZXQpICYmICEkaXNCbG9ja0VsZW1lbnROb2RlKHNpYmxpbmcpICYmICEoJGlzRGVjb3JhdG9yTm9kZShzaWJsaW5nKSAmJiAoIC8vIE5vdGU6IFdlIGFyZSBvbmx5IGxvb2tpbmcgZm9yIGRlY29yYXRvcnMgdGhhdCBhcmUgaW5saW5lIGFuZCBub3QgaXNvbGF0ZWQuXG4gICAgICAgICAgICAhc2libGluZy5pc0lubGluZSgpIHx8IHNpYmxpbmcuaXNJc29sYXRlZCgpKSkpIHtcbiAgICAgICAgICAgIGlmIChvcmlnaW5hbFRhcmdldCA9PT0gdGFyZ2V0KSB7XG4gICAgICAgICAgICAgIHRhcmdldC5hcHBlbmQoc2libGluZyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0YXJnZXQuaW5zZXJ0QmVmb3JlKHNpYmxpbmcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0YXJnZXQgPSBzaWJsaW5nO1xuICAgICAgICAgIH0gZWxzZSBpZiAoISRpc0VsZW1lbnROb2RlKHRhcmdldCkgJiYgISRpc0Jsb2NrRWxlbWVudE5vZGUoc2libGluZykpIHtcbiAgICAgICAgICAgIHRhcmdldC5pbnNlcnRCZWZvcmUoc2libGluZyk7XG4gICAgICAgICAgICB0YXJnZXQgPSBzaWJsaW5nO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoJGlzRWxlbWVudE5vZGUoc2libGluZykgJiYgIXNpYmxpbmcuY2FuSW5zZXJ0QWZ0ZXIodGFyZ2V0KSkge1xuICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlIFRoZSBjbG9uZSBtZXRob2QgZG9lcyBleGlzdCBvbiB0aGUgY29uc3RydWN0b3IuXG4gICAgICAgICAgICAgIGNvbnN0IHByZXZQYXJlbnRDbG9uZSA9IHByZXZQYXJlbnQuY29uc3RydWN0b3IuY2xvbmUocHJldlBhcmVudCk7XG5cbiAgICAgICAgICAgICAgaWYgKCEkaXNFbGVtZW50Tm9kZShwcmV2UGFyZW50Q2xvbmUpKSB7XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoYGluc2VydE5vZGVzOiBjbG9uZWQgcGFyZW50IGNsb25lIGlzIG5vdCBhbiBlbGVtZW50YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcHJldlBhcmVudENsb25lLmFwcGVuZChzaWJsaW5nKTtcbiAgICAgICAgICAgICAgdGFyZ2V0Lmluc2VydEFmdGVyKHByZXZQYXJlbnRDbG9uZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0YXJnZXQuaW5zZXJ0QWZ0ZXIoc2libGluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSAvLyBDaGVjayBpZiB0aGUgcHJldiBwYXJlbnQgaXMgZW1wdHksIGFzIGl0IG1pZ2h0IG5lZWRcbiAgICAgICAgICAvLyByZW1vdmluZy5cblxuXG4gICAgICAgICAgaWYgKHByZXZQYXJlbnQuaXNFbXB0eSgpICYmICFwcmV2UGFyZW50LmNhbkJlRW1wdHkoKSkge1xuICAgICAgICAgICAgcHJldlBhcmVudC5yZW1vdmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFzZWxlY3RTdGFydCkge1xuICAgICAgLy8gSGFuZGxlIG1vdmluZyBzZWxlY3Rpb24gdG8gZW5kIGZvciBvdGhlciBub2Rlc1xuICAgICAgaWYgKCRpc1RleHROb2RlKHRhcmdldCkpIHtcbiAgICAgICAgdGFyZ2V0LnNlbGVjdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRhcmdldC5nZXRQYXJlbnRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGFyZ2V0LmdldEluZGV4V2l0aGluUGFyZW50KCkgKyAxO1xuICAgICAgICBlbGVtZW50LnNlbGVjdChpbmRleCwgaW5kZXgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaW5zZXJ0UGFyYWdyYXBoKCkge1xuICAgIGlmICghdGhpcy5pc0NvbGxhcHNlZCgpKSB7XG4gICAgICB0aGlzLnJlbW92ZVRleHQoKTtcbiAgICB9XG5cbiAgICBjb25zdCBhbmNob3IgPSB0aGlzLmFuY2hvcjtcbiAgICBjb25zdCBhbmNob3JPZmZzZXQgPSBhbmNob3Iub2Zmc2V0O1xuICAgIGxldCBjdXJyZW50RWxlbWVudDtcbiAgICBsZXQgbm9kZXNUb01vdmUgPSBbXTtcbiAgICBsZXQgc2libGluZ3NUb01vdmUgPSBbXTtcblxuICAgIGlmIChhbmNob3IudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICBjb25zdCBhbmNob3JOb2RlID0gYW5jaG9yLmdldE5vZGUoKTtcbiAgICAgIG5vZGVzVG9Nb3ZlID0gYW5jaG9yTm9kZS5nZXROZXh0U2libGluZ3MoKS5yZXZlcnNlKCk7XG4gICAgICBjdXJyZW50RWxlbWVudCA9IGFuY2hvck5vZGUuZ2V0UGFyZW50T3JUaHJvdygpO1xuICAgICAgY29uc3QgaXNJbmxpbmUgPSBjdXJyZW50RWxlbWVudC5pc0lubGluZSgpO1xuICAgICAgY29uc3QgdGV4dENvbnRlbnRMZW5ndGggPSBpc0lubGluZSA/IGN1cnJlbnRFbGVtZW50LmdldFRleHRDb250ZW50U2l6ZSgpIDogYW5jaG9yTm9kZS5nZXRUZXh0Q29udGVudFNpemUoKTtcblxuICAgICAgaWYgKGFuY2hvck9mZnNldCA9PT0gMCkge1xuICAgICAgICBub2Rlc1RvTW92ZS5wdXNoKGFuY2hvck5vZGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGlzSW5saW5lKSB7XG4gICAgICAgICAgLy8gRm9yIGlubGluZSBub2Rlcywgd2Ugd2FudCB0byBtb3ZlIGFsbCB0aGUgc2libGluZ3MgdG8gdGhlIG5ldyBwYXJhZ3JhcGhcbiAgICAgICAgICAvLyBpZiBzZWxlY3Rpb24gaXMgYXQgdGhlIGVuZCwgd2UganVzdCBtb3ZlIHRoZSBzaWJsaW5ncy4gT3RoZXJ3aXNlLCB3ZSBhbHNvXG4gICAgICAgICAgLy8gc3BsaXQgdGhlIHRleHQgbm9kZSBhbmQgYWRkIHRoYXQgYW5kIGl0J3Mgc2libGluZ3MgYmVsb3cuXG4gICAgICAgICAgc2libGluZ3NUb01vdmUgPSBjdXJyZW50RWxlbWVudC5nZXROZXh0U2libGluZ3MoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhbmNob3JPZmZzZXQgIT09IHRleHRDb250ZW50TGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCFpc0lubGluZSB8fCBhbmNob3JPZmZzZXQgIT09IGFuY2hvck5vZGUuZ2V0VGV4dENvbnRlbnRTaXplKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IFssIHNwbGl0Tm9kZV0gPSBhbmNob3JOb2RlLnNwbGl0VGV4dChhbmNob3JPZmZzZXQpO1xuICAgICAgICAgICAgbm9kZXNUb01vdmUucHVzaChzcGxpdE5vZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50RWxlbWVudCA9IGFuY2hvci5nZXROb2RlKCk7XG5cbiAgICAgIGlmICgkaXNSb290T3JTaGFkb3dSb290KGN1cnJlbnRFbGVtZW50KSkge1xuICAgICAgICBjb25zdCBwYXJhZ3JhcGggPSAkY3JlYXRlUGFyYWdyYXBoTm9kZSgpO1xuICAgICAgICBjb25zdCBjaGlsZCA9IGN1cnJlbnRFbGVtZW50LmdldENoaWxkQXRJbmRleChhbmNob3JPZmZzZXQpO1xuICAgICAgICBwYXJhZ3JhcGguc2VsZWN0KCk7XG5cbiAgICAgICAgaWYgKGNoaWxkICE9PSBudWxsKSB7XG4gICAgICAgICAgY2hpbGQuaW5zZXJ0QmVmb3JlKHBhcmFncmFwaCwgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1cnJlbnRFbGVtZW50LmFwcGVuZChwYXJhZ3JhcGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBub2Rlc1RvTW92ZSA9IGN1cnJlbnRFbGVtZW50LmdldENoaWxkcmVuKCkuc2xpY2UoYW5jaG9yT2Zmc2V0KS5yZXZlcnNlKCk7XG4gICAgfVxuXG4gICAgY29uc3Qgbm9kZXNUb01vdmVMZW5ndGggPSBub2Rlc1RvTW92ZS5sZW5ndGg7XG5cbiAgICBpZiAoYW5jaG9yT2Zmc2V0ID09PSAwICYmIG5vZGVzVG9Nb3ZlTGVuZ3RoID4gMCAmJiBjdXJyZW50RWxlbWVudC5pc0lubGluZSgpKSB7XG4gICAgICBjb25zdCBwYXJlbnQgPSBjdXJyZW50RWxlbWVudC5nZXRQYXJlbnRPclRocm93KCk7XG4gICAgICBjb25zdCBuZXdFbGVtZW50ID0gcGFyZW50Lmluc2VydE5ld0FmdGVyKHRoaXMsIGZhbHNlKTtcblxuICAgICAgaWYgKCRpc0VsZW1lbnROb2RlKG5ld0VsZW1lbnQpKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gcGFyZW50LmdldENoaWxkcmVuKCk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIG5ld0VsZW1lbnQuYXBwZW5kKGNoaWxkcmVuW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbmV3RWxlbWVudCA9IGN1cnJlbnRFbGVtZW50Lmluc2VydE5ld0FmdGVyKHRoaXMsIGZhbHNlKTtcblxuICAgIGlmIChuZXdFbGVtZW50ID09PSBudWxsKSB7XG4gICAgICAvLyBIYW5kbGUgYXMgYSBsaW5lIGJyZWFrIGluc2VydGlvblxuICAgICAgdGhpcy5pbnNlcnRMaW5lQnJlYWsoKTtcbiAgICB9IGVsc2UgaWYgKCRpc0VsZW1lbnROb2RlKG5ld0VsZW1lbnQpKSB7XG4gICAgICAvLyBJZiB3ZSdyZSBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBjdXJyZW50IGVsZW1lbnQsIG1vdmUgdGhlIG5ldyBlbGVtZW50IHRvIGJlIGJlZm9yZSB0aGUgY3VycmVudCBlbGVtZW50XG4gICAgICBjb25zdCBjdXJyZW50RWxlbWVudEZpcnN0Q2hpbGQgPSBjdXJyZW50RWxlbWVudC5nZXRGaXJzdENoaWxkKCk7XG4gICAgICBjb25zdCBpc0JlZ2lubmluZyA9IGFuY2hvck9mZnNldCA9PT0gMCAmJiAoY3VycmVudEVsZW1lbnQuaXMoYW5jaG9yLmdldE5vZGUoKSkgfHwgY3VycmVudEVsZW1lbnRGaXJzdENoaWxkICYmIGN1cnJlbnRFbGVtZW50Rmlyc3RDaGlsZC5pcyhhbmNob3IuZ2V0Tm9kZSgpKSk7XG5cbiAgICAgIGlmIChpc0JlZ2lubmluZyAmJiBub2Rlc1RvTW92ZUxlbmd0aCA+IDApIHtcbiAgICAgICAgY3VycmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKG5ld0VsZW1lbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGxldCBmaXJzdENoaWxkID0gbnVsbDtcbiAgICAgIGNvbnN0IHNpYmxpbmdzVG9Nb3ZlTGVuZ3RoID0gc2libGluZ3NUb01vdmUubGVuZ3RoO1xuICAgICAgY29uc3QgcGFyZW50ID0gbmV3RWxlbWVudC5nZXRQYXJlbnRPclRocm93KCk7IC8vIEZvciBpbmxpbmUgZWxlbWVudHMsIHdlIGFwcGVuZCB0aGUgc2libGluZ3MgdG8gdGhlIHBhcmVudC5cblxuICAgICAgaWYgKHNpYmxpbmdzVG9Nb3ZlTGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpYmxpbmdzVG9Nb3ZlTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBzaWJsaW5nVG9Nb3ZlID0gc2libGluZ3NUb01vdmVbaV07XG4gICAgICAgICAgcGFyZW50LmFwcGVuZChzaWJsaW5nVG9Nb3ZlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAobm9kZXNUb01vdmVMZW5ndGggIT09IDApIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2Rlc1RvTW92ZUxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3Qgbm9kZVRvTW92ZSA9IG5vZGVzVG9Nb3ZlW2ldO1xuXG4gICAgICAgICAgaWYgKGZpcnN0Q2hpbGQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIG5ld0VsZW1lbnQuYXBwZW5kKG5vZGVUb01vdmUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmaXJzdENoaWxkLmluc2VydEJlZm9yZShub2RlVG9Nb3ZlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmaXJzdENoaWxkID0gbm9kZVRvTW92ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIW5ld0VsZW1lbnQuY2FuQmVFbXB0eSgpICYmIG5ld0VsZW1lbnQuZ2V0Q2hpbGRyZW5TaXplKCkgPT09IDApIHtcbiAgICAgICAgbmV3RWxlbWVudC5zZWxlY3RQcmV2aW91cygpO1xuICAgICAgICBuZXdFbGVtZW50LnJlbW92ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3RWxlbWVudC5zZWxlY3RTdGFydCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGluc2VydExpbmVCcmVhayhzZWxlY3RTdGFydCkge1xuICAgIGNvbnN0IGxpbmVCcmVha05vZGUgPSAkY3JlYXRlTGluZUJyZWFrTm9kZSgpO1xuICAgIGNvbnN0IGFuY2hvciA9IHRoaXMuYW5jaG9yO1xuXG4gICAgaWYgKGFuY2hvci50eXBlID09PSAnZWxlbWVudCcpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBhbmNob3IuZ2V0Tm9kZSgpO1xuXG4gICAgICBpZiAoJGlzUm9vdE5vZGUoZWxlbWVudCkpIHtcbiAgICAgICAgdGhpcy5pbnNlcnRQYXJhZ3JhcGgoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc2VsZWN0U3RhcnQpIHtcbiAgICAgIHRoaXMuaW5zZXJ0Tm9kZXMoW2xpbmVCcmVha05vZGVdLCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuaW5zZXJ0Tm9kZXMoW2xpbmVCcmVha05vZGVdKSkge1xuICAgICAgICBsaW5lQnJlYWtOb2RlLnNlbGVjdE5leHQoMCwgMCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0Q2hhcmFjdGVyT2Zmc2V0cygpIHtcbiAgICByZXR1cm4gZ2V0Q2hhcmFjdGVyT2Zmc2V0cyh0aGlzKTtcbiAgfVxuXG4gIGV4dHJhY3QoKSB7XG4gICAgY29uc3Qgc2VsZWN0ZWROb2RlcyA9IHRoaXMuZ2V0Tm9kZXMoKTtcbiAgICBjb25zdCBzZWxlY3RlZE5vZGVzTGVuZ3RoID0gc2VsZWN0ZWROb2Rlcy5sZW5ndGg7XG4gICAgY29uc3QgbGFzdEluZGV4ID0gc2VsZWN0ZWROb2Rlc0xlbmd0aCAtIDE7XG4gICAgY29uc3QgYW5jaG9yID0gdGhpcy5hbmNob3I7XG4gICAgY29uc3QgZm9jdXMgPSB0aGlzLmZvY3VzO1xuICAgIGxldCBmaXJzdE5vZGUgPSBzZWxlY3RlZE5vZGVzWzBdO1xuICAgIGxldCBsYXN0Tm9kZSA9IHNlbGVjdGVkTm9kZXNbbGFzdEluZGV4XTtcbiAgICBjb25zdCBbYW5jaG9yT2Zmc2V0LCBmb2N1c09mZnNldF0gPSBnZXRDaGFyYWN0ZXJPZmZzZXRzKHRoaXMpO1xuXG4gICAgaWYgKHNlbGVjdGVkTm9kZXNMZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9IGVsc2UgaWYgKHNlbGVjdGVkTm9kZXNMZW5ndGggPT09IDEpIHtcbiAgICAgIGlmICgkaXNUZXh0Tm9kZShmaXJzdE5vZGUpICYmICF0aGlzLmlzQ29sbGFwc2VkKCkpIHtcbiAgICAgICAgY29uc3Qgc3RhcnRPZmZzZXQgPSBhbmNob3JPZmZzZXQgPiBmb2N1c09mZnNldCA/IGZvY3VzT2Zmc2V0IDogYW5jaG9yT2Zmc2V0O1xuICAgICAgICBjb25zdCBlbmRPZmZzZXQgPSBhbmNob3JPZmZzZXQgPiBmb2N1c09mZnNldCA/IGFuY2hvck9mZnNldCA6IGZvY3VzT2Zmc2V0O1xuICAgICAgICBjb25zdCBzcGxpdE5vZGVzID0gZmlyc3ROb2RlLnNwbGl0VGV4dChzdGFydE9mZnNldCwgZW5kT2Zmc2V0KTtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHN0YXJ0T2Zmc2V0ID09PSAwID8gc3BsaXROb2Rlc1swXSA6IHNwbGl0Tm9kZXNbMV07XG4gICAgICAgIHJldHVybiBub2RlICE9IG51bGwgPyBbbm9kZV0gOiBbXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFtmaXJzdE5vZGVdO1xuICAgIH1cblxuICAgIGNvbnN0IGlzQmVmb3JlID0gYW5jaG9yLmlzQmVmb3JlKGZvY3VzKTtcblxuICAgIGlmICgkaXNUZXh0Tm9kZShmaXJzdE5vZGUpKSB7XG4gICAgICBjb25zdCBzdGFydE9mZnNldCA9IGlzQmVmb3JlID8gYW5jaG9yT2Zmc2V0IDogZm9jdXNPZmZzZXQ7XG5cbiAgICAgIGlmIChzdGFydE9mZnNldCA9PT0gZmlyc3ROb2RlLmdldFRleHRDb250ZW50U2l6ZSgpKSB7XG4gICAgICAgIHNlbGVjdGVkTm9kZXMuc2hpZnQoKTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhcnRPZmZzZXQgIT09IDApIHtcbiAgICAgICAgWywgZmlyc3ROb2RlXSA9IGZpcnN0Tm9kZS5zcGxpdFRleHQoc3RhcnRPZmZzZXQpO1xuICAgICAgICBzZWxlY3RlZE5vZGVzWzBdID0gZmlyc3ROb2RlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICgkaXNUZXh0Tm9kZShsYXN0Tm9kZSkpIHtcbiAgICAgIGNvbnN0IGxhc3ROb2RlVGV4dCA9IGxhc3ROb2RlLmdldFRleHRDb250ZW50KCk7XG4gICAgICBjb25zdCBsYXN0Tm9kZVRleHRMZW5ndGggPSBsYXN0Tm9kZVRleHQubGVuZ3RoO1xuICAgICAgY29uc3QgZW5kT2Zmc2V0ID0gaXNCZWZvcmUgPyBmb2N1c09mZnNldCA6IGFuY2hvck9mZnNldDtcblxuICAgICAgaWYgKGVuZE9mZnNldCA9PT0gMCkge1xuICAgICAgICBzZWxlY3RlZE5vZGVzLnBvcCgpO1xuICAgICAgfSBlbHNlIGlmIChlbmRPZmZzZXQgIT09IGxhc3ROb2RlVGV4dExlbmd0aCkge1xuICAgICAgICBbbGFzdE5vZGVdID0gbGFzdE5vZGUuc3BsaXRUZXh0KGVuZE9mZnNldCk7XG4gICAgICAgIHNlbGVjdGVkTm9kZXNbbGFzdEluZGV4XSA9IGxhc3ROb2RlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZWxlY3RlZE5vZGVzO1xuICB9XG5cbiAgbW9kaWZ5KGFsdGVyLCBpc0JhY2t3YXJkLCBncmFudWxhcml0eSkge1xuICAgIGNvbnN0IGZvY3VzID0gdGhpcy5mb2N1cztcbiAgICBjb25zdCBhbmNob3IgPSB0aGlzLmFuY2hvcjtcbiAgICBjb25zdCBjb2xsYXBzZSA9IGFsdGVyID09PSAnbW92ZSc7IC8vIEhhbmRsZSB0aGUgc2VsZWN0aW9uIG1vdmVtZW50IGFyb3VuZCBkZWNvcmF0b3JzLlxuXG4gICAgY29uc3QgcG9zc2libGVOb2RlID0gJGdldEFkamFjZW50Tm9kZShmb2N1cywgaXNCYWNrd2FyZCk7XG5cbiAgICBpZiAoJGlzRGVjb3JhdG9yTm9kZShwb3NzaWJsZU5vZGUpICYmICFwb3NzaWJsZU5vZGUuaXNJc29sYXRlZCgpKSB7XG4gICAgICAvLyBNYWtlIGl0IHBvc3NpYmxlIHRvIG1vdmUgc2VsZWN0aW9uIGZyb20gcmFuZ2Ugc2VsZWN0aW9uIHRvXG4gICAgICAvLyBub2RlIHNlbGVjdGlvbiBvbiB0aGUgbm9kZS5cbiAgICAgIGlmIChjb2xsYXBzZSAmJiBwb3NzaWJsZU5vZGUuaXNLZXlib2FyZFNlbGVjdGFibGUoKSkge1xuICAgICAgICBjb25zdCBub2RlU2VsZWN0aW9uID0gJGNyZWF0ZU5vZGVTZWxlY3Rpb24oKTtcbiAgICAgICAgbm9kZVNlbGVjdGlvbi5hZGQocG9zc2libGVOb2RlLl9fa2V5KTtcbiAgICAgICAgJHNldFNlbGVjdGlvbihub2RlU2VsZWN0aW9uKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzaWJsaW5nID0gaXNCYWNrd2FyZCA/IHBvc3NpYmxlTm9kZS5nZXRQcmV2aW91c1NpYmxpbmcoKSA6IHBvc3NpYmxlTm9kZS5nZXROZXh0U2libGluZygpO1xuXG4gICAgICBpZiAoISRpc1RleHROb2RlKHNpYmxpbmcpKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudCA9IHBvc3NpYmxlTm9kZS5nZXRQYXJlbnRPclRocm93KCk7XG4gICAgICAgIGxldCBvZmZzZXQ7XG4gICAgICAgIGxldCBlbGVtZW50S2V5O1xuXG4gICAgICAgIGlmICgkaXNFbGVtZW50Tm9kZShzaWJsaW5nKSkge1xuICAgICAgICAgIGVsZW1lbnRLZXkgPSBzaWJsaW5nLl9fa2V5O1xuICAgICAgICAgIG9mZnNldCA9IGlzQmFja3dhcmQgPyBzaWJsaW5nLmdldENoaWxkcmVuU2l6ZSgpIDogMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvZmZzZXQgPSBwb3NzaWJsZU5vZGUuZ2V0SW5kZXhXaXRoaW5QYXJlbnQoKTtcbiAgICAgICAgICBlbGVtZW50S2V5ID0gcGFyZW50Ll9fa2V5O1xuXG4gICAgICAgICAgaWYgKCFpc0JhY2t3YXJkKSB7XG4gICAgICAgICAgICBvZmZzZXQrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb2N1cy5zZXQoZWxlbWVudEtleSwgb2Zmc2V0LCAnZWxlbWVudCcpO1xuXG4gICAgICAgIGlmIChjb2xsYXBzZSkge1xuICAgICAgICAgIGFuY2hvci5zZXQoZWxlbWVudEtleSwgb2Zmc2V0LCAnZWxlbWVudCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2libGluZ0tleSA9IHNpYmxpbmcuX19rZXk7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IGlzQmFja3dhcmQgPyBzaWJsaW5nLmdldFRleHRDb250ZW50KCkubGVuZ3RoIDogMDtcbiAgICAgICAgZm9jdXMuc2V0KHNpYmxpbmdLZXksIG9mZnNldCwgJ3RleHQnKTtcblxuICAgICAgICBpZiAoY29sbGFwc2UpIHtcbiAgICAgICAgICBhbmNob3Iuc2V0KHNpYmxpbmdLZXksIG9mZnNldCwgJ3RleHQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBlZGl0b3IgPSBnZXRBY3RpdmVFZGl0b3IoKTtcbiAgICBjb25zdCBkb21TZWxlY3Rpb24gPSBnZXRET01TZWxlY3Rpb24oZWRpdG9yLl93aW5kb3cpO1xuXG4gICAgaWYgKCFkb21TZWxlY3Rpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBibG9ja0N1cnNvckVsZW1lbnQgPSBlZGl0b3IuX2Jsb2NrQ3Vyc29yRWxlbWVudDtcbiAgICBjb25zdCByb290RWxlbWVudCA9IGVkaXRvci5fcm9vdEVsZW1lbnQ7IC8vIFJlbW92ZSB0aGUgYmxvY2sgY3Vyc29yIGVsZW1lbnQgaWYgaXQgZXhpc3RzLiBUaGlzIHdpbGwgZW5zdXJlIHNlbGVjdGlvblxuICAgIC8vIHdvcmtzIGFzIGludGVuZGVkLiBJZiB3ZSBsZWF2ZSBpdCBpbiB0aGUgRE9NIGFsbCBzb3J0cyBvZiBzdHJhbmdlIGJ1Z3NcbiAgICAvLyBvY2N1ci4gOi9cblxuICAgIGlmIChyb290RWxlbWVudCAhPT0gbnVsbCAmJiBibG9ja0N1cnNvckVsZW1lbnQgIT09IG51bGwgJiYgJGlzRWxlbWVudE5vZGUocG9zc2libGVOb2RlKSAmJiAhcG9zc2libGVOb2RlLmlzSW5saW5lKCkgJiYgIXBvc3NpYmxlTm9kZS5jYW5CZUVtcHR5KCkpIHtcbiAgICAgIHJlbW92ZURPTUJsb2NrQ3Vyc29yRWxlbWVudChibG9ja0N1cnNvckVsZW1lbnQsIGVkaXRvciwgcm9vdEVsZW1lbnQpO1xuICAgIH0gLy8gV2UgdXNlIHRoZSBET00gc2VsZWN0aW9uLm1vZGlmeSBBUEkgaGVyZSB0byBcInRlbGxcIiB1cyB3aGF0IHRoZSBzZWxlY3Rpb25cbiAgICAvLyB3aWxsIGJlLiBXZSB0aGVuIHVzZSBpdCB0byB1cGRhdGUgdGhlIExleGljYWwgc2VsZWN0aW9uIGFjY29yZGluZ2x5LiBUaGlzXG4gICAgLy8gaXMgbXVjaCBtb3JlIHJlbGlhYmxlIHRoYW4gd2FpdGluZyBmb3IgYSBiZWZvcmVpbnB1dCBhbmQgdXNpbmcgdGhlIHJhbmdlc1xuICAgIC8vIGZyb20gZ2V0VGFyZ2V0UmFuZ2VzKCksIGFuZCBpcyBhbHNvIGJldHRlciB0aGFuIHRyeWluZyB0byBkbyBpdCBvdXJzZWx2ZXNcbiAgICAvLyB1c2luZyBJbnRsLlNlZ21lbnRlciBvciBvdGhlciB3b3JrYXJvdW5kcyB0aGF0IHN0cnVnZ2xlIHdpdGggd29yZCBzZWdtZW50c1xuICAgIC8vIGFuZCBsaW5lIHNlZ21lbnRzIChlc3BlY2lhbGx5IHdpdGggd29yZCB3cmFwcGluZyBhbmQgbm9uLVJvbWFuIGxhbmd1YWdlcykuXG5cblxuICAgIG1vdmVOYXRpdmVTZWxlY3Rpb24oZG9tU2VsZWN0aW9uLCBhbHRlciwgaXNCYWNrd2FyZCA/ICdiYWNrd2FyZCcgOiAnZm9yd2FyZCcsIGdyYW51bGFyaXR5KTsgLy8gR3VhcmQgYWdhaW5zdCBubyByYW5nZXNcblxuICAgIGlmIChkb21TZWxlY3Rpb24ucmFuZ2VDb3VudCA+IDApIHtcbiAgICAgIGNvbnN0IHJhbmdlID0gZG9tU2VsZWN0aW9uLmdldFJhbmdlQXQoMCk7IC8vIEFwcGx5IHRoZSBET00gc2VsZWN0aW9uIHRvIG91ciBMZXhpY2FsIHNlbGVjdGlvbi5cblxuICAgICAgY29uc3QgYW5jaG9yTm9kZSA9IHRoaXMuYW5jaG9yLmdldE5vZGUoKTtcbiAgICAgIGNvbnN0IHJvb3QgPSAkaXNSb290Tm9kZShhbmNob3JOb2RlKSA/IGFuY2hvck5vZGUgOiAkZ2V0TmVhcmVzdFJvb3RPclNoYWRvd1Jvb3QoYW5jaG9yTm9kZSk7XG4gICAgICB0aGlzLmFwcGx5RE9NUmFuZ2UocmFuZ2UpO1xuICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XG5cbiAgICAgIGlmICghY29sbGFwc2UpIHtcbiAgICAgICAgLy8gVmFsaWRhdGUgc2VsZWN0aW9uOyBtYWtlIHN1cmUgdGhhdCB0aGUgbmV3IGV4dGVuZGVkIHNlbGVjdGlvbiByZXNwZWN0cyBzaGFkb3cgcm9vdHNcbiAgICAgICAgY29uc3Qgbm9kZXMgPSB0aGlzLmdldE5vZGVzKCk7XG4gICAgICAgIGNvbnN0IHZhbGlkTm9kZXMgPSBbXTtcbiAgICAgICAgbGV0IHNocmlua1NlbGVjdGlvbiA9IGZhbHNlO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBuZXh0Tm9kZSA9IG5vZGVzW2ldO1xuXG4gICAgICAgICAgaWYgKCRoYXNBbmNlc3RvcihuZXh0Tm9kZSwgcm9vdCkpIHtcbiAgICAgICAgICAgIHZhbGlkTm9kZXMucHVzaChuZXh0Tm9kZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNocmlua1NlbGVjdGlvbiA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNocmlua1NlbGVjdGlvbiAmJiB2YWxpZE5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAvLyB2YWxpZE5vZGVzIGxlbmd0aCBjaGVjayBpcyBhIHNhZmVndWFyZCBhZ2FpbnN0IGFuIGludmFsaWQgc2VsZWN0aW9uOyBhcyBnZXROb2RlcygpXG4gICAgICAgICAgLy8gd2lsbCByZXR1cm4gYW4gZW1wdHkgYXJyYXkgaW4gdGhpcyBjYXNlXG4gICAgICAgICAgaWYgKGlzQmFja3dhcmQpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0VmFsaWROb2RlID0gdmFsaWROb2Rlc1swXTtcblxuICAgICAgICAgICAgaWYgKCRpc0VsZW1lbnROb2RlKGZpcnN0VmFsaWROb2RlKSkge1xuICAgICAgICAgICAgICBmaXJzdFZhbGlkTm9kZS5zZWxlY3RTdGFydCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZmlyc3RWYWxpZE5vZGUuZ2V0UGFyZW50T3JUaHJvdygpLnNlbGVjdFN0YXJ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGxhc3RWYWxpZE5vZGUgPSB2YWxpZE5vZGVzW3ZhbGlkTm9kZXMubGVuZ3RoIC0gMV07XG5cbiAgICAgICAgICAgIGlmICgkaXNFbGVtZW50Tm9kZShsYXN0VmFsaWROb2RlKSkge1xuICAgICAgICAgICAgICBsYXN0VmFsaWROb2RlLnNlbGVjdEVuZCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbGFzdFZhbGlkTm9kZS5nZXRQYXJlbnRPclRocm93KCkuc2VsZWN0RW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IC8vIEJlY2F1c2UgYSByYW5nZSB3b3JrcyBvbiBzdGFydCBhbmQgZW5kLCB3ZSBtaWdodCBuZWVkIHRvIGZsaXBcbiAgICAgICAgLy8gdGhlIGFuY2hvciBhbmQgZm9jdXMgcG9pbnRzIHRvIG1hdGNoIHdoYXQgdGhlIERPTSBoYXMsIG5vdCB3aGF0XG4gICAgICAgIC8vIHRoZSByYW5nZSBoYXMgc3BlY2lmaWNhbGx5LlxuXG5cbiAgICAgICAgaWYgKGRvbVNlbGVjdGlvbi5hbmNob3JOb2RlICE9PSByYW5nZS5zdGFydENvbnRhaW5lciB8fCBkb21TZWxlY3Rpb24uYW5jaG9yT2Zmc2V0ICE9PSByYW5nZS5zdGFydE9mZnNldCkge1xuICAgICAgICAgICRzd2FwUG9pbnRzKHRoaXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZGVsZXRlQ2hhcmFjdGVyKGlzQmFja3dhcmQpIHtcbiAgICBpZiAodGhpcy5pc0NvbGxhcHNlZCgpKSB7XG4gICAgICBjb25zdCBhbmNob3IgPSB0aGlzLmFuY2hvcjtcbiAgICAgIGNvbnN0IGZvY3VzID0gdGhpcy5mb2N1cztcbiAgICAgIGxldCBhbmNob3JOb2RlID0gYW5jaG9yLmdldE5vZGUoKTtcblxuICAgICAgaWYgKCFpc0JhY2t3YXJkICYmICggLy8gRGVsZXRlIGZvcndhcmQgaGFuZGxlIGNhc2VcbiAgICAgICAgYW5jaG9yLnR5cGUgPT09ICdlbGVtZW50JyAmJiAkaXNFbGVtZW50Tm9kZShhbmNob3JOb2RlKSAmJiBhbmNob3Iub2Zmc2V0ID09PSBhbmNob3JOb2RlLmdldENoaWxkcmVuU2l6ZSgpIHx8IGFuY2hvci50eXBlID09PSAndGV4dCcgJiYgYW5jaG9yLm9mZnNldCA9PT0gYW5jaG9yTm9kZS5nZXRUZXh0Q29udGVudFNpemUoKSkpIHtcbiAgICAgICAgY29uc3QgcGFyZW50ID0gYW5jaG9yTm9kZS5nZXRQYXJlbnQoKTtcbiAgICAgICAgY29uc3QgbmV4dFNpYmxpbmcgPSBhbmNob3JOb2RlLmdldE5leHRTaWJsaW5nKCkgfHwgKHBhcmVudCA9PT0gbnVsbCA/IG51bGwgOiBwYXJlbnQuZ2V0TmV4dFNpYmxpbmcoKSk7XG5cbiAgICAgICAgaWYgKCRpc0VsZW1lbnROb2RlKG5leHRTaWJsaW5nKSAmJiAhbmV4dFNpYmxpbmcuY2FuRXh0cmFjdENvbnRlbnRzKCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH0gLy8gSGFuZGxlIHRoZSBkZWxldGlvbiBhcm91bmQgZGVjb3JhdG9ycy5cblxuXG4gICAgICBjb25zdCBwb3NzaWJsZU5vZGUgPSAkZ2V0QWRqYWNlbnROb2RlKGZvY3VzLCBpc0JhY2t3YXJkKTtcblxuICAgICAgaWYgKCRpc0RlY29yYXRvck5vZGUocG9zc2libGVOb2RlKSAmJiAhcG9zc2libGVOb2RlLmlzSXNvbGF0ZWQoKSkge1xuICAgICAgICAvLyBNYWtlIGl0IHBvc3NpYmxlIHRvIG1vdmUgc2VsZWN0aW9uIGZyb20gcmFuZ2Ugc2VsZWN0aW9uIHRvXG4gICAgICAgIC8vIG5vZGUgc2VsZWN0aW9uIG9uIHRoZSBub2RlLlxuICAgICAgICBpZiAocG9zc2libGVOb2RlLmlzS2V5Ym9hcmRTZWxlY3RhYmxlKCkgJiYgJGlzRWxlbWVudE5vZGUoYW5jaG9yTm9kZSkgJiYgYW5jaG9yTm9kZS5nZXRDaGlsZHJlblNpemUoKSA9PT0gMCkge1xuICAgICAgICAgIGFuY2hvck5vZGUucmVtb3ZlKCk7XG4gICAgICAgICAgY29uc3Qgbm9kZVNlbGVjdGlvbiA9ICRjcmVhdGVOb2RlU2VsZWN0aW9uKCk7XG4gICAgICAgICAgbm9kZVNlbGVjdGlvbi5hZGQocG9zc2libGVOb2RlLl9fa2V5KTtcbiAgICAgICAgICAkc2V0U2VsZWN0aW9uKG5vZGVTZWxlY3Rpb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBvc3NpYmxlTm9kZS5yZW1vdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5tb2RpZnkoJ2V4dGVuZCcsIGlzQmFja3dhcmQsICdjaGFyYWN0ZXInKTtcblxuICAgICAgaWYgKCF0aGlzLmlzQ29sbGFwc2VkKCkpIHtcbiAgICAgICAgY29uc3QgZm9jdXNOb2RlID0gZm9jdXMudHlwZSA9PT0gJ3RleHQnID8gZm9jdXMuZ2V0Tm9kZSgpIDogbnVsbDtcbiAgICAgICAgYW5jaG9yTm9kZSA9IGFuY2hvci50eXBlID09PSAndGV4dCcgPyBhbmNob3IuZ2V0Tm9kZSgpIDogbnVsbDtcblxuICAgICAgICBpZiAoZm9jdXNOb2RlICE9PSBudWxsICYmIGZvY3VzTm9kZS5pc1NlZ21lbnRlZCgpKSB7XG4gICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gZm9jdXMub2Zmc2V0O1xuICAgICAgICAgIGNvbnN0IHRleHRDb250ZW50U2l6ZSA9IGZvY3VzTm9kZS5nZXRUZXh0Q29udGVudFNpemUoKTtcblxuICAgICAgICAgIGlmIChmb2N1c05vZGUuaXMoYW5jaG9yTm9kZSkgfHwgaXNCYWNrd2FyZCAmJiBvZmZzZXQgIT09IHRleHRDb250ZW50U2l6ZSB8fCAhaXNCYWNrd2FyZCAmJiBvZmZzZXQgIT09IDApIHtcbiAgICAgICAgICAgICRyZW1vdmVTZWdtZW50KGZvY3VzTm9kZSwgaXNCYWNrd2FyZCwgb2Zmc2V0KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoYW5jaG9yTm9kZSAhPT0gbnVsbCAmJiBhbmNob3JOb2RlLmlzU2VnbWVudGVkKCkpIHtcbiAgICAgICAgICBjb25zdCBvZmZzZXQgPSBhbmNob3Iub2Zmc2V0O1xuICAgICAgICAgIGNvbnN0IHRleHRDb250ZW50U2l6ZSA9IGFuY2hvck5vZGUuZ2V0VGV4dENvbnRlbnRTaXplKCk7XG5cbiAgICAgICAgICBpZiAoYW5jaG9yTm9kZS5pcyhmb2N1c05vZGUpIHx8IGlzQmFja3dhcmQgJiYgb2Zmc2V0ICE9PSAwIHx8ICFpc0JhY2t3YXJkICYmIG9mZnNldCAhPT0gdGV4dENvbnRlbnRTaXplKSB7XG4gICAgICAgICAgICAkcmVtb3ZlU2VnbWVudChhbmNob3JOb2RlLCBpc0JhY2t3YXJkLCBvZmZzZXQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgICR1cGRhdGVDYXJldFNlbGVjdGlvbkZvclVuaWNvZGVDaGFyYWN0ZXIodGhpcywgaXNCYWNrd2FyZCk7XG4gICAgICB9IGVsc2UgaWYgKGlzQmFja3dhcmQgJiYgYW5jaG9yLm9mZnNldCA9PT0gMCkge1xuICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGFyb3VuZCByaWNoIHRleHQgbm9kZXNcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGFuY2hvci50eXBlID09PSAnZWxlbWVudCcgPyBhbmNob3IuZ2V0Tm9kZSgpIDogYW5jaG9yLmdldE5vZGUoKS5nZXRQYXJlbnRPclRocm93KCk7XG5cbiAgICAgICAgaWYgKGVsZW1lbnQuY29sbGFwc2VBdFN0YXJ0KHRoaXMpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgd2FzQ29sbGFwc2VkID0gdGhpcy5pc0NvbGxhcHNlZCgpO1xuICAgIHRoaXMucmVtb3ZlVGV4dCgpO1xuXG4gICAgaWYgKGlzQmFja3dhcmQgJiYgIXdhc0NvbGxhcHNlZCAmJiB0aGlzLmlzQ29sbGFwc2VkKCkgJiYgdGhpcy5hbmNob3IudHlwZSA9PT0gJ2VsZW1lbnQnICYmIHRoaXMuYW5jaG9yLm9mZnNldCA9PT0gMCkge1xuICAgICAgY29uc3QgYW5jaG9yTm9kZSA9IHRoaXMuYW5jaG9yLmdldE5vZGUoKTtcblxuICAgICAgaWYgKGFuY2hvck5vZGUuaXNFbXB0eSgpICYmICRpc1Jvb3ROb2RlKGFuY2hvck5vZGUuZ2V0UGFyZW50KCkpICYmIGFuY2hvck5vZGUuZ2V0SW5kZXhXaXRoaW5QYXJlbnQoKSA9PT0gMCkge1xuICAgICAgICBhbmNob3JOb2RlLmNvbGxhcHNlQXRTdGFydCh0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBkZWxldGVMaW5lKGlzQmFja3dhcmQpIHtcbiAgICBpZiAodGhpcy5pc0NvbGxhcHNlZCgpKSB7XG4gICAgICBpZiAodGhpcy5hbmNob3IudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgIHRoaXMubW9kaWZ5KCdleHRlbmQnLCBpc0JhY2t3YXJkLCAnbGluZWJvdW5kYXJ5Jyk7XG4gICAgICB9IC8vIElmIHNlbGVjdGlvbiBpcyBleHRlbmRlZCB0byBjb3ZlciB0ZXh0IGVkZ2UgdGhlbiBleHRlbmQgaXQgb25lIGNoYXJhY3RlciBtb3JlXG4gICAgICAvLyB0byBkZWxldGUgaXRzIHBhcmVudCBlbGVtZW50LiBPdGhlcndpc2UgdGV4dCBjb250ZW50IHdpbGwgYmUgZGVsZXRlZCBidXQgZW1wdHlcbiAgICAgIC8vIHBhcmVudCBub2RlIHdpbGwgcmVtYWluXG5cblxuICAgICAgY29uc3QgZW5kUG9pbnQgPSBpc0JhY2t3YXJkID8gdGhpcy5mb2N1cyA6IHRoaXMuYW5jaG9yO1xuXG4gICAgICBpZiAoZW5kUG9pbnQub2Zmc2V0ID09PSAwKSB7XG4gICAgICAgIHRoaXMubW9kaWZ5KCdleHRlbmQnLCBpc0JhY2t3YXJkLCAnY2hhcmFjdGVyJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5yZW1vdmVUZXh0KCk7XG4gIH1cblxuICBkZWxldGVXb3JkKGlzQmFja3dhcmQpIHtcbiAgICBpZiAodGhpcy5pc0NvbGxhcHNlZCgpKSB7XG4gICAgICB0aGlzLm1vZGlmeSgnZXh0ZW5kJywgaXNCYWNrd2FyZCwgJ3dvcmQnKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlbW92ZVRleHQoKTtcbiAgfVxuXG59XG5mdW5jdGlvbiAkaXNOb2RlU2VsZWN0aW9uKHgpIHtcbiAgcmV0dXJuIHggaW5zdGFuY2VvZiBOb2RlU2VsZWN0aW9uO1xufVxuXG5mdW5jdGlvbiBnZXRDaGFyYWN0ZXJPZmZzZXQocG9pbnQpIHtcbiAgY29uc3Qgb2Zmc2V0ID0gcG9pbnQub2Zmc2V0O1xuXG4gIGlmIChwb2ludC50eXBlID09PSAndGV4dCcpIHtcbiAgICByZXR1cm4gb2Zmc2V0O1xuICB9XG5cbiAgY29uc3QgcGFyZW50ID0gcG9pbnQuZ2V0Tm9kZSgpO1xuICByZXR1cm4gb2Zmc2V0ID09PSBwYXJlbnQuZ2V0Q2hpbGRyZW5TaXplKCkgPyBwYXJlbnQuZ2V0VGV4dENvbnRlbnQoKS5sZW5ndGggOiAwO1xufVxuXG5mdW5jdGlvbiBnZXRDaGFyYWN0ZXJPZmZzZXRzKHNlbGVjdGlvbikge1xuICBjb25zdCBhbmNob3IgPSBzZWxlY3Rpb24uYW5jaG9yO1xuICBjb25zdCBmb2N1cyA9IHNlbGVjdGlvbi5mb2N1cztcblxuICBpZiAoYW5jaG9yLnR5cGUgPT09ICdlbGVtZW50JyAmJiBmb2N1cy50eXBlID09PSAnZWxlbWVudCcgJiYgYW5jaG9yLmtleSA9PT0gZm9jdXMua2V5ICYmIGFuY2hvci5vZmZzZXQgPT09IGZvY3VzLm9mZnNldCkge1xuICAgIHJldHVybiBbMCwgMF07XG4gIH1cblxuICByZXR1cm4gW2dldENoYXJhY3Rlck9mZnNldChhbmNob3IpLCBnZXRDaGFyYWN0ZXJPZmZzZXQoZm9jdXMpXTtcbn1cblxuZnVuY3Rpb24gJHN3YXBQb2ludHMoc2VsZWN0aW9uKSB7XG4gIGNvbnN0IGZvY3VzID0gc2VsZWN0aW9uLmZvY3VzO1xuICBjb25zdCBhbmNob3IgPSBzZWxlY3Rpb24uYW5jaG9yO1xuICBjb25zdCBhbmNob3JLZXkgPSBhbmNob3Iua2V5O1xuICBjb25zdCBhbmNob3JPZmZzZXQgPSBhbmNob3Iub2Zmc2V0O1xuICBjb25zdCBhbmNob3JUeXBlID0gYW5jaG9yLnR5cGU7XG4gICRzZXRQb2ludFZhbHVlcyhhbmNob3IsIGZvY3VzLmtleSwgZm9jdXMub2Zmc2V0LCBmb2N1cy50eXBlKTtcbiAgJHNldFBvaW50VmFsdWVzKGZvY3VzLCBhbmNob3JLZXksIGFuY2hvck9mZnNldCwgYW5jaG9yVHlwZSk7XG4gIHNlbGVjdGlvbi5fY2FjaGVkTm9kZXMgPSBudWxsO1xufVxuXG5mdW5jdGlvbiBtb3ZlTmF0aXZlU2VsZWN0aW9uKGRvbVNlbGVjdGlvbiwgYWx0ZXIsIGRpcmVjdGlvbiwgZ3JhbnVsYXJpdHkpIHtcbiAgLy8gQHRzLWV4cGVjdC1lcnJvciBTZWxlY3Rpb24ubW9kaWZ5KCkgbWV0aG9kIGFwcGxpZXMgYSBjaGFuZ2UgdG8gdGhlIGN1cnJlbnQgc2VsZWN0aW9uIG9yIGN1cnNvciBwb3NpdGlvbixcbiAgLy8gYnV0IGlzIHN0aWxsIG5vbi1zdGFuZGFyZCBpbiBzb21lIGJyb3dzZXJzLlxuICBkb21TZWxlY3Rpb24ubW9kaWZ5KGFsdGVyLCBkaXJlY3Rpb24sIGdyYW51bGFyaXR5KTtcbn1cblxuZnVuY3Rpb24gJHVwZGF0ZUNhcmV0U2VsZWN0aW9uRm9yVW5pY29kZUNoYXJhY3RlcihzZWxlY3Rpb24sIGlzQmFja3dhcmQpIHtcbiAgY29uc3QgYW5jaG9yID0gc2VsZWN0aW9uLmFuY2hvcjtcbiAgY29uc3QgZm9jdXMgPSBzZWxlY3Rpb24uZm9jdXM7XG4gIGNvbnN0IGFuY2hvck5vZGUgPSBhbmNob3IuZ2V0Tm9kZSgpO1xuICBjb25zdCBmb2N1c05vZGUgPSBmb2N1cy5nZXROb2RlKCk7XG5cbiAgaWYgKGFuY2hvck5vZGUgPT09IGZvY3VzTm9kZSAmJiBhbmNob3IudHlwZSA9PT0gJ3RleHQnICYmIGZvY3VzLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgIC8vIEhhbmRsaW5nIG9mIG11bHRpYnl0ZSBjaGFyYWN0ZXJzXG4gICAgY29uc3QgYW5jaG9yT2Zmc2V0ID0gYW5jaG9yLm9mZnNldDtcbiAgICBjb25zdCBmb2N1c09mZnNldCA9IGZvY3VzLm9mZnNldDtcbiAgICBjb25zdCBpc0JlZm9yZSA9IGFuY2hvck9mZnNldCA8IGZvY3VzT2Zmc2V0O1xuICAgIGNvbnN0IHN0YXJ0T2Zmc2V0ID0gaXNCZWZvcmUgPyBhbmNob3JPZmZzZXQgOiBmb2N1c09mZnNldDtcbiAgICBjb25zdCBlbmRPZmZzZXQgPSBpc0JlZm9yZSA/IGZvY3VzT2Zmc2V0IDogYW5jaG9yT2Zmc2V0O1xuICAgIGNvbnN0IGNoYXJhY3Rlck9mZnNldCA9IGVuZE9mZnNldCAtIDE7XG5cbiAgICBpZiAoc3RhcnRPZmZzZXQgIT09IGNoYXJhY3Rlck9mZnNldCkge1xuICAgICAgY29uc3QgdGV4dCA9IGFuY2hvck5vZGUuZ2V0VGV4dENvbnRlbnQoKS5zbGljZShzdGFydE9mZnNldCwgZW5kT2Zmc2V0KTtcblxuICAgICAgaWYgKCFkb2VzQ29udGFpbkdyYXBoZW1lKHRleHQpKSB7XG4gICAgICAgIGlmIChpc0JhY2t3YXJkKSB7XG4gICAgICAgICAgZm9jdXMub2Zmc2V0ID0gY2hhcmFjdGVyT2Zmc2V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFuY2hvci5vZmZzZXQgPSBjaGFyYWN0ZXJPZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gJHJlbW92ZVNlZ21lbnQobm9kZSwgaXNCYWNrd2FyZCwgb2Zmc2V0KSB7XG4gIGNvbnN0IHRleHROb2RlID0gbm9kZTtcbiAgY29uc3QgdGV4dENvbnRlbnQgPSB0ZXh0Tm9kZS5nZXRUZXh0Q29udGVudCgpO1xuICBjb25zdCBzcGxpdCA9IHRleHRDb250ZW50LnNwbGl0KC8oPz1cXHMpL2cpO1xuICBjb25zdCBzcGxpdExlbmd0aCA9IHNwbGl0Lmxlbmd0aDtcbiAgbGV0IHNlZ21lbnRPZmZzZXQgPSAwO1xuICBsZXQgcmVzdG9yZU9mZnNldCA9IDA7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcGxpdExlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgdGV4dCA9IHNwbGl0W2ldO1xuICAgIGNvbnN0IGlzTGFzdCA9IGkgPT09IHNwbGl0TGVuZ3RoIC0gMTtcbiAgICByZXN0b3JlT2Zmc2V0ID0gc2VnbWVudE9mZnNldDtcbiAgICBzZWdtZW50T2Zmc2V0ICs9IHRleHQubGVuZ3RoO1xuXG4gICAgaWYgKGlzQmFja3dhcmQgJiYgc2VnbWVudE9mZnNldCA9PT0gb2Zmc2V0IHx8IHNlZ21lbnRPZmZzZXQgPiBvZmZzZXQgfHwgaXNMYXN0KSB7XG4gICAgICBzcGxpdC5zcGxpY2UoaSwgMSk7XG5cbiAgICAgIGlmIChpc0xhc3QpIHtcbiAgICAgICAgcmVzdG9yZU9mZnNldCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgbmV4dFRleHRDb250ZW50ID0gc3BsaXQuam9pbignJykudHJpbSgpO1xuXG4gIGlmIChuZXh0VGV4dENvbnRlbnQgPT09ICcnKSB7XG4gICAgdGV4dE5vZGUucmVtb3ZlKCk7XG4gIH0gZWxzZSB7XG4gICAgdGV4dE5vZGUuc2V0VGV4dENvbnRlbnQobmV4dFRleHRDb250ZW50KTtcbiAgICB0ZXh0Tm9kZS5zZWxlY3QocmVzdG9yZU9mZnNldCwgcmVzdG9yZU9mZnNldCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2hvdWxkUmVzb2x2ZUFuY2VzdG9yKHJlc29sdmVkRWxlbWVudCwgcmVzb2x2ZWRPZmZzZXQsIGxhc3RQb2ludCkge1xuICBjb25zdCBwYXJlbnQgPSByZXNvbHZlZEVsZW1lbnQuZ2V0UGFyZW50KCk7XG4gIHJldHVybiBsYXN0UG9pbnQgPT09IG51bGwgfHwgcGFyZW50ID09PSBudWxsIHx8ICFwYXJlbnQuY2FuQmVFbXB0eSgpIHx8IHBhcmVudCAhPT0gbGFzdFBvaW50LmdldE5vZGUoKTtcbn1cblxuZnVuY3Rpb24gaW50ZXJuYWxSZXNvbHZlU2VsZWN0aW9uUG9pbnQoZG9tLCBvZmZzZXQsIGxhc3RQb2ludCwgZWRpdG9yKSB7XG4gIGxldCByZXNvbHZlZE9mZnNldCA9IG9mZnNldDtcbiAgbGV0IHJlc29sdmVkTm9kZTsgLy8gSWYgd2UgaGF2ZSBzZWxlY3Rpb24gb24gYW4gZWxlbWVudCwgd2Ugd2lsbFxuICAvLyBuZWVkIHRvIGZpZ3VyZSBvdXQgKHVzaW5nIHRoZSBvZmZzZXQpIHdoYXQgdGV4dFxuICAvLyBub2RlIHNob3VsZCBiZSBzZWxlY3RlZC5cblxuICBpZiAoZG9tLm5vZGVUeXBlID09PSBET01fRUxFTUVOVF9UWVBFKSB7XG4gICAgLy8gUmVzb2x2ZSBlbGVtZW50IHRvIGEgRWxlbWVudE5vZGUsIG9yIFRleHROb2RlLCBvciBudWxsXG4gICAgbGV0IG1vdmVTZWxlY3Rpb25Ub0VuZCA9IGZhbHNlOyAvLyBHaXZlbiB3ZSdyZSBtb3Zpbmcgc2VsZWN0aW9uIHRvIGFub3RoZXIgbm9kZSwgc2VsZWN0aW9uIGlzXG4gICAgLy8gZGVmaW5pdGVseSBkaXJ0eS5cbiAgICAvLyBXZSB1c2UgdGhlIGFuY2hvciB0byBmaW5kIHdoaWNoIGNoaWxkIG5vZGUgdG8gc2VsZWN0XG5cbiAgICBjb25zdCBjaGlsZE5vZGVzID0gZG9tLmNoaWxkTm9kZXM7XG4gICAgY29uc3QgY2hpbGROb2Rlc0xlbmd0aCA9IGNoaWxkTm9kZXMubGVuZ3RoOyAvLyBJZiB0aGUgYW5jaG9yIGlzIHRoZSBzYW1lIGFzIGxlbmd0aCwgdGhlbiB0aGlzIG1lYW5zIHdlXG4gICAgLy8gbmVlZCB0byBzZWxlY3QgdGhlIHZlcnkgbGFzdCB0ZXh0IG5vZGUuXG5cbiAgICBpZiAocmVzb2x2ZWRPZmZzZXQgPT09IGNoaWxkTm9kZXNMZW5ndGgpIHtcbiAgICAgIG1vdmVTZWxlY3Rpb25Ub0VuZCA9IHRydWU7XG4gICAgICByZXNvbHZlZE9mZnNldCA9IGNoaWxkTm9kZXNMZW5ndGggLSAxO1xuICAgIH1cblxuICAgIGxldCBjaGlsZERPTSA9IGNoaWxkTm9kZXNbcmVzb2x2ZWRPZmZzZXRdO1xuICAgIGxldCBoYXNCbG9ja0N1cnNvciA9IGZhbHNlO1xuXG4gICAgaWYgKGNoaWxkRE9NID09PSBlZGl0b3IuX2Jsb2NrQ3Vyc29yRWxlbWVudCkge1xuICAgICAgY2hpbGRET00gPSBjaGlsZE5vZGVzW3Jlc29sdmVkT2Zmc2V0ICsgMV07XG4gICAgICBoYXNCbG9ja0N1cnNvciA9IHRydWU7XG4gICAgfSBlbHNlIGlmIChlZGl0b3IuX2Jsb2NrQ3Vyc29yRWxlbWVudCAhPT0gbnVsbCkge1xuICAgICAgcmVzb2x2ZWRPZmZzZXQtLTtcbiAgICB9XG5cbiAgICByZXNvbHZlZE5vZGUgPSBnZXROb2RlRnJvbURPTShjaGlsZERPTSk7XG5cbiAgICBpZiAoJGlzVGV4dE5vZGUocmVzb2x2ZWROb2RlKSkge1xuICAgICAgcmVzb2x2ZWRPZmZzZXQgPSBnZXRUZXh0Tm9kZU9mZnNldChyZXNvbHZlZE5vZGUsIG1vdmVTZWxlY3Rpb25Ub0VuZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCByZXNvbHZlZEVsZW1lbnQgPSBnZXROb2RlRnJvbURPTShkb20pOyAvLyBFbnN1cmUgcmVzb2x2ZWRFbGVtZW50IGlzIGFjdHVhbGx5IGEgZWxlbWVudC5cblxuICAgICAgaWYgKHJlc29sdmVkRWxlbWVudCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKCRpc0VsZW1lbnROb2RlKHJlc29sdmVkRWxlbWVudCkpIHtcbiAgICAgICAgbGV0IGNoaWxkID0gcmVzb2x2ZWRFbGVtZW50LmdldENoaWxkQXRJbmRleChyZXNvbHZlZE9mZnNldCk7XG5cbiAgICAgICAgaWYgKCRpc0VsZW1lbnROb2RlKGNoaWxkKSAmJiBzaG91bGRSZXNvbHZlQW5jZXN0b3IoY2hpbGQsIHJlc29sdmVkT2Zmc2V0LCBsYXN0UG9pbnQpKSB7XG4gICAgICAgICAgY29uc3QgZGVzY2VuZGFudCA9IG1vdmVTZWxlY3Rpb25Ub0VuZCA/IGNoaWxkLmdldExhc3REZXNjZW5kYW50KCkgOiBjaGlsZC5nZXRGaXJzdERlc2NlbmRhbnQoKTtcblxuICAgICAgICAgIGlmIChkZXNjZW5kYW50ID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXNvbHZlZEVsZW1lbnQgPSBjaGlsZDtcbiAgICAgICAgICAgIHJlc29sdmVkT2Zmc2V0ID0gMDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hpbGQgPSBkZXNjZW5kYW50O1xuICAgICAgICAgICAgcmVzb2x2ZWRFbGVtZW50ID0gJGlzRWxlbWVudE5vZGUoY2hpbGQpID8gY2hpbGQgOiBjaGlsZC5nZXRQYXJlbnRPclRocm93KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCRpc1RleHROb2RlKGNoaWxkKSkge1xuICAgICAgICAgIHJlc29sdmVkTm9kZSA9IGNoaWxkO1xuICAgICAgICAgIHJlc29sdmVkRWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgcmVzb2x2ZWRPZmZzZXQgPSBnZXRUZXh0Tm9kZU9mZnNldChjaGlsZCwgbW92ZVNlbGVjdGlvblRvRW5kKTtcbiAgICAgICAgfSBlbHNlIGlmIChjaGlsZCAhPT0gcmVzb2x2ZWRFbGVtZW50ICYmIG1vdmVTZWxlY3Rpb25Ub0VuZCAmJiAhaGFzQmxvY2tDdXJzb3IpIHtcbiAgICAgICAgICByZXNvbHZlZE9mZnNldCsrO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBpbmRleCA9IHJlc29sdmVkRWxlbWVudC5nZXRJbmRleFdpdGhpblBhcmVudCgpOyAvLyBXaGVuIHNlbGVjdGluZyBkZWNvcmF0b3JzLCB0aGVyZSBjYW4gYmUgc29tZSBzZWxlY3Rpb24gaXNzdWVzIHdoZW4gdXNpbmcgcmVzb2x2ZWRPZmZzZXQsXG4gICAgICAgIC8vIGFuZCBpbnN0ZWFkIHdlIHNob3VsZCBiZSBjaGVja2luZyBpZiB3ZSdyZSB1c2luZyB0aGUgb2Zmc2V0XG5cbiAgICAgICAgaWYgKG9mZnNldCA9PT0gMCAmJiAkaXNEZWNvcmF0b3JOb2RlKHJlc29sdmVkRWxlbWVudCkgJiYgZ2V0Tm9kZUZyb21ET00oZG9tKSA9PT0gcmVzb2x2ZWRFbGVtZW50KSB7XG4gICAgICAgICAgcmVzb2x2ZWRPZmZzZXQgPSBpbmRleDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlZE9mZnNldCA9IGluZGV4ICsgMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc29sdmVkRWxlbWVudCA9IHJlc29sdmVkRWxlbWVudC5nZXRQYXJlbnRPclRocm93KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICgkaXNFbGVtZW50Tm9kZShyZXNvbHZlZEVsZW1lbnQpKSB7XG4gICAgICAgIHJldHVybiAkY3JlYXRlUG9pbnQocmVzb2x2ZWRFbGVtZW50Ll9fa2V5LCByZXNvbHZlZE9mZnNldCwgJ2VsZW1lbnQnKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gVGV4dE5vZGUgb3IgbnVsbFxuICAgIHJlc29sdmVkTm9kZSA9IGdldE5vZGVGcm9tRE9NKGRvbSk7XG4gIH1cblxuICBpZiAoISRpc1RleHROb2RlKHJlc29sdmVkTm9kZSkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiAkY3JlYXRlUG9pbnQocmVzb2x2ZWROb2RlLl9fa2V5LCByZXNvbHZlZE9mZnNldCwgJ3RleHQnKTtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZVNlbGVjdGlvblBvaW50T25Cb3VuZGFyeShwb2ludCwgaXNCYWNrd2FyZCwgaXNDb2xsYXBzZWQpIHtcbiAgY29uc3Qgb2Zmc2V0ID0gcG9pbnQub2Zmc2V0O1xuICBjb25zdCBub2RlID0gcG9pbnQuZ2V0Tm9kZSgpO1xuXG4gIGlmIChvZmZzZXQgPT09IDApIHtcbiAgICBjb25zdCBwcmV2U2libGluZyA9IG5vZGUuZ2V0UHJldmlvdXNTaWJsaW5nKCk7XG4gICAgY29uc3QgcGFyZW50ID0gbm9kZS5nZXRQYXJlbnQoKTtcblxuICAgIGlmICghaXNCYWNrd2FyZCkge1xuICAgICAgaWYgKCRpc0VsZW1lbnROb2RlKHByZXZTaWJsaW5nKSAmJiAhaXNDb2xsYXBzZWQgJiYgcHJldlNpYmxpbmcuaXNJbmxpbmUoKSkge1xuICAgICAgICBwb2ludC5rZXkgPSBwcmV2U2libGluZy5fX2tleTtcbiAgICAgICAgcG9pbnQub2Zmc2V0ID0gcHJldlNpYmxpbmcuZ2V0Q2hpbGRyZW5TaXplKCk7IC8vIEB0cy1leHBlY3QtZXJyb3I6IGludGVudGlvbmFsXG5cbiAgICAgICAgcG9pbnQudHlwZSA9ICdlbGVtZW50JztcbiAgICAgIH0gZWxzZSBpZiAoJGlzVGV4dE5vZGUocHJldlNpYmxpbmcpKSB7XG4gICAgICAgIHBvaW50LmtleSA9IHByZXZTaWJsaW5nLl9fa2V5O1xuICAgICAgICBwb2ludC5vZmZzZXQgPSBwcmV2U2libGluZy5nZXRUZXh0Q29udGVudCgpLmxlbmd0aDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKChpc0NvbGxhcHNlZCB8fCAhaXNCYWNrd2FyZCkgJiYgcHJldlNpYmxpbmcgPT09IG51bGwgJiYgJGlzRWxlbWVudE5vZGUocGFyZW50KSAmJiBwYXJlbnQuaXNJbmxpbmUoKSkge1xuICAgICAgY29uc3QgcGFyZW50U2libGluZyA9IHBhcmVudC5nZXRQcmV2aW91c1NpYmxpbmcoKTtcblxuICAgICAgaWYgKCRpc1RleHROb2RlKHBhcmVudFNpYmxpbmcpKSB7XG4gICAgICAgIHBvaW50LmtleSA9IHBhcmVudFNpYmxpbmcuX19rZXk7XG4gICAgICAgIHBvaW50Lm9mZnNldCA9IHBhcmVudFNpYmxpbmcuZ2V0VGV4dENvbnRlbnQoKS5sZW5ndGg7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKG9mZnNldCA9PT0gbm9kZS5nZXRUZXh0Q29udGVudCgpLmxlbmd0aCkge1xuICAgIGNvbnN0IG5leHRTaWJsaW5nID0gbm9kZS5nZXROZXh0U2libGluZygpO1xuICAgIGNvbnN0IHBhcmVudCA9IG5vZGUuZ2V0UGFyZW50KCk7XG5cbiAgICBpZiAoaXNCYWNrd2FyZCAmJiAkaXNFbGVtZW50Tm9kZShuZXh0U2libGluZykgJiYgbmV4dFNpYmxpbmcuaXNJbmxpbmUoKSkge1xuICAgICAgcG9pbnQua2V5ID0gbmV4dFNpYmxpbmcuX19rZXk7XG4gICAgICBwb2ludC5vZmZzZXQgPSAwOyAvLyBAdHMtZXhwZWN0LWVycm9yOiBpbnRlbnRpb25hbFxuXG4gICAgICBwb2ludC50eXBlID0gJ2VsZW1lbnQnO1xuICAgIH0gZWxzZSBpZiAoKGlzQ29sbGFwc2VkIHx8IGlzQmFja3dhcmQpICYmIG5leHRTaWJsaW5nID09PSBudWxsICYmICRpc0VsZW1lbnROb2RlKHBhcmVudCkgJiYgcGFyZW50LmlzSW5saW5lKCkgJiYgIXBhcmVudC5jYW5JbnNlcnRUZXh0QWZ0ZXIoKSkge1xuICAgICAgY29uc3QgcGFyZW50U2libGluZyA9IHBhcmVudC5nZXROZXh0U2libGluZygpO1xuXG4gICAgICBpZiAoJGlzVGV4dE5vZGUocGFyZW50U2libGluZykpIHtcbiAgICAgICAgcG9pbnQua2V5ID0gcGFyZW50U2libGluZy5fX2tleTtcbiAgICAgICAgcG9pbnQub2Zmc2V0ID0gMDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplU2VsZWN0aW9uUG9pbnRzRm9yQm91bmRhcmllcyhhbmNob3IsIGZvY3VzLCBsYXN0U2VsZWN0aW9uKSB7XG4gIGlmIChhbmNob3IudHlwZSA9PT0gJ3RleHQnICYmIGZvY3VzLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgIGNvbnN0IGlzQmFja3dhcmQgPSBhbmNob3IuaXNCZWZvcmUoZm9jdXMpO1xuICAgIGNvbnN0IGlzQ29sbGFwc2VkID0gYW5jaG9yLmlzKGZvY3VzKTsgLy8gQXR0ZW1wdCB0byBub3JtYWxpemUgdGhlIG9mZnNldCB0byB0aGUgcHJldmlvdXMgc2libGluZyBpZiB3ZSdyZSBhdCB0aGVcbiAgICAvLyBzdGFydCBvZiBhIHRleHQgbm9kZSBhbmQgdGhlIHNpYmxpbmcgaXMgYSB0ZXh0IG5vZGUgb3IgaW5saW5lIGVsZW1lbnQuXG5cbiAgICByZXNvbHZlU2VsZWN0aW9uUG9pbnRPbkJvdW5kYXJ5KGFuY2hvciwgaXNCYWNrd2FyZCwgaXNDb2xsYXBzZWQpO1xuICAgIHJlc29sdmVTZWxlY3Rpb25Qb2ludE9uQm91bmRhcnkoZm9jdXMsICFpc0JhY2t3YXJkLCBpc0NvbGxhcHNlZCk7XG5cbiAgICBpZiAoaXNDb2xsYXBzZWQpIHtcbiAgICAgIGZvY3VzLmtleSA9IGFuY2hvci5rZXk7XG4gICAgICBmb2N1cy5vZmZzZXQgPSBhbmNob3Iub2Zmc2V0O1xuICAgICAgZm9jdXMudHlwZSA9IGFuY2hvci50eXBlO1xuICAgIH1cblxuICAgIGNvbnN0IGVkaXRvciA9IGdldEFjdGl2ZUVkaXRvcigpO1xuXG4gICAgaWYgKGVkaXRvci5pc0NvbXBvc2luZygpICYmIGVkaXRvci5fY29tcG9zaXRpb25LZXkgIT09IGFuY2hvci5rZXkgJiYgJGlzUmFuZ2VTZWxlY3Rpb24obGFzdFNlbGVjdGlvbikpIHtcbiAgICAgIGNvbnN0IGxhc3RBbmNob3IgPSBsYXN0U2VsZWN0aW9uLmFuY2hvcjtcbiAgICAgIGNvbnN0IGxhc3RGb2N1cyA9IGxhc3RTZWxlY3Rpb24uZm9jdXM7XG4gICAgICAkc2V0UG9pbnRWYWx1ZXMoYW5jaG9yLCBsYXN0QW5jaG9yLmtleSwgbGFzdEFuY2hvci5vZmZzZXQsIGxhc3RBbmNob3IudHlwZSk7XG4gICAgICAkc2V0UG9pbnRWYWx1ZXMoZm9jdXMsIGxhc3RGb2N1cy5rZXksIGxhc3RGb2N1cy5vZmZzZXQsIGxhc3RGb2N1cy50eXBlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gaW50ZXJuYWxSZXNvbHZlU2VsZWN0aW9uUG9pbnRzKGFuY2hvckRPTSwgYW5jaG9yT2Zmc2V0LCBmb2N1c0RPTSwgZm9jdXNPZmZzZXQsIGVkaXRvciwgbGFzdFNlbGVjdGlvbikge1xuICBpZiAoYW5jaG9yRE9NID09PSBudWxsIHx8IGZvY3VzRE9NID09PSBudWxsIHx8ICFpc1NlbGVjdGlvbldpdGhpbkVkaXRvcihlZGl0b3IsIGFuY2hvckRPTSwgZm9jdXNET00pKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCByZXNvbHZlZEFuY2hvclBvaW50ID0gaW50ZXJuYWxSZXNvbHZlU2VsZWN0aW9uUG9pbnQoYW5jaG9yRE9NLCBhbmNob3JPZmZzZXQsICRpc1JhbmdlU2VsZWN0aW9uKGxhc3RTZWxlY3Rpb24pID8gbGFzdFNlbGVjdGlvbi5hbmNob3IgOiBudWxsLCBlZGl0b3IpO1xuXG4gIGlmIChyZXNvbHZlZEFuY2hvclBvaW50ID09PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCByZXNvbHZlZEZvY3VzUG9pbnQgPSBpbnRlcm5hbFJlc29sdmVTZWxlY3Rpb25Qb2ludChmb2N1c0RPTSwgZm9jdXNPZmZzZXQsICRpc1JhbmdlU2VsZWN0aW9uKGxhc3RTZWxlY3Rpb24pID8gbGFzdFNlbGVjdGlvbi5mb2N1cyA6IG51bGwsIGVkaXRvcik7XG5cbiAgaWYgKHJlc29sdmVkRm9jdXNQb2ludCA9PT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKHJlc29sdmVkQW5jaG9yUG9pbnQudHlwZSA9PT0gJ2VsZW1lbnQnICYmIHJlc29sdmVkRm9jdXNQb2ludC50eXBlID09PSAnZWxlbWVudCcpIHtcbiAgICBjb25zdCBhbmNob3JOb2RlID0gZ2V0Tm9kZUZyb21ET00oYW5jaG9yRE9NKTtcbiAgICBjb25zdCBmb2N1c05vZGUgPSBnZXROb2RlRnJvbURPTShmb2N1c0RPTSk7IC8vIEVuc3VyZSBpZiB3ZSdyZSBzZWxlY3RpbmcgdGhlIGNvbnRlbnQgb2YgYSBkZWNvcmF0b3IgdGhhdCB3ZVxuICAgIC8vIHJldHVybiBudWxsIGZvciB0aGlzIHBvaW50LCBhcyBpdCdzIG5vdCBpbiB0aGUgY29udHJvbGxlZCBzY29wZVxuICAgIC8vIG9mIExleGljYWwuXG5cbiAgICBpZiAoJGlzRGVjb3JhdG9yTm9kZShhbmNob3JOb2RlKSAmJiAkaXNEZWNvcmF0b3JOb2RlKGZvY3VzTm9kZSkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSAvLyBIYW5kbGUgbm9ybWFsaXphdGlvbiBvZiBzZWxlY3Rpb24gd2hlbiBpdCBpcyBhdCB0aGUgYm91bmRhcmllcy5cblxuXG4gIG5vcm1hbGl6ZVNlbGVjdGlvblBvaW50c0ZvckJvdW5kYXJpZXMocmVzb2x2ZWRBbmNob3JQb2ludCwgcmVzb2x2ZWRGb2N1c1BvaW50LCBsYXN0U2VsZWN0aW9uKTtcbiAgcmV0dXJuIFtyZXNvbHZlZEFuY2hvclBvaW50LCByZXNvbHZlZEZvY3VzUG9pbnRdO1xufVxuXG5mdW5jdGlvbiAkaXNCbG9ja0VsZW1lbnROb2RlKG5vZGUpIHtcbiAgcmV0dXJuICRpc0VsZW1lbnROb2RlKG5vZGUpICYmICFub2RlLmlzSW5saW5lKCk7XG59IC8vIFRoaXMgaXMgdXNlZCB0byBtYWtlIGEgc2VsZWN0aW9uIHdoZW4gdGhlIGV4aXN0aW5nXG4vLyBzZWxlY3Rpb24gaXMgbnVsbCwgaS5lLiBmb3JjaW5nIHNlbGVjdGlvbiBvbiB0aGUgZWRpdG9yXG4vLyB3aGVuIGl0IGN1cnJlbnQgZXhpc3RzIG91dHNpZGUgdGhlIGVkaXRvci5cblxuXG5mdW5jdGlvbiBpbnRlcm5hbE1ha2VSYW5nZVNlbGVjdGlvbihhbmNob3JLZXksIGFuY2hvck9mZnNldCwgZm9jdXNLZXksIGZvY3VzT2Zmc2V0LCBhbmNob3JUeXBlLCBmb2N1c1R5cGUpIHtcbiAgY29uc3QgZWRpdG9yU3RhdGUgPSBnZXRBY3RpdmVFZGl0b3JTdGF0ZSgpO1xuICBjb25zdCBzZWxlY3Rpb24gPSBuZXcgUmFuZ2VTZWxlY3Rpb24oJGNyZWF0ZVBvaW50KGFuY2hvcktleSwgYW5jaG9yT2Zmc2V0LCBhbmNob3JUeXBlKSwgJGNyZWF0ZVBvaW50KGZvY3VzS2V5LCBmb2N1c09mZnNldCwgZm9jdXNUeXBlKSwgMCwgJycpO1xuICBzZWxlY3Rpb24uZGlydHkgPSB0cnVlO1xuICBlZGl0b3JTdGF0ZS5fc2VsZWN0aW9uID0gc2VsZWN0aW9uO1xuICByZXR1cm4gc2VsZWN0aW9uO1xufVxuZnVuY3Rpb24gJGNyZWF0ZVJhbmdlU2VsZWN0aW9uKCkge1xuICBjb25zdCBhbmNob3IgPSAkY3JlYXRlUG9pbnQoJ3Jvb3QnLCAwLCAnZWxlbWVudCcpO1xuICBjb25zdCBmb2N1cyA9ICRjcmVhdGVQb2ludCgncm9vdCcsIDAsICdlbGVtZW50Jyk7XG4gIHJldHVybiBuZXcgUmFuZ2VTZWxlY3Rpb24oYW5jaG9yLCBmb2N1cywgMCwgJycpO1xufVxuZnVuY3Rpb24gJGNyZWF0ZU5vZGVTZWxlY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgTm9kZVNlbGVjdGlvbihuZXcgU2V0KCkpO1xufVxuZnVuY3Rpb24gREVQUkVDQVRFRF8kY3JlYXRlR3JpZFNlbGVjdGlvbigpIHtcbiAgY29uc3QgYW5jaG9yID0gJGNyZWF0ZVBvaW50KCdyb290JywgMCwgJ2VsZW1lbnQnKTtcbiAgY29uc3QgZm9jdXMgPSAkY3JlYXRlUG9pbnQoJ3Jvb3QnLCAwLCAnZWxlbWVudCcpO1xuICByZXR1cm4gbmV3IEdyaWRTZWxlY3Rpb24oJ3Jvb3QnLCBhbmNob3IsIGZvY3VzKTtcbn1cbmZ1bmN0aW9uIGludGVybmFsQ3JlYXRlU2VsZWN0aW9uKGVkaXRvcikge1xuICBjb25zdCBjdXJyZW50RWRpdG9yU3RhdGUgPSBlZGl0b3IuZ2V0RWRpdG9yU3RhdGUoKTtcbiAgY29uc3QgbGFzdFNlbGVjdGlvbiA9IGN1cnJlbnRFZGl0b3JTdGF0ZS5fc2VsZWN0aW9uO1xuICBjb25zdCBkb21TZWxlY3Rpb24gPSBnZXRET01TZWxlY3Rpb24oZWRpdG9yLl93aW5kb3cpO1xuXG4gIGlmICgkaXNOb2RlU2VsZWN0aW9uKGxhc3RTZWxlY3Rpb24pIHx8IERFUFJFQ0FURURfJGlzR3JpZFNlbGVjdGlvbihsYXN0U2VsZWN0aW9uKSkge1xuICAgIHJldHVybiBsYXN0U2VsZWN0aW9uLmNsb25lKCk7XG4gIH1cblxuICByZXR1cm4gaW50ZXJuYWxDcmVhdGVSYW5nZVNlbGVjdGlvbihsYXN0U2VsZWN0aW9uLCBkb21TZWxlY3Rpb24sIGVkaXRvcik7XG59XG5mdW5jdGlvbiBpbnRlcm5hbENyZWF0ZVJhbmdlU2VsZWN0aW9uKGxhc3RTZWxlY3Rpb24sIGRvbVNlbGVjdGlvbiwgZWRpdG9yKSB7XG4gIGNvbnN0IHdpbmRvd09iaiA9IGVkaXRvci5fd2luZG93O1xuXG4gIGlmICh3aW5kb3dPYmogPT09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSAvLyBXaGVuIHdlIGNyZWF0ZSBhIHNlbGVjdGlvbiwgd2UgdHJ5IHRvIHVzZSB0aGUgcHJldmlvdXNcbiAgLy8gc2VsZWN0aW9uIHdoZXJlIHBvc3NpYmxlLCB1bmxlc3MgYW4gYWN0dWFsIHVzZXIgc2VsZWN0aW9uXG4gIC8vIGNoYW5nZSBoYXMgb2NjdXJyZWQuIFdoZW4gd2UgZG8gbmVlZCB0byBjcmVhdGUgYSBuZXcgc2VsZWN0aW9uXG4gIC8vIHdlIHZhbGlkYXRlIHdlIGNhbiBoYXZlIHRleHQgbm9kZXMgZm9yIGJvdGggYW5jaG9yIGFuZCBmb2N1c1xuICAvLyBub2Rlcy4gSWYgdGhhdCBob2xkcyB0cnVlLCB3ZSB0aGVuIHJldHVybiB0aGF0IHNlbGVjdGlvblxuICAvLyBhcyBhIG11dGFibGUgb2JqZWN0IHRoYXQgd2UgdXNlIGZvciB0aGUgZWRpdG9yIHN0YXRlIGZvciB0aGlzXG4gIC8vIHVwZGF0ZSBjeWNsZS4gSWYgYSBzZWxlY3Rpb24gZ2V0cyBjaGFuZ2VkLCBhbmQgcmVxdWlyZXMgYVxuICAvLyB1cGRhdGUgdG8gbmF0aXZlIERPTSBzZWxlY3Rpb24sIGl0IGdldHMgbWFya2VkIGFzIFwiZGlydHlcIi5cbiAgLy8gSWYgdGhlIHNlbGVjdGlvbiBjaGFuZ2VzLCBidXQgbWF0Y2hlcyB3aXRoIHRoZSBleGlzdGluZ1xuICAvLyBET00gc2VsZWN0aW9uLCB0aGVuIHdlIG9ubHkgbmVlZCB0byBzeW5jIGl0LiBPdGhlcndpc2UsXG4gIC8vIHdlIGdlbmVyYWxseSBiYWlsIG91dCBvZiBkb2luZyBhbiB1cGRhdGUgdG8gc2VsZWN0aW9uIGR1cmluZ1xuICAvLyByZWNvbmNpbGlhdGlvbiB1bmxlc3MgdGhlcmUgYXJlIGRpcnR5IG5vZGVzIHRoYXQgbmVlZFxuICAvLyByZWNvbmNpbGluZy5cblxuXG4gIGNvbnN0IHdpbmRvd0V2ZW50ID0gd2luZG93T2JqLmV2ZW50O1xuICBjb25zdCBldmVudFR5cGUgPSB3aW5kb3dFdmVudCA/IHdpbmRvd0V2ZW50LnR5cGUgOiB1bmRlZmluZWQ7XG4gIGNvbnN0IGlzU2VsZWN0aW9uQ2hhbmdlID0gZXZlbnRUeXBlID09PSAnc2VsZWN0aW9uY2hhbmdlJztcbiAgY29uc3QgdXNlRE9NU2VsZWN0aW9uID0gIWdldElzUHJvY2Vzc3NpbmdNdXRhdGlvbnMoKSAmJiAoaXNTZWxlY3Rpb25DaGFuZ2UgfHwgZXZlbnRUeXBlID09PSAnYmVmb3JlaW5wdXQnIHx8IGV2ZW50VHlwZSA9PT0gJ2NvbXBvc2l0aW9uc3RhcnQnIHx8IGV2ZW50VHlwZSA9PT0gJ2NvbXBvc2l0aW9uZW5kJyB8fCBldmVudFR5cGUgPT09ICdjbGljaycgJiYgd2luZG93RXZlbnQgJiYgd2luZG93RXZlbnQuZGV0YWlsID09PSAzIHx8IGV2ZW50VHlwZSA9PT0gJ2Ryb3AnIHx8IGV2ZW50VHlwZSA9PT0gdW5kZWZpbmVkKTtcbiAgbGV0IGFuY2hvckRPTSwgZm9jdXNET00sIGFuY2hvck9mZnNldCwgZm9jdXNPZmZzZXQ7XG5cbiAgaWYgKCEkaXNSYW5nZVNlbGVjdGlvbihsYXN0U2VsZWN0aW9uKSB8fCB1c2VET01TZWxlY3Rpb24pIHtcbiAgICBpZiAoZG9tU2VsZWN0aW9uID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBhbmNob3JET00gPSBkb21TZWxlY3Rpb24uYW5jaG9yTm9kZTtcbiAgICBmb2N1c0RPTSA9IGRvbVNlbGVjdGlvbi5mb2N1c05vZGU7XG4gICAgYW5jaG9yT2Zmc2V0ID0gZG9tU2VsZWN0aW9uLmFuY2hvck9mZnNldDtcbiAgICBmb2N1c09mZnNldCA9IGRvbVNlbGVjdGlvbi5mb2N1c09mZnNldDtcblxuICAgIGlmIChpc1NlbGVjdGlvbkNoYW5nZSAmJiAkaXNSYW5nZVNlbGVjdGlvbihsYXN0U2VsZWN0aW9uKSAmJiAhaXNTZWxlY3Rpb25XaXRoaW5FZGl0b3IoZWRpdG9yLCBhbmNob3JET00sIGZvY3VzRE9NKSkge1xuICAgICAgcmV0dXJuIGxhc3RTZWxlY3Rpb24uY2xvbmUoKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGxhc3RTZWxlY3Rpb24uY2xvbmUoKTtcbiAgfSAvLyBMZXQncyByZXNvbHZlIHRoZSB0ZXh0IG5vZGVzIGZyb20gdGhlIG9mZnNldHMgYW5kIERPTSBub2RlcyB3ZSBoYXZlIGZyb21cbiAgLy8gbmF0aXZlIHNlbGVjdGlvbi5cblxuXG4gIGNvbnN0IHJlc29sdmVkU2VsZWN0aW9uUG9pbnRzID0gaW50ZXJuYWxSZXNvbHZlU2VsZWN0aW9uUG9pbnRzKGFuY2hvckRPTSwgYW5jaG9yT2Zmc2V0LCBmb2N1c0RPTSwgZm9jdXNPZmZzZXQsIGVkaXRvciwgbGFzdFNlbGVjdGlvbik7XG5cbiAgaWYgKHJlc29sdmVkU2VsZWN0aW9uUG9pbnRzID09PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBbcmVzb2x2ZWRBbmNob3JQb2ludCwgcmVzb2x2ZWRGb2N1c1BvaW50XSA9IHJlc29sdmVkU2VsZWN0aW9uUG9pbnRzO1xuICByZXR1cm4gbmV3IFJhbmdlU2VsZWN0aW9uKHJlc29sdmVkQW5jaG9yUG9pbnQsIHJlc29sdmVkRm9jdXNQb2ludCwgISRpc1JhbmdlU2VsZWN0aW9uKGxhc3RTZWxlY3Rpb24pID8gMCA6IGxhc3RTZWxlY3Rpb24uZm9ybWF0LCAhJGlzUmFuZ2VTZWxlY3Rpb24obGFzdFNlbGVjdGlvbikgPyAnJyA6IGxhc3RTZWxlY3Rpb24uc3R5bGUpO1xufVxuZnVuY3Rpb24gJGdldFNlbGVjdGlvbigpIHtcbiAgY29uc3QgZWRpdG9yU3RhdGUgPSBnZXRBY3RpdmVFZGl0b3JTdGF0ZSgpO1xuICByZXR1cm4gZWRpdG9yU3RhdGUuX3NlbGVjdGlvbjtcbn1cbmZ1bmN0aW9uICRnZXRQcmV2aW91c1NlbGVjdGlvbigpIHtcbiAgY29uc3QgZWRpdG9yID0gZ2V0QWN0aXZlRWRpdG9yKCk7XG4gIHJldHVybiBlZGl0b3IuX2VkaXRvclN0YXRlLl9zZWxlY3Rpb247XG59XG5mdW5jdGlvbiAkdXBkYXRlRWxlbWVudFNlbGVjdGlvbk9uQ3JlYXRlRGVsZXRlTm9kZShzZWxlY3Rpb24sIHBhcmVudE5vZGUsIG5vZGVPZmZzZXQsIHRpbWVzID0gMSkge1xuICBjb25zdCBhbmNob3IgPSBzZWxlY3Rpb24uYW5jaG9yO1xuICBjb25zdCBmb2N1cyA9IHNlbGVjdGlvbi5mb2N1cztcbiAgY29uc3QgYW5jaG9yTm9kZSA9IGFuY2hvci5nZXROb2RlKCk7XG4gIGNvbnN0IGZvY3VzTm9kZSA9IGZvY3VzLmdldE5vZGUoKTtcblxuICBpZiAoIXBhcmVudE5vZGUuaXMoYW5jaG9yTm9kZSkgJiYgIXBhcmVudE5vZGUuaXMoZm9jdXNOb2RlKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHBhcmVudEtleSA9IHBhcmVudE5vZGUuX19rZXk7IC8vIFNpbmdsZSBub2RlLiBXZSBzaGlmdCBzZWxlY3Rpb24gYnV0IG5ldmVyIHJlZGltZW5zaW9uIGl0XG5cbiAgaWYgKHNlbGVjdGlvbi5pc0NvbGxhcHNlZCgpKSB7XG4gICAgY29uc3Qgc2VsZWN0aW9uT2Zmc2V0ID0gYW5jaG9yLm9mZnNldDtcblxuICAgIGlmIChub2RlT2Zmc2V0IDw9IHNlbGVjdGlvbk9mZnNldCkge1xuICAgICAgY29uc3QgbmV3U2VsZWN0aW9uT2Zmc2V0ID0gTWF0aC5tYXgoMCwgc2VsZWN0aW9uT2Zmc2V0ICsgdGltZXMpO1xuICAgICAgYW5jaG9yLnNldChwYXJlbnRLZXksIG5ld1NlbGVjdGlvbk9mZnNldCwgJ2VsZW1lbnQnKTtcbiAgICAgIGZvY3VzLnNldChwYXJlbnRLZXksIG5ld1NlbGVjdGlvbk9mZnNldCwgJ2VsZW1lbnQnKTsgLy8gVGhlIG5ldyBzZWxlY3Rpb24gbWlnaHQgcG9pbnQgdG8gdGV4dCBub2RlcywgdHJ5IHRvIHJlc29sdmUgdGhlbVxuXG4gICAgICAkdXBkYXRlU2VsZWN0aW9uUmVzb2x2ZVRleHROb2RlcyhzZWxlY3Rpb24pO1xuICAgIH1cblxuICAgIHJldHVybjtcbiAgfSAvLyBNdWx0aXBsZSBub2RlcyBzZWxlY3RlZC4gV2Ugc2hpZnQgb3IgcmVkaW1lbnNpb24gc2VsZWN0aW9uXG5cblxuICBjb25zdCBpc0JhY2t3YXJkID0gc2VsZWN0aW9uLmlzQmFja3dhcmQoKTtcbiAgY29uc3QgZmlyc3RQb2ludCA9IGlzQmFja3dhcmQgPyBmb2N1cyA6IGFuY2hvcjtcbiAgY29uc3QgZmlyc3RQb2ludE5vZGUgPSBmaXJzdFBvaW50LmdldE5vZGUoKTtcbiAgY29uc3QgbGFzdFBvaW50ID0gaXNCYWNrd2FyZCA/IGFuY2hvciA6IGZvY3VzO1xuICBjb25zdCBsYXN0UG9pbnROb2RlID0gbGFzdFBvaW50LmdldE5vZGUoKTtcblxuICBpZiAocGFyZW50Tm9kZS5pcyhmaXJzdFBvaW50Tm9kZSkpIHtcbiAgICBjb25zdCBmaXJzdFBvaW50T2Zmc2V0ID0gZmlyc3RQb2ludC5vZmZzZXQ7XG5cbiAgICBpZiAobm9kZU9mZnNldCA8PSBmaXJzdFBvaW50T2Zmc2V0KSB7XG4gICAgICBmaXJzdFBvaW50LnNldChwYXJlbnRLZXksIE1hdGgubWF4KDAsIGZpcnN0UG9pbnRPZmZzZXQgKyB0aW1lcyksICdlbGVtZW50Jyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHBhcmVudE5vZGUuaXMobGFzdFBvaW50Tm9kZSkpIHtcbiAgICBjb25zdCBsYXN0UG9pbnRPZmZzZXQgPSBsYXN0UG9pbnQub2Zmc2V0O1xuXG4gICAgaWYgKG5vZGVPZmZzZXQgPD0gbGFzdFBvaW50T2Zmc2V0KSB7XG4gICAgICBsYXN0UG9pbnQuc2V0KHBhcmVudEtleSwgTWF0aC5tYXgoMCwgbGFzdFBvaW50T2Zmc2V0ICsgdGltZXMpLCAnZWxlbWVudCcpO1xuICAgIH1cbiAgfSAvLyBUaGUgbmV3IHNlbGVjdGlvbiBtaWdodCBwb2ludCB0byB0ZXh0IG5vZGVzLCB0cnkgdG8gcmVzb2x2ZSB0aGVtXG5cblxuICAkdXBkYXRlU2VsZWN0aW9uUmVzb2x2ZVRleHROb2RlcyhzZWxlY3Rpb24pO1xufVxuXG5mdW5jdGlvbiAkdXBkYXRlU2VsZWN0aW9uUmVzb2x2ZVRleHROb2RlcyhzZWxlY3Rpb24pIHtcbiAgY29uc3QgYW5jaG9yID0gc2VsZWN0aW9uLmFuY2hvcjtcbiAgY29uc3QgYW5jaG9yT2Zmc2V0ID0gYW5jaG9yLm9mZnNldDtcbiAgY29uc3QgZm9jdXMgPSBzZWxlY3Rpb24uZm9jdXM7XG4gIGNvbnN0IGZvY3VzT2Zmc2V0ID0gZm9jdXMub2Zmc2V0O1xuICBjb25zdCBhbmNob3JOb2RlID0gYW5jaG9yLmdldE5vZGUoKTtcbiAgY29uc3QgZm9jdXNOb2RlID0gZm9jdXMuZ2V0Tm9kZSgpO1xuXG4gIGlmIChzZWxlY3Rpb24uaXNDb2xsYXBzZWQoKSkge1xuICAgIGlmICghJGlzRWxlbWVudE5vZGUoYW5jaG9yTm9kZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjaGlsZFNpemUgPSBhbmNob3JOb2RlLmdldENoaWxkcmVuU2l6ZSgpO1xuICAgIGNvbnN0IGFuY2hvck9mZnNldEF0RW5kID0gYW5jaG9yT2Zmc2V0ID49IGNoaWxkU2l6ZTtcbiAgICBjb25zdCBjaGlsZCA9IGFuY2hvck9mZnNldEF0RW5kID8gYW5jaG9yTm9kZS5nZXRDaGlsZEF0SW5kZXgoY2hpbGRTaXplIC0gMSkgOiBhbmNob3JOb2RlLmdldENoaWxkQXRJbmRleChhbmNob3JPZmZzZXQpO1xuXG4gICAgaWYgKCRpc1RleHROb2RlKGNoaWxkKSkge1xuICAgICAgbGV0IG5ld09mZnNldCA9IDA7XG5cbiAgICAgIGlmIChhbmNob3JPZmZzZXRBdEVuZCkge1xuICAgICAgICBuZXdPZmZzZXQgPSBjaGlsZC5nZXRUZXh0Q29udGVudFNpemUoKTtcbiAgICAgIH1cblxuICAgICAgYW5jaG9yLnNldChjaGlsZC5fX2tleSwgbmV3T2Zmc2V0LCAndGV4dCcpO1xuICAgICAgZm9jdXMuc2V0KGNoaWxkLl9fa2V5LCBuZXdPZmZzZXQsICd0ZXh0Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCRpc0VsZW1lbnROb2RlKGFuY2hvck5vZGUpKSB7XG4gICAgY29uc3QgY2hpbGRTaXplID0gYW5jaG9yTm9kZS5nZXRDaGlsZHJlblNpemUoKTtcbiAgICBjb25zdCBhbmNob3JPZmZzZXRBdEVuZCA9IGFuY2hvck9mZnNldCA+PSBjaGlsZFNpemU7XG4gICAgY29uc3QgY2hpbGQgPSBhbmNob3JPZmZzZXRBdEVuZCA/IGFuY2hvck5vZGUuZ2V0Q2hpbGRBdEluZGV4KGNoaWxkU2l6ZSAtIDEpIDogYW5jaG9yTm9kZS5nZXRDaGlsZEF0SW5kZXgoYW5jaG9yT2Zmc2V0KTtcblxuICAgIGlmICgkaXNUZXh0Tm9kZShjaGlsZCkpIHtcbiAgICAgIGxldCBuZXdPZmZzZXQgPSAwO1xuXG4gICAgICBpZiAoYW5jaG9yT2Zmc2V0QXRFbmQpIHtcbiAgICAgICAgbmV3T2Zmc2V0ID0gY2hpbGQuZ2V0VGV4dENvbnRlbnRTaXplKCk7XG4gICAgICB9XG5cbiAgICAgIGFuY2hvci5zZXQoY2hpbGQuX19rZXksIG5ld09mZnNldCwgJ3RleHQnKTtcbiAgICB9XG4gIH1cblxuICBpZiAoJGlzRWxlbWVudE5vZGUoZm9jdXNOb2RlKSkge1xuICAgIGNvbnN0IGNoaWxkU2l6ZSA9IGZvY3VzTm9kZS5nZXRDaGlsZHJlblNpemUoKTtcbiAgICBjb25zdCBmb2N1c09mZnNldEF0RW5kID0gZm9jdXNPZmZzZXQgPj0gY2hpbGRTaXplO1xuICAgIGNvbnN0IGNoaWxkID0gZm9jdXNPZmZzZXRBdEVuZCA/IGZvY3VzTm9kZS5nZXRDaGlsZEF0SW5kZXgoY2hpbGRTaXplIC0gMSkgOiBmb2N1c05vZGUuZ2V0Q2hpbGRBdEluZGV4KGZvY3VzT2Zmc2V0KTtcblxuICAgIGlmICgkaXNUZXh0Tm9kZShjaGlsZCkpIHtcbiAgICAgIGxldCBuZXdPZmZzZXQgPSAwO1xuXG4gICAgICBpZiAoZm9jdXNPZmZzZXRBdEVuZCkge1xuICAgICAgICBuZXdPZmZzZXQgPSBjaGlsZC5nZXRUZXh0Q29udGVudFNpemUoKTtcbiAgICAgIH1cblxuICAgICAgZm9jdXMuc2V0KGNoaWxkLl9fa2V5LCBuZXdPZmZzZXQsICd0ZXh0Jyk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFwcGx5U2VsZWN0aW9uVHJhbnNmb3JtcyhuZXh0RWRpdG9yU3RhdGUsIGVkaXRvcikge1xuICBjb25zdCBwcmV2RWRpdG9yU3RhdGUgPSBlZGl0b3IuZ2V0RWRpdG9yU3RhdGUoKTtcbiAgY29uc3QgcHJldlNlbGVjdGlvbiA9IHByZXZFZGl0b3JTdGF0ZS5fc2VsZWN0aW9uO1xuICBjb25zdCBuZXh0U2VsZWN0aW9uID0gbmV4dEVkaXRvclN0YXRlLl9zZWxlY3Rpb247XG5cbiAgaWYgKCRpc1JhbmdlU2VsZWN0aW9uKG5leHRTZWxlY3Rpb24pKSB7XG4gICAgY29uc3QgYW5jaG9yID0gbmV4dFNlbGVjdGlvbi5hbmNob3I7XG4gICAgY29uc3QgZm9jdXMgPSBuZXh0U2VsZWN0aW9uLmZvY3VzO1xuICAgIGxldCBhbmNob3JOb2RlO1xuXG4gICAgaWYgKGFuY2hvci50eXBlID09PSAndGV4dCcpIHtcbiAgICAgIGFuY2hvck5vZGUgPSBhbmNob3IuZ2V0Tm9kZSgpO1xuICAgICAgYW5jaG9yTm9kZS5zZWxlY3Rpb25UcmFuc2Zvcm0ocHJldlNlbGVjdGlvbiwgbmV4dFNlbGVjdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKGZvY3VzLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgY29uc3QgZm9jdXNOb2RlID0gZm9jdXMuZ2V0Tm9kZSgpO1xuXG4gICAgICBpZiAoYW5jaG9yTm9kZSAhPT0gZm9jdXNOb2RlKSB7XG4gICAgICAgIGZvY3VzTm9kZS5zZWxlY3Rpb25UcmFuc2Zvcm0ocHJldlNlbGVjdGlvbiwgbmV4dFNlbGVjdGlvbik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBtb3ZlU2VsZWN0aW9uUG9pbnRUb1NpYmxpbmcocG9pbnQsIG5vZGUsIHBhcmVudCwgcHJldlNpYmxpbmcsIG5leHRTaWJsaW5nKSB7XG4gIGxldCBzaWJsaW5nS2V5ID0gbnVsbDtcbiAgbGV0IG9mZnNldCA9IDA7XG4gIGxldCB0eXBlID0gbnVsbDtcblxuICBpZiAocHJldlNpYmxpbmcgIT09IG51bGwpIHtcbiAgICBzaWJsaW5nS2V5ID0gcHJldlNpYmxpbmcuX19rZXk7XG5cbiAgICBpZiAoJGlzVGV4dE5vZGUocHJldlNpYmxpbmcpKSB7XG4gICAgICBvZmZzZXQgPSBwcmV2U2libGluZy5nZXRUZXh0Q29udGVudFNpemUoKTtcbiAgICAgIHR5cGUgPSAndGV4dCc7XG4gICAgfSBlbHNlIGlmICgkaXNFbGVtZW50Tm9kZShwcmV2U2libGluZykpIHtcbiAgICAgIG9mZnNldCA9IHByZXZTaWJsaW5nLmdldENoaWxkcmVuU2l6ZSgpO1xuICAgICAgdHlwZSA9ICdlbGVtZW50JztcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKG5leHRTaWJsaW5nICE9PSBudWxsKSB7XG4gICAgICBzaWJsaW5nS2V5ID0gbmV4dFNpYmxpbmcuX19rZXk7XG5cbiAgICAgIGlmICgkaXNUZXh0Tm9kZShuZXh0U2libGluZykpIHtcbiAgICAgICAgdHlwZSA9ICd0ZXh0JztcbiAgICAgIH0gZWxzZSBpZiAoJGlzRWxlbWVudE5vZGUobmV4dFNpYmxpbmcpKSB7XG4gICAgICAgIHR5cGUgPSAnZWxlbWVudCc7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKHNpYmxpbmdLZXkgIT09IG51bGwgJiYgdHlwZSAhPT0gbnVsbCkge1xuICAgIHBvaW50LnNldChzaWJsaW5nS2V5LCBvZmZzZXQsIHR5cGUpO1xuICB9IGVsc2Uge1xuICAgIG9mZnNldCA9IG5vZGUuZ2V0SW5kZXhXaXRoaW5QYXJlbnQoKTtcblxuICAgIGlmIChvZmZzZXQgPT09IC0xKSB7XG4gICAgICAvLyBNb3ZlIHNlbGVjdGlvbiB0byBlbmQgb2YgcGFyZW50XG4gICAgICBvZmZzZXQgPSBwYXJlbnQuZ2V0Q2hpbGRyZW5TaXplKCk7XG4gICAgfVxuXG4gICAgcG9pbnQuc2V0KHBhcmVudC5fX2tleSwgb2Zmc2V0LCAnZWxlbWVudCcpO1xuICB9XG59XG5mdW5jdGlvbiBhZGp1c3RQb2ludE9mZnNldEZvck1lcmdlZFNpYmxpbmcocG9pbnQsIGlzQmVmb3JlLCBrZXksIHRhcmdldCwgdGV4dExlbmd0aCkge1xuICBpZiAocG9pbnQudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgcG9pbnQua2V5ID0ga2V5O1xuXG4gICAgaWYgKCFpc0JlZm9yZSkge1xuICAgICAgcG9pbnQub2Zmc2V0ICs9IHRleHRMZW5ndGg7XG4gICAgfVxuICB9IGVsc2UgaWYgKHBvaW50Lm9mZnNldCA+IHRhcmdldC5nZXRJbmRleFdpdGhpblBhcmVudCgpKSB7XG4gICAgcG9pbnQub2Zmc2V0IC09IDE7XG4gIH1cbn1cbmZ1bmN0aW9uIHVwZGF0ZURPTVNlbGVjdGlvbihwcmV2U2VsZWN0aW9uLCBuZXh0U2VsZWN0aW9uLCBlZGl0b3IsIGRvbVNlbGVjdGlvbiwgdGFncywgcm9vdEVsZW1lbnQsIG5vZGVDb3VudCkge1xuICBjb25zdCBhbmNob3JET01Ob2RlID0gZG9tU2VsZWN0aW9uLmFuY2hvck5vZGU7XG4gIGNvbnN0IGZvY3VzRE9NTm9kZSA9IGRvbVNlbGVjdGlvbi5mb2N1c05vZGU7XG4gIGNvbnN0IGFuY2hvck9mZnNldCA9IGRvbVNlbGVjdGlvbi5hbmNob3JPZmZzZXQ7XG4gIGNvbnN0IGZvY3VzT2Zmc2V0ID0gZG9tU2VsZWN0aW9uLmZvY3VzT2Zmc2V0O1xuICBjb25zdCBhY3RpdmVFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDsgLy8gVE9ETzogbWFrZSB0aGlzIG5vdCBoYXJkLWNvZGVkLCBhbmQgYWRkIGFub3RoZXIgY29uZmlnIG9wdGlvblxuICAvLyB0aGF0IG1ha2VzIHRoaXMgY29uZmlndXJhYmxlLlxuXG4gIGlmICh0YWdzLmhhcygnY29sbGFib3JhdGlvbicpICYmIGFjdGl2ZUVsZW1lbnQgIT09IHJvb3RFbGVtZW50IHx8IGFjdGl2ZUVsZW1lbnQgIT09IG51bGwgJiYgaXNTZWxlY3Rpb25DYXB0dXJlZEluRGVjb3JhdG9ySW5wdXQoYWN0aXZlRWxlbWVudCkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoISRpc1JhbmdlU2VsZWN0aW9uKG5leHRTZWxlY3Rpb24pKSB7XG4gICAgLy8gV2UgZG9uJ3QgcmVtb3ZlIHNlbGVjdGlvbiBpZiB0aGUgcHJldlNlbGVjdGlvbiBpcyBudWxsIGJlY2F1c2VcbiAgICAvLyBvZiBlZGl0b3Iuc2V0Um9vdEVsZW1lbnQoKS4gSWYgdGhpcyBvY2N1cnMgb24gaW5pdCB3aGVuIHRoZVxuICAgIC8vIGVkaXRvciBpcyBhbHJlYWR5IGZvY3VzZWQsIHRoZW4gdGhpcyBjYW4gY2F1c2UgdGhlIGVkaXRvciB0b1xuICAgIC8vIGxvc2UgZm9jdXMuXG4gICAgaWYgKHByZXZTZWxlY3Rpb24gIT09IG51bGwgJiYgaXNTZWxlY3Rpb25XaXRoaW5FZGl0b3IoZWRpdG9yLCBhbmNob3JET01Ob2RlLCBmb2N1c0RPTU5vZGUpKSB7XG4gICAgICBkb21TZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgYW5jaG9yID0gbmV4dFNlbGVjdGlvbi5hbmNob3I7XG4gIGNvbnN0IGZvY3VzID0gbmV4dFNlbGVjdGlvbi5mb2N1cztcbiAgY29uc3QgYW5jaG9yS2V5ID0gYW5jaG9yLmtleTtcbiAgY29uc3QgZm9jdXNLZXkgPSBmb2N1cy5rZXk7XG4gIGNvbnN0IGFuY2hvckRPTSA9IGdldEVsZW1lbnRCeUtleU9yVGhyb3coZWRpdG9yLCBhbmNob3JLZXkpO1xuICBjb25zdCBmb2N1c0RPTSA9IGdldEVsZW1lbnRCeUtleU9yVGhyb3coZWRpdG9yLCBmb2N1c0tleSk7XG4gIGNvbnN0IG5leHRBbmNob3JPZmZzZXQgPSBhbmNob3Iub2Zmc2V0O1xuICBjb25zdCBuZXh0Rm9jdXNPZmZzZXQgPSBmb2N1cy5vZmZzZXQ7XG4gIGNvbnN0IG5leHRGb3JtYXQgPSBuZXh0U2VsZWN0aW9uLmZvcm1hdDtcbiAgY29uc3QgbmV4dFN0eWxlID0gbmV4dFNlbGVjdGlvbi5zdHlsZTtcbiAgY29uc3QgaXNDb2xsYXBzZWQgPSBuZXh0U2VsZWN0aW9uLmlzQ29sbGFwc2VkKCk7XG4gIGxldCBuZXh0QW5jaG9yTm9kZSA9IGFuY2hvckRPTTtcbiAgbGV0IG5leHRGb2N1c05vZGUgPSBmb2N1c0RPTTtcbiAgbGV0IGFuY2hvckZvcm1hdE9yU3R5bGVDaGFuZ2VkID0gZmFsc2U7XG5cbiAgaWYgKGFuY2hvci50eXBlID09PSAndGV4dCcpIHtcbiAgICBuZXh0QW5jaG9yTm9kZSA9IGdldERPTVRleHROb2RlKGFuY2hvckRPTSk7XG4gICAgY29uc3QgYW5jaG9yTm9kZSA9IGFuY2hvci5nZXROb2RlKCk7XG4gICAgYW5jaG9yRm9ybWF0T3JTdHlsZUNoYW5nZWQgPSBhbmNob3JOb2RlLmdldEZvcm1hdCgpICE9PSBuZXh0Rm9ybWF0IHx8IGFuY2hvck5vZGUuZ2V0U3R5bGUoKSAhPT0gbmV4dFN0eWxlO1xuICB9IGVsc2UgaWYgKCRpc1JhbmdlU2VsZWN0aW9uKHByZXZTZWxlY3Rpb24pICYmIHByZXZTZWxlY3Rpb24uYW5jaG9yLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgIGFuY2hvckZvcm1hdE9yU3R5bGVDaGFuZ2VkID0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChmb2N1cy50eXBlID09PSAndGV4dCcpIHtcbiAgICBuZXh0Rm9jdXNOb2RlID0gZ2V0RE9NVGV4dE5vZGUoZm9jdXNET00pO1xuICB9IC8vIElmIHdlIGNhbid0IGdldCBhbiB1bmRlcmx5aW5nIHRleHQgbm9kZSBmb3Igc2VsZWN0aW9uLCB0aGVuXG4gIC8vIHdlIHNob3VsZCBhdm9pZCBzZXR0aW5nIHNlbGVjdGlvbiB0byBzb21ldGhpbmcgaW5jb3JyZWN0LlxuXG5cbiAgaWYgKG5leHRBbmNob3JOb2RlID09PSBudWxsIHx8IG5leHRGb2N1c05vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoaXNDb2xsYXBzZWQgJiYgKHByZXZTZWxlY3Rpb24gPT09IG51bGwgfHwgYW5jaG9yRm9ybWF0T3JTdHlsZUNoYW5nZWQgfHwgJGlzUmFuZ2VTZWxlY3Rpb24ocHJldlNlbGVjdGlvbikgJiYgKHByZXZTZWxlY3Rpb24uZm9ybWF0ICE9PSBuZXh0Rm9ybWF0IHx8IHByZXZTZWxlY3Rpb24uc3R5bGUgIT09IG5leHRTdHlsZSkpKSB7XG4gICAgbWFya0NvbGxhcHNlZFNlbGVjdGlvbkZvcm1hdChuZXh0Rm9ybWF0LCBuZXh0U3R5bGUsIG5leHRBbmNob3JPZmZzZXQsIGFuY2hvcktleSwgcGVyZm9ybWFuY2Uubm93KCkpO1xuICB9IC8vIERpZmYgYWdhaW5zdCB0aGUgbmF0aXZlIERPTSBzZWxlY3Rpb24gdG8gZW5zdXJlIHdlIGRvbid0IGRvXG4gIC8vIGFuIHVubmVjZXNzYXJ5IHNlbGVjdGlvbiB1cGRhdGUuIFdlIGFsc28gc2tpcCB0aGlzIGNoZWNrIGlmXG4gIC8vIHdlJ3JlIG1vdmluZyBzZWxlY3Rpb24gdG8gd2l0aGluIGFuIGVsZW1lbnQsIGFzIHRoaXMgY2FuXG4gIC8vIHNvbWV0aW1lcyBiZSBwcm9ibGVtYXRpYyBhcm91bmQgc2Nyb2xsaW5nLlxuXG5cbiAgaWYgKGFuY2hvck9mZnNldCA9PT0gbmV4dEFuY2hvck9mZnNldCAmJiBmb2N1c09mZnNldCA9PT0gbmV4dEZvY3VzT2Zmc2V0ICYmIGFuY2hvckRPTU5vZGUgPT09IG5leHRBbmNob3JOb2RlICYmIGZvY3VzRE9NTm9kZSA9PT0gbmV4dEZvY3VzTm9kZSAmJiAvLyBCYWRseSBpbnRlcnByZXRlZCByYW5nZSBzZWxlY3Rpb24gd2hlbiBjb2xsYXBzZWQgLSAjMTQ4MlxuICAgICEoZG9tU2VsZWN0aW9uLnR5cGUgPT09ICdSYW5nZScgJiYgaXNDb2xsYXBzZWQpKSB7XG4gICAgLy8gSWYgdGhlIHJvb3QgZWxlbWVudCBkb2VzIG5vdCBoYXZlIGZvY3VzLCBlbnN1cmUgaXQgaGFzIGZvY3VzXG4gICAgaWYgKGFjdGl2ZUVsZW1lbnQgPT09IG51bGwgfHwgIXJvb3RFbGVtZW50LmNvbnRhaW5zKGFjdGl2ZUVsZW1lbnQpKSB7XG4gICAgICByb290RWxlbWVudC5mb2N1cyh7XG4gICAgICAgIHByZXZlbnRTY3JvbGw6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChhbmNob3IudHlwZSAhPT0gJ2VsZW1lbnQnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9IC8vIEFwcGx5IHRoZSB1cGRhdGVkIHNlbGVjdGlvbiB0byB0aGUgRE9NLiBOb3RlOiB0aGlzIHdpbGwgdHJpZ2dlclxuICAvLyBhIFwic2VsZWN0aW9uY2hhbmdlXCIgZXZlbnQsIGFsdGhvdWdoIGl0IHdpbGwgYmUgYXN5bmNocm9ub3VzLlxuXG5cbiAgdHJ5IHtcbiAgICBkb21TZWxlY3Rpb24uc2V0QmFzZUFuZEV4dGVudChuZXh0QW5jaG9yTm9kZSwgbmV4dEFuY2hvck9mZnNldCwgbmV4dEZvY3VzTm9kZSwgbmV4dEZvY3VzT2Zmc2V0KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHsvLyBJZiB3ZSBlbmNvdW50ZXIgYW4gZXJyb3IsIGNvbnRpbnVlLiBUaGlzIGNhbiBzb21ldGltZXNcbiAgICAvLyBvY2N1ciB3aXRoIEZGIGFuZCB0aGVyZSdzIG5vIGdvb2QgcmVhc29uIGFzIHRvIHdoeSBpdFxuICAgIC8vIHNob3VsZCBoYXBwZW4uXG4gIH1cblxuICBpZiAoIXRhZ3MuaGFzKCdza2lwLXNjcm9sbC1pbnRvLXZpZXcnKSAmJiBuZXh0U2VsZWN0aW9uLmlzQ29sbGFwc2VkKCkgJiYgcm9vdEVsZW1lbnQgIT09IG51bGwgJiYgcm9vdEVsZW1lbnQgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpIHtcbiAgICBjb25zdCBzZWxlY3Rpb25UYXJnZXQgPSBuZXh0U2VsZWN0aW9uIGluc3RhbmNlb2YgUmFuZ2VTZWxlY3Rpb24gJiYgbmV4dFNlbGVjdGlvbi5hbmNob3IudHlwZSA9PT0gJ2VsZW1lbnQnID8gbmV4dEFuY2hvck5vZGUuY2hpbGROb2Rlc1tuZXh0QW5jaG9yT2Zmc2V0XSB8fCBudWxsIDogZG9tU2VsZWN0aW9uLnJhbmdlQ291bnQgPiAwID8gZG9tU2VsZWN0aW9uLmdldFJhbmdlQXQoMCkgOiBudWxsO1xuXG4gICAgaWYgKHNlbGVjdGlvblRhcmdldCAhPT0gbnVsbCkge1xuICAgICAgLy8gQHRzLWlnbm9yZSBUZXh0IG5vZGVzIGRvIGhhdmUgZ2V0Qm91bmRpbmdDbGllbnRSZWN0XG4gICAgICBjb25zdCBzZWxlY3Rpb25SZWN0ID0gc2VsZWN0aW9uVGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgc2Nyb2xsSW50b1ZpZXdJZk5lZWRlZChlZGl0b3IsIHNlbGVjdGlvblJlY3QsIHJvb3RFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBtYXJrU2VsZWN0aW9uQ2hhbmdlRnJvbURPTVVwZGF0ZSgpO1xufVxuZnVuY3Rpb24gJGluc2VydE5vZGVzKG5vZGVzLCBzZWxlY3RTdGFydCkge1xuICBsZXQgc2VsZWN0aW9uID0gJGdldFNlbGVjdGlvbigpO1xuXG4gIGlmIChzZWxlY3Rpb24gPT09IG51bGwpIHtcbiAgICBzZWxlY3Rpb24gPSAkZ2V0Um9vdCgpLnNlbGVjdEVuZCgpO1xuICB9XG5cbiAgcmV0dXJuIHNlbGVjdGlvbi5pbnNlcnROb2Rlcyhub2Rlcywgc2VsZWN0U3RhcnQpO1xufVxuZnVuY3Rpb24gJGdldFRleHRDb250ZW50KCkge1xuICBjb25zdCBzZWxlY3Rpb24gPSAkZ2V0U2VsZWN0aW9uKCk7XG5cbiAgaWYgKHNlbGVjdGlvbiA9PT0gbnVsbCkge1xuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIHJldHVybiBzZWxlY3Rpb24uZ2V0VGV4dENvbnRlbnQoKTtcbn1cblxuZnVuY3Rpb24gY29tcHV0ZUdyaWRNYXAoZ3JpZCwgY2VsbEEsIGNlbGxCKSB7XG4gIGNvbnN0IHRhYmxlTWFwID0gW107XG4gIGxldCBjZWxsQVZhbHVlID0gbnVsbDtcbiAgbGV0IGNlbGxCVmFsdWUgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIHdyaXRlKHN0YXJ0Um93LCBzdGFydENvbHVtbiwgY2VsbCkge1xuICAgIGNvbnN0IHZhbHVlID0ge1xuICAgICAgY2VsbCxcbiAgICAgIHN0YXJ0Q29sdW1uLFxuICAgICAgc3RhcnRSb3dcbiAgICB9O1xuICAgIGNvbnN0IHJvd1NwYW4gPSBjZWxsLl9fcm93U3BhbjtcbiAgICBjb25zdCBjb2xTcGFuID0gY2VsbC5fX2NvbFNwYW47XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd1NwYW47IGkrKykge1xuICAgICAgaWYgKHRhYmxlTWFwW3N0YXJ0Um93ICsgaV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0YWJsZU1hcFtzdGFydFJvdyArIGldID0gW107XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY29sU3BhbjsgaisrKSB7XG4gICAgICAgIHRhYmxlTWFwW3N0YXJ0Um93ICsgaV1bc3RhcnRDb2x1bW4gKyBqXSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjZWxsQS5pcyhjZWxsKSkge1xuICAgICAgY2VsbEFWYWx1ZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIGlmIChjZWxsQi5pcyhjZWxsKSkge1xuICAgICAgY2VsbEJWYWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGlzRW1wdHkocm93LCBjb2x1bW4pIHtcbiAgICByZXR1cm4gdGFibGVNYXBbcm93XSA9PT0gdW5kZWZpbmVkIHx8IHRhYmxlTWFwW3Jvd11bY29sdW1uXSA9PT0gdW5kZWZpbmVkO1xuICB9XG5cbiAgY29uc3QgZ3JpZENoaWxkcmVuID0gZ3JpZC5nZXRDaGlsZHJlbigpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JpZENoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qgcm93ID0gZ3JpZENoaWxkcmVuW2ldO1xuXG4gICAgaWYgKCFERVBSRUNBVEVEXyRpc0dyaWRSb3dOb2RlKHJvdykpIHtcbiAgICAgIHRocm93IEVycm9yKGBFeHBlY3RlZCBHcmlkTm9kZSBjaGlsZHJlbiB0byBiZSBHcmlkUm93Tm9kZWApO1xuICAgIH1cblxuICAgIGNvbnN0IHJvd0NoaWxkcmVuID0gcm93LmdldENoaWxkcmVuKCk7XG4gICAgbGV0IGogPSAwO1xuXG4gICAgZm9yIChjb25zdCBjZWxsIG9mIHJvd0NoaWxkcmVuKSB7XG4gICAgICBpZiAoIURFUFJFQ0FURURfJGlzR3JpZENlbGxOb2RlKGNlbGwpKSB7XG4gICAgICAgIHRocm93IEVycm9yKGBFeHBlY3RlZCBHcmlkUm93Tm9kZSBjaGlsZHJlbiB0byBiZSBHcmlkQ2VsbE5vZGVgKTtcbiAgICAgIH1cblxuICAgICAgd2hpbGUgKCFpc0VtcHR5KGksIGopKSB7XG4gICAgICAgIGorKztcbiAgICAgIH1cblxuICAgICAgd3JpdGUoaSwgaiwgY2VsbCk7XG4gICAgICBqICs9IGNlbGwuX19jb2xTcGFuO1xuICAgIH1cbiAgfVxuXG4gIGlmICghKGNlbGxBVmFsdWUgIT09IG51bGwpKSB7XG4gICAgdGhyb3cgRXJyb3IoYEFuY2hvciBub3QgZm91bmQgaW4gR3JpZGApO1xuICB9XG5cbiAgaWYgKCEoY2VsbEJWYWx1ZSAhPT0gbnVsbCkpIHtcbiAgICB0aHJvdyBFcnJvcihgRm9jdXMgbm90IGZvdW5kIGluIEdyaWRgKTtcbiAgfVxuXG4gIHJldHVybiBbdGFibGVNYXAsIGNlbGxBVmFsdWUsIGNlbGxCVmFsdWVdO1xufVxuXG4vKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5sZXQgYWN0aXZlRWRpdG9yU3RhdGUgPSBudWxsO1xubGV0IGFjdGl2ZUVkaXRvciA9IG51bGw7XG5sZXQgaXNSZWFkT25seU1vZGUgPSBmYWxzZTtcbmxldCBpc0F0dGVtcHRpbmdUb1JlY292ZXJGcm9tUmVjb25jaWxlckVycm9yID0gZmFsc2U7XG5sZXQgaW5maW5pdGVUcmFuc2Zvcm1Db3VudCA9IDA7XG5jb25zdCBvYnNlcnZlck9wdGlvbnMgPSB7XG4gIGNoYXJhY3RlckRhdGE6IHRydWUsXG4gIGNoaWxkTGlzdDogdHJ1ZSxcbiAgc3VidHJlZTogdHJ1ZVxufTtcbmZ1bmN0aW9uIGlzQ3VycmVudGx5UmVhZE9ubHlNb2RlKCkge1xuICByZXR1cm4gaXNSZWFkT25seU1vZGUgfHwgYWN0aXZlRWRpdG9yU3RhdGUgIT09IG51bGwgJiYgYWN0aXZlRWRpdG9yU3RhdGUuX3JlYWRPbmx5O1xufVxuZnVuY3Rpb24gZXJyb3JPblJlYWRPbmx5KCkge1xuICBpZiAoaXNSZWFkT25seU1vZGUpIHtcbiAgICB7XG4gICAgICB0aHJvdyBFcnJvcihgQ2Fubm90IHVzZSBtZXRob2QgaW4gcmVhZC1vbmx5IG1vZGUuYCk7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBlcnJvck9uSW5maW5pdGVUcmFuc2Zvcm1zKCkge1xuICBpZiAoaW5maW5pdGVUcmFuc2Zvcm1Db3VudCA+IDk5KSB7XG4gICAge1xuICAgICAgdGhyb3cgRXJyb3IoYE9uZSBvciBtb3JlIHRyYW5zZm9ybXMgYXJlIGVuZGxlc3NseSB0cmlnZ2VyaW5nIGFkZGl0aW9uYWwgdHJhbnNmb3Jtcy4gTWF5IGhhdmUgZW5jb3VudGVyZWQgaW5maW5pdGUgcmVjdXJzaW9uIGNhdXNlZCBieSB0cmFuc2Zvcm1zIHRoYXQgaGF2ZSB0aGVpciBwcmVjb25kaXRpb25zIHRvbyBsb3NlIGFuZC9vciBjb25mbGljdCB3aXRoIGVhY2ggb3RoZXIuYCk7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBnZXRBY3RpdmVFZGl0b3JTdGF0ZSgpIHtcbiAgaWYgKGFjdGl2ZUVkaXRvclN0YXRlID09PSBudWxsKSB7XG4gICAge1xuICAgICAgdGhyb3cgRXJyb3IoYFVuYWJsZSB0byBmaW5kIGFuIGFjdGl2ZSBlZGl0b3Igc3RhdGUuIFN0YXRlIGhlbHBlcnMgb3Igbm9kZSBtZXRob2RzIGNhbiBvbmx5IGJlIHVzZWQgc3luY2hyb25vdXNseSBkdXJpbmcgdGhlIGNhbGxiYWNrIG9mIGVkaXRvci51cGRhdGUoKSBvciBlZGl0b3JTdGF0ZS5yZWFkKCkuYCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGFjdGl2ZUVkaXRvclN0YXRlO1xufVxuZnVuY3Rpb24gZ2V0QWN0aXZlRWRpdG9yKCkge1xuICBpZiAoYWN0aXZlRWRpdG9yID09PSBudWxsKSB7XG4gICAge1xuICAgICAgdGhyb3cgRXJyb3IoYFVuYWJsZSB0byBmaW5kIGFuIGFjdGl2ZSBlZGl0b3IuIFRoaXMgbWV0aG9kIGNhbiBvbmx5IGJlIHVzZWQgc3luY2hyb25vdXNseSBkdXJpbmcgdGhlIGNhbGxiYWNrIG9mIGVkaXRvci51cGRhdGUoKS5gKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYWN0aXZlRWRpdG9yO1xufVxuZnVuY3Rpb24gaW50ZXJuYWxHZXRBY3RpdmVFZGl0b3IoKSB7XG4gIHJldHVybiBhY3RpdmVFZGl0b3I7XG59XG5mdW5jdGlvbiAkYXBwbHlUcmFuc2Zvcm1zKGVkaXRvciwgbm9kZSwgdHJhbnNmb3Jtc0NhY2hlKSB7XG4gIGNvbnN0IHR5cGUgPSBub2RlLl9fdHlwZTtcbiAgY29uc3QgcmVnaXN0ZXJlZE5vZGUgPSBnZXRSZWdpc3RlcmVkTm9kZU9yVGhyb3coZWRpdG9yLCB0eXBlKTtcbiAgbGV0IHRyYW5zZm9ybXNBcnIgPSB0cmFuc2Zvcm1zQ2FjaGUuZ2V0KHR5cGUpO1xuXG4gIGlmICh0cmFuc2Zvcm1zQXJyID09PSB1bmRlZmluZWQpIHtcbiAgICB0cmFuc2Zvcm1zQXJyID0gQXJyYXkuZnJvbShyZWdpc3RlcmVkTm9kZS50cmFuc2Zvcm1zKTtcbiAgICB0cmFuc2Zvcm1zQ2FjaGUuc2V0KHR5cGUsIHRyYW5zZm9ybXNBcnIpO1xuICB9XG5cbiAgY29uc3QgdHJhbnNmb3Jtc0Fyckxlbmd0aCA9IHRyYW5zZm9ybXNBcnIubGVuZ3RoO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdHJhbnNmb3Jtc0Fyckxlbmd0aDsgaSsrKSB7XG4gICAgdHJhbnNmb3Jtc0FycltpXShub2RlKTtcblxuICAgIGlmICghbm9kZS5pc0F0dGFjaGVkKCkpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiAkaXNOb2RlVmFsaWRGb3JUcmFuc2Zvcm0obm9kZSwgY29tcG9zaXRpb25LZXkpIHtcbiAgcmV0dXJuIG5vZGUgIT09IHVuZGVmaW5lZCAmJiAvLyBXZSBkb24ndCB3YW50IHRvIHRyYW5zZm9ybSBub2RlcyBiZWluZyBjb21wb3NlZFxuICAgIG5vZGUuX19rZXkgIT09IGNvbXBvc2l0aW9uS2V5ICYmIG5vZGUuaXNBdHRhY2hlZCgpO1xufVxuXG5mdW5jdGlvbiAkbm9ybWFsaXplQWxsRGlydHlUZXh0Tm9kZXMoZWRpdG9yU3RhdGUsIGVkaXRvcikge1xuICBjb25zdCBkaXJ0eUxlYXZlcyA9IGVkaXRvci5fZGlydHlMZWF2ZXM7XG4gIGNvbnN0IG5vZGVNYXAgPSBlZGl0b3JTdGF0ZS5fbm9kZU1hcDtcblxuICBmb3IgKGNvbnN0IG5vZGVLZXkgb2YgZGlydHlMZWF2ZXMpIHtcbiAgICBjb25zdCBub2RlID0gbm9kZU1hcC5nZXQobm9kZUtleSk7XG5cbiAgICBpZiAoJGlzVGV4dE5vZGUobm9kZSkgJiYgbm9kZS5pc0F0dGFjaGVkKCkgJiYgbm9kZS5pc1NpbXBsZVRleHQoKSAmJiAhbm9kZS5pc1VubWVyZ2VhYmxlKCkpIHtcbiAgICAgICRub3JtYWxpemVUZXh0Tm9kZShub2RlKTtcbiAgICB9XG4gIH1cbn1cbi8qKlxuICogVHJhbnNmb3JtIGhldXJpc3RpYzpcbiAqIDEuIFdlIHRyYW5zZm9ybSBsZWF2ZXMgZmlyc3QuIElmIHRyYW5zZm9ybXMgZ2VuZXJhdGUgYWRkaXRpb25hbCBkaXJ0eSBub2RlcyB3ZSByZXBlYXQgc3RlcCAxLlxuICogVGhlIHJlYXNvbmluZyBiZWhpbmQgdGhpcyBpcyB0aGF0IG1hcmtpbmcgYSBsZWFmIGFzIGRpcnR5IG1hcmtzIGFsbCBpdHMgcGFyZW50IGVsZW1lbnRzIGFzIGRpcnR5IHRvby5cbiAqIDIuIFdlIHRyYW5zZm9ybSBlbGVtZW50cy4gSWYgZWxlbWVudCB0cmFuc2Zvcm1zIGdlbmVyYXRlIGFkZGl0aW9uYWwgZGlydHkgbm9kZXMgd2UgcmVwZWF0IHN0ZXAgMS5cbiAqIElmIGVsZW1lbnQgdHJhbnNmb3JtcyBvbmx5IGdlbmVyYXRlIGFkZGl0aW9uYWwgZGlydHkgZWxlbWVudHMgd2Ugb25seSByZXBlYXQgc3RlcCAyLlxuICpcbiAqIE5vdGUgdGhhdCB0byBrZWVwIHRyYWNrIG9mIG5ld2x5IGRpcnR5IG5vZGVzIGFuZCBzdWJ0cmVlcyB3ZSBsZXZlcmFnZSB0aGUgZWRpdG9yLl9kaXJ0eU5vZGVzIGFuZFxuICogZWRpdG9yLl9zdWJ0cmVlcyB3aGljaCB3ZSByZXNldCBpbiBldmVyeSBsb29wLlxuICovXG5cblxuZnVuY3Rpb24gJGFwcGx5QWxsVHJhbnNmb3JtcyhlZGl0b3JTdGF0ZSwgZWRpdG9yKSB7XG4gIGNvbnN0IGRpcnR5TGVhdmVzID0gZWRpdG9yLl9kaXJ0eUxlYXZlcztcbiAgY29uc3QgZGlydHlFbGVtZW50cyA9IGVkaXRvci5fZGlydHlFbGVtZW50cztcbiAgY29uc3Qgbm9kZU1hcCA9IGVkaXRvclN0YXRlLl9ub2RlTWFwO1xuICBjb25zdCBjb21wb3NpdGlvbktleSA9ICRnZXRDb21wb3NpdGlvbktleSgpO1xuICBjb25zdCB0cmFuc2Zvcm1zQ2FjaGUgPSBuZXcgTWFwKCk7XG4gIGxldCB1bnRyYW5zZm9ybWVkRGlydHlMZWF2ZXMgPSBkaXJ0eUxlYXZlcztcbiAgbGV0IHVudHJhbnNmb3JtZWREaXJ0eUxlYXZlc0xlbmd0aCA9IHVudHJhbnNmb3JtZWREaXJ0eUxlYXZlcy5zaXplO1xuICBsZXQgdW50cmFuc2Zvcm1lZERpcnR5RWxlbWVudHMgPSBkaXJ0eUVsZW1lbnRzO1xuICBsZXQgdW50cmFuc2Zvcm1lZERpcnR5RWxlbWVudHNMZW5ndGggPSB1bnRyYW5zZm9ybWVkRGlydHlFbGVtZW50cy5zaXplO1xuXG4gIHdoaWxlICh1bnRyYW5zZm9ybWVkRGlydHlMZWF2ZXNMZW5ndGggPiAwIHx8IHVudHJhbnNmb3JtZWREaXJ0eUVsZW1lbnRzTGVuZ3RoID4gMCkge1xuICAgIGlmICh1bnRyYW5zZm9ybWVkRGlydHlMZWF2ZXNMZW5ndGggPiAwKSB7XG4gICAgICAvLyBXZSBsZXZlcmFnZSBlZGl0b3IuX2RpcnR5TGVhdmVzIHRvIHRyYWNrIHRoZSBuZXcgZGlydHkgbGVhdmVzIGFmdGVyIHRoZSB0cmFuc2Zvcm1zXG4gICAgICBlZGl0b3IuX2RpcnR5TGVhdmVzID0gbmV3IFNldCgpO1xuXG4gICAgICBmb3IgKGNvbnN0IG5vZGVLZXkgb2YgdW50cmFuc2Zvcm1lZERpcnR5TGVhdmVzKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBub2RlTWFwLmdldChub2RlS2V5KTtcblxuICAgICAgICBpZiAoJGlzVGV4dE5vZGUobm9kZSkgJiYgbm9kZS5pc0F0dGFjaGVkKCkgJiYgbm9kZS5pc1NpbXBsZVRleHQoKSAmJiAhbm9kZS5pc1VubWVyZ2VhYmxlKCkpIHtcbiAgICAgICAgICAkbm9ybWFsaXplVGV4dE5vZGUobm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobm9kZSAhPT0gdW5kZWZpbmVkICYmICRpc05vZGVWYWxpZEZvclRyYW5zZm9ybShub2RlLCBjb21wb3NpdGlvbktleSkpIHtcbiAgICAgICAgICAkYXBwbHlUcmFuc2Zvcm1zKGVkaXRvciwgbm9kZSwgdHJhbnNmb3Jtc0NhY2hlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRpcnR5TGVhdmVzLmFkZChub2RlS2V5KTtcbiAgICAgIH1cblxuICAgICAgdW50cmFuc2Zvcm1lZERpcnR5TGVhdmVzID0gZWRpdG9yLl9kaXJ0eUxlYXZlcztcbiAgICAgIHVudHJhbnNmb3JtZWREaXJ0eUxlYXZlc0xlbmd0aCA9IHVudHJhbnNmb3JtZWREaXJ0eUxlYXZlcy5zaXplOyAvLyBXZSB3YW50IHRvIHByaW9yaXRpemUgbm9kZSB0cmFuc2Zvcm1zIG92ZXIgZWxlbWVudCB0cmFuc2Zvcm1zXG5cbiAgICAgIGlmICh1bnRyYW5zZm9ybWVkRGlydHlMZWF2ZXNMZW5ndGggPiAwKSB7XG4gICAgICAgIGluZmluaXRlVHJhbnNmb3JtQ291bnQrKztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgfSAvLyBBbGwgZGlydHkgbGVhdmVzIGhhdmUgYmVlbiBwcm9jZXNzZWQuIExldCdzIGRvIGVsZW1lbnRzIVxuICAgIC8vIFdlIGhhdmUgcHJldmlvdXNseSBwcm9jZXNzZWQgZGlydHkgbGVhdmVzLCBzbyBsZXQncyByZXN0YXJ0IHRoZSBlZGl0b3IgbGVhdmVzIFNldCB0byB0cmFja1xuICAgIC8vIG5ldyBvbmVzIGNhdXNlZCBieSBlbGVtZW50IHRyYW5zZm9ybXNcblxuXG4gICAgZWRpdG9yLl9kaXJ0eUxlYXZlcyA9IG5ldyBTZXQoKTtcbiAgICBlZGl0b3IuX2RpcnR5RWxlbWVudHMgPSBuZXcgTWFwKCk7XG5cbiAgICBmb3IgKGNvbnN0IGN1cnJlbnRVbnRyYW5zZm9ybWVkRGlydHlFbGVtZW50IG9mIHVudHJhbnNmb3JtZWREaXJ0eUVsZW1lbnRzKSB7XG4gICAgICBjb25zdCBub2RlS2V5ID0gY3VycmVudFVudHJhbnNmb3JtZWREaXJ0eUVsZW1lbnRbMF07XG4gICAgICBjb25zdCBpbnRlbnRpb25hbGx5TWFya2VkQXNEaXJ0eSA9IGN1cnJlbnRVbnRyYW5zZm9ybWVkRGlydHlFbGVtZW50WzFdO1xuXG4gICAgICBpZiAobm9kZUtleSAhPT0gJ3Jvb3QnICYmICFpbnRlbnRpb25hbGx5TWFya2VkQXNEaXJ0eSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgbm9kZSA9IG5vZGVNYXAuZ2V0KG5vZGVLZXkpO1xuXG4gICAgICBpZiAobm9kZSAhPT0gdW5kZWZpbmVkICYmICRpc05vZGVWYWxpZEZvclRyYW5zZm9ybShub2RlLCBjb21wb3NpdGlvbktleSkpIHtcbiAgICAgICAgJGFwcGx5VHJhbnNmb3JtcyhlZGl0b3IsIG5vZGUsIHRyYW5zZm9ybXNDYWNoZSk7XG4gICAgICB9XG5cbiAgICAgIGRpcnR5RWxlbWVudHMuc2V0KG5vZGVLZXksIGludGVudGlvbmFsbHlNYXJrZWRBc0RpcnR5KTtcbiAgICB9XG5cbiAgICB1bnRyYW5zZm9ybWVkRGlydHlMZWF2ZXMgPSBlZGl0b3IuX2RpcnR5TGVhdmVzO1xuICAgIHVudHJhbnNmb3JtZWREaXJ0eUxlYXZlc0xlbmd0aCA9IHVudHJhbnNmb3JtZWREaXJ0eUxlYXZlcy5zaXplO1xuICAgIHVudHJhbnNmb3JtZWREaXJ0eUVsZW1lbnRzID0gZWRpdG9yLl9kaXJ0eUVsZW1lbnRzO1xuICAgIHVudHJhbnNmb3JtZWREaXJ0eUVsZW1lbnRzTGVuZ3RoID0gdW50cmFuc2Zvcm1lZERpcnR5RWxlbWVudHMuc2l6ZTtcbiAgICBpbmZpbml0ZVRyYW5zZm9ybUNvdW50Kys7XG4gIH1cblxuICBlZGl0b3IuX2RpcnR5TGVhdmVzID0gZGlydHlMZWF2ZXM7XG4gIGVkaXRvci5fZGlydHlFbGVtZW50cyA9IGRpcnR5RWxlbWVudHM7XG59XG5cbmZ1bmN0aW9uICRwYXJzZVNlcmlhbGl6ZWROb2RlKHNlcmlhbGl6ZWROb2RlKSB7XG4gIGNvbnN0IGludGVybmFsU2VyaWFsaXplZE5vZGUgPSBzZXJpYWxpemVkTm9kZTtcbiAgcmV0dXJuICRwYXJzZVNlcmlhbGl6ZWROb2RlSW1wbChpbnRlcm5hbFNlcmlhbGl6ZWROb2RlLCBnZXRBY3RpdmVFZGl0b3IoKS5fbm9kZXMpO1xufVxuXG5mdW5jdGlvbiAkcGFyc2VTZXJpYWxpemVkTm9kZUltcGwoc2VyaWFsaXplZE5vZGUsIHJlZ2lzdGVyZWROb2Rlcykge1xuICBjb25zdCB0eXBlID0gc2VyaWFsaXplZE5vZGUudHlwZTtcbiAgY29uc3QgcmVnaXN0ZXJlZE5vZGUgPSByZWdpc3RlcmVkTm9kZXMuZ2V0KHR5cGUpO1xuXG4gIGlmIChyZWdpc3RlcmVkTm9kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAge1xuICAgICAgdGhyb3cgRXJyb3IoYHBhcnNlRWRpdG9yU3RhdGU6IHR5cGUgXCIke3R5cGV9XCIgKyBub3QgZm91bmRgKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBub2RlQ2xhc3MgPSByZWdpc3RlcmVkTm9kZS5rbGFzcztcblxuICBpZiAoc2VyaWFsaXplZE5vZGUudHlwZSAhPT0gbm9kZUNsYXNzLmdldFR5cGUoKSkge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGBMZXhpY2FsTm9kZTogTm9kZSAke25vZGVDbGFzcy5uYW1lfSBkb2VzIG5vdCBpbXBsZW1lbnQgLmltcG9ydEpTT04oKS5gKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBub2RlID0gbm9kZUNsYXNzLmltcG9ydEpTT04oc2VyaWFsaXplZE5vZGUpO1xuICBjb25zdCBjaGlsZHJlbiA9IHNlcmlhbGl6ZWROb2RlLmNoaWxkcmVuO1xuXG4gIGlmICgkaXNFbGVtZW50Tm9kZShub2RlKSAmJiBBcnJheS5pc0FycmF5KGNoaWxkcmVuKSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHNlcmlhbGl6ZWRKU09OQ2hpbGROb2RlID0gY2hpbGRyZW5baV07XG4gICAgICBjb25zdCBjaGlsZE5vZGUgPSAkcGFyc2VTZXJpYWxpemVkTm9kZUltcGwoc2VyaWFsaXplZEpTT05DaGlsZE5vZGUsIHJlZ2lzdGVyZWROb2Rlcyk7XG4gICAgICBub2RlLmFwcGVuZChjaGlsZE5vZGUpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBub2RlO1xufVxuXG5mdW5jdGlvbiBwYXJzZUVkaXRvclN0YXRlKHNlcmlhbGl6ZWRFZGl0b3JTdGF0ZSwgZWRpdG9yLCB1cGRhdGVGbikge1xuICBjb25zdCBlZGl0b3JTdGF0ZSA9IGNyZWF0ZUVtcHR5RWRpdG9yU3RhdGUoKTtcbiAgY29uc3QgcHJldmlvdXNBY3RpdmVFZGl0b3JTdGF0ZSA9IGFjdGl2ZUVkaXRvclN0YXRlO1xuICBjb25zdCBwcmV2aW91c1JlYWRPbmx5TW9kZSA9IGlzUmVhZE9ubHlNb2RlO1xuICBjb25zdCBwcmV2aW91c0FjdGl2ZUVkaXRvciA9IGFjdGl2ZUVkaXRvcjtcbiAgY29uc3QgcHJldmlvdXNEaXJ0eUVsZW1lbnRzID0gZWRpdG9yLl9kaXJ0eUVsZW1lbnRzO1xuICBjb25zdCBwcmV2aW91c0RpcnR5TGVhdmVzID0gZWRpdG9yLl9kaXJ0eUxlYXZlcztcbiAgY29uc3QgcHJldmlvdXNDbG9uZU5vdE5lZWRlZCA9IGVkaXRvci5fY2xvbmVOb3ROZWVkZWQ7XG4gIGNvbnN0IHByZXZpb3VzRGlydHlUeXBlID0gZWRpdG9yLl9kaXJ0eVR5cGU7XG4gIGVkaXRvci5fZGlydHlFbGVtZW50cyA9IG5ldyBNYXAoKTtcbiAgZWRpdG9yLl9kaXJ0eUxlYXZlcyA9IG5ldyBTZXQoKTtcbiAgZWRpdG9yLl9jbG9uZU5vdE5lZWRlZCA9IG5ldyBTZXQoKTtcbiAgZWRpdG9yLl9kaXJ0eVR5cGUgPSAwO1xuICBhY3RpdmVFZGl0b3JTdGF0ZSA9IGVkaXRvclN0YXRlO1xuICBpc1JlYWRPbmx5TW9kZSA9IGZhbHNlO1xuICBhY3RpdmVFZGl0b3IgPSBlZGl0b3I7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCByZWdpc3RlcmVkTm9kZXMgPSBlZGl0b3IuX25vZGVzO1xuICAgIGNvbnN0IHNlcmlhbGl6ZWROb2RlID0gc2VyaWFsaXplZEVkaXRvclN0YXRlLnJvb3Q7XG4gICAgJHBhcnNlU2VyaWFsaXplZE5vZGVJbXBsKHNlcmlhbGl6ZWROb2RlLCByZWdpc3RlcmVkTm9kZXMpO1xuXG4gICAgaWYgKHVwZGF0ZUZuKSB7XG4gICAgICB1cGRhdGVGbigpO1xuICAgIH0gLy8gTWFrZSB0aGUgZWRpdG9yU3RhdGUgaW1tdXRhYmxlXG5cblxuICAgIGVkaXRvclN0YXRlLl9yZWFkT25seSA9IHRydWU7XG5cbiAgICB7XG4gICAgICBoYW5kbGVERVZPbmx5UGVuZGluZ1VwZGF0ZUd1YXJhbnRlZXMoZWRpdG9yU3RhdGUpO1xuICAgIH1cbiAgfSBmaW5hbGx5IHtcbiAgICBlZGl0b3IuX2RpcnR5RWxlbWVudHMgPSBwcmV2aW91c0RpcnR5RWxlbWVudHM7XG4gICAgZWRpdG9yLl9kaXJ0eUxlYXZlcyA9IHByZXZpb3VzRGlydHlMZWF2ZXM7XG4gICAgZWRpdG9yLl9jbG9uZU5vdE5lZWRlZCA9IHByZXZpb3VzQ2xvbmVOb3ROZWVkZWQ7XG4gICAgZWRpdG9yLl9kaXJ0eVR5cGUgPSBwcmV2aW91c0RpcnR5VHlwZTtcbiAgICBhY3RpdmVFZGl0b3JTdGF0ZSA9IHByZXZpb3VzQWN0aXZlRWRpdG9yU3RhdGU7XG4gICAgaXNSZWFkT25seU1vZGUgPSBwcmV2aW91c1JlYWRPbmx5TW9kZTtcbiAgICBhY3RpdmVFZGl0b3IgPSBwcmV2aW91c0FjdGl2ZUVkaXRvcjtcbiAgfVxuXG4gIHJldHVybiBlZGl0b3JTdGF0ZTtcbn0gLy8gVGhpcyB0ZWNobmljYWxseSBpc24ndCBhbiB1cGRhdGUgYnV0IGdpdmVuIHdlIG5lZWRcbi8vIGV4cG9zdXJlIHRvIHRoZSBtb2R1bGUncyBhY3RpdmUgYmluZGluZ3MsIHdlIGhhdmUgdGhpc1xuLy8gZnVuY3Rpb24gaGVyZVxuXG5mdW5jdGlvbiByZWFkRWRpdG9yU3RhdGUoZWRpdG9yU3RhdGUsIGNhbGxiYWNrRm4pIHtcbiAgY29uc3QgcHJldmlvdXNBY3RpdmVFZGl0b3JTdGF0ZSA9IGFjdGl2ZUVkaXRvclN0YXRlO1xuICBjb25zdCBwcmV2aW91c1JlYWRPbmx5TW9kZSA9IGlzUmVhZE9ubHlNb2RlO1xuICBjb25zdCBwcmV2aW91c0FjdGl2ZUVkaXRvciA9IGFjdGl2ZUVkaXRvcjtcbiAgYWN0aXZlRWRpdG9yU3RhdGUgPSBlZGl0b3JTdGF0ZTtcbiAgaXNSZWFkT25seU1vZGUgPSB0cnVlO1xuICBhY3RpdmVFZGl0b3IgPSBudWxsO1xuXG4gIHRyeSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrRm4oKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBhY3RpdmVFZGl0b3JTdGF0ZSA9IHByZXZpb3VzQWN0aXZlRWRpdG9yU3RhdGU7XG4gICAgaXNSZWFkT25seU1vZGUgPSBwcmV2aW91c1JlYWRPbmx5TW9kZTtcbiAgICBhY3RpdmVFZGl0b3IgPSBwcmV2aW91c0FjdGl2ZUVkaXRvcjtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVERVZPbmx5UGVuZGluZ1VwZGF0ZUd1YXJhbnRlZXMocGVuZGluZ0VkaXRvclN0YXRlKSB7XG4gIC8vIEdpdmVuIHdlIGNhbid0IE9iamVjdC5mcmVlemUgdGhlIG5vZGVNYXAgYXMgaXQncyBhIE1hcCxcbiAgLy8gd2UgaW5zdGVhZCByZXBsYWNlIGl0cyBzZXQsIGNsZWFyIGFuZCBkZWxldGUgbWV0aG9kcy5cbiAgY29uc3Qgbm9kZU1hcCA9IHBlbmRpbmdFZGl0b3JTdGF0ZS5fbm9kZU1hcDtcblxuICBub2RlTWFwLnNldCA9ICgpID0+IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBjYWxsIHNldCgpIG9uIGEgZnJvemVuIExleGljYWwgbm9kZSBtYXAnKTtcbiAgfTtcblxuICBub2RlTWFwLmNsZWFyID0gKCkgPT4ge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGNhbGwgY2xlYXIoKSBvbiBhIGZyb3plbiBMZXhpY2FsIG5vZGUgbWFwJyk7XG4gIH07XG5cbiAgbm9kZU1hcC5kZWxldGUgPSAoKSA9PiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgY2FsbCBkZWxldGUoKSBvbiBhIGZyb3plbiBMZXhpY2FsIG5vZGUgbWFwJyk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNvbW1pdFBlbmRpbmdVcGRhdGVzKGVkaXRvcikge1xuICBjb25zdCBwZW5kaW5nRWRpdG9yU3RhdGUgPSBlZGl0b3IuX3BlbmRpbmdFZGl0b3JTdGF0ZTtcbiAgY29uc3Qgcm9vdEVsZW1lbnQgPSBlZGl0b3IuX3Jvb3RFbGVtZW50O1xuICBjb25zdCBzaG91bGRTa2lwRE9NID0gZWRpdG9yLl9oZWFkbGVzcyB8fCByb290RWxlbWVudCA9PT0gbnVsbDtcblxuICBpZiAocGVuZGluZ0VkaXRvclN0YXRlID09PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9IC8vID09PT09PVxuICAvLyBSZWNvbmNpbGlhdGlvbiBoYXMgc3RhcnRlZC5cbiAgLy8gPT09PT09XG5cblxuICBjb25zdCBjdXJyZW50RWRpdG9yU3RhdGUgPSBlZGl0b3IuX2VkaXRvclN0YXRlO1xuICBjb25zdCBjdXJyZW50U2VsZWN0aW9uID0gY3VycmVudEVkaXRvclN0YXRlLl9zZWxlY3Rpb247XG4gIGNvbnN0IHBlbmRpbmdTZWxlY3Rpb24gPSBwZW5kaW5nRWRpdG9yU3RhdGUuX3NlbGVjdGlvbjtcbiAgY29uc3QgbmVlZHNVcGRhdGUgPSBlZGl0b3IuX2RpcnR5VHlwZSAhPT0gTk9fRElSVFlfTk9ERVM7XG4gIGNvbnN0IHByZXZpb3VzQWN0aXZlRWRpdG9yU3RhdGUgPSBhY3RpdmVFZGl0b3JTdGF0ZTtcbiAgY29uc3QgcHJldmlvdXNSZWFkT25seU1vZGUgPSBpc1JlYWRPbmx5TW9kZTtcbiAgY29uc3QgcHJldmlvdXNBY3RpdmVFZGl0b3IgPSBhY3RpdmVFZGl0b3I7XG4gIGNvbnN0IHByZXZpb3VzbHlVcGRhdGluZyA9IGVkaXRvci5fdXBkYXRpbmc7XG4gIGNvbnN0IG9ic2VydmVyID0gZWRpdG9yLl9vYnNlcnZlcjtcbiAgbGV0IG11dGF0ZWROb2RlcyA9IG51bGw7XG4gIGVkaXRvci5fcGVuZGluZ0VkaXRvclN0YXRlID0gbnVsbDtcbiAgZWRpdG9yLl9lZGl0b3JTdGF0ZSA9IHBlbmRpbmdFZGl0b3JTdGF0ZTtcblxuICBpZiAoIXNob3VsZFNraXBET00gJiYgbmVlZHNVcGRhdGUgJiYgb2JzZXJ2ZXIgIT09IG51bGwpIHtcbiAgICBhY3RpdmVFZGl0b3IgPSBlZGl0b3I7XG4gICAgYWN0aXZlRWRpdG9yU3RhdGUgPSBwZW5kaW5nRWRpdG9yU3RhdGU7XG4gICAgaXNSZWFkT25seU1vZGUgPSBmYWxzZTsgLy8gV2UgZG9uJ3Qgd2FudCB1cGRhdGVzIHRvIHN5bmMgYmxvY2sgdGhlIHJlY29uY2lsaWF0aW9uLlxuXG4gICAgZWRpdG9yLl91cGRhdGluZyA9IHRydWU7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgZGlydHlUeXBlID0gZWRpdG9yLl9kaXJ0eVR5cGU7XG4gICAgICBjb25zdCBkaXJ0eUVsZW1lbnRzID0gZWRpdG9yLl9kaXJ0eUVsZW1lbnRzO1xuICAgICAgY29uc3QgZGlydHlMZWF2ZXMgPSBlZGl0b3IuX2RpcnR5TGVhdmVzO1xuICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgbXV0YXRlZE5vZGVzID0gcmVjb25jaWxlUm9vdChjdXJyZW50RWRpdG9yU3RhdGUsIHBlbmRpbmdFZGl0b3JTdGF0ZSwgZWRpdG9yLCBkaXJ0eVR5cGUsIGRpcnR5RWxlbWVudHMsIGRpcnR5TGVhdmVzKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gUmVwb3J0IGVycm9yc1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgZWRpdG9yLl9vbkVycm9yKGVycm9yKTtcbiAgICAgIH0gLy8gUmVzZXQgZWRpdG9yIGFuZCByZXN0b3JlIGluY29taW5nIGVkaXRvciBzdGF0ZSB0byB0aGUgRE9NXG5cblxuICAgICAgaWYgKCFpc0F0dGVtcHRpbmdUb1JlY292ZXJGcm9tUmVjb25jaWxlckVycm9yKSB7XG4gICAgICAgIHJlc2V0RWRpdG9yKGVkaXRvciwgbnVsbCwgcm9vdEVsZW1lbnQsIHBlbmRpbmdFZGl0b3JTdGF0ZSk7XG4gICAgICAgIGluaXRNdXRhdGlvbk9ic2VydmVyKGVkaXRvcik7XG4gICAgICAgIGVkaXRvci5fZGlydHlUeXBlID0gRlVMTF9SRUNPTkNJTEU7XG4gICAgICAgIGlzQXR0ZW1wdGluZ1RvUmVjb3ZlckZyb21SZWNvbmNpbGVyRXJyb3IgPSB0cnVlO1xuICAgICAgICBjb21taXRQZW5kaW5nVXBkYXRlcyhlZGl0b3IpO1xuICAgICAgICBpc0F0dGVtcHRpbmdUb1JlY292ZXJGcm9tUmVjb25jaWxlckVycm9yID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBUbyBhdm9pZCBhIHBvc3NpYmxlIHNpdHVhdGlvbiBvZiBpbmZpbml0ZSBsb29wcywgbGV0cyB0aHJvd1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBvYnNlcnZlci5vYnNlcnZlKHJvb3RFbGVtZW50LCBvYnNlcnZlck9wdGlvbnMpO1xuICAgICAgZWRpdG9yLl91cGRhdGluZyA9IHByZXZpb3VzbHlVcGRhdGluZztcbiAgICAgIGFjdGl2ZUVkaXRvclN0YXRlID0gcHJldmlvdXNBY3RpdmVFZGl0b3JTdGF0ZTtcbiAgICAgIGlzUmVhZE9ubHlNb2RlID0gcHJldmlvdXNSZWFkT25seU1vZGU7XG4gICAgICBhY3RpdmVFZGl0b3IgPSBwcmV2aW91c0FjdGl2ZUVkaXRvcjtcbiAgICB9XG4gIH1cblxuICBpZiAoIXBlbmRpbmdFZGl0b3JTdGF0ZS5fcmVhZE9ubHkpIHtcbiAgICBwZW5kaW5nRWRpdG9yU3RhdGUuX3JlYWRPbmx5ID0gdHJ1ZTtcblxuICAgIHtcbiAgICAgIGhhbmRsZURFVk9ubHlQZW5kaW5nVXBkYXRlR3VhcmFudGVlcyhwZW5kaW5nRWRpdG9yU3RhdGUpO1xuXG4gICAgICBpZiAoJGlzUmFuZ2VTZWxlY3Rpb24ocGVuZGluZ1NlbGVjdGlvbikpIHtcbiAgICAgICAgT2JqZWN0LmZyZWV6ZShwZW5kaW5nU2VsZWN0aW9uLmFuY2hvcik7XG4gICAgICAgIE9iamVjdC5mcmVlemUocGVuZGluZ1NlbGVjdGlvbi5mb2N1cyk7XG4gICAgICB9XG5cbiAgICAgIE9iamVjdC5mcmVlemUocGVuZGluZ1NlbGVjdGlvbik7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgZGlydHlMZWF2ZXMgPSBlZGl0b3IuX2RpcnR5TGVhdmVzO1xuICBjb25zdCBkaXJ0eUVsZW1lbnRzID0gZWRpdG9yLl9kaXJ0eUVsZW1lbnRzO1xuICBjb25zdCBub3JtYWxpemVkTm9kZXMgPSBlZGl0b3IuX25vcm1hbGl6ZWROb2RlcztcbiAgY29uc3QgdGFncyA9IGVkaXRvci5fdXBkYXRlVGFncztcbiAgY29uc3QgZGVmZXJyZWQgPSBlZGl0b3IuX2RlZmVycmVkO1xuXG4gIGlmIChuZWVkc1VwZGF0ZSkge1xuICAgIGVkaXRvci5fZGlydHlUeXBlID0gTk9fRElSVFlfTk9ERVM7XG5cbiAgICBlZGl0b3IuX2Nsb25lTm90TmVlZGVkLmNsZWFyKCk7XG5cbiAgICBlZGl0b3IuX2RpcnR5TGVhdmVzID0gbmV3IFNldCgpO1xuICAgIGVkaXRvci5fZGlydHlFbGVtZW50cyA9IG5ldyBNYXAoKTtcbiAgICBlZGl0b3IuX25vcm1hbGl6ZWROb2RlcyA9IG5ldyBTZXQoKTtcbiAgICBlZGl0b3IuX3VwZGF0ZVRhZ3MgPSBuZXcgU2V0KCk7XG4gIH1cblxuICAkZ2FyYmFnZUNvbGxlY3REZXRhY2hlZERlY29yYXRvcnMoZWRpdG9yLCBwZW5kaW5nRWRpdG9yU3RhdGUpOyAvLyA9PT09PT1cbiAgLy8gUmVjb25jaWxpYXRpb24gaGFzIGZpbmlzaGVkLiBOb3cgdXBkYXRlIHNlbGVjdGlvbiBhbmQgdHJpZ2dlciBsaXN0ZW5lcnMuXG4gIC8vID09PT09PVxuXG4gIGNvbnN0IGRvbVNlbGVjdGlvbiA9IHNob3VsZFNraXBET00gPyBudWxsIDogZ2V0RE9NU2VsZWN0aW9uKGVkaXRvci5fd2luZG93KTsgLy8gQXR0ZW1wdCB0byB1cGRhdGUgdGhlIERPTSBzZWxlY3Rpb24sIGluY2x1ZGluZyBmb2N1c2luZyBvZiB0aGUgcm9vdCBlbGVtZW50LFxuICAvLyBhbmQgc2Nyb2xsIGludG8gdmlldyBpZiBuZWVkZWQuXG5cbiAgaWYgKGVkaXRvci5fZWRpdGFibGUgJiYgLy8gZG9tU2VsZWN0aW9uIHdpbGwgYmUgbnVsbCBpbiBoZWFkbGVzc1xuICAgIGRvbVNlbGVjdGlvbiAhPT0gbnVsbCAmJiAobmVlZHNVcGRhdGUgfHwgcGVuZGluZ1NlbGVjdGlvbiA9PT0gbnVsbCB8fCBwZW5kaW5nU2VsZWN0aW9uLmRpcnR5KSkge1xuICAgIGFjdGl2ZUVkaXRvciA9IGVkaXRvcjtcbiAgICBhY3RpdmVFZGl0b3JTdGF0ZSA9IHBlbmRpbmdFZGl0b3JTdGF0ZTtcblxuICAgIHRyeSB7XG4gICAgICBpZiAob2JzZXJ2ZXIgIT09IG51bGwpIHtcbiAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAobmVlZHNVcGRhdGUgfHwgcGVuZGluZ1NlbGVjdGlvbiA9PT0gbnVsbCB8fCBwZW5kaW5nU2VsZWN0aW9uLmRpcnR5KSB7XG4gICAgICAgIGNvbnN0IGJsb2NrQ3Vyc29yRWxlbWVudCA9IGVkaXRvci5fYmxvY2tDdXJzb3JFbGVtZW50O1xuXG4gICAgICAgIGlmIChibG9ja0N1cnNvckVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgICAgICByZW1vdmVET01CbG9ja0N1cnNvckVsZW1lbnQoYmxvY2tDdXJzb3JFbGVtZW50LCBlZGl0b3IsIHJvb3RFbGVtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHVwZGF0ZURPTVNlbGVjdGlvbihjdXJyZW50U2VsZWN0aW9uLCBwZW5kaW5nU2VsZWN0aW9uLCBlZGl0b3IsIGRvbVNlbGVjdGlvbiwgdGFncywgcm9vdEVsZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICB1cGRhdGVET01CbG9ja0N1cnNvckVsZW1lbnQoZWRpdG9yLCByb290RWxlbWVudCwgcGVuZGluZ1NlbGVjdGlvbik7XG5cbiAgICAgIGlmIChvYnNlcnZlciAhPT0gbnVsbCkge1xuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKHJvb3RFbGVtZW50LCBvYnNlcnZlck9wdGlvbnMpO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBhY3RpdmVFZGl0b3IgPSBwcmV2aW91c0FjdGl2ZUVkaXRvcjtcbiAgICAgIGFjdGl2ZUVkaXRvclN0YXRlID0gcHJldmlvdXNBY3RpdmVFZGl0b3JTdGF0ZTtcbiAgICB9XG4gIH1cblxuICBpZiAobXV0YXRlZE5vZGVzICE9PSBudWxsKSB7XG4gICAgdHJpZ2dlck11dGF0aW9uTGlzdGVuZXJzKGVkaXRvciwgY3VycmVudEVkaXRvclN0YXRlLCBwZW5kaW5nRWRpdG9yU3RhdGUsIG11dGF0ZWROb2RlcywgdGFncywgZGlydHlMZWF2ZXMpO1xuICB9XG5cbiAgaWYgKCEkaXNSYW5nZVNlbGVjdGlvbihwZW5kaW5nU2VsZWN0aW9uKSAmJiBwZW5kaW5nU2VsZWN0aW9uICE9PSBudWxsICYmIChjdXJyZW50U2VsZWN0aW9uID09PSBudWxsIHx8ICFjdXJyZW50U2VsZWN0aW9uLmlzKHBlbmRpbmdTZWxlY3Rpb24pKSkge1xuICAgIGVkaXRvci5kaXNwYXRjaENvbW1hbmQoU0VMRUNUSU9OX0NIQU5HRV9DT01NQU5ELCB1bmRlZmluZWQpO1xuICB9XG4gIC8qKlxuICAgKiBDYXB0dXJlIHBlbmRpbmdEZWNvcmF0b3JzIGFmdGVyIGdhcmJhZ2UgY29sbGVjdGluZyBkZXRhY2hlZCBkZWNvcmF0b3JzXG4gICAqL1xuXG5cbiAgY29uc3QgcGVuZGluZ0RlY29yYXRvcnMgPSBlZGl0b3IuX3BlbmRpbmdEZWNvcmF0b3JzO1xuXG4gIGlmIChwZW5kaW5nRGVjb3JhdG9ycyAhPT0gbnVsbCkge1xuICAgIGVkaXRvci5fZGVjb3JhdG9ycyA9IHBlbmRpbmdEZWNvcmF0b3JzO1xuICAgIGVkaXRvci5fcGVuZGluZ0RlY29yYXRvcnMgPSBudWxsO1xuICAgIHRyaWdnZXJMaXN0ZW5lcnMoJ2RlY29yYXRvcicsIGVkaXRvciwgdHJ1ZSwgcGVuZGluZ0RlY29yYXRvcnMpO1xuICB9XG5cbiAgdHJpZ2dlclRleHRDb250ZW50TGlzdGVuZXJzKGVkaXRvciwgY3VycmVudEVkaXRvclN0YXRlLCBwZW5kaW5nRWRpdG9yU3RhdGUpO1xuICB0cmlnZ2VyTGlzdGVuZXJzKCd1cGRhdGUnLCBlZGl0b3IsIHRydWUsIHtcbiAgICBkaXJ0eUVsZW1lbnRzLFxuICAgIGRpcnR5TGVhdmVzLFxuICAgIGVkaXRvclN0YXRlOiBwZW5kaW5nRWRpdG9yU3RhdGUsXG4gICAgbm9ybWFsaXplZE5vZGVzLFxuICAgIHByZXZFZGl0b3JTdGF0ZTogY3VycmVudEVkaXRvclN0YXRlLFxuICAgIHRhZ3NcbiAgfSk7XG4gIHRyaWdnZXJEZWZlcnJlZFVwZGF0ZUNhbGxiYWNrcyhlZGl0b3IsIGRlZmVycmVkKTtcbiAgdHJpZ2dlckVucXVldWVkVXBkYXRlcyhlZGl0b3IpO1xufVxuXG5mdW5jdGlvbiB0cmlnZ2VyVGV4dENvbnRlbnRMaXN0ZW5lcnMoZWRpdG9yLCBjdXJyZW50RWRpdG9yU3RhdGUsIHBlbmRpbmdFZGl0b3JTdGF0ZSkge1xuICBjb25zdCBjdXJyZW50VGV4dENvbnRlbnQgPSBnZXRFZGl0b3JTdGF0ZVRleHRDb250ZW50KGN1cnJlbnRFZGl0b3JTdGF0ZSk7XG4gIGNvbnN0IGxhdGVzdFRleHRDb250ZW50ID0gZ2V0RWRpdG9yU3RhdGVUZXh0Q29udGVudChwZW5kaW5nRWRpdG9yU3RhdGUpO1xuXG4gIGlmIChjdXJyZW50VGV4dENvbnRlbnQgIT09IGxhdGVzdFRleHRDb250ZW50KSB7XG4gICAgdHJpZ2dlckxpc3RlbmVycygndGV4dGNvbnRlbnQnLCBlZGl0b3IsIHRydWUsIGxhdGVzdFRleHRDb250ZW50KTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cmlnZ2VyTXV0YXRpb25MaXN0ZW5lcnMoZWRpdG9yLCBjdXJyZW50RWRpdG9yU3RhdGUsIHBlbmRpbmdFZGl0b3JTdGF0ZSwgbXV0YXRlZE5vZGVzLCB1cGRhdGVUYWdzLCBkaXJ0eUxlYXZlcykge1xuICBjb25zdCBsaXN0ZW5lcnMgPSBBcnJheS5mcm9tKGVkaXRvci5fbGlzdGVuZXJzLm11dGF0aW9uKTtcbiAgY29uc3QgbGlzdGVuZXJzTGVuZ3RoID0gbGlzdGVuZXJzLmxlbmd0aDtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RlbmVyc0xlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgW2xpc3RlbmVyLCBrbGFzc10gPSBsaXN0ZW5lcnNbaV07XG4gICAgY29uc3QgbXV0YXRlZE5vZGVzQnlUeXBlID0gbXV0YXRlZE5vZGVzLmdldChrbGFzcyk7XG5cbiAgICBpZiAobXV0YXRlZE5vZGVzQnlUeXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGxpc3RlbmVyKG11dGF0ZWROb2Rlc0J5VHlwZSwge1xuICAgICAgICBkaXJ0eUxlYXZlcyxcbiAgICAgICAgdXBkYXRlVGFnc1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHRyaWdnZXJMaXN0ZW5lcnModHlwZSwgZWRpdG9yLCBpc0N1cnJlbnRseUVucXVldWluZ1VwZGF0ZXMsIC4uLnBheWxvYWQpIHtcbiAgY29uc3QgcHJldmlvdXNseVVwZGF0aW5nID0gZWRpdG9yLl91cGRhdGluZztcbiAgZWRpdG9yLl91cGRhdGluZyA9IGlzQ3VycmVudGx5RW5xdWV1aW5nVXBkYXRlcztcblxuICB0cnkge1xuICAgIGNvbnN0IGxpc3RlbmVycyA9IEFycmF5LmZyb20oZWRpdG9yLl9saXN0ZW5lcnNbdHlwZV0pO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGxpc3RlbmVyc1tpXS5hcHBseShudWxsLCBwYXlsb2FkKTtcbiAgICB9XG4gIH0gZmluYWxseSB7XG4gICAgZWRpdG9yLl91cGRhdGluZyA9IHByZXZpb3VzbHlVcGRhdGluZztcbiAgfVxufVxuZnVuY3Rpb24gdHJpZ2dlckNvbW1hbmRMaXN0ZW5lcnMoZWRpdG9yLCB0eXBlLCBwYXlsb2FkKSB7XG4gIGlmIChlZGl0b3IuX3VwZGF0aW5nID09PSBmYWxzZSB8fCBhY3RpdmVFZGl0b3IgIT09IGVkaXRvcikge1xuICAgIGxldCByZXR1cm5WYWwgPSBmYWxzZTtcbiAgICBlZGl0b3IudXBkYXRlKCgpID0+IHtcbiAgICAgIHJldHVyblZhbCA9IHRyaWdnZXJDb21tYW5kTGlzdGVuZXJzKGVkaXRvciwgdHlwZSwgcGF5bG9hZCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJldHVyblZhbDtcbiAgfVxuXG4gIGNvbnN0IGVkaXRvcnMgPSBnZXRFZGl0b3JzVG9Qcm9wYWdhdGUoZWRpdG9yKTtcblxuICBmb3IgKGxldCBpID0gNDsgaSA+PSAwOyBpLS0pIHtcbiAgICBmb3IgKGxldCBlID0gMDsgZSA8IGVkaXRvcnMubGVuZ3RoOyBlKyspIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRFZGl0b3IgPSBlZGl0b3JzW2VdO1xuICAgICAgY29uc3QgY29tbWFuZExpc3RlbmVycyA9IGN1cnJlbnRFZGl0b3IuX2NvbW1hbmRzO1xuICAgICAgY29uc3QgbGlzdGVuZXJJblByaW9yaXR5T3JkZXIgPSBjb21tYW5kTGlzdGVuZXJzLmdldCh0eXBlKTtcblxuICAgICAgaWYgKGxpc3RlbmVySW5Qcmlvcml0eU9yZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzU2V0ID0gbGlzdGVuZXJJblByaW9yaXR5T3JkZXJbaV07XG5cbiAgICAgICAgaWYgKGxpc3RlbmVyc1NldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gQXJyYXkuZnJvbShsaXN0ZW5lcnNTZXQpO1xuICAgICAgICAgIGNvbnN0IGxpc3RlbmVyc0xlbmd0aCA9IGxpc3RlbmVycy5sZW5ndGg7XG5cbiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGxpc3RlbmVyc0xlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBpZiAobGlzdGVuZXJzW2pdKHBheWxvYWQsIGVkaXRvcikgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiB0cmlnZ2VyRW5xdWV1ZWRVcGRhdGVzKGVkaXRvcikge1xuICBjb25zdCBxdWV1ZWRVcGRhdGVzID0gZWRpdG9yLl91cGRhdGVzO1xuXG4gIGlmIChxdWV1ZWRVcGRhdGVzLmxlbmd0aCAhPT0gMCkge1xuICAgIGNvbnN0IHF1ZXVlZFVwZGF0ZSA9IHF1ZXVlZFVwZGF0ZXMuc2hpZnQoKTtcblxuICAgIGlmIChxdWV1ZWRVcGRhdGUpIHtcbiAgICAgIGNvbnN0IFt1cGRhdGVGbiwgb3B0aW9uc10gPSBxdWV1ZWRVcGRhdGU7XG4gICAgICBiZWdpblVwZGF0ZShlZGl0b3IsIHVwZGF0ZUZuLCBvcHRpb25zKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gdHJpZ2dlckRlZmVycmVkVXBkYXRlQ2FsbGJhY2tzKGVkaXRvciwgZGVmZXJyZWQpIHtcbiAgZWRpdG9yLl9kZWZlcnJlZCA9IFtdO1xuXG4gIGlmIChkZWZlcnJlZC5sZW5ndGggIT09IDApIHtcbiAgICBjb25zdCBwcmV2aW91c2x5VXBkYXRpbmcgPSBlZGl0b3IuX3VwZGF0aW5nO1xuICAgIGVkaXRvci5fdXBkYXRpbmcgPSB0cnVlO1xuXG4gICAgdHJ5IHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVmZXJyZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZGVmZXJyZWRbaV0oKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgZWRpdG9yLl91cGRhdGluZyA9IHByZXZpb3VzbHlVcGRhdGluZztcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJvY2Vzc05lc3RlZFVwZGF0ZXMoZWRpdG9yLCBpbml0aWFsU2tpcFRyYW5zZm9ybXMpIHtcbiAgY29uc3QgcXVldWVkVXBkYXRlcyA9IGVkaXRvci5fdXBkYXRlcztcbiAgbGV0IHNraXBUcmFuc2Zvcm1zID0gaW5pdGlhbFNraXBUcmFuc2Zvcm1zIHx8IGZhbHNlOyAvLyBVcGRhdGVzIG1pZ2h0IGdyb3cgYXMgd2UgcHJvY2VzcyB0aGVtLCB3ZSBzbyB3ZSdsbCBuZWVkXG4gIC8vIHRvIGhhbmRsZSBlYWNoIHVwZGF0ZSBhcyB3ZSBnbyB1bnRpbCB0aGUgdXBkYXRlcyBhcnJheSBpc1xuICAvLyBlbXB0eS5cblxuICB3aGlsZSAocXVldWVkVXBkYXRlcy5sZW5ndGggIT09IDApIHtcbiAgICBjb25zdCBxdWV1ZWRVcGRhdGUgPSBxdWV1ZWRVcGRhdGVzLnNoaWZ0KCk7XG5cbiAgICBpZiAocXVldWVkVXBkYXRlKSB7XG4gICAgICBjb25zdCBbbmV4dFVwZGF0ZUZuLCBvcHRpb25zXSA9IHF1ZXVlZFVwZGF0ZTtcbiAgICAgIGxldCBvblVwZGF0ZTtcbiAgICAgIGxldCB0YWc7XG5cbiAgICAgIGlmIChvcHRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgb25VcGRhdGUgPSBvcHRpb25zLm9uVXBkYXRlO1xuICAgICAgICB0YWcgPSBvcHRpb25zLnRhZztcblxuICAgICAgICBpZiAob3B0aW9ucy5za2lwVHJhbnNmb3Jtcykge1xuICAgICAgICAgIHNraXBUcmFuc2Zvcm1zID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvblVwZGF0ZSkge1xuICAgICAgICAgIGVkaXRvci5fZGVmZXJyZWQucHVzaChvblVwZGF0ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGFnKSB7XG4gICAgICAgICAgZWRpdG9yLl91cGRhdGVUYWdzLmFkZCh0YWcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG5leHRVcGRhdGVGbigpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBza2lwVHJhbnNmb3Jtcztcbn1cblxuZnVuY3Rpb24gYmVnaW5VcGRhdGUoZWRpdG9yLCB1cGRhdGVGbiwgb3B0aW9ucykge1xuICBjb25zdCB1cGRhdGVUYWdzID0gZWRpdG9yLl91cGRhdGVUYWdzO1xuICBsZXQgb25VcGRhdGU7XG4gIGxldCB0YWc7XG4gIGxldCBza2lwVHJhbnNmb3JtcyA9IGZhbHNlO1xuICBsZXQgZGlzY3JldGUgPSBmYWxzZTtcblxuICBpZiAob3B0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgb25VcGRhdGUgPSBvcHRpb25zLm9uVXBkYXRlO1xuICAgIHRhZyA9IG9wdGlvbnMudGFnO1xuXG4gICAgaWYgKHRhZyAhPSBudWxsKSB7XG4gICAgICB1cGRhdGVUYWdzLmFkZCh0YWcpO1xuICAgIH1cblxuICAgIHNraXBUcmFuc2Zvcm1zID0gb3B0aW9ucy5za2lwVHJhbnNmb3JtcyB8fCBmYWxzZTtcbiAgICBkaXNjcmV0ZSA9IG9wdGlvbnMuZGlzY3JldGUgfHwgZmFsc2U7XG4gIH1cblxuICBpZiAob25VcGRhdGUpIHtcbiAgICBlZGl0b3IuX2RlZmVycmVkLnB1c2gob25VcGRhdGUpO1xuICB9XG5cbiAgY29uc3QgY3VycmVudEVkaXRvclN0YXRlID0gZWRpdG9yLl9lZGl0b3JTdGF0ZTtcbiAgbGV0IHBlbmRpbmdFZGl0b3JTdGF0ZSA9IGVkaXRvci5fcGVuZGluZ0VkaXRvclN0YXRlO1xuICBsZXQgZWRpdG9yU3RhdGVXYXNDbG9uZWQgPSBmYWxzZTtcblxuICBpZiAocGVuZGluZ0VkaXRvclN0YXRlID09PSBudWxsIHx8IHBlbmRpbmdFZGl0b3JTdGF0ZS5fcmVhZE9ubHkpIHtcbiAgICBwZW5kaW5nRWRpdG9yU3RhdGUgPSBlZGl0b3IuX3BlbmRpbmdFZGl0b3JTdGF0ZSA9IGNsb25lRWRpdG9yU3RhdGUocGVuZGluZ0VkaXRvclN0YXRlIHx8IGN1cnJlbnRFZGl0b3JTdGF0ZSk7XG4gICAgZWRpdG9yU3RhdGVXYXNDbG9uZWQgPSB0cnVlO1xuICB9XG5cbiAgcGVuZGluZ0VkaXRvclN0YXRlLl9mbHVzaFN5bmMgPSBkaXNjcmV0ZTtcbiAgY29uc3QgcHJldmlvdXNBY3RpdmVFZGl0b3JTdGF0ZSA9IGFjdGl2ZUVkaXRvclN0YXRlO1xuICBjb25zdCBwcmV2aW91c1JlYWRPbmx5TW9kZSA9IGlzUmVhZE9ubHlNb2RlO1xuICBjb25zdCBwcmV2aW91c0FjdGl2ZUVkaXRvciA9IGFjdGl2ZUVkaXRvcjtcbiAgY29uc3QgcHJldmlvdXNseVVwZGF0aW5nID0gZWRpdG9yLl91cGRhdGluZztcbiAgYWN0aXZlRWRpdG9yU3RhdGUgPSBwZW5kaW5nRWRpdG9yU3RhdGU7XG4gIGlzUmVhZE9ubHlNb2RlID0gZmFsc2U7XG4gIGVkaXRvci5fdXBkYXRpbmcgPSB0cnVlO1xuICBhY3RpdmVFZGl0b3IgPSBlZGl0b3I7XG5cbiAgdHJ5IHtcbiAgICBpZiAoZWRpdG9yU3RhdGVXYXNDbG9uZWQpIHtcbiAgICAgIGlmIChlZGl0b3IuX2hlYWRsZXNzKSB7XG4gICAgICAgIGlmIChjdXJyZW50RWRpdG9yU3RhdGUuX3NlbGVjdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgcGVuZGluZ0VkaXRvclN0YXRlLl9zZWxlY3Rpb24gPSBjdXJyZW50RWRpdG9yU3RhdGUuX3NlbGVjdGlvbi5jbG9uZSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwZW5kaW5nRWRpdG9yU3RhdGUuX3NlbGVjdGlvbiA9IGludGVybmFsQ3JlYXRlU2VsZWN0aW9uKGVkaXRvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnRpbmdDb21wb3NpdGlvbktleSA9IGVkaXRvci5fY29tcG9zaXRpb25LZXk7XG4gICAgdXBkYXRlRm4oKTtcbiAgICBza2lwVHJhbnNmb3JtcyA9IHByb2Nlc3NOZXN0ZWRVcGRhdGVzKGVkaXRvciwgc2tpcFRyYW5zZm9ybXMpO1xuICAgIGFwcGx5U2VsZWN0aW9uVHJhbnNmb3JtcyhwZW5kaW5nRWRpdG9yU3RhdGUsIGVkaXRvcik7XG5cbiAgICBpZiAoZWRpdG9yLl9kaXJ0eVR5cGUgIT09IE5PX0RJUlRZX05PREVTKSB7XG4gICAgICBpZiAoc2tpcFRyYW5zZm9ybXMpIHtcbiAgICAgICAgJG5vcm1hbGl6ZUFsbERpcnR5VGV4dE5vZGVzKHBlbmRpbmdFZGl0b3JTdGF0ZSwgZWRpdG9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRhcHBseUFsbFRyYW5zZm9ybXMocGVuZGluZ0VkaXRvclN0YXRlLCBlZGl0b3IpO1xuICAgICAgfVxuXG4gICAgICBwcm9jZXNzTmVzdGVkVXBkYXRlcyhlZGl0b3IpO1xuICAgICAgJGdhcmJhZ2VDb2xsZWN0RGV0YWNoZWROb2RlcyhjdXJyZW50RWRpdG9yU3RhdGUsIHBlbmRpbmdFZGl0b3JTdGF0ZSwgZWRpdG9yLl9kaXJ0eUxlYXZlcywgZWRpdG9yLl9kaXJ0eUVsZW1lbnRzKTtcbiAgICB9XG5cbiAgICBjb25zdCBlbmRpbmdDb21wb3NpdGlvbktleSA9IGVkaXRvci5fY29tcG9zaXRpb25LZXk7XG5cbiAgICBpZiAoc3RhcnRpbmdDb21wb3NpdGlvbktleSAhPT0gZW5kaW5nQ29tcG9zaXRpb25LZXkpIHtcbiAgICAgIHBlbmRpbmdFZGl0b3JTdGF0ZS5fZmx1c2hTeW5jID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBwZW5kaW5nU2VsZWN0aW9uID0gcGVuZGluZ0VkaXRvclN0YXRlLl9zZWxlY3Rpb247XG5cbiAgICBpZiAoJGlzUmFuZ2VTZWxlY3Rpb24ocGVuZGluZ1NlbGVjdGlvbikpIHtcbiAgICAgIGNvbnN0IHBlbmRpbmdOb2RlTWFwID0gcGVuZGluZ0VkaXRvclN0YXRlLl9ub2RlTWFwO1xuICAgICAgY29uc3QgYW5jaG9yS2V5ID0gcGVuZGluZ1NlbGVjdGlvbi5hbmNob3Iua2V5O1xuICAgICAgY29uc3QgZm9jdXNLZXkgPSBwZW5kaW5nU2VsZWN0aW9uLmZvY3VzLmtleTtcblxuICAgICAgaWYgKHBlbmRpbmdOb2RlTWFwLmdldChhbmNob3JLZXkpID09PSB1bmRlZmluZWQgfHwgcGVuZGluZ05vZGVNYXAuZ2V0KGZvY3VzS2V5KSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHtcbiAgICAgICAgICB0aHJvdyBFcnJvcihgdXBkYXRlRWRpdG9yOiBzZWxlY3Rpb24gaGFzIGJlZW4gbG9zdCBiZWNhdXNlIHRoZSBwcmV2aW91c2x5IHNlbGVjdGVkIG5vZGVzIGhhdmUgYmVlbiByZW1vdmVkIGFuZCBzZWxlY3Rpb24gd2Fzbid0IG1vdmVkIHRvIGFub3RoZXIgbm9kZS4gRW5zdXJlIHNlbGVjdGlvbiBjaGFuZ2VzIGFmdGVyIHJlbW92aW5nL3JlcGxhY2luZyBhIHNlbGVjdGVkIG5vZGUuYCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCRpc05vZGVTZWxlY3Rpb24ocGVuZGluZ1NlbGVjdGlvbikpIHtcbiAgICAgIC8vIFRPRE86IHdlIHNob3VsZCBhbHNvIHZhbGlkYXRlIG5vZGUgc2VsZWN0aW9uP1xuICAgICAgaWYgKHBlbmRpbmdTZWxlY3Rpb24uX25vZGVzLnNpemUgPT09IDApIHtcbiAgICAgICAgcGVuZGluZ0VkaXRvclN0YXRlLl9zZWxlY3Rpb24gPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAvLyBSZXBvcnQgZXJyb3JzXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGVkaXRvci5fb25FcnJvcihlcnJvcik7XG4gICAgfSAvLyBSZXN0b3JlIGV4aXN0aW5nIGVkaXRvciBzdGF0ZSB0byB0aGUgRE9NXG5cblxuICAgIGVkaXRvci5fcGVuZGluZ0VkaXRvclN0YXRlID0gY3VycmVudEVkaXRvclN0YXRlO1xuICAgIGVkaXRvci5fZGlydHlUeXBlID0gRlVMTF9SRUNPTkNJTEU7XG5cbiAgICBlZGl0b3IuX2Nsb25lTm90TmVlZGVkLmNsZWFyKCk7XG5cbiAgICBlZGl0b3IuX2RpcnR5TGVhdmVzID0gbmV3IFNldCgpO1xuXG4gICAgZWRpdG9yLl9kaXJ0eUVsZW1lbnRzLmNsZWFyKCk7XG5cbiAgICBjb21taXRQZW5kaW5nVXBkYXRlcyhlZGl0b3IpO1xuICAgIHJldHVybjtcbiAgfSBmaW5hbGx5IHtcbiAgICBhY3RpdmVFZGl0b3JTdGF0ZSA9IHByZXZpb3VzQWN0aXZlRWRpdG9yU3RhdGU7XG4gICAgaXNSZWFkT25seU1vZGUgPSBwcmV2aW91c1JlYWRPbmx5TW9kZTtcbiAgICBhY3RpdmVFZGl0b3IgPSBwcmV2aW91c0FjdGl2ZUVkaXRvcjtcbiAgICBlZGl0b3IuX3VwZGF0aW5nID0gcHJldmlvdXNseVVwZGF0aW5nO1xuICAgIGluZmluaXRlVHJhbnNmb3JtQ291bnQgPSAwO1xuICB9XG5cbiAgY29uc3Qgc2hvdWxkVXBkYXRlID0gZWRpdG9yLl9kaXJ0eVR5cGUgIT09IE5PX0RJUlRZX05PREVTIHx8IGVkaXRvclN0YXRlSGFzRGlydHlTZWxlY3Rpb24ocGVuZGluZ0VkaXRvclN0YXRlLCBlZGl0b3IpO1xuXG4gIGlmIChzaG91bGRVcGRhdGUpIHtcbiAgICBpZiAocGVuZGluZ0VkaXRvclN0YXRlLl9mbHVzaFN5bmMpIHtcbiAgICAgIHBlbmRpbmdFZGl0b3JTdGF0ZS5fZmx1c2hTeW5jID0gZmFsc2U7XG4gICAgICBjb21taXRQZW5kaW5nVXBkYXRlcyhlZGl0b3IpO1xuICAgIH0gZWxzZSBpZiAoZWRpdG9yU3RhdGVXYXNDbG9uZWQpIHtcbiAgICAgIHNjaGVkdWxlTWljcm9UYXNrKCgpID0+IHtcbiAgICAgICAgY29tbWl0UGVuZGluZ1VwZGF0ZXMoZWRpdG9yKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBwZW5kaW5nRWRpdG9yU3RhdGUuX2ZsdXNoU3luYyA9IGZhbHNlO1xuXG4gICAgaWYgKGVkaXRvclN0YXRlV2FzQ2xvbmVkKSB7XG4gICAgICB1cGRhdGVUYWdzLmNsZWFyKCk7XG4gICAgICBlZGl0b3IuX2RlZmVycmVkID0gW107XG4gICAgICBlZGl0b3IuX3BlbmRpbmdFZGl0b3JTdGF0ZSA9IG51bGw7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUVkaXRvcihlZGl0b3IsIHVwZGF0ZUZuLCBvcHRpb25zKSB7XG4gIGlmIChlZGl0b3IuX3VwZGF0aW5nKSB7XG4gICAgZWRpdG9yLl91cGRhdGVzLnB1c2goW3VwZGF0ZUZuLCBvcHRpb25zXSk7XG4gIH0gZWxzZSB7XG4gICAgYmVnaW5VcGRhdGUoZWRpdG9yLCB1cGRhdGVGbiwgb3B0aW9ucyk7XG4gIH1cbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlTm9kZShub2RlVG9SZW1vdmUsIHJlc3RvcmVTZWxlY3Rpb24sIHByZXNlcnZlRW1wdHlQYXJlbnQpIHtcbiAgZXJyb3JPblJlYWRPbmx5KCk7XG4gIGNvbnN0IGtleSA9IG5vZGVUb1JlbW92ZS5fX2tleTtcbiAgY29uc3QgcGFyZW50ID0gbm9kZVRvUmVtb3ZlLmdldFBhcmVudCgpO1xuXG4gIGlmIChwYXJlbnQgPT09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBzZWxlY3Rpb24gPSAkbWF5YmVNb3ZlQ2hpbGRyZW5TZWxlY3Rpb25Ub1BhcmVudChub2RlVG9SZW1vdmUpO1xuICBsZXQgc2VsZWN0aW9uTW92ZWQgPSBmYWxzZTtcblxuICBpZiAoJGlzUmFuZ2VTZWxlY3Rpb24oc2VsZWN0aW9uKSAmJiByZXN0b3JlU2VsZWN0aW9uKSB7XG4gICAgY29uc3QgYW5jaG9yID0gc2VsZWN0aW9uLmFuY2hvcjtcbiAgICBjb25zdCBmb2N1cyA9IHNlbGVjdGlvbi5mb2N1cztcblxuICAgIGlmIChhbmNob3Iua2V5ID09PSBrZXkpIHtcbiAgICAgIG1vdmVTZWxlY3Rpb25Qb2ludFRvU2libGluZyhhbmNob3IsIG5vZGVUb1JlbW92ZSwgcGFyZW50LCBub2RlVG9SZW1vdmUuZ2V0UHJldmlvdXNTaWJsaW5nKCksIG5vZGVUb1JlbW92ZS5nZXROZXh0U2libGluZygpKTtcbiAgICAgIHNlbGVjdGlvbk1vdmVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoZm9jdXMua2V5ID09PSBrZXkpIHtcbiAgICAgIG1vdmVTZWxlY3Rpb25Qb2ludFRvU2libGluZyhmb2N1cywgbm9kZVRvUmVtb3ZlLCBwYXJlbnQsIG5vZGVUb1JlbW92ZS5nZXRQcmV2aW91c1NpYmxpbmcoKSwgbm9kZVRvUmVtb3ZlLmdldE5leHRTaWJsaW5nKCkpO1xuICAgICAgc2VsZWN0aW9uTW92ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGlmICgkaXNSYW5nZVNlbGVjdGlvbihzZWxlY3Rpb24pICYmIHJlc3RvcmVTZWxlY3Rpb24gJiYgIXNlbGVjdGlvbk1vdmVkKSB7XG4gICAgLy8gRG9pbmcgdGhpcyBpcyBPKG4pIHNvIGxldHMgYXZvaWQgaXQgdW5sZXNzIHdlIG5lZWQgdG8gZG8gaXRcbiAgICBjb25zdCBpbmRleCA9IG5vZGVUb1JlbW92ZS5nZXRJbmRleFdpdGhpblBhcmVudCgpO1xuICAgIHJlbW92ZUZyb21QYXJlbnQobm9kZVRvUmVtb3ZlKTtcbiAgICAkdXBkYXRlRWxlbWVudFNlbGVjdGlvbk9uQ3JlYXRlRGVsZXRlTm9kZShzZWxlY3Rpb24sIHBhcmVudCwgaW5kZXgsIC0xKTtcbiAgfSBlbHNlIHtcbiAgICByZW1vdmVGcm9tUGFyZW50KG5vZGVUb1JlbW92ZSk7XG4gIH1cblxuICBpZiAoIXByZXNlcnZlRW1wdHlQYXJlbnQgJiYgISRpc1Jvb3RPclNoYWRvd1Jvb3QocGFyZW50KSAmJiAhcGFyZW50LmNhbkJlRW1wdHkoKSAmJiBwYXJlbnQuaXNFbXB0eSgpKSB7XG4gICAgcmVtb3ZlTm9kZShwYXJlbnQsIHJlc3RvcmVTZWxlY3Rpb24pO1xuICB9XG5cbiAgaWYgKHJlc3RvcmVTZWxlY3Rpb24gJiYgJGlzUm9vdE5vZGUocGFyZW50KSAmJiBwYXJlbnQuaXNFbXB0eSgpKSB7XG4gICAgcGFyZW50LnNlbGVjdEVuZCgpO1xuICB9XG59XG5jbGFzcyBMZXhpY2FsTm9kZSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gIC8vIEZsb3cgZG9lc24ndCBzdXBwb3J0IGFic3RyYWN0IGNsYXNzZXMgdW5mb3J0dW5hdGVseSwgc28gd2UgY2FuJ3QgX2ZvcmNlX1xuICAvLyBzdWJjbGFzc2VzIG9mIE5vZGUgdG8gaW1wbGVtZW50IHN0YXRpY3MuIEFsbCBzdWJjbGFzc2VzIG9mIE5vZGUgc2hvdWxkIGhhdmVcbiAgLy8gYSBzdGF0aWMgZ2V0VHlwZSBhbmQgY2xvbmUgbWV0aG9kIHRob3VnaC4gV2UgZGVmaW5lIGdldFR5cGUgYW5kIGNsb25lIGhlcmUgc28gd2UgY2FuIGNhbGwgaXRcbiAgLy8gb24gYW55ICBOb2RlLCBhbmQgd2UgdGhyb3cgdGhpcyBlcnJvciBieSBkZWZhdWx0IHNpbmNlIHRoZSBzdWJjbGFzcyBzaG91bGQgcHJvdmlkZVxuICAvLyB0aGVpciBvd24gaW1wbGVtZW50YXRpb24uXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHN0cmluZyB0eXBlIG9mIHRoaXMgbm9kZS4gRXZlcnkgbm9kZSBtdXN0XG4gICAqIGltcGxlbWVudCB0aGlzIGFuZCBpdCBNVVNUIEJFIFVOSVFVRSBhbW9uZ3N0IG5vZGVzIHJlZ2lzdGVyZWRcbiAgICogb24gdGhlIGVkaXRvci5cbiAgICpcbiAgICovXG4gIHN0YXRpYyBnZXRUeXBlKCkge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGBMZXhpY2FsTm9kZTogTm9kZSAke3RoaXMubmFtZX0gZG9lcyBub3QgaW1wbGVtZW50IC5nZXRUeXBlKCkuYCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDbG9uZXMgdGhpcyBub2RlLCBjcmVhdGluZyBhIG5ldyBub2RlIHdpdGggYSBkaWZmZXJlbnQga2V5XG4gICAqIGFuZCBhZGRpbmcgaXQgdG8gdGhlIEVkaXRvclN0YXRlIChidXQgbm90IGF0dGFjaGluZyBpdCBhbnl3aGVyZSEpLiBBbGwgbm9kZXMgbXVzdFxuICAgKiBpbXBsZW1lbnQgdGhpcyBtZXRob2QuXG4gICAqXG4gICAqL1xuXG5cbiAgc3RhdGljIGNsb25lKF9kYXRhKSB7XG4gICAge1xuICAgICAgdGhyb3cgRXJyb3IoYExleGljYWxOb2RlOiBOb2RlICR7dGhpcy5uYW1lfSBkb2VzIG5vdCBpbXBsZW1lbnQgLmNsb25lKCkuYCk7XG4gICAgfVxuICB9XG5cbiAgY29uc3RydWN0b3Ioa2V5KSB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgIHRoaXMuX190eXBlID0gdGhpcy5jb25zdHJ1Y3Rvci5nZXRUeXBlKCk7XG4gICAgdGhpcy5fX3BhcmVudCA9IG51bGw7XG4gICAgdGhpcy5fX3ByZXYgPSBudWxsO1xuICAgIHRoaXMuX19uZXh0ID0gbnVsbDtcbiAgICAkc2V0Tm9kZUtleSh0aGlzLCBrZXkpO1xuXG4gICAge1xuICAgICAgaWYgKHRoaXMuX190eXBlICE9PSAncm9vdCcpIHtcbiAgICAgICAgZXJyb3JPblJlYWRPbmx5KCk7XG4gICAgICAgIGVycm9yT25UeXBlS2xhc3NNaXNtYXRjaCh0aGlzLl9fdHlwZSwgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgIHRoaXMuY29uc3RydWN0b3IpO1xuICAgICAgfVxuICAgIH1cbiAgfSAvLyBHZXR0ZXJzIGFuZCBUcmF2ZXJzZXJzXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHN0cmluZyB0eXBlIG9mIHRoaXMgbm9kZS5cbiAgICovXG5cblxuICBnZXRUeXBlKCkge1xuICAgIHJldHVybiB0aGlzLl9fdHlwZTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZXJlIGlzIGEgcGF0aCBiZXR3ZWVuIHRoaXMgbm9kZSBhbmQgdGhlIFJvb3ROb2RlLCBmYWxzZSBvdGhlcndpc2UuXG4gICAqIFRoaXMgaXMgYSB3YXkgb2YgZGV0ZXJtaW5pbmcgaWYgdGhlIG5vZGUgaXMgXCJhdHRhY2hlZFwiIEVkaXRvclN0YXRlLiBVbmF0dGFjaGVkIG5vZGVzXG4gICAqIHdvbid0IGJlIHJlY29uY2lsZWQgYW5kIHdpbGwgdWx0aW1hdGVsdCBiZSBjbGVhbmVkIHVwIGJ5IHRoZSBMZXhpY2FsIEdDLlxuICAgKi9cblxuXG4gIGlzQXR0YWNoZWQoKSB7XG4gICAgbGV0IG5vZGVLZXkgPSB0aGlzLl9fa2V5O1xuXG4gICAgd2hpbGUgKG5vZGVLZXkgIT09IG51bGwpIHtcbiAgICAgIGlmIChub2RlS2V5ID09PSAncm9vdCcpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5vZGUgPSAkZ2V0Tm9kZUJ5S2V5KG5vZGVLZXkpO1xuXG4gICAgICBpZiAobm9kZSA9PT0gbnVsbCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgbm9kZUtleSA9IG5vZGUuX19wYXJlbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBub2RlIGlzIGNvbnRhaW5lZCB3aXRoaW4gdGhlIHByb3ZpZGVkIFNlbGVjdGlvbi4sIGZhbHNlIG90aGVyd2lzZS5cbiAgICogUmVsaWVzIG9uIHRoZSBhbGdvcml0aG1zIGltcGxlbWVudGVkIGluIHtAbGluayBCYXNlU2VsZWN0aW9uLmdldE5vZGVzfSB0byBkZXRlcm1pbmVcbiAgICogd2hhdCdzIGluY2x1ZGVkLlxuICAgKlxuICAgKiBAcGFyYW0gc2VsZWN0aW9uIC0gVGhlIHNlbGVjdGlvbiB0aGF0IHdlIHdhbnQgdG8gZGV0ZXJtaW5lIGlmIHRoZSBub2RlIGlzIGluLlxuICAgKi9cblxuXG4gIGlzU2VsZWN0ZWQoc2VsZWN0aW9uKSB7XG4gICAgY29uc3QgdGFyZ2V0U2VsZWN0aW9uID0gc2VsZWN0aW9uIHx8ICRnZXRTZWxlY3Rpb24oKTtcblxuICAgIGlmICh0YXJnZXRTZWxlY3Rpb24gPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSB0YXJnZXRTZWxlY3Rpb24uZ2V0Tm9kZXMoKS5zb21lKG4gPT4gbi5fX2tleSA9PT0gdGhpcy5fX2tleSk7XG5cbiAgICBpZiAoJGlzVGV4dE5vZGUodGhpcykpIHtcbiAgICAgIHJldHVybiBpc1NlbGVjdGVkO1xuICAgIH0gLy8gRm9yIGlubGluZSBpbWFnZXMgaW5zaWRlIG9mIGVsZW1lbnQgbm9kZXMuXG4gICAgLy8gV2l0aG91dCB0aGlzIGNoYW5nZSB0aGUgaW1hZ2Ugd2lsbCBiZSBzZWxlY3RlZCBpZiB0aGUgY3Vyc29yIGlzIGJlZm9yZSBvciBhZnRlciBpdC5cblxuXG4gICAgaWYgKCRpc1JhbmdlU2VsZWN0aW9uKHRhcmdldFNlbGVjdGlvbikgJiYgdGFyZ2V0U2VsZWN0aW9uLmFuY2hvci50eXBlID09PSAnZWxlbWVudCcgJiYgdGFyZ2V0U2VsZWN0aW9uLmZvY3VzLnR5cGUgPT09ICdlbGVtZW50JyAmJiB0YXJnZXRTZWxlY3Rpb24uYW5jaG9yLmtleSA9PT0gdGFyZ2V0U2VsZWN0aW9uLmZvY3VzLmtleSAmJiB0YXJnZXRTZWxlY3Rpb24uYW5jaG9yLm9mZnNldCA9PT0gdGFyZ2V0U2VsZWN0aW9uLmZvY3VzLm9mZnNldCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiBpc1NlbGVjdGVkO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoaXMgbm9kZXMga2V5LlxuICAgKi9cblxuXG4gIGdldEtleSgpIHtcbiAgICAvLyBLZXkgaXMgc3RhYmxlIGJldHdlZW4gY29waWVzXG4gICAgcmV0dXJuIHRoaXMuX19rZXk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHplcm8tYmFzZWQgaW5kZXggb2YgdGhpcyBub2RlIHdpdGhpbiB0aGUgcGFyZW50LlxuICAgKi9cblxuXG4gIGdldEluZGV4V2l0aGluUGFyZW50KCkge1xuICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuZ2V0UGFyZW50KCk7XG5cbiAgICBpZiAocGFyZW50ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuXG4gICAgbGV0IG5vZGUgPSBwYXJlbnQuZ2V0Rmlyc3RDaGlsZCgpO1xuICAgIGxldCBpbmRleCA9IDA7XG5cbiAgICB3aGlsZSAobm9kZSAhPT0gbnVsbCkge1xuICAgICAgaWYgKHRoaXMuaXMobm9kZSkpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgfVxuXG4gICAgICBpbmRleCsrO1xuICAgICAgbm9kZSA9IG5vZGUuZ2V0TmV4dFNpYmxpbmcoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHBhcmVudCBvZiB0aGlzIG5vZGUsIG9yIG51bGwgaWYgbm9uZSBpcyBmb3VuZC5cbiAgICovXG5cblxuICBnZXRQYXJlbnQoKSB7XG4gICAgY29uc3QgcGFyZW50ID0gdGhpcy5nZXRMYXRlc3QoKS5fX3BhcmVudDtcblxuICAgIGlmIChwYXJlbnQgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiAkZ2V0Tm9kZUJ5S2V5KHBhcmVudCk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHBhcmVudCBvZiB0aGlzIG5vZGUsIG9yIHRocm93cyBpZiBub25lIGlzIGZvdW5kLlxuICAgKi9cblxuXG4gIGdldFBhcmVudE9yVGhyb3coKSB7XG4gICAgY29uc3QgcGFyZW50ID0gdGhpcy5nZXRQYXJlbnQoKTtcblxuICAgIGlmIChwYXJlbnQgPT09IG51bGwpIHtcbiAgICAgIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoYEV4cGVjdGVkIG5vZGUgJHt0aGlzLl9fa2V5fSB0byBoYXZlIGEgcGFyZW50LmApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwYXJlbnQ7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGhpZ2hlc3QgKGluIHRoZSBFZGl0b3JTdGF0ZSB0cmVlKVxuICAgKiBub24tcm9vdCBhbmNlc3RvciBvZiB0aGlzIG5vZGUsIG9yIG51bGwgaWYgbm9uZSBpcyBmb3VuZC4gU2VlIHtAbGluayBsZXhpY2FsISRpc1Jvb3RPclNoYWRvd1Jvb3R9XG4gICAqIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHdoaWNoIEVsZW1lbnRzIGNvbXByaXNlIFwicm9vdHNcIi5cbiAgICovXG5cblxuICBnZXRUb3BMZXZlbEVsZW1lbnQoKSB7XG4gICAgbGV0IG5vZGUgPSB0aGlzO1xuXG4gICAgd2hpbGUgKG5vZGUgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IHBhcmVudCA9IG5vZGUuZ2V0UGFyZW50KCk7XG5cbiAgICAgIGlmICgkaXNSb290T3JTaGFkb3dSb290KHBhcmVudCkpIHtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICB9XG5cbiAgICAgIG5vZGUgPSBwYXJlbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGhpZ2hlc3QgKGluIHRoZSBFZGl0b3JTdGF0ZSB0cmVlKVxuICAgKiBub24tcm9vdCBhbmNlc3RvciBvZiB0aGlzIG5vZGUsIG9yIHRocm93cyBpZiBub25lIGlzIGZvdW5kLiBTZWUge0BsaW5rIGxleGljYWwhJGlzUm9vdE9yU2hhZG93Um9vdH1cbiAgICogZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gd2hpY2ggRWxlbWVudHMgY29tcHJpc2UgXCJyb290c1wiLlxuICAgKi9cblxuXG4gIGdldFRvcExldmVsRWxlbWVudE9yVGhyb3coKSB7XG4gICAgY29uc3QgcGFyZW50ID0gdGhpcy5nZXRUb3BMZXZlbEVsZW1lbnQoKTtcblxuICAgIGlmIChwYXJlbnQgPT09IG51bGwpIHtcbiAgICAgIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoYEV4cGVjdGVkIG5vZGUgJHt0aGlzLl9fa2V5fSB0byBoYXZlIGEgdG9wIHBhcmVudCBlbGVtZW50LmApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwYXJlbnQ7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBsaXN0IG9mIHRoZSBldmVyeSBhbmNlc3RvciBvZiB0aGlzIG5vZGUsXG4gICAqIGFsbCB0aGUgd2F5IHVwIHRvIHRoZSBSb290Tm9kZS5cbiAgICpcbiAgICovXG5cblxuICBnZXRQYXJlbnRzKCkge1xuICAgIGNvbnN0IHBhcmVudHMgPSBbXTtcbiAgICBsZXQgbm9kZSA9IHRoaXMuZ2V0UGFyZW50KCk7XG5cbiAgICB3aGlsZSAobm9kZSAhPT0gbnVsbCkge1xuICAgICAgcGFyZW50cy5wdXNoKG5vZGUpO1xuICAgICAgbm9kZSA9IG5vZGUuZ2V0UGFyZW50KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcmVudHM7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBsaXN0IG9mIHRoZSBrZXlzIG9mIGV2ZXJ5IGFuY2VzdG9yIG9mIHRoaXMgbm9kZSxcbiAgICogYWxsIHRoZSB3YXkgdXAgdG8gdGhlIFJvb3ROb2RlLlxuICAgKlxuICAgKi9cblxuXG4gIGdldFBhcmVudEtleXMoKSB7XG4gICAgY29uc3QgcGFyZW50cyA9IFtdO1xuICAgIGxldCBub2RlID0gdGhpcy5nZXRQYXJlbnQoKTtcblxuICAgIHdoaWxlIChub2RlICE9PSBudWxsKSB7XG4gICAgICBwYXJlbnRzLnB1c2gobm9kZS5fX2tleSk7XG4gICAgICBub2RlID0gbm9kZS5nZXRQYXJlbnQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFyZW50cztcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgXCJwcmV2aW91c1wiIHNpYmxpbmdzIC0gdGhhdCBpcywgdGhlIG5vZGUgdGhhdCBjb21lc1xuICAgKiBiZWZvcmUgdGhpcyBvbmUgaW4gdGhlIHNhbWUgcGFyZW50LlxuICAgKlxuICAgKi9cblxuXG4gIGdldFByZXZpb3VzU2libGluZygpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcy5nZXRMYXRlc3QoKTtcbiAgICBjb25zdCBwcmV2S2V5ID0gc2VsZi5fX3ByZXY7XG4gICAgcmV0dXJuIHByZXZLZXkgPT09IG51bGwgPyBudWxsIDogJGdldE5vZGVCeUtleShwcmV2S2V5KTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgXCJwcmV2aW91c1wiIHNpYmxpbmdzIC0gdGhhdCBpcywgdGhlIG5vZGVzIHRoYXQgY29tZSBiZXR3ZWVuXG4gICAqIHRoaXMgb25lIGFuZCB0aGUgZmlyc3QgY2hpbGQgb2YgaXQncyBwYXJlbnQsIGluY2x1c2l2ZS5cbiAgICpcbiAgICovXG5cblxuICBnZXRQcmV2aW91c1NpYmxpbmdzKCkge1xuICAgIGNvbnN0IHNpYmxpbmdzID0gW107XG4gICAgY29uc3QgcGFyZW50ID0gdGhpcy5nZXRQYXJlbnQoKTtcblxuICAgIGlmIChwYXJlbnQgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBzaWJsaW5ncztcbiAgICB9XG5cbiAgICBsZXQgbm9kZSA9IHBhcmVudC5nZXRGaXJzdENoaWxkKCk7XG5cbiAgICB3aGlsZSAobm9kZSAhPT0gbnVsbCkge1xuICAgICAgaWYgKG5vZGUuaXModGhpcykpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIHNpYmxpbmdzLnB1c2gobm9kZSk7XG4gICAgICBub2RlID0gbm9kZS5nZXROZXh0U2libGluZygpO1xuICAgIH1cblxuICAgIHJldHVybiBzaWJsaW5ncztcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgXCJuZXh0XCIgc2libGluZ3MgLSB0aGF0IGlzLCB0aGUgbm9kZSB0aGF0IGNvbWVzXG4gICAqIGFmdGVyIHRoaXMgb25lIGluIHRoZSBzYW1lIHBhcmVudFxuICAgKlxuICAgKi9cblxuXG4gIGdldE5leHRTaWJsaW5nKCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzLmdldExhdGVzdCgpO1xuICAgIGNvbnN0IG5leHRLZXkgPSBzZWxmLl9fbmV4dDtcbiAgICByZXR1cm4gbmV4dEtleSA9PT0gbnVsbCA/IG51bGwgOiAkZ2V0Tm9kZUJ5S2V5KG5leHRLZXkpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFsbCBcIm5leHRcIiBzaWJsaW5ncyAtIHRoYXQgaXMsIHRoZSBub2RlcyB0aGF0IGNvbWUgYmV0d2VlbiB0aGlzXG4gICAqIG9uZSBhbmQgdGhlIGxhc3QgY2hpbGQgb2YgaXQncyBwYXJlbnQsIGluY2x1c2l2ZS5cbiAgICpcbiAgICovXG5cblxuICBnZXROZXh0U2libGluZ3MoKSB7XG4gICAgY29uc3Qgc2libGluZ3MgPSBbXTtcbiAgICBsZXQgbm9kZSA9IHRoaXMuZ2V0TmV4dFNpYmxpbmcoKTtcblxuICAgIHdoaWxlIChub2RlICE9PSBudWxsKSB7XG4gICAgICBzaWJsaW5ncy5wdXNoKG5vZGUpO1xuICAgICAgbm9kZSA9IG5vZGUuZ2V0TmV4dFNpYmxpbmcoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2libGluZ3M7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGNsb3Nlc3QgY29tbW9uIGFuY2VzdG9yIG9mIHRoaXMgbm9kZSBhbmQgdGhlIHByb3ZpZGVkIG9uZSBvciBudWxsXG4gICAqIGlmIG9uZSBjYW5ub3QgYmUgZm91bmQuXG4gICAqXG4gICAqIEBwYXJhbSBub2RlIC0gdGhlIG90aGVyIG5vZGUgdG8gZmluZCB0aGUgY29tbW9uIGFuY2VzdG9yIG9mLlxuICAgKi9cblxuXG4gIGdldENvbW1vbkFuY2VzdG9yKG5vZGUpIHtcbiAgICBjb25zdCBhID0gdGhpcy5nZXRQYXJlbnRzKCk7XG4gICAgY29uc3QgYiA9IG5vZGUuZ2V0UGFyZW50cygpO1xuXG4gICAgaWYgKCRpc0VsZW1lbnROb2RlKHRoaXMpKSB7XG4gICAgICBhLnVuc2hpZnQodGhpcyk7XG4gICAgfVxuXG4gICAgaWYgKCRpc0VsZW1lbnROb2RlKG5vZGUpKSB7XG4gICAgICBiLnVuc2hpZnQobm9kZSk7XG4gICAgfVxuXG4gICAgY29uc3QgYUxlbmd0aCA9IGEubGVuZ3RoO1xuICAgIGNvbnN0IGJMZW5ndGggPSBiLmxlbmd0aDtcblxuICAgIGlmIChhTGVuZ3RoID09PSAwIHx8IGJMZW5ndGggPT09IDAgfHwgYVthTGVuZ3RoIC0gMV0gIT09IGJbYkxlbmd0aCAtIDFdKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBiU2V0ID0gbmV3IFNldChiKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYUxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBhbmNlc3RvciA9IGFbaV07XG5cbiAgICAgIGlmIChiU2V0LmhhcyhhbmNlc3RvcikpIHtcbiAgICAgICAgcmV0dXJuIGFuY2VzdG9yO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIG5vZGUgaXMgdGhlIGV4YWN0IHNhbWUgb25lIGFzIHRoaXMgbm9kZSwgZnJvbSBMZXhpY2FsJ3MgcGVyc3BlY3RpdmUuXG4gICAqIEFsd2F5cyB1c2UgdGhpcyBpbnN0ZWFkIG9mIHJlZmVyZW50aWFsIGVxdWFsaXR5LlxuICAgKlxuICAgKiBAcGFyYW0gb2JqZWN0IC0gdGhlIG5vZGUgdG8gcGVyZm9ybSB0aGUgZXF1YWxpdHkgY29tcGFyaXNvbiBvbi5cbiAgICovXG5cblxuICBpcyhvYmplY3QpIHtcbiAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fX2tleSA9PT0gb2JqZWN0Ll9fa2V5O1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBub2RlIGxvZ2ljYWwgcHJlY2VkZXMgdGhlIHRhcmdldCBub2RlIGluIHRoZSBlZGl0b3Igc3RhdGUuXG4gICAqXG4gICAqIEBwYXJhbSB0YXJnZXROb2RlIC0gdGhlIG5vZGUgd2UncmUgdGVzdGluZyB0byBzZWUgaWYgaXQncyBhZnRlciB0aGlzIG9uZS5cbiAgICovXG5cblxuICBpc0JlZm9yZSh0YXJnZXROb2RlKSB7XG4gICAgaWYgKHRoaXMgPT09IHRhcmdldE5vZGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAodGFyZ2V0Tm9kZS5pc1BhcmVudE9mKHRoaXMpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc1BhcmVudE9mKHRhcmdldE5vZGUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgY29tbW9uQW5jZXN0b3IgPSB0aGlzLmdldENvbW1vbkFuY2VzdG9yKHRhcmdldE5vZGUpO1xuICAgIGxldCBpbmRleEEgPSAwO1xuICAgIGxldCBpbmRleEIgPSAwO1xuICAgIGxldCBub2RlID0gdGhpcztcblxuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBjb25zdCBwYXJlbnQgPSBub2RlLmdldFBhcmVudE9yVGhyb3coKTtcblxuICAgICAgaWYgKHBhcmVudCA9PT0gY29tbW9uQW5jZXN0b3IpIHtcbiAgICAgICAgaW5kZXhBID0gbm9kZS5nZXRJbmRleFdpdGhpblBhcmVudCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgbm9kZSA9IHBhcmVudDtcbiAgICB9XG5cbiAgICBub2RlID0gdGFyZ2V0Tm9kZTtcblxuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBjb25zdCBwYXJlbnQgPSBub2RlLmdldFBhcmVudE9yVGhyb3coKTtcblxuICAgICAgaWYgKHBhcmVudCA9PT0gY29tbW9uQW5jZXN0b3IpIHtcbiAgICAgICAgaW5kZXhCID0gbm9kZS5nZXRJbmRleFdpdGhpblBhcmVudCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgbm9kZSA9IHBhcmVudDtcbiAgICB9XG5cbiAgICByZXR1cm4gaW5kZXhBIDwgaW5kZXhCO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBub2RlIGlzIHRoZSBwYXJlbnQgb2YgdGhlIHRhcmdldCBub2RlLCBmYWxzZSBvdGhlcndpc2UuXG4gICAqXG4gICAqIEBwYXJhbSB0YXJnZXROb2RlIC0gdGhlIHdvdWxkLWJlIGNoaWxkIG5vZGUuXG4gICAqL1xuXG5cbiAgaXNQYXJlbnRPZih0YXJnZXROb2RlKSB7XG4gICAgY29uc3Qga2V5ID0gdGhpcy5fX2tleTtcblxuICAgIGlmIChrZXkgPT09IHRhcmdldE5vZGUuX19rZXkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBsZXQgbm9kZSA9IHRhcmdldE5vZGU7XG5cbiAgICB3aGlsZSAobm9kZSAhPT0gbnVsbCkge1xuICAgICAgaWYgKG5vZGUuX19rZXkgPT09IGtleSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgbm9kZSA9IG5vZGUuZ2V0UGFyZW50KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IC8vIFRPLURPOiB0aGlzIGZ1bmN0aW9uIGNhbiBiZSBzaW1wbGlmaWVkIGEgbG90XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBsaXN0IG9mIG5vZGVzIHRoYXQgYXJlIGJldHdlZW4gdGhpcyBub2RlIGFuZFxuICAgKiB0aGUgdGFyZ2V0IG5vZGUgaW4gdGhlIEVkaXRvclN0YXRlLlxuICAgKlxuICAgKiBAcGFyYW0gdGFyZ2V0Tm9kZSAtIHRoZSBub2RlIHRoYXQgbWFya3MgdGhlIG90aGVyIGVuZCBvZiB0aGUgcmFuZ2Ugb2Ygbm9kZXMgdG8gYmUgcmV0dXJuZWQuXG4gICAqL1xuXG5cbiAgZ2V0Tm9kZXNCZXR3ZWVuKHRhcmdldE5vZGUpIHtcbiAgICBjb25zdCBpc0JlZm9yZSA9IHRoaXMuaXNCZWZvcmUodGFyZ2V0Tm9kZSk7XG4gICAgY29uc3Qgbm9kZXMgPSBbXTtcbiAgICBjb25zdCB2aXNpdGVkID0gbmV3IFNldCgpO1xuICAgIGxldCBub2RlID0gdGhpcztcblxuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBjb25zdCBrZXkgPSBub2RlLl9fa2V5O1xuXG4gICAgICBpZiAoIXZpc2l0ZWQuaGFzKGtleSkpIHtcbiAgICAgICAgdmlzaXRlZC5hZGQoa2V5KTtcbiAgICAgICAgbm9kZXMucHVzaChub2RlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG5vZGUgPT09IHRhcmdldE5vZGUpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNoaWxkID0gJGlzRWxlbWVudE5vZGUobm9kZSkgPyBpc0JlZm9yZSA/IG5vZGUuZ2V0Rmlyc3RDaGlsZCgpIDogbm9kZS5nZXRMYXN0Q2hpbGQoKSA6IG51bGw7XG5cbiAgICAgIGlmIChjaGlsZCAhPT0gbnVsbCkge1xuICAgICAgICBub2RlID0gY2hpbGQ7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBuZXh0U2libGluZyA9IGlzQmVmb3JlID8gbm9kZS5nZXROZXh0U2libGluZygpIDogbm9kZS5nZXRQcmV2aW91c1NpYmxpbmcoKTtcblxuICAgICAgaWYgKG5leHRTaWJsaW5nICE9PSBudWxsKSB7XG4gICAgICAgIG5vZGUgPSBuZXh0U2libGluZztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBhcmVudCA9IG5vZGUuZ2V0UGFyZW50T3JUaHJvdygpO1xuXG4gICAgICBpZiAoIXZpc2l0ZWQuaGFzKHBhcmVudC5fX2tleSkpIHtcbiAgICAgICAgbm9kZXMucHVzaChwYXJlbnQpO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyZW50ID09PSB0YXJnZXROb2RlKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBsZXQgcGFyZW50U2libGluZyA9IG51bGw7XG4gICAgICBsZXQgYW5jZXN0b3IgPSBwYXJlbnQ7XG5cbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKGFuY2VzdG9yID09PSBudWxsKSB7XG4gICAgICAgICAge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYGdldE5vZGVzQmV0d2VlbjogYW5jZXN0b3IgaXMgbnVsbGApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHBhcmVudFNpYmxpbmcgPSBpc0JlZm9yZSA/IGFuY2VzdG9yLmdldE5leHRTaWJsaW5nKCkgOiBhbmNlc3Rvci5nZXRQcmV2aW91c1NpYmxpbmcoKTtcbiAgICAgICAgYW5jZXN0b3IgPSBhbmNlc3Rvci5nZXRQYXJlbnQoKTtcblxuICAgICAgICBpZiAoYW5jZXN0b3IgIT09IG51bGwpIHtcbiAgICAgICAgICBpZiAocGFyZW50U2libGluZyA9PT0gbnVsbCAmJiAhdmlzaXRlZC5oYXMoYW5jZXN0b3IuX19rZXkpKSB7XG4gICAgICAgICAgICBub2Rlcy5wdXNoKGFuY2VzdG9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gd2hpbGUgKHBhcmVudFNpYmxpbmcgPT09IG51bGwpO1xuXG4gICAgICBub2RlID0gcGFyZW50U2libGluZztcbiAgICB9XG5cbiAgICBpZiAoIWlzQmVmb3JlKSB7XG4gICAgICBub2Rlcy5yZXZlcnNlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5vZGVzO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBub2RlIGhhcyBiZWVuIG1hcmtlZCBkaXJ0eSBkdXJpbmcgdGhpcyB1cGRhdGUgY3ljbGUuXG4gICAqXG4gICAqL1xuXG5cbiAgaXNEaXJ0eSgpIHtcbiAgICBjb25zdCBlZGl0b3IgPSBnZXRBY3RpdmVFZGl0b3IoKTtcbiAgICBjb25zdCBkaXJ0eUxlYXZlcyA9IGVkaXRvci5fZGlydHlMZWF2ZXM7XG4gICAgcmV0dXJuIGRpcnR5TGVhdmVzICE9PSBudWxsICYmIGRpcnR5TGVhdmVzLmhhcyh0aGlzLl9fa2V5KTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbGF0ZXN0IHZlcnNpb24gb2YgdGhlIG5vZGUgZnJvbSB0aGUgYWN0aXZlIEVkaXRvclN0YXRlLlxuICAgKiBUaGlzIGlzIHVzZWQgdG8gYXZvaWQgZ2V0dGluZyB2YWx1ZXMgZnJvbSBzdGFsZSBub2RlIHJlZmVyZW5jZXMuXG4gICAqXG4gICAqL1xuXG5cbiAgZ2V0TGF0ZXN0KCkge1xuICAgIGNvbnN0IGxhdGVzdCA9ICRnZXROb2RlQnlLZXkodGhpcy5fX2tleSk7XG5cbiAgICBpZiAobGF0ZXN0ID09PSBudWxsKSB7XG4gICAgICB7XG4gICAgICAgIHRocm93IEVycm9yKGBMZXhpY2FsIG5vZGUgZG9lcyBub3QgZXhpc3QgaW4gYWN0aXZlIGVkaXRvciBzdGF0ZS4gQXZvaWQgdXNpbmcgdGhlIHNhbWUgbm9kZSByZWZlcmVuY2VzIGJldHdlZW4gbmVzdGVkIGNsb3N1cmVzIGZyb20gZWRpdG9yU3RhdGUucmVhZC9lZGl0b3IudXBkYXRlLmApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBsYXRlc3Q7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBtdXRhYmxlIHZlcnNpb24gb2YgdGhlIG5vZGUuIFdpbGwgdGhyb3cgYW4gZXJyb3IgaWZcbiAgICogY2FsbGVkIG91dHNpZGUgb2YgYSBMZXhpY2FsIEVkaXRvciB7QGxpbmsgTGV4aWNhbEVkaXRvci51cGRhdGV9IGNhbGxiYWNrLlxuICAgKlxuICAgKi9cblxuXG4gIGdldFdyaXRhYmxlKCkge1xuICAgIGVycm9yT25SZWFkT25seSgpO1xuICAgIGNvbnN0IGVkaXRvclN0YXRlID0gZ2V0QWN0aXZlRWRpdG9yU3RhdGUoKTtcbiAgICBjb25zdCBlZGl0b3IgPSBnZXRBY3RpdmVFZGl0b3IoKTtcbiAgICBjb25zdCBub2RlTWFwID0gZWRpdG9yU3RhdGUuX25vZGVNYXA7XG4gICAgY29uc3Qga2V5ID0gdGhpcy5fX2tleTsgLy8gRW5zdXJlIHdlIGdldCB0aGUgbGF0ZXN0IG5vZGUgZnJvbSBwZW5kaW5nIHN0YXRlXG5cbiAgICBjb25zdCBsYXRlc3ROb2RlID0gdGhpcy5nZXRMYXRlc3QoKTtcbiAgICBjb25zdCBwYXJlbnQgPSBsYXRlc3ROb2RlLl9fcGFyZW50O1xuICAgIGNvbnN0IGNsb25lTm90TmVlZGVkID0gZWRpdG9yLl9jbG9uZU5vdE5lZWRlZDtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSAkZ2V0U2VsZWN0aW9uKCk7XG5cbiAgICBpZiAoc2VsZWN0aW9uICE9PSBudWxsKSB7XG4gICAgICBzZWxlY3Rpb24uX2NhY2hlZE5vZGVzID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoY2xvbmVOb3ROZWVkZWQuaGFzKGtleSkpIHtcbiAgICAgIC8vIFRyYW5zZm9ybXMgY2xlYXIgdGhlIGRpcnR5IG5vZGUgc2V0IG9uIGVhY2ggaXRlcmF0aW9uIHRvIGtlZXAgdHJhY2sgb24gbmV3bHkgZGlydHkgbm9kZXNcbiAgICAgIGludGVybmFsTWFya05vZGVBc0RpcnR5KGxhdGVzdE5vZGUpO1xuICAgICAgcmV0dXJuIGxhdGVzdE5vZGU7XG4gICAgfVxuXG4gICAgY29uc3QgY29uc3RydWN0b3IgPSBsYXRlc3ROb2RlLmNvbnN0cnVjdG9yOyAvLyBAdHMtZXhwZWN0LWVycm9yXG5cbiAgICBjb25zdCBtdXRhYmxlTm9kZSA9IGNvbnN0cnVjdG9yLmNsb25lKGxhdGVzdE5vZGUpO1xuICAgIG11dGFibGVOb2RlLl9fcGFyZW50ID0gcGFyZW50O1xuICAgIG11dGFibGVOb2RlLl9fbmV4dCA9IGxhdGVzdE5vZGUuX19uZXh0O1xuICAgIG11dGFibGVOb2RlLl9fcHJldiA9IGxhdGVzdE5vZGUuX19wcmV2O1xuXG4gICAgaWYgKCRpc0VsZW1lbnROb2RlKGxhdGVzdE5vZGUpICYmICRpc0VsZW1lbnROb2RlKG11dGFibGVOb2RlKSkge1xuICAgICAgbXV0YWJsZU5vZGUuX19maXJzdCA9IGxhdGVzdE5vZGUuX19maXJzdDtcbiAgICAgIG11dGFibGVOb2RlLl9fbGFzdCA9IGxhdGVzdE5vZGUuX19sYXN0O1xuICAgICAgbXV0YWJsZU5vZGUuX19zaXplID0gbGF0ZXN0Tm9kZS5fX3NpemU7XG4gICAgICBtdXRhYmxlTm9kZS5fX2luZGVudCA9IGxhdGVzdE5vZGUuX19pbmRlbnQ7XG4gICAgICBtdXRhYmxlTm9kZS5fX2Zvcm1hdCA9IGxhdGVzdE5vZGUuX19mb3JtYXQ7XG4gICAgICBtdXRhYmxlTm9kZS5fX2RpciA9IGxhdGVzdE5vZGUuX19kaXI7XG4gICAgfSBlbHNlIGlmICgkaXNUZXh0Tm9kZShsYXRlc3ROb2RlKSAmJiAkaXNUZXh0Tm9kZShtdXRhYmxlTm9kZSkpIHtcbiAgICAgIG11dGFibGVOb2RlLl9fZm9ybWF0ID0gbGF0ZXN0Tm9kZS5fX2Zvcm1hdDtcbiAgICAgIG11dGFibGVOb2RlLl9fc3R5bGUgPSBsYXRlc3ROb2RlLl9fc3R5bGU7XG4gICAgICBtdXRhYmxlTm9kZS5fX21vZGUgPSBsYXRlc3ROb2RlLl9fbW9kZTtcbiAgICAgIG11dGFibGVOb2RlLl9fZGV0YWlsID0gbGF0ZXN0Tm9kZS5fX2RldGFpbDtcbiAgICB9XG5cbiAgICBjbG9uZU5vdE5lZWRlZC5hZGQoa2V5KTtcbiAgICBtdXRhYmxlTm9kZS5fX2tleSA9IGtleTtcbiAgICBpbnRlcm5hbE1hcmtOb2RlQXNEaXJ0eShtdXRhYmxlTm9kZSk7IC8vIFVwZGF0ZSByZWZlcmVuY2UgaW4gbm9kZSBtYXBcblxuICAgIG5vZGVNYXAuc2V0KGtleSwgbXV0YWJsZU5vZGUpO1xuICAgIHJldHVybiBtdXRhYmxlTm9kZTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdGV4dCBjb250ZW50IG9mIHRoZSBub2RlLiBPdmVycmlkZSB0aGlzIGZvclxuICAgKiBjdXN0b20gbm9kZXMgdGhhdCBzaG91bGQgaGF2ZSBhIHJlcHJlc2VudGF0aW9uIGluIHBsYWluIHRleHRcbiAgICogZm9ybWF0IChmb3IgY29weSArIHBhc3RlLCBmb3IgZXhhbXBsZSlcbiAgICpcbiAgICovXG5cblxuICBnZXRUZXh0Q29udGVudCgpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGxlbmd0aCBvZiB0aGUgc3RyaW5nIHByb2R1Y2VkIGJ5IGNhbGxpbmcgZ2V0VGV4dENvbnRlbnQgb24gdGhpcyBub2RlLlxuICAgKlxuICAgKi9cblxuXG4gIGdldFRleHRDb250ZW50U2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRUZXh0Q29udGVudCgpLmxlbmd0aDtcbiAgfSAvLyBWaWV3XG5cbiAgLyoqXG4gICAqIENhbGxlZCBkdXJpbmcgdGhlIHJlY29uY2lsaWF0aW9uIHByb2Nlc3MgdG8gZGV0ZXJtaW5lIHdoaWNoIG5vZGVzXG4gICAqIHRvIGluc2VydCBpbnRvIHRoZSBET00gZm9yIHRoaXMgTGV4aWNhbCBOb2RlLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBtdXN0IHJldHVybiBleGFjdGx5IG9uZSBIVE1MRWxlbWVudC4gTmVzdGVkIGVsZW1lbnRzIGFyZSBub3Qgc3VwcG9ydGVkLlxuICAgKlxuICAgKiBEbyBub3QgYXR0ZW1wdCB0byB1cGRhdGUgdGhlIExleGljYWwgRWRpdG9yU3RhdGUgZHVyaW5nIHRoaXMgcGhhc2Ugb2YgdGhlIHVwZGF0ZSBsaWZlY3lsZS5cbiAgICpcbiAgICogQHBhcmFtIF9jb25maWcgLSBhbGxvd3MgYWNjZXNzIHRvIHRoaW5ncyBsaWtlIHRoZSBFZGl0b3JUaGVtZSAodG8gYXBwbHkgY2xhc3NlcykgZHVyaW5nIHJlY29uY2lsaWF0aW9uLlxuICAgKiBAcGFyYW0gX2VkaXRvciAtIGFsbG93cyBhY2Nlc3MgdG8gdGhlIGVkaXRvciBmb3IgY29udGV4dCBkdXJpbmcgcmVjb25jaWxpYXRpb24uXG4gICAqXG4gICAqICovXG5cblxuICBjcmVhdGVET00oX2NvbmZpZywgX2VkaXRvcikge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGBjcmVhdGVET006IGJhc2UgbWV0aG9kIG5vdCBleHRlbmRlZGApO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gYSBub2RlIGNoYW5nZXMgYW5kIHNob3VsZCB1cGRhdGUgdGhlIERPTVxuICAgKiBpbiB3aGF0ZXZlciB3YXkgaXMgbmVjZXNzYXJ5IHRvIG1ha2UgaXQgYWxpZ24gd2l0aCBhbnkgY2hhbmdlcyB0aGF0IG1pZ2h0XG4gICAqIGhhdmUgaGFwcGVuZWQgZHVyaW5nIHRoZSB1cGRhdGUuXG4gICAqXG4gICAqIFJldHVybmluZyBcInRydWVcIiBoZXJlIHdpbGwgY2F1c2UgbGV4aWNhbCB0byB1bm1vdW50IGFuZCByZWNyZWF0ZSB0aGUgRE9NIG5vZGVcbiAgICogKGJ5IGNhbGxpbmcgY3JlYXRlRE9NKS4gWW91IHdvdWxkIG5lZWQgdG8gZG8gdGhpcyBpZiB0aGUgZWxlbWVudCB0YWcgY2hhbmdlcyxcbiAgICogZm9yIGluc3RhbmNlLlxuICAgKlxuICAgKiAqL1xuXG5cbiAgdXBkYXRlRE9NKF9wcmV2Tm9kZSwgX2RvbSwgX2NvbmZpZykge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGB1cGRhdGVET006IGJhc2UgbWV0aG9kIG5vdCBleHRlbmRlZGApO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ29udHJvbHMgaG93IHRoZSB0aGlzIG5vZGUgaXMgc2VyaWFsaXplZCB0byBIVE1MLiBUaGlzIGlzIGltcG9ydGFudCBmb3JcbiAgICogY29weSBhbmQgcGFzdGUgYmV0d2VlbiBMZXhpY2FsIGFuZCBub24tTGV4aWNhbCBlZGl0b3JzLCBvciBMZXhpY2FsIGVkaXRvcnMgd2l0aCBkaWZmZXJlbnQgbmFtZXNwYWNlcyxcbiAgICogaW4gd2hpY2ggY2FzZSB0aGUgcHJpbWFyeSB0cmFuc2ZlciBmb3JtYXQgaXMgSFRNTC4gSXQncyBhbHNvIGltcG9ydGFudCBpZiB5b3UncmUgc2VyaWFsaXppbmdcbiAgICogdG8gSFRNTCBmb3IgYW55IG90aGVyIHJlYXNvbiB2aWEge0BsaW5rIEBsZXhpY2FsL2h0bWwhJGdlbmVyYXRlSHRtbEZyb21Ob2Rlc30uIFlvdSBjb3VsZFxuICAgKiBhbHNvIHVzZSB0aGlzIG1ldGhvZCB0byBidWlsZCB5b3VyIG93biBIVE1MIHJlbmRlcmVyLlxuICAgKlxuICAgKiAqL1xuXG5cbiAgZXhwb3J0RE9NKGVkaXRvcikge1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmNyZWF0ZURPTShlZGl0b3IuX2NvbmZpZywgZWRpdG9yKTtcbiAgICByZXR1cm4ge1xuICAgICAgZWxlbWVudFxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIENvbnRyb2xzIGhvdyB0aGUgdGhpcyBub2RlIGlzIHNlcmlhbGl6ZWQgdG8gSlNPTi4gVGhpcyBpcyBpbXBvcnRhbnQgZm9yXG4gICAqIGNvcHkgYW5kIHBhc3RlIGJldHdlZW4gTGV4aWNhbCBlZGl0b3JzIHNoYXJpbmcgdGhlIHNhbWUgbmFtZXNwYWNlLiBJdCdzIGFsc28gaW1wb3J0YW50XG4gICAqIGlmIHlvdSdyZSBzZXJpYWxpemluZyB0byBKU09OIGZvciBwZXJzaXN0ZW50IHN0b3JhZ2Ugc29tZXdoZXJlLlxuICAgKiBTZWUgW1NlcmlhbGl6YXRpb24gJiBEZXNlcmlhbGl6YXRpb25dKGh0dHBzOi8vbGV4aWNhbC5kZXYvZG9jcy9jb25jZXB0cy9zZXJpYWxpemF0aW9uI2xleGljYWwtLS1odG1sKS5cbiAgICpcbiAgICogKi9cblxuXG4gIGV4cG9ydEpTT04oKSB7XG4gICAge1xuICAgICAgdGhyb3cgRXJyb3IoYGV4cG9ydEpTT046IGJhc2UgbWV0aG9kIG5vdCBleHRlbmRlZGApO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ29udHJvbHMgaG93IHRoZSB0aGlzIG5vZGUgaXMgZGVzZXJpYWxpemVkIGZyb20gSlNPTi4gVGhpcyBpcyB1c3VhbGx5IGJvaWxlcnBsYXRlLFxuICAgKiBidXQgcHJvdmlkZXMgYW4gYWJzdHJhY3Rpb24gYmV0d2VlbnQgaGUgbm9kZSBpbXBsZW1lbnRhdGlvbiBhbmQgc2VyaWFsaXplZCBpbnRlcmZhZWMgdGhhdCBjYW5cbiAgICogYmUgaW1wb3J0YW50IGlmIHlvdSBldmVyIG1ha2UgYnJlYWtpbmcgY2hhbmdlcyB0byBhIG5vZGUgc2NoZW1hIChieSBhZGRpbmcgb3IgcmVtb3ZpbmcgcHJvcGVydGllcykuXG4gICAqIFNlZSBbU2VyaWFsaXphdGlvbiAmIERlc2VyaWFsaXphdGlvbl0oaHR0cHM6Ly9sZXhpY2FsLmRldi9kb2NzL2NvbmNlcHRzL3NlcmlhbGl6YXRpb24jbGV4aWNhbC0tLWh0bWwpLlxuICAgKlxuICAgKiAqL1xuXG5cbiAgc3RhdGljIGltcG9ydEpTT04oX3NlcmlhbGl6ZWROb2RlKSB7XG4gICAge1xuICAgICAgdGhyb3cgRXJyb3IoYExleGljYWxOb2RlOiBOb2RlICR7dGhpcy5uYW1lfSBkb2VzIG5vdCBpbXBsZW1lbnQgLmltcG9ydEpTT04oKS5gKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEBleHBlcmltZW50YWxcbiAgICpcbiAgICogUmVnaXN0ZXJzIHRoZSByZXR1cm5lZCBmdW5jdGlvbiBhcyBhIHRyYW5zZm9ybSBvbiB0aGUgbm9kZSBkdXJpbmdcbiAgICogRWRpdG9yIGluaXRpYWxpemF0aW9uLiBNb3N0IHN1Y2ggdXNlIGNhc2VzIHNob3VsZCBiZSBhZGRyZXNzZWQgdmlhXG4gICAqIHRoZSB7QGxpbmsgTGV4aWNhbEVkaXRvci5yZWdpc3Rlck5vZGVUcmFuc2Zvcm19IEFQSS5cbiAgICpcbiAgICogRXhwZXJpbWVudGFsIC0gdXNlIGF0IHlvdXIgb3duIHJpc2suXG4gICAqL1xuXG5cbiAgc3RhdGljIHRyYW5zZm9ybSgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSAvLyBTZXR0ZXJzIGFuZCBtdXRhdG9yc1xuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoaXMgTGV4aWNhbE5vZGUgZnJvbSB0aGUgRWRpdG9yU3RhdGUuIElmIHRoZSBub2RlIGlzbid0IHJlLWluc2VydGVkXG4gICAqIHNvbWV3aGVyZSwgdGhlIExleGljYWwgZ2FyYmFnZSBjb2xsZWN0b3Igd2lsbCBldmVudHVhbGx5IGNsZWFuIGl0IHVwLlxuICAgKlxuICAgKiBAcGFyYW0gcHJlc2VydmVFbXB0eVBhcmVudCAtIElmIGZhbHN5LCB0aGUgbm9kZSdzIHBhcmVudCB3aWxsIGJlIHJlbW92ZWQgaWZcbiAgICogaXQncyBlbXB0eSBhZnRlciB0aGUgcmVtb3ZhbCBvcGVyYXRpb24uIFRoaXMgaXMgdGhlIGRlZmF1bHQgYmVoYXZpb3IsIHN1YmplY3QgdG9cbiAgICogb3RoZXIgbm9kZSBoZXVyaXN0aWNzIHN1Y2ggYXMge0BsaW5rIEVsZW1lbnROb2RlI2NhbkJlRW1wdHl9XG4gICAqICovXG5cblxuICByZW1vdmUocHJlc2VydmVFbXB0eVBhcmVudCkge1xuICAgIHJlbW92ZU5vZGUodGhpcywgdHJ1ZSwgcHJlc2VydmVFbXB0eVBhcmVudCk7XG4gIH1cbiAgLyoqXG4gICAqIFJlcGxhY2VzIHRoaXMgTGV4aWNhbE5vZGUgd2l0aCB0aGUgcHJvdmlkZWQgbm9kZSwgb3B0aW9uYWxseSB0cmFuc2ZlcnJpbmcgdGhlIGNoaWxkcmVuXG4gICAqIG9mIHRoZSByZXBsYWNlZCBub2RlIHRvIHRoZSByZXBsYWNpbmcgbm9kZS5cbiAgICpcbiAgICogQHBhcmFtIHJlcGxhY2VXaXRoIC0gVGhlIG5vZGUgdG8gcmVwbGFjZSB0aGlzIG9uZSB3aXRoLlxuICAgKiBAcGFyYW0gaW5jbHVkZUNoaWxkcmVuIC0gV2hldGhlciBvciBub3QgdG8gdHJhbnNmZXIgdGhlIGNoaWxkcmVuIG9mIHRoaXMgbm9kZSB0byB0aGUgcmVwbGFjaW5nIG5vZGUuXG4gICAqICovXG5cblxuICByZXBsYWNlKHJlcGxhY2VXaXRoLCBpbmNsdWRlQ2hpbGRyZW4pIHtcbiAgICBlcnJvck9uUmVhZE9ubHkoKTtcbiAgICBsZXQgc2VsZWN0aW9uID0gJGdldFNlbGVjdGlvbigpO1xuICAgIGlmIChzZWxlY3Rpb24gIT09IG51bGwpIHNlbGVjdGlvbiA9IHNlbGVjdGlvbi5jbG9uZSgpO1xuICAgIGVycm9yT25JbnNlcnRUZXh0Tm9kZU9uUm9vdCh0aGlzLCByZXBsYWNlV2l0aCk7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0TGF0ZXN0KCk7XG4gICAgY29uc3QgdG9SZXBsYWNlS2V5ID0gdGhpcy5fX2tleTtcbiAgICBjb25zdCBrZXkgPSByZXBsYWNlV2l0aC5fX2tleTtcbiAgICBjb25zdCB3cml0YWJsZVJlcGxhY2VXaXRoID0gcmVwbGFjZVdpdGguZ2V0V3JpdGFibGUoKTtcbiAgICBjb25zdCB3cml0YWJsZVBhcmVudCA9IHRoaXMuZ2V0UGFyZW50T3JUaHJvdygpLmdldFdyaXRhYmxlKCk7XG4gICAgY29uc3Qgc2l6ZSA9IHdyaXRhYmxlUGFyZW50Ll9fc2l6ZTtcbiAgICByZW1vdmVGcm9tUGFyZW50KHdyaXRhYmxlUmVwbGFjZVdpdGgpO1xuICAgIGNvbnN0IHByZXZTaWJsaW5nID0gc2VsZi5nZXRQcmV2aW91c1NpYmxpbmcoKTtcbiAgICBjb25zdCBuZXh0U2libGluZyA9IHNlbGYuZ2V0TmV4dFNpYmxpbmcoKTtcbiAgICBjb25zdCBwcmV2S2V5ID0gc2VsZi5fX3ByZXY7XG4gICAgY29uc3QgbmV4dEtleSA9IHNlbGYuX19uZXh0O1xuICAgIGNvbnN0IHBhcmVudEtleSA9IHNlbGYuX19wYXJlbnQ7XG4gICAgcmVtb3ZlTm9kZShzZWxmLCBmYWxzZSwgdHJ1ZSk7XG5cbiAgICBpZiAocHJldlNpYmxpbmcgPT09IG51bGwpIHtcbiAgICAgIHdyaXRhYmxlUGFyZW50Ll9fZmlyc3QgPSBrZXk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHdyaXRhYmxlUHJldlNpYmxpbmcgPSBwcmV2U2libGluZy5nZXRXcml0YWJsZSgpO1xuICAgICAgd3JpdGFibGVQcmV2U2libGluZy5fX25leHQgPSBrZXk7XG4gICAgfVxuXG4gICAgd3JpdGFibGVSZXBsYWNlV2l0aC5fX3ByZXYgPSBwcmV2S2V5O1xuXG4gICAgaWYgKG5leHRTaWJsaW5nID09PSBudWxsKSB7XG4gICAgICB3cml0YWJsZVBhcmVudC5fX2xhc3QgPSBrZXk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHdyaXRhYmxlTmV4dFNpYmxpbmcgPSBuZXh0U2libGluZy5nZXRXcml0YWJsZSgpO1xuICAgICAgd3JpdGFibGVOZXh0U2libGluZy5fX3ByZXYgPSBrZXk7XG4gICAgfVxuXG4gICAgd3JpdGFibGVSZXBsYWNlV2l0aC5fX25leHQgPSBuZXh0S2V5O1xuICAgIHdyaXRhYmxlUmVwbGFjZVdpdGguX19wYXJlbnQgPSBwYXJlbnRLZXk7XG4gICAgd3JpdGFibGVQYXJlbnQuX19zaXplID0gc2l6ZTtcblxuICAgIGlmIChpbmNsdWRlQ2hpbGRyZW4pIHtcbiAgICAgIHRoaXMuZ2V0Q2hpbGRyZW4oKS5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgICAgd3JpdGFibGVSZXBsYWNlV2l0aC5hcHBlbmQoY2hpbGQpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKCRpc1JhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikpIHtcbiAgICAgICRzZXRTZWxlY3Rpb24oc2VsZWN0aW9uKTtcbiAgICAgIGNvbnN0IGFuY2hvciA9IHNlbGVjdGlvbi5hbmNob3I7XG4gICAgICBjb25zdCBmb2N1cyA9IHNlbGVjdGlvbi5mb2N1cztcblxuICAgICAgaWYgKGFuY2hvci5rZXkgPT09IHRvUmVwbGFjZUtleSkge1xuICAgICAgICAkbW92ZVNlbGVjdGlvblBvaW50VG9FbmQoYW5jaG9yLCB3cml0YWJsZVJlcGxhY2VXaXRoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZvY3VzLmtleSA9PT0gdG9SZXBsYWNlS2V5KSB7XG4gICAgICAgICRtb3ZlU2VsZWN0aW9uUG9pbnRUb0VuZChmb2N1cywgd3JpdGFibGVSZXBsYWNlV2l0aCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCRnZXRDb21wb3NpdGlvbktleSgpID09PSB0b1JlcGxhY2VLZXkpIHtcbiAgICAgICRzZXRDb21wb3NpdGlvbktleShrZXkpO1xuICAgIH1cblxuICAgIHJldHVybiB3cml0YWJsZVJlcGxhY2VXaXRoO1xuICB9XG4gIC8qKlxuICAgKiBJbnNlcnRzIGEgbm9kZSBhZnRlciB0aGlzIExleGljYWxOb2RlIChhcyB0aGUgbmV4dCBzaWJsaW5nKS5cbiAgICpcbiAgICogQHBhcmFtIG5vZGVUb0luc2VydCAtIFRoZSBub2RlIHRvIGluc2VydCBhZnRlciB0aGlzIG9uZS5cbiAgICogQHBhcmFtIHJlc3RvcmVTZWxlY3Rpb24gLSBXaGV0aGVyIG9yIG5vdCB0byBhdHRlbXB0IHRvIHJlc29sdmUgdGhlXG4gICAqIHNlbGVjdGlvbiB0byB0aGUgYXBwcm9wcmlhdGUgcGxhY2UgYWZ0ZXIgdGhlIG9wZXJhdGlvbiBpcyBjb21wbGV0ZS5cbiAgICogKi9cblxuXG4gIGluc2VydEFmdGVyKG5vZGVUb0luc2VydCwgcmVzdG9yZVNlbGVjdGlvbiA9IHRydWUpIHtcbiAgICBlcnJvck9uUmVhZE9ubHkoKTtcbiAgICBlcnJvck9uSW5zZXJ0VGV4dE5vZGVPblJvb3QodGhpcywgbm9kZVRvSW5zZXJ0KTtcbiAgICBjb25zdCB3cml0YWJsZVNlbGYgPSB0aGlzLmdldFdyaXRhYmxlKCk7XG4gICAgY29uc3Qgd3JpdGFibGVOb2RlVG9JbnNlcnQgPSBub2RlVG9JbnNlcnQuZ2V0V3JpdGFibGUoKTtcbiAgICBjb25zdCBvbGRQYXJlbnQgPSB3cml0YWJsZU5vZGVUb0luc2VydC5nZXRQYXJlbnQoKTtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSAkZ2V0U2VsZWN0aW9uKCk7XG4gICAgbGV0IGVsZW1lbnRBbmNob3JTZWxlY3Rpb25Pbk5vZGUgPSBmYWxzZTtcbiAgICBsZXQgZWxlbWVudEZvY3VzU2VsZWN0aW9uT25Ob2RlID0gZmFsc2U7XG5cbiAgICBpZiAob2xkUGFyZW50ICE9PSBudWxsKSB7XG4gICAgICAvLyBUT0RPOiB0aGlzIGlzIE8obiksIGNhbiB3ZSBpbXByb3ZlP1xuICAgICAgY29uc3Qgb2xkSW5kZXggPSBub2RlVG9JbnNlcnQuZ2V0SW5kZXhXaXRoaW5QYXJlbnQoKTtcbiAgICAgIHJlbW92ZUZyb21QYXJlbnQod3JpdGFibGVOb2RlVG9JbnNlcnQpO1xuXG4gICAgICBpZiAoJGlzUmFuZ2VTZWxlY3Rpb24oc2VsZWN0aW9uKSkge1xuICAgICAgICBjb25zdCBvbGRQYXJlbnRLZXkgPSBvbGRQYXJlbnQuX19rZXk7XG4gICAgICAgIGNvbnN0IGFuY2hvciA9IHNlbGVjdGlvbi5hbmNob3I7XG4gICAgICAgIGNvbnN0IGZvY3VzID0gc2VsZWN0aW9uLmZvY3VzO1xuICAgICAgICBlbGVtZW50QW5jaG9yU2VsZWN0aW9uT25Ob2RlID0gYW5jaG9yLnR5cGUgPT09ICdlbGVtZW50JyAmJiBhbmNob3Iua2V5ID09PSBvbGRQYXJlbnRLZXkgJiYgYW5jaG9yLm9mZnNldCA9PT0gb2xkSW5kZXggKyAxO1xuICAgICAgICBlbGVtZW50Rm9jdXNTZWxlY3Rpb25Pbk5vZGUgPSBmb2N1cy50eXBlID09PSAnZWxlbWVudCcgJiYgZm9jdXMua2V5ID09PSBvbGRQYXJlbnRLZXkgJiYgZm9jdXMub2Zmc2V0ID09PSBvbGRJbmRleCArIDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbmV4dFNpYmxpbmcgPSB0aGlzLmdldE5leHRTaWJsaW5nKCk7XG4gICAgY29uc3Qgd3JpdGFibGVQYXJlbnQgPSB0aGlzLmdldFBhcmVudE9yVGhyb3coKS5nZXRXcml0YWJsZSgpO1xuICAgIGNvbnN0IGluc2VydEtleSA9IHdyaXRhYmxlTm9kZVRvSW5zZXJ0Ll9fa2V5O1xuICAgIGNvbnN0IG5leHRLZXkgPSB3cml0YWJsZVNlbGYuX19uZXh0O1xuXG4gICAgaWYgKG5leHRTaWJsaW5nID09PSBudWxsKSB7XG4gICAgICB3cml0YWJsZVBhcmVudC5fX2xhc3QgPSBpbnNlcnRLZXk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHdyaXRhYmxlTmV4dFNpYmxpbmcgPSBuZXh0U2libGluZy5nZXRXcml0YWJsZSgpO1xuICAgICAgd3JpdGFibGVOZXh0U2libGluZy5fX3ByZXYgPSBpbnNlcnRLZXk7XG4gICAgfVxuXG4gICAgd3JpdGFibGVQYXJlbnQuX19zaXplKys7XG4gICAgd3JpdGFibGVTZWxmLl9fbmV4dCA9IGluc2VydEtleTtcbiAgICB3cml0YWJsZU5vZGVUb0luc2VydC5fX25leHQgPSBuZXh0S2V5O1xuICAgIHdyaXRhYmxlTm9kZVRvSW5zZXJ0Ll9fcHJldiA9IHdyaXRhYmxlU2VsZi5fX2tleTtcbiAgICB3cml0YWJsZU5vZGVUb0luc2VydC5fX3BhcmVudCA9IHdyaXRhYmxlU2VsZi5fX3BhcmVudDtcblxuICAgIGlmIChyZXN0b3JlU2VsZWN0aW9uICYmICRpc1JhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5nZXRJbmRleFdpdGhpblBhcmVudCgpO1xuICAgICAgJHVwZGF0ZUVsZW1lbnRTZWxlY3Rpb25PbkNyZWF0ZURlbGV0ZU5vZGUoc2VsZWN0aW9uLCB3cml0YWJsZVBhcmVudCwgaW5kZXggKyAxKTtcbiAgICAgIGNvbnN0IHdyaXRhYmxlUGFyZW50S2V5ID0gd3JpdGFibGVQYXJlbnQuX19rZXk7XG5cbiAgICAgIGlmIChlbGVtZW50QW5jaG9yU2VsZWN0aW9uT25Ob2RlKSB7XG4gICAgICAgIHNlbGVjdGlvbi5hbmNob3Iuc2V0KHdyaXRhYmxlUGFyZW50S2V5LCBpbmRleCArIDIsICdlbGVtZW50Jyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbGVtZW50Rm9jdXNTZWxlY3Rpb25Pbk5vZGUpIHtcbiAgICAgICAgc2VsZWN0aW9uLmZvY3VzLnNldCh3cml0YWJsZVBhcmVudEtleSwgaW5kZXggKyAyLCAnZWxlbWVudCcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBub2RlVG9JbnNlcnQ7XG4gIH1cbiAgLyoqXG4gICAqIEluc2VydHMgYSBub2RlIGJlZm9yZSB0aGlzIExleGljYWxOb2RlIChhcyB0aGUgcHJldmlvdXMgc2libGluZykuXG4gICAqXG4gICAqIEBwYXJhbSBub2RlVG9JbnNlcnQgLSBUaGUgbm9kZSB0byBpbnNlcnQgYWZ0ZXIgdGhpcyBvbmUuXG4gICAqIEBwYXJhbSByZXN0b3JlU2VsZWN0aW9uIC0gV2hldGhlciBvciBub3QgdG8gYXR0ZW1wdCB0byByZXNvbHZlIHRoZVxuICAgKiBzZWxlY3Rpb24gdG8gdGhlIGFwcHJvcHJpYXRlIHBsYWNlIGFmdGVyIHRoZSBvcGVyYXRpb24gaXMgY29tcGxldGUuXG4gICAqICovXG5cblxuICBpbnNlcnRCZWZvcmUobm9kZVRvSW5zZXJ0LCByZXN0b3JlU2VsZWN0aW9uID0gdHJ1ZSkge1xuICAgIGVycm9yT25SZWFkT25seSgpO1xuICAgIGVycm9yT25JbnNlcnRUZXh0Tm9kZU9uUm9vdCh0aGlzLCBub2RlVG9JbnNlcnQpO1xuICAgIGNvbnN0IHdyaXRhYmxlU2VsZiA9IHRoaXMuZ2V0V3JpdGFibGUoKTtcbiAgICBjb25zdCB3cml0YWJsZU5vZGVUb0luc2VydCA9IG5vZGVUb0luc2VydC5nZXRXcml0YWJsZSgpO1xuICAgIGNvbnN0IGluc2VydEtleSA9IHdyaXRhYmxlTm9kZVRvSW5zZXJ0Ll9fa2V5O1xuICAgIHJlbW92ZUZyb21QYXJlbnQod3JpdGFibGVOb2RlVG9JbnNlcnQpO1xuICAgIGNvbnN0IHByZXZTaWJsaW5nID0gdGhpcy5nZXRQcmV2aW91c1NpYmxpbmcoKTtcbiAgICBjb25zdCB3cml0YWJsZVBhcmVudCA9IHRoaXMuZ2V0UGFyZW50T3JUaHJvdygpLmdldFdyaXRhYmxlKCk7XG4gICAgY29uc3QgcHJldktleSA9IHdyaXRhYmxlU2VsZi5fX3ByZXY7IC8vIFRPRE86IHRoaXMgaXMgTyhuKSwgY2FuIHdlIGltcHJvdmU/XG5cbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZ2V0SW5kZXhXaXRoaW5QYXJlbnQoKTtcblxuICAgIGlmIChwcmV2U2libGluZyA9PT0gbnVsbCkge1xuICAgICAgd3JpdGFibGVQYXJlbnQuX19maXJzdCA9IGluc2VydEtleTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgd3JpdGFibGVQcmV2U2libGluZyA9IHByZXZTaWJsaW5nLmdldFdyaXRhYmxlKCk7XG4gICAgICB3cml0YWJsZVByZXZTaWJsaW5nLl9fbmV4dCA9IGluc2VydEtleTtcbiAgICB9XG5cbiAgICB3cml0YWJsZVBhcmVudC5fX3NpemUrKztcbiAgICB3cml0YWJsZVNlbGYuX19wcmV2ID0gaW5zZXJ0S2V5O1xuICAgIHdyaXRhYmxlTm9kZVRvSW5zZXJ0Ll9fcHJldiA9IHByZXZLZXk7XG4gICAgd3JpdGFibGVOb2RlVG9JbnNlcnQuX19uZXh0ID0gd3JpdGFibGVTZWxmLl9fa2V5O1xuICAgIHdyaXRhYmxlTm9kZVRvSW5zZXJ0Ll9fcGFyZW50ID0gd3JpdGFibGVTZWxmLl9fcGFyZW50O1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9ICRnZXRTZWxlY3Rpb24oKTtcblxuICAgIGlmIChyZXN0b3JlU2VsZWN0aW9uICYmICRpc1JhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikpIHtcbiAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuZ2V0UGFyZW50T3JUaHJvdygpO1xuICAgICAgJHVwZGF0ZUVsZW1lbnRTZWxlY3Rpb25PbkNyZWF0ZURlbGV0ZU5vZGUoc2VsZWN0aW9uLCBwYXJlbnQsIGluZGV4KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZVRvSW5zZXJ0O1xuICB9XG4gIC8qKlxuICAgKiBXaGV0aGVyIG9yIG5vdCB0aGlzIG5vZGUgaGFzIGEgcmVxdWlyZWQgcGFyZW50LiBVc2VkIGR1cmluZyBjb3B5ICsgcGFzdGUgb3BlcmF0aW9uc1xuICAgKiB0byBub3JtYWxpemUgbm9kZXMgdGhhdCB3b3VsZCBvdGhlcndpc2UgYmUgb3JwaGFuZWQuIEZvciBleGFtcGxlLCBMaXN0SXRlbU5vZGVzIHdpdGhvdXRcbiAgICogYSBMaXN0Tm9kZSBwYXJlbnQgb3IgVGV4dE5vZGVzIHdpdGggYSBQYXJhZ3JhcGhOb2RlIHBhcmVudC5cbiAgICpcbiAgICogKi9cblxuXG4gIGlzUGFyZW50UmVxdWlyZWQoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBUaGUgY3JlYXRpb24gbG9naWMgZm9yIGFueSByZXF1aXJlZCBwYXJlbnQuIFNob3VsZCBiZSBpbXBsZW1lbnRlZCBpZiB7QGxpbmsgaXNQYXJlbnRSZXF1aXJlZH0gcmV0dXJucyB0cnVlLlxuICAgKlxuICAgKiAqL1xuXG5cbiAgY3JlYXRlUGFyZW50RWxlbWVudE5vZGUoKSB7XG4gICAgcmV0dXJuICRjcmVhdGVQYXJhZ3JhcGhOb2RlKCk7XG4gIH1cbiAgLyoqXG4gICAqIE1vdmVzIHNlbGVjdGlvbiB0byB0aGUgcHJldmlvdXMgc2libGluZyBvZiB0aGlzIG5vZGUsIGF0IHRoZSBzcGVjaWZpZWQgb2Zmc2V0cy5cbiAgICpcbiAgICogQHBhcmFtIGFuY2hvck9mZnNldCAtIFRoZSBhbmNob3Igb2Zmc2V0IGZvciBzZWxlY3Rpb24uXG4gICAqIEBwYXJhbSBmb2N1c09mZnNldCAtICBUaGUgZm9jdXMgb2Zmc2V0IGZvciBzZWxlY3Rpb25cbiAgICogKi9cblxuXG4gIHNlbGVjdFByZXZpb3VzKGFuY2hvck9mZnNldCwgZm9jdXNPZmZzZXQpIHtcbiAgICBlcnJvck9uUmVhZE9ubHkoKTtcbiAgICBjb25zdCBwcmV2U2libGluZyA9IHRoaXMuZ2V0UHJldmlvdXNTaWJsaW5nKCk7XG4gICAgY29uc3QgcGFyZW50ID0gdGhpcy5nZXRQYXJlbnRPclRocm93KCk7XG5cbiAgICBpZiAocHJldlNpYmxpbmcgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBwYXJlbnQuc2VsZWN0KDAsIDApO1xuICAgIH1cblxuICAgIGlmICgkaXNFbGVtZW50Tm9kZShwcmV2U2libGluZykpIHtcbiAgICAgIHJldHVybiBwcmV2U2libGluZy5zZWxlY3QoKTtcbiAgICB9IGVsc2UgaWYgKCEkaXNUZXh0Tm9kZShwcmV2U2libGluZykpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gcHJldlNpYmxpbmcuZ2V0SW5kZXhXaXRoaW5QYXJlbnQoKSArIDE7XG4gICAgICByZXR1cm4gcGFyZW50LnNlbGVjdChpbmRleCwgaW5kZXgpO1xuICAgIH1cblxuICAgIHJldHVybiBwcmV2U2libGluZy5zZWxlY3QoYW5jaG9yT2Zmc2V0LCBmb2N1c09mZnNldCk7XG4gIH1cbiAgLyoqXG4gICAqIE1vdmVzIHNlbGVjdGlvbiB0byB0aGUgbmV4dCBzaWJsaW5nIG9mIHRoaXMgbm9kZSwgYXQgdGhlIHNwZWNpZmllZCBvZmZzZXRzLlxuICAgKlxuICAgKiBAcGFyYW0gYW5jaG9yT2Zmc2V0IC0gVGhlIGFuY2hvciBvZmZzZXQgZm9yIHNlbGVjdGlvbi5cbiAgICogQHBhcmFtIGZvY3VzT2Zmc2V0IC0gIFRoZSBmb2N1cyBvZmZzZXQgZm9yIHNlbGVjdGlvblxuICAgKiAqL1xuXG5cbiAgc2VsZWN0TmV4dChhbmNob3JPZmZzZXQsIGZvY3VzT2Zmc2V0KSB7XG4gICAgZXJyb3JPblJlYWRPbmx5KCk7XG4gICAgY29uc3QgbmV4dFNpYmxpbmcgPSB0aGlzLmdldE5leHRTaWJsaW5nKCk7XG4gICAgY29uc3QgcGFyZW50ID0gdGhpcy5nZXRQYXJlbnRPclRocm93KCk7XG5cbiAgICBpZiAobmV4dFNpYmxpbmcgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBwYXJlbnQuc2VsZWN0KCk7XG4gICAgfVxuXG4gICAgaWYgKCRpc0VsZW1lbnROb2RlKG5leHRTaWJsaW5nKSkge1xuICAgICAgcmV0dXJuIG5leHRTaWJsaW5nLnNlbGVjdCgwLCAwKTtcbiAgICB9IGVsc2UgaWYgKCEkaXNUZXh0Tm9kZShuZXh0U2libGluZykpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gbmV4dFNpYmxpbmcuZ2V0SW5kZXhXaXRoaW5QYXJlbnQoKTtcbiAgICAgIHJldHVybiBwYXJlbnQuc2VsZWN0KGluZGV4LCBpbmRleCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5leHRTaWJsaW5nLnNlbGVjdChhbmNob3JPZmZzZXQsIGZvY3VzT2Zmc2V0KTtcbiAgfVxuICAvKipcbiAgICogTWFya3MgYSBub2RlIGRpcnR5LCB0cmlnZ2VyaW5nIHRyYW5zZm9ybXMgYW5kXG4gICAqIGZvcmNpbmcgaXQgdG8gYmUgcmVjb25jaWxlZCBkdXJpbmcgdGhlIHVwZGF0ZSBjeWNsZS5cbiAgICpcbiAgICogKi9cblxuXG4gIG1hcmtEaXJ0eSgpIHtcbiAgICB0aGlzLmdldFdyaXRhYmxlKCk7XG4gIH1cblxufVxuXG5mdW5jdGlvbiBlcnJvck9uVHlwZUtsYXNzTWlzbWF0Y2godHlwZSwga2xhc3MpIHtcbiAgY29uc3QgcmVnaXN0ZXJlZE5vZGUgPSBnZXRBY3RpdmVFZGl0b3IoKS5fbm9kZXMuZ2V0KHR5cGUpOyAvLyBDb21tb24gZXJyb3IgLSBzcGxpdCBpbiBpdHMgb3duIGludmFyaWFudFxuXG5cbiAgaWYgKHJlZ2lzdGVyZWROb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICB7XG4gICAgICB0aHJvdyBFcnJvcihgQ3JlYXRlIG5vZGU6IEF0dGVtcHRlZCB0byBjcmVhdGUgbm9kZSAke2tsYXNzLm5hbWV9IHRoYXQgd2FzIG5vdCBjb25maWd1cmVkIHRvIGJlIHVzZWQgb24gdGhlIGVkaXRvci5gKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBlZGl0b3JLbGFzcyA9IHJlZ2lzdGVyZWROb2RlLmtsYXNzO1xuXG4gIGlmIChlZGl0b3JLbGFzcyAhPT0ga2xhc3MpIHtcbiAgICB7XG4gICAgICB0aHJvdyBFcnJvcihgQ3JlYXRlIG5vZGU6IFR5cGUgJHt0eXBlfSBpbiBub2RlICR7a2xhc3MubmFtZX0gZG9lcyBub3QgbWF0Y2ggcmVnaXN0ZXJlZCBub2RlICR7ZWRpdG9yS2xhc3MubmFtZX0gd2l0aCB0aGUgc2FtZSB0eXBlYCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cbi8qKiBAbm9Jbmhlcml0RG9jICovXG5cbmNsYXNzIERlY29yYXRvck5vZGUgZXh0ZW5kcyBMZXhpY2FsTm9kZSB7XG4gIGNvbnN0cnVjdG9yKGtleSkge1xuICAgIHN1cGVyKGtleSk7XG4gIH1cblxuICBkZWNvcmF0ZShlZGl0b3IsIGNvbmZpZykge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGBkZWNvcmF0ZTogYmFzZSBtZXRob2Qgbm90IGV4dGVuZGVkYCk7XG4gICAgfVxuICB9XG5cbiAgaXNJc29sYXRlZCgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpc0lubGluZSgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlzS2V5Ym9hcmRTZWxlY3RhYmxlKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbn1cbmZ1bmN0aW9uICRpc0RlY29yYXRvck5vZGUobm9kZSkge1xuICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIERlY29yYXRvck5vZGU7XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cblxuLyoqIEBub0luaGVyaXREb2MgKi9cbmNsYXNzIEVsZW1lbnROb2RlIGV4dGVuZHMgTGV4aWNhbE5vZGUge1xuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgY29uc3RydWN0b3Ioa2V5KSB7XG4gICAgc3VwZXIoa2V5KTtcbiAgICB0aGlzLl9fZmlyc3QgPSBudWxsO1xuICAgIHRoaXMuX19sYXN0ID0gbnVsbDtcbiAgICB0aGlzLl9fc2l6ZSA9IDA7XG4gICAgdGhpcy5fX2Zvcm1hdCA9IDA7XG4gICAgdGhpcy5fX2luZGVudCA9IDA7XG4gICAgdGhpcy5fX2RpciA9IG51bGw7XG4gIH1cblxuICBnZXRGb3JtYXQoKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0TGF0ZXN0KCk7XG4gICAgcmV0dXJuIHNlbGYuX19mb3JtYXQ7XG4gIH1cblxuICBnZXRGb3JtYXRUeXBlKCkge1xuICAgIGNvbnN0IGZvcm1hdCA9IHRoaXMuZ2V0Rm9ybWF0KCk7XG4gICAgcmV0dXJuIEVMRU1FTlRfRk9STUFUX1RPX1RZUEVbZm9ybWF0XSB8fCAnJztcbiAgfVxuXG4gIGdldEluZGVudCgpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcy5nZXRMYXRlc3QoKTtcbiAgICByZXR1cm4gc2VsZi5fX2luZGVudDtcbiAgfVxuXG4gIGdldENoaWxkcmVuKCkge1xuICAgIGNvbnN0IGNoaWxkcmVuID0gW107XG4gICAgbGV0IGNoaWxkID0gdGhpcy5nZXRGaXJzdENoaWxkKCk7XG5cbiAgICB3aGlsZSAoY2hpbGQgIT09IG51bGwpIHtcbiAgICAgIGNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgY2hpbGQgPSBjaGlsZC5nZXROZXh0U2libGluZygpO1xuICAgIH1cblxuICAgIHJldHVybiBjaGlsZHJlbjtcbiAgfVxuXG4gIGdldENoaWxkcmVuS2V5cygpIHtcbiAgICBjb25zdCBjaGlsZHJlbiA9IFtdO1xuICAgIGxldCBjaGlsZCA9IHRoaXMuZ2V0Rmlyc3RDaGlsZCgpO1xuXG4gICAgd2hpbGUgKGNoaWxkICE9PSBudWxsKSB7XG4gICAgICBjaGlsZHJlbi5wdXNoKGNoaWxkLl9fa2V5KTtcbiAgICAgIGNoaWxkID0gY2hpbGQuZ2V0TmV4dFNpYmxpbmcoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2hpbGRyZW47XG4gIH1cblxuICBnZXRDaGlsZHJlblNpemUoKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0TGF0ZXN0KCk7XG4gICAgcmV0dXJuIHNlbGYuX19zaXplO1xuICB9XG5cbiAgaXNFbXB0eSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDaGlsZHJlblNpemUoKSA9PT0gMDtcbiAgfVxuXG4gIGlzRGlydHkoKSB7XG4gICAgY29uc3QgZWRpdG9yID0gZ2V0QWN0aXZlRWRpdG9yKCk7XG4gICAgY29uc3QgZGlydHlFbGVtZW50cyA9IGVkaXRvci5fZGlydHlFbGVtZW50cztcbiAgICByZXR1cm4gZGlydHlFbGVtZW50cyAhPT0gbnVsbCAmJiBkaXJ0eUVsZW1lbnRzLmhhcyh0aGlzLl9fa2V5KTtcbiAgfVxuXG4gIGlzTGFzdENoaWxkKCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzLmdldExhdGVzdCgpO1xuICAgIGNvbnN0IHBhcmVudExhc3RDaGlsZCA9IHRoaXMuZ2V0UGFyZW50T3JUaHJvdygpLmdldExhc3RDaGlsZCgpO1xuICAgIHJldHVybiBwYXJlbnRMYXN0Q2hpbGQgIT09IG51bGwgJiYgcGFyZW50TGFzdENoaWxkLmlzKHNlbGYpO1xuICB9XG5cbiAgZ2V0QWxsVGV4dE5vZGVzKCkge1xuICAgIGNvbnN0IHRleHROb2RlcyA9IFtdO1xuICAgIGxldCBjaGlsZCA9IHRoaXMuZ2V0Rmlyc3RDaGlsZCgpO1xuXG4gICAgd2hpbGUgKGNoaWxkICE9PSBudWxsKSB7XG4gICAgICBpZiAoJGlzVGV4dE5vZGUoY2hpbGQpKSB7XG4gICAgICAgIHRleHROb2Rlcy5wdXNoKGNoaWxkKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCRpc0VsZW1lbnROb2RlKGNoaWxkKSkge1xuICAgICAgICBjb25zdCBzdWJDaGlsZHJlbk5vZGVzID0gY2hpbGQuZ2V0QWxsVGV4dE5vZGVzKCk7XG4gICAgICAgIHRleHROb2Rlcy5wdXNoKC4uLnN1YkNoaWxkcmVuTm9kZXMpO1xuICAgICAgfVxuXG4gICAgICBjaGlsZCA9IGNoaWxkLmdldE5leHRTaWJsaW5nKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRleHROb2RlcztcbiAgfVxuXG4gIGdldEZpcnN0RGVzY2VuZGFudCgpIHtcbiAgICBsZXQgbm9kZSA9IHRoaXMuZ2V0Rmlyc3RDaGlsZCgpO1xuXG4gICAgd2hpbGUgKG5vZGUgIT09IG51bGwpIHtcbiAgICAgIGlmICgkaXNFbGVtZW50Tm9kZShub2RlKSkge1xuICAgICAgICBjb25zdCBjaGlsZCA9IG5vZGUuZ2V0Rmlyc3RDaGlsZCgpO1xuXG4gICAgICAgIGlmIChjaGlsZCAhPT0gbnVsbCkge1xuICAgICAgICAgIG5vZGUgPSBjaGlsZDtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuXG4gIGdldExhc3REZXNjZW5kYW50KCkge1xuICAgIGxldCBub2RlID0gdGhpcy5nZXRMYXN0Q2hpbGQoKTtcblxuICAgIHdoaWxlIChub2RlICE9PSBudWxsKSB7XG4gICAgICBpZiAoJGlzRWxlbWVudE5vZGUobm9kZSkpIHtcbiAgICAgICAgY29uc3QgY2hpbGQgPSBub2RlLmdldExhc3RDaGlsZCgpO1xuXG4gICAgICAgIGlmIChjaGlsZCAhPT0gbnVsbCkge1xuICAgICAgICAgIG5vZGUgPSBjaGlsZDtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuXG4gIGdldERlc2NlbmRhbnRCeUluZGV4KGluZGV4KSB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmdldENoaWxkcmVuKCk7XG4gICAgY29uc3QgY2hpbGRyZW5MZW5ndGggPSBjaGlsZHJlbi5sZW5ndGg7IC8vIEZvciBub24tZW1wdHkgZWxlbWVudCBub2Rlcywgd2UgcmVzb2x2ZSBpdHMgZGVzY2VuZGFudFxuICAgIC8vIChlaXRoZXIgYSBsZWFmIG5vZGUgb3IgdGhlIGJvdHRvbS1tb3N0IGVsZW1lbnQpXG5cbiAgICBpZiAoaW5kZXggPj0gY2hpbGRyZW5MZW5ndGgpIHtcbiAgICAgIGNvbnN0IHJlc29sdmVkTm9kZSA9IGNoaWxkcmVuW2NoaWxkcmVuTGVuZ3RoIC0gMV07XG4gICAgICByZXR1cm4gJGlzRWxlbWVudE5vZGUocmVzb2x2ZWROb2RlKSAmJiByZXNvbHZlZE5vZGUuZ2V0TGFzdERlc2NlbmRhbnQoKSB8fCByZXNvbHZlZE5vZGUgfHwgbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCByZXNvbHZlZE5vZGUgPSBjaGlsZHJlbltpbmRleF07XG4gICAgcmV0dXJuICRpc0VsZW1lbnROb2RlKHJlc29sdmVkTm9kZSkgJiYgcmVzb2x2ZWROb2RlLmdldEZpcnN0RGVzY2VuZGFudCgpIHx8IHJlc29sdmVkTm9kZSB8fCBudWxsO1xuICB9XG5cbiAgZ2V0Rmlyc3RDaGlsZCgpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcy5nZXRMYXRlc3QoKTtcbiAgICBjb25zdCBmaXJzdEtleSA9IHNlbGYuX19maXJzdDtcbiAgICByZXR1cm4gZmlyc3RLZXkgPT09IG51bGwgPyBudWxsIDogJGdldE5vZGVCeUtleShmaXJzdEtleSk7XG4gIH1cblxuICBnZXRGaXJzdENoaWxkT3JUaHJvdygpIHtcbiAgICBjb25zdCBmaXJzdENoaWxkID0gdGhpcy5nZXRGaXJzdENoaWxkKCk7XG5cbiAgICBpZiAoZmlyc3RDaGlsZCA9PT0gbnVsbCkge1xuICAgICAge1xuICAgICAgICB0aHJvdyBFcnJvcihgRXhwZWN0ZWQgbm9kZSAke3RoaXMuX19rZXl9IHRvIGhhdmUgYSBmaXJzdCBjaGlsZC5gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmlyc3RDaGlsZDtcbiAgfVxuXG4gIGdldExhc3RDaGlsZCgpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcy5nZXRMYXRlc3QoKTtcbiAgICBjb25zdCBsYXN0S2V5ID0gc2VsZi5fX2xhc3Q7XG4gICAgcmV0dXJuIGxhc3RLZXkgPT09IG51bGwgPyBudWxsIDogJGdldE5vZGVCeUtleShsYXN0S2V5KTtcbiAgfVxuXG4gIGdldExhc3RDaGlsZE9yVGhyb3coKSB7XG4gICAgY29uc3QgbGFzdENoaWxkID0gdGhpcy5nZXRMYXN0Q2hpbGQoKTtcblxuICAgIGlmIChsYXN0Q2hpbGQgPT09IG51bGwpIHtcbiAgICAgIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoYEV4cGVjdGVkIG5vZGUgJHt0aGlzLl9fa2V5fSB0byBoYXZlIGEgbGFzdCBjaGlsZC5gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbGFzdENoaWxkO1xuICB9XG5cbiAgZ2V0Q2hpbGRBdEluZGV4KGluZGV4KSB7XG4gICAgY29uc3Qgc2l6ZSA9IHRoaXMuZ2V0Q2hpbGRyZW5TaXplKCk7XG4gICAgbGV0IG5vZGU7XG4gICAgbGV0IGk7XG5cbiAgICBpZiAoaW5kZXggPCBzaXplIC8gMikge1xuICAgICAgbm9kZSA9IHRoaXMuZ2V0Rmlyc3RDaGlsZCgpO1xuICAgICAgaSA9IDA7XG5cbiAgICAgIHdoaWxlIChub2RlICE9PSBudWxsICYmIGkgPD0gaW5kZXgpIHtcbiAgICAgICAgaWYgKGkgPT09IGluZGV4KSB7XG4gICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBub2RlID0gbm9kZS5nZXROZXh0U2libGluZygpO1xuICAgICAgICBpKys7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIG5vZGUgPSB0aGlzLmdldExhc3RDaGlsZCgpO1xuICAgIGkgPSBzaXplIC0gMTtcblxuICAgIHdoaWxlIChub2RlICE9PSBudWxsICYmIGkgPj0gaW5kZXgpIHtcbiAgICAgIGlmIChpID09PSBpbmRleCkge1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgIH1cblxuICAgICAgbm9kZSA9IG5vZGUuZ2V0UHJldmlvdXNTaWJsaW5nKCk7XG4gICAgICBpLS07XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBnZXRUZXh0Q29udGVudCgpIHtcbiAgICBsZXQgdGV4dENvbnRlbnQgPSAnJztcbiAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuZ2V0Q2hpbGRyZW4oKTtcbiAgICBjb25zdCBjaGlsZHJlbkxlbmd0aCA9IGNoaWxkcmVuLmxlbmd0aDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW5MZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgIHRleHRDb250ZW50ICs9IGNoaWxkLmdldFRleHRDb250ZW50KCk7XG5cbiAgICAgIGlmICgkaXNFbGVtZW50Tm9kZShjaGlsZCkgJiYgaSAhPT0gY2hpbGRyZW5MZW5ndGggLSAxICYmICFjaGlsZC5pc0lubGluZSgpKSB7XG4gICAgICAgIHRleHRDb250ZW50ICs9IERPVUJMRV9MSU5FX0JSRUFLO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0ZXh0Q29udGVudDtcbiAgfVxuXG4gIGdldFRleHRDb250ZW50U2l6ZSgpIHtcbiAgICBsZXQgdGV4dENvbnRlbnRTaXplID0gMDtcbiAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuZ2V0Q2hpbGRyZW4oKTtcbiAgICBjb25zdCBjaGlsZHJlbkxlbmd0aCA9IGNoaWxkcmVuLmxlbmd0aDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW5MZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgIHRleHRDb250ZW50U2l6ZSArPSBjaGlsZC5nZXRUZXh0Q29udGVudFNpemUoKTtcblxuICAgICAgaWYgKCRpc0VsZW1lbnROb2RlKGNoaWxkKSAmJiBpICE9PSBjaGlsZHJlbkxlbmd0aCAtIDEgJiYgIWNoaWxkLmlzSW5saW5lKCkpIHtcbiAgICAgICAgdGV4dENvbnRlbnRTaXplICs9IERPVUJMRV9MSU5FX0JSRUFLLmxlbmd0aDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGV4dENvbnRlbnRTaXplO1xuICB9XG5cbiAgZ2V0RGlyZWN0aW9uKCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzLmdldExhdGVzdCgpO1xuICAgIHJldHVybiBzZWxmLl9fZGlyO1xuICB9XG5cbiAgaGFzRm9ybWF0KHR5cGUpIHtcbiAgICBpZiAodHlwZSAhPT0gJycpIHtcbiAgICAgIGNvbnN0IGZvcm1hdEZsYWcgPSBFTEVNRU5UX1RZUEVfVE9fRk9STUFUW3R5cGVdO1xuICAgICAgcmV0dXJuICh0aGlzLmdldEZvcm1hdCgpICYgZm9ybWF0RmxhZykgIT09IDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IC8vIE11dGF0b3JzXG5cblxuICBzZWxlY3QoX2FuY2hvck9mZnNldCwgX2ZvY3VzT2Zmc2V0KSB7XG4gICAgZXJyb3JPblJlYWRPbmx5KCk7XG4gICAgY29uc3Qgc2VsZWN0aW9uID0gJGdldFNlbGVjdGlvbigpO1xuICAgIGxldCBhbmNob3JPZmZzZXQgPSBfYW5jaG9yT2Zmc2V0O1xuICAgIGxldCBmb2N1c09mZnNldCA9IF9mb2N1c09mZnNldDtcbiAgICBjb25zdCBjaGlsZHJlbkNvdW50ID0gdGhpcy5nZXRDaGlsZHJlblNpemUoKTtcblxuICAgIGlmICghdGhpcy5jYW5CZUVtcHR5KCkpIHtcbiAgICAgIGlmIChfYW5jaG9yT2Zmc2V0ID09PSAwICYmIF9mb2N1c09mZnNldCA9PT0gMCkge1xuICAgICAgICBjb25zdCBmaXJzdENoaWxkID0gdGhpcy5nZXRGaXJzdENoaWxkKCk7XG5cbiAgICAgICAgaWYgKCRpc1RleHROb2RlKGZpcnN0Q2hpbGQpIHx8ICRpc0VsZW1lbnROb2RlKGZpcnN0Q2hpbGQpKSB7XG4gICAgICAgICAgcmV0dXJuIGZpcnN0Q2hpbGQuc2VsZWN0KDAsIDApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKChfYW5jaG9yT2Zmc2V0ID09PSB1bmRlZmluZWQgfHwgX2FuY2hvck9mZnNldCA9PT0gY2hpbGRyZW5Db3VudCkgJiYgKF9mb2N1c09mZnNldCA9PT0gdW5kZWZpbmVkIHx8IF9mb2N1c09mZnNldCA9PT0gY2hpbGRyZW5Db3VudCkpIHtcbiAgICAgICAgY29uc3QgbGFzdENoaWxkID0gdGhpcy5nZXRMYXN0Q2hpbGQoKTtcblxuICAgICAgICBpZiAoJGlzVGV4dE5vZGUobGFzdENoaWxkKSB8fCAkaXNFbGVtZW50Tm9kZShsYXN0Q2hpbGQpKSB7XG4gICAgICAgICAgcmV0dXJuIGxhc3RDaGlsZC5zZWxlY3QoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChhbmNob3JPZmZzZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgYW5jaG9yT2Zmc2V0ID0gY2hpbGRyZW5Db3VudDtcbiAgICB9XG5cbiAgICBpZiAoZm9jdXNPZmZzZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZm9jdXNPZmZzZXQgPSBjaGlsZHJlbkNvdW50O1xuICAgIH1cblxuICAgIGNvbnN0IGtleSA9IHRoaXMuX19rZXk7XG5cbiAgICBpZiAoISRpc1JhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikpIHtcbiAgICAgIHJldHVybiBpbnRlcm5hbE1ha2VSYW5nZVNlbGVjdGlvbihrZXksIGFuY2hvck9mZnNldCwga2V5LCBmb2N1c09mZnNldCwgJ2VsZW1lbnQnLCAnZWxlbWVudCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxlY3Rpb24uYW5jaG9yLnNldChrZXksIGFuY2hvck9mZnNldCwgJ2VsZW1lbnQnKTtcbiAgICAgIHNlbGVjdGlvbi5mb2N1cy5zZXQoa2V5LCBmb2N1c09mZnNldCwgJ2VsZW1lbnQnKTtcbiAgICAgIHNlbGVjdGlvbi5kaXJ0eSA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGVjdGlvbjtcbiAgfVxuXG4gIHNlbGVjdFN0YXJ0KCkge1xuICAgIGNvbnN0IGZpcnN0Tm9kZSA9IHRoaXMuZ2V0Rmlyc3REZXNjZW5kYW50KCk7XG5cbiAgICBpZiAoJGlzRWxlbWVudE5vZGUoZmlyc3ROb2RlKSB8fCAkaXNUZXh0Tm9kZShmaXJzdE5vZGUpKSB7XG4gICAgICByZXR1cm4gZmlyc3ROb2RlLnNlbGVjdCgwLCAwKTtcbiAgICB9IC8vIERlY29yYXRvciBvciBMaW5lQnJlYWtcblxuXG4gICAgaWYgKGZpcnN0Tm9kZSAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGZpcnN0Tm9kZS5zZWxlY3RQcmV2aW91cygpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnNlbGVjdCgwLCAwKTtcbiAgfVxuXG4gIHNlbGVjdEVuZCgpIHtcbiAgICBjb25zdCBsYXN0Tm9kZSA9IHRoaXMuZ2V0TGFzdERlc2NlbmRhbnQoKTtcblxuICAgIGlmICgkaXNFbGVtZW50Tm9kZShsYXN0Tm9kZSkgfHwgJGlzVGV4dE5vZGUobGFzdE5vZGUpKSB7XG4gICAgICByZXR1cm4gbGFzdE5vZGUuc2VsZWN0KCk7XG4gICAgfSAvLyBEZWNvcmF0b3Igb3IgTGluZUJyZWFrXG5cblxuICAgIGlmIChsYXN0Tm9kZSAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGxhc3ROb2RlLnNlbGVjdE5leHQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zZWxlY3QoKTtcbiAgfVxuXG4gIGNsZWFyKCkge1xuICAgIGNvbnN0IHdyaXRhYmxlU2VsZiA9IHRoaXMuZ2V0V3JpdGFibGUoKTtcbiAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuZ2V0Q2hpbGRyZW4oKTtcbiAgICBjaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IGNoaWxkLnJlbW92ZSgpKTtcbiAgICByZXR1cm4gd3JpdGFibGVTZWxmO1xuICB9XG5cbiAgYXBwZW5kKC4uLm5vZGVzVG9BcHBlbmQpIHtcbiAgICByZXR1cm4gdGhpcy5zcGxpY2UodGhpcy5nZXRDaGlsZHJlblNpemUoKSwgMCwgbm9kZXNUb0FwcGVuZCk7XG4gIH1cblxuICBzZXREaXJlY3Rpb24oZGlyZWN0aW9uKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0V3JpdGFibGUoKTtcbiAgICBzZWxmLl9fZGlyID0gZGlyZWN0aW9uO1xuICAgIHJldHVybiBzZWxmO1xuICB9XG5cbiAgc2V0Rm9ybWF0KHR5cGUpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcy5nZXRXcml0YWJsZSgpO1xuICAgIHNlbGYuX19mb3JtYXQgPSB0eXBlICE9PSAnJyA/IEVMRU1FTlRfVFlQRV9UT19GT1JNQVRbdHlwZV0gOiAwO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgc2V0SW5kZW50KGluZGVudExldmVsKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0V3JpdGFibGUoKTtcbiAgICBzZWxmLl9faW5kZW50ID0gaW5kZW50TGV2ZWw7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBzcGxpY2Uoc3RhcnQsIGRlbGV0ZUNvdW50LCBub2Rlc1RvSW5zZXJ0KSB7XG4gICAgY29uc3Qgbm9kZXNUb0luc2VydExlbmd0aCA9IG5vZGVzVG9JbnNlcnQubGVuZ3RoO1xuICAgIGNvbnN0IG9sZFNpemUgPSB0aGlzLmdldENoaWxkcmVuU2l6ZSgpO1xuICAgIGNvbnN0IHdyaXRhYmxlU2VsZiA9IHRoaXMuZ2V0V3JpdGFibGUoKTtcbiAgICBjb25zdCB3cml0YWJsZVNlbGZLZXkgPSB3cml0YWJsZVNlbGYuX19rZXk7XG4gICAgY29uc3Qgbm9kZXNUb0luc2VydEtleXMgPSBbXTtcbiAgICBjb25zdCBub2Rlc1RvUmVtb3ZlS2V5cyA9IFtdO1xuICAgIGNvbnN0IG5vZGVBZnRlclJhbmdlID0gdGhpcy5nZXRDaGlsZEF0SW5kZXgoc3RhcnQgKyBkZWxldGVDb3VudCk7XG4gICAgbGV0IG5vZGVCZWZvcmVSYW5nZSA9IG51bGw7XG4gICAgbGV0IG5ld1NpemUgPSBvbGRTaXplIC0gZGVsZXRlQ291bnQgKyBub2Rlc1RvSW5zZXJ0TGVuZ3RoO1xuXG4gICAgaWYgKHN0YXJ0ICE9PSAwKSB7XG4gICAgICBpZiAoc3RhcnQgPT09IG9sZFNpemUpIHtcbiAgICAgICAgbm9kZUJlZm9yZVJhbmdlID0gdGhpcy5nZXRMYXN0Q2hpbGQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLmdldENoaWxkQXRJbmRleChzdGFydCk7XG5cbiAgICAgICAgaWYgKG5vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICBub2RlQmVmb3JlUmFuZ2UgPSBub2RlLmdldFByZXZpb3VzU2libGluZygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRlbGV0ZUNvdW50ID4gMCkge1xuICAgICAgbGV0IG5vZGVUb0RlbGV0ZSA9IG5vZGVCZWZvcmVSYW5nZSA9PT0gbnVsbCA/IHRoaXMuZ2V0Rmlyc3RDaGlsZCgpIDogbm9kZUJlZm9yZVJhbmdlLmdldE5leHRTaWJsaW5nKCk7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVsZXRlQ291bnQ7IGkrKykge1xuICAgICAgICBpZiAobm9kZVRvRGVsZXRlID09PSBudWxsKSB7XG4gICAgICAgICAge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYHNwbGljZTogc2libGluZyBub3QgZm91bmRgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBuZXh0U2libGluZyA9IG5vZGVUb0RlbGV0ZS5nZXROZXh0U2libGluZygpO1xuICAgICAgICBjb25zdCBub2RlS2V5VG9EZWxldGUgPSBub2RlVG9EZWxldGUuX19rZXk7XG4gICAgICAgIGNvbnN0IHdyaXRhYmxlTm9kZVRvRGVsZXRlID0gbm9kZVRvRGVsZXRlLmdldFdyaXRhYmxlKCk7XG4gICAgICAgIHJlbW92ZUZyb21QYXJlbnQod3JpdGFibGVOb2RlVG9EZWxldGUpO1xuICAgICAgICBub2Rlc1RvUmVtb3ZlS2V5cy5wdXNoKG5vZGVLZXlUb0RlbGV0ZSk7XG4gICAgICAgIG5vZGVUb0RlbGV0ZSA9IG5leHRTaWJsaW5nO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBwcmV2Tm9kZSA9IG5vZGVCZWZvcmVSYW5nZTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXNUb0luc2VydExlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBub2RlVG9JbnNlcnQgPSBub2Rlc1RvSW5zZXJ0W2ldO1xuXG4gICAgICBpZiAocHJldk5vZGUgIT09IG51bGwgJiYgbm9kZVRvSW5zZXJ0LmlzKHByZXZOb2RlKSkge1xuICAgICAgICBub2RlQmVmb3JlUmFuZ2UgPSBwcmV2Tm9kZSA9IHByZXZOb2RlLmdldFByZXZpb3VzU2libGluZygpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB3cml0YWJsZU5vZGVUb0luc2VydCA9IG5vZGVUb0luc2VydC5nZXRXcml0YWJsZSgpO1xuXG4gICAgICBpZiAod3JpdGFibGVOb2RlVG9JbnNlcnQuX19wYXJlbnQgPT09IHdyaXRhYmxlU2VsZktleSkge1xuICAgICAgICBuZXdTaXplLS07XG4gICAgICB9XG5cbiAgICAgIHJlbW92ZUZyb21QYXJlbnQod3JpdGFibGVOb2RlVG9JbnNlcnQpO1xuICAgICAgY29uc3Qgbm9kZUtleVRvSW5zZXJ0ID0gbm9kZVRvSW5zZXJ0Ll9fa2V5O1xuXG4gICAgICBpZiAocHJldk5vZGUgPT09IG51bGwpIHtcbiAgICAgICAgd3JpdGFibGVTZWxmLl9fZmlyc3QgPSBub2RlS2V5VG9JbnNlcnQ7XG4gICAgICAgIHdyaXRhYmxlTm9kZVRvSW5zZXJ0Ll9fcHJldiA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB3cml0YWJsZVByZXZOb2RlID0gcHJldk5vZGUuZ2V0V3JpdGFibGUoKTtcbiAgICAgICAgd3JpdGFibGVQcmV2Tm9kZS5fX25leHQgPSBub2RlS2V5VG9JbnNlcnQ7XG4gICAgICAgIHdyaXRhYmxlTm9kZVRvSW5zZXJ0Ll9fcHJldiA9IHdyaXRhYmxlUHJldk5vZGUuX19rZXk7XG4gICAgICB9XG5cbiAgICAgIGlmIChub2RlVG9JbnNlcnQuX19rZXkgPT09IHdyaXRhYmxlU2VsZktleSkge1xuICAgICAgICB7XG4gICAgICAgICAgdGhyb3cgRXJyb3IoYGFwcGVuZDogYXR0ZW1wdGluZyB0byBhcHBlbmQgc2VsZmApO1xuICAgICAgICB9XG4gICAgICB9IC8vIFNldCBjaGlsZCBwYXJlbnQgdG8gc2VsZlxuXG5cbiAgICAgIHdyaXRhYmxlTm9kZVRvSW5zZXJ0Ll9fcGFyZW50ID0gd3JpdGFibGVTZWxmS2V5O1xuICAgICAgbm9kZXNUb0luc2VydEtleXMucHVzaChub2RlS2V5VG9JbnNlcnQpO1xuICAgICAgcHJldk5vZGUgPSBub2RlVG9JbnNlcnQ7XG4gICAgfVxuXG4gICAgaWYgKHN0YXJ0ICsgZGVsZXRlQ291bnQgPT09IG9sZFNpemUpIHtcbiAgICAgIGlmIChwcmV2Tm9kZSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCB3cml0YWJsZVByZXZOb2RlID0gcHJldk5vZGUuZ2V0V3JpdGFibGUoKTtcbiAgICAgICAgd3JpdGFibGVQcmV2Tm9kZS5fX25leHQgPSBudWxsO1xuICAgICAgICB3cml0YWJsZVNlbGYuX19sYXN0ID0gcHJldk5vZGUuX19rZXk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChub2RlQWZ0ZXJSYW5nZSAhPT0gbnVsbCkge1xuICAgICAgY29uc3Qgd3JpdGFibGVOb2RlQWZ0ZXJSYW5nZSA9IG5vZGVBZnRlclJhbmdlLmdldFdyaXRhYmxlKCk7XG5cbiAgICAgIGlmIChwcmV2Tm9kZSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCB3cml0YWJsZVByZXZOb2RlID0gcHJldk5vZGUuZ2V0V3JpdGFibGUoKTtcbiAgICAgICAgd3JpdGFibGVOb2RlQWZ0ZXJSYW5nZS5fX3ByZXYgPSBwcmV2Tm9kZS5fX2tleTtcbiAgICAgICAgd3JpdGFibGVQcmV2Tm9kZS5fX25leHQgPSBub2RlQWZ0ZXJSYW5nZS5fX2tleTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdyaXRhYmxlTm9kZUFmdGVyUmFuZ2UuX19wcmV2ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB3cml0YWJsZVNlbGYuX19zaXplID0gbmV3U2l6ZTsgLy8gSW4gY2FzZSBvZiBkZWxldGlvbiB3ZSBuZWVkIHRvIGFkanVzdCBzZWxlY3Rpb24sIHVubGluayByZW1vdmVkIG5vZGVzXG4gICAgLy8gYW5kIGNsZWFuIHVwIG5vZGUgaXRzZWxmIGlmIGl0IGJlY29tZXMgZW1wdHkuIE5vbmUgb2YgdGhlc2UgbmVlZGVkXG4gICAgLy8gZm9yIGluc2VydGlvbi1vbmx5IGNhc2VzXG5cbiAgICBpZiAobm9kZXNUb1JlbW92ZUtleXMubGVuZ3RoKSB7XG4gICAgICAvLyBBZGp1c3Rpbmcgc2VsZWN0aW9uLCBpbiBjYXNlIG5vZGUgdGhhdCB3YXMgYW5jaG9yL2ZvY3VzIHdpbGwgYmUgZGVsZXRlZFxuICAgICAgY29uc3Qgc2VsZWN0aW9uID0gJGdldFNlbGVjdGlvbigpO1xuXG4gICAgICBpZiAoJGlzUmFuZ2VTZWxlY3Rpb24oc2VsZWN0aW9uKSkge1xuICAgICAgICBjb25zdCBub2Rlc1RvUmVtb3ZlS2V5U2V0ID0gbmV3IFNldChub2Rlc1RvUmVtb3ZlS2V5cyk7XG4gICAgICAgIGNvbnN0IG5vZGVzVG9JbnNlcnRLZXlTZXQgPSBuZXcgU2V0KG5vZGVzVG9JbnNlcnRLZXlzKTtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICBmb2N1c1xuICAgICAgICB9ID0gc2VsZWN0aW9uO1xuXG4gICAgICAgIGlmIChpc1BvaW50UmVtb3ZlZChhbmNob3IsIG5vZGVzVG9SZW1vdmVLZXlTZXQsIG5vZGVzVG9JbnNlcnRLZXlTZXQpKSB7XG4gICAgICAgICAgbW92ZVNlbGVjdGlvblBvaW50VG9TaWJsaW5nKGFuY2hvciwgYW5jaG9yLmdldE5vZGUoKSwgdGhpcywgbm9kZUJlZm9yZVJhbmdlLCBub2RlQWZ0ZXJSYW5nZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNQb2ludFJlbW92ZWQoZm9jdXMsIG5vZGVzVG9SZW1vdmVLZXlTZXQsIG5vZGVzVG9JbnNlcnRLZXlTZXQpKSB7XG4gICAgICAgICAgbW92ZVNlbGVjdGlvblBvaW50VG9TaWJsaW5nKGZvY3VzLCBmb2N1cy5nZXROb2RlKCksIHRoaXMsIG5vZGVCZWZvcmVSYW5nZSwgbm9kZUFmdGVyUmFuZ2UpO1xuICAgICAgICB9IC8vIENsZWFudXAgaWYgbm9kZSBjYW4ndCBiZSBlbXB0eVxuXG5cbiAgICAgICAgaWYgKG5ld1NpemUgPT09IDAgJiYgIXRoaXMuY2FuQmVFbXB0eSgpICYmICEkaXNSb290T3JTaGFkb3dSb290KHRoaXMpKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB3cml0YWJsZVNlbGY7XG4gIH0gLy8gSlNPTiBzZXJpYWxpemF0aW9uXG5cblxuICBleHBvcnRKU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjaGlsZHJlbjogW10sXG4gICAgICBkaXJlY3Rpb246IHRoaXMuZ2V0RGlyZWN0aW9uKCksXG4gICAgICBmb3JtYXQ6IHRoaXMuZ2V0Rm9ybWF0VHlwZSgpLFxuICAgICAgaW5kZW50OiB0aGlzLmdldEluZGVudCgpLFxuICAgICAgdHlwZTogJ2VsZW1lbnQnLFxuICAgICAgdmVyc2lvbjogMVxuICAgIH07XG4gIH0gLy8gVGhlc2UgYXJlIGludGVuZGVkIHRvIGJlIGV4dGVuZHMgZm9yIHNwZWNpZmljIGVsZW1lbnQgaGV1cmlzdGljcy5cblxuXG4gIGluc2VydE5ld0FmdGVyKHNlbGVjdGlvbiwgcmVzdG9yZVNlbGVjdGlvbikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY2FuSW5zZXJ0VGFiKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGNhbkluZGVudCgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvKlxuICAgKiBUaGlzIG1ldGhvZCBjb250cm9scyB0aGUgYmVoYXZpb3Igb2YgYSB0aGUgbm9kZSBkdXJpbmcgYmFja3dhcmRzXG4gICAqIGRlbGV0aW9uIChpLmUuLCBiYWNrc3BhY2UpIHdoZW4gc2VsZWN0aW9uIGlzIGF0IHRoZSBiZWdpbm5pbmcgb2ZcbiAgICogdGhlIG5vZGUgKG9mZnNldCAwKVxuICAgKi9cblxuXG4gIGNvbGxhcHNlQXRTdGFydChzZWxlY3Rpb24pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBleGNsdWRlRnJvbUNvcHkoZGVzdGluYXRpb24pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjYW5FeHRyYWN0Q29udGVudHMoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBjYW5SZXBsYWNlV2l0aChyZXBsYWNlbWVudCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgY2FuSW5zZXJ0QWZ0ZXIobm9kZSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgY2FuQmVFbXB0eSgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGNhbkluc2VydFRleHRCZWZvcmUoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBjYW5JbnNlcnRUZXh0QWZ0ZXIoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpc0lubGluZSgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gLy8gQSBzaGFkb3cgcm9vdCBpcyBhIE5vZGUgdGhhdCBiZWhhdmVzIGxpa2UgUm9vdE5vZGUuIFRoZSBzaGFkb3cgcm9vdCAoYW5kIFJvb3ROb2RlKSBtYXJrIHRoZVxuICAvLyBlbmQgb2YgdGhlIGhpZXJjaGFyY2h5LCBtb3N0IGltcGxlbWVudGF0aW9ucyBzaG91bGQgdHJlYXQgaXQgYXMgdGhlcmUncyBub3RoaW5nICh1cHdhcmRzKVxuICAvLyBiZXlvbmQgdGhpcyBwb2ludC4gRm9yIGV4YW1wbGUsIG5vZGUuZ2V0VG9wTGV2ZWxFbGVtZW50KCksIHdoZW4gcGVyZm9ybWVkIGluc2lkZSBhIFRhYmxlQ2VsbE5vZGVcbiAgLy8gd2lsbCByZXR1cm4gdGhlIGltbWVkaWF0ZSBmaXJzdCBjaGlsZCB1bmRlcm5lYXRoIFRhYmxlQ2VsbE5vZGUgaW5zdGVhZCBvZiBSb290Tm9kZS5cblxuXG4gIGlzU2hhZG93Um9vdCgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjYW5NZXJnZVdpdGgobm9kZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGV4dHJhY3RXaXRoQ2hpbGQoY2hpbGQsIHNlbGVjdGlvbiwgZGVzdGluYXRpb24pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxufVxuZnVuY3Rpb24gJGlzRWxlbWVudE5vZGUobm9kZSkge1xuICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIEVsZW1lbnROb2RlO1xufVxuXG5mdW5jdGlvbiBpc1BvaW50UmVtb3ZlZChwb2ludCwgbm9kZXNUb1JlbW92ZUtleVNldCwgbm9kZXNUb0luc2VydEtleVNldCkge1xuICBsZXQgbm9kZSA9IHBvaW50LmdldE5vZGUoKTtcblxuICB3aGlsZSAobm9kZSkge1xuICAgIGNvbnN0IG5vZGVLZXkgPSBub2RlLl9fa2V5O1xuXG4gICAgaWYgKG5vZGVzVG9SZW1vdmVLZXlTZXQuaGFzKG5vZGVLZXkpICYmICFub2Rlc1RvSW5zZXJ0S2V5U2V0Lmhhcyhub2RlS2V5KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgbm9kZSA9IG5vZGUuZ2V0UGFyZW50KCk7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cblxuLyoqIEBub0luaGVyaXREb2MgKi9cbmNsYXNzIFJvb3ROb2RlIGV4dGVuZHMgRWxlbWVudE5vZGUge1xuICAvKiogQGludGVybmFsICovXG4gIHN0YXRpYyBnZXRUeXBlKCkge1xuICAgIHJldHVybiAncm9vdCc7XG4gIH1cblxuICBzdGF0aWMgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBSb290Tm9kZSgpO1xuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3Jvb3QnKTtcbiAgICB0aGlzLl9fY2FjaGVkVGV4dCA9IG51bGw7XG4gIH1cblxuICBnZXRUb3BMZXZlbEVsZW1lbnRPclRocm93KCkge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGBnZXRUb3BMZXZlbEVsZW1lbnRPclRocm93OiByb290IG5vZGVzIGFyZSBub3QgdG9wIGxldmVsIGVsZW1lbnRzYCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0VGV4dENvbnRlbnQoKSB7XG4gICAgY29uc3QgY2FjaGVkVGV4dCA9IHRoaXMuX19jYWNoZWRUZXh0O1xuXG4gICAgaWYgKGlzQ3VycmVudGx5UmVhZE9ubHlNb2RlKCkgfHwgZ2V0QWN0aXZlRWRpdG9yKCkuX2RpcnR5VHlwZSA9PT0gTk9fRElSVFlfTk9ERVMpIHtcbiAgICAgIGlmIChjYWNoZWRUZXh0ICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWRUZXh0O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzdXBlci5nZXRUZXh0Q29udGVudCgpO1xuICB9XG5cbiAgcmVtb3ZlKCkge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGByZW1vdmU6IGNhbm5vdCBiZSBjYWxsZWQgb24gcm9vdCBub2Rlc2ApO1xuICAgIH1cbiAgfVxuXG4gIHJlcGxhY2Uobm9kZSkge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGByZXBsYWNlOiBjYW5ub3QgYmUgY2FsbGVkIG9uIHJvb3Qgbm9kZXNgKTtcbiAgICB9XG4gIH1cblxuICBpbnNlcnRCZWZvcmUobm9kZVRvSW5zZXJ0KSB7XG4gICAge1xuICAgICAgdGhyb3cgRXJyb3IoYGluc2VydEJlZm9yZTogY2Fubm90IGJlIGNhbGxlZCBvbiByb290IG5vZGVzYCk7XG4gICAgfVxuICB9XG5cbiAgaW5zZXJ0QWZ0ZXIobm9kZVRvSW5zZXJ0KSB7XG4gICAge1xuICAgICAgdGhyb3cgRXJyb3IoYGluc2VydEFmdGVyOiBjYW5ub3QgYmUgY2FsbGVkIG9uIHJvb3Qgbm9kZXNgKTtcbiAgICB9XG4gIH0gLy8gVmlld1xuXG5cbiAgdXBkYXRlRE9NKHByZXZOb2RlLCBkb20pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gLy8gTXV0YXRlXG5cblxuICBhcHBlbmQoLi4ubm9kZXNUb0FwcGVuZCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXNUb0FwcGVuZC5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzVG9BcHBlbmRbaV07XG5cbiAgICAgIGlmICghJGlzRWxlbWVudE5vZGUobm9kZSkgJiYgISRpc0RlY29yYXRvck5vZGUobm9kZSkpIHtcbiAgICAgICAge1xuICAgICAgICAgIHRocm93IEVycm9yKGByb290Tm9kZS5hcHBlbmQ6IE9ubHkgZWxlbWVudCBvciBkZWNvcmF0b3Igbm9kZXMgY2FuIGJlIGFwcGVuZGVkIHRvIHRoZSByb290IG5vZGVgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzdXBlci5hcHBlbmQoLi4ubm9kZXNUb0FwcGVuZCk7XG4gIH1cblxuICBzdGF0aWMgaW1wb3J0SlNPTihzZXJpYWxpemVkTm9kZSkge1xuICAgIC8vIFdlIGRvbid0IGNyZWF0ZSBhIHJvb3QsIGFuZCBpbnN0ZWFkIHVzZSB0aGUgZXhpc3Rpbmcgcm9vdC5cbiAgICBjb25zdCBub2RlID0gJGdldFJvb3QoKTtcbiAgICBub2RlLnNldEZvcm1hdChzZXJpYWxpemVkTm9kZS5mb3JtYXQpO1xuICAgIG5vZGUuc2V0SW5kZW50KHNlcmlhbGl6ZWROb2RlLmluZGVudCk7XG4gICAgbm9kZS5zZXREaXJlY3Rpb24oc2VyaWFsaXplZE5vZGUuZGlyZWN0aW9uKTtcbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuXG4gIGV4cG9ydEpTT04oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNoaWxkcmVuOiBbXSxcbiAgICAgIGRpcmVjdGlvbjogdGhpcy5nZXREaXJlY3Rpb24oKSxcbiAgICAgIGZvcm1hdDogdGhpcy5nZXRGb3JtYXRUeXBlKCksXG4gICAgICBpbmRlbnQ6IHRoaXMuZ2V0SW5kZW50KCksXG4gICAgICB0eXBlOiAncm9vdCcsXG4gICAgICB2ZXJzaW9uOiAxXG4gICAgfTtcbiAgfVxuXG4gIGNvbGxhcHNlQXRTdGFydCgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG59XG5mdW5jdGlvbiAkY3JlYXRlUm9vdE5vZGUoKSB7XG4gIHJldHVybiBuZXcgUm9vdE5vZGUoKTtcbn1cbmZ1bmN0aW9uICRpc1Jvb3ROb2RlKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBSb290Tm9kZTtcbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xuZnVuY3Rpb24gZWRpdG9yU3RhdGVIYXNEaXJ0eVNlbGVjdGlvbihlZGl0b3JTdGF0ZSwgZWRpdG9yKSB7XG4gIGNvbnN0IGN1cnJlbnRTZWxlY3Rpb24gPSBlZGl0b3IuZ2V0RWRpdG9yU3RhdGUoKS5fc2VsZWN0aW9uO1xuXG4gIGNvbnN0IHBlbmRpbmdTZWxlY3Rpb24gPSBlZGl0b3JTdGF0ZS5fc2VsZWN0aW9uOyAvLyBDaGVjayBpZiB3ZSBuZWVkIHRvIHVwZGF0ZSBiZWNhdXNlIG9mIGNoYW5nZXMgaW4gc2VsZWN0aW9uXG5cbiAgaWYgKHBlbmRpbmdTZWxlY3Rpb24gIT09IG51bGwpIHtcbiAgICBpZiAocGVuZGluZ1NlbGVjdGlvbi5kaXJ0eSB8fCAhcGVuZGluZ1NlbGVjdGlvbi5pcyhjdXJyZW50U2VsZWN0aW9uKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9IGVsc2UgaWYgKGN1cnJlbnRTZWxlY3Rpb24gIT09IG51bGwpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGNsb25lRWRpdG9yU3RhdGUoY3VycmVudCkge1xuICByZXR1cm4gbmV3IEVkaXRvclN0YXRlKG5ldyBNYXAoY3VycmVudC5fbm9kZU1hcCkpO1xufVxuZnVuY3Rpb24gY3JlYXRlRW1wdHlFZGl0b3JTdGF0ZSgpIHtcbiAgcmV0dXJuIG5ldyBFZGl0b3JTdGF0ZShuZXcgTWFwKFtbJ3Jvb3QnLCAkY3JlYXRlUm9vdE5vZGUoKV1dKSk7XG59XG5cbmZ1bmN0aW9uIGV4cG9ydE5vZGVUb0pTT04obm9kZSkge1xuICBjb25zdCBzZXJpYWxpemVkTm9kZSA9IG5vZGUuZXhwb3J0SlNPTigpO1xuICBjb25zdCBub2RlQ2xhc3MgPSBub2RlLmNvbnN0cnVjdG9yOyAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE8gUmVwbGFjZSBDbGFzcyB1dGlsaXR5IHR5cGUgd2l0aCBJbnN0YW5jZVR5cGVcblxuICBpZiAoc2VyaWFsaXplZE5vZGUudHlwZSAhPT0gbm9kZUNsYXNzLmdldFR5cGUoKSkge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGBMZXhpY2FsTm9kZTogTm9kZSAke25vZGVDbGFzcy5uYW1lfSBkb2VzIG5vdCBpbXBsZW1lbnQgLmV4cG9ydEpTT04oKS5gKTtcbiAgICB9XG4gIH0gLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPIFJlcGxhY2UgQ2xhc3MgdXRpbGl0eSB0eXBlIHdpdGggSW5zdGFuY2VUeXBlXG5cblxuICBjb25zdCBzZXJpYWxpemVkQ2hpbGRyZW4gPSBzZXJpYWxpemVkTm9kZS5jaGlsZHJlbjtcblxuICBpZiAoJGlzRWxlbWVudE5vZGUobm9kZSkpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2VyaWFsaXplZENoaWxkcmVuKSkge1xuICAgICAge1xuICAgICAgICB0aHJvdyBFcnJvcihgTGV4aWNhbE5vZGU6IE5vZGUgJHtub2RlQ2xhc3MubmFtZX0gaXMgYW4gZWxlbWVudCBidXQgLmV4cG9ydEpTT04oKSBkb2VzIG5vdCBoYXZlIGEgY2hpbGRyZW4gYXJyYXkuYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY2hpbGRyZW4gPSBub2RlLmdldENoaWxkcmVuKCk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgY29uc3Qgc2VyaWFsaXplZENoaWxkTm9kZSA9IGV4cG9ydE5vZGVUb0pTT04oY2hpbGQpO1xuICAgICAgc2VyaWFsaXplZENoaWxkcmVuLnB1c2goc2VyaWFsaXplZENoaWxkTm9kZSk7XG4gICAgfVxuICB9IC8vIEB0cy1leHBlY3QtZXJyb3JcblxuXG4gIHJldHVybiBzZXJpYWxpemVkTm9kZTtcbn1cblxuY2xhc3MgRWRpdG9yU3RhdGUge1xuICBjb25zdHJ1Y3Rvcihub2RlTWFwLCBzZWxlY3Rpb24pIHtcbiAgICB0aGlzLl9ub2RlTWFwID0gbm9kZU1hcDtcbiAgICB0aGlzLl9zZWxlY3Rpb24gPSBzZWxlY3Rpb24gfHwgbnVsbDtcbiAgICB0aGlzLl9mbHVzaFN5bmMgPSBmYWxzZTtcbiAgICB0aGlzLl9yZWFkT25seSA9IGZhbHNlO1xuICB9XG5cbiAgaXNFbXB0eSgpIHtcbiAgICByZXR1cm4gdGhpcy5fbm9kZU1hcC5zaXplID09PSAxICYmIHRoaXMuX3NlbGVjdGlvbiA9PT0gbnVsbDtcbiAgfVxuXG4gIHJlYWQoY2FsbGJhY2tGbikge1xuICAgIHJldHVybiByZWFkRWRpdG9yU3RhdGUodGhpcywgY2FsbGJhY2tGbik7XG4gIH1cblxuICBjbG9uZShzZWxlY3Rpb24pIHtcbiAgICBjb25zdCBlZGl0b3JTdGF0ZSA9IG5ldyBFZGl0b3JTdGF0ZSh0aGlzLl9ub2RlTWFwLCBzZWxlY3Rpb24gPT09IHVuZGVmaW5lZCA/IHRoaXMuX3NlbGVjdGlvbiA6IHNlbGVjdGlvbik7XG4gICAgZWRpdG9yU3RhdGUuX3JlYWRPbmx5ID0gdHJ1ZTtcbiAgICByZXR1cm4gZWRpdG9yU3RhdGU7XG4gIH1cblxuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHJlYWRFZGl0b3JTdGF0ZSh0aGlzLCAoKSA9PiAoe1xuICAgICAgcm9vdDogZXhwb3J0Tm9kZVRvSlNPTigkZ2V0Um9vdCgpKVxuICAgIH0pKTtcbiAgfVxuXG59XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cblxuLyoqIEBub0luaGVyaXREb2MgKi9cbmNsYXNzIExpbmVCcmVha05vZGUgZXh0ZW5kcyBMZXhpY2FsTm9kZSB7XG4gIHN0YXRpYyBnZXRUeXBlKCkge1xuICAgIHJldHVybiAnbGluZWJyZWFrJztcbiAgfVxuXG4gIHN0YXRpYyBjbG9uZShub2RlKSB7XG4gICAgcmV0dXJuIG5ldyBMaW5lQnJlYWtOb2RlKG5vZGUuX19rZXkpO1xuICB9XG5cbiAgY29uc3RydWN0b3Ioa2V5KSB7XG4gICAgc3VwZXIoa2V5KTtcbiAgfVxuXG4gIGdldFRleHRDb250ZW50KCkge1xuICAgIHJldHVybiAnXFxuJztcbiAgfVxuXG4gIGNyZWF0ZURPTSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnInKTtcbiAgfVxuXG4gIHVwZGF0ZURPTSgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdGF0aWMgaW1wb3J0RE9NKCkge1xuICAgIHJldHVybiB7XG4gICAgICBicjogbm9kZSA9PiB7XG4gICAgICAgIGNvbnN0IHBhcmVudEVsZW1lbnQgPSBub2RlLnBhcmVudEVsZW1lbnQ7IC8vIElmIHRoZSA8YnI+IGlzIHRoZSBvbmx5IGNoaWxkLCB0aGVuIHNraXAgaW5jbHVkaW5nIGl0XG5cbiAgICAgICAgaWYgKHBhcmVudEVsZW1lbnQgIT0gbnVsbCAmJiBwYXJlbnRFbGVtZW50LmZpcnN0Q2hpbGQgPT09IG5vZGUgJiYgcGFyZW50RWxlbWVudC5sYXN0Q2hpbGQgPT09IG5vZGUpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY29udmVyc2lvbjogY29udmVydExpbmVCcmVha0VsZW1lbnQsXG4gICAgICAgICAgcHJpb3JpdHk6IDBcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgc3RhdGljIGltcG9ydEpTT04oc2VyaWFsaXplZExpbmVCcmVha05vZGUpIHtcbiAgICByZXR1cm4gJGNyZWF0ZUxpbmVCcmVha05vZGUoKTtcbiAgfVxuXG4gIGV4cG9ydEpTT04oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdsaW5lYnJlYWsnLFxuICAgICAgdmVyc2lvbjogMVxuICAgIH07XG4gIH1cblxufVxuXG5mdW5jdGlvbiBjb252ZXJ0TGluZUJyZWFrRWxlbWVudChub2RlKSB7XG4gIHJldHVybiB7XG4gICAgbm9kZTogJGNyZWF0ZUxpbmVCcmVha05vZGUoKVxuICB9O1xufVxuXG5mdW5jdGlvbiAkY3JlYXRlTGluZUJyZWFrTm9kZSgpIHtcbiAgcmV0dXJuICRhcHBseU5vZGVSZXBsYWNlbWVudChuZXcgTGluZUJyZWFrTm9kZSgpKTtcbn1cbmZ1bmN0aW9uICRpc0xpbmVCcmVha05vZGUobm9kZSkge1xuICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIExpbmVCcmVha05vZGU7XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cblxuZnVuY3Rpb24gZ2V0RWxlbWVudE91dGVyVGFnKG5vZGUsIGZvcm1hdCkge1xuICBpZiAoZm9ybWF0ICYgSVNfQ09ERSkge1xuICAgIHJldHVybiAnY29kZSc7XG4gIH1cblxuICBpZiAoZm9ybWF0ICYgSVNfSElHSExJR0hUKSB7XG4gICAgcmV0dXJuICdtYXJrJztcbiAgfVxuXG4gIGlmIChmb3JtYXQgJiBJU19TVUJTQ1JJUFQpIHtcbiAgICByZXR1cm4gJ3N1Yic7XG4gIH1cblxuICBpZiAoZm9ybWF0ICYgSVNfU1VQRVJTQ1JJUFQpIHtcbiAgICByZXR1cm4gJ3N1cCc7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gZ2V0RWxlbWVudElubmVyVGFnKG5vZGUsIGZvcm1hdCkge1xuICBpZiAoZm9ybWF0ICYgSVNfQk9MRCkge1xuICAgIHJldHVybiAnc3Ryb25nJztcbiAgfVxuXG4gIGlmIChmb3JtYXQgJiBJU19JVEFMSUMpIHtcbiAgICByZXR1cm4gJ2VtJztcbiAgfVxuXG4gIHJldHVybiAnc3Bhbic7XG59XG5cbmZ1bmN0aW9uIHNldFRleHRUaGVtZUNsYXNzTmFtZXModGFnLCBwcmV2Rm9ybWF0LCBuZXh0Rm9ybWF0LCBkb20sIHRleHRDbGFzc05hbWVzKSB7XG4gIGNvbnN0IGRvbUNsYXNzTGlzdCA9IGRvbS5jbGFzc0xpc3Q7IC8vIEZpcnN0bHkgd2UgaGFuZGxlIHRoZSBiYXNlIHRoZW1lLlxuXG4gIGxldCBjbGFzc05hbWVzID0gZ2V0Q2FjaGVkQ2xhc3NOYW1lQXJyYXkodGV4dENsYXNzTmFtZXMsICdiYXNlJyk7XG5cbiAgaWYgKGNsYXNzTmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgIGRvbUNsYXNzTGlzdC5hZGQoLi4uY2xhc3NOYW1lcyk7XG4gIH0gLy8gU2Vjb25kbHkgd2UgaGFuZGxlIHRoZSBzcGVjaWFsIGNhc2U6IHVuZGVybGluZSArIHN0cmlrZXRocm91Z2guXG4gIC8vIFdlIGhhdmUgdG8gZG8gdGhpcyBhcyB3ZSBuZWVkIGEgd2F5IHRvIGNvbXBvc2UgdGhlIGZhY3QgdGhhdFxuICAvLyB0aGUgc2FtZSBDU1MgcHJvcGVydHkgd2lsbCBuZWVkIHRvIGJlIHVzZWQ6IHRleHQtZGVjb3JhdGlvbi5cbiAgLy8gSW4gYW4gaWRlYWwgd29ybGQgd2Ugc2hvdWxkbid0IGhhdmUgdG8gZG8gdGhpcywgYnV0IHRoZXJlJ3Mgbm9cbiAgLy8gZWFzeSB3b3JrYXJvdW5kIGZvciBtYW55IGF0b21pYyBDU1Mgc3lzdGVtcyB0b2RheS5cblxuXG4gIGNsYXNzTmFtZXMgPSBnZXRDYWNoZWRDbGFzc05hbWVBcnJheSh0ZXh0Q2xhc3NOYW1lcywgJ3VuZGVybGluZVN0cmlrZXRocm91Z2gnKTtcbiAgbGV0IGhhc1VuZGVybGluZVN0cmlrZXRocm91Z2ggPSBmYWxzZTtcbiAgY29uc3QgcHJldlVuZGVybGluZVN0cmlrZXRocm91Z2ggPSBwcmV2Rm9ybWF0ICYgSVNfVU5ERVJMSU5FICYmIHByZXZGb3JtYXQgJiBJU19TVFJJS0VUSFJPVUdIO1xuICBjb25zdCBuZXh0VW5kZXJsaW5lU3RyaWtldGhyb3VnaCA9IG5leHRGb3JtYXQgJiBJU19VTkRFUkxJTkUgJiYgbmV4dEZvcm1hdCAmIElTX1NUUklLRVRIUk9VR0g7XG5cbiAgaWYgKGNsYXNzTmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgIGlmIChuZXh0VW5kZXJsaW5lU3RyaWtldGhyb3VnaCkge1xuICAgICAgaGFzVW5kZXJsaW5lU3RyaWtldGhyb3VnaCA9IHRydWU7XG5cbiAgICAgIGlmICghcHJldlVuZGVybGluZVN0cmlrZXRocm91Z2gpIHtcbiAgICAgICAgZG9tQ2xhc3NMaXN0LmFkZCguLi5jbGFzc05hbWVzKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHByZXZVbmRlcmxpbmVTdHJpa2V0aHJvdWdoKSB7XG4gICAgICBkb21DbGFzc0xpc3QucmVtb3ZlKC4uLmNsYXNzTmFtZXMpO1xuICAgIH1cbiAgfVxuXG4gIGZvciAoY29uc3Qga2V5IGluIFRFWFRfVFlQRV9UT19GT1JNQVQpIHtcbiAgICBjb25zdCBmb3JtYXQgPSBrZXk7XG4gICAgY29uc3QgZmxhZyA9IFRFWFRfVFlQRV9UT19GT1JNQVRbZm9ybWF0XTtcbiAgICBjbGFzc05hbWVzID0gZ2V0Q2FjaGVkQ2xhc3NOYW1lQXJyYXkodGV4dENsYXNzTmFtZXMsIGtleSk7XG5cbiAgICBpZiAoY2xhc3NOYW1lcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAobmV4dEZvcm1hdCAmIGZsYWcpIHtcbiAgICAgICAgaWYgKGhhc1VuZGVybGluZVN0cmlrZXRocm91Z2ggJiYgKGtleSA9PT0gJ3VuZGVybGluZScgfHwga2V5ID09PSAnc3RyaWtldGhyb3VnaCcpKSB7XG4gICAgICAgICAgaWYgKHByZXZGb3JtYXQgJiBmbGFnKSB7XG4gICAgICAgICAgICBkb21DbGFzc0xpc3QucmVtb3ZlKC4uLmNsYXNzTmFtZXMpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKChwcmV2Rm9ybWF0ICYgZmxhZykgPT09IDAgfHwgcHJldlVuZGVybGluZVN0cmlrZXRocm91Z2ggJiYga2V5ID09PSAndW5kZXJsaW5lJyB8fCBrZXkgPT09ICdzdHJpa2V0aHJvdWdoJykge1xuICAgICAgICAgIGRvbUNsYXNzTGlzdC5hZGQoLi4uY2xhc3NOYW1lcyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocHJldkZvcm1hdCAmIGZsYWcpIHtcbiAgICAgICAgZG9tQ2xhc3NMaXN0LnJlbW92ZSguLi5jbGFzc05hbWVzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZGlmZkNvbXBvc2VkVGV4dChhLCBiKSB7XG4gIGNvbnN0IGFMZW5ndGggPSBhLmxlbmd0aDtcbiAgY29uc3QgYkxlbmd0aCA9IGIubGVuZ3RoO1xuICBsZXQgbGVmdCA9IDA7XG4gIGxldCByaWdodCA9IDA7XG5cbiAgd2hpbGUgKGxlZnQgPCBhTGVuZ3RoICYmIGxlZnQgPCBiTGVuZ3RoICYmIGFbbGVmdF0gPT09IGJbbGVmdF0pIHtcbiAgICBsZWZ0Kys7XG4gIH1cblxuICB3aGlsZSAocmlnaHQgKyBsZWZ0IDwgYUxlbmd0aCAmJiByaWdodCArIGxlZnQgPCBiTGVuZ3RoICYmIGFbYUxlbmd0aCAtIHJpZ2h0IC0gMV0gPT09IGJbYkxlbmd0aCAtIHJpZ2h0IC0gMV0pIHtcbiAgICByaWdodCsrO1xuICB9XG5cbiAgcmV0dXJuIFtsZWZ0LCBhTGVuZ3RoIC0gbGVmdCAtIHJpZ2h0LCBiLnNsaWNlKGxlZnQsIGJMZW5ndGggLSByaWdodCldO1xufVxuXG5mdW5jdGlvbiBzZXRUZXh0Q29udGVudChuZXh0VGV4dCwgZG9tLCBub2RlKSB7XG4gIGNvbnN0IGZpcnN0Q2hpbGQgPSBkb20uZmlyc3RDaGlsZDtcbiAgY29uc3QgaXNDb21wb3NpbmcgPSBub2RlLmlzQ29tcG9zaW5nKCk7IC8vIEFsd2F5cyBhZGQgYSBzdWZmaXggaWYgd2UncmUgY29tcG9zaW5nIGEgbm9kZVxuXG4gIGNvbnN0IHN1ZmZpeCA9IGlzQ29tcG9zaW5nID8gQ09NUE9TSVRJT05fU1VGRklYIDogJyc7XG4gIGNvbnN0IHRleHQgPSBuZXh0VGV4dCArIHN1ZmZpeDtcblxuICBpZiAoZmlyc3RDaGlsZCA9PSBudWxsKSB7XG4gICAgZG9tLnRleHRDb250ZW50ID0gdGV4dDtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBub2RlVmFsdWUgPSBmaXJzdENoaWxkLm5vZGVWYWx1ZTtcblxuICAgIGlmIChub2RlVmFsdWUgIT09IHRleHQpIHtcbiAgICAgIGlmIChpc0NvbXBvc2luZyB8fCBJU19GSVJFRk9YKSB7XG4gICAgICAgIC8vIFdlIGFsc28gdXNlIHRoZSBkaWZmIGNvbXBvc2VkIHRleHQgZm9yIGdlbmVyYWwgdGV4dCBpbiBGRiB0byBhdm9pZFxuICAgICAgICAvLyB0aGUgc3BlbGxjaGVjayByZWQgbGluZSBmcm9tIGZsaWNrZXJpbmcuXG4gICAgICAgIGNvbnN0IFtpbmRleCwgcmVtb3ZlLCBpbnNlcnRdID0gZGlmZkNvbXBvc2VkVGV4dChub2RlVmFsdWUsIHRleHQpO1xuXG4gICAgICAgIGlmIChyZW1vdmUgIT09IDApIHtcbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgZmlyc3RDaGlsZC5kZWxldGVEYXRhKGluZGV4LCByZW1vdmUpO1xuICAgICAgICB9IC8vIEB0cy1leHBlY3QtZXJyb3JcblxuXG4gICAgICAgIGZpcnN0Q2hpbGQuaW5zZXJ0RGF0YShpbmRleCwgaW5zZXJ0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpcnN0Q2hpbGQubm9kZVZhbHVlID0gdGV4dDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlVGV4dElubmVyRE9NKGlubmVyRE9NLCBub2RlLCBpbm5lclRhZywgZm9ybWF0LCB0ZXh0LCBjb25maWcpIHtcbiAgc2V0VGV4dENvbnRlbnQodGV4dCwgaW5uZXJET00sIG5vZGUpO1xuICBjb25zdCB0aGVtZSA9IGNvbmZpZy50aGVtZTsgLy8gQXBwbHkgdGhlbWUgY2xhc3MgbmFtZXNcblxuICBjb25zdCB0ZXh0Q2xhc3NOYW1lcyA9IHRoZW1lLnRleHQ7XG5cbiAgaWYgKHRleHRDbGFzc05hbWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICBzZXRUZXh0VGhlbWVDbGFzc05hbWVzKGlubmVyVGFnLCAwLCBmb3JtYXQsIGlubmVyRE9NLCB0ZXh0Q2xhc3NOYW1lcyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gd3JhcEVsZW1lbnRXaXRoKGVsZW1lbnQsIHRhZykge1xuICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcbiAgZWwuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gIHJldHVybiBlbDtcbn1cbi8qKiBAbm9Jbmhlcml0RG9jICovXG5cblxuY2xhc3MgVGV4dE5vZGUgZXh0ZW5kcyBMZXhpY2FsTm9kZSB7XG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgc3RhdGljIGdldFR5cGUoKSB7XG4gICAgcmV0dXJuICd0ZXh0JztcbiAgfVxuXG4gIHN0YXRpYyBjbG9uZShub2RlKSB7XG4gICAgcmV0dXJuIG5ldyBUZXh0Tm9kZShub2RlLl9fdGV4dCwgbm9kZS5fX2tleSk7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcih0ZXh0LCBrZXkpIHtcbiAgICBzdXBlcihrZXkpO1xuICAgIHRoaXMuX190ZXh0ID0gdGV4dDtcbiAgICB0aGlzLl9fZm9ybWF0ID0gMDtcbiAgICB0aGlzLl9fc3R5bGUgPSAnJztcbiAgICB0aGlzLl9fbW9kZSA9IDA7XG4gICAgdGhpcy5fX2RldGFpbCA9IDA7XG4gIH1cblxuICBnZXRGb3JtYXQoKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0TGF0ZXN0KCk7XG4gICAgcmV0dXJuIHNlbGYuX19mb3JtYXQ7XG4gIH1cblxuICBnZXREZXRhaWwoKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0TGF0ZXN0KCk7XG4gICAgcmV0dXJuIHNlbGYuX19kZXRhaWw7XG4gIH1cblxuICBnZXRNb2RlKCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzLmdldExhdGVzdCgpO1xuICAgIHJldHVybiBURVhUX1RZUEVfVE9fTU9ERVtzZWxmLl9fbW9kZV07XG4gIH1cblxuICBnZXRTdHlsZSgpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcy5nZXRMYXRlc3QoKTtcbiAgICByZXR1cm4gc2VsZi5fX3N0eWxlO1xuICB9XG5cbiAgaXNUb2tlbigpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcy5nZXRMYXRlc3QoKTtcbiAgICByZXR1cm4gc2VsZi5fX21vZGUgPT09IElTX1RPS0VOO1xuICB9XG5cbiAgaXNDb21wb3NpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuX19rZXkgPT09ICRnZXRDb21wb3NpdGlvbktleSgpO1xuICB9XG5cbiAgaXNTZWdtZW50ZWQoKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0TGF0ZXN0KCk7XG4gICAgcmV0dXJuIHNlbGYuX19tb2RlID09PSBJU19TRUdNRU5URUQ7XG4gIH1cblxuICBpc0RpcmVjdGlvbmxlc3MoKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0TGF0ZXN0KCk7XG4gICAgcmV0dXJuIChzZWxmLl9fZGV0YWlsICYgSVNfRElSRUNUSU9OTEVTUykgIT09IDA7XG4gIH1cblxuICBpc1VubWVyZ2VhYmxlKCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzLmdldExhdGVzdCgpO1xuICAgIHJldHVybiAoc2VsZi5fX2RldGFpbCAmIElTX1VOTUVSR0VBQkxFKSAhPT0gMDtcbiAgfVxuXG4gIGhhc0Zvcm1hdCh0eXBlKSB7XG4gICAgY29uc3QgZm9ybWF0RmxhZyA9IFRFWFRfVFlQRV9UT19GT1JNQVRbdHlwZV07XG4gICAgcmV0dXJuICh0aGlzLmdldEZvcm1hdCgpICYgZm9ybWF0RmxhZykgIT09IDA7XG4gIH1cblxuICBpc1NpbXBsZVRleHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX190eXBlID09PSAndGV4dCcgJiYgdGhpcy5fX21vZGUgPT09IDA7XG4gIH1cblxuICBnZXRUZXh0Q29udGVudCgpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcy5nZXRMYXRlc3QoKTtcbiAgICByZXR1cm4gc2VsZi5fX3RleHQ7XG4gIH1cblxuICBnZXRGb3JtYXRGbGFncyh0eXBlLCBhbGlnbldpdGhGb3JtYXQpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcy5nZXRMYXRlc3QoKTtcbiAgICBjb25zdCBmb3JtYXQgPSBzZWxmLl9fZm9ybWF0O1xuICAgIHJldHVybiB0b2dnbGVUZXh0Rm9ybWF0VHlwZShmb3JtYXQsIHR5cGUsIGFsaWduV2l0aEZvcm1hdCk7XG4gIH0gLy8gVmlld1xuXG5cbiAgY3JlYXRlRE9NKGNvbmZpZykge1xuICAgIGNvbnN0IGZvcm1hdCA9IHRoaXMuX19mb3JtYXQ7XG4gICAgY29uc3Qgb3V0ZXJUYWcgPSBnZXRFbGVtZW50T3V0ZXJUYWcodGhpcywgZm9ybWF0KTtcbiAgICBjb25zdCBpbm5lclRhZyA9IGdldEVsZW1lbnRJbm5lclRhZyh0aGlzLCBmb3JtYXQpO1xuICAgIGNvbnN0IHRhZyA9IG91dGVyVGFnID09PSBudWxsID8gaW5uZXJUYWcgOiBvdXRlclRhZztcbiAgICBjb25zdCBkb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG4gICAgbGV0IGlubmVyRE9NID0gZG9tO1xuXG4gICAgaWYgKG91dGVyVGFnICE9PSBudWxsKSB7XG4gICAgICBpbm5lckRPTSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaW5uZXJUYWcpO1xuICAgICAgZG9tLmFwcGVuZENoaWxkKGlubmVyRE9NKTtcbiAgICB9XG5cbiAgICBjb25zdCB0ZXh0ID0gdGhpcy5fX3RleHQ7XG4gICAgY3JlYXRlVGV4dElubmVyRE9NKGlubmVyRE9NLCB0aGlzLCBpbm5lclRhZywgZm9ybWF0LCB0ZXh0LCBjb25maWcpO1xuICAgIGNvbnN0IHN0eWxlID0gdGhpcy5fX3N0eWxlO1xuXG4gICAgaWYgKHN0eWxlICE9PSAnJykge1xuICAgICAgZG9tLnN0eWxlLmNzc1RleHQgPSBzdHlsZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZG9tO1xuICB9XG5cbiAgdXBkYXRlRE9NKHByZXZOb2RlLCBkb20sIGNvbmZpZykge1xuICAgIGNvbnN0IG5leHRUZXh0ID0gdGhpcy5fX3RleHQ7XG4gICAgY29uc3QgcHJldkZvcm1hdCA9IHByZXZOb2RlLl9fZm9ybWF0O1xuICAgIGNvbnN0IG5leHRGb3JtYXQgPSB0aGlzLl9fZm9ybWF0O1xuICAgIGNvbnN0IHByZXZPdXRlclRhZyA9IGdldEVsZW1lbnRPdXRlclRhZyh0aGlzLCBwcmV2Rm9ybWF0KTtcbiAgICBjb25zdCBuZXh0T3V0ZXJUYWcgPSBnZXRFbGVtZW50T3V0ZXJUYWcodGhpcywgbmV4dEZvcm1hdCk7XG4gICAgY29uc3QgcHJldklubmVyVGFnID0gZ2V0RWxlbWVudElubmVyVGFnKHRoaXMsIHByZXZGb3JtYXQpO1xuICAgIGNvbnN0IG5leHRJbm5lclRhZyA9IGdldEVsZW1lbnRJbm5lclRhZyh0aGlzLCBuZXh0Rm9ybWF0KTtcbiAgICBjb25zdCBwcmV2VGFnID0gcHJldk91dGVyVGFnID09PSBudWxsID8gcHJldklubmVyVGFnIDogcHJldk91dGVyVGFnO1xuICAgIGNvbnN0IG5leHRUYWcgPSBuZXh0T3V0ZXJUYWcgPT09IG51bGwgPyBuZXh0SW5uZXJUYWcgOiBuZXh0T3V0ZXJUYWc7XG5cbiAgICBpZiAocHJldlRhZyAhPT0gbmV4dFRhZykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHByZXZPdXRlclRhZyA9PT0gbmV4dE91dGVyVGFnICYmIHByZXZJbm5lclRhZyAhPT0gbmV4dElubmVyVGFnKSB7XG4gICAgICAvLyBzaG91bGQgYWx3YXlzIGJlIGFuIGVsZW1lbnRcbiAgICAgIGNvbnN0IHByZXZJbm5lckRPTSA9IGRvbS5maXJzdENoaWxkO1xuXG4gICAgICBpZiAocHJldklubmVyRE9NID09IG51bGwpIHtcbiAgICAgICAge1xuICAgICAgICAgIHRocm93IEVycm9yKGB1cGRhdGVET006IHByZXZJbm5lckRPTSBpcyBudWxsIG9yIHVuZGVmaW5lZGApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5leHRJbm5lckRPTSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmV4dElubmVyVGFnKTtcbiAgICAgIGNyZWF0ZVRleHRJbm5lckRPTShuZXh0SW5uZXJET00sIHRoaXMsIG5leHRJbm5lclRhZywgbmV4dEZvcm1hdCwgbmV4dFRleHQsIGNvbmZpZyk7XG4gICAgICBkb20ucmVwbGFjZUNoaWxkKG5leHRJbm5lckRPTSwgcHJldklubmVyRE9NKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBsZXQgaW5uZXJET00gPSBkb207XG5cbiAgICBpZiAobmV4dE91dGVyVGFnICE9PSBudWxsKSB7XG4gICAgICBpZiAocHJldk91dGVyVGFnICE9PSBudWxsKSB7XG4gICAgICAgIGlubmVyRE9NID0gZG9tLmZpcnN0Q2hpbGQ7XG5cbiAgICAgICAgaWYgKGlubmVyRE9NID09IG51bGwpIHtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgdXBkYXRlRE9NOiBpbm5lckRPTSBpcyBudWxsIG9yIHVuZGVmaW5lZGApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHNldFRleHRDb250ZW50KG5leHRUZXh0LCBpbm5lckRPTSwgdGhpcyk7XG4gICAgY29uc3QgdGhlbWUgPSBjb25maWcudGhlbWU7IC8vIEFwcGx5IHRoZW1lIGNsYXNzIG5hbWVzXG5cbiAgICBjb25zdCB0ZXh0Q2xhc3NOYW1lcyA9IHRoZW1lLnRleHQ7XG5cbiAgICBpZiAodGV4dENsYXNzTmFtZXMgIT09IHVuZGVmaW5lZCAmJiBwcmV2Rm9ybWF0ICE9PSBuZXh0Rm9ybWF0KSB7XG4gICAgICBzZXRUZXh0VGhlbWVDbGFzc05hbWVzKG5leHRJbm5lclRhZywgcHJldkZvcm1hdCwgbmV4dEZvcm1hdCwgaW5uZXJET00sIHRleHRDbGFzc05hbWVzKTtcbiAgICB9XG5cbiAgICBjb25zdCBwcmV2U3R5bGUgPSBwcmV2Tm9kZS5fX3N0eWxlO1xuICAgIGNvbnN0IG5leHRTdHlsZSA9IHRoaXMuX19zdHlsZTtcblxuICAgIGlmIChwcmV2U3R5bGUgIT09IG5leHRTdHlsZSkge1xuICAgICAgZG9tLnN0eWxlLmNzc1RleHQgPSBuZXh0U3R5bGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3RhdGljIGltcG9ydERPTSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJyN0ZXh0JzogKCkgPT4gKHtcbiAgICAgICAgY29udmVyc2lvbjogY29udmVydFRleHRET01Ob2RlLFxuICAgICAgICBwcmlvcml0eTogMFxuICAgICAgfSksXG4gICAgICBiOiAoKSA9PiAoe1xuICAgICAgICBjb252ZXJzaW9uOiBjb252ZXJ0QnJpbmdBdHRlbnRpb25Ub0VsZW1lbnQsXG4gICAgICAgIHByaW9yaXR5OiAwXG4gICAgICB9KSxcbiAgICAgIGJyOiAoKSA9PiAoe1xuICAgICAgICBjb252ZXJzaW9uOiBjb252ZXJ0TGluZUJyZWFrVG9FbGVtZW50LFxuICAgICAgICBwcmlvcml0eTogMFxuICAgICAgfSksXG4gICAgICBjb2RlOiAoKSA9PiAoe1xuICAgICAgICBjb252ZXJzaW9uOiBjb252ZXJ0VGV4dEZvcm1hdEVsZW1lbnQsXG4gICAgICAgIHByaW9yaXR5OiAwXG4gICAgICB9KSxcbiAgICAgIGVtOiAoKSA9PiAoe1xuICAgICAgICBjb252ZXJzaW9uOiBjb252ZXJ0VGV4dEZvcm1hdEVsZW1lbnQsXG4gICAgICAgIHByaW9yaXR5OiAwXG4gICAgICB9KSxcbiAgICAgIGk6ICgpID0+ICh7XG4gICAgICAgIGNvbnZlcnNpb246IGNvbnZlcnRUZXh0Rm9ybWF0RWxlbWVudCxcbiAgICAgICAgcHJpb3JpdHk6IDBcbiAgICAgIH0pLFxuICAgICAgczogKCkgPT4gKHtcbiAgICAgICAgY29udmVyc2lvbjogY29udmVydFRleHRGb3JtYXRFbGVtZW50LFxuICAgICAgICBwcmlvcml0eTogMFxuICAgICAgfSksXG4gICAgICBzcGFuOiAoKSA9PiAoe1xuICAgICAgICBjb252ZXJzaW9uOiBjb252ZXJ0U3BhbkVsZW1lbnQsXG4gICAgICAgIHByaW9yaXR5OiAwXG4gICAgICB9KSxcbiAgICAgIHN0cm9uZzogKCkgPT4gKHtcbiAgICAgICAgY29udmVyc2lvbjogY29udmVydFRleHRGb3JtYXRFbGVtZW50LFxuICAgICAgICBwcmlvcml0eTogMFxuICAgICAgfSksXG4gICAgICBzdWI6ICgpID0+ICh7XG4gICAgICAgIGNvbnZlcnNpb246IGNvbnZlcnRUZXh0Rm9ybWF0RWxlbWVudCxcbiAgICAgICAgcHJpb3JpdHk6IDBcbiAgICAgIH0pLFxuICAgICAgc3VwOiAoKSA9PiAoe1xuICAgICAgICBjb252ZXJzaW9uOiBjb252ZXJ0VGV4dEZvcm1hdEVsZW1lbnQsXG4gICAgICAgIHByaW9yaXR5OiAwXG4gICAgICB9KSxcbiAgICAgIHU6ICgpID0+ICh7XG4gICAgICAgIGNvbnZlcnNpb246IGNvbnZlcnRUZXh0Rm9ybWF0RWxlbWVudCxcbiAgICAgICAgcHJpb3JpdHk6IDBcbiAgICAgIH0pXG4gICAgfTtcbiAgfVxuXG4gIHN0YXRpYyBpbXBvcnRKU09OKHNlcmlhbGl6ZWROb2RlKSB7XG4gICAgY29uc3Qgbm9kZSA9ICRjcmVhdGVUZXh0Tm9kZShzZXJpYWxpemVkTm9kZS50ZXh0KTtcbiAgICBub2RlLnNldEZvcm1hdChzZXJpYWxpemVkTm9kZS5mb3JtYXQpO1xuICAgIG5vZGUuc2V0RGV0YWlsKHNlcmlhbGl6ZWROb2RlLmRldGFpbCk7XG4gICAgbm9kZS5zZXRNb2RlKHNlcmlhbGl6ZWROb2RlLm1vZGUpO1xuICAgIG5vZGUuc2V0U3R5bGUoc2VyaWFsaXplZE5vZGUuc3R5bGUpO1xuICAgIHJldHVybiBub2RlO1xuICB9IC8vIFRoaXMgaW1wcm92ZXMgTGV4aWNhbCdzIGJhc2ljIHRleHQgb3V0cHV0IGluIGNvcHkrcGFzdGUgcGx1c1xuICAvLyBmb3IgaGVhZGxlc3MgbW9kZSB3aGVyZSBwZW9wbGUgbWlnaHQgdXNlIExleGljYWwgdG8gZ2VuZXJhdGVcbiAgLy8gSFRNTCBjb250ZW50IGFuZCBub3QgaGF2ZSB0aGUgYWJpbGl0eSB0byB1c2UgQ1NTIGNsYXNzZXMuXG5cblxuICBleHBvcnRET00oZWRpdG9yKSB7XG4gICAgbGV0IHtcbiAgICAgIGVsZW1lbnRcbiAgICB9ID0gc3VwZXIuZXhwb3J0RE9NKGVkaXRvcik7IC8vIFRoaXMgaXMgdGhlIG9ubHkgd2F5IHRvIHByb3Blcmx5IGFkZCBzdXBwb3J0IGZvciBtb3N0IGNsaWVudHMsXG4gICAgLy8gZXZlbiBpZiBpdCdzIHNlbWFudGljYWxseSBpbmNvcnJlY3QgdG8gaGF2ZSB0byByZXNvcnQgdG8gdXNpbmdcbiAgICAvLyA8Yj4sIDx1PiwgPHM+LCA8aT4gZWxlbWVudHMuXG5cbiAgICBpZiAoZWxlbWVudCAhPT0gbnVsbCkge1xuICAgICAgaWYgKHRoaXMuaGFzRm9ybWF0KCdib2xkJykpIHtcbiAgICAgICAgZWxlbWVudCA9IHdyYXBFbGVtZW50V2l0aChlbGVtZW50LCAnYicpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5oYXNGb3JtYXQoJ2l0YWxpYycpKSB7XG4gICAgICAgIGVsZW1lbnQgPSB3cmFwRWxlbWVudFdpdGgoZWxlbWVudCwgJ2knKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuaGFzRm9ybWF0KCdzdHJpa2V0aHJvdWdoJykpIHtcbiAgICAgICAgZWxlbWVudCA9IHdyYXBFbGVtZW50V2l0aChlbGVtZW50LCAncycpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5oYXNGb3JtYXQoJ3VuZGVybGluZScpKSB7XG4gICAgICAgIGVsZW1lbnQgPSB3cmFwRWxlbWVudFdpdGgoZWxlbWVudCwgJ3UnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgZWxlbWVudFxuICAgIH07XG4gIH1cblxuICBleHBvcnRKU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICBkZXRhaWw6IHRoaXMuZ2V0RGV0YWlsKCksXG4gICAgICBmb3JtYXQ6IHRoaXMuZ2V0Rm9ybWF0KCksXG4gICAgICBtb2RlOiB0aGlzLmdldE1vZGUoKSxcbiAgICAgIHN0eWxlOiB0aGlzLmdldFN0eWxlKCksXG4gICAgICB0ZXh0OiB0aGlzLmdldFRleHRDb250ZW50KCksXG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICB2ZXJzaW9uOiAxXG4gICAgfTtcbiAgfSAvLyBNdXRhdG9yc1xuXG5cbiAgc2VsZWN0aW9uVHJhbnNmb3JtKHByZXZTZWxlY3Rpb24sIG5leHRTZWxlY3Rpb24pIHtcbiAgICByZXR1cm47XG4gIH0gLy8gVE9ETyAwLjUgVGhpcyBzaG91bGQganVzdCBiZSBhIGBzdHJpbmdgLlxuXG5cbiAgc2V0Rm9ybWF0KGZvcm1hdCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzLmdldFdyaXRhYmxlKCk7XG4gICAgc2VsZi5fX2Zvcm1hdCA9IHR5cGVvZiBmb3JtYXQgPT09ICdzdHJpbmcnID8gVEVYVF9UWVBFX1RPX0ZPUk1BVFtmb3JtYXRdIDogZm9ybWF0O1xuICAgIHJldHVybiBzZWxmO1xuICB9IC8vIFRPRE8gMC41IFRoaXMgc2hvdWxkIGp1c3QgYmUgYSBgc3RyaW5nYC5cblxuXG4gIHNldERldGFpbChkZXRhaWwpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcy5nZXRXcml0YWJsZSgpO1xuICAgIHNlbGYuX19kZXRhaWwgPSB0eXBlb2YgZGV0YWlsID09PSAnc3RyaW5nJyA/IERFVEFJTF9UWVBFX1RPX0RFVEFJTFtkZXRhaWxdIDogZGV0YWlsO1xuICAgIHJldHVybiBzZWxmO1xuICB9XG5cbiAgc2V0U3R5bGUoc3R5bGUpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcy5nZXRXcml0YWJsZSgpO1xuICAgIHNlbGYuX19zdHlsZSA9IHN0eWxlO1xuICAgIHJldHVybiBzZWxmO1xuICB9XG5cbiAgdG9nZ2xlRm9ybWF0KHR5cGUpIHtcbiAgICBjb25zdCBmb3JtYXRGbGFnID0gVEVYVF9UWVBFX1RPX0ZPUk1BVFt0eXBlXTtcbiAgICByZXR1cm4gdGhpcy5zZXRGb3JtYXQodGhpcy5nZXRGb3JtYXQoKSBeIGZvcm1hdEZsYWcpO1xuICB9XG5cbiAgdG9nZ2xlRGlyZWN0aW9ubGVzcygpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcy5nZXRXcml0YWJsZSgpO1xuICAgIHNlbGYuX19kZXRhaWwgXj0gSVNfRElSRUNUSU9OTEVTUztcbiAgICByZXR1cm4gc2VsZjtcbiAgfVxuXG4gIHRvZ2dsZVVubWVyZ2VhYmxlKCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzLmdldFdyaXRhYmxlKCk7XG4gICAgc2VsZi5fX2RldGFpbCBePSBJU19VTk1FUkdFQUJMRTtcbiAgICByZXR1cm4gc2VsZjtcbiAgfVxuXG4gIHNldE1vZGUodHlwZSkge1xuICAgIGNvbnN0IG1vZGUgPSBURVhUX01PREVfVE9fVFlQRVt0eXBlXTtcblxuICAgIGlmICh0aGlzLl9fbW9kZSA9PT0gbW9kZSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0V3JpdGFibGUoKTtcbiAgICBzZWxmLl9fbW9kZSA9IG1vZGU7XG4gICAgcmV0dXJuIHNlbGY7XG4gIH1cblxuICBzZXRUZXh0Q29udGVudCh0ZXh0KSB7XG4gICAgaWYgKHRoaXMuX190ZXh0ID09PSB0ZXh0KSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBjb25zdCBzZWxmID0gdGhpcy5nZXRXcml0YWJsZSgpO1xuICAgIHNlbGYuX190ZXh0ID0gdGV4dDtcbiAgICByZXR1cm4gc2VsZjtcbiAgfVxuXG4gIHNlbGVjdChfYW5jaG9yT2Zmc2V0LCBfZm9jdXNPZmZzZXQpIHtcbiAgICBlcnJvck9uUmVhZE9ubHkoKTtcbiAgICBsZXQgYW5jaG9yT2Zmc2V0ID0gX2FuY2hvck9mZnNldDtcbiAgICBsZXQgZm9jdXNPZmZzZXQgPSBfZm9jdXNPZmZzZXQ7XG4gICAgY29uc3Qgc2VsZWN0aW9uID0gJGdldFNlbGVjdGlvbigpO1xuICAgIGNvbnN0IHRleHQgPSB0aGlzLmdldFRleHRDb250ZW50KCk7XG4gICAgY29uc3Qga2V5ID0gdGhpcy5fX2tleTtcblxuICAgIGlmICh0eXBlb2YgdGV4dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnN0IGxhc3RPZmZzZXQgPSB0ZXh0Lmxlbmd0aDtcblxuICAgICAgaWYgKGFuY2hvck9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGFuY2hvck9mZnNldCA9IGxhc3RPZmZzZXQ7XG4gICAgICB9XG5cbiAgICAgIGlmIChmb2N1c09mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGZvY3VzT2Zmc2V0ID0gbGFzdE9mZnNldDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYW5jaG9yT2Zmc2V0ID0gMDtcbiAgICAgIGZvY3VzT2Zmc2V0ID0gMDtcbiAgICB9XG5cbiAgICBpZiAoISRpc1JhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikpIHtcbiAgICAgIHJldHVybiBpbnRlcm5hbE1ha2VSYW5nZVNlbGVjdGlvbihrZXksIGFuY2hvck9mZnNldCwga2V5LCBmb2N1c09mZnNldCwgJ3RleHQnLCAndGV4dCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjb21wb3NpdGlvbktleSA9ICRnZXRDb21wb3NpdGlvbktleSgpO1xuXG4gICAgICBpZiAoY29tcG9zaXRpb25LZXkgPT09IHNlbGVjdGlvbi5hbmNob3Iua2V5IHx8IGNvbXBvc2l0aW9uS2V5ID09PSBzZWxlY3Rpb24uZm9jdXMua2V5KSB7XG4gICAgICAgICRzZXRDb21wb3NpdGlvbktleShrZXkpO1xuICAgICAgfVxuXG4gICAgICBzZWxlY3Rpb24uc2V0VGV4dE5vZGVSYW5nZSh0aGlzLCBhbmNob3JPZmZzZXQsIHRoaXMsIGZvY3VzT2Zmc2V0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZWN0aW9uO1xuICB9XG5cbiAgc3BsaWNlVGV4dChvZmZzZXQsIGRlbENvdW50LCBuZXdUZXh0LCBtb3ZlU2VsZWN0aW9uKSB7XG4gICAgY29uc3Qgd3JpdGFibGVTZWxmID0gdGhpcy5nZXRXcml0YWJsZSgpO1xuICAgIGNvbnN0IHRleHQgPSB3cml0YWJsZVNlbGYuX190ZXh0O1xuICAgIGNvbnN0IGhhbmRsZWRUZXh0TGVuZ3RoID0gbmV3VGV4dC5sZW5ndGg7XG4gICAgbGV0IGluZGV4ID0gb2Zmc2V0O1xuXG4gICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgaW5kZXggPSBoYW5kbGVkVGV4dExlbmd0aCArIGluZGV4O1xuXG4gICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgIGluZGV4ID0gMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBzZWxlY3Rpb24gPSAkZ2V0U2VsZWN0aW9uKCk7XG5cbiAgICBpZiAobW92ZVNlbGVjdGlvbiAmJiAkaXNSYW5nZVNlbGVjdGlvbihzZWxlY3Rpb24pKSB7XG4gICAgICBjb25zdCBuZXdPZmZzZXQgPSBvZmZzZXQgKyBoYW5kbGVkVGV4dExlbmd0aDtcbiAgICAgIHNlbGVjdGlvbi5zZXRUZXh0Tm9kZVJhbmdlKHdyaXRhYmxlU2VsZiwgbmV3T2Zmc2V0LCB3cml0YWJsZVNlbGYsIG5ld09mZnNldCk7XG4gICAgfVxuXG4gICAgY29uc3QgdXBkYXRlZFRleHQgPSB0ZXh0LnNsaWNlKDAsIGluZGV4KSArIG5ld1RleHQgKyB0ZXh0LnNsaWNlKGluZGV4ICsgZGVsQ291bnQpO1xuICAgIHdyaXRhYmxlU2VsZi5fX3RleHQgPSB1cGRhdGVkVGV4dDtcbiAgICByZXR1cm4gd3JpdGFibGVTZWxmO1xuICB9XG5cbiAgY2FuSW5zZXJ0VGV4dEJlZm9yZSgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGNhbkluc2VydFRleHRBZnRlcigpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGNhbkNvbnRhaW5UYWJzKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHNwbGl0VGV4dCguLi5zcGxpdE9mZnNldHMpIHtcbiAgICBlcnJvck9uUmVhZE9ubHkoKTtcbiAgICBjb25zdCBzZWxmID0gdGhpcy5nZXRMYXRlc3QoKTtcbiAgICBjb25zdCB0ZXh0Q29udGVudCA9IHNlbGYuZ2V0VGV4dENvbnRlbnQoKTtcbiAgICBjb25zdCBrZXkgPSBzZWxmLl9fa2V5O1xuICAgIGNvbnN0IGNvbXBvc2l0aW9uS2V5ID0gJGdldENvbXBvc2l0aW9uS2V5KCk7XG4gICAgY29uc3Qgb2Zmc2V0c1NldCA9IG5ldyBTZXQoc3BsaXRPZmZzZXRzKTtcbiAgICBjb25zdCBwYXJ0cyA9IFtdO1xuICAgIGNvbnN0IHRleHRMZW5ndGggPSB0ZXh0Q29udGVudC5sZW5ndGg7XG4gICAgbGV0IHN0cmluZyA9ICcnO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZXh0TGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChzdHJpbmcgIT09ICcnICYmIG9mZnNldHNTZXQuaGFzKGkpKSB7XG4gICAgICAgIHBhcnRzLnB1c2goc3RyaW5nKTtcbiAgICAgICAgc3RyaW5nID0gJyc7XG4gICAgICB9XG5cbiAgICAgIHN0cmluZyArPSB0ZXh0Q29udGVudFtpXTtcbiAgICB9XG5cbiAgICBpZiAoc3RyaW5nICE9PSAnJykge1xuICAgICAgcGFydHMucHVzaChzdHJpbmcpO1xuICAgIH1cblxuICAgIGNvbnN0IHBhcnRzTGVuZ3RoID0gcGFydHMubGVuZ3RoO1xuXG4gICAgaWYgKHBhcnRzTGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfSBlbHNlIGlmIChwYXJ0c1swXSA9PT0gdGV4dENvbnRlbnQpIHtcbiAgICAgIHJldHVybiBbc2VsZl07XG4gICAgfVxuXG4gICAgY29uc3QgZmlyc3RQYXJ0ID0gcGFydHNbMF07XG4gICAgY29uc3QgcGFyZW50ID0gc2VsZi5nZXRQYXJlbnRPclRocm93KCk7XG4gICAgbGV0IHdyaXRhYmxlTm9kZTtcbiAgICBjb25zdCBmb3JtYXQgPSBzZWxmLmdldEZvcm1hdCgpO1xuICAgIGNvbnN0IHN0eWxlID0gc2VsZi5nZXRTdHlsZSgpO1xuICAgIGNvbnN0IGRldGFpbCA9IHNlbGYuX19kZXRhaWw7XG4gICAgbGV0IGhhc1JlcGxhY2VkU2VsZiA9IGZhbHNlO1xuXG4gICAgaWYgKHNlbGYuaXNTZWdtZW50ZWQoKSkge1xuICAgICAgLy8gQ3JlYXRlIGEgbmV3IFRleHROb2RlXG4gICAgICB3cml0YWJsZU5vZGUgPSAkY3JlYXRlVGV4dE5vZGUoZmlyc3RQYXJ0KTtcbiAgICAgIHdyaXRhYmxlTm9kZS5fX2Zvcm1hdCA9IGZvcm1hdDtcbiAgICAgIHdyaXRhYmxlTm9kZS5fX3N0eWxlID0gc3R5bGU7XG4gICAgICB3cml0YWJsZU5vZGUuX19kZXRhaWwgPSBkZXRhaWw7XG4gICAgICBoYXNSZXBsYWNlZFNlbGYgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGb3IgdGhlIGZpcnN0IHBhcnQsIHVwZGF0ZSB0aGUgZXhpc3Rpbmcgbm9kZVxuICAgICAgd3JpdGFibGVOb2RlID0gc2VsZi5nZXRXcml0YWJsZSgpO1xuICAgICAgd3JpdGFibGVOb2RlLl9fdGV4dCA9IGZpcnN0UGFydDtcbiAgICB9IC8vIEhhbmRsZSBzZWxlY3Rpb25cblxuXG4gICAgY29uc3Qgc2VsZWN0aW9uID0gJGdldFNlbGVjdGlvbigpOyAvLyBUaGVuIGhhbmRsZSBhbGwgb3RoZXIgcGFydHNcblxuICAgIGNvbnN0IHNwbGl0Tm9kZXMgPSBbd3JpdGFibGVOb2RlXTtcbiAgICBsZXQgdGV4dFNpemUgPSBmaXJzdFBhcnQubGVuZ3RoO1xuXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwYXJ0c0xlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBwYXJ0ID0gcGFydHNbaV07XG4gICAgICBjb25zdCBwYXJ0U2l6ZSA9IHBhcnQubGVuZ3RoO1xuICAgICAgY29uc3Qgc2libGluZyA9ICRjcmVhdGVUZXh0Tm9kZShwYXJ0KS5nZXRXcml0YWJsZSgpO1xuICAgICAgc2libGluZy5fX2Zvcm1hdCA9IGZvcm1hdDtcbiAgICAgIHNpYmxpbmcuX19zdHlsZSA9IHN0eWxlO1xuICAgICAgc2libGluZy5fX2RldGFpbCA9IGRldGFpbDtcbiAgICAgIGNvbnN0IHNpYmxpbmdLZXkgPSBzaWJsaW5nLl9fa2V5O1xuICAgICAgY29uc3QgbmV4dFRleHRTaXplID0gdGV4dFNpemUgKyBwYXJ0U2l6ZTtcblxuICAgICAgaWYgKCRpc1JhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikpIHtcbiAgICAgICAgY29uc3QgYW5jaG9yID0gc2VsZWN0aW9uLmFuY2hvcjtcbiAgICAgICAgY29uc3QgZm9jdXMgPSBzZWxlY3Rpb24uZm9jdXM7XG5cbiAgICAgICAgaWYgKGFuY2hvci5rZXkgPT09IGtleSAmJiBhbmNob3IudHlwZSA9PT0gJ3RleHQnICYmIGFuY2hvci5vZmZzZXQgPiB0ZXh0U2l6ZSAmJiBhbmNob3Iub2Zmc2V0IDw9IG5leHRUZXh0U2l6ZSkge1xuICAgICAgICAgIGFuY2hvci5rZXkgPSBzaWJsaW5nS2V5O1xuICAgICAgICAgIGFuY2hvci5vZmZzZXQgLT0gdGV4dFNpemU7XG4gICAgICAgICAgc2VsZWN0aW9uLmRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmb2N1cy5rZXkgPT09IGtleSAmJiBmb2N1cy50eXBlID09PSAndGV4dCcgJiYgZm9jdXMub2Zmc2V0ID4gdGV4dFNpemUgJiYgZm9jdXMub2Zmc2V0IDw9IG5leHRUZXh0U2l6ZSkge1xuICAgICAgICAgIGZvY3VzLmtleSA9IHNpYmxpbmdLZXk7XG4gICAgICAgICAgZm9jdXMub2Zmc2V0IC09IHRleHRTaXplO1xuICAgICAgICAgIHNlbGVjdGlvbi5kaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGNvbXBvc2l0aW9uS2V5ID09PSBrZXkpIHtcbiAgICAgICAgJHNldENvbXBvc2l0aW9uS2V5KHNpYmxpbmdLZXkpO1xuICAgICAgfVxuXG4gICAgICB0ZXh0U2l6ZSA9IG5leHRUZXh0U2l6ZTtcbiAgICAgIHNwbGl0Tm9kZXMucHVzaChzaWJsaW5nKTtcbiAgICB9IC8vIEluc2VydCB0aGUgbm9kZXMgaW50byB0aGUgcGFyZW50J3MgY2hpbGRyZW5cblxuXG4gICAgaW50ZXJuYWxNYXJrU2libGluZ3NBc0RpcnR5KHRoaXMpO1xuICAgIGNvbnN0IHdyaXRhYmxlUGFyZW50ID0gcGFyZW50LmdldFdyaXRhYmxlKCk7XG4gICAgY29uc3QgaW5zZXJ0aW9uSW5kZXggPSB0aGlzLmdldEluZGV4V2l0aGluUGFyZW50KCk7XG5cbiAgICBpZiAoaGFzUmVwbGFjZWRTZWxmKSB7XG4gICAgICB3cml0YWJsZVBhcmVudC5zcGxpY2UoaW5zZXJ0aW9uSW5kZXgsIDAsIHNwbGl0Tm9kZXMpO1xuICAgICAgdGhpcy5yZW1vdmUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgd3JpdGFibGVQYXJlbnQuc3BsaWNlKGluc2VydGlvbkluZGV4LCAxLCBzcGxpdE5vZGVzKTtcbiAgICB9XG5cbiAgICBpZiAoJGlzUmFuZ2VTZWxlY3Rpb24oc2VsZWN0aW9uKSkge1xuICAgICAgJHVwZGF0ZUVsZW1lbnRTZWxlY3Rpb25PbkNyZWF0ZURlbGV0ZU5vZGUoc2VsZWN0aW9uLCBwYXJlbnQsIGluc2VydGlvbkluZGV4LCBwYXJ0c0xlbmd0aCAtIDEpO1xuICAgIH1cblxuICAgIHJldHVybiBzcGxpdE5vZGVzO1xuICB9XG5cbiAgbWVyZ2VXaXRoU2libGluZyh0YXJnZXQpIHtcbiAgICBjb25zdCBpc0JlZm9yZSA9IHRhcmdldCA9PT0gdGhpcy5nZXRQcmV2aW91c1NpYmxpbmcoKTtcblxuICAgIGlmICghaXNCZWZvcmUgJiYgdGFyZ2V0ICE9PSB0aGlzLmdldE5leHRTaWJsaW5nKCkpIHtcbiAgICAgIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoYG1lcmdlV2l0aFNpYmxpbmc6IHNpYmxpbmcgbXVzdCBiZSBhIHByZXZpb3VzIG9yIG5leHQgc2libGluZ2ApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGtleSA9IHRoaXMuX19rZXk7XG4gICAgY29uc3QgdGFyZ2V0S2V5ID0gdGFyZ2V0Ll9fa2V5O1xuICAgIGNvbnN0IHRleHQgPSB0aGlzLl9fdGV4dDtcbiAgICBjb25zdCB0ZXh0TGVuZ3RoID0gdGV4dC5sZW5ndGg7XG4gICAgY29uc3QgY29tcG9zaXRpb25LZXkgPSAkZ2V0Q29tcG9zaXRpb25LZXkoKTtcblxuICAgIGlmIChjb21wb3NpdGlvbktleSA9PT0gdGFyZ2V0S2V5KSB7XG4gICAgICAkc2V0Q29tcG9zaXRpb25LZXkoa2V5KTtcbiAgICB9XG5cbiAgICBjb25zdCBzZWxlY3Rpb24gPSAkZ2V0U2VsZWN0aW9uKCk7XG5cbiAgICBpZiAoJGlzUmFuZ2VTZWxlY3Rpb24oc2VsZWN0aW9uKSkge1xuICAgICAgY29uc3QgYW5jaG9yID0gc2VsZWN0aW9uLmFuY2hvcjtcbiAgICAgIGNvbnN0IGZvY3VzID0gc2VsZWN0aW9uLmZvY3VzO1xuXG4gICAgICBpZiAoYW5jaG9yICE9PSBudWxsICYmIGFuY2hvci5rZXkgPT09IHRhcmdldEtleSkge1xuICAgICAgICBhZGp1c3RQb2ludE9mZnNldEZvck1lcmdlZFNpYmxpbmcoYW5jaG9yLCBpc0JlZm9yZSwga2V5LCB0YXJnZXQsIHRleHRMZW5ndGgpO1xuICAgICAgICBzZWxlY3Rpb24uZGlydHkgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZm9jdXMgIT09IG51bGwgJiYgZm9jdXMua2V5ID09PSB0YXJnZXRLZXkpIHtcbiAgICAgICAgYWRqdXN0UG9pbnRPZmZzZXRGb3JNZXJnZWRTaWJsaW5nKGZvY3VzLCBpc0JlZm9yZSwga2V5LCB0YXJnZXQsIHRleHRMZW5ndGgpO1xuICAgICAgICBzZWxlY3Rpb24uZGlydHkgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHRhcmdldFRleHQgPSB0YXJnZXQuX190ZXh0O1xuICAgIGNvbnN0IG5ld1RleHQgPSBpc0JlZm9yZSA/IHRhcmdldFRleHQgKyB0ZXh0IDogdGV4dCArIHRhcmdldFRleHQ7XG4gICAgdGhpcy5zZXRUZXh0Q29udGVudChuZXdUZXh0KTtcbiAgICBjb25zdCB3cml0YWJsZVNlbGYgPSB0aGlzLmdldFdyaXRhYmxlKCk7XG4gICAgdGFyZ2V0LnJlbW92ZSgpO1xuICAgIHJldHVybiB3cml0YWJsZVNlbGY7XG4gIH1cblxuICBpc1RleHRFbnRpdHkoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbn1cblxuZnVuY3Rpb24gY29udmVydFNwYW5FbGVtZW50KGRvbU5vZGUpIHtcbiAgLy8gZG9tTm9kZSBpcyBhIDxzcGFuPiBzaW5jZSB3ZSBtYXRjaGVkIGl0IGJ5IG5vZGVOYW1lXG4gIGNvbnN0IHNwYW4gPSBkb21Ob2RlOyAvLyBHb29nbGUgRG9jcyB1c2VzIHNwYW4gdGFncyArIGZvbnQtd2VpZ2h0IGZvciBib2xkIHRleHRcblxuICBjb25zdCBoYXNCb2xkRm9udFdlaWdodCA9IHNwYW4uc3R5bGUuZm9udFdlaWdodCA9PT0gJzcwMCc7IC8vIEdvb2dsZSBEb2NzIHVzZXMgc3BhbiB0YWdzICsgdGV4dC1kZWNvcmF0aW9uOiBsaW5lLXRocm91Z2ggZm9yIHN0cmlrZXRocm91Z2ggdGV4dFxuXG4gIGNvbnN0IGhhc0xpbmV0aHJvdWdoVGV4dERlY29yYXRpb24gPSBzcGFuLnN0eWxlLnRleHREZWNvcmF0aW9uID09PSAnbGluZS10aHJvdWdoJzsgLy8gR29vZ2xlIERvY3MgdXNlcyBzcGFuIHRhZ3MgKyBmb250LXN0eWxlIGZvciBpdGFsaWMgdGV4dFxuXG4gIGNvbnN0IGhhc0l0YWxpY0ZvbnRTdHlsZSA9IHNwYW4uc3R5bGUuZm9udFN0eWxlID09PSAnaXRhbGljJzsgLy8gR29vZ2xlIERvY3MgdXNlcyBzcGFuIHRhZ3MgKyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZSBmb3IgdW5kZXJsaW5lIHRleHRcblxuICBjb25zdCBoYXNVbmRlcmxpbmVUZXh0RGVjb3JhdGlvbiA9IHNwYW4uc3R5bGUudGV4dERlY29yYXRpb24gPT09ICd1bmRlcmxpbmUnOyAvLyBHb29nbGUgRG9jcyB1c2VzIHNwYW4gdGFncyArIHZlcnRpY2FsLWFsaWduIHRvIHNwZWNpZnkgc3Vic2NyaXB0IGFuZCBzdXBlcnNjcmlwdFxuXG4gIGNvbnN0IHZlcnRpY2FsQWxpZ24gPSBzcGFuLnN0eWxlLnZlcnRpY2FsQWxpZ247XG4gIHJldHVybiB7XG4gICAgZm9yQ2hpbGQ6IGxleGljYWxOb2RlID0+IHtcbiAgICAgIGlmICghJGlzVGV4dE5vZGUobGV4aWNhbE5vZGUpKSB7XG4gICAgICAgIHJldHVybiBsZXhpY2FsTm9kZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGhhc0JvbGRGb250V2VpZ2h0KSB7XG4gICAgICAgIGxleGljYWxOb2RlLnRvZ2dsZUZvcm1hdCgnYm9sZCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoaGFzTGluZXRocm91Z2hUZXh0RGVjb3JhdGlvbikge1xuICAgICAgICBsZXhpY2FsTm9kZS50b2dnbGVGb3JtYXQoJ3N0cmlrZXRocm91Z2gnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGhhc0l0YWxpY0ZvbnRTdHlsZSkge1xuICAgICAgICBsZXhpY2FsTm9kZS50b2dnbGVGb3JtYXQoJ2l0YWxpYycpO1xuICAgICAgfVxuXG4gICAgICBpZiAoaGFzVW5kZXJsaW5lVGV4dERlY29yYXRpb24pIHtcbiAgICAgICAgbGV4aWNhbE5vZGUudG9nZ2xlRm9ybWF0KCd1bmRlcmxpbmUnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHZlcnRpY2FsQWxpZ24gPT09ICdzdWInKSB7XG4gICAgICAgIGxleGljYWxOb2RlLnRvZ2dsZUZvcm1hdCgnc3Vic2NyaXB0Jyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh2ZXJ0aWNhbEFsaWduID09PSAnc3VwZXInKSB7XG4gICAgICAgIGxleGljYWxOb2RlLnRvZ2dsZUZvcm1hdCgnc3VwZXJzY3JpcHQnKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGxleGljYWxOb2RlO1xuICAgIH0sXG4gICAgbm9kZTogbnVsbFxuICB9O1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0TGluZUJyZWFrVG9FbGVtZW50KCkge1xuICByZXR1cm4ge1xuICAgIG5vZGU6ICRjcmVhdGVMaW5lQnJlYWtOb2RlKClcbiAgfTtcbn1cblxuZnVuY3Rpb24gY29udmVydEJyaW5nQXR0ZW50aW9uVG9FbGVtZW50KGRvbU5vZGUpIHtcbiAgLy8gZG9tTm9kZSBpcyBhIDxiPiBzaW5jZSB3ZSBtYXRjaGVkIGl0IGJ5IG5vZGVOYW1lXG4gIGNvbnN0IGIgPSBkb21Ob2RlOyAvLyBHb29nbGUgRG9jcyB3cmFwcyBhbGwgY29waWVkIEhUTUwgaW4gYSA8Yj4gd2l0aCBmb250LXdlaWdodCBub3JtYWxcblxuICBjb25zdCBoYXNOb3JtYWxGb250V2VpZ2h0ID0gYi5zdHlsZS5mb250V2VpZ2h0ID09PSAnbm9ybWFsJztcbiAgcmV0dXJuIHtcbiAgICBmb3JDaGlsZDogbGV4aWNhbE5vZGUgPT4ge1xuICAgICAgaWYgKCRpc1RleHROb2RlKGxleGljYWxOb2RlKSAmJiAhaGFzTm9ybWFsRm9udFdlaWdodCkge1xuICAgICAgICBsZXhpY2FsTm9kZS50b2dnbGVGb3JtYXQoJ2JvbGQnKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGxleGljYWxOb2RlO1xuICAgIH0sXG4gICAgbm9kZTogbnVsbFxuICB9O1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0VGV4dERPTU5vZGUoZG9tTm9kZSwgX3BhcmVudCwgcHJlZm9ybWF0dGVkKSB7XG4gIGxldCB0ZXh0Q29udGVudCA9IGRvbU5vZGUudGV4dENvbnRlbnQgfHwgJyc7XG5cbiAgaWYgKCFwcmVmb3JtYXR0ZWQgJiYgL1xcbi8udGVzdCh0ZXh0Q29udGVudCkpIHtcbiAgICB0ZXh0Q29udGVudCA9IHRleHRDb250ZW50LnJlcGxhY2UoL1xccj9cXG4vZ20sICcgJyk7XG5cbiAgICBpZiAodGV4dENvbnRlbnQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbm9kZTogbnVsbFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG5vZGU6ICRjcmVhdGVUZXh0Tm9kZSh0ZXh0Q29udGVudClcbiAgfTtcbn1cblxuY29uc3Qgbm9kZU5hbWVUb1RleHRGb3JtYXQgPSB7XG4gIGNvZGU6ICdjb2RlJyxcbiAgZW06ICdpdGFsaWMnLFxuICBpOiAnaXRhbGljJyxcbiAgczogJ3N0cmlrZXRocm91Z2gnLFxuICBzdHJvbmc6ICdib2xkJyxcbiAgc3ViOiAnc3Vic2NyaXB0JyxcbiAgc3VwOiAnc3VwZXJzY3JpcHQnLFxuICB1OiAndW5kZXJsaW5lJ1xufTtcblxuZnVuY3Rpb24gY29udmVydFRleHRGb3JtYXRFbGVtZW50KGRvbU5vZGUpIHtcbiAgY29uc3QgZm9ybWF0ID0gbm9kZU5hbWVUb1RleHRGb3JtYXRbZG9tTm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXTtcblxuICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbm9kZTogbnVsbFxuICAgIH07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGZvckNoaWxkOiBsZXhpY2FsTm9kZSA9PiB7XG4gICAgICBpZiAoJGlzVGV4dE5vZGUobGV4aWNhbE5vZGUpICYmICFsZXhpY2FsTm9kZS5oYXNGb3JtYXQoZm9ybWF0KSkge1xuICAgICAgICBsZXhpY2FsTm9kZS50b2dnbGVGb3JtYXQoZm9ybWF0KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGxleGljYWxOb2RlO1xuICAgIH0sXG4gICAgbm9kZTogbnVsbFxuICB9O1xufVxuXG5mdW5jdGlvbiAkY3JlYXRlVGV4dE5vZGUodGV4dCA9ICcnKSB7XG4gIHJldHVybiAkYXBwbHlOb2RlUmVwbGFjZW1lbnQobmV3IFRleHROb2RlKHRleHQpKTtcbn1cbmZ1bmN0aW9uICRpc1RleHROb2RlKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBUZXh0Tm9kZTtcbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xuXG4vKiogQG5vSW5oZXJpdERvYyAqL1xuY2xhc3MgUGFyYWdyYXBoTm9kZSBleHRlbmRzIEVsZW1lbnROb2RlIHtcbiAgc3RhdGljIGdldFR5cGUoKSB7XG4gICAgcmV0dXJuICdwYXJhZ3JhcGgnO1xuICB9XG5cbiAgc3RhdGljIGNsb25lKG5vZGUpIHtcbiAgICByZXR1cm4gbmV3IFBhcmFncmFwaE5vZGUobm9kZS5fX2tleSk7XG4gIH0gLy8gVmlld1xuXG5cbiAgY3JlYXRlRE9NKGNvbmZpZykge1xuICAgIGNvbnN0IGRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBjb25zdCBjbGFzc05hbWVzID0gZ2V0Q2FjaGVkQ2xhc3NOYW1lQXJyYXkoY29uZmlnLnRoZW1lLCAncGFyYWdyYXBoJyk7XG5cbiAgICBpZiAoY2xhc3NOYW1lcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBkb21DbGFzc0xpc3QgPSBkb20uY2xhc3NMaXN0O1xuICAgICAgZG9tQ2xhc3NMaXN0LmFkZCguLi5jbGFzc05hbWVzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZG9tO1xuICB9XG5cbiAgdXBkYXRlRE9NKHByZXZOb2RlLCBkb20sIGNvbmZpZykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0YXRpYyBpbXBvcnRET00oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHA6IG5vZGUgPT4gKHtcbiAgICAgICAgY29udmVyc2lvbjogY29udmVydFBhcmFncmFwaEVsZW1lbnQsXG4gICAgICAgIHByaW9yaXR5OiAwXG4gICAgICB9KVxuICAgIH07XG4gIH1cblxuICBleHBvcnRET00oZWRpdG9yKSB7XG4gICAgY29uc3Qge1xuICAgICAgZWxlbWVudFxuICAgIH0gPSBzdXBlci5leHBvcnRET00oZWRpdG9yKTtcblxuICAgIGlmIChlbGVtZW50ICYmIHRoaXMuaXNFbXB0eSgpKSB7XG4gICAgICBlbGVtZW50LmFwcGVuZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdicicpKTtcbiAgICB9XG5cbiAgICBpZiAoZWxlbWVudCkge1xuICAgICAgY29uc3QgZm9ybWF0VHlwZSA9IHRoaXMuZ2V0Rm9ybWF0VHlwZSgpO1xuICAgICAgZWxlbWVudC5zdHlsZS50ZXh0QWxpZ24gPSBmb3JtYXRUeXBlO1xuICAgICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5nZXREaXJlY3Rpb24oKTtcblxuICAgICAgaWYgKGRpcmVjdGlvbikge1xuICAgICAgICBlbGVtZW50LmRpciA9IGRpcmVjdGlvbjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgaW5kZW50ID0gdGhpcy5nZXRJbmRlbnQoKTtcblxuICAgICAgaWYgKGluZGVudCA+IDApIHtcbiAgICAgICAgLy8gcGFkZGluZy1pbmxpbmUtc3RhcnQgaXMgbm90IHdpZGVseSBzdXBwb3J0ZWQgaW4gZW1haWwgSFRNTCwgYnV0XG4gICAgICAgIC8vIExleGljYWwgUmVjb25jaWxlciB1c2VzIHBhZGRpbmctaW5saW5lLXN0YXJ0LiBVc2luZyB0ZXh0LWluZGVudCBpbnN0ZWFkLlxuICAgICAgICBlbGVtZW50LnN0eWxlLnRleHRJbmRlbnQgPSBgJHtpbmRlbnQgKiAyMH1weGA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGVsZW1lbnRcbiAgICB9O1xuICB9XG5cbiAgc3RhdGljIGltcG9ydEpTT04oc2VyaWFsaXplZE5vZGUpIHtcbiAgICBjb25zdCBub2RlID0gJGNyZWF0ZVBhcmFncmFwaE5vZGUoKTtcbiAgICBub2RlLnNldEZvcm1hdChzZXJpYWxpemVkTm9kZS5mb3JtYXQpO1xuICAgIG5vZGUuc2V0SW5kZW50KHNlcmlhbGl6ZWROb2RlLmluZGVudCk7XG4gICAgbm9kZS5zZXREaXJlY3Rpb24oc2VyaWFsaXplZE5vZGUuZGlyZWN0aW9uKTtcbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuXG4gIGV4cG9ydEpTT04oKSB7XG4gICAgcmV0dXJuIHsgLi4uc3VwZXIuZXhwb3J0SlNPTigpLFxuICAgICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICB2ZXJzaW9uOiAxXG4gICAgfTtcbiAgfSAvLyBNdXRhdGlvblxuXG5cbiAgaW5zZXJ0TmV3QWZ0ZXIoXywgcmVzdG9yZVNlbGVjdGlvbikge1xuICAgIGNvbnN0IG5ld0VsZW1lbnQgPSAkY3JlYXRlUGFyYWdyYXBoTm9kZSgpO1xuICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZ2V0RGlyZWN0aW9uKCk7XG4gICAgbmV3RWxlbWVudC5zZXREaXJlY3Rpb24oZGlyZWN0aW9uKTtcbiAgICB0aGlzLmluc2VydEFmdGVyKG5ld0VsZW1lbnQsIHJlc3RvcmVTZWxlY3Rpb24pO1xuICAgIHJldHVybiBuZXdFbGVtZW50O1xuICB9XG5cbiAgY29sbGFwc2VBdFN0YXJ0KCkge1xuICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5nZXRDaGlsZHJlbigpOyAvLyBJZiB3ZSBoYXZlIGFuIGVtcHR5ICh0cmltbWVkKSBmaXJzdCBwYXJhZ3JhcGggYW5kIHRyeSBhbmQgcmVtb3ZlIGl0LFxuICAgIC8vIGRlbGV0ZSB0aGUgcGFyYWdyYXBoIGFzIGxvbmcgYXMgd2UgaGF2ZSBhbm90aGVyIHNpYmxpbmcgdG8gZ28gdG9cblxuICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPT09IDAgfHwgJGlzVGV4dE5vZGUoY2hpbGRyZW5bMF0pICYmIGNoaWxkcmVuWzBdLmdldFRleHRDb250ZW50KCkudHJpbSgpID09PSAnJykge1xuICAgICAgY29uc3QgbmV4dFNpYmxpbmcgPSB0aGlzLmdldE5leHRTaWJsaW5nKCk7XG5cbiAgICAgIGlmIChuZXh0U2libGluZyAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLnNlbGVjdE5leHQoKTtcbiAgICAgICAgdGhpcy5yZW1vdmUoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHByZXZTaWJsaW5nID0gdGhpcy5nZXRQcmV2aW91c1NpYmxpbmcoKTtcblxuICAgICAgaWYgKHByZXZTaWJsaW5nICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0UHJldmlvdXMoKTtcbiAgICAgICAgdGhpcy5yZW1vdmUoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbn1cblxuZnVuY3Rpb24gY29udmVydFBhcmFncmFwaEVsZW1lbnQoZWxlbWVudCkge1xuICBjb25zdCBub2RlID0gJGNyZWF0ZVBhcmFncmFwaE5vZGUoKTtcblxuICBpZiAoZWxlbWVudC5zdHlsZSkge1xuICAgIG5vZGUuc2V0Rm9ybWF0KGVsZW1lbnQuc3R5bGUudGV4dEFsaWduKTtcbiAgICBjb25zdCBpbmRlbnQgPSBwYXJzZUludChlbGVtZW50LnN0eWxlLnRleHRJbmRlbnQsIDEwKSAvIDIwO1xuXG4gICAgaWYgKGluZGVudCA+IDApIHtcbiAgICAgIG5vZGUuc2V0SW5kZW50KGluZGVudCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBub2RlXG4gIH07XG59XG5cbmZ1bmN0aW9uICRjcmVhdGVQYXJhZ3JhcGhOb2RlKCkge1xuICByZXR1cm4gJGFwcGx5Tm9kZVJlcGxhY2VtZW50KG5ldyBQYXJhZ3JhcGhOb2RlKCkpO1xufVxuZnVuY3Rpb24gJGlzUGFyYWdyYXBoTm9kZShub2RlKSB7XG4gIHJldHVybiBub2RlIGluc3RhbmNlb2YgUGFyYWdyYXBoTm9kZTtcbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xuY29uc3QgQ09NTUFORF9QUklPUklUWV9FRElUT1IgPSAwO1xuY29uc3QgQ09NTUFORF9QUklPUklUWV9MT1cgPSAxO1xuY29uc3QgQ09NTUFORF9QUklPUklUWV9OT1JNQUwgPSAyO1xuY29uc3QgQ09NTUFORF9QUklPUklUWV9ISUdIID0gMztcbmNvbnN0IENPTU1BTkRfUFJJT1JJVFlfQ1JJVElDQUwgPSA0OyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG5cbmZ1bmN0aW9uIHJlc2V0RWRpdG9yKGVkaXRvciwgcHJldlJvb3RFbGVtZW50LCBuZXh0Um9vdEVsZW1lbnQsIHBlbmRpbmdFZGl0b3JTdGF0ZSkge1xuICBjb25zdCBrZXlOb2RlTWFwID0gZWRpdG9yLl9rZXlUb0RPTU1hcDtcbiAga2V5Tm9kZU1hcC5jbGVhcigpO1xuICBlZGl0b3IuX2VkaXRvclN0YXRlID0gY3JlYXRlRW1wdHlFZGl0b3JTdGF0ZSgpO1xuICBlZGl0b3IuX3BlbmRpbmdFZGl0b3JTdGF0ZSA9IHBlbmRpbmdFZGl0b3JTdGF0ZTtcbiAgZWRpdG9yLl9jb21wb3NpdGlvbktleSA9IG51bGw7XG4gIGVkaXRvci5fZGlydHlUeXBlID0gTk9fRElSVFlfTk9ERVM7XG5cbiAgZWRpdG9yLl9jbG9uZU5vdE5lZWRlZC5jbGVhcigpO1xuXG4gIGVkaXRvci5fZGlydHlMZWF2ZXMgPSBuZXcgU2V0KCk7XG5cbiAgZWRpdG9yLl9kaXJ0eUVsZW1lbnRzLmNsZWFyKCk7XG5cbiAgZWRpdG9yLl9ub3JtYWxpemVkTm9kZXMgPSBuZXcgU2V0KCk7XG4gIGVkaXRvci5fdXBkYXRlVGFncyA9IG5ldyBTZXQoKTtcbiAgZWRpdG9yLl91cGRhdGVzID0gW107XG4gIGVkaXRvci5fYmxvY2tDdXJzb3JFbGVtZW50ID0gbnVsbDtcbiAgY29uc3Qgb2JzZXJ2ZXIgPSBlZGl0b3IuX29ic2VydmVyO1xuXG4gIGlmIChvYnNlcnZlciAhPT0gbnVsbCkge1xuICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICBlZGl0b3IuX29ic2VydmVyID0gbnVsbDtcbiAgfSAvLyBSZW1vdmUgYWxsIHRoZSBET00gbm9kZXMgZnJvbSB0aGUgcm9vdCBlbGVtZW50XG5cblxuICBpZiAocHJldlJvb3RFbGVtZW50ICE9PSBudWxsKSB7XG4gICAgcHJldlJvb3RFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gIH1cblxuICBpZiAobmV4dFJvb3RFbGVtZW50ICE9PSBudWxsKSB7XG4gICAgbmV4dFJvb3RFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gICAga2V5Tm9kZU1hcC5zZXQoJ3Jvb3QnLCBuZXh0Um9vdEVsZW1lbnQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVDb252ZXJzaW9uQ2FjaGUobm9kZXMpIHtcbiAgY29uc3QgY29udmVyc2lvbkNhY2hlID0gbmV3IE1hcCgpO1xuICBjb25zdCBoYW5kbGVkQ29udmVyc2lvbnMgPSBuZXcgU2V0KCk7XG4gIG5vZGVzLmZvckVhY2gobm9kZSA9PiB7XG4gICAgY29uc3QgaW1wb3J0RE9NID0gbm9kZS5rbGFzcy5pbXBvcnRET00gIT0gbnVsbCA/IG5vZGUua2xhc3MuaW1wb3J0RE9NLmJpbmQobm9kZS5rbGFzcykgOiBudWxsO1xuXG4gICAgaWYgKGltcG9ydERPTSA9PSBudWxsIHx8IGhhbmRsZWRDb252ZXJzaW9ucy5oYXMoaW1wb3J0RE9NKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGhhbmRsZWRDb252ZXJzaW9ucy5hZGQoaW1wb3J0RE9NKTtcbiAgICBjb25zdCBtYXAgPSBpbXBvcnRET00oKTtcblxuICAgIGlmIChtYXAgIT09IG51bGwpIHtcbiAgICAgIE9iamVjdC5rZXlzKG1hcCkuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBsZXQgY3VycmVudENhY2hlID0gY29udmVyc2lvbkNhY2hlLmdldChrZXkpO1xuXG4gICAgICAgIGlmIChjdXJyZW50Q2FjaGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGN1cnJlbnRDYWNoZSA9IFtdO1xuICAgICAgICAgIGNvbnZlcnNpb25DYWNoZS5zZXQoa2V5LCBjdXJyZW50Q2FjaGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgY3VycmVudENhY2hlLnB1c2gobWFwW2tleV0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGNvbnZlcnNpb25DYWNoZTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBMZXhpY2FsRWRpdG9yIGF0dGFjaGVkIHRvIGEgc2luZ2xlIGNvbnRlbnRFZGl0YWJsZSAocHJvdmlkZWQgaW4gdGhlIGNvbmZpZykuIFRoaXMgaXNcbiAqIHRoZSBsb3dlc3QtbGV2ZWwgaW5pdGlhbGl6YXRpb24gQVBJIGZvciBhIExleGljYWxFZGl0b3IuIElmIHlvdSdyZSB1c2luZyBSZWFjdCBvciBhbm90aGVyIGZyYW1ld29yayxcbiAqIGNvbnNpZGVyIHVzaW5nIHRoZSBhcHByb3ByaWF0ZSBhYnN0cmFjdGlvbnMsIHN1Y2ggYXMgTGV4aWNhbENvbXBvc2VyXG4gKiBAcGFyYW0gZWRpdG9yQ29uZmlnIC0gdGhlIGVkaXRvciBjb25maWd1cmF0aW9uLlxuICogQHJldHVybnMgYSBMZXhpY2FsRWRpdG9yIGluc3RhbmNlXG4gKi9cblxuXG5mdW5jdGlvbiBjcmVhdGVFZGl0b3IoZWRpdG9yQ29uZmlnKSB7XG4gIGNvbnN0IGNvbmZpZyA9IGVkaXRvckNvbmZpZyB8fCB7fTtcbiAgY29uc3QgYWN0aXZlRWRpdG9yID0gaW50ZXJuYWxHZXRBY3RpdmVFZGl0b3IoKTtcbiAgY29uc3QgdGhlbWUgPSBjb25maWcudGhlbWUgfHwge307XG4gIGNvbnN0IHBhcmVudEVkaXRvciA9IGVkaXRvckNvbmZpZyA9PT0gdW5kZWZpbmVkID8gYWN0aXZlRWRpdG9yIDogY29uZmlnLnBhcmVudEVkaXRvciB8fCBudWxsO1xuICBjb25zdCBkaXNhYmxlRXZlbnRzID0gY29uZmlnLmRpc2FibGVFdmVudHMgfHwgZmFsc2U7XG4gIGNvbnN0IGVkaXRvclN0YXRlID0gY3JlYXRlRW1wdHlFZGl0b3JTdGF0ZSgpO1xuICBjb25zdCBuYW1lc3BhY2UgPSBjb25maWcubmFtZXNwYWNlIHx8IChwYXJlbnRFZGl0b3IgIT09IG51bGwgPyBwYXJlbnRFZGl0b3IuX2NvbmZpZy5uYW1lc3BhY2UgOiBjcmVhdGVVSUQoKSk7XG4gIGNvbnN0IGluaXRpYWxFZGl0b3JTdGF0ZSA9IGNvbmZpZy5lZGl0b3JTdGF0ZTtcbiAgY29uc3Qgbm9kZXMgPSBbUm9vdE5vZGUsIFRleHROb2RlLCBMaW5lQnJlYWtOb2RlLCBQYXJhZ3JhcGhOb2RlLCAuLi4oY29uZmlnLm5vZGVzIHx8IFtdKV07XG4gIGNvbnN0IG9uRXJyb3IgPSBjb25maWcub25FcnJvcjtcbiAgY29uc3QgaXNFZGl0YWJsZSA9IGNvbmZpZy5lZGl0YWJsZSAhPT0gdW5kZWZpbmVkID8gY29uZmlnLmVkaXRhYmxlIDogdHJ1ZTtcbiAgbGV0IHJlZ2lzdGVyZWROb2RlcztcblxuICBpZiAoZWRpdG9yQ29uZmlnID09PSB1bmRlZmluZWQgJiYgYWN0aXZlRWRpdG9yICE9PSBudWxsKSB7XG4gICAgcmVnaXN0ZXJlZE5vZGVzID0gYWN0aXZlRWRpdG9yLl9ub2RlcztcbiAgfSBlbHNlIHtcbiAgICByZWdpc3RlcmVkTm9kZXMgPSBuZXcgTWFwKCk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQga2xhc3MgPSBub2Rlc1tpXTtcbiAgICAgIGxldCByZXBsYWNlbWVudENsYXNzID0gbnVsbDtcbiAgICAgIGxldCByZXBsYWNlbWVudEtsYXNzID0gbnVsbDtcblxuICAgICAgaWYgKHR5cGVvZiBrbGFzcyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjb25zdCBvcHRpb25zID0ga2xhc3M7XG4gICAgICAgIGtsYXNzID0gb3B0aW9ucy5yZXBsYWNlO1xuICAgICAgICByZXBsYWNlbWVudENsYXNzID0gb3B0aW9ucy53aXRoO1xuICAgICAgICByZXBsYWNlbWVudEtsYXNzID0gb3B0aW9ucy53aXRoS2xhc3MgPyBvcHRpb25zLndpdGhLbGFzcyA6IG51bGw7XG4gICAgICB9IC8vIEVuc3VyZSBjdXN0b20gbm9kZXMgaW1wbGVtZW50IHJlcXVpcmVkIG1ldGhvZHMuXG5cblxuICAgICAge1xuICAgICAgICBjb25zdCBuYW1lID0ga2xhc3MubmFtZTtcblxuICAgICAgICBpZiAobmFtZSAhPT0gJ1Jvb3ROb2RlJykge1xuICAgICAgICAgIGNvbnN0IHByb3RvID0ga2xhc3MucHJvdG90eXBlO1xuICAgICAgICAgIFsnZ2V0VHlwZScsICdjbG9uZSddLmZvckVhY2gobWV0aG9kID0+IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnNcbiAgICAgICAgICAgIGlmICgha2xhc3MuaGFzT3duUHJvcGVydHkobWV0aG9kKSkge1xuICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYCR7bmFtZX0gbXVzdCBpbXBsZW1lbnQgc3RhdGljIFwiJHttZXRob2R9XCIgbWV0aG9kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAoIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnNcbiAgICAgICAgICAgICFrbGFzcy5oYXNPd25Qcm9wZXJ0eSgnaW1wb3J0RE9NJykgJiYgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb3RvdHlwZS1idWlsdGluc1xuICAgICAgICAgICAga2xhc3MuaGFzT3duUHJvcGVydHkoJ2V4cG9ydERPTScpKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYCR7bmFtZX0gc2hvdWxkIGltcGxlbWVudCBcImltcG9ydERPTVwiIGlmIHVzaW5nIGEgY3VzdG9tIFwiZXhwb3J0RE9NXCIgbWV0aG9kIHRvIGVuc3VyZSBIVE1MIHNlcmlhbGl6YXRpb24gKGltcG9ydGFudCBmb3IgY29weSAmIHBhc3RlKSB3b3JrcyBhcyBleHBlY3RlZGApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChwcm90byBpbnN0YW5jZW9mIERlY29yYXRvck5vZGUpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnNcbiAgICAgICAgICAgIGlmICghcHJvdG8uaGFzT3duUHJvcGVydHkoJ2RlY29yYXRlJykpIHtcbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKGAke3Byb3RvLmNvbnN0cnVjdG9yLm5hbWV9IG11c3QgaW1wbGVtZW50IFwiZGVjb3JhdGVcIiBtZXRob2RgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnNcbiAgICAgICAgICAgICFrbGFzcy5oYXNPd25Qcm9wZXJ0eSgnaW1wb3J0SlNPTicpKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYCR7bmFtZX0gc2hvdWxkIGltcGxlbWVudCBcImltcG9ydEpTT05cIiBtZXRob2QgdG8gZW5zdXJlIEpTT04gYW5kIGRlZmF1bHQgSFRNTCBzZXJpYWxpemF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkYCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG4gICAgICAgICAgICAhcHJvdG8uaGFzT3duUHJvcGVydHkoJ2V4cG9ydEpTT04nKSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGAke25hbWV9IHNob3VsZCBpbXBsZW1lbnQgXCJleHBvcnRKU09OXCIgbWV0aG9kIHRvIGVuc3VyZSBKU09OIGFuZCBkZWZhdWx0IEhUTUwgc2VyaWFsaXphdGlvbiB3b3JrcyBhcyBleHBlY3RlZGApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCB0eXBlID0ga2xhc3MuZ2V0VHlwZSgpO1xuICAgICAgY29uc3QgdHJhbnNmb3JtID0ga2xhc3MudHJhbnNmb3JtKCk7XG4gICAgICBjb25zdCB0cmFuc2Zvcm1zID0gbmV3IFNldCgpO1xuXG4gICAgICBpZiAodHJhbnNmb3JtICE9PSBudWxsKSB7XG4gICAgICAgIHRyYW5zZm9ybXMuYWRkKHRyYW5zZm9ybSk7XG4gICAgICB9XG5cbiAgICAgIHJlZ2lzdGVyZWROb2Rlcy5zZXQodHlwZSwge1xuICAgICAgICBrbGFzcyxcbiAgICAgICAgcmVwbGFjZTogcmVwbGFjZW1lbnRDbGFzcyxcbiAgICAgICAgcmVwbGFjZVdpdGhLbGFzczogcmVwbGFjZW1lbnRLbGFzcyxcbiAgICAgICAgdHJhbnNmb3Jtc1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgZWRpdG9yID0gbmV3IExleGljYWxFZGl0b3IoZWRpdG9yU3RhdGUsIHBhcmVudEVkaXRvciwgcmVnaXN0ZXJlZE5vZGVzLCB7XG4gICAgZGlzYWJsZUV2ZW50cyxcbiAgICBuYW1lc3BhY2UsXG4gICAgdGhlbWVcbiAgfSwgb25FcnJvciA/IG9uRXJyb3IgOiBjb25zb2xlLmVycm9yLCBpbml0aWFsaXplQ29udmVyc2lvbkNhY2hlKHJlZ2lzdGVyZWROb2RlcyksIGlzRWRpdGFibGUpO1xuXG4gIGlmIChpbml0aWFsRWRpdG9yU3RhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgIGVkaXRvci5fcGVuZGluZ0VkaXRvclN0YXRlID0gaW5pdGlhbEVkaXRvclN0YXRlO1xuICAgIGVkaXRvci5fZGlydHlUeXBlID0gRlVMTF9SRUNPTkNJTEU7XG4gIH1cblxuICByZXR1cm4gZWRpdG9yO1xufVxuY2xhc3MgTGV4aWNhbEVkaXRvciB7XG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBjb25zdHJ1Y3RvcihlZGl0b3JTdGF0ZSwgcGFyZW50RWRpdG9yLCBub2RlcywgY29uZmlnLCBvbkVycm9yLCBodG1sQ29udmVyc2lvbnMsIGVkaXRhYmxlKSB7XG4gICAgdGhpcy5fcGFyZW50RWRpdG9yID0gcGFyZW50RWRpdG9yOyAvLyBUaGUgcm9vdCBlbGVtZW50IGFzc29jaWF0ZWQgd2l0aCB0aGlzIGVkaXRvclxuXG4gICAgdGhpcy5fcm9vdEVsZW1lbnQgPSBudWxsOyAvLyBUaGUgY3VycmVudCBlZGl0b3Igc3RhdGVcblxuICAgIHRoaXMuX2VkaXRvclN0YXRlID0gZWRpdG9yU3RhdGU7IC8vIEhhbmRsaW5nIG9mIGRyYWZ0cyBhbmQgdXBkYXRlc1xuXG4gICAgdGhpcy5fcGVuZGluZ0VkaXRvclN0YXRlID0gbnVsbDsgLy8gVXNlZCB0byBoZWxwIGNvLW9yZGluYXRlIHNlbGVjdGlvbiBhbmQgZXZlbnRzXG5cbiAgICB0aGlzLl9jb21wb3NpdGlvbktleSA9IG51bGw7XG4gICAgdGhpcy5fZGVmZXJyZWQgPSBbXTsgLy8gVXNlZCBkdXJpbmcgcmVjb25jaWxpYXRpb25cblxuICAgIHRoaXMuX2tleVRvRE9NTWFwID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuX3VwZGF0ZXMgPSBbXTtcbiAgICB0aGlzLl91cGRhdGluZyA9IGZhbHNlOyAvLyBMaXN0ZW5lcnNcblxuICAgIHRoaXMuX2xpc3RlbmVycyA9IHtcbiAgICAgIGRlY29yYXRvcjogbmV3IFNldCgpLFxuICAgICAgZWRpdGFibGU6IG5ldyBTZXQoKSxcbiAgICAgIG11dGF0aW9uOiBuZXcgTWFwKCksXG4gICAgICByb290OiBuZXcgU2V0KCksXG4gICAgICB0ZXh0Y29udGVudDogbmV3IFNldCgpLFxuICAgICAgdXBkYXRlOiBuZXcgU2V0KClcbiAgICB9OyAvLyBDb21tYW5kc1xuXG4gICAgdGhpcy5fY29tbWFuZHMgPSBuZXcgTWFwKCk7IC8vIEVkaXRvciBjb25maWd1cmF0aW9uIGZvciB0aGVtZS9jb250ZXh0LlxuXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnOyAvLyBNYXBwaW5nIG9mIHR5cGVzIHRvIHRoZWlyIG5vZGVzXG5cbiAgICB0aGlzLl9ub2RlcyA9IG5vZGVzOyAvLyBSZWFjdCBub2RlIGRlY29yYXRvcnMgZm9yIHBvcnRhbHNcblxuICAgIHRoaXMuX2RlY29yYXRvcnMgPSB7fTtcbiAgICB0aGlzLl9wZW5kaW5nRGVjb3JhdG9ycyA9IG51bGw7IC8vIFVzZWQgdG8gb3B0aW1pemUgcmVjb25jaWxpYXRpb25cblxuICAgIHRoaXMuX2RpcnR5VHlwZSA9IE5PX0RJUlRZX05PREVTO1xuICAgIHRoaXMuX2Nsb25lTm90TmVlZGVkID0gbmV3IFNldCgpO1xuICAgIHRoaXMuX2RpcnR5TGVhdmVzID0gbmV3IFNldCgpO1xuICAgIHRoaXMuX2RpcnR5RWxlbWVudHMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5fbm9ybWFsaXplZE5vZGVzID0gbmV3IFNldCgpO1xuICAgIHRoaXMuX3VwZGF0ZVRhZ3MgPSBuZXcgU2V0KCk7IC8vIEhhbmRsaW5nIG9mIERPTSBtdXRhdGlvbnNcblxuICAgIHRoaXMuX29ic2VydmVyID0gbnVsbDsgLy8gVXNlZCBmb3IgaWRlbnRpZnlpbmcgb3duaW5nIGVkaXRvcnNcblxuICAgIHRoaXMuX2tleSA9IGNyZWF0ZVVJRCgpO1xuICAgIHRoaXMuX29uRXJyb3IgPSBvbkVycm9yO1xuICAgIHRoaXMuX2h0bWxDb252ZXJzaW9ucyA9IGh0bWxDb252ZXJzaW9uczsgLy8gV2UgZG9uJ3QgYWN0dWFsbHkgbWFrZSB1c2Ugb2YgdGhlIGBlZGl0YWJsZWAgYXJndW1lbnQgYWJvdmUuXG4gICAgLy8gRG9pbmcgc28sIGNhdXNlcyBlMmUgdGVzdHMgYXJvdW5kIHRoZSBsb2NrIHRvIGZhaWwuXG5cbiAgICB0aGlzLl9lZGl0YWJsZSA9IHRydWU7XG4gICAgdGhpcy5faGVhZGxlc3MgPSBwYXJlbnRFZGl0b3IgIT09IG51bGwgJiYgcGFyZW50RWRpdG9yLl9oZWFkbGVzcztcbiAgICB0aGlzLl93aW5kb3cgPSBudWxsO1xuICAgIHRoaXMuX2Jsb2NrQ3Vyc29yRWxlbWVudCA9IG51bGw7XG4gIH1cbiAgLyoqXG4gICAqXG4gICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIGVkaXRvciBpcyBjdXJyZW50bHkgaW4gXCJjb21wb3NpdGlvblwiIG1vZGUgZHVlIHRvIHJlY2VpdmluZyBpbnB1dFxuICAgKiB0aHJvdWdoIGFuIElNRSwgb3IgM1AgZXh0ZW5zaW9uLCBmb3IgZXhhbXBsZS4gUmV0dXJucyBmYWxzZSBvdGhlcndpc2UuXG4gICAqL1xuXG5cbiAgaXNDb21wb3NpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbXBvc2l0aW9uS2V5ICE9IG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIGZvciBFZGl0b3IgdXBkYXRlIGV2ZW50LiBXaWxsIHRyaWdnZXIgdGhlIHByb3ZpZGVkIGNhbGxiYWNrXG4gICAqIGVhY2ggdGltZSB0aGUgZWRpdG9yIGdvZXMgdGhyb3VnaCBhbiB1cGRhdGUgKHZpYSB7QGxpbmsgTGV4aWNhbEVkaXRvci51cGRhdGV9KSB1bnRpbCB0aGVcbiAgICogdGVhcmRvd24gZnVuY3Rpb24gaXMgY2FsbGVkLlxuICAgKlxuICAgKiBAcmV0dXJucyBhIHRlYXJkb3duIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2xlYW51cCB0aGUgbGlzdGVuZXIuXG4gICAqL1xuXG5cbiAgcmVnaXN0ZXJVcGRhdGVMaXN0ZW5lcihsaXN0ZW5lcikge1xuICAgIGNvbnN0IGxpc3RlbmVyU2V0T3JNYXAgPSB0aGlzLl9saXN0ZW5lcnMudXBkYXRlO1xuICAgIGxpc3RlbmVyU2V0T3JNYXAuYWRkKGxpc3RlbmVyKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbGlzdGVuZXJTZXRPck1hcC5kZWxldGUobGlzdGVuZXIpO1xuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIGZvciBmb3Igd2hlbiB0aGUgZWRpdG9yIGNoYW5nZXMgYmV0d2VlbiBlZGl0YWJsZSBhbmQgbm9uLWVkaXRhYmxlIHN0YXRlcy5cbiAgICogV2lsbCB0cmlnZ2VyIHRoZSBwcm92aWRlZCBjYWxsYmFjayBlYWNoIHRpbWUgdGhlIGVkaXRvciB0cmFuc2l0aW9ucyBiZXR3ZWVuIHRoZXNlIHN0YXRlcyB1bnRpbCB0aGVcbiAgICogdGVhcmRvd24gZnVuY3Rpb24gaXMgY2FsbGVkLlxuICAgKlxuICAgKiBAcmV0dXJucyBhIHRlYXJkb3duIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2xlYW51cCB0aGUgbGlzdGVuZXIuXG4gICAqL1xuXG5cbiAgcmVnaXN0ZXJFZGl0YWJsZUxpc3RlbmVyKGxpc3RlbmVyKSB7XG4gICAgY29uc3QgbGlzdGVuZXJTZXRPck1hcCA9IHRoaXMuX2xpc3RlbmVycy5lZGl0YWJsZTtcbiAgICBsaXN0ZW5lclNldE9yTWFwLmFkZChsaXN0ZW5lcik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGxpc3RlbmVyU2V0T3JNYXAuZGVsZXRlKGxpc3RlbmVyKTtcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBsaXN0ZW5lciBmb3Igd2hlbiB0aGUgZWRpdG9yJ3MgZGVjb3JhdG9yIG9iamVjdCBjaGFuZ2VzLiBUaGUgZGVjb3JhdG9yIG9iamVjdCBjb250YWluc1xuICAgKiBhbGwgRGVjb3JhdG9yTm9kZSBrZXlzIC0+IHRoZWlyIGRlY29yYXRlZCB2YWx1ZS4gVGhpcyBpcyBwcmltYXJpbHkgdXNlZCB3aXRoIGV4dGVybmFsIFVJIGZyYW1ld29ya3MuXG4gICAqXG4gICAqIFdpbGwgdHJpZ2dlciB0aGUgcHJvdmlkZWQgY2FsbGJhY2sgZWFjaCB0aW1lIHRoZSBlZGl0b3IgdHJhbnNpdGlvbnMgYmV0d2VlbiB0aGVzZSBzdGF0ZXMgdW50aWwgdGhlXG4gICAqIHRlYXJkb3duIGZ1bmN0aW9uIGlzIGNhbGxlZC5cbiAgICpcbiAgICogQHJldHVybnMgYSB0ZWFyZG93biBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGNsZWFudXAgdGhlIGxpc3RlbmVyLlxuICAgKi9cblxuXG4gIHJlZ2lzdGVyRGVjb3JhdG9yTGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICBjb25zdCBsaXN0ZW5lclNldE9yTWFwID0gdGhpcy5fbGlzdGVuZXJzLmRlY29yYXRvcjtcbiAgICBsaXN0ZW5lclNldE9yTWFwLmFkZChsaXN0ZW5lcik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGxpc3RlbmVyU2V0T3JNYXAuZGVsZXRlKGxpc3RlbmVyKTtcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBsaXN0ZW5lciBmb3Igd2hlbiBMZXhpY2FsIGNvbW1pdHMgYW4gdXBkYXRlIHRvIHRoZSBET00gYW5kIHRoZSB0ZXh0IGNvbnRlbnQgb2ZcbiAgICogdGhlIGVkaXRvciBjaGFuZ2VzIGZyb20gdGhlIHByZXZpb3VzIHN0YXRlIG9mIHRoZSBlZGl0b3IuIElmIHRoZSB0ZXh0IGNvbnRlbnQgaXMgdGhlXG4gICAqIHNhbWUgYmV0d2VlbiB1cGRhdGVzLCBubyBub3RpZmljYXRpb25zIHRvIHRoZSBsaXN0ZW5lcnMgd2lsbCBoYXBwZW4uXG4gICAqXG4gICAqIFdpbGwgdHJpZ2dlciB0aGUgcHJvdmlkZWQgY2FsbGJhY2sgZWFjaCB0aW1lIHRoZSBlZGl0b3IgdHJhbnNpdGlvbnMgYmV0d2VlbiB0aGVzZSBzdGF0ZXMgdW50aWwgdGhlXG4gICAqIHRlYXJkb3duIGZ1bmN0aW9uIGlzIGNhbGxlZC5cbiAgICpcbiAgICogQHJldHVybnMgYSB0ZWFyZG93biBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGNsZWFudXAgdGhlIGxpc3RlbmVyLlxuICAgKi9cblxuXG4gIHJlZ2lzdGVyVGV4dENvbnRlbnRMaXN0ZW5lcihsaXN0ZW5lcikge1xuICAgIGNvbnN0IGxpc3RlbmVyU2V0T3JNYXAgPSB0aGlzLl9saXN0ZW5lcnMudGV4dGNvbnRlbnQ7XG4gICAgbGlzdGVuZXJTZXRPck1hcC5hZGQobGlzdGVuZXIpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBsaXN0ZW5lclNldE9yTWFwLmRlbGV0ZShsaXN0ZW5lcik7XG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgZm9yIHdoZW4gdGhlIGVkaXRvcidzIHJvb3QgRE9NIGVsZW1lbnQgKHRoZSBjb250ZW50IGVkaXRhYmxlXG4gICAqIExleGljYWwgYXR0YWNoZXMgdG8pIGNoYW5nZXMuIFRoaXMgaXMgcHJpbWFyaWx5IHVzZWQgdG8gYXR0YWNoIGV2ZW50IGxpc3RlbmVycyB0byB0aGUgcm9vdFxuICAgKiAgZWxlbWVudC4gVGhlIHJvb3QgbGlzdGVuZXIgZnVuY3Rpb24gaXMgZXhlY3V0ZWQgZGlyZWN0bHkgdXBvbiByZWdpc3RyYXRpb24gYW5kIHRoZW4gb25cbiAgICogYW55IHN1YnNlcXVlbnQgdXBkYXRlLlxuICAgKlxuICAgKiBXaWxsIHRyaWdnZXIgdGhlIHByb3ZpZGVkIGNhbGxiYWNrIGVhY2ggdGltZSB0aGUgZWRpdG9yIHRyYW5zaXRpb25zIGJldHdlZW4gdGhlc2Ugc3RhdGVzIHVudGlsIHRoZVxuICAgKiB0ZWFyZG93biBmdW5jdGlvbiBpcyBjYWxsZWQuXG4gICAqXG4gICAqIEByZXR1cm5zIGEgdGVhcmRvd24gZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBjbGVhbnVwIHRoZSBsaXN0ZW5lci5cbiAgICovXG5cblxuICByZWdpc3RlclJvb3RMaXN0ZW5lcihsaXN0ZW5lcikge1xuICAgIGNvbnN0IGxpc3RlbmVyU2V0T3JNYXAgPSB0aGlzLl9saXN0ZW5lcnMucm9vdDtcbiAgICBsaXN0ZW5lcih0aGlzLl9yb290RWxlbWVudCwgbnVsbCk7XG4gICAgbGlzdGVuZXJTZXRPck1hcC5hZGQobGlzdGVuZXIpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBsaXN0ZW5lcihudWxsLCB0aGlzLl9yb290RWxlbWVudCk7XG4gICAgICBsaXN0ZW5lclNldE9yTWFwLmRlbGV0ZShsaXN0ZW5lcik7XG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgdGhhdCB3aWxsIHRyaWdnZXIgYW55dGltZSB0aGUgcHJvdmlkZWQgY29tbWFuZFxuICAgKiBpcyBkaXNwYXRjaGVkLCBzdWJqZWN0IHRvIHByaW9yaXR5LiBMaXN0ZW5lcnMgdGhhdCBydW4gYXQgYSBoaWdoZXIgcHJpb3JpdHkgY2FuIFwiaW50ZXJjZXB0XCJcbiAgICogY29tbWFuZHMgYW5kIHByZXZlbnQgdGhlbSBmcm9tIHByb3BhZ2F0aW5nIHRvIG90aGVyIGhhbmRsZXJzIGJ5IHJldHVybmluZyB0cnVlLlxuICAgKlxuICAgKiBMaXN0ZW5lcnMgcmVnaXN0ZXJlZCBhdCB0aGUgc2FtZSBwcmlvcml0eSBsZXZlbCB3aWxsIHJ1biBkZXRlcm1pbmlzdGljYWxseSBpbiB0aGUgb3JkZXIgb2YgcmVnaXN0cmF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gY29tbWFuZCAtIHRoZSBjb21tYW5kIHRoYXQgd2lsbCB0cmlnZ2VyIHRoZSBjYWxsYmFjay5cbiAgICogQHBhcmFtIGxpc3RlbmVyIC0gdGhlIGZ1bmN0aW9uIHRoYXQgd2lsbCBleGVjdXRlIHdoZW4gdGhlIGNvbW1hbmQgaXMgZGlzcGF0Y2hlZC5cbiAgICogQHBhcmFtIHByaW9yaXR5IC0gdGhlIHJlbGF0aXZlIHByaW9yaXR5IG9mIHRoZSBsaXN0ZW5lci4gMCB8IDEgfCAyIHwgMyB8IDRcbiAgICogQHJldHVybnMgYSB0ZWFyZG93biBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGNsZWFudXAgdGhlIGxpc3RlbmVyLlxuICAgKi9cblxuXG4gIHJlZ2lzdGVyQ29tbWFuZChjb21tYW5kLCBsaXN0ZW5lciwgcHJpb3JpdHkpIHtcbiAgICBpZiAocHJpb3JpdHkgPT09IHVuZGVmaW5lZCkge1xuICAgICAge1xuICAgICAgICB0aHJvdyBFcnJvcihgTGlzdGVuZXIgZm9yIHR5cGUgXCJjb21tYW5kXCIgcmVxdWlyZXMgYSBcInByaW9yaXR5XCIuYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY29tbWFuZHNNYXAgPSB0aGlzLl9jb21tYW5kcztcblxuICAgIGlmICghY29tbWFuZHNNYXAuaGFzKGNvbW1hbmQpKSB7XG4gICAgICBjb21tYW5kc01hcC5zZXQoY29tbWFuZCwgW25ldyBTZXQoKSwgbmV3IFNldCgpLCBuZXcgU2V0KCksIG5ldyBTZXQoKSwgbmV3IFNldCgpXSk7XG4gICAgfVxuXG4gICAgY29uc3QgbGlzdGVuZXJzSW5Qcmlvcml0eU9yZGVyID0gY29tbWFuZHNNYXAuZ2V0KGNvbW1hbmQpO1xuXG4gICAgaWYgKGxpc3RlbmVyc0luUHJpb3JpdHlPcmRlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB7XG4gICAgICAgIHRocm93IEVycm9yKGByZWdpc3RlckNvbW1hbmQ6IENvbW1hbmQgJHtTdHJpbmcoY29tbWFuZCl9IG5vdCBmb3VuZCBpbiBjb21tYW5kIG1hcGApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGxpc3RlbmVycyA9IGxpc3RlbmVyc0luUHJpb3JpdHlPcmRlcltwcmlvcml0eV07XG4gICAgbGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xuXG4gICAgICBpZiAobGlzdGVuZXJzSW5Qcmlvcml0eU9yZGVyLmV2ZXJ5KGxpc3RlbmVyc1NldCA9PiBsaXN0ZW5lcnNTZXQuc2l6ZSA9PT0gMCkpIHtcbiAgICAgICAgY29tbWFuZHNNYXAuZGVsZXRlKGNvbW1hbmQpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIHRoYXQgd2lsbCBydW4gd2hlbiBhIExleGljYWwgbm9kZSBvZiB0aGUgcHJvdmlkZWQgY2xhc3MgaXNcbiAgICogbXV0YXRlZC4gVGhlIGxpc3RlbmVyIHdpbGwgcmVjZWl2ZSBhIGxpc3Qgb2Ygbm9kZXMgYWxvbmcgd2l0aCB0aGUgdHlwZSBvZiBtdXRhdGlvblxuICAgKiB0aGF0IHdhcyBwZXJmb3JtZWQgb24gZWFjaDogY3JlYXRlZCwgZGVzdHJveWVkLCBvciB1cGRhdGVkLlxuICAgKlxuICAgKiBPbmUgY29tbW9uIHVzZSBjYXNlIGZvciB0aGlzIGlzIHRvIGF0dGFjaCBET00gZXZlbnQgbGlzdGVuZXJzIHRvIHRoZSB1bmRlcmx5aW5nIERPTSBub2RlcyBhcyBMZXhpY2FsIG5vZGVzIGFyZSBjcmVhdGVkLlxuICAgKiB7QGxpbmsgTGV4aWNhbEVkaXRvci5nZXRFbGVtZW50QnlLZXl9IGNhbiBiZSB1c2VkIGZvciB0aGlzLlxuICAgKlxuICAgKiBAcGFyYW0ga2xhc3MgLSBUaGUgY2xhc3Mgb2YgdGhlIG5vZGUgdGhhdCB5b3Ugd2FudCB0byBsaXN0ZW4gdG8gbXV0YXRpb25zIG9uLlxuICAgKiBAcGFyYW0gbGlzdGVuZXIgLSBUaGUgbG9naWMgeW91IHdhbnQgdG8gcnVuIHdoZW4gdGhlIG5vZGUgaXMgbXV0YXRlZC5cbiAgICogQHJldHVybnMgYSB0ZWFyZG93biBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGNsZWFudXAgdGhlIGxpc3RlbmVyLlxuICAgKi9cblxuXG4gIHJlZ2lzdGVyTXV0YXRpb25MaXN0ZW5lcihrbGFzcywgbGlzdGVuZXIpIHtcbiAgICBjb25zdCByZWdpc3RlcmVkTm9kZSA9IHRoaXMuX25vZGVzLmdldChrbGFzcy5nZXRUeXBlKCkpO1xuXG4gICAgaWYgKHJlZ2lzdGVyZWROb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoYE5vZGUgJHtrbGFzcy5uYW1lfSBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZC4gRW5zdXJlIG5vZGUgaGFzIGJlZW4gcGFzc2VkIHRvIGNyZWF0ZUVkaXRvci5gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBtdXRhdGlvbnMgPSB0aGlzLl9saXN0ZW5lcnMubXV0YXRpb247XG4gICAgbXV0YXRpb25zLnNldChsaXN0ZW5lciwga2xhc3MpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBtdXRhdGlvbnMuZGVsZXRlKGxpc3RlbmVyKTtcbiAgICB9O1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuXG4gIHJlZ2lzdGVyTm9kZVRyYW5zZm9ybVRvS2xhc3Moa2xhc3MsIGxpc3RlbmVyKSB7XG4gICAgY29uc3QgdHlwZSA9IGtsYXNzLmdldFR5cGUoKTtcblxuICAgIGNvbnN0IHJlZ2lzdGVyZWROb2RlID0gdGhpcy5fbm9kZXMuZ2V0KHR5cGUpO1xuXG4gICAgaWYgKHJlZ2lzdGVyZWROb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoYE5vZGUgJHtrbGFzcy5uYW1lfSBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZC4gRW5zdXJlIG5vZGUgaGFzIGJlZW4gcGFzc2VkIHRvIGNyZWF0ZUVkaXRvci5gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB0cmFuc2Zvcm1zID0gcmVnaXN0ZXJlZE5vZGUudHJhbnNmb3JtcztcbiAgICB0cmFuc2Zvcm1zLmFkZChsaXN0ZW5lcik7XG4gICAgcmV0dXJuIHJlZ2lzdGVyZWROb2RlO1xuICB9XG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBsaXN0ZW5lciB0aGF0IHdpbGwgcnVuIHdoZW4gYSBMZXhpY2FsIG5vZGUgb2YgdGhlIHByb3ZpZGVkIGNsYXNzIGlzXG4gICAqIG1hcmtlZCBkaXJ0eSBkdXJpbmcgYW4gdXBkYXRlLiBUaGUgbGlzdGVuZXIgd2lsbCBjb250aW51ZSB0byBydW4gYXMgbG9uZyBhcyB0aGUgbm9kZVxuICAgKiBpcyBtYXJrZWQgZGlydHkuIFRoZXJlIGFyZSBubyBndWFyYW50ZWVzIGFyb3VuZCB0aGUgb3JkZXIgb2YgdHJhbnNmb3JtIGV4ZWN1dGlvbiFcbiAgICpcbiAgICogV2F0Y2ggb3V0IGZvciBpbmZpbml0ZSBsb29wcy4gU2VlIFtOb2RlIFRyYW5zZm9ybXNdKGh0dHBzOi8vbGV4aWNhbC5kZXYvZG9jcy9jb25jZXB0cy90cmFuc2Zvcm1zKVxuICAgKiBAcGFyYW0ga2xhc3MgLSBUaGUgY2xhc3Mgb2YgdGhlIG5vZGUgdGhhdCB5b3Ugd2FudCB0byBydW4gdHJhbnNmb3JtcyBvbi5cbiAgICogQHBhcmFtIGxpc3RlbmVyIC0gVGhlIGxvZ2ljIHlvdSB3YW50IHRvIHJ1biB3aGVuIHRoZSBub2RlIGlzIHVwZGF0ZWQuXG4gICAqIEByZXR1cm5zIGEgdGVhcmRvd24gZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBjbGVhbnVwIHRoZSBsaXN0ZW5lci5cbiAgICovXG5cblxuICByZWdpc3Rlck5vZGVUcmFuc2Zvcm0oa2xhc3MsIGxpc3RlbmVyKSB7XG4gICAgY29uc3QgcmVnaXN0ZXJlZE5vZGUgPSB0aGlzLnJlZ2lzdGVyTm9kZVRyYW5zZm9ybVRvS2xhc3Moa2xhc3MsIGxpc3RlbmVyKTtcbiAgICBjb25zdCByZWdpc3RlcmVkTm9kZXMgPSBbcmVnaXN0ZXJlZE5vZGVdO1xuICAgIGNvbnN0IHJlcGxhY2VXaXRoS2xhc3MgPSByZWdpc3RlcmVkTm9kZS5yZXBsYWNlV2l0aEtsYXNzO1xuXG4gICAgaWYgKHJlcGxhY2VXaXRoS2xhc3MgIT0gbnVsbCkge1xuICAgICAgY29uc3QgcmVnaXN0ZXJlZFJlcGxhY2VXaXRoTm9kZSA9IHRoaXMucmVnaXN0ZXJOb2RlVHJhbnNmb3JtVG9LbGFzcyhyZXBsYWNlV2l0aEtsYXNzLCBsaXN0ZW5lcik7XG4gICAgICByZWdpc3RlcmVkTm9kZXMucHVzaChyZWdpc3RlcmVkUmVwbGFjZVdpdGhOb2RlKTtcbiAgICB9XG5cbiAgICBtYXJrQWxsTm9kZXNBc0RpcnR5KHRoaXMsIGtsYXNzLmdldFR5cGUoKSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHJlZ2lzdGVyZWROb2Rlcy5mb3JFYWNoKG5vZGUgPT4gbm9kZS50cmFuc2Zvcm1zLmRlbGV0ZShsaXN0ZW5lcikpO1xuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIFVzZWQgdG8gYXNzZXJ0IHRoYXQgY2VydGFpbiBub2RlcyBhcmUgcmVnaXN0ZXJlZCwgdXN1YWxseSBieSBwbHVnaW5zIHRvIGVuc3VyZSBub2RlcyB0aGF0IHRoZXlcbiAgICogZGVwZW5kIG9uIGhhdmUgYmVlbiByZWdpc3RlcmVkLlxuICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBlZGl0b3IgaGFzIHJlZ2lzdGVyZWQgYWxsIG9mIHRoZSBwcm92aWRlZCBub2RlIHR5cGVzLCBmYWxzZSBvdGhlcndpc2UuXG4gICAqL1xuXG5cbiAgaGFzTm9kZXMobm9kZXMpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBrbGFzcyA9IG5vZGVzW2ldO1xuICAgICAgY29uc3QgdHlwZSA9IGtsYXNzLmdldFR5cGUoKTtcblxuICAgICAgaWYgKCF0aGlzLl9ub2Rlcy5oYXModHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBEaXNwYXRjaGVzIGEgY29tbWFuZCBvZiB0aGUgc3BlY2lmaWVkIHR5cGUgd2l0aCB0aGUgc3BlY2lmaWVkIHBheWxvYWQuXG4gICAqIFRoaXMgdHJpZ2dlcnMgYWxsIGNvbW1hbmQgbGlzdGVuZXJzIChzZXQgYnkge0BsaW5rIExleGljYWxFZGl0b3IucmVnaXN0ZXJDb21tYW5kfSlcbiAgICogZm9yIHRoaXMgdHlwZSwgcGFzc2luZyB0aGVtIHRoZSBwcm92aWRlZCBwYXlsb2FkLlxuICAgKiBAcGFyYW0gdHlwZSAtIHRoZSB0eXBlIG9mIGNvbW1hbmQgbGlzdGVuZXJzIHRvIHRyaWdnZXIuXG4gICAqIEBwYXJhbSBwYXlsb2FkIC0gdGhlIGRhdGEgdG8gcGFzcyBhcyBhbiBhcmd1bWVudCB0byB0aGUgY29tbWFuZCBsaXN0ZW5lcnMuXG4gICAqL1xuXG5cbiAgZGlzcGF0Y2hDb21tYW5kKHR5cGUsIHBheWxvYWQpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2hDb21tYW5kKHRoaXMsIHR5cGUsIHBheWxvYWQpO1xuICB9XG4gIC8qKlxuICAgKiBHZXRzIGEgbWFwIG9mIGFsbCBkZWNvcmF0b3JzIGluIHRoZSBlZGl0b3IuXG4gICAqIEByZXR1cm5zIEEgbWFwcGluZyBvZiBjYWxsIGRlY29yYXRvciBrZXlzIHRvIHRoZWlyIGRlY29yYXRlZCBjb250ZW50XG4gICAqL1xuXG5cbiAgZ2V0RGVjb3JhdG9ycygpIHtcbiAgICByZXR1cm4gdGhpcy5fZGVjb3JhdG9ycztcbiAgfVxuICAvKipcbiAgICpcbiAgICogQHJldHVybnMgdGhlIGN1cnJlbnQgcm9vdCBlbGVtZW50IG9mIHRoZSBlZGl0b3IuIElmIHlvdSB3YW50IHRvIHJlZ2lzdGVyXG4gICAqIGFuIGV2ZW50IGxpc3RlbmVyLCBkbyBpdCB2aWEge0BsaW5rIExleGljYWxFZGl0b3IucmVnaXN0ZXJSb290TGlzdGVuZXJ9LCBzaW5jZVxuICAgKiB0aGlzIHJlZmVyZW5jZSBtYXkgbm90IGJlIHN0YWJsZS5cbiAgICovXG5cblxuICBnZXRSb290RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5fcm9vdEVsZW1lbnQ7XG4gIH1cbiAgLyoqXG4gICAqIEdldHMgdGhlIGtleSBvZiB0aGUgZWRpdG9yXG4gICAqIEByZXR1cm5zIFRoZSBlZGl0b3Iga2V5XG4gICAqL1xuXG5cbiAgZ2V0S2V5KCkge1xuICAgIHJldHVybiB0aGlzLl9rZXk7XG4gIH1cbiAgLyoqXG4gICAqIEltcGVyYXRpdmVseSBzZXQgdGhlIHJvb3QgY29udGVudGVkaXRhYmxlIGVsZW1lbnQgdGhhdCBMZXhpY2FsIGxpc3RlbnNcbiAgICogZm9yIGV2ZW50cyBvbi5cbiAgICovXG5cblxuICBzZXRSb290RWxlbWVudChuZXh0Um9vdEVsZW1lbnQpIHtcbiAgICBjb25zdCBwcmV2Um9vdEVsZW1lbnQgPSB0aGlzLl9yb290RWxlbWVudDtcblxuICAgIGlmIChuZXh0Um9vdEVsZW1lbnQgIT09IHByZXZSb290RWxlbWVudCkge1xuICAgICAgY29uc3QgY2xhc3NOYW1lcyA9IGdldENhY2hlZENsYXNzTmFtZUFycmF5KHRoaXMuX2NvbmZpZy50aGVtZSwgJ3Jvb3QnKTtcbiAgICAgIGNvbnN0IHBlbmRpbmdFZGl0b3JTdGF0ZSA9IHRoaXMuX3BlbmRpbmdFZGl0b3JTdGF0ZSB8fCB0aGlzLl9lZGl0b3JTdGF0ZTtcbiAgICAgIHRoaXMuX3Jvb3RFbGVtZW50ID0gbmV4dFJvb3RFbGVtZW50O1xuICAgICAgcmVzZXRFZGl0b3IodGhpcywgcHJldlJvb3RFbGVtZW50LCBuZXh0Um9vdEVsZW1lbnQsIHBlbmRpbmdFZGl0b3JTdGF0ZSk7XG5cbiAgICAgIGlmIChwcmV2Um9vdEVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgICAgLy8gVE9ETzogcmVtb3ZlIHRoaXMgZmxhZyBvbmNlIHdlIG5vIGxvbmdlciB1c2UgVUV2MiBpbnRlcm5hbGx5XG4gICAgICAgIGlmICghdGhpcy5fY29uZmlnLmRpc2FibGVFdmVudHMpIHtcbiAgICAgICAgICByZW1vdmVSb290RWxlbWVudEV2ZW50cyhwcmV2Um9vdEVsZW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNsYXNzTmFtZXMgIT0gbnVsbCkge1xuICAgICAgICAgIHByZXZSb290RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKC4uLmNsYXNzTmFtZXMpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChuZXh0Um9vdEVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgICAgY29uc3Qgd2luZG93T2JqID0gZ2V0RGVmYXVsdFZpZXcobmV4dFJvb3RFbGVtZW50KTtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBuZXh0Um9vdEVsZW1lbnQuc3R5bGU7XG4gICAgICAgIHN0eWxlLnVzZXJTZWxlY3QgPSAndGV4dCc7XG4gICAgICAgIHN0eWxlLndoaXRlU3BhY2UgPSAncHJlLXdyYXAnO1xuICAgICAgICBzdHlsZS53b3JkQnJlYWsgPSAnYnJlYWstd29yZCc7XG4gICAgICAgIG5leHRSb290RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbGV4aWNhbC1lZGl0b3InLCAndHJ1ZScpO1xuICAgICAgICB0aGlzLl93aW5kb3cgPSB3aW5kb3dPYmo7XG4gICAgICAgIHRoaXMuX2RpcnR5VHlwZSA9IEZVTExfUkVDT05DSUxFO1xuICAgICAgICBpbml0TXV0YXRpb25PYnNlcnZlcih0aGlzKTtcblxuICAgICAgICB0aGlzLl91cGRhdGVUYWdzLmFkZCgnaGlzdG9yeS1tZXJnZScpO1xuXG4gICAgICAgIGNvbW1pdFBlbmRpbmdVcGRhdGVzKHRoaXMpOyAvLyBUT0RPOiByZW1vdmUgdGhpcyBmbGFnIG9uY2Ugd2Ugbm8gbG9uZ2VyIHVzZSBVRXYyIGludGVybmFsbHlcblxuICAgICAgICBpZiAoIXRoaXMuX2NvbmZpZy5kaXNhYmxlRXZlbnRzKSB7XG4gICAgICAgICAgYWRkUm9vdEVsZW1lbnRFdmVudHMobmV4dFJvb3RFbGVtZW50LCB0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjbGFzc05hbWVzICE9IG51bGwpIHtcbiAgICAgICAgICBuZXh0Um9vdEVsZW1lbnQuY2xhc3NMaXN0LmFkZCguLi5jbGFzc05hbWVzKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fd2luZG93ID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdHJpZ2dlckxpc3RlbmVycygncm9vdCcsIHRoaXMsIGZhbHNlLCBuZXh0Um9vdEVsZW1lbnQsIHByZXZSb290RWxlbWVudCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXRzIHRoZSB1bmRlcmx5aW5nIEhUTUxFbGVtZW50IGFzc29jaWF0ZWQgd2l0aCB0aGUgTGV4aWNhbE5vZGUgZm9yIHRoZSBnaXZlbiBrZXkuXG4gICAqIEByZXR1cm5zIHRoZSBIVE1MRWxlbWVudCByZW5kZXJlZCBieSB0aGUgTGV4aWNhbE5vZGUgYXNzb2NpYXRlZCB3aXRoIHRoZSBrZXkuXG4gICAqIEBwYXJhbSBrZXkgLSB0aGUga2V5IG9mIHRoZSBMZXhpY2FsTm9kZS5cbiAgICovXG5cblxuICBnZXRFbGVtZW50QnlLZXkoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuX2tleVRvRE9NTWFwLmdldChrZXkpIHx8IG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIEdldHMgdGhlIGFjdGl2ZSBlZGl0b3Igc3RhdGUuXG4gICAqIEByZXR1cm5zIFRoZSBlZGl0b3Igc3RhdGVcbiAgICovXG5cblxuICBnZXRFZGl0b3JTdGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZWRpdG9yU3RhdGU7XG4gIH1cbiAgLyoqXG4gICAqIEltcGVyYXRpdmVseSBzZXQgdGhlIEVkaXRvclN0YXRlLiBUcmlnZ2VycyByZWNvbmNpbGlhdGlvbiBsaWtlIGFuIHVwZGF0ZS5cbiAgICogQHBhcmFtIGVkaXRvclN0YXRlIC0gdGhlIHN0YXRlIHRvIHNldCB0aGUgZWRpdG9yXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gb3B0aW9ucyBmb3IgdGhlIHVwZGF0ZS5cbiAgICovXG5cblxuICBzZXRFZGl0b3JTdGF0ZShlZGl0b3JTdGF0ZSwgb3B0aW9ucykge1xuICAgIGlmIChlZGl0b3JTdGF0ZS5pc0VtcHR5KCkpIHtcbiAgICAgIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoYHNldEVkaXRvclN0YXRlOiB0aGUgZWRpdG9yIHN0YXRlIGlzIGVtcHR5LiBFbnN1cmUgdGhlIGVkaXRvciBzdGF0ZSdzIHJvb3Qgbm9kZSBuZXZlciBiZWNvbWVzIGVtcHR5LmApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZsdXNoUm9vdE11dGF0aW9ucyh0aGlzKTtcbiAgICBjb25zdCBwZW5kaW5nRWRpdG9yU3RhdGUgPSB0aGlzLl9wZW5kaW5nRWRpdG9yU3RhdGU7XG4gICAgY29uc3QgdGFncyA9IHRoaXMuX3VwZGF0ZVRhZ3M7XG4gICAgY29uc3QgdGFnID0gb3B0aW9ucyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50YWcgOiBudWxsO1xuXG4gICAgaWYgKHBlbmRpbmdFZGl0b3JTdGF0ZSAhPT0gbnVsbCAmJiAhcGVuZGluZ0VkaXRvclN0YXRlLmlzRW1wdHkoKSkge1xuICAgICAgaWYgKHRhZyAhPSBudWxsKSB7XG4gICAgICAgIHRhZ3MuYWRkKHRhZyk7XG4gICAgICB9XG5cbiAgICAgIGNvbW1pdFBlbmRpbmdVcGRhdGVzKHRoaXMpO1xuICAgIH1cblxuICAgIHRoaXMuX3BlbmRpbmdFZGl0b3JTdGF0ZSA9IGVkaXRvclN0YXRlO1xuICAgIHRoaXMuX2RpcnR5VHlwZSA9IEZVTExfUkVDT05DSUxFO1xuXG4gICAgdGhpcy5fZGlydHlFbGVtZW50cy5zZXQoJ3Jvb3QnLCBmYWxzZSk7XG5cbiAgICB0aGlzLl9jb21wb3NpdGlvbktleSA9IG51bGw7XG5cbiAgICBpZiAodGFnICE9IG51bGwpIHtcbiAgICAgIHRhZ3MuYWRkKHRhZyk7XG4gICAgfVxuXG4gICAgY29tbWl0UGVuZGluZ1VwZGF0ZXModGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIFBhcnNlcyBhIFNlcmlhbGl6ZWRFZGl0b3JTdGF0ZSAodXN1YWxseSBwcm9kdWNlZCBieSB7QGxpbmsgRWRpdG9yU3RhdGUudG9KU09OfSkgYW5kIHJldHVybnNcbiAgICogYW5kIEVkaXRvclN0YXRlIG9iamVjdCB0aGF0IGNhbiBiZSwgZm9yIGV4YW1wbGUsIHBhc3NlZCB0byB7QGxpbmsgTGV4aWNhbEVkaXRvci5zZXRFZGl0b3JTdGF0ZX0uIFR5cGljYWxseSxcbiAgICogZGVzZXJsaWF6YXRpb24gZnJvbSBKU09OIHN0b3JlZCBpbiBhIGRhdGFiYXNlIHVzZXMgdGhpcyBtZXRob2QuXG4gICAqIEBwYXJhbSBtYXliZVN0cmluZ2lmaWVkRWRpdG9yU3RhdGVcbiAgICogQHBhcmFtIHVwZGF0ZUZuXG4gICAqIEByZXR1cm5zXG4gICAqL1xuXG5cbiAgcGFyc2VFZGl0b3JTdGF0ZShtYXliZVN0cmluZ2lmaWVkRWRpdG9yU3RhdGUsIHVwZGF0ZUZuKSB7XG4gICAgY29uc3Qgc2VyaWFsaXplZEVkaXRvclN0YXRlID0gdHlwZW9mIG1heWJlU3RyaW5naWZpZWRFZGl0b3JTdGF0ZSA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKG1heWJlU3RyaW5naWZpZWRFZGl0b3JTdGF0ZSkgOiBtYXliZVN0cmluZ2lmaWVkRWRpdG9yU3RhdGU7XG4gICAgcmV0dXJuIHBhcnNlRWRpdG9yU3RhdGUoc2VyaWFsaXplZEVkaXRvclN0YXRlLCB0aGlzLCB1cGRhdGVGbik7XG4gIH1cbiAgLyoqXG4gICAqIEV4ZWN1dGVzIGFuIHVwZGF0ZSB0byB0aGUgZWRpdG9yIHN0YXRlLiBUaGUgdXBkYXRlRm4gY2FsbGJhY2sgaXMgdGhlIE9OTFkgcGxhY2VcbiAgICogd2hlcmUgTGV4aWNhbCBlZGl0b3Igc3RhdGUgY2FuIGJlIHNhZmVseSBtdXRhdGVkLlxuICAgKiBAcGFyYW0gdXBkYXRlRm4gLSBBIGZ1bmN0aW9uIHRoYXQgaGFzIGFjY2VzcyB0byB3cml0YWJsZSBlZGl0b3Igc3RhdGUuXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gQSBiYWcgb2Ygb3B0aW9ucyB0byBjb250cm9sIHRoZSBiZWhhdmlvciBvZiB0aGUgdXBkYXRlLlxuICAgKiBAcGFyYW0gb3B0aW9ucy5vblVwZGF0ZSAtIEEgZnVuY3Rpb24gdG8gcnVuIG9uY2UgdGhlIHVwZGF0ZSBpcyBjb21wbGV0ZS5cbiAgICogVXNlZnVsIGZvciBzeW5jaHJvbml6aW5nIHVwZGF0ZXMgaW4gc29tZSBjYXNlcy5cbiAgICogQHBhcmFtIG9wdGlvbnMuc2tpcFRyYW5zZm9ybXMgLSBTZXR0aW5nIHRoaXMgdG8gdHJ1ZSB3aWxsIHN1cHByZXNzIGFsbCBub2RlXG4gICAqIHRyYW5zZm9ybXMgZm9yIHRoaXMgdXBkYXRlIGN5Y2xlLlxuICAgKiBAcGFyYW0gb3B0aW9ucy50YWcgLSBBIHRhZyB0byBpZGVudGlmeSB0aGlzIHVwZGF0ZSwgaW4gYW4gdXBkYXRlIGxpc3RlbmVyLCBmb3IgaW5zdGFuY2UuXG4gICAqIFNvbWUgdGFncyBhcmUgcmVzZXJ2ZWQgYnkgdGhlIGNvcmUgYW5kIGNvbnRyb2wgdXBkYXRlIGJlaGF2aW9yIGluIGRpZmZlcmVudCB3YXlzLlxuICAgKiBAcGFyYW0gb3B0aW9ucy5kaXNjcmV0ZSAtIElmIHRydWUsIHByZXZlbnRzIHRoaXMgdXBkYXRlIGZyb20gYmVpbmcgYmF0Y2hlZCwgZm9yY2luZyBpdCB0b1xuICAgKiBydW4gc3luY2hyb25vdXNseS5cbiAgICovXG5cblxuICB1cGRhdGUodXBkYXRlRm4sIG9wdGlvbnMpIHtcbiAgICB1cGRhdGVFZGl0b3IodGhpcywgdXBkYXRlRm4sIG9wdGlvbnMpO1xuICB9XG4gIC8qKlxuICAgKiBGb2N1c2VzIHRoZSBlZGl0b3JcbiAgICogQHBhcmFtIGNhbGxiYWNrRm4gLSBBIGZ1bmN0aW9uIHRvIHJ1biBhZnRlciB0aGUgZWRpdG9yIGlzIGZvY3VzZWQuXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gQSBiYWcgb2Ygb3B0aW9uc1xuICAgKiBAcGFyYW0gb3B0aW9ucy5kZWZhdWx0U2VsZWN0aW9uIC0gV2hlcmUgdG8gbW92ZSBzZWxlY3Rpb24gd2hlbiB0aGUgZWRpdG9yIGlzXG4gICAqIGZvY3VzZWQuIENhbiBiZSByb290U3RhcnQsIHJvb3RFbmQsIG9yIHVuZGVmaW5lZC4gRGVmYXVsdHMgdG8gcm9vdEVuZC5cbiAgICovXG5cblxuICBmb2N1cyhjYWxsYmFja0ZuLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCByb290RWxlbWVudCA9IHRoaXMuX3Jvb3RFbGVtZW50O1xuXG4gICAgaWYgKHJvb3RFbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAvLyBUaGlzIGVuc3VyZXMgdGhhdCBpT1MgZG9lcyBub3QgdHJpZ2dlciBjYXBzIGxvY2sgdXBvbiBmb2N1c1xuICAgICAgcm9vdEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhdXRvY2FwaXRhbGl6ZScsICdvZmYnKTtcbiAgICAgIHVwZGF0ZUVkaXRvcih0aGlzLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9ICRnZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgY29uc3Qgcm9vdCA9ICRnZXRSb290KCk7XG5cbiAgICAgICAgaWYgKHNlbGVjdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgIC8vIE1hcmtpbmcgdGhlIHNlbGVjdGlvbiBkaXJ0eSB3aWxsIGZvcmNlIHRoZSBzZWxlY3Rpb24gYmFjayB0byBpdFxuICAgICAgICAgIHNlbGVjdGlvbi5kaXJ0eSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAocm9vdC5nZXRDaGlsZHJlblNpemUoKSAhPT0gMCkge1xuICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRTZWxlY3Rpb24gPT09ICdyb290U3RhcnQnKSB7XG4gICAgICAgICAgICByb290LnNlbGVjdFN0YXJ0KCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJvb3Quc2VsZWN0RW5kKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCB7XG4gICAgICAgIG9uVXBkYXRlOiAoKSA9PiB7XG4gICAgICAgICAgcm9vdEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhdXRvY2FwaXRhbGl6ZScpO1xuXG4gICAgICAgICAgaWYgKGNhbGxiYWNrRm4pIHtcbiAgICAgICAgICAgIGNhbGxiYWNrRm4oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pOyAvLyBJbiB0aGUgY2FzZSB3aGVyZSBvblVwZGF0ZSBkb2Vzbid0IGZpcmUgKGR1ZSB0byB0aGUgZm9jdXMgdXBkYXRlIG5vdFxuICAgICAgLy8gb2NjdXJpbmcpLlxuXG4gICAgICBpZiAodGhpcy5fcGVuZGluZ0VkaXRvclN0YXRlID09PSBudWxsKSB7XG4gICAgICAgIHJvb3RFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXV0b2NhcGl0YWxpemUnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZXMgZm9jdXMgZnJvbSB0aGUgZWRpdG9yLlxuICAgKi9cblxuXG4gIGJsdXIoKSB7XG4gICAgY29uc3Qgcm9vdEVsZW1lbnQgPSB0aGlzLl9yb290RWxlbWVudDtcblxuICAgIGlmIChyb290RWxlbWVudCAhPT0gbnVsbCkge1xuICAgICAgcm9vdEVsZW1lbnQuYmx1cigpO1xuICAgIH1cblxuICAgIGNvbnN0IGRvbVNlbGVjdGlvbiA9IGdldERPTVNlbGVjdGlvbih0aGlzLl93aW5kb3cpO1xuXG4gICAgaWYgKGRvbVNlbGVjdGlvbiAhPT0gbnVsbCkge1xuICAgICAgZG9tU2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBlZGl0b3IgaXMgZWRpdGFibGUsIGZhbHNlIG90aGVyd2lzZS5cbiAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgZWRpdG9yIGlzIGVkaXRhYmxlLCBmYWxzZSBvdGhlcndpc2UuXG4gICAqL1xuXG5cbiAgaXNFZGl0YWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZWRpdGFibGU7XG4gIH1cbiAgLyoqXG4gICAqIFNldHMgdGhlIGVkaXRhYmxlIHByb3BlcnR5IG9mIHRoZSBlZGl0b3IuIFdoZW4gZmFsc2UsIHRoZVxuICAgKiBlZGl0b3Igd2lsbCBub3QgbGlzdGVuIGZvciB1c2VyIGV2ZW50cyBvbiB0aGUgdW5kZXJsaW5nIGNvbnRlbnRlZGl0YWJsZS5cbiAgICogQHBhcmFtIGVkaXRhYmxlIC0gdGhlIHZhbHVlIHRvIHNldCB0aGUgZWRpdGFibGUgbW9kZSB0by5cbiAgICovXG5cblxuICBzZXRFZGl0YWJsZShlZGl0YWJsZSkge1xuICAgIGlmICh0aGlzLl9lZGl0YWJsZSAhPT0gZWRpdGFibGUpIHtcbiAgICAgIHRoaXMuX2VkaXRhYmxlID0gZWRpdGFibGU7XG4gICAgICB0cmlnZ2VyTGlzdGVuZXJzKCdlZGl0YWJsZScsIHRoaXMsIHRydWUsIGVkaXRhYmxlKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSBqYXZhc2NyaXB0IG9iamVjdCBOT1QgYSBKU09OIHN0cmluZy5cbiAgICogWW91IHN0aWxsIG11c3QgY2FsbCBKU09OLnN0cmluZ2lmeSAob3Igc29tZXRoaW5nIGVsc2UpIHRvIHR1cm4gdGhlXG4gICAqIHN0YXRlIGludG8gYSBzdHJpbmcgeW91IGNhbiB0cmFuc2ZlciBvdmVyIHRoZSB3aXJlIGFuZCBzdG9yZSBpbiBhIGRhdGFiYXNlLlxuICAgKlxuICAgKiBTZWUge0BsaW5rIExleGljYWxOb2RlLmV4cG9ydEpTT059XG4gICAqXG4gICAqIEByZXR1cm5zIEEgSlNPTi1zZXJpYWxpemFibGUgamF2YXNjcmlwdCBvYmplY3RcbiAgICovXG5cblxuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVkaXRvclN0YXRlOiB0aGlzLl9lZGl0b3JTdGF0ZS50b0pTT04oKVxuICAgIH07XG4gIH1cblxufVxuXG4vKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5cbi8qKiBAbm9Jbmhlcml0RG9jICovXG5jbGFzcyBERVBSRUNBVEVEX0dyaWRDZWxsTm9kZSBleHRlbmRzIEVsZW1lbnROb2RlIHtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBjb25zdHJ1Y3Rvcihjb2xTcGFuLCBrZXkpIHtcbiAgICBzdXBlcihrZXkpO1xuICAgIHRoaXMuX19jb2xTcGFuID0gY29sU3BhbjtcbiAgICB0aGlzLl9fcm93U3BhbiA9IDE7XG4gIH1cblxuICBleHBvcnRKU09OKCkge1xuICAgIHJldHVybiB7IC4uLnN1cGVyLmV4cG9ydEpTT04oKSxcbiAgICAgIGNvbFNwYW46IHRoaXMuX19jb2xTcGFuXG4gICAgfTtcbiAgfVxuXG4gIHNldENvbFNwYW4oY29sU3Bhbikge1xuICAgIHRoaXMuZ2V0V3JpdGFibGUoKS5fX2NvbFNwYW4gPSBjb2xTcGFuO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgc2V0Um93U3Bhbihyb3dTcGFuKSB7XG4gICAgdGhpcy5nZXRXcml0YWJsZSgpLl9fcm93U3BhbiA9IHJvd1NwYW47XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxufVxuZnVuY3Rpb24gREVQUkVDQVRFRF8kaXNHcmlkQ2VsbE5vZGUobm9kZSkge1xuICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIERFUFJFQ0FURURfR3JpZENlbGxOb2RlO1xufVxuXG4vKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5jbGFzcyBERVBSRUNBVEVEX0dyaWROb2RlIGV4dGVuZHMgRWxlbWVudE5vZGUge31cbmZ1bmN0aW9uIERFUFJFQ0FURURfJGlzR3JpZE5vZGUobm9kZSkge1xuICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIERFUFJFQ0FURURfR3JpZE5vZGU7XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cbmNsYXNzIERFUFJFQ0FURURfR3JpZFJvd05vZGUgZXh0ZW5kcyBFbGVtZW50Tm9kZSB7fVxuZnVuY3Rpb24gREVQUkVDQVRFRF8kaXNHcmlkUm93Tm9kZShub2RlKSB7XG4gIHJldHVybiBub2RlIGluc3RhbmNlb2YgREVQUkVDQVRFRF9HcmlkUm93Tm9kZTtcbn1cblxuZXhwb3J0cy4kYWRkVXBkYXRlVGFnID0gJGFkZFVwZGF0ZVRhZztcbmV4cG9ydHMuJGFwcGx5Tm9kZVJlcGxhY2VtZW50ID0gJGFwcGx5Tm9kZVJlcGxhY2VtZW50O1xuZXhwb3J0cy4kY29weU5vZGUgPSAkY29weU5vZGU7XG5leHBvcnRzLiRjcmVhdGVMaW5lQnJlYWtOb2RlID0gJGNyZWF0ZUxpbmVCcmVha05vZGU7XG5leHBvcnRzLiRjcmVhdGVOb2RlU2VsZWN0aW9uID0gJGNyZWF0ZU5vZGVTZWxlY3Rpb247XG5leHBvcnRzLiRjcmVhdGVQYXJhZ3JhcGhOb2RlID0gJGNyZWF0ZVBhcmFncmFwaE5vZGU7XG5leHBvcnRzLiRjcmVhdGVSYW5nZVNlbGVjdGlvbiA9ICRjcmVhdGVSYW5nZVNlbGVjdGlvbjtcbmV4cG9ydHMuJGNyZWF0ZVRleHROb2RlID0gJGNyZWF0ZVRleHROb2RlO1xuZXhwb3J0cy4kZ2V0QWRqYWNlbnROb2RlID0gJGdldEFkamFjZW50Tm9kZTtcbmV4cG9ydHMuJGdldE5lYXJlc3ROb2RlRnJvbURPTU5vZGUgPSAkZ2V0TmVhcmVzdE5vZGVGcm9tRE9NTm9kZTtcbmV4cG9ydHMuJGdldE5lYXJlc3RSb290T3JTaGFkb3dSb290ID0gJGdldE5lYXJlc3RSb290T3JTaGFkb3dSb290O1xuZXhwb3J0cy4kZ2V0Tm9kZUJ5S2V5ID0gJGdldE5vZGVCeUtleTtcbmV4cG9ydHMuJGdldFByZXZpb3VzU2VsZWN0aW9uID0gJGdldFByZXZpb3VzU2VsZWN0aW9uO1xuZXhwb3J0cy4kZ2V0Um9vdCA9ICRnZXRSb290O1xuZXhwb3J0cy4kZ2V0U2VsZWN0aW9uID0gJGdldFNlbGVjdGlvbjtcbmV4cG9ydHMuJGdldFRleHRDb250ZW50ID0gJGdldFRleHRDb250ZW50O1xuZXhwb3J0cy4kaGFzQW5jZXN0b3IgPSAkaGFzQW5jZXN0b3I7XG5leHBvcnRzLiRpbnNlcnROb2RlcyA9ICRpbnNlcnROb2RlcztcbmV4cG9ydHMuJGlzRGVjb3JhdG9yTm9kZSA9ICRpc0RlY29yYXRvck5vZGU7XG5leHBvcnRzLiRpc0VsZW1lbnROb2RlID0gJGlzRWxlbWVudE5vZGU7XG5leHBvcnRzLiRpc0lubGluZUVsZW1lbnRPckRlY29yYXRvck5vZGUgPSAkaXNJbmxpbmVFbGVtZW50T3JEZWNvcmF0b3JOb2RlO1xuZXhwb3J0cy4kaXNMZWFmTm9kZSA9ICRpc0xlYWZOb2RlO1xuZXhwb3J0cy4kaXNMaW5lQnJlYWtOb2RlID0gJGlzTGluZUJyZWFrTm9kZTtcbmV4cG9ydHMuJGlzTm9kZVNlbGVjdGlvbiA9ICRpc05vZGVTZWxlY3Rpb247XG5leHBvcnRzLiRpc1BhcmFncmFwaE5vZGUgPSAkaXNQYXJhZ3JhcGhOb2RlO1xuZXhwb3J0cy4kaXNSYW5nZVNlbGVjdGlvbiA9ICRpc1JhbmdlU2VsZWN0aW9uO1xuZXhwb3J0cy4kaXNSb290Tm9kZSA9ICRpc1Jvb3ROb2RlO1xuZXhwb3J0cy4kaXNSb290T3JTaGFkb3dSb290ID0gJGlzUm9vdE9yU2hhZG93Um9vdDtcbmV4cG9ydHMuJGlzVGV4dE5vZGUgPSAkaXNUZXh0Tm9kZTtcbmV4cG9ydHMuJG5vZGVzT2ZUeXBlID0gJG5vZGVzT2ZUeXBlO1xuZXhwb3J0cy4kbm9ybWFsaXplU2VsZWN0aW9uX19FWFBFUklNRU5UQUwgPSAkbm9ybWFsaXplU2VsZWN0aW9uO1xuZXhwb3J0cy4kcGFyc2VTZXJpYWxpemVkTm9kZSA9ICRwYXJzZVNlcmlhbGl6ZWROb2RlO1xuZXhwb3J0cy4kc2V0Q29tcG9zaXRpb25LZXkgPSAkc2V0Q29tcG9zaXRpb25LZXk7XG5leHBvcnRzLiRzZXRTZWxlY3Rpb24gPSAkc2V0U2VsZWN0aW9uO1xuZXhwb3J0cy4kc3BsaXROb2RlID0gJHNwbGl0Tm9kZTtcbmV4cG9ydHMuQkxVUl9DT01NQU5EID0gQkxVUl9DT01NQU5EO1xuZXhwb3J0cy5DQU5fUkVET19DT01NQU5EID0gQ0FOX1JFRE9fQ09NTUFORDtcbmV4cG9ydHMuQ0FOX1VORE9fQ09NTUFORCA9IENBTl9VTkRPX0NPTU1BTkQ7XG5leHBvcnRzLkNMRUFSX0VESVRPUl9DT01NQU5EID0gQ0xFQVJfRURJVE9SX0NPTU1BTkQ7XG5leHBvcnRzLkNMRUFSX0hJU1RPUllfQ09NTUFORCA9IENMRUFSX0hJU1RPUllfQ09NTUFORDtcbmV4cG9ydHMuQ0xJQ0tfQ09NTUFORCA9IENMSUNLX0NPTU1BTkQ7XG5leHBvcnRzLkNPTU1BTkRfUFJJT1JJVFlfQ1JJVElDQUwgPSBDT01NQU5EX1BSSU9SSVRZX0NSSVRJQ0FMO1xuZXhwb3J0cy5DT01NQU5EX1BSSU9SSVRZX0VESVRPUiA9IENPTU1BTkRfUFJJT1JJVFlfRURJVE9SO1xuZXhwb3J0cy5DT01NQU5EX1BSSU9SSVRZX0hJR0ggPSBDT01NQU5EX1BSSU9SSVRZX0hJR0g7XG5leHBvcnRzLkNPTU1BTkRfUFJJT1JJVFlfTE9XID0gQ09NTUFORF9QUklPUklUWV9MT1c7XG5leHBvcnRzLkNPTU1BTkRfUFJJT1JJVFlfTk9STUFMID0gQ09NTUFORF9QUklPUklUWV9OT1JNQUw7XG5leHBvcnRzLkNPTlRST0xMRURfVEVYVF9JTlNFUlRJT05fQ09NTUFORCA9IENPTlRST0xMRURfVEVYVF9JTlNFUlRJT05fQ09NTUFORDtcbmV4cG9ydHMuQ09QWV9DT01NQU5EID0gQ09QWV9DT01NQU5EO1xuZXhwb3J0cy5DVVRfQ09NTUFORCA9IENVVF9DT01NQU5EO1xuZXhwb3J0cy5ERUxFVEVfQ0hBUkFDVEVSX0NPTU1BTkQgPSBERUxFVEVfQ0hBUkFDVEVSX0NPTU1BTkQ7XG5leHBvcnRzLkRFTEVURV9MSU5FX0NPTU1BTkQgPSBERUxFVEVfTElORV9DT01NQU5EO1xuZXhwb3J0cy5ERUxFVEVfV09SRF9DT01NQU5EID0gREVMRVRFX1dPUkRfQ09NTUFORDtcbmV4cG9ydHMuREVQUkVDQVRFRF8kY3JlYXRlR3JpZFNlbGVjdGlvbiA9IERFUFJFQ0FURURfJGNyZWF0ZUdyaWRTZWxlY3Rpb247XG5leHBvcnRzLkRFUFJFQ0FURURfJGlzR3JpZENlbGxOb2RlID0gREVQUkVDQVRFRF8kaXNHcmlkQ2VsbE5vZGU7XG5leHBvcnRzLkRFUFJFQ0FURURfJGlzR3JpZE5vZGUgPSBERVBSRUNBVEVEXyRpc0dyaWROb2RlO1xuZXhwb3J0cy5ERVBSRUNBVEVEXyRpc0dyaWRSb3dOb2RlID0gREVQUkVDQVRFRF8kaXNHcmlkUm93Tm9kZTtcbmV4cG9ydHMuREVQUkVDQVRFRF8kaXNHcmlkU2VsZWN0aW9uID0gREVQUkVDQVRFRF8kaXNHcmlkU2VsZWN0aW9uO1xuZXhwb3J0cy5ERVBSRUNBVEVEX0dyaWRDZWxsTm9kZSA9IERFUFJFQ0FURURfR3JpZENlbGxOb2RlO1xuZXhwb3J0cy5ERVBSRUNBVEVEX0dyaWROb2RlID0gREVQUkVDQVRFRF9HcmlkTm9kZTtcbmV4cG9ydHMuREVQUkVDQVRFRF9HcmlkUm93Tm9kZSA9IERFUFJFQ0FURURfR3JpZFJvd05vZGU7XG5leHBvcnRzLkRSQUdFTkRfQ09NTUFORCA9IERSQUdFTkRfQ09NTUFORDtcbmV4cG9ydHMuRFJBR09WRVJfQ09NTUFORCA9IERSQUdPVkVSX0NPTU1BTkQ7XG5leHBvcnRzLkRSQUdTVEFSVF9DT01NQU5EID0gRFJBR1NUQVJUX0NPTU1BTkQ7XG5leHBvcnRzLkRST1BfQ09NTUFORCA9IERST1BfQ09NTUFORDtcbmV4cG9ydHMuRGVjb3JhdG9yTm9kZSA9IERlY29yYXRvck5vZGU7XG5leHBvcnRzLkVsZW1lbnROb2RlID0gRWxlbWVudE5vZGU7XG5leHBvcnRzLkZPQ1VTX0NPTU1BTkQgPSBGT0NVU19DT01NQU5EO1xuZXhwb3J0cy5GT1JNQVRfRUxFTUVOVF9DT01NQU5EID0gRk9STUFUX0VMRU1FTlRfQ09NTUFORDtcbmV4cG9ydHMuRk9STUFUX1RFWFRfQ09NTUFORCA9IEZPUk1BVF9URVhUX0NPTU1BTkQ7XG5leHBvcnRzLklOREVOVF9DT05URU5UX0NPTU1BTkQgPSBJTkRFTlRfQ09OVEVOVF9DT01NQU5EO1xuZXhwb3J0cy5JTlNFUlRfTElORV9CUkVBS19DT01NQU5EID0gSU5TRVJUX0xJTkVfQlJFQUtfQ09NTUFORDtcbmV4cG9ydHMuSU5TRVJUX1BBUkFHUkFQSF9DT01NQU5EID0gSU5TRVJUX1BBUkFHUkFQSF9DT01NQU5EO1xuZXhwb3J0cy5LRVlfQVJST1dfRE9XTl9DT01NQU5EID0gS0VZX0FSUk9XX0RPV05fQ09NTUFORDtcbmV4cG9ydHMuS0VZX0FSUk9XX0xFRlRfQ09NTUFORCA9IEtFWV9BUlJPV19MRUZUX0NPTU1BTkQ7XG5leHBvcnRzLktFWV9BUlJPV19SSUdIVF9DT01NQU5EID0gS0VZX0FSUk9XX1JJR0hUX0NPTU1BTkQ7XG5leHBvcnRzLktFWV9BUlJPV19VUF9DT01NQU5EID0gS0VZX0FSUk9XX1VQX0NPTU1BTkQ7XG5leHBvcnRzLktFWV9CQUNLU1BBQ0VfQ09NTUFORCA9IEtFWV9CQUNLU1BBQ0VfQ09NTUFORDtcbmV4cG9ydHMuS0VZX0RFTEVURV9DT01NQU5EID0gS0VZX0RFTEVURV9DT01NQU5EO1xuZXhwb3J0cy5LRVlfRE9XTl9DT01NQU5EID0gS0VZX0RPV05fQ09NTUFORDtcbmV4cG9ydHMuS0VZX0VOVEVSX0NPTU1BTkQgPSBLRVlfRU5URVJfQ09NTUFORDtcbmV4cG9ydHMuS0VZX0VTQ0FQRV9DT01NQU5EID0gS0VZX0VTQ0FQRV9DT01NQU5EO1xuZXhwb3J0cy5LRVlfTU9ESUZJRVJfQ09NTUFORCA9IEtFWV9NT0RJRklFUl9DT01NQU5EO1xuZXhwb3J0cy5LRVlfU1BBQ0VfQ09NTUFORCA9IEtFWV9TUEFDRV9DT01NQU5EO1xuZXhwb3J0cy5LRVlfVEFCX0NPTU1BTkQgPSBLRVlfVEFCX0NPTU1BTkQ7XG5leHBvcnRzLkxpbmVCcmVha05vZGUgPSBMaW5lQnJlYWtOb2RlO1xuZXhwb3J0cy5NT1ZFX1RPX0VORCA9IE1PVkVfVE9fRU5EO1xuZXhwb3J0cy5NT1ZFX1RPX1NUQVJUID0gTU9WRV9UT19TVEFSVDtcbmV4cG9ydHMuT1VUREVOVF9DT05URU5UX0NPTU1BTkQgPSBPVVRERU5UX0NPTlRFTlRfQ09NTUFORDtcbmV4cG9ydHMuUEFTVEVfQ09NTUFORCA9IFBBU1RFX0NPTU1BTkQ7XG5leHBvcnRzLlBhcmFncmFwaE5vZGUgPSBQYXJhZ3JhcGhOb2RlO1xuZXhwb3J0cy5SRURPX0NPTU1BTkQgPSBSRURPX0NPTU1BTkQ7XG5leHBvcnRzLlJFTU9WRV9URVhUX0NPTU1BTkQgPSBSRU1PVkVfVEVYVF9DT01NQU5EO1xuZXhwb3J0cy5Sb290Tm9kZSA9IFJvb3ROb2RlO1xuZXhwb3J0cy5TRUxFQ1RJT05fQ0hBTkdFX0NPTU1BTkQgPSBTRUxFQ1RJT05fQ0hBTkdFX0NPTU1BTkQ7XG5leHBvcnRzLlRleHROb2RlID0gVGV4dE5vZGU7XG5leHBvcnRzLlVORE9fQ09NTUFORCA9IFVORE9fQ09NTUFORDtcbmV4cG9ydHMuY3JlYXRlQ29tbWFuZCA9IGNyZWF0ZUNvbW1hbmQ7XG5leHBvcnRzLmNyZWF0ZUVkaXRvciA9IGNyZWF0ZUVkaXRvcjtcbmV4cG9ydHMuaXNTZWxlY3Rpb25XaXRoaW5FZGl0b3IgPSBpc1NlbGVjdGlvbldpdGhpbkVkaXRvcjtcbiJdLCJuYW1lcyI6W10sInZlcnNpb24iOjMsImZpbGUiOiIuL2Rpc3QvTGV4aWNhbC51bWQucHJvZC5qcy5tYXAifQ=="],"names":[],"version":3,"file":"Lexical.umd.prod.js.map"}