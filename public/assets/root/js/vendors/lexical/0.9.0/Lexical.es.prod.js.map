{"mappings":"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C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,EAC5C,GAA4C,EAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,EAC5C,GAA4C,EAC5C,GAA4C,EAC5C,GAA4C,EAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,EAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA2C,GAC3C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA2C,GAC3C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA2C,GAC3C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA2C,GAC3C,GAA4C,GAC5C,GAA2C,GAC3C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,GAC5C,GAA4C,EAC5C,GAA4C,GAC5C,GAA4C","sources":["dist/Lexical.es.prod.js"],"sourcesContent":["function $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\nvar $ed3b74ccfa001938$exports = {};\n\n$parcel$export($ed3b74ccfa001938$exports, \"$addUpdateTag\", function () { return $ed3b74ccfa001938$export$24cab2f466b76c04; }, function (v) { return $ed3b74ccfa001938$export$24cab2f466b76c04 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$applyNodeReplacement\", function () { return $ed3b74ccfa001938$export$2f5beb31df92ea57; }, function (v) { return $ed3b74ccfa001938$export$2f5beb31df92ea57 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$copyNode\", function () { return $ed3b74ccfa001938$export$def73b17b22438e7; }, function (v) { return $ed3b74ccfa001938$export$def73b17b22438e7 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$createLineBreakNode\", function () { return $ed3b74ccfa001938$export$4ccaf7d0d16ab4c; }, function (v) { return $ed3b74ccfa001938$export$4ccaf7d0d16ab4c = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$createNodeSelection\", function () { return $ed3b74ccfa001938$export$f8cd0c3f35d1a61c; }, function (v) { return $ed3b74ccfa001938$export$f8cd0c3f35d1a61c = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$createParagraphNode\", function () { return $ed3b74ccfa001938$export$7f0c05ffb7ced90d; }, function (v) { return $ed3b74ccfa001938$export$7f0c05ffb7ced90d = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$createRangeSelection\", function () { return $ed3b74ccfa001938$export$1ccc217b9831b072; }, function (v) { return $ed3b74ccfa001938$export$1ccc217b9831b072 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$createTextNode\", function () { return $ed3b74ccfa001938$export$2785f39dcdec0078; }, function (v) { return $ed3b74ccfa001938$export$2785f39dcdec0078 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$getAdjacentNode\", function () { return $ed3b74ccfa001938$export$c4b907be1879d8c1; }, function (v) { return $ed3b74ccfa001938$export$c4b907be1879d8c1 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$getNearestNodeFromDOMNode\", function () { return $ed3b74ccfa001938$export$fef265f0d2fcffdd; }, function (v) { return $ed3b74ccfa001938$export$fef265f0d2fcffdd = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$getNearestRootOrShadowRoot\", function () { return $ed3b74ccfa001938$export$6f13c476561e4734; }, function (v) { return $ed3b74ccfa001938$export$6f13c476561e4734 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$getNodeByKey\", function () { return $ed3b74ccfa001938$export$e725f93d4d48c6d8; }, function (v) { return $ed3b74ccfa001938$export$e725f93d4d48c6d8 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$getPreviousSelection\", function () { return $ed3b74ccfa001938$export$846e9407a8b5d98c; }, function (v) { return $ed3b74ccfa001938$export$846e9407a8b5d98c = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$getRoot\", function () { return $ed3b74ccfa001938$export$8d83ea843c4eea9a; }, function (v) { return $ed3b74ccfa001938$export$8d83ea843c4eea9a = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$getSelection\", function () { return $ed3b74ccfa001938$export$63a3201b3a5c7d90; }, function (v) { return $ed3b74ccfa001938$export$63a3201b3a5c7d90 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$getTextContent\", function () { return $ed3b74ccfa001938$export$2d96f9a07231d1b9; }, function (v) { return $ed3b74ccfa001938$export$2d96f9a07231d1b9 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$hasAncestor\", function () { return $ed3b74ccfa001938$export$e3d4b782f65c81f1; }, function (v) { return $ed3b74ccfa001938$export$e3d4b782f65c81f1 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$insertNodes\", function () { return $ed3b74ccfa001938$export$d773017360b45449; }, function (v) { return $ed3b74ccfa001938$export$d773017360b45449 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$isDecoratorNode\", function () { return $ed3b74ccfa001938$export$60aa03725ce41b1c; }, function (v) { return $ed3b74ccfa001938$export$60aa03725ce41b1c = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$isElementNode\", function () { return $ed3b74ccfa001938$export$923a058ef54437a4; }, function (v) { return $ed3b74ccfa001938$export$923a058ef54437a4 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$isInlineElementOrDecoratorNode\", function () { return $ed3b74ccfa001938$export$a78813a4e8e8b9dd; }, function (v) { return $ed3b74ccfa001938$export$a78813a4e8e8b9dd = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$isLeafNode\", function () { return $ed3b74ccfa001938$export$8d016e0592201ace; }, function (v) { return $ed3b74ccfa001938$export$8d016e0592201ace = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$isLineBreakNode\", function () { return $ed3b74ccfa001938$export$b16330e40aa25c4e; }, function (v) { return $ed3b74ccfa001938$export$b16330e40aa25c4e = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$isNodeSelection\", function () { return $ed3b74ccfa001938$export$7257e4181651a7c3; }, function (v) { return $ed3b74ccfa001938$export$7257e4181651a7c3 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$isParagraphNode\", function () { return $ed3b74ccfa001938$export$1fdda795300c79c6; }, function (v) { return $ed3b74ccfa001938$export$1fdda795300c79c6 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$isRangeSelection\", function () { return $ed3b74ccfa001938$export$181b63acea8a0224; }, function (v) { return $ed3b74ccfa001938$export$181b63acea8a0224 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$isRootNode\", function () { return $ed3b74ccfa001938$export$5b29ca560c2fedab; }, function (v) { return $ed3b74ccfa001938$export$5b29ca560c2fedab = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$isRootOrShadowRoot\", function () { return $ed3b74ccfa001938$export$6f851a24c61146af; }, function (v) { return $ed3b74ccfa001938$export$6f851a24c61146af = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$isTextNode\", function () { return $ed3b74ccfa001938$export$471953706258be2b; }, function (v) { return $ed3b74ccfa001938$export$471953706258be2b = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$nodesOfType\", function () { return $ed3b74ccfa001938$export$ac6fed8d7d40e66c; }, function (v) { return $ed3b74ccfa001938$export$ac6fed8d7d40e66c = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$normalizeSelection__EXPERIMENTAL\", function () { return $ed3b74ccfa001938$export$db10bc6ba67ffcb5; }, function (v) { return $ed3b74ccfa001938$export$db10bc6ba67ffcb5 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$parseSerializedNode\", function () { return $ed3b74ccfa001938$export$e1d3a194df5be556; }, function (v) { return $ed3b74ccfa001938$export$e1d3a194df5be556 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$setCompositionKey\", function () { return $ed3b74ccfa001938$export$ea25f5ef71f2d042; }, function (v) { return $ed3b74ccfa001938$export$ea25f5ef71f2d042 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$setSelection\", function () { return $ed3b74ccfa001938$export$2aad78c37810bca9; }, function (v) { return $ed3b74ccfa001938$export$2aad78c37810bca9 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"$splitNode\", function () { return $ed3b74ccfa001938$export$cc2d53c74c1fb2b2; }, function (v) { return $ed3b74ccfa001938$export$cc2d53c74c1fb2b2 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"BLUR_COMMAND\", function () { return $ed3b74ccfa001938$export$4b6d457d076906ac; }, function (v) { return $ed3b74ccfa001938$export$4b6d457d076906ac = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"CAN_REDO_COMMAND\", function () { return $ed3b74ccfa001938$export$e36aacf84f559bb3; }, function (v) { return $ed3b74ccfa001938$export$e36aacf84f559bb3 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"CAN_UNDO_COMMAND\", function () { return $ed3b74ccfa001938$export$9fd9dd31dd6ebdf5; }, function (v) { return $ed3b74ccfa001938$export$9fd9dd31dd6ebdf5 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"CLEAR_EDITOR_COMMAND\", function () { return $ed3b74ccfa001938$export$4926ce1a5702fdc7; }, function (v) { return $ed3b74ccfa001938$export$4926ce1a5702fdc7 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"CLEAR_HISTORY_COMMAND\", function () { return $ed3b74ccfa001938$export$d3f69a65bbe7edc; }, function (v) { return $ed3b74ccfa001938$export$d3f69a65bbe7edc = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"CLICK_COMMAND\", function () { return $ed3b74ccfa001938$export$c1a2de6c823e5f82; }, function (v) { return $ed3b74ccfa001938$export$c1a2de6c823e5f82 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"COMMAND_PRIORITY_CRITICAL\", function () { return $ed3b74ccfa001938$export$6afdf194f304e546; }, function (v) { return $ed3b74ccfa001938$export$6afdf194f304e546 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"COMMAND_PRIORITY_EDITOR\", function () { return $ed3b74ccfa001938$export$11c61e12af5e1f41; }, function (v) { return $ed3b74ccfa001938$export$11c61e12af5e1f41 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"COMMAND_PRIORITY_HIGH\", function () { return $ed3b74ccfa001938$export$e8fb7042985cd2e9; }, function (v) { return $ed3b74ccfa001938$export$e8fb7042985cd2e9 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"COMMAND_PRIORITY_LOW\", function () { return $ed3b74ccfa001938$export$1d1358fe8b5bfab4; }, function (v) { return $ed3b74ccfa001938$export$1d1358fe8b5bfab4 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"COMMAND_PRIORITY_NORMAL\", function () { return $ed3b74ccfa001938$export$7bb13e375de35064; }, function (v) { return $ed3b74ccfa001938$export$7bb13e375de35064 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"CONTROLLED_TEXT_INSERTION_COMMAND\", function () { return $ed3b74ccfa001938$export$6f67c758bb657857; }, function (v) { return $ed3b74ccfa001938$export$6f67c758bb657857 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"COPY_COMMAND\", function () { return $ed3b74ccfa001938$export$3435fcfb1f59ef96; }, function (v) { return $ed3b74ccfa001938$export$3435fcfb1f59ef96 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"CUT_COMMAND\", function () { return $ed3b74ccfa001938$export$4dc8a35a083beec4; }, function (v) { return $ed3b74ccfa001938$export$4dc8a35a083beec4 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"DELETE_CHARACTER_COMMAND\", function () { return $ed3b74ccfa001938$export$35595bf6d7e36fd5; }, function (v) { return $ed3b74ccfa001938$export$35595bf6d7e36fd5 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"DELETE_LINE_COMMAND\", function () { return $ed3b74ccfa001938$export$d77fad8fb8747fd; }, function (v) { return $ed3b74ccfa001938$export$d77fad8fb8747fd = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"DELETE_WORD_COMMAND\", function () { return $ed3b74ccfa001938$export$8e315b175631384c; }, function (v) { return $ed3b74ccfa001938$export$8e315b175631384c = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"DEPRECATED_$createGridSelection\", function () { return $ed3b74ccfa001938$export$3c62f6ea1bcc0126; }, function (v) { return $ed3b74ccfa001938$export$3c62f6ea1bcc0126 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"DEPRECATED_$isGridCellNode\", function () { return $ed3b74ccfa001938$export$512956df40f3b40e; }, function (v) { return $ed3b74ccfa001938$export$512956df40f3b40e = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"DEPRECATED_$isGridNode\", function () { return $ed3b74ccfa001938$export$5f4fd2bb79122677; }, function (v) { return $ed3b74ccfa001938$export$5f4fd2bb79122677 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"DEPRECATED_$isGridRowNode\", function () { return $ed3b74ccfa001938$export$6409391dce4c0f48; }, function (v) { return $ed3b74ccfa001938$export$6409391dce4c0f48 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"DEPRECATED_$isGridSelection\", function () { return $ed3b74ccfa001938$export$d3f36a5fb5c9efe5; }, function (v) { return $ed3b74ccfa001938$export$d3f36a5fb5c9efe5 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"DEPRECATED_GridCellNode\", function () { return $ed3b74ccfa001938$export$e284ef4eccc325c5; }, function (v) { return $ed3b74ccfa001938$export$e284ef4eccc325c5 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"DEPRECATED_GridNode\", function () { return $ed3b74ccfa001938$export$5627752ddf7eed41; }, function (v) { return $ed3b74ccfa001938$export$5627752ddf7eed41 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"DEPRECATED_GridRowNode\", function () { return $ed3b74ccfa001938$export$8c09d9a078ea3c2f; }, function (v) { return $ed3b74ccfa001938$export$8c09d9a078ea3c2f = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"DRAGEND_COMMAND\", function () { return $ed3b74ccfa001938$export$ffbd838cf75d7d8e; }, function (v) { return $ed3b74ccfa001938$export$ffbd838cf75d7d8e = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"DRAGOVER_COMMAND\", function () { return $ed3b74ccfa001938$export$b62c1cce98fa7223; }, function (v) { return $ed3b74ccfa001938$export$b62c1cce98fa7223 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"DRAGSTART_COMMAND\", function () { return $ed3b74ccfa001938$export$2e0fd45fde1da719; }, function (v) { return $ed3b74ccfa001938$export$2e0fd45fde1da719 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"DROP_COMMAND\", function () { return $ed3b74ccfa001938$export$eac1e4b16b80d3ea; }, function (v) { return $ed3b74ccfa001938$export$eac1e4b16b80d3ea = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"DecoratorNode\", function () { return $ed3b74ccfa001938$export$8244b9efe04488e; }, function (v) { return $ed3b74ccfa001938$export$8244b9efe04488e = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"ElementNode\", function () { return $ed3b74ccfa001938$export$dc064fe9e59310fd; }, function (v) { return $ed3b74ccfa001938$export$dc064fe9e59310fd = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"FOCUS_COMMAND\", function () { return $ed3b74ccfa001938$export$cafe35f35e77bf56; }, function (v) { return $ed3b74ccfa001938$export$cafe35f35e77bf56 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"FORMAT_ELEMENT_COMMAND\", function () { return $ed3b74ccfa001938$export$d394dc6514823b18; }, function (v) { return $ed3b74ccfa001938$export$d394dc6514823b18 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"FORMAT_TEXT_COMMAND\", function () { return $ed3b74ccfa001938$export$85443a1a9543f043; }, function (v) { return $ed3b74ccfa001938$export$85443a1a9543f043 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"INDENT_CONTENT_COMMAND\", function () { return $ed3b74ccfa001938$export$2f74f6a2d927e6bd; }, function (v) { return $ed3b74ccfa001938$export$2f74f6a2d927e6bd = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"INSERT_LINE_BREAK_COMMAND\", function () { return $ed3b74ccfa001938$export$64e35ce26e025724; }, function (v) { return $ed3b74ccfa001938$export$64e35ce26e025724 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"INSERT_PARAGRAPH_COMMAND\", function () { return $ed3b74ccfa001938$export$24f4fea65b096b4; }, function (v) { return $ed3b74ccfa001938$export$24f4fea65b096b4 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"KEY_ARROW_DOWN_COMMAND\", function () { return $ed3b74ccfa001938$export$baa60daa2ca402b3; }, function (v) { return $ed3b74ccfa001938$export$baa60daa2ca402b3 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"KEY_ARROW_LEFT_COMMAND\", function () { return $ed3b74ccfa001938$export$7525f8f8ab44508; }, function (v) { return $ed3b74ccfa001938$export$7525f8f8ab44508 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"KEY_ARROW_RIGHT_COMMAND\", function () { return $ed3b74ccfa001938$export$217ec2281ac1c53b; }, function (v) { return $ed3b74ccfa001938$export$217ec2281ac1c53b = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"KEY_ARROW_UP_COMMAND\", function () { return $ed3b74ccfa001938$export$7833c2a33ae81d3d; }, function (v) { return $ed3b74ccfa001938$export$7833c2a33ae81d3d = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"KEY_BACKSPACE_COMMAND\", function () { return $ed3b74ccfa001938$export$24bbba9bfa830f78; }, function (v) { return $ed3b74ccfa001938$export$24bbba9bfa830f78 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"KEY_DELETE_COMMAND\", function () { return $ed3b74ccfa001938$export$13a0e72b5c0146bb; }, function (v) { return $ed3b74ccfa001938$export$13a0e72b5c0146bb = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"KEY_DOWN_COMMAND\", function () { return $ed3b74ccfa001938$export$61973214e0e18936; }, function (v) { return $ed3b74ccfa001938$export$61973214e0e18936 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"KEY_ENTER_COMMAND\", function () { return $ed3b74ccfa001938$export$2cdb7cdd6fccb293; }, function (v) { return $ed3b74ccfa001938$export$2cdb7cdd6fccb293 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"KEY_ESCAPE_COMMAND\", function () { return $ed3b74ccfa001938$export$53589e422a755d59; }, function (v) { return $ed3b74ccfa001938$export$53589e422a755d59 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"KEY_MODIFIER_COMMAND\", function () { return $ed3b74ccfa001938$export$452548a3c1874d61; }, function (v) { return $ed3b74ccfa001938$export$452548a3c1874d61 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"KEY_SPACE_COMMAND\", function () { return $ed3b74ccfa001938$export$d0bc2bb647ce4c17; }, function (v) { return $ed3b74ccfa001938$export$d0bc2bb647ce4c17 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"KEY_TAB_COMMAND\", function () { return $ed3b74ccfa001938$export$b321bdc226ccdcde; }, function (v) { return $ed3b74ccfa001938$export$b321bdc226ccdcde = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"LineBreakNode\", function () { return $ed3b74ccfa001938$export$965f56e8043e93ae; }, function (v) { return $ed3b74ccfa001938$export$965f56e8043e93ae = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"MOVE_TO_END\", function () { return $ed3b74ccfa001938$export$fb3b2d438650aff6; }, function (v) { return $ed3b74ccfa001938$export$fb3b2d438650aff6 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"MOVE_TO_START\", function () { return $ed3b74ccfa001938$export$dc117ee4d661295a; }, function (v) { return $ed3b74ccfa001938$export$dc117ee4d661295a = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"OUTDENT_CONTENT_COMMAND\", function () { return $ed3b74ccfa001938$export$ecf9caa19e96e40d; }, function (v) { return $ed3b74ccfa001938$export$ecf9caa19e96e40d = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"PASTE_COMMAND\", function () { return $ed3b74ccfa001938$export$7fb70c61b3bcc883; }, function (v) { return $ed3b74ccfa001938$export$7fb70c61b3bcc883 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"ParagraphNode\", function () { return $ed3b74ccfa001938$export$e94424771493b912; }, function (v) { return $ed3b74ccfa001938$export$e94424771493b912 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"REDO_COMMAND\", function () { return $ed3b74ccfa001938$export$8c4a0748d31d9941; }, function (v) { return $ed3b74ccfa001938$export$8c4a0748d31d9941 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"REMOVE_TEXT_COMMAND\", function () { return $ed3b74ccfa001938$export$9cc285f2a3ff220c; }, function (v) { return $ed3b74ccfa001938$export$9cc285f2a3ff220c = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"RootNode\", function () { return $ed3b74ccfa001938$export$1c180cb67301903c; }, function (v) { return $ed3b74ccfa001938$export$1c180cb67301903c = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"SELECTION_CHANGE_COMMAND\", function () { return $ed3b74ccfa001938$export$e396fef71d2b56e5; }, function (v) { return $ed3b74ccfa001938$export$e396fef71d2b56e5 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"TextNode\", function () { return $ed3b74ccfa001938$export$f0a25ea3087686aa; }, function (v) { return $ed3b74ccfa001938$export$f0a25ea3087686aa = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"UNDO_COMMAND\", function () { return $ed3b74ccfa001938$export$34722a4946cb641e; }, function (v) { return $ed3b74ccfa001938$export$34722a4946cb641e = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"createCommand\", function () { return $ed3b74ccfa001938$export$8d4021544bdece00; }, function (v) { return $ed3b74ccfa001938$export$8d4021544bdece00 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"createEditor\", function () { return $ed3b74ccfa001938$export$eb02d1ee0d3cac30; }, function (v) { return $ed3b74ccfa001938$export$eb02d1ee0d3cac30 = v; });\n$parcel$export($ed3b74ccfa001938$exports, \"isSelectionWithinEditor\", function () { return $ed3b74ccfa001938$export$f1b377b21cd6350b; }, function (v) { return $ed3b74ccfa001938$export$f1b377b21cd6350b = v; });\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */ var $ed3b74ccfa001938$export$24cab2f466b76c04;\nvar $ed3b74ccfa001938$export$2f5beb31df92ea57;\nvar $ed3b74ccfa001938$export$def73b17b22438e7;\nvar $ed3b74ccfa001938$export$4ccaf7d0d16ab4c;\nvar $ed3b74ccfa001938$export$f8cd0c3f35d1a61c;\nvar $ed3b74ccfa001938$export$7f0c05ffb7ced90d;\nvar $ed3b74ccfa001938$export$1ccc217b9831b072;\nvar $ed3b74ccfa001938$export$2785f39dcdec0078;\nvar $ed3b74ccfa001938$export$c4b907be1879d8c1;\nvar $ed3b74ccfa001938$export$fef265f0d2fcffdd;\nvar $ed3b74ccfa001938$export$6f13c476561e4734;\nvar $ed3b74ccfa001938$export$e725f93d4d48c6d8;\nvar $ed3b74ccfa001938$export$846e9407a8b5d98c;\nvar $ed3b74ccfa001938$export$8d83ea843c4eea9a;\nvar $ed3b74ccfa001938$export$63a3201b3a5c7d90;\nvar $ed3b74ccfa001938$export$2d96f9a07231d1b9;\nvar $ed3b74ccfa001938$export$e3d4b782f65c81f1;\nvar $ed3b74ccfa001938$export$d773017360b45449;\nvar $ed3b74ccfa001938$export$60aa03725ce41b1c;\nvar $ed3b74ccfa001938$export$923a058ef54437a4;\nvar $ed3b74ccfa001938$export$a78813a4e8e8b9dd;\nvar $ed3b74ccfa001938$export$8d016e0592201ace;\nvar $ed3b74ccfa001938$export$b16330e40aa25c4e;\nvar $ed3b74ccfa001938$export$7257e4181651a7c3;\nvar $ed3b74ccfa001938$export$1fdda795300c79c6;\nvar $ed3b74ccfa001938$export$181b63acea8a0224;\nvar $ed3b74ccfa001938$export$5b29ca560c2fedab;\nvar $ed3b74ccfa001938$export$6f851a24c61146af;\nvar $ed3b74ccfa001938$export$471953706258be2b;\nvar $ed3b74ccfa001938$export$ac6fed8d7d40e66c;\nvar $ed3b74ccfa001938$export$db10bc6ba67ffcb5;\nvar $ed3b74ccfa001938$export$e1d3a194df5be556;\nvar $ed3b74ccfa001938$export$ea25f5ef71f2d042;\nvar $ed3b74ccfa001938$export$2aad78c37810bca9;\nvar $ed3b74ccfa001938$export$cc2d53c74c1fb2b2;\nvar $ed3b74ccfa001938$export$4b6d457d076906ac;\nvar $ed3b74ccfa001938$export$e36aacf84f559bb3;\nvar $ed3b74ccfa001938$export$9fd9dd31dd6ebdf5;\nvar $ed3b74ccfa001938$export$4926ce1a5702fdc7;\nvar $ed3b74ccfa001938$export$d3f69a65bbe7edc;\nvar $ed3b74ccfa001938$export$c1a2de6c823e5f82;\nvar $ed3b74ccfa001938$export$6afdf194f304e546;\nvar $ed3b74ccfa001938$export$11c61e12af5e1f41;\nvar $ed3b74ccfa001938$export$e8fb7042985cd2e9;\nvar $ed3b74ccfa001938$export$1d1358fe8b5bfab4;\nvar $ed3b74ccfa001938$export$7bb13e375de35064;\nvar $ed3b74ccfa001938$export$6f67c758bb657857;\nvar $ed3b74ccfa001938$export$3435fcfb1f59ef96;\nvar $ed3b74ccfa001938$export$4dc8a35a083beec4;\nvar $ed3b74ccfa001938$export$35595bf6d7e36fd5;\nvar $ed3b74ccfa001938$export$d77fad8fb8747fd;\nvar $ed3b74ccfa001938$export$8e315b175631384c;\nvar $ed3b74ccfa001938$export$3c62f6ea1bcc0126;\nvar $ed3b74ccfa001938$export$512956df40f3b40e;\nvar $ed3b74ccfa001938$export$5f4fd2bb79122677;\nvar $ed3b74ccfa001938$export$6409391dce4c0f48;\nvar $ed3b74ccfa001938$export$d3f36a5fb5c9efe5;\nvar $ed3b74ccfa001938$export$e284ef4eccc325c5;\nvar $ed3b74ccfa001938$export$5627752ddf7eed41;\nvar $ed3b74ccfa001938$export$8c09d9a078ea3c2f;\nvar $ed3b74ccfa001938$export$ffbd838cf75d7d8e;\nvar $ed3b74ccfa001938$export$b62c1cce98fa7223;\nvar $ed3b74ccfa001938$export$2e0fd45fde1da719;\nvar $ed3b74ccfa001938$export$eac1e4b16b80d3ea;\nvar $ed3b74ccfa001938$export$8244b9efe04488e;\nvar $ed3b74ccfa001938$export$dc064fe9e59310fd;\nvar $ed3b74ccfa001938$export$cafe35f35e77bf56;\nvar $ed3b74ccfa001938$export$d394dc6514823b18;\nvar $ed3b74ccfa001938$export$85443a1a9543f043;\nvar $ed3b74ccfa001938$export$2f74f6a2d927e6bd;\nvar $ed3b74ccfa001938$export$64e35ce26e025724;\nvar $ed3b74ccfa001938$export$24f4fea65b096b4;\nvar $ed3b74ccfa001938$export$baa60daa2ca402b3;\nvar $ed3b74ccfa001938$export$7525f8f8ab44508;\nvar $ed3b74ccfa001938$export$217ec2281ac1c53b;\nvar $ed3b74ccfa001938$export$7833c2a33ae81d3d;\nvar $ed3b74ccfa001938$export$24bbba9bfa830f78;\nvar $ed3b74ccfa001938$export$13a0e72b5c0146bb;\nvar $ed3b74ccfa001938$export$61973214e0e18936;\nvar $ed3b74ccfa001938$export$2cdb7cdd6fccb293;\nvar $ed3b74ccfa001938$export$53589e422a755d59;\nvar $ed3b74ccfa001938$export$452548a3c1874d61;\nvar $ed3b74ccfa001938$export$d0bc2bb647ce4c17;\nvar $ed3b74ccfa001938$export$b321bdc226ccdcde;\nvar $ed3b74ccfa001938$export$965f56e8043e93ae;\nvar $ed3b74ccfa001938$export$fb3b2d438650aff6;\nvar $ed3b74ccfa001938$export$dc117ee4d661295a;\nvar $ed3b74ccfa001938$export$ecf9caa19e96e40d;\nvar $ed3b74ccfa001938$export$7fb70c61b3bcc883;\nvar $ed3b74ccfa001938$export$e94424771493b912;\nvar $ed3b74ccfa001938$export$8c4a0748d31d9941;\nvar $ed3b74ccfa001938$export$9cc285f2a3ff220c;\nvar $ed3b74ccfa001938$export$1c180cb67301903c;\nvar $ed3b74ccfa001938$export$e396fef71d2b56e5;\nvar $ed3b74ccfa001938$export$f0a25ea3087686aa;\nvar $ed3b74ccfa001938$export$34722a4946cb641e;\nvar $ed3b74ccfa001938$export$8d4021544bdece00;\nvar $ed3b74ccfa001938$export$eb02d1ee0d3cac30;\nvar $ed3b74ccfa001938$export$f1b377b21cd6350b;\n\"use strict\";\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ function $ed3b74ccfa001938$var$createCommand(type) {\n    return {\n        type: type\n    };\n}\nconst $ed3b74ccfa001938$var$SELECTION_CHANGE_COMMAND = $ed3b74ccfa001938$var$createCommand(\"SELECTION_CHANGE_COMMAND\");\nconst $ed3b74ccfa001938$var$CLICK_COMMAND = $ed3b74ccfa001938$var$createCommand(\"CLICK_COMMAND\");\nconst $ed3b74ccfa001938$var$DELETE_CHARACTER_COMMAND = $ed3b74ccfa001938$var$createCommand(\"DELETE_CHARACTER_COMMAND\");\nconst $ed3b74ccfa001938$var$INSERT_LINE_BREAK_COMMAND = $ed3b74ccfa001938$var$createCommand(\"INSERT_LINE_BREAK_COMMAND\");\nconst $ed3b74ccfa001938$var$INSERT_PARAGRAPH_COMMAND = $ed3b74ccfa001938$var$createCommand(\"INSERT_PARAGRAPH_COMMAND\");\nconst $ed3b74ccfa001938$var$CONTROLLED_TEXT_INSERTION_COMMAND = $ed3b74ccfa001938$var$createCommand(\"CONTROLLED_TEXT_INSERTION_COMMAND\");\nconst $ed3b74ccfa001938$var$PASTE_COMMAND = $ed3b74ccfa001938$var$createCommand(\"PASTE_COMMAND\");\nconst $ed3b74ccfa001938$var$REMOVE_TEXT_COMMAND = $ed3b74ccfa001938$var$createCommand(\"REMOVE_TEXT_COMMAND\");\nconst $ed3b74ccfa001938$var$DELETE_WORD_COMMAND = $ed3b74ccfa001938$var$createCommand(\"DELETE_WORD_COMMAND\");\nconst $ed3b74ccfa001938$var$DELETE_LINE_COMMAND = $ed3b74ccfa001938$var$createCommand(\"DELETE_LINE_COMMAND\");\nconst $ed3b74ccfa001938$var$FORMAT_TEXT_COMMAND = $ed3b74ccfa001938$var$createCommand(\"FORMAT_TEXT_COMMAND\");\nconst $ed3b74ccfa001938$var$UNDO_COMMAND = $ed3b74ccfa001938$var$createCommand(\"UNDO_COMMAND\");\nconst $ed3b74ccfa001938$var$REDO_COMMAND = $ed3b74ccfa001938$var$createCommand(\"REDO_COMMAND\");\nconst $ed3b74ccfa001938$var$KEY_DOWN_COMMAND = $ed3b74ccfa001938$var$createCommand(\"KEYDOWN_COMMAND\");\nconst $ed3b74ccfa001938$var$KEY_ARROW_RIGHT_COMMAND = $ed3b74ccfa001938$var$createCommand(\"KEY_ARROW_RIGHT_COMMAND\");\nconst $ed3b74ccfa001938$var$MOVE_TO_END = $ed3b74ccfa001938$var$createCommand(\"MOVE_TO_END\");\nconst $ed3b74ccfa001938$var$KEY_ARROW_LEFT_COMMAND = $ed3b74ccfa001938$var$createCommand(\"KEY_ARROW_LEFT_COMMAND\");\nconst $ed3b74ccfa001938$var$MOVE_TO_START = $ed3b74ccfa001938$var$createCommand(\"MOVE_TO_START\");\nconst $ed3b74ccfa001938$var$KEY_ARROW_UP_COMMAND = $ed3b74ccfa001938$var$createCommand(\"KEY_ARROW_UP_COMMAND\");\nconst $ed3b74ccfa001938$var$KEY_ARROW_DOWN_COMMAND = $ed3b74ccfa001938$var$createCommand(\"KEY_ARROW_DOWN_COMMAND\");\nconst $ed3b74ccfa001938$var$KEY_ENTER_COMMAND = $ed3b74ccfa001938$var$createCommand(\"KEY_ENTER_COMMAND\");\nconst $ed3b74ccfa001938$var$KEY_SPACE_COMMAND = $ed3b74ccfa001938$var$createCommand(\"KEY_SPACE_COMMAND\");\nconst $ed3b74ccfa001938$var$KEY_BACKSPACE_COMMAND = $ed3b74ccfa001938$var$createCommand(\"KEY_BACKSPACE_COMMAND\");\nconst $ed3b74ccfa001938$var$KEY_ESCAPE_COMMAND = $ed3b74ccfa001938$var$createCommand(\"KEY_ESCAPE_COMMAND\");\nconst $ed3b74ccfa001938$var$KEY_DELETE_COMMAND = $ed3b74ccfa001938$var$createCommand(\"KEY_DELETE_COMMAND\");\nconst $ed3b74ccfa001938$var$KEY_TAB_COMMAND = $ed3b74ccfa001938$var$createCommand(\"KEY_TAB_COMMAND\");\nconst $ed3b74ccfa001938$var$INDENT_CONTENT_COMMAND = $ed3b74ccfa001938$var$createCommand(\"INDENT_CONTENT_COMMAND\");\nconst $ed3b74ccfa001938$var$OUTDENT_CONTENT_COMMAND = $ed3b74ccfa001938$var$createCommand(\"OUTDENT_CONTENT_COMMAND\");\nconst $ed3b74ccfa001938$var$DROP_COMMAND = $ed3b74ccfa001938$var$createCommand(\"DROP_COMMAND\");\nconst $ed3b74ccfa001938$var$FORMAT_ELEMENT_COMMAND = $ed3b74ccfa001938$var$createCommand(\"FORMAT_ELEMENT_COMMAND\");\nconst $ed3b74ccfa001938$var$DRAGSTART_COMMAND = $ed3b74ccfa001938$var$createCommand(\"DRAGSTART_COMMAND\");\nconst $ed3b74ccfa001938$var$DRAGOVER_COMMAND = $ed3b74ccfa001938$var$createCommand(\"DRAGOVER_COMMAND\");\nconst $ed3b74ccfa001938$var$DRAGEND_COMMAND = $ed3b74ccfa001938$var$createCommand(\"DRAGEND_COMMAND\");\nconst $ed3b74ccfa001938$var$COPY_COMMAND = $ed3b74ccfa001938$var$createCommand(\"COPY_COMMAND\");\nconst $ed3b74ccfa001938$var$CUT_COMMAND = $ed3b74ccfa001938$var$createCommand(\"CUT_COMMAND\");\nconst $ed3b74ccfa001938$var$CLEAR_EDITOR_COMMAND = $ed3b74ccfa001938$var$createCommand(\"CLEAR_EDITOR_COMMAND\");\nconst $ed3b74ccfa001938$var$CLEAR_HISTORY_COMMAND = $ed3b74ccfa001938$var$createCommand(\"CLEAR_HISTORY_COMMAND\");\nconst $ed3b74ccfa001938$var$CAN_REDO_COMMAND = $ed3b74ccfa001938$var$createCommand(\"CAN_REDO_COMMAND\");\nconst $ed3b74ccfa001938$var$CAN_UNDO_COMMAND = $ed3b74ccfa001938$var$createCommand(\"CAN_UNDO_COMMAND\");\nconst $ed3b74ccfa001938$var$FOCUS_COMMAND = $ed3b74ccfa001938$var$createCommand(\"FOCUS_COMMAND\");\nconst $ed3b74ccfa001938$var$BLUR_COMMAND = $ed3b74ccfa001938$var$createCommand(\"BLUR_COMMAND\");\nconst $ed3b74ccfa001938$var$KEY_MODIFIER_COMMAND = $ed3b74ccfa001938$var$createCommand(\"KEY_MODIFIER_COMMAND\");\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ const $ed3b74ccfa001938$var$CAN_USE_DOM = typeof window !== \"undefined\" && typeof window.document !== \"undefined\" && typeof window.document.createElement !== \"undefined\";\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ const $ed3b74ccfa001938$var$documentMode = $ed3b74ccfa001938$var$CAN_USE_DOM && \"documentMode\" in document ? document.documentMode : null;\nconst $ed3b74ccfa001938$var$IS_APPLE = $ed3b74ccfa001938$var$CAN_USE_DOM && /Mac|iPod|iPhone|iPad/.test(navigator.platform);\nconst $ed3b74ccfa001938$var$IS_FIREFOX = $ed3b74ccfa001938$var$CAN_USE_DOM && /^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);\nconst $ed3b74ccfa001938$var$CAN_USE_BEFORE_INPUT = $ed3b74ccfa001938$var$CAN_USE_DOM && \"InputEvent\" in window && !$ed3b74ccfa001938$var$documentMode ? \"getTargetRanges\" in new window.InputEvent(\"input\") : false;\nconst $ed3b74ccfa001938$var$IS_SAFARI = $ed3b74ccfa001938$var$CAN_USE_DOM && /Version\\/[\\d.]+.*Safari/.test(navigator.userAgent);\nconst $ed3b74ccfa001938$var$IS_IOS = $ed3b74ccfa001938$var$CAN_USE_DOM && /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream; // Keep these in case we need to use them in the future.\n// export const IS_WINDOWS: boolean = CAN_USE_DOM && /Win/.test(navigator.platform);\nconst $ed3b74ccfa001938$var$IS_CHROME = $ed3b74ccfa001938$var$CAN_USE_DOM && /^(?=.*Chrome).*/i.test(navigator.userAgent); // export const canUseTextInputEvent: boolean = CAN_USE_DOM && 'TextEvent' in window && !documentMode;\nconst $ed3b74ccfa001938$var$IS_APPLE_WEBKIT = $ed3b74ccfa001938$var$CAN_USE_DOM && /AppleWebKit\\/[\\d.]+/.test(navigator.userAgent) && !$ed3b74ccfa001938$var$IS_CHROME;\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ const $ed3b74ccfa001938$var$DOM_ELEMENT_TYPE = 1;\nconst $ed3b74ccfa001938$var$DOM_TEXT_TYPE = 3; // Reconciling\nconst $ed3b74ccfa001938$var$NO_DIRTY_NODES = 0;\nconst $ed3b74ccfa001938$var$HAS_DIRTY_NODES = 1;\nconst $ed3b74ccfa001938$var$FULL_RECONCILE = 2; // Text node modes\nconst $ed3b74ccfa001938$var$IS_NORMAL = 0;\nconst $ed3b74ccfa001938$var$IS_TOKEN = 1;\nconst $ed3b74ccfa001938$var$IS_SEGMENTED = 2; // IS_INERT = 3\n// Text node formatting\nconst $ed3b74ccfa001938$var$IS_BOLD = 1;\nconst $ed3b74ccfa001938$var$IS_ITALIC = 2;\nconst $ed3b74ccfa001938$var$IS_STRIKETHROUGH = 4;\nconst $ed3b74ccfa001938$var$IS_UNDERLINE = 8;\nconst $ed3b74ccfa001938$var$IS_CODE = 16;\nconst $ed3b74ccfa001938$var$IS_SUBSCRIPT = 32;\nconst $ed3b74ccfa001938$var$IS_SUPERSCRIPT = 64;\nconst $ed3b74ccfa001938$var$IS_HIGHLIGHT = 128;\nconst $ed3b74ccfa001938$var$IS_ALL_FORMATTING = $ed3b74ccfa001938$var$IS_BOLD | $ed3b74ccfa001938$var$IS_ITALIC | $ed3b74ccfa001938$var$IS_STRIKETHROUGH | $ed3b74ccfa001938$var$IS_UNDERLINE | $ed3b74ccfa001938$var$IS_CODE | $ed3b74ccfa001938$var$IS_SUBSCRIPT | $ed3b74ccfa001938$var$IS_SUPERSCRIPT | $ed3b74ccfa001938$var$IS_HIGHLIGHT; // Text node details\nconst $ed3b74ccfa001938$var$IS_DIRECTIONLESS = 1;\nconst $ed3b74ccfa001938$var$IS_UNMERGEABLE = 2; // Element node formatting\nconst $ed3b74ccfa001938$var$IS_ALIGN_LEFT = 1;\nconst $ed3b74ccfa001938$var$IS_ALIGN_CENTER = 2;\nconst $ed3b74ccfa001938$var$IS_ALIGN_RIGHT = 3;\nconst $ed3b74ccfa001938$var$IS_ALIGN_JUSTIFY = 4;\nconst $ed3b74ccfa001938$var$IS_ALIGN_START = 5;\nconst $ed3b74ccfa001938$var$IS_ALIGN_END = 6; // Reconciliation\nconst $ed3b74ccfa001938$var$NON_BREAKING_SPACE = \"\\xa0\";\nconst $ed3b74ccfa001938$var$ZERO_WIDTH_SPACE = \"​\"; // For iOS/Safari we use a non breaking space, otherwise the cursor appears\n// overlapping the composed text.\nconst $ed3b74ccfa001938$var$COMPOSITION_SUFFIX = $ed3b74ccfa001938$var$IS_SAFARI || $ed3b74ccfa001938$var$IS_IOS || $ed3b74ccfa001938$var$IS_APPLE_WEBKIT ? $ed3b74ccfa001938$var$NON_BREAKING_SPACE : $ed3b74ccfa001938$var$ZERO_WIDTH_SPACE;\nconst $ed3b74ccfa001938$var$DOUBLE_LINE_BREAK = \"\\n\\n\"; // For FF, we need to use a non-breaking space, or it gets composition\n// in a stuck state.\nconst $ed3b74ccfa001938$var$COMPOSITION_START_CHAR = $ed3b74ccfa001938$var$IS_FIREFOX ? $ed3b74ccfa001938$var$NON_BREAKING_SPACE : $ed3b74ccfa001938$var$COMPOSITION_SUFFIX;\nconst $ed3b74ccfa001938$var$RTL = \"֑-߿יִ-﷽ﹰ-ﻼ\";\nconst $ed3b74ccfa001938$var$LTR = \"A-Za-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿\"; // eslint-disable-next-line no-misleading-character-class\nconst $ed3b74ccfa001938$var$RTL_REGEX = new RegExp(\"^[^\" + $ed3b74ccfa001938$var$LTR + \"]*[\" + $ed3b74ccfa001938$var$RTL + \"]\"); // eslint-disable-next-line no-misleading-character-class\nconst $ed3b74ccfa001938$var$LTR_REGEX = new RegExp(\"^[^\" + $ed3b74ccfa001938$var$RTL + \"]*[\" + $ed3b74ccfa001938$var$LTR + \"]\");\nconst $ed3b74ccfa001938$var$TEXT_TYPE_TO_FORMAT = {\n    bold: $ed3b74ccfa001938$var$IS_BOLD,\n    code: $ed3b74ccfa001938$var$IS_CODE,\n    highlight: $ed3b74ccfa001938$var$IS_HIGHLIGHT,\n    italic: $ed3b74ccfa001938$var$IS_ITALIC,\n    strikethrough: $ed3b74ccfa001938$var$IS_STRIKETHROUGH,\n    subscript: $ed3b74ccfa001938$var$IS_SUBSCRIPT,\n    superscript: $ed3b74ccfa001938$var$IS_SUPERSCRIPT,\n    underline: $ed3b74ccfa001938$var$IS_UNDERLINE\n};\nconst $ed3b74ccfa001938$var$DETAIL_TYPE_TO_DETAIL = {\n    directionless: $ed3b74ccfa001938$var$IS_DIRECTIONLESS,\n    unmergeable: $ed3b74ccfa001938$var$IS_UNMERGEABLE\n};\nconst $ed3b74ccfa001938$var$ELEMENT_TYPE_TO_FORMAT = {\n    center: $ed3b74ccfa001938$var$IS_ALIGN_CENTER,\n    end: $ed3b74ccfa001938$var$IS_ALIGN_END,\n    justify: $ed3b74ccfa001938$var$IS_ALIGN_JUSTIFY,\n    left: $ed3b74ccfa001938$var$IS_ALIGN_LEFT,\n    right: $ed3b74ccfa001938$var$IS_ALIGN_RIGHT,\n    start: $ed3b74ccfa001938$var$IS_ALIGN_START\n};\nconst $ed3b74ccfa001938$var$ELEMENT_FORMAT_TO_TYPE = {\n    [$ed3b74ccfa001938$var$IS_ALIGN_CENTER]: \"center\",\n    [$ed3b74ccfa001938$var$IS_ALIGN_END]: \"end\",\n    [$ed3b74ccfa001938$var$IS_ALIGN_JUSTIFY]: \"justify\",\n    [$ed3b74ccfa001938$var$IS_ALIGN_LEFT]: \"left\",\n    [$ed3b74ccfa001938$var$IS_ALIGN_RIGHT]: \"right\",\n    [$ed3b74ccfa001938$var$IS_ALIGN_START]: \"start\"\n};\nconst $ed3b74ccfa001938$var$TEXT_MODE_TO_TYPE = {\n    normal: $ed3b74ccfa001938$var$IS_NORMAL,\n    segmented: $ed3b74ccfa001938$var$IS_SEGMENTED,\n    token: $ed3b74ccfa001938$var$IS_TOKEN\n};\nconst $ed3b74ccfa001938$var$TEXT_TYPE_TO_MODE = {\n    [$ed3b74ccfa001938$var$IS_NORMAL]: \"normal\",\n    [$ed3b74ccfa001938$var$IS_SEGMENTED]: \"segmented\",\n    [$ed3b74ccfa001938$var$IS_TOKEN]: \"token\"\n};\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ const $ed3b74ccfa001938$var$TEXT_MUTATION_VARIANCE = 100;\nlet $ed3b74ccfa001938$var$isProcessingMutations = false;\nlet $ed3b74ccfa001938$var$lastTextEntryTimeStamp = 0;\nfunction $ed3b74ccfa001938$var$getIsProcesssingMutations() {\n    return $ed3b74ccfa001938$var$isProcessingMutations;\n}\nfunction $ed3b74ccfa001938$var$updateTimeStamp(event) {\n    $ed3b74ccfa001938$var$lastTextEntryTimeStamp = event.timeStamp;\n}\nfunction $ed3b74ccfa001938$var$initTextEntryListener(editor) {\n    if ($ed3b74ccfa001938$var$lastTextEntryTimeStamp === 0) $ed3b74ccfa001938$var$getWindow(editor).addEventListener(\"textInput\", $ed3b74ccfa001938$var$updateTimeStamp, true);\n}\nfunction $ed3b74ccfa001938$var$isManagedLineBreak(dom, target, editor) {\n    return target.__lexicalLineBreak === dom || // @ts-ignore We intentionally add this to the Node.\n    dom[`__lexicalKey_${editor._key}`] !== undefined;\n}\nfunction $ed3b74ccfa001938$var$getLastSelection(editor) {\n    return editor.getEditorState().read(()=>{\n        const selection = $ed3b74ccfa001938$var$$getSelection();\n        return selection !== null ? selection.clone() : null;\n    });\n}\nfunction $ed3b74ccfa001938$var$handleTextMutation(target, node, editor) {\n    const domSelection = $ed3b74ccfa001938$var$getDOMSelection(editor._window);\n    let anchorOffset = null;\n    let focusOffset = null;\n    if (domSelection !== null && domSelection.anchorNode === target) {\n        anchorOffset = domSelection.anchorOffset;\n        focusOffset = domSelection.focusOffset;\n    }\n    const text = target.nodeValue;\n    if (text !== null) $ed3b74ccfa001938$var$$updateTextNodeFromDOMContent(node, text, anchorOffset, focusOffset, false);\n}\nfunction $ed3b74ccfa001938$var$shouldUpdateTextNodeFromMutation(selection, targetDOM, targetNode) {\n    if ($ed3b74ccfa001938$var$$isRangeSelection(selection)) {\n        const anchorNode = selection.anchor.getNode();\n        if (anchorNode.is(targetNode) && selection.format !== anchorNode.getFormat()) return false;\n    }\n    return targetDOM.nodeType === $ed3b74ccfa001938$var$DOM_TEXT_TYPE && targetNode.isAttached();\n}\nfunction $ed3b74ccfa001938$var$$flushMutations$1(editor, mutations, observer) {\n    $ed3b74ccfa001938$var$isProcessingMutations = true;\n    const shouldFlushTextMutations = performance.now() - $ed3b74ccfa001938$var$lastTextEntryTimeStamp > $ed3b74ccfa001938$var$TEXT_MUTATION_VARIANCE;\n    try {\n        $ed3b74ccfa001938$var$updateEditor(editor, ()=>{\n            const selection = $ed3b74ccfa001938$var$$getSelection() || $ed3b74ccfa001938$var$getLastSelection(editor);\n            const badDOMTargets = new Map();\n            const rootElement = editor.getRootElement(); // We use the current editor state, as that reflects what is\n            // actually \"on screen\".\n            const currentEditorState = editor._editorState;\n            const blockCursorElement = editor._blockCursorElement;\n            let shouldRevertSelection = false;\n            let possibleTextForFirefoxPaste = \"\";\n            for(let i = 0; i < mutations.length; i++){\n                const mutation = mutations[i];\n                const type = mutation.type;\n                const targetDOM = mutation.target;\n                let targetNode = $ed3b74ccfa001938$var$$getNearestNodeFromDOMNode(targetDOM, currentEditorState);\n                if (targetNode === null && targetDOM !== rootElement || $ed3b74ccfa001938$var$$isDecoratorNode(targetNode)) continue;\n                if (type === \"characterData\") // Text mutations are deferred and passed to mutation listeners to be\n                // processed outside of the Lexical engine.\n                {\n                    if (shouldFlushTextMutations && $ed3b74ccfa001938$var$$isTextNode(targetNode) && $ed3b74ccfa001938$var$shouldUpdateTextNodeFromMutation(selection, targetDOM, targetNode)) $ed3b74ccfa001938$var$handleTextMutation(targetDOM, targetNode, editor);\n                } else if (type === \"childList\") {\n                    shouldRevertSelection = true; // We attempt to \"undo\" any changes that have occurred outside\n                    // of Lexical. We want Lexical's editor state to be source of truth.\n                    // To the user, these will look like no-ops.\n                    const addedDOMs = mutation.addedNodes;\n                    for(let s = 0; s < addedDOMs.length; s++){\n                        const addedDOM = addedDOMs[s];\n                        const node = $ed3b74ccfa001938$var$getNodeFromDOMNode(addedDOM);\n                        const parentDOM = addedDOM.parentNode;\n                        if (parentDOM != null && addedDOM !== blockCursorElement && node === null && (addedDOM.nodeName !== \"BR\" || !$ed3b74ccfa001938$var$isManagedLineBreak(addedDOM, parentDOM, editor))) {\n                            if ($ed3b74ccfa001938$var$IS_FIREFOX) {\n                                const possibleText = addedDOM.innerText || addedDOM.nodeValue;\n                                if (possibleText) possibleTextForFirefoxPaste += possibleText;\n                            }\n                            parentDOM.removeChild(addedDOM);\n                        }\n                    }\n                    const removedDOMs = mutation.removedNodes;\n                    const removedDOMsLength = removedDOMs.length;\n                    if (removedDOMsLength > 0) {\n                        let unremovedBRs = 0;\n                        for(let s = 0; s < removedDOMsLength; s++){\n                            const removedDOM = removedDOMs[s];\n                            if (removedDOM.nodeName === \"BR\" && $ed3b74ccfa001938$var$isManagedLineBreak(removedDOM, targetDOM, editor) || blockCursorElement === removedDOM) {\n                                targetDOM.appendChild(removedDOM);\n                                unremovedBRs++;\n                            }\n                        }\n                        if (removedDOMsLength !== unremovedBRs) {\n                            if (targetDOM === rootElement) targetNode = $ed3b74ccfa001938$var$internalGetRoot(currentEditorState);\n                            badDOMTargets.set(targetDOM, targetNode);\n                        }\n                    }\n                }\n            } // Now we process each of the unique target nodes, attempting\n            // to restore their contents back to the source of truth, which\n            // is Lexical's \"current\" editor state. This is basically like\n            // an internal revert on the DOM.\n            if (badDOMTargets.size > 0) for (const [targetDOM, targetNode] of badDOMTargets){\n                if ($ed3b74ccfa001938$var$$isElementNode(targetNode)) {\n                    const childKeys = targetNode.getChildrenKeys();\n                    let currentDOM = targetDOM.firstChild;\n                    for(let s = 0; s < childKeys.length; s++){\n                        const key = childKeys[s];\n                        const correctDOM = editor.getElementByKey(key);\n                        if (correctDOM === null) continue;\n                        if (currentDOM == null) {\n                            targetDOM.appendChild(correctDOM);\n                            currentDOM = correctDOM;\n                        } else if (currentDOM !== correctDOM) targetDOM.replaceChild(correctDOM, currentDOM);\n                        currentDOM = currentDOM.nextSibling;\n                    }\n                } else if ($ed3b74ccfa001938$var$$isTextNode(targetNode)) targetNode.markDirty();\n            }\n             // Capture all the mutations made during this function. This\n            // also prevents us having to process them on the next cycle\n            // of onMutation, as these mutations were made by us.\n            const records = observer.takeRecords(); // Check for any random auto-added <br> elements, and remove them.\n            // These get added by the browser when we undo the above mutations\n            // and this can lead to a broken UI.\n            if (records.length > 0) {\n                for(let i = 0; i < records.length; i++){\n                    const record = records[i];\n                    const addedNodes = record.addedNodes;\n                    const target = record.target;\n                    for(let s = 0; s < addedNodes.length; s++){\n                        const addedDOM = addedNodes[s];\n                        const parentDOM = addedDOM.parentNode;\n                        if (parentDOM != null && addedDOM.nodeName === \"BR\" && !$ed3b74ccfa001938$var$isManagedLineBreak(addedDOM, target, editor)) parentDOM.removeChild(addedDOM);\n                    }\n                } // Clear any of those removal mutations\n                observer.takeRecords();\n            }\n            if (selection !== null) {\n                if (shouldRevertSelection) {\n                    selection.dirty = true;\n                    $ed3b74ccfa001938$var$$setSelection(selection);\n                }\n                if ($ed3b74ccfa001938$var$IS_FIREFOX && $ed3b74ccfa001938$var$isFirefoxClipboardEvents(editor)) selection.insertRawText(possibleTextForFirefoxPaste);\n            }\n        });\n    } finally{\n        $ed3b74ccfa001938$var$isProcessingMutations = false;\n    }\n}\nfunction $ed3b74ccfa001938$var$flushRootMutations(editor) {\n    const observer = editor._observer;\n    if (observer !== null) {\n        const mutations = observer.takeRecords();\n        $ed3b74ccfa001938$var$$flushMutations$1(editor, mutations, observer);\n    }\n}\nfunction $ed3b74ccfa001938$var$initMutationObserver(editor) {\n    $ed3b74ccfa001938$var$initTextEntryListener(editor);\n    editor._observer = new MutationObserver((mutations, observer)=>{\n        $ed3b74ccfa001938$var$$flushMutations$1(editor, mutations, observer);\n    });\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ let $ed3b74ccfa001938$var$keyCounter = 1;\nfunction $ed3b74ccfa001938$var$generateRandomKey() {\n    return \"\" + $ed3b74ccfa001938$var$keyCounter++;\n}\nfunction $ed3b74ccfa001938$var$getRegisteredNodeOrThrow(editor, nodeType) {\n    const registeredNode = editor._nodes.get(nodeType);\n    if (registeredNode === undefined) throw Error(`registeredNode: Type ${nodeType} not found`);\n    return registeredNode;\n}\nconst $ed3b74ccfa001938$var$scheduleMicroTask = typeof queueMicrotask === \"function\" ? queueMicrotask : (fn)=>{\n    // No window prefix intended (#1400)\n    Promise.resolve().then(fn);\n};\nfunction $ed3b74ccfa001938$var$$isSelectionCapturedInDecorator(node) {\n    return $ed3b74ccfa001938$var$$isDecoratorNode($ed3b74ccfa001938$var$$getNearestNodeFromDOMNode(node));\n}\nfunction $ed3b74ccfa001938$var$isSelectionCapturedInDecoratorInput(anchorDOM) {\n    const activeElement = document.activeElement;\n    if (activeElement === null) return false;\n    const nodeName = activeElement.nodeName;\n    return $ed3b74ccfa001938$var$$isDecoratorNode($ed3b74ccfa001938$var$$getNearestNodeFromDOMNode(anchorDOM)) && (nodeName === \"INPUT\" || nodeName === \"TEXTAREA\" || activeElement.contentEditable === \"true\" && // @ts-ignore iternal field\n    activeElement.__lexicalEditor == null);\n}\nfunction $ed3b74ccfa001938$var$isSelectionWithinEditor(editor, anchorDOM, focusDOM) {\n    const rootElement = editor.getRootElement();\n    try {\n        return rootElement !== null && rootElement.contains(anchorDOM) && rootElement.contains(focusDOM) && // Ignore if selection is within nested editor\n        anchorDOM !== null && !$ed3b74ccfa001938$var$isSelectionCapturedInDecoratorInput(anchorDOM) && $ed3b74ccfa001938$var$getNearestEditorFromDOMNode(anchorDOM) === editor;\n    } catch (error) {\n        return false;\n    }\n}\nfunction $ed3b74ccfa001938$var$getNearestEditorFromDOMNode(node) {\n    let currentNode = node;\n    while(currentNode != null){\n        // @ts-expect-error: internal field\n        const editor = currentNode.__lexicalEditor;\n        if (editor != null) return editor;\n        currentNode = $ed3b74ccfa001938$var$getParentElement(currentNode);\n    }\n    return null;\n}\nfunction $ed3b74ccfa001938$var$getTextDirection(text) {\n    if ($ed3b74ccfa001938$var$RTL_REGEX.test(text)) return \"rtl\";\n    if ($ed3b74ccfa001938$var$LTR_REGEX.test(text)) return \"ltr\";\n    return null;\n}\nfunction $ed3b74ccfa001938$var$$isTokenOrSegmented(node) {\n    return node.isToken() || node.isSegmented();\n}\nfunction $ed3b74ccfa001938$var$isDOMNodeLexicalTextNode(node) {\n    return node.nodeType === $ed3b74ccfa001938$var$DOM_TEXT_TYPE;\n}\nfunction $ed3b74ccfa001938$var$getDOMTextNode(element) {\n    let node = element;\n    while(node != null){\n        if ($ed3b74ccfa001938$var$isDOMNodeLexicalTextNode(node)) return node;\n        node = node.firstChild;\n    }\n    return null;\n}\nfunction $ed3b74ccfa001938$var$toggleTextFormatType(format, type, alignWithFormat) {\n    const activeFormat = $ed3b74ccfa001938$var$TEXT_TYPE_TO_FORMAT[type];\n    const isStateFlagPresent = format & activeFormat;\n    if (isStateFlagPresent && (alignWithFormat === null || (alignWithFormat & activeFormat) === 0)) // Remove the state flag.\n    return format ^ activeFormat;\n    if (alignWithFormat === null || alignWithFormat & activeFormat) // Add the state flag.\n    return format | activeFormat;\n    return format;\n}\nfunction $ed3b74ccfa001938$var$$isLeafNode(node) {\n    return $ed3b74ccfa001938$var$$isTextNode(node) || $ed3b74ccfa001938$var$$isLineBreakNode(node) || $ed3b74ccfa001938$var$$isDecoratorNode(node);\n}\nfunction $ed3b74ccfa001938$var$$setNodeKey(node, existingKey) {\n    if (existingKey != null) {\n        node.__key = existingKey;\n        return;\n    }\n    $ed3b74ccfa001938$var$errorOnReadOnly();\n    $ed3b74ccfa001938$var$errorOnInfiniteTransforms();\n    const editor = $ed3b74ccfa001938$var$getActiveEditor();\n    const editorState = $ed3b74ccfa001938$var$getActiveEditorState();\n    const key = $ed3b74ccfa001938$var$generateRandomKey();\n    editorState._nodeMap.set(key, node); // TODO Split this function into leaf/element\n    if ($ed3b74ccfa001938$var$$isElementNode(node)) editor._dirtyElements.set(key, true);\n    else editor._dirtyLeaves.add(key);\n    editor._cloneNotNeeded.add(key);\n    editor._dirtyType = $ed3b74ccfa001938$var$HAS_DIRTY_NODES;\n    node.__key = key;\n}\nfunction $ed3b74ccfa001938$var$internalMarkParentElementsAsDirty(parentKey, nodeMap, dirtyElements) {\n    let nextParentKey = parentKey;\n    while(nextParentKey !== null){\n        if (dirtyElements.has(nextParentKey)) return;\n        const node = nodeMap.get(nextParentKey);\n        if (node === undefined) break;\n        dirtyElements.set(nextParentKey, false);\n        nextParentKey = node.__parent;\n    }\n}\nfunction $ed3b74ccfa001938$var$removeFromParent(node) {\n    const oldParent = node.getParent();\n    if (oldParent !== null) {\n        const writableNode = node.getWritable();\n        const writableParent = oldParent.getWritable();\n        const prevSibling = node.getPreviousSibling();\n        const nextSibling = node.getNextSibling(); // TODO: this function duplicates a bunch of operations, can be simplified.\n        if (prevSibling === null) {\n            if (nextSibling !== null) {\n                const writableNextSibling = nextSibling.getWritable();\n                writableParent.__first = nextSibling.__key;\n                writableNextSibling.__prev = null;\n            } else writableParent.__first = null;\n        } else {\n            const writablePrevSibling = prevSibling.getWritable();\n            if (nextSibling !== null) {\n                const writableNextSibling = nextSibling.getWritable();\n                writableNextSibling.__prev = writablePrevSibling.__key;\n                writablePrevSibling.__next = writableNextSibling.__key;\n            } else writablePrevSibling.__next = null;\n            writableNode.__prev = null;\n        }\n        if (nextSibling === null) {\n            if (prevSibling !== null) {\n                const writablePrevSibling = prevSibling.getWritable();\n                writableParent.__last = prevSibling.__key;\n                writablePrevSibling.__next = null;\n            } else writableParent.__last = null;\n        } else {\n            const writableNextSibling = nextSibling.getWritable();\n            if (prevSibling !== null) {\n                const writablePrevSibling = prevSibling.getWritable();\n                writablePrevSibling.__next = writableNextSibling.__key;\n                writableNextSibling.__prev = writablePrevSibling.__key;\n            } else writableNextSibling.__prev = null;\n            writableNode.__next = null;\n        }\n        writableParent.__size--;\n        writableNode.__parent = null;\n    }\n} // Never use this function directly! It will break\n// the cloning heuristic. Instead use node.getWritable().\nfunction $ed3b74ccfa001938$var$internalMarkNodeAsDirty(node) {\n    $ed3b74ccfa001938$var$errorOnInfiniteTransforms();\n    const latest = node.getLatest();\n    const parent = latest.__parent;\n    const editorState = $ed3b74ccfa001938$var$getActiveEditorState();\n    const editor = $ed3b74ccfa001938$var$getActiveEditor();\n    const nodeMap = editorState._nodeMap;\n    const dirtyElements = editor._dirtyElements;\n    if (parent !== null) $ed3b74ccfa001938$var$internalMarkParentElementsAsDirty(parent, nodeMap, dirtyElements);\n    const key = latest.__key;\n    editor._dirtyType = $ed3b74ccfa001938$var$HAS_DIRTY_NODES;\n    if ($ed3b74ccfa001938$var$$isElementNode(node)) dirtyElements.set(key, true);\n    else // TODO split internally MarkNodeAsDirty into two dedicated Element/leave functions\n    editor._dirtyLeaves.add(key);\n}\nfunction $ed3b74ccfa001938$var$internalMarkSiblingsAsDirty(node) {\n    const previousNode = node.getPreviousSibling();\n    const nextNode = node.getNextSibling();\n    if (previousNode !== null) $ed3b74ccfa001938$var$internalMarkNodeAsDirty(previousNode);\n    if (nextNode !== null) $ed3b74ccfa001938$var$internalMarkNodeAsDirty(nextNode);\n}\nfunction $ed3b74ccfa001938$var$$setCompositionKey(compositionKey) {\n    $ed3b74ccfa001938$var$errorOnReadOnly();\n    const editor = $ed3b74ccfa001938$var$getActiveEditor();\n    const previousCompositionKey = editor._compositionKey;\n    if (compositionKey !== previousCompositionKey) {\n        editor._compositionKey = compositionKey;\n        if (previousCompositionKey !== null) {\n            const node = $ed3b74ccfa001938$var$$getNodeByKey(previousCompositionKey);\n            if (node !== null) node.getWritable();\n        }\n        if (compositionKey !== null) {\n            const node = $ed3b74ccfa001938$var$$getNodeByKey(compositionKey);\n            if (node !== null) node.getWritable();\n        }\n    }\n}\nfunction $ed3b74ccfa001938$var$$getCompositionKey() {\n    if ($ed3b74ccfa001938$var$isCurrentlyReadOnlyMode()) return null;\n    const editor = $ed3b74ccfa001938$var$getActiveEditor();\n    return editor._compositionKey;\n}\nfunction $ed3b74ccfa001938$var$$getNodeByKey(key, _editorState) {\n    const editorState = _editorState || $ed3b74ccfa001938$var$getActiveEditorState();\n    const node = editorState._nodeMap.get(key);\n    if (node === undefined) return null;\n    return node;\n}\nfunction $ed3b74ccfa001938$var$getNodeFromDOMNode(dom, editorState) {\n    const editor = $ed3b74ccfa001938$var$getActiveEditor(); // @ts-ignore We intentionally add this to the Node.\n    const key = dom[`__lexicalKey_${editor._key}`];\n    if (key !== undefined) return $ed3b74ccfa001938$var$$getNodeByKey(key, editorState);\n    return null;\n}\nfunction $ed3b74ccfa001938$var$$getNearestNodeFromDOMNode(startingDOM, editorState) {\n    let dom = startingDOM;\n    while(dom != null){\n        const node = $ed3b74ccfa001938$var$getNodeFromDOMNode(dom, editorState);\n        if (node !== null) return node;\n        dom = $ed3b74ccfa001938$var$getParentElement(dom);\n    }\n    return null;\n}\nfunction $ed3b74ccfa001938$var$cloneDecorators(editor) {\n    const currentDecorators = editor._decorators;\n    const pendingDecorators = Object.assign({}, currentDecorators);\n    editor._pendingDecorators = pendingDecorators;\n    return pendingDecorators;\n}\nfunction $ed3b74ccfa001938$var$getEditorStateTextContent(editorState) {\n    return editorState.read(()=>$ed3b74ccfa001938$var$$getRoot().getTextContent());\n}\nfunction $ed3b74ccfa001938$var$markAllNodesAsDirty(editor, type) {\n    // Mark all existing text nodes as dirty\n    $ed3b74ccfa001938$var$updateEditor(editor, ()=>{\n        const editorState = $ed3b74ccfa001938$var$getActiveEditorState();\n        if (editorState.isEmpty()) return;\n        if (type === \"root\") {\n            $ed3b74ccfa001938$var$$getRoot().markDirty();\n            return;\n        }\n        const nodeMap = editorState._nodeMap;\n        for (const [, node] of nodeMap)node.markDirty();\n    }, editor._pendingEditorState === null ? {\n        tag: \"history-merge\"\n    } : undefined);\n}\nfunction $ed3b74ccfa001938$var$$getRoot() {\n    return $ed3b74ccfa001938$var$internalGetRoot($ed3b74ccfa001938$var$getActiveEditorState());\n}\nfunction $ed3b74ccfa001938$var$internalGetRoot(editorState) {\n    return editorState._nodeMap.get(\"root\");\n}\nfunction $ed3b74ccfa001938$var$$setSelection(selection) {\n    $ed3b74ccfa001938$var$errorOnReadOnly();\n    const editorState = $ed3b74ccfa001938$var$getActiveEditorState();\n    if (selection !== null) {\n        if (Object.isFrozen(selection)) throw Error(`$setSelection called on frozen selection object. Ensure selection is cloned before passing in.`);\n        selection.dirty = true;\n        selection._cachedNodes = null;\n    }\n    editorState._selection = selection;\n}\nfunction $ed3b74ccfa001938$var$$flushMutations() {\n    $ed3b74ccfa001938$var$errorOnReadOnly();\n    const editor = $ed3b74ccfa001938$var$getActiveEditor();\n    $ed3b74ccfa001938$var$flushRootMutations(editor);\n}\nfunction $ed3b74ccfa001938$var$getNodeFromDOM(dom) {\n    const editor = $ed3b74ccfa001938$var$getActiveEditor();\n    const nodeKey = $ed3b74ccfa001938$var$getNodeKeyFromDOM(dom, editor);\n    if (nodeKey === null) {\n        const rootElement = editor.getRootElement();\n        if (dom === rootElement) return $ed3b74ccfa001938$var$$getNodeByKey(\"root\");\n        return null;\n    }\n    return $ed3b74ccfa001938$var$$getNodeByKey(nodeKey);\n}\nfunction $ed3b74ccfa001938$var$getTextNodeOffset(node, moveSelectionToEnd) {\n    return moveSelectionToEnd ? node.getTextContentSize() : 0;\n}\nfunction $ed3b74ccfa001938$var$getNodeKeyFromDOM(dom, editor) {\n    let node = dom;\n    while(node != null){\n        // @ts-ignore We intentionally add this to the Node.\n        const key = node[`__lexicalKey_${editor._key}`];\n        if (key !== undefined) return key;\n        node = $ed3b74ccfa001938$var$getParentElement(node);\n    }\n    return null;\n}\nfunction $ed3b74ccfa001938$var$doesContainGrapheme(str) {\n    return /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g.test(str);\n}\nfunction $ed3b74ccfa001938$var$getEditorsToPropagate(editor) {\n    const editorsToPropagate = [];\n    let currentEditor = editor;\n    while(currentEditor !== null){\n        editorsToPropagate.push(currentEditor);\n        currentEditor = currentEditor._parentEditor;\n    }\n    return editorsToPropagate;\n}\nfunction $ed3b74ccfa001938$var$createUID() {\n    return Math.random().toString(36).replace(/[^a-z]+/g, \"\").substr(0, 5);\n}\nfunction $ed3b74ccfa001938$var$getAnchorTextFromDOM(anchorNode) {\n    if (anchorNode.nodeType === $ed3b74ccfa001938$var$DOM_TEXT_TYPE) return anchorNode.nodeValue;\n    return null;\n}\nfunction $ed3b74ccfa001938$var$$updateSelectedTextFromDOM(isCompositionEnd, editor, data) {\n    // Update the text content with the latest composition text\n    const domSelection = $ed3b74ccfa001938$var$getDOMSelection(editor._window);\n    if (domSelection === null) return;\n    const anchorNode = domSelection.anchorNode;\n    let { anchorOffset: anchorOffset , focusOffset: focusOffset  } = domSelection;\n    if (anchorNode !== null) {\n        let textContent = $ed3b74ccfa001938$var$getAnchorTextFromDOM(anchorNode);\n        const node = $ed3b74ccfa001938$var$$getNearestNodeFromDOMNode(anchorNode);\n        if (textContent !== null && $ed3b74ccfa001938$var$$isTextNode(node)) {\n            if (node.canContainTabs()) {\n                const hasTabCharacter = textContent.includes(\"\t\"); // At present, this condition is primarily used for code highlights when\n                // grouped together in lines (divs). If a code highlight includes a tab,\n                // the newly typed character may be missing from the DOM's textContent.\n                // Let's take an example. If a LinedCodeNode looked roughly like this:\n                // <code><div><codeHighlight /><codeHighlight /></div></code>,\n                // the following could occur when using tabs:\n                // a. /tconst --type--> 'd' at offset 1 --get--> /tconst\n                //    - Missing 'd'\n                // b. /tconst --type--> 'd' at offset 3 --get--> /tcondst\n                //    --type--> 'd' at offset 3 --get--> /tcondst\n                //    - Missing second 'd'\n                // In these cases, we can fix the problem by manually inserting the\n                // newly typed character where we know it should have been.\n                if (data && data.length > 0 && hasTabCharacter) {\n                    const selectionOffset = data.length;\n                    const insertionOffset = anchorOffset + selectionOffset - 1;\n                    const beforeInsertion = textContent.slice(0, insertionOffset);\n                    const afterInsertion = textContent.slice(insertionOffset, textContent.length);\n                    textContent = `${beforeInsertion}${data}${afterInsertion}`;\n                    anchorOffset += selectionOffset;\n                    focusOffset += selectionOffset;\n                }\n            } // Data is intentionally truthy, as we check for boolean, null and empty string.\n            if (textContent === $ed3b74ccfa001938$var$COMPOSITION_SUFFIX && data) {\n                const offset = data.length;\n                textContent = data;\n                anchorOffset = offset;\n                focusOffset = offset;\n            }\n            if (textContent !== null) $ed3b74ccfa001938$var$$updateTextNodeFromDOMContent(node, textContent, anchorOffset, focusOffset, isCompositionEnd);\n        }\n    }\n}\nfunction $ed3b74ccfa001938$var$$updateTextNodeFromDOMContent(textNode, textContent, anchorOffset, focusOffset, compositionEnd) {\n    let node = textNode;\n    if (node.isAttached() && (compositionEnd || !node.isDirty())) {\n        const isComposing = node.isComposing();\n        let normalizedTextContent = textContent;\n        if ((isComposing || compositionEnd) && textContent[textContent.length - 1] === $ed3b74ccfa001938$var$COMPOSITION_SUFFIX) normalizedTextContent = textContent.slice(0, -1);\n        const prevTextContent = node.getTextContent();\n        if (compositionEnd || normalizedTextContent !== prevTextContent) {\n            if (normalizedTextContent === \"\") {\n                $ed3b74ccfa001938$var$$setCompositionKey(null);\n                if (!$ed3b74ccfa001938$var$IS_SAFARI && !$ed3b74ccfa001938$var$IS_IOS && !$ed3b74ccfa001938$var$IS_APPLE_WEBKIT) {\n                    // For composition (mainly Android), we have to remove the node on a later update\n                    const editor = $ed3b74ccfa001938$var$getActiveEditor();\n                    setTimeout(()=>{\n                        editor.update(()=>{\n                            if (node.isAttached()) node.remove();\n                        });\n                    }, 20);\n                } else node.remove();\n                return;\n            }\n            const parent = node.getParent();\n            const prevSelection = $ed3b74ccfa001938$var$$getPreviousSelection();\n            const compositionKey = $ed3b74ccfa001938$var$$getCompositionKey();\n            const nodeKey = node.getKey();\n            if (node.isToken() || compositionKey !== null && nodeKey === compositionKey && !isComposing || // Check if character was added at the start, and we need\n            // to clear this input from occurring as that action wasn't\n            // permitted.\n            parent !== null && $ed3b74ccfa001938$var$$isRangeSelection(prevSelection) && !parent.canInsertTextBefore() && prevSelection.anchor.offset === 0) {\n                node.markDirty();\n                return;\n            }\n            const selection = $ed3b74ccfa001938$var$$getSelection();\n            if (!$ed3b74ccfa001938$var$$isRangeSelection(selection) || anchorOffset === null || focusOffset === null) {\n                node.setTextContent(normalizedTextContent);\n                return;\n            }\n            selection.setTextNodeRange(node, anchorOffset, node, focusOffset);\n            if (node.isSegmented()) {\n                const originalTextContent = node.getTextContent();\n                const replacement = $ed3b74ccfa001938$var$$createTextNode(originalTextContent);\n                node.replace(replacement);\n                node = replacement;\n            }\n            node.setTextContent(normalizedTextContent);\n        }\n    }\n}\nfunction $ed3b74ccfa001938$var$$previousSiblingDoesNotAcceptText(node) {\n    const previousSibling = node.getPreviousSibling();\n    return ($ed3b74ccfa001938$var$$isTextNode(previousSibling) || $ed3b74ccfa001938$var$$isElementNode(previousSibling) && previousSibling.isInline()) && !previousSibling.canInsertTextAfter();\n} // This function is connected to $shouldPreventDefaultAndInsertText and determines whether the\n// TextNode boundaries are writable or we should use the previous/next sibling instead. For example,\n// in the case of a LinkNode, boundaries are not writable.\nfunction $ed3b74ccfa001938$var$$shouldInsertTextAfterOrBeforeTextNode(selection, node) {\n    if (node.isSegmented()) return true;\n    if (!selection.isCollapsed()) return false;\n    const offset = selection.anchor.offset;\n    const parent = node.getParentOrThrow();\n    const isToken = node.isToken();\n    if (offset === 0) return !node.canInsertTextBefore() || !parent.canInsertTextBefore() || isToken || $ed3b74ccfa001938$var$$previousSiblingDoesNotAcceptText(node);\n    else if (offset === node.getTextContentSize()) return !node.canInsertTextAfter() || !parent.canInsertTextAfter() || isToken;\n    else return false;\n}\nfunction $ed3b74ccfa001938$var$isTab(keyCode, altKey, ctrlKey, metaKey) {\n    return keyCode === 9 && !altKey && !ctrlKey && !metaKey;\n}\nfunction $ed3b74ccfa001938$var$isBold(keyCode, altKey, metaKey, ctrlKey) {\n    return keyCode === 66 && !altKey && $ed3b74ccfa001938$var$controlOrMeta(metaKey, ctrlKey);\n}\nfunction $ed3b74ccfa001938$var$isItalic(keyCode, altKey, metaKey, ctrlKey) {\n    return keyCode === 73 && !altKey && $ed3b74ccfa001938$var$controlOrMeta(metaKey, ctrlKey);\n}\nfunction $ed3b74ccfa001938$var$isUnderline(keyCode, altKey, metaKey, ctrlKey) {\n    return keyCode === 85 && !altKey && $ed3b74ccfa001938$var$controlOrMeta(metaKey, ctrlKey);\n}\nfunction $ed3b74ccfa001938$var$isParagraph(keyCode, shiftKey) {\n    return $ed3b74ccfa001938$var$isReturn(keyCode) && !shiftKey;\n}\nfunction $ed3b74ccfa001938$var$isLineBreak(keyCode, shiftKey) {\n    return $ed3b74ccfa001938$var$isReturn(keyCode) && shiftKey;\n} // Inserts a new line after the selection\nfunction $ed3b74ccfa001938$var$isOpenLineBreak(keyCode, ctrlKey) {\n    // 79 = KeyO\n    return $ed3b74ccfa001938$var$IS_APPLE && ctrlKey && keyCode === 79;\n}\nfunction $ed3b74ccfa001938$var$isDeleteWordBackward(keyCode, altKey, ctrlKey) {\n    return $ed3b74ccfa001938$var$isBackspace(keyCode) && ($ed3b74ccfa001938$var$IS_APPLE ? altKey : ctrlKey);\n}\nfunction $ed3b74ccfa001938$var$isDeleteWordForward(keyCode, altKey, ctrlKey) {\n    return $ed3b74ccfa001938$var$isDelete(keyCode) && ($ed3b74ccfa001938$var$IS_APPLE ? altKey : ctrlKey);\n}\nfunction $ed3b74ccfa001938$var$isDeleteLineBackward(keyCode, metaKey) {\n    return $ed3b74ccfa001938$var$IS_APPLE && metaKey && $ed3b74ccfa001938$var$isBackspace(keyCode);\n}\nfunction $ed3b74ccfa001938$var$isDeleteLineForward(keyCode, metaKey) {\n    return $ed3b74ccfa001938$var$IS_APPLE && metaKey && $ed3b74ccfa001938$var$isDelete(keyCode);\n}\nfunction $ed3b74ccfa001938$var$isDeleteBackward(keyCode, altKey, metaKey, ctrlKey) {\n    if ($ed3b74ccfa001938$var$IS_APPLE) {\n        if (altKey || metaKey) return false;\n        return $ed3b74ccfa001938$var$isBackspace(keyCode) || keyCode === 72 && ctrlKey;\n    }\n    if (ctrlKey || altKey || metaKey) return false;\n    return $ed3b74ccfa001938$var$isBackspace(keyCode);\n}\nfunction $ed3b74ccfa001938$var$isDeleteForward(keyCode, ctrlKey, shiftKey, altKey, metaKey) {\n    if ($ed3b74ccfa001938$var$IS_APPLE) {\n        if (shiftKey || altKey || metaKey) return false;\n        return $ed3b74ccfa001938$var$isDelete(keyCode) || keyCode === 68 && ctrlKey;\n    }\n    if (ctrlKey || altKey || metaKey) return false;\n    return $ed3b74ccfa001938$var$isDelete(keyCode);\n}\nfunction $ed3b74ccfa001938$var$isUndo(keyCode, shiftKey, metaKey, ctrlKey) {\n    return keyCode === 90 && !shiftKey && $ed3b74ccfa001938$var$controlOrMeta(metaKey, ctrlKey);\n}\nfunction $ed3b74ccfa001938$var$isRedo(keyCode, shiftKey, metaKey, ctrlKey) {\n    if ($ed3b74ccfa001938$var$IS_APPLE) return keyCode === 90 && metaKey && shiftKey;\n    return keyCode === 89 && ctrlKey || keyCode === 90 && ctrlKey && shiftKey;\n}\nfunction $ed3b74ccfa001938$var$isCopy(keyCode, shiftKey, metaKey, ctrlKey) {\n    if (shiftKey) return false;\n    if (keyCode === 67) return $ed3b74ccfa001938$var$IS_APPLE ? metaKey : ctrlKey;\n    return false;\n}\nfunction $ed3b74ccfa001938$var$isCut(keyCode, shiftKey, metaKey, ctrlKey) {\n    if (shiftKey) return false;\n    if (keyCode === 88) return $ed3b74ccfa001938$var$IS_APPLE ? metaKey : ctrlKey;\n    return false;\n}\nfunction $ed3b74ccfa001938$var$isArrowLeft(keyCode) {\n    return keyCode === 37;\n}\nfunction $ed3b74ccfa001938$var$isArrowRight(keyCode) {\n    return keyCode === 39;\n}\nfunction $ed3b74ccfa001938$var$isArrowUp(keyCode) {\n    return keyCode === 38;\n}\nfunction $ed3b74ccfa001938$var$isArrowDown(keyCode) {\n    return keyCode === 40;\n}\nfunction $ed3b74ccfa001938$var$isMoveBackward(keyCode, ctrlKey, altKey, metaKey) {\n    return $ed3b74ccfa001938$var$isArrowLeft(keyCode) && !ctrlKey && !metaKey && !altKey;\n}\nfunction $ed3b74ccfa001938$var$isMoveToStart(keyCode, ctrlKey, shiftKey, altKey, metaKey) {\n    return $ed3b74ccfa001938$var$isArrowLeft(keyCode) && !altKey && !shiftKey && (ctrlKey || metaKey);\n}\nfunction $ed3b74ccfa001938$var$isMoveForward(keyCode, ctrlKey, altKey, metaKey) {\n    return $ed3b74ccfa001938$var$isArrowRight(keyCode) && !ctrlKey && !metaKey && !altKey;\n}\nfunction $ed3b74ccfa001938$var$isMoveToEnd(keyCode, ctrlKey, shiftKey, altKey, metaKey) {\n    return $ed3b74ccfa001938$var$isArrowRight(keyCode) && !altKey && !shiftKey && (ctrlKey || metaKey);\n}\nfunction $ed3b74ccfa001938$var$isMoveUp(keyCode, ctrlKey, metaKey) {\n    return $ed3b74ccfa001938$var$isArrowUp(keyCode) && !ctrlKey && !metaKey;\n}\nfunction $ed3b74ccfa001938$var$isMoveDown(keyCode, ctrlKey, metaKey) {\n    return $ed3b74ccfa001938$var$isArrowDown(keyCode) && !ctrlKey && !metaKey;\n}\nfunction $ed3b74ccfa001938$var$isModifier(ctrlKey, shiftKey, altKey, metaKey) {\n    return ctrlKey || shiftKey || altKey || metaKey;\n}\nfunction $ed3b74ccfa001938$var$isSpace(keyCode) {\n    return keyCode === 32;\n}\nfunction $ed3b74ccfa001938$var$controlOrMeta(metaKey, ctrlKey) {\n    if ($ed3b74ccfa001938$var$IS_APPLE) return metaKey;\n    return ctrlKey;\n}\nfunction $ed3b74ccfa001938$var$isReturn(keyCode) {\n    return keyCode === 13;\n}\nfunction $ed3b74ccfa001938$var$isBackspace(keyCode) {\n    return keyCode === 8;\n}\nfunction $ed3b74ccfa001938$var$isEscape(keyCode) {\n    return keyCode === 27;\n}\nfunction $ed3b74ccfa001938$var$isDelete(keyCode) {\n    return keyCode === 46;\n}\nfunction $ed3b74ccfa001938$var$getCachedClassNameArray(classNamesTheme, classNameThemeType) {\n    const classNames = classNamesTheme[classNameThemeType]; // As we're using classList, we need\n    // to handle className tokens that have spaces.\n    // The easiest way to do this to convert the\n    // className tokens to an array that can be\n    // applied to classList.add()/remove().\n    if (typeof classNames === \"string\") {\n        const classNamesArr = classNames.split(\" \");\n        classNamesTheme[classNameThemeType] = classNamesArr;\n        return classNamesArr;\n    }\n    return classNames;\n}\nfunction $ed3b74ccfa001938$var$setMutatedNode(mutatedNodes, registeredNodes, mutationListeners, node, mutation) {\n    if (mutationListeners.size === 0) return;\n    const nodeType = node.__type;\n    const nodeKey = node.__key;\n    const registeredNode = registeredNodes.get(nodeType);\n    if (registeredNode === undefined) throw Error(`Type ${nodeType} not in registeredNodes`);\n    const klass = registeredNode.klass;\n    let mutatedNodesByType = mutatedNodes.get(klass);\n    if (mutatedNodesByType === undefined) {\n        mutatedNodesByType = new Map();\n        mutatedNodes.set(klass, mutatedNodesByType);\n    }\n    const prevMutation = mutatedNodesByType.get(nodeKey); // If the node has already been \"destroyed\", yet we are\n    // re-making it, then this means a move likely happened.\n    // We should change the mutation to be that of \"updated\"\n    // instead.\n    const isMove = prevMutation === \"destroyed\" && mutation === \"created\";\n    if (prevMutation === undefined || isMove) mutatedNodesByType.set(nodeKey, isMove ? \"updated\" : mutation);\n}\nfunction $ed3b74ccfa001938$var$$nodesOfType(klass) {\n    const editorState = $ed3b74ccfa001938$var$getActiveEditorState();\n    const readOnly = editorState._readOnly;\n    const klassType = klass.getType();\n    const nodes = editorState._nodeMap;\n    const nodesOfType = [];\n    for (const [, node] of nodes)if (node instanceof klass && node.__type === klassType && (readOnly || node.isAttached())) nodesOfType.push(node);\n    return nodesOfType;\n}\nfunction $ed3b74ccfa001938$var$resolveElement(element, isBackward, focusOffset) {\n    const parent = element.getParent();\n    let offset = focusOffset;\n    let block = element;\n    if (parent !== null) {\n        if (isBackward && focusOffset === 0) {\n            offset = block.getIndexWithinParent();\n            block = parent;\n        } else if (!isBackward && focusOffset === block.getChildrenSize()) {\n            offset = block.getIndexWithinParent() + 1;\n            block = parent;\n        }\n    }\n    return block.getChildAtIndex(isBackward ? offset - 1 : offset);\n}\nfunction $ed3b74ccfa001938$var$$getAdjacentNode(focus, isBackward) {\n    const focusOffset = focus.offset;\n    if (focus.type === \"element\") {\n        const block = focus.getNode();\n        return $ed3b74ccfa001938$var$resolveElement(block, isBackward, focusOffset);\n    } else {\n        const focusNode = focus.getNode();\n        if (isBackward && focusOffset === 0 || !isBackward && focusOffset === focusNode.getTextContentSize()) {\n            const possibleNode = isBackward ? focusNode.getPreviousSibling() : focusNode.getNextSibling();\n            if (possibleNode === null) return $ed3b74ccfa001938$var$resolveElement(focusNode.getParentOrThrow(), isBackward, focusNode.getIndexWithinParent() + (isBackward ? 0 : 1));\n            return possibleNode;\n        }\n    }\n    return null;\n}\nfunction $ed3b74ccfa001938$var$isFirefoxClipboardEvents(editor) {\n    const event = $ed3b74ccfa001938$var$getWindow(editor).event;\n    const inputType = event && event.inputType;\n    return inputType === \"insertFromPaste\" || inputType === \"insertFromPasteAsQuotation\";\n}\nfunction $ed3b74ccfa001938$var$dispatchCommand(editor, command, payload) {\n    return $ed3b74ccfa001938$var$triggerCommandListeners(editor, command, payload);\n}\nfunction $ed3b74ccfa001938$var$$textContentRequiresDoubleLinebreakAtEnd(node) {\n    return !$ed3b74ccfa001938$var$$isRootNode(node) && !node.isLastChild() && !node.isInline();\n}\nfunction $ed3b74ccfa001938$var$getElementByKeyOrThrow(editor, key) {\n    const element = editor._keyToDOMMap.get(key);\n    if (element === undefined) throw Error(`Reconciliation: could not find DOM element for node key ${key}`);\n    return element;\n}\nfunction $ed3b74ccfa001938$var$getParentElement(node) {\n    const parentElement = node.assignedSlot || node.parentElement;\n    return parentElement !== null && parentElement.nodeType === 11 ? parentElement.host : parentElement;\n}\nfunction $ed3b74ccfa001938$var$scrollIntoViewIfNeeded(editor, selectionRect, rootElement) {\n    const doc = rootElement.ownerDocument;\n    const defaultView = doc.defaultView;\n    if (defaultView === null) return;\n    let { top: currentTop , bottom: currentBottom  } = selectionRect;\n    let targetTop = 0;\n    let targetBottom = 0;\n    let element = rootElement;\n    while(element !== null){\n        const isBodyElement = element === doc.body;\n        if (isBodyElement) {\n            targetTop = 0;\n            targetBottom = $ed3b74ccfa001938$var$getWindow(editor).innerHeight;\n        } else {\n            const targetRect = element.getBoundingClientRect();\n            targetTop = targetRect.top;\n            targetBottom = targetRect.bottom;\n        }\n        let diff = 0;\n        if (currentTop < targetTop) diff = -(targetTop - currentTop);\n        else if (currentBottom > targetBottom) diff = currentBottom - targetBottom;\n        if (diff !== 0) {\n            if (isBodyElement) // Only handles scrolling of Y axis\n            defaultView.scrollBy(0, diff);\n            else {\n                const scrollTop = element.scrollTop;\n                element.scrollTop += diff;\n                const yOffset = element.scrollTop - scrollTop;\n                currentTop -= yOffset;\n                currentBottom -= yOffset;\n            }\n        }\n        if (isBodyElement) break;\n        element = $ed3b74ccfa001938$var$getParentElement(element);\n    }\n}\nfunction $ed3b74ccfa001938$var$$addUpdateTag(tag) {\n    $ed3b74ccfa001938$var$errorOnReadOnly();\n    const editor = $ed3b74ccfa001938$var$getActiveEditor();\n    editor._updateTags.add(tag);\n}\nfunction $ed3b74ccfa001938$var$$maybeMoveChildrenSelectionToParent(parentNode, offset = 0) {\n    if (offset !== 0) throw Error(`TODO`);\n    const selection = $ed3b74ccfa001938$var$$getSelection();\n    if (!$ed3b74ccfa001938$var$$isRangeSelection(selection) || !$ed3b74ccfa001938$var$$isElementNode(parentNode)) return selection;\n    const { anchor: anchor , focus: focus  } = selection;\n    const anchorNode = anchor.getNode();\n    const focusNode = focus.getNode();\n    if ($ed3b74ccfa001938$var$$hasAncestor(anchorNode, parentNode)) anchor.set(parentNode.__key, 0, \"element\");\n    if ($ed3b74ccfa001938$var$$hasAncestor(focusNode, parentNode)) focus.set(parentNode.__key, 0, \"element\");\n    return selection;\n}\nfunction $ed3b74ccfa001938$var$$hasAncestor(child, targetNode) {\n    let parent = child.getParent();\n    while(parent !== null){\n        if (parent.is(targetNode)) return true;\n        parent = parent.getParent();\n    }\n    return false;\n}\nfunction $ed3b74ccfa001938$var$getDefaultView(domElem) {\n    const ownerDoc = domElem.ownerDocument;\n    return ownerDoc && ownerDoc.defaultView || null;\n}\nfunction $ed3b74ccfa001938$var$getWindow(editor) {\n    const windowObj = editor._window;\n    if (windowObj === null) throw Error(`window object not found`);\n    return windowObj;\n}\nfunction $ed3b74ccfa001938$var$$isInlineElementOrDecoratorNode(node) {\n    return $ed3b74ccfa001938$var$$isElementNode(node) && node.isInline() || $ed3b74ccfa001938$var$$isDecoratorNode(node) && node.isInline();\n}\nfunction $ed3b74ccfa001938$var$$getNearestRootOrShadowRoot(node) {\n    let parent = node.getParentOrThrow();\n    while(parent !== null){\n        if ($ed3b74ccfa001938$var$$isRootOrShadowRoot(parent)) return parent;\n        parent = parent.getParentOrThrow();\n    }\n    return parent;\n}\nfunction $ed3b74ccfa001938$var$$isRootOrShadowRoot(node) {\n    return $ed3b74ccfa001938$var$$isRootNode(node) || $ed3b74ccfa001938$var$$isElementNode(node) && node.isShadowRoot();\n}\nfunction $ed3b74ccfa001938$var$$copyNode(node) {\n    // @ts-ignore\n    const copy = node.constructor.clone(node);\n    $ed3b74ccfa001938$var$$setNodeKey(copy, null);\n    return copy;\n}\nfunction $ed3b74ccfa001938$var$$applyNodeReplacement(node) {\n    const editor = $ed3b74ccfa001938$var$getActiveEditor();\n    const nodeType = node.constructor.getType();\n    const registeredNode = editor._nodes.get(nodeType);\n    if (registeredNode === undefined) throw Error(`$initializeNode failed. Ensure node has been registered to the editor. You can do this by passing the node class via the \"nodes\" array in the editor config.`);\n    const replaceFunc = registeredNode.replace;\n    if (replaceFunc !== null) {\n        const replacementNode = replaceFunc(node);\n        if (!(replacementNode instanceof node.constructor)) throw Error(`$initializeNode failed. Ensure replacement node is a subclass of the original node.`);\n        return replacementNode;\n    }\n    return node;\n}\nfunction $ed3b74ccfa001938$var$errorOnInsertTextNodeOnRoot(node, insertNode) {\n    const parentNode = node.getParent();\n    if ($ed3b74ccfa001938$var$$isRootNode(parentNode) && !$ed3b74ccfa001938$var$$isElementNode(insertNode) && !$ed3b74ccfa001938$var$$isDecoratorNode(insertNode)) throw Error(`Only element or decorator nodes can be inserted in to the root node`);\n}\nfunction $ed3b74ccfa001938$var$createBlockCursorElement(editorConfig) {\n    const theme = editorConfig.theme;\n    const element = document.createElement(\"div\");\n    element.contentEditable = \"false\";\n    element.setAttribute(\"data-lexical-cursor\", \"true\");\n    let blockCursorTheme = theme.blockCursor;\n    if (blockCursorTheme !== undefined) {\n        if (typeof blockCursorTheme === \"string\") {\n            const classNamesArr = blockCursorTheme.split(\" \"); // @ts-expect-error: intentional\n            blockCursorTheme = theme.blockCursor = classNamesArr;\n        }\n        if (blockCursorTheme !== undefined) element.classList.add(...blockCursorTheme);\n    }\n    return element;\n}\nfunction $ed3b74ccfa001938$var$needsBlockCursor(node) {\n    return ($ed3b74ccfa001938$var$$isDecoratorNode(node) || $ed3b74ccfa001938$var$$isElementNode(node) && !node.canBeEmpty()) && !node.isInline();\n}\nfunction $ed3b74ccfa001938$var$removeDOMBlockCursorElement(blockCursorElement, editor, rootElement) {\n    rootElement.style.removeProperty(\"caret-color\");\n    editor._blockCursorElement = null;\n    const parentElement = blockCursorElement.parentElement;\n    if (parentElement !== null) parentElement.removeChild(blockCursorElement);\n}\nfunction $ed3b74ccfa001938$var$updateDOMBlockCursorElement(editor, rootElement, nextSelection) {\n    let blockCursorElement = editor._blockCursorElement;\n    if ($ed3b74ccfa001938$var$$isRangeSelection(nextSelection) && nextSelection.isCollapsed() && nextSelection.anchor.type === \"element\" && rootElement.contains(document.activeElement)) {\n        const anchor = nextSelection.anchor;\n        const elementNode = anchor.getNode();\n        const offset = anchor.offset;\n        const elementNodeSize = elementNode.getChildrenSize();\n        let isBlockCursor = false;\n        let insertBeforeElement = null;\n        if (offset === elementNodeSize) {\n            const child = elementNode.getChildAtIndex(offset - 1);\n            if ($ed3b74ccfa001938$var$needsBlockCursor(child)) isBlockCursor = true;\n        } else {\n            const child = elementNode.getChildAtIndex(offset);\n            if ($ed3b74ccfa001938$var$needsBlockCursor(child)) {\n                const sibling = child.getPreviousSibling();\n                if (sibling === null || $ed3b74ccfa001938$var$needsBlockCursor(sibling)) {\n                    isBlockCursor = true;\n                    insertBeforeElement = editor.getElementByKey(child.__key);\n                }\n            }\n        }\n        if (isBlockCursor) {\n            const elementDOM = editor.getElementByKey(elementNode.__key);\n            if (blockCursorElement === null) editor._blockCursorElement = blockCursorElement = $ed3b74ccfa001938$var$createBlockCursorElement(editor._config);\n            rootElement.style.caretColor = \"transparent\";\n            if (insertBeforeElement === null) elementDOM.appendChild(blockCursorElement);\n            else elementDOM.insertBefore(blockCursorElement, insertBeforeElement);\n            return;\n        }\n    } // Remove cursor\n    if (blockCursorElement !== null) $ed3b74ccfa001938$var$removeDOMBlockCursorElement(blockCursorElement, editor, rootElement);\n}\nfunction $ed3b74ccfa001938$var$getDOMSelection(targetWindow) {\n    return !$ed3b74ccfa001938$var$CAN_USE_DOM ? null : (targetWindow || window).getSelection();\n}\nfunction $ed3b74ccfa001938$var$$splitNode(node, offset) {\n    let startNode = node.getChildAtIndex(offset);\n    if (startNode == null) startNode = node;\n    if (!!$ed3b74ccfa001938$var$$isRootOrShadowRoot(node)) throw Error(`Can not call $splitNode() on root element`);\n    const recurse = (currentNode)=>{\n        const parent = currentNode.getParentOrThrow();\n        const isParentRoot = $ed3b74ccfa001938$var$$isRootOrShadowRoot(parent); // The node we start split from (leaf) is moved, but its recursive\n        // parents are copied to create separate tree\n        const nodeToMove = currentNode === startNode && !isParentRoot ? currentNode : $ed3b74ccfa001938$var$$copyNode(currentNode);\n        if (isParentRoot) {\n            currentNode.insertAfter(nodeToMove);\n            return [\n                currentNode,\n                nodeToMove,\n                nodeToMove\n            ];\n        } else {\n            const [leftTree, rightTree, newParent] = recurse(parent);\n            const nextSiblings = currentNode.getNextSiblings();\n            newParent.append(nodeToMove, ...nextSiblings);\n            return [\n                leftTree,\n                rightTree,\n                nodeToMove\n            ];\n        }\n    };\n    const [leftTree, rightTree] = recurse(startNode);\n    return [\n        leftTree,\n        rightTree\n    ];\n}\nfunction $ed3b74ccfa001938$var$$findMatchingParent(startingNode, findFn) {\n    let curr = startingNode;\n    while(curr !== $ed3b74ccfa001938$var$$getRoot() && curr != null){\n        if (findFn(curr)) return curr;\n        curr = curr.getParent();\n    }\n    return null;\n}\nfunction $ed3b74ccfa001938$var$$getChildrenRecursively(node) {\n    const nodes = [];\n    const stack = [\n        node\n    ];\n    while(stack.length > 0){\n        const currentNode = stack.pop();\n        if (!(currentNode !== undefined)) throw Error(`Stack.length > 0; can't be undefined`);\n        if ($ed3b74ccfa001938$var$$isElementNode(currentNode)) stack.unshift(...currentNode.getChildren());\n        if (currentNode !== node) nodes.push(currentNode);\n    }\n    return nodes;\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ function $ed3b74ccfa001938$var$$garbageCollectDetachedDecorators(editor, pendingEditorState) {\n    const currentDecorators = editor._decorators;\n    const pendingDecorators = editor._pendingDecorators;\n    let decorators = pendingDecorators || currentDecorators;\n    const nodeMap = pendingEditorState._nodeMap;\n    let key;\n    for(key in decorators)if (!nodeMap.has(key)) {\n        if (decorators === currentDecorators) decorators = $ed3b74ccfa001938$var$cloneDecorators(editor);\n        delete decorators[key];\n    }\n}\nfunction $ed3b74ccfa001938$var$$garbageCollectDetachedDeepChildNodes(node, parentKey, prevNodeMap, nodeMap, dirtyNodes) {\n    let child = node.getFirstChild();\n    while(child !== null){\n        const childKey = child.__key;\n        if (child !== undefined && child.__parent === parentKey) {\n            if ($ed3b74ccfa001938$var$$isElementNode(child)) $ed3b74ccfa001938$var$$garbageCollectDetachedDeepChildNodes(child, childKey, prevNodeMap, nodeMap, dirtyNodes);\n             // If we have created a node and it was dereferenced, then also\n            // remove it from out dirty nodes Set.\n            if (!prevNodeMap.has(childKey)) dirtyNodes.delete(childKey);\n            nodeMap.delete(childKey);\n        }\n        child = child.isAttached() ? child.getNextSibling() : null;\n    }\n}\nfunction $ed3b74ccfa001938$var$$garbageCollectDetachedNodes(prevEditorState, editorState, dirtyLeaves, dirtyElements) {\n    const prevNodeMap = prevEditorState._nodeMap;\n    const nodeMap = editorState._nodeMap;\n    for (const nodeKey of dirtyLeaves){\n        const node = nodeMap.get(nodeKey);\n        if (node !== undefined && !node.isAttached()) {\n            if (!prevNodeMap.has(nodeKey)) dirtyLeaves.delete(nodeKey);\n            nodeMap.delete(nodeKey);\n        }\n    }\n    for (const [nodeKey] of dirtyElements){\n        const node = nodeMap.get(nodeKey);\n        if (node !== undefined) // Garbage collect node and its children if they exist\n        {\n            if (!node.isAttached()) {\n                if ($ed3b74ccfa001938$var$$isElementNode(node)) $ed3b74ccfa001938$var$$garbageCollectDetachedDeepChildNodes(node, nodeKey, prevNodeMap, nodeMap, dirtyElements);\n                 // If we have created a node and it was dereferenced, then also\n                // remove it from out dirty nodes Set.\n                if (!prevNodeMap.has(nodeKey)) dirtyElements.delete(nodeKey);\n                nodeMap.delete(nodeKey);\n            }\n        }\n    }\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ function $ed3b74ccfa001938$var$$canSimpleTextNodesBeMerged(node1, node2) {\n    const node1Mode = node1.__mode;\n    const node1Format = node1.__format;\n    const node1Style = node1.__style;\n    const node2Mode = node2.__mode;\n    const node2Format = node2.__format;\n    const node2Style = node2.__style;\n    return (node1Mode === null || node1Mode === node2Mode) && (node1Format === null || node1Format === node2Format) && (node1Style === null || node1Style === node2Style);\n}\nfunction $ed3b74ccfa001938$var$$mergeTextNodes(node1, node2) {\n    const writableNode1 = node1.mergeWithSibling(node2);\n    const normalizedNodes = $ed3b74ccfa001938$var$getActiveEditor()._normalizedNodes;\n    normalizedNodes.add(node1.__key);\n    normalizedNodes.add(node2.__key);\n    return writableNode1;\n}\nfunction $ed3b74ccfa001938$var$$normalizeTextNode(textNode) {\n    let node = textNode;\n    if (node.__text === \"\" && node.isSimpleText() && !node.isUnmergeable()) {\n        node.remove();\n        return;\n    } // Backward\n    let previousNode;\n    while((previousNode = node.getPreviousSibling()) !== null && $ed3b74ccfa001938$var$$isTextNode(previousNode) && previousNode.isSimpleText() && !previousNode.isUnmergeable()){\n        if (previousNode.__text === \"\") previousNode.remove();\n        else if ($ed3b74ccfa001938$var$$canSimpleTextNodesBeMerged(previousNode, node)) {\n            node = $ed3b74ccfa001938$var$$mergeTextNodes(previousNode, node);\n            break;\n        } else break;\n    } // Forward\n    let nextNode;\n    while((nextNode = node.getNextSibling()) !== null && $ed3b74ccfa001938$var$$isTextNode(nextNode) && nextNode.isSimpleText() && !nextNode.isUnmergeable()){\n        if (nextNode.__text === \"\") nextNode.remove();\n        else if ($ed3b74ccfa001938$var$$canSimpleTextNodesBeMerged(node, nextNode)) {\n            node = $ed3b74ccfa001938$var$$mergeTextNodes(node, nextNode);\n            break;\n        } else break;\n    }\n}\nfunction $ed3b74ccfa001938$var$$normalizeSelection(selection) {\n    $ed3b74ccfa001938$var$$normalizePoint(selection.anchor);\n    $ed3b74ccfa001938$var$$normalizePoint(selection.focus);\n    return selection;\n}\nfunction $ed3b74ccfa001938$var$$normalizePoint(point) {\n    while(point.type === \"element\"){\n        const node = point.getNode();\n        const offset = point.offset;\n        let nextNode;\n        let nextOffsetAtEnd;\n        if (offset === node.getChildrenSize()) {\n            nextNode = node.getChildAtIndex(offset - 1);\n            nextOffsetAtEnd = true;\n        } else {\n            nextNode = node.getChildAtIndex(offset);\n            nextOffsetAtEnd = false;\n        }\n        if ($ed3b74ccfa001938$var$$isTextNode(nextNode)) {\n            point.set(nextNode.__key, nextOffsetAtEnd ? nextNode.getTextContentSize() : 0, \"text\");\n            break;\n        } else if (!$ed3b74ccfa001938$var$$isElementNode(nextNode)) break;\n        point.set(nextNode.__key, nextOffsetAtEnd ? nextNode.getChildrenSize() : 0, \"element\");\n    }\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ let $ed3b74ccfa001938$var$subTreeTextContent = \"\";\nlet $ed3b74ccfa001938$var$subTreeDirectionedTextContent = \"\";\nlet $ed3b74ccfa001938$var$editorTextContent = \"\";\nlet $ed3b74ccfa001938$var$activeEditorConfig;\nlet $ed3b74ccfa001938$var$activeEditor$1;\nlet $ed3b74ccfa001938$var$activeEditorNodes;\nlet $ed3b74ccfa001938$var$treatAllNodesAsDirty = false;\nlet $ed3b74ccfa001938$var$activeEditorStateReadOnly = false;\nlet $ed3b74ccfa001938$var$activeMutationListeners;\nlet $ed3b74ccfa001938$var$activeTextDirection = null;\nlet $ed3b74ccfa001938$var$activeDirtyElements;\nlet $ed3b74ccfa001938$var$activeDirtyLeaves;\nlet $ed3b74ccfa001938$var$activePrevNodeMap;\nlet $ed3b74ccfa001938$var$activeNextNodeMap;\nlet $ed3b74ccfa001938$var$activePrevKeyToDOMMap;\nlet $ed3b74ccfa001938$var$mutatedNodes;\nfunction $ed3b74ccfa001938$var$destroyNode(key, parentDOM) {\n    const node = $ed3b74ccfa001938$var$activePrevNodeMap.get(key);\n    if (parentDOM !== null) {\n        const dom = $ed3b74ccfa001938$var$getPrevElementByKeyOrThrow(key);\n        if (dom.parentNode === parentDOM) parentDOM.removeChild(dom);\n    } // This logic is really important, otherwise we will leak DOM nodes\n    // when their corresponding LexicalNodes are removed from the editor state.\n    if (!$ed3b74ccfa001938$var$activeNextNodeMap.has(key)) $ed3b74ccfa001938$var$activeEditor$1._keyToDOMMap.delete(key);\n    if ($ed3b74ccfa001938$var$$isElementNode(node)) {\n        const children = $ed3b74ccfa001938$var$createChildrenArray(node, $ed3b74ccfa001938$var$activePrevNodeMap);\n        $ed3b74ccfa001938$var$destroyChildren(children, 0, children.length - 1, null);\n    }\n    if (node !== undefined) $ed3b74ccfa001938$var$setMutatedNode($ed3b74ccfa001938$var$mutatedNodes, $ed3b74ccfa001938$var$activeEditorNodes, $ed3b74ccfa001938$var$activeMutationListeners, node, \"destroyed\");\n}\nfunction $ed3b74ccfa001938$var$destroyChildren(children, _startIndex, endIndex, dom) {\n    let startIndex = _startIndex;\n    for(; startIndex <= endIndex; ++startIndex){\n        const child = children[startIndex];\n        if (child !== undefined) $ed3b74ccfa001938$var$destroyNode(child, dom);\n    }\n}\nfunction $ed3b74ccfa001938$var$setTextAlign(domStyle, value) {\n    domStyle.setProperty(\"text-align\", value);\n}\nconst $ed3b74ccfa001938$var$DEFAULT_INDENT_VALUE = \"20px\";\nfunction $ed3b74ccfa001938$var$setElementIndent(dom, indent) {\n    const indentClassName = $ed3b74ccfa001938$var$activeEditorConfig.theme.indent;\n    if (typeof indentClassName === \"string\") {\n        const elementHasClassName = dom.classList.contains(indentClassName);\n        if (indent > 0 && !elementHasClassName) dom.classList.add(indentClassName);\n        else if (indent < 1 && elementHasClassName) dom.classList.remove(indentClassName);\n    }\n    const indentationBaseValue = getComputedStyle(dom).getPropertyValue(\"--lexical-indent-base-value\") || $ed3b74ccfa001938$var$DEFAULT_INDENT_VALUE;\n    dom.style.setProperty(\"padding-inline-start\", indent === 0 ? \"\" : `calc(${indent} * ${indentationBaseValue})`);\n}\nfunction $ed3b74ccfa001938$var$setElementFormat(dom, format) {\n    const domStyle = dom.style;\n    if (format === 0) $ed3b74ccfa001938$var$setTextAlign(domStyle, \"\");\n    else if (format === $ed3b74ccfa001938$var$IS_ALIGN_LEFT) $ed3b74ccfa001938$var$setTextAlign(domStyle, \"left\");\n    else if (format === $ed3b74ccfa001938$var$IS_ALIGN_CENTER) $ed3b74ccfa001938$var$setTextAlign(domStyle, \"center\");\n    else if (format === $ed3b74ccfa001938$var$IS_ALIGN_RIGHT) $ed3b74ccfa001938$var$setTextAlign(domStyle, \"right\");\n    else if (format === $ed3b74ccfa001938$var$IS_ALIGN_JUSTIFY) $ed3b74ccfa001938$var$setTextAlign(domStyle, \"justify\");\n    else if (format === $ed3b74ccfa001938$var$IS_ALIGN_START) $ed3b74ccfa001938$var$setTextAlign(domStyle, \"start\");\n    else if (format === $ed3b74ccfa001938$var$IS_ALIGN_END) $ed3b74ccfa001938$var$setTextAlign(domStyle, \"end\");\n}\nfunction $ed3b74ccfa001938$var$createNode(key, parentDOM, insertDOM) {\n    const node = $ed3b74ccfa001938$var$activeNextNodeMap.get(key);\n    if (node === undefined) throw Error(`createNode: node does not exist in nodeMap`);\n    const dom = node.createDOM($ed3b74ccfa001938$var$activeEditorConfig, $ed3b74ccfa001938$var$activeEditor$1);\n    $ed3b74ccfa001938$var$storeDOMWithKey(key, dom, $ed3b74ccfa001938$var$activeEditor$1); // This helps preserve the text, and stops spell check tools from\n    // merging or break the spans (which happens if they are missing\n    // this attribute).\n    if ($ed3b74ccfa001938$var$$isTextNode(node)) dom.setAttribute(\"data-lexical-text\", \"true\");\n    else if ($ed3b74ccfa001938$var$$isDecoratorNode(node)) dom.setAttribute(\"data-lexical-decorator\", \"true\");\n    if ($ed3b74ccfa001938$var$$isElementNode(node)) {\n        const indent = node.__indent;\n        const childrenSize = node.__size;\n        if (indent !== 0) $ed3b74ccfa001938$var$setElementIndent(dom, indent);\n        if (childrenSize !== 0) {\n            const endIndex = childrenSize - 1;\n            const children = $ed3b74ccfa001938$var$createChildrenArray(node, $ed3b74ccfa001938$var$activeNextNodeMap);\n            $ed3b74ccfa001938$var$createChildrenWithDirection(children, endIndex, node, dom);\n        }\n        const format = node.__format;\n        if (format !== 0) $ed3b74ccfa001938$var$setElementFormat(dom, format);\n        if (!node.isInline()) $ed3b74ccfa001938$var$reconcileElementTerminatingLineBreak(null, node, dom);\n        if ($ed3b74ccfa001938$var$$textContentRequiresDoubleLinebreakAtEnd(node)) {\n            $ed3b74ccfa001938$var$subTreeTextContent += $ed3b74ccfa001938$var$DOUBLE_LINE_BREAK;\n            $ed3b74ccfa001938$var$editorTextContent += $ed3b74ccfa001938$var$DOUBLE_LINE_BREAK;\n        }\n    } else {\n        const text = node.getTextContent();\n        if ($ed3b74ccfa001938$var$$isDecoratorNode(node)) {\n            const decorator = node.decorate($ed3b74ccfa001938$var$activeEditor$1, $ed3b74ccfa001938$var$activeEditorConfig);\n            if (decorator !== null) $ed3b74ccfa001938$var$reconcileDecorator(key, decorator);\n             // Decorators are always non editable\n            dom.contentEditable = \"false\";\n        } else if ($ed3b74ccfa001938$var$$isTextNode(node)) {\n            if (!node.isDirectionless()) $ed3b74ccfa001938$var$subTreeDirectionedTextContent += text;\n        }\n        $ed3b74ccfa001938$var$subTreeTextContent += text;\n        $ed3b74ccfa001938$var$editorTextContent += text;\n    }\n    if (parentDOM !== null) {\n        if (insertDOM != null) parentDOM.insertBefore(dom, insertDOM);\n        else {\n            // @ts-expect-error: internal field\n            const possibleLineBreak = parentDOM.__lexicalLineBreak;\n            if (possibleLineBreak != null) parentDOM.insertBefore(dom, possibleLineBreak);\n            else parentDOM.appendChild(dom);\n        }\n    }\n    // Freeze the node in DEV to prevent accidental mutations\n    Object.freeze(node);\n    $ed3b74ccfa001938$var$setMutatedNode($ed3b74ccfa001938$var$mutatedNodes, $ed3b74ccfa001938$var$activeEditorNodes, $ed3b74ccfa001938$var$activeMutationListeners, node, \"created\");\n    return dom;\n}\nfunction $ed3b74ccfa001938$var$createChildrenWithDirection(children, endIndex, element, dom) {\n    const previousSubTreeDirectionedTextContent = $ed3b74ccfa001938$var$subTreeDirectionedTextContent;\n    $ed3b74ccfa001938$var$subTreeDirectionedTextContent = \"\";\n    $ed3b74ccfa001938$var$createChildren(children, element, 0, endIndex, dom, null);\n    $ed3b74ccfa001938$var$reconcileBlockDirection(element, dom);\n    $ed3b74ccfa001938$var$subTreeDirectionedTextContent = previousSubTreeDirectionedTextContent;\n}\nfunction $ed3b74ccfa001938$var$createChildren(children, element, _startIndex, endIndex, dom, insertDOM) {\n    const previousSubTreeTextContent = $ed3b74ccfa001938$var$subTreeTextContent;\n    $ed3b74ccfa001938$var$subTreeTextContent = \"\";\n    let startIndex = _startIndex;\n    for(; startIndex <= endIndex; ++startIndex)$ed3b74ccfa001938$var$createNode(children[startIndex], dom, insertDOM);\n    if ($ed3b74ccfa001938$var$$textContentRequiresDoubleLinebreakAtEnd(element)) $ed3b74ccfa001938$var$subTreeTextContent += $ed3b74ccfa001938$var$DOUBLE_LINE_BREAK;\n     // @ts-expect-error: internal field\n    dom.__lexicalTextContent = $ed3b74ccfa001938$var$subTreeTextContent;\n    $ed3b74ccfa001938$var$subTreeTextContent = previousSubTreeTextContent + $ed3b74ccfa001938$var$subTreeTextContent;\n}\nfunction $ed3b74ccfa001938$var$isLastChildLineBreakOrDecorator(childKey, nodeMap) {\n    const node = nodeMap.get(childKey);\n    return $ed3b74ccfa001938$var$$isLineBreakNode(node) || $ed3b74ccfa001938$var$$isDecoratorNode(node) && node.isInline();\n} // If we end an element with a LineBreakNode, then we need to add an additional <br>\nfunction $ed3b74ccfa001938$var$reconcileElementTerminatingLineBreak(prevElement, nextElement, dom) {\n    const prevLineBreak = prevElement !== null && (prevElement.__size === 0 || $ed3b74ccfa001938$var$isLastChildLineBreakOrDecorator(prevElement.__last, $ed3b74ccfa001938$var$activePrevNodeMap));\n    const nextLineBreak = nextElement.__size === 0 || $ed3b74ccfa001938$var$isLastChildLineBreakOrDecorator(nextElement.__last, $ed3b74ccfa001938$var$activeNextNodeMap);\n    if (prevLineBreak) {\n        if (!nextLineBreak) {\n            // @ts-expect-error: internal field\n            const element = dom.__lexicalLineBreak;\n            if (element != null) dom.removeChild(element);\n             // @ts-expect-error: internal field\n            dom.__lexicalLineBreak = null;\n        }\n    } else if (nextLineBreak) {\n        const element = document.createElement(\"br\"); // @ts-expect-error: internal field\n        dom.__lexicalLineBreak = element;\n        dom.appendChild(element);\n    }\n}\nfunction $ed3b74ccfa001938$var$reconcileBlockDirection(element, dom) {\n    const previousSubTreeDirectionTextContent = dom.__lexicalDirTextContent; // @ts-expect-error: internal field\n    const previousDirection = dom.__lexicalDir;\n    if (previousSubTreeDirectionTextContent !== $ed3b74ccfa001938$var$subTreeDirectionedTextContent || previousDirection !== $ed3b74ccfa001938$var$activeTextDirection) {\n        const hasEmptyDirectionedTextContent = $ed3b74ccfa001938$var$subTreeDirectionedTextContent === \"\";\n        const direction = hasEmptyDirectionedTextContent ? $ed3b74ccfa001938$var$activeTextDirection : $ed3b74ccfa001938$var$getTextDirection($ed3b74ccfa001938$var$subTreeDirectionedTextContent);\n        if (direction !== previousDirection) {\n            const classList = dom.classList;\n            const theme = $ed3b74ccfa001938$var$activeEditorConfig.theme;\n            let previousDirectionTheme = previousDirection !== null ? theme[previousDirection] : undefined;\n            let nextDirectionTheme = direction !== null ? theme[direction] : undefined; // Remove the old theme classes if they exist\n            if (previousDirectionTheme !== undefined) {\n                if (typeof previousDirectionTheme === \"string\") {\n                    const classNamesArr = previousDirectionTheme.split(\" \");\n                    previousDirectionTheme = theme[previousDirection] = classNamesArr;\n                } // @ts-ignore: intentional\n                classList.remove(...previousDirectionTheme);\n            }\n            if (direction === null || hasEmptyDirectionedTextContent && direction === \"ltr\") // Remove direction\n            dom.removeAttribute(\"dir\");\n            else {\n                // Apply the new theme classes if they exist\n                if (nextDirectionTheme !== undefined) {\n                    if (typeof nextDirectionTheme === \"string\") {\n                        const classNamesArr = nextDirectionTheme.split(\" \"); // @ts-expect-error: intentional\n                        nextDirectionTheme = theme[direction] = classNamesArr;\n                    }\n                    if (nextDirectionTheme !== undefined) classList.add(...nextDirectionTheme);\n                } // Update direction\n                dom.dir = direction;\n            }\n            if (!$ed3b74ccfa001938$var$activeEditorStateReadOnly) {\n                const writableNode = element.getWritable();\n                writableNode.__dir = direction;\n            }\n        }\n        $ed3b74ccfa001938$var$activeTextDirection = direction; // @ts-expect-error: internal field\n        dom.__lexicalDirTextContent = $ed3b74ccfa001938$var$subTreeDirectionedTextContent; // @ts-expect-error: internal field\n        dom.__lexicalDir = direction;\n    }\n}\nfunction $ed3b74ccfa001938$var$reconcileChildrenWithDirection(prevElement, nextElement, dom) {\n    const previousSubTreeDirectionTextContent = $ed3b74ccfa001938$var$subTreeDirectionedTextContent;\n    $ed3b74ccfa001938$var$subTreeDirectionedTextContent = \"\";\n    $ed3b74ccfa001938$var$reconcileChildren(prevElement, nextElement, dom);\n    $ed3b74ccfa001938$var$reconcileBlockDirection(nextElement, dom);\n    $ed3b74ccfa001938$var$subTreeDirectionedTextContent = previousSubTreeDirectionTextContent;\n}\nfunction $ed3b74ccfa001938$var$createChildrenArray(element, nodeMap) {\n    const children = [];\n    let nodeKey = element.__first;\n    while(nodeKey !== null){\n        const node = nodeMap.get(nodeKey);\n        if (node === undefined) throw Error(`createChildrenArray: node does not exist in nodeMap`);\n        children.push(nodeKey);\n        nodeKey = node.__next;\n    }\n    return children;\n}\nfunction $ed3b74ccfa001938$var$reconcileChildren(prevElement, nextElement, dom) {\n    const previousSubTreeTextContent = $ed3b74ccfa001938$var$subTreeTextContent;\n    const prevChildrenSize = prevElement.__size;\n    const nextChildrenSize = nextElement.__size;\n    $ed3b74ccfa001938$var$subTreeTextContent = \"\";\n    if (prevChildrenSize === 1 && nextChildrenSize === 1) {\n        const prevFirstChildKey = prevElement.__first;\n        const nextFrstChildKey = nextElement.__first;\n        if (prevFirstChildKey === nextFrstChildKey) $ed3b74ccfa001938$var$reconcileNode(prevFirstChildKey, dom);\n        else {\n            const lastDOM = $ed3b74ccfa001938$var$getPrevElementByKeyOrThrow(prevFirstChildKey);\n            const replacementDOM = $ed3b74ccfa001938$var$createNode(nextFrstChildKey, null, null);\n            dom.replaceChild(replacementDOM, lastDOM);\n            $ed3b74ccfa001938$var$destroyNode(prevFirstChildKey, null);\n        }\n    } else {\n        const prevChildren = $ed3b74ccfa001938$var$createChildrenArray(prevElement, $ed3b74ccfa001938$var$activePrevNodeMap);\n        const nextChildren = $ed3b74ccfa001938$var$createChildrenArray(nextElement, $ed3b74ccfa001938$var$activeNextNodeMap);\n        if (prevChildrenSize === 0) {\n            if (nextChildrenSize !== 0) $ed3b74ccfa001938$var$createChildren(nextChildren, nextElement, 0, nextChildrenSize - 1, dom, null);\n        } else if (nextChildrenSize === 0) {\n            if (prevChildrenSize !== 0) {\n                // @ts-expect-error: internal field\n                const lexicalLineBreak = dom.__lexicalLineBreak;\n                const canUseFastPath = lexicalLineBreak == null;\n                $ed3b74ccfa001938$var$destroyChildren(prevChildren, 0, prevChildrenSize - 1, canUseFastPath ? null : dom);\n                if (canUseFastPath) // Fast path for removing DOM nodes\n                dom.textContent = \"\";\n            }\n        } else $ed3b74ccfa001938$var$reconcileNodeChildren(nextElement, prevChildren, nextChildren, prevChildrenSize, nextChildrenSize, dom);\n    }\n    if ($ed3b74ccfa001938$var$$textContentRequiresDoubleLinebreakAtEnd(nextElement)) $ed3b74ccfa001938$var$subTreeTextContent += $ed3b74ccfa001938$var$DOUBLE_LINE_BREAK;\n     // @ts-expect-error: internal field\n    dom.__lexicalTextContent = $ed3b74ccfa001938$var$subTreeTextContent;\n    $ed3b74ccfa001938$var$subTreeTextContent = previousSubTreeTextContent + $ed3b74ccfa001938$var$subTreeTextContent;\n}\nfunction $ed3b74ccfa001938$var$reconcileNode(key, parentDOM) {\n    const prevNode = $ed3b74ccfa001938$var$activePrevNodeMap.get(key);\n    let nextNode = $ed3b74ccfa001938$var$activeNextNodeMap.get(key);\n    if (prevNode === undefined || nextNode === undefined) throw Error(`reconcileNode: prevNode or nextNode does not exist in nodeMap`);\n    const isDirty = $ed3b74ccfa001938$var$treatAllNodesAsDirty || $ed3b74ccfa001938$var$activeDirtyLeaves.has(key) || $ed3b74ccfa001938$var$activeDirtyElements.has(key);\n    const dom = $ed3b74ccfa001938$var$getElementByKeyOrThrow($ed3b74ccfa001938$var$activeEditor$1, key); // If the node key points to the same instance in both states\n    // and isn't dirty, we just update the text content cache\n    // and return the existing DOM Node.\n    if (prevNode === nextNode && !isDirty) {\n        if ($ed3b74ccfa001938$var$$isElementNode(prevNode)) {\n            // @ts-expect-error: internal field\n            const previousSubTreeTextContent = dom.__lexicalTextContent;\n            if (previousSubTreeTextContent !== undefined) {\n                $ed3b74ccfa001938$var$subTreeTextContent += previousSubTreeTextContent;\n                $ed3b74ccfa001938$var$editorTextContent += previousSubTreeTextContent;\n            } // @ts-expect-error: internal field\n            const previousSubTreeDirectionTextContent = dom.__lexicalDirTextContent;\n            if (previousSubTreeDirectionTextContent !== undefined) $ed3b74ccfa001938$var$subTreeDirectionedTextContent += previousSubTreeDirectionTextContent;\n        } else {\n            const text = prevNode.getTextContent();\n            if ($ed3b74ccfa001938$var$$isTextNode(prevNode) && !prevNode.isDirectionless()) $ed3b74ccfa001938$var$subTreeDirectionedTextContent += text;\n            $ed3b74ccfa001938$var$editorTextContent += text;\n            $ed3b74ccfa001938$var$subTreeTextContent += text;\n        }\n        return dom;\n    } // If the node key doesn't point to the same instance in both maps,\n    // it means it were cloned. If they're also dirty, we mark them as mutated.\n    if (prevNode !== nextNode && isDirty) $ed3b74ccfa001938$var$setMutatedNode($ed3b74ccfa001938$var$mutatedNodes, $ed3b74ccfa001938$var$activeEditorNodes, $ed3b74ccfa001938$var$activeMutationListeners, nextNode, \"updated\");\n     // Update node. If it returns true, we need to unmount and re-create the node\n    if (nextNode.updateDOM(prevNode, dom, $ed3b74ccfa001938$var$activeEditorConfig)) {\n        const replacementDOM = $ed3b74ccfa001938$var$createNode(key, null, null);\n        if (parentDOM === null) throw Error(`reconcileNode: parentDOM is null`);\n        parentDOM.replaceChild(replacementDOM, dom);\n        $ed3b74ccfa001938$var$destroyNode(key, null);\n        return replacementDOM;\n    }\n    if ($ed3b74ccfa001938$var$$isElementNode(prevNode) && $ed3b74ccfa001938$var$$isElementNode(nextNode)) {\n        // Reconcile element children\n        const nextIndent = nextNode.__indent;\n        if (nextIndent !== prevNode.__indent) $ed3b74ccfa001938$var$setElementIndent(dom, nextIndent);\n        const nextFormat = nextNode.__format;\n        if (nextFormat !== prevNode.__format) $ed3b74ccfa001938$var$setElementFormat(dom, nextFormat);\n        if (isDirty) {\n            $ed3b74ccfa001938$var$reconcileChildrenWithDirection(prevNode, nextNode, dom);\n            if (!$ed3b74ccfa001938$var$$isRootNode(nextNode) && !nextNode.isInline()) $ed3b74ccfa001938$var$reconcileElementTerminatingLineBreak(prevNode, nextNode, dom);\n        }\n        if ($ed3b74ccfa001938$var$$textContentRequiresDoubleLinebreakAtEnd(nextNode)) {\n            $ed3b74ccfa001938$var$subTreeTextContent += $ed3b74ccfa001938$var$DOUBLE_LINE_BREAK;\n            $ed3b74ccfa001938$var$editorTextContent += $ed3b74ccfa001938$var$DOUBLE_LINE_BREAK;\n        }\n    } else {\n        const text = nextNode.getTextContent();\n        if ($ed3b74ccfa001938$var$$isDecoratorNode(nextNode)) {\n            const decorator = nextNode.decorate($ed3b74ccfa001938$var$activeEditor$1, $ed3b74ccfa001938$var$activeEditorConfig);\n            if (decorator !== null) $ed3b74ccfa001938$var$reconcileDecorator(key, decorator);\n        } else if ($ed3b74ccfa001938$var$$isTextNode(nextNode) && !nextNode.isDirectionless()) // Handle text content, for LTR, LTR cases.\n        $ed3b74ccfa001938$var$subTreeDirectionedTextContent += text;\n        $ed3b74ccfa001938$var$subTreeTextContent += text;\n        $ed3b74ccfa001938$var$editorTextContent += text;\n    }\n    if (!$ed3b74ccfa001938$var$activeEditorStateReadOnly && $ed3b74ccfa001938$var$$isRootNode(nextNode) && nextNode.__cachedText !== $ed3b74ccfa001938$var$editorTextContent) {\n        // Cache the latest text content.\n        nextNode = nextNode.getWritable();\n        nextNode.__cachedText = $ed3b74ccfa001938$var$editorTextContent;\n    }\n    // Freeze the node in DEV to prevent accidental mutations\n    Object.freeze(nextNode);\n    return dom;\n}\nfunction $ed3b74ccfa001938$var$reconcileDecorator(key, decorator) {\n    let pendingDecorators = $ed3b74ccfa001938$var$activeEditor$1._pendingDecorators;\n    const currentDecorators = $ed3b74ccfa001938$var$activeEditor$1._decorators;\n    if (pendingDecorators === null) {\n        if (currentDecorators[key] === decorator) return;\n        pendingDecorators = $ed3b74ccfa001938$var$cloneDecorators($ed3b74ccfa001938$var$activeEditor$1);\n    }\n    pendingDecorators[key] = decorator;\n}\nfunction $ed3b74ccfa001938$var$getFirstChild(element) {\n    return element.firstChild;\n}\nfunction $ed3b74ccfa001938$var$getNextSibling(element) {\n    let nextSibling = element.nextSibling;\n    if (nextSibling !== null && nextSibling === $ed3b74ccfa001938$var$activeEditor$1._blockCursorElement) nextSibling = nextSibling.nextSibling;\n    return nextSibling;\n}\nfunction $ed3b74ccfa001938$var$reconcileNodeChildren(nextElement, prevChildren, nextChildren, prevChildrenLength, nextChildrenLength, dom) {\n    const prevEndIndex = prevChildrenLength - 1;\n    const nextEndIndex = nextChildrenLength - 1;\n    let prevChildrenSet;\n    let nextChildrenSet;\n    let siblingDOM = $ed3b74ccfa001938$var$getFirstChild(dom);\n    let prevIndex = 0;\n    let nextIndex = 0;\n    while(prevIndex <= prevEndIndex && nextIndex <= nextEndIndex){\n        const prevKey = prevChildren[prevIndex];\n        const nextKey = nextChildren[nextIndex];\n        if (prevKey === nextKey) {\n            siblingDOM = $ed3b74ccfa001938$var$getNextSibling($ed3b74ccfa001938$var$reconcileNode(nextKey, dom));\n            prevIndex++;\n            nextIndex++;\n        } else {\n            if (prevChildrenSet === undefined) prevChildrenSet = new Set(prevChildren);\n            if (nextChildrenSet === undefined) nextChildrenSet = new Set(nextChildren);\n            const nextHasPrevKey = nextChildrenSet.has(prevKey);\n            const prevHasNextKey = prevChildrenSet.has(nextKey);\n            if (!nextHasPrevKey) {\n                // Remove prev\n                siblingDOM = $ed3b74ccfa001938$var$getNextSibling($ed3b74ccfa001938$var$getPrevElementByKeyOrThrow(prevKey));\n                $ed3b74ccfa001938$var$destroyNode(prevKey, dom);\n                prevIndex++;\n            } else if (!prevHasNextKey) {\n                // Create next\n                $ed3b74ccfa001938$var$createNode(nextKey, dom, siblingDOM);\n                nextIndex++;\n            } else {\n                // Move next\n                const childDOM = $ed3b74ccfa001938$var$getElementByKeyOrThrow($ed3b74ccfa001938$var$activeEditor$1, nextKey);\n                if (childDOM === siblingDOM) siblingDOM = $ed3b74ccfa001938$var$getNextSibling($ed3b74ccfa001938$var$reconcileNode(nextKey, dom));\n                else {\n                    if (siblingDOM != null) dom.insertBefore(childDOM, siblingDOM);\n                    else dom.appendChild(childDOM);\n                    $ed3b74ccfa001938$var$reconcileNode(nextKey, dom);\n                }\n                prevIndex++;\n                nextIndex++;\n            }\n        }\n    }\n    const appendNewChildren = prevIndex > prevEndIndex;\n    const removeOldChildren = nextIndex > nextEndIndex;\n    if (appendNewChildren && !removeOldChildren) {\n        const previousNode = nextChildren[nextEndIndex + 1];\n        const insertDOM = previousNode === undefined ? null : $ed3b74ccfa001938$var$activeEditor$1.getElementByKey(previousNode);\n        $ed3b74ccfa001938$var$createChildren(nextChildren, nextElement, nextIndex, nextEndIndex, dom, insertDOM);\n    } else if (removeOldChildren && !appendNewChildren) $ed3b74ccfa001938$var$destroyChildren(prevChildren, prevIndex, prevEndIndex, dom);\n}\nfunction $ed3b74ccfa001938$var$reconcileRoot(prevEditorState, nextEditorState, editor, dirtyType, dirtyElements, dirtyLeaves) {\n    // We cache text content to make retrieval more efficient.\n    // The cache must be rebuilt during reconciliation to account for any changes.\n    $ed3b74ccfa001938$var$subTreeTextContent = \"\";\n    $ed3b74ccfa001938$var$editorTextContent = \"\";\n    $ed3b74ccfa001938$var$subTreeDirectionedTextContent = \"\"; // Rather than pass around a load of arguments through the stack recursively\n    // we instead set them as bindings within the scope of the module.\n    $ed3b74ccfa001938$var$treatAllNodesAsDirty = dirtyType === $ed3b74ccfa001938$var$FULL_RECONCILE;\n    $ed3b74ccfa001938$var$activeTextDirection = null;\n    $ed3b74ccfa001938$var$activeEditor$1 = editor;\n    $ed3b74ccfa001938$var$activeEditorConfig = editor._config;\n    $ed3b74ccfa001938$var$activeEditorNodes = editor._nodes;\n    $ed3b74ccfa001938$var$activeMutationListeners = $ed3b74ccfa001938$var$activeEditor$1._listeners.mutation;\n    $ed3b74ccfa001938$var$activeDirtyElements = dirtyElements;\n    $ed3b74ccfa001938$var$activeDirtyLeaves = dirtyLeaves;\n    $ed3b74ccfa001938$var$activePrevNodeMap = prevEditorState._nodeMap;\n    $ed3b74ccfa001938$var$activeNextNodeMap = nextEditorState._nodeMap;\n    $ed3b74ccfa001938$var$activeEditorStateReadOnly = nextEditorState._readOnly;\n    $ed3b74ccfa001938$var$activePrevKeyToDOMMap = new Map(editor._keyToDOMMap); // We keep track of mutated nodes so we can trigger mutation\n    // listeners later in the update cycle.\n    const currentMutatedNodes = new Map();\n    $ed3b74ccfa001938$var$mutatedNodes = currentMutatedNodes;\n    $ed3b74ccfa001938$var$reconcileNode(\"root\", null); // We don't want a bunch of void checks throughout the scope\n    // so instead we make it seem that these values are always set.\n    // We also want to make sure we clear them down, otherwise we\n    // can leak memory.\n    // @ts-ignore\n    $ed3b74ccfa001938$var$activeEditor$1 = undefined; // @ts-ignore\n    $ed3b74ccfa001938$var$activeEditorNodes = undefined; // @ts-ignore\n    $ed3b74ccfa001938$var$activeDirtyElements = undefined; // @ts-ignore\n    $ed3b74ccfa001938$var$activeDirtyLeaves = undefined; // @ts-ignore\n    $ed3b74ccfa001938$var$activePrevNodeMap = undefined; // @ts-ignore\n    $ed3b74ccfa001938$var$activeNextNodeMap = undefined; // @ts-ignore\n    $ed3b74ccfa001938$var$activeEditorConfig = undefined; // @ts-ignore\n    $ed3b74ccfa001938$var$activePrevKeyToDOMMap = undefined; // @ts-ignore\n    $ed3b74ccfa001938$var$mutatedNodes = undefined;\n    return currentMutatedNodes;\n}\nfunction $ed3b74ccfa001938$var$storeDOMWithKey(key, dom, editor) {\n    const keyToDOMMap = editor._keyToDOMMap; // @ts-ignore We intentionally add this to the Node.\n    dom[\"__lexicalKey_\" + editor._key] = key;\n    keyToDOMMap.set(key, dom);\n}\nfunction $ed3b74ccfa001938$var$getPrevElementByKeyOrThrow(key) {\n    const element = $ed3b74ccfa001938$var$activePrevKeyToDOMMap.get(key);\n    if (element === undefined) throw Error(`Reconciliation: could not find DOM element for node key ${key}`);\n    return element;\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ const $ed3b74ccfa001938$var$PASS_THROUGH_COMMAND = Object.freeze({});\nconst $ed3b74ccfa001938$var$ANDROID_COMPOSITION_LATENCY = 30;\nconst $ed3b74ccfa001938$var$rootElementEvents = [\n    [\n        \"keydown\",\n        $ed3b74ccfa001938$var$onKeyDown\n    ],\n    [\n        \"pointerdown\",\n        $ed3b74ccfa001938$var$onPointerDown\n    ],\n    [\n        \"compositionstart\",\n        $ed3b74ccfa001938$var$onCompositionStart\n    ],\n    [\n        \"compositionend\",\n        $ed3b74ccfa001938$var$onCompositionEnd\n    ],\n    [\n        \"input\",\n        $ed3b74ccfa001938$var$onInput\n    ],\n    [\n        \"click\",\n        $ed3b74ccfa001938$var$onClick\n    ],\n    [\n        \"cut\",\n        $ed3b74ccfa001938$var$PASS_THROUGH_COMMAND\n    ],\n    [\n        \"copy\",\n        $ed3b74ccfa001938$var$PASS_THROUGH_COMMAND\n    ],\n    [\n        \"dragstart\",\n        $ed3b74ccfa001938$var$PASS_THROUGH_COMMAND\n    ],\n    [\n        \"dragover\",\n        $ed3b74ccfa001938$var$PASS_THROUGH_COMMAND\n    ],\n    [\n        \"dragend\",\n        $ed3b74ccfa001938$var$PASS_THROUGH_COMMAND\n    ],\n    [\n        \"paste\",\n        $ed3b74ccfa001938$var$PASS_THROUGH_COMMAND\n    ],\n    [\n        \"focus\",\n        $ed3b74ccfa001938$var$PASS_THROUGH_COMMAND\n    ],\n    [\n        \"blur\",\n        $ed3b74ccfa001938$var$PASS_THROUGH_COMMAND\n    ],\n    [\n        \"drop\",\n        $ed3b74ccfa001938$var$PASS_THROUGH_COMMAND\n    ]\n];\nif ($ed3b74ccfa001938$var$CAN_USE_BEFORE_INPUT) $ed3b74ccfa001938$var$rootElementEvents.push([\n    \"beforeinput\",\n    (event, editor)=>$ed3b74ccfa001938$var$onBeforeInput(event, editor)\n]);\nlet $ed3b74ccfa001938$var$lastKeyDownTimeStamp = 0;\nlet $ed3b74ccfa001938$var$lastKeyCode = 0;\nlet $ed3b74ccfa001938$var$lastBeforeInputInsertTextTimeStamp = 0;\nlet $ed3b74ccfa001938$var$unprocessedBeforeInputData = null;\nlet $ed3b74ccfa001938$var$rootElementsRegistered = 0;\nlet $ed3b74ccfa001938$var$isSelectionChangeFromDOMUpdate = false;\nlet $ed3b74ccfa001938$var$isSelectionChangeFromMouseDown = false;\nlet $ed3b74ccfa001938$var$isInsertLineBreak = false;\nlet $ed3b74ccfa001938$var$isFirefoxEndingComposition = false;\nlet $ed3b74ccfa001938$var$collapsedSelectionFormat = [\n    0,\n    \"\",\n    0,\n    \"root\",\n    0\n]; // This function is used to determine if Lexical should attempt to override\n// the default browser behavior for insertion of text and use its own internal\n// heuristics. This is an extremely important function, and makes much of Lexical\n// work as intended between different browsers and across word, line and character\n// boundary/formats. It also is important for text replacement, node schemas and\n// composition mechanics.\nfunction $ed3b74ccfa001938$var$$shouldPreventDefaultAndInsertText(selection, domTargetRange, text, timeStamp, isBeforeInput) {\n    const anchor = selection.anchor;\n    const focus = selection.focus;\n    const anchorNode = anchor.getNode();\n    const editor = $ed3b74ccfa001938$var$getActiveEditor();\n    const domSelection = $ed3b74ccfa001938$var$getDOMSelection(editor._window);\n    const domAnchorNode = domSelection !== null ? domSelection.anchorNode : null;\n    const anchorKey = anchor.key;\n    const backingAnchorElement = editor.getElementByKey(anchorKey);\n    const textLength = text.length;\n    return anchorKey !== focus.key || // If we're working with a non-text node.\n    !$ed3b74ccfa001938$var$$isTextNode(anchorNode) || // If we are replacing a range with a single character or grapheme, and not composing.\n    (!isBeforeInput && (!$ed3b74ccfa001938$var$CAN_USE_BEFORE_INPUT || // We check to see if there has been\n    // a recent beforeinput event for \"textInput\". If there has been one in the last\n    // 50ms then we proceed as normal. However, if there is not, then this is likely\n    // a dangling `input` event caused by execCommand('insertText').\n    $ed3b74ccfa001938$var$lastBeforeInputInsertTextTimeStamp < timeStamp + 50) || anchorNode.isDirty() && textLength < 2 || $ed3b74ccfa001938$var$doesContainGrapheme(text)) && anchor.offset !== focus.offset && !anchorNode.isComposing() || // Any non standard text node.\n    $ed3b74ccfa001938$var$$isTokenOrSegmented(anchorNode) || // If the text length is more than a single character and we're either\n    // dealing with this in \"beforeinput\" or where the node has already recently\n    // been changed (thus is dirty).\n    anchorNode.isDirty() && textLength > 1 || // If the DOM selection element is not the same as the backing node during beforeinput.\n    (isBeforeInput || !$ed3b74ccfa001938$var$CAN_USE_BEFORE_INPUT) && backingAnchorElement !== null && !anchorNode.isComposing() && domAnchorNode !== $ed3b74ccfa001938$var$getDOMTextNode(backingAnchorElement) || // If TargetRange is not the same as the DOM selection; browser trying to edit random parts\n    // of the editor.\n    domSelection !== null && domTargetRange !== null && (!domTargetRange.collapsed || domTargetRange.startContainer !== domSelection.anchorNode || domTargetRange.startOffset !== domSelection.anchorOffset) || // Check if we're changing from bold to italics, or some other format.\n    anchorNode.getFormat() !== selection.format || anchorNode.getStyle() !== selection.style || // One last set of heuristics to check against.\n    $ed3b74ccfa001938$var$$shouldInsertTextAfterOrBeforeTextNode(selection, anchorNode);\n}\nfunction $ed3b74ccfa001938$var$shouldSkipSelectionChange(domNode, offset) {\n    return domNode !== null && domNode.nodeValue !== null && domNode.nodeType === $ed3b74ccfa001938$var$DOM_TEXT_TYPE && offset !== 0 && offset !== domNode.nodeValue.length;\n}\nfunction $ed3b74ccfa001938$var$onSelectionChange(domSelection, editor, isActive) {\n    const { anchorNode: anchorDOM , anchorOffset: anchorOffset , focusNode: focusDOM , focusOffset: focusOffset  } = domSelection;\n    if ($ed3b74ccfa001938$var$isSelectionChangeFromDOMUpdate) {\n        $ed3b74ccfa001938$var$isSelectionChangeFromDOMUpdate = false; // If native DOM selection is on a DOM element, then\n        // we should continue as usual, as Lexical's selection\n        // may have normalized to a better child. If the DOM\n        // element is a text node, we can safely apply this\n        // optimization and skip the selection change entirely.\n        // We also need to check if the offset is at the boundary,\n        // because in this case, we might need to normalize to a\n        // sibling instead.\n        if ($ed3b74ccfa001938$var$shouldSkipSelectionChange(anchorDOM, anchorOffset) && $ed3b74ccfa001938$var$shouldSkipSelectionChange(focusDOM, focusOffset)) return;\n    }\n    $ed3b74ccfa001938$var$updateEditor(editor, ()=>{\n        // Non-active editor don't need any extra logic for selection, it only needs update\n        // to reconcile selection (set it to null) to ensure that only one editor has non-null selection.\n        if (!isActive) {\n            $ed3b74ccfa001938$var$$setSelection(null);\n            return;\n        }\n        if (!$ed3b74ccfa001938$var$isSelectionWithinEditor(editor, anchorDOM, focusDOM)) return;\n        const selection = $ed3b74ccfa001938$var$$getSelection(); // Update the selection format\n        if ($ed3b74ccfa001938$var$$isRangeSelection(selection)) {\n            const anchor = selection.anchor;\n            const anchorNode = anchor.getNode();\n            if (selection.isCollapsed()) {\n                // Badly interpreted range selection when collapsed - #1482\n                if (domSelection.type === \"Range\" && domSelection.anchorNode === domSelection.focusNode) selection.dirty = true;\n                 // If we have marked a collapsed selection format, and we're\n                // within the given time range – then attempt to use that format\n                // instead of getting the format from the anchor node.\n                const windowEvent = $ed3b74ccfa001938$var$getWindow(editor).event;\n                const currentTimeStamp = windowEvent ? windowEvent.timeStamp : performance.now();\n                const [lastFormat, lastStyle, lastOffset, lastKey, timeStamp] = $ed3b74ccfa001938$var$collapsedSelectionFormat;\n                if (currentTimeStamp < timeStamp + 200 && anchor.offset === lastOffset && anchor.key === lastKey) {\n                    selection.format = lastFormat;\n                    selection.style = lastStyle;\n                } else {\n                    if (anchor.type === \"text\") {\n                        selection.format = anchorNode.getFormat();\n                        selection.style = anchorNode.getStyle();\n                    } else if (anchor.type === \"element\") {\n                        selection.format = 0;\n                        selection.style = \"\";\n                    }\n                }\n            } else {\n                let combinedFormat = $ed3b74ccfa001938$var$IS_ALL_FORMATTING;\n                let hasTextNodes = false;\n                const nodes = selection.getNodes();\n                const nodesLength = nodes.length;\n                for(let i = 0; i < nodesLength; i++){\n                    const node = nodes[i];\n                    if ($ed3b74ccfa001938$var$$isTextNode(node)) {\n                        // TODO: what about style?\n                        hasTextNodes = true;\n                        combinedFormat &= node.getFormat();\n                        if (combinedFormat === 0) break;\n                    }\n                }\n                selection.format = hasTextNodes ? combinedFormat : 0;\n            }\n        }\n        $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$SELECTION_CHANGE_COMMAND, undefined);\n    });\n} // This is a work-around is mainly Chrome specific bug where if you select\n// the contents of an empty block, you cannot easily unselect anything.\n// This results in a tiny selection box that looks buggy/broken. This can\n// also help other browsers when selection might \"appear\" lost, when it\n// really isn't.\nfunction $ed3b74ccfa001938$var$onClick(event, editor) {\n    $ed3b74ccfa001938$var$updateEditor(editor, ()=>{\n        const selection = $ed3b74ccfa001938$var$$getSelection();\n        const domSelection = $ed3b74ccfa001938$var$getDOMSelection(editor._window);\n        const lastSelection = $ed3b74ccfa001938$var$$getPreviousSelection();\n        if ($ed3b74ccfa001938$var$$isRangeSelection(selection)) {\n            const anchor = selection.anchor;\n            const anchorNode = anchor.getNode();\n            if (domSelection && anchor.type === \"element\" && anchor.offset === 0 && selection.isCollapsed() && !$ed3b74ccfa001938$var$$isRootNode(anchorNode) && $ed3b74ccfa001938$var$$getRoot().getChildrenSize() === 1 && anchorNode.getTopLevelElementOrThrow().isEmpty() && lastSelection !== null && selection.is(lastSelection)) {\n                domSelection.removeAllRanges();\n                selection.dirty = true;\n            }\n        }\n        $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$CLICK_COMMAND, event);\n    });\n}\nfunction $ed3b74ccfa001938$var$onPointerDown(event, editor) {\n    // TODO implement text drag & drop\n    const target = event.target;\n    const pointerType = event.pointerType;\n    if (target instanceof Node && pointerType !== \"touch\") $ed3b74ccfa001938$var$updateEditor(editor, ()=>{\n        // Drag & drop should not recompute selection until mouse up; otherwise the initially\n        // selected content is lost.\n        if (!$ed3b74ccfa001938$var$$isSelectionCapturedInDecorator(target)) $ed3b74ccfa001938$var$isSelectionChangeFromMouseDown = true;\n    });\n}\nfunction $ed3b74ccfa001938$var$getTargetRange(event) {\n    if (!event.getTargetRanges) return null;\n    const targetRanges = event.getTargetRanges();\n    if (targetRanges.length === 0) return null;\n    return targetRanges[0];\n}\nfunction $ed3b74ccfa001938$var$$canRemoveText(anchorNode, focusNode) {\n    return anchorNode !== focusNode || $ed3b74ccfa001938$var$$isElementNode(anchorNode) || $ed3b74ccfa001938$var$$isElementNode(focusNode) || !anchorNode.isToken() || !focusNode.isToken();\n}\nfunction $ed3b74ccfa001938$var$isPossiblyAndroidKeyPress(timeStamp) {\n    return $ed3b74ccfa001938$var$lastKeyCode === 229 && timeStamp < $ed3b74ccfa001938$var$lastKeyDownTimeStamp + $ed3b74ccfa001938$var$ANDROID_COMPOSITION_LATENCY;\n}\nfunction $ed3b74ccfa001938$var$onBeforeInput(event, editor) {\n    const inputType = event.inputType;\n    const targetRange = $ed3b74ccfa001938$var$getTargetRange(event); // We let the browser do its own thing for composition.\n    if (inputType === \"deleteCompositionText\" || // If we're pasting in FF, we shouldn't get this event\n    // as the `paste` event should have triggered, unless the\n    // user has dom.event.clipboardevents.enabled disabled in\n    // about:config. In that case, we need to process the\n    // pasted content in the DOM mutation phase.\n    $ed3b74ccfa001938$var$IS_FIREFOX && $ed3b74ccfa001938$var$isFirefoxClipboardEvents(editor)) return;\n    else if (inputType === \"insertCompositionText\") return;\n    $ed3b74ccfa001938$var$updateEditor(editor, ()=>{\n        const selection = $ed3b74ccfa001938$var$$getSelection();\n        if (inputType === \"deleteContentBackward\") {\n            if (selection === null) {\n                // Use previous selection\n                const prevSelection = $ed3b74ccfa001938$var$$getPreviousSelection();\n                if (!$ed3b74ccfa001938$var$$isRangeSelection(prevSelection)) return;\n                $ed3b74ccfa001938$var$$setSelection(prevSelection.clone());\n            }\n            if ($ed3b74ccfa001938$var$$isRangeSelection(selection)) {\n                // Used for handling backspace in Android.\n                if ($ed3b74ccfa001938$var$isPossiblyAndroidKeyPress(event.timeStamp) && editor.isComposing() && selection.anchor.key === selection.focus.key) {\n                    $ed3b74ccfa001938$var$$setCompositionKey(null);\n                    $ed3b74ccfa001938$var$lastKeyDownTimeStamp = 0; // Fixes an Android bug where selection flickers when backspacing\n                    setTimeout(()=>{\n                        $ed3b74ccfa001938$var$updateEditor(editor, ()=>{\n                            $ed3b74ccfa001938$var$$setCompositionKey(null);\n                        });\n                    }, $ed3b74ccfa001938$var$ANDROID_COMPOSITION_LATENCY);\n                    if ($ed3b74ccfa001938$var$$isRangeSelection(selection)) {\n                        const anchorNode = selection.anchor.getNode();\n                        anchorNode.markDirty();\n                        selection.format = anchorNode.getFormat();\n                        selection.style = anchorNode.getStyle();\n                    }\n                } else {\n                    event.preventDefault();\n                    $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$DELETE_CHARACTER_COMMAND, true);\n                }\n                return;\n            }\n        }\n        if (!$ed3b74ccfa001938$var$$isRangeSelection(selection)) return;\n        const data = event.data; // This represents the case when two beforeinput events are triggered at the same time (without a\n        // full event loop ending at input). This happens with MacOS with the default keyboard settings,\n        // a combination of autocorrection + autocapitalization.\n        // Having Lexical run everything in controlled mode would fix the issue without additional code\n        // but this would kill the massive performance win from the most common typing event.\n        // Alternatively, when this happens we can prematurely update our EditorState based on the DOM\n        // content, a job that would usually be the input event's responsibility.\n        if ($ed3b74ccfa001938$var$unprocessedBeforeInputData !== null) $ed3b74ccfa001938$var$$updateSelectedTextFromDOM(false, editor, $ed3b74ccfa001938$var$unprocessedBeforeInputData);\n        if ((!selection.dirty || $ed3b74ccfa001938$var$unprocessedBeforeInputData !== null) && selection.isCollapsed() && !$ed3b74ccfa001938$var$$isRootNode(selection.anchor.getNode()) && targetRange !== null) selection.applyDOMRange(targetRange);\n        $ed3b74ccfa001938$var$unprocessedBeforeInputData = null;\n        const anchor = selection.anchor;\n        const focus = selection.focus;\n        const anchorNode = anchor.getNode();\n        const focusNode = focus.getNode();\n        if (inputType === \"insertText\" || inputType === \"insertTranspose\") {\n            if (data === \"\\n\") {\n                event.preventDefault();\n                $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$INSERT_LINE_BREAK_COMMAND, false);\n            } else if (data === $ed3b74ccfa001938$var$DOUBLE_LINE_BREAK) {\n                event.preventDefault();\n                $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$INSERT_PARAGRAPH_COMMAND, undefined);\n            } else if (data == null && event.dataTransfer) {\n                // Gets around a Safari text replacement bug.\n                const text = event.dataTransfer.getData(\"text/plain\");\n                event.preventDefault();\n                selection.insertRawText(text);\n            } else if (data != null && $ed3b74ccfa001938$var$$shouldPreventDefaultAndInsertText(selection, targetRange, data, event.timeStamp, true)) {\n                event.preventDefault();\n                $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$CONTROLLED_TEXT_INSERTION_COMMAND, data);\n            } else $ed3b74ccfa001938$var$unprocessedBeforeInputData = data;\n            $ed3b74ccfa001938$var$lastBeforeInputInsertTextTimeStamp = event.timeStamp;\n            return;\n        } // Prevent the browser from carrying out\n        // the input event, so we can control the\n        // output.\n        event.preventDefault();\n        switch(inputType){\n            case \"insertFromYank\":\n            case \"insertFromDrop\":\n            case \"insertReplacementText\":\n                $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$CONTROLLED_TEXT_INSERTION_COMMAND, event);\n                break;\n            case \"insertFromComposition\":\n                // This is the end of composition\n                $ed3b74ccfa001938$var$$setCompositionKey(null);\n                $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$CONTROLLED_TEXT_INSERTION_COMMAND, event);\n                break;\n            case \"insertLineBreak\":\n                // Used for Android\n                $ed3b74ccfa001938$var$$setCompositionKey(null);\n                $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$INSERT_LINE_BREAK_COMMAND, false);\n                break;\n            case \"insertParagraph\":\n                // Used for Android\n                $ed3b74ccfa001938$var$$setCompositionKey(null); // Some browsers do not provide the type \"insertLineBreak\".\n                // So instead, we need to infer it from the keyboard event.\n                if ($ed3b74ccfa001938$var$isInsertLineBreak) {\n                    $ed3b74ccfa001938$var$isInsertLineBreak = false;\n                    $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$INSERT_LINE_BREAK_COMMAND, false);\n                } else $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$INSERT_PARAGRAPH_COMMAND, undefined);\n                break;\n            case \"insertFromPaste\":\n            case \"insertFromPasteAsQuotation\":\n                $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$PASTE_COMMAND, event);\n                break;\n            case \"deleteByComposition\":\n                if ($ed3b74ccfa001938$var$$canRemoveText(anchorNode, focusNode)) $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$REMOVE_TEXT_COMMAND, undefined);\n                break;\n            case \"deleteByDrag\":\n            case \"deleteByCut\":\n                $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$REMOVE_TEXT_COMMAND, undefined);\n                break;\n            case \"deleteContent\":\n                $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$DELETE_CHARACTER_COMMAND, false);\n                break;\n            case \"deleteWordBackward\":\n                $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$DELETE_WORD_COMMAND, true);\n                break;\n            case \"deleteWordForward\":\n                $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$DELETE_WORD_COMMAND, false);\n                break;\n            case \"deleteHardLineBackward\":\n            case \"deleteSoftLineBackward\":\n                $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$DELETE_LINE_COMMAND, true);\n                break;\n            case \"deleteContentForward\":\n            case \"deleteHardLineForward\":\n            case \"deleteSoftLineForward\":\n                $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$DELETE_LINE_COMMAND, false);\n                break;\n            case \"formatStrikeThrough\":\n                $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$FORMAT_TEXT_COMMAND, \"strikethrough\");\n                break;\n            case \"formatBold\":\n                $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$FORMAT_TEXT_COMMAND, \"bold\");\n                break;\n            case \"formatItalic\":\n                $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$FORMAT_TEXT_COMMAND, \"italic\");\n                break;\n            case \"formatUnderline\":\n                $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$FORMAT_TEXT_COMMAND, \"underline\");\n                break;\n            case \"historyUndo\":\n                $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$UNDO_COMMAND, undefined);\n                break;\n            case \"historyRedo\":\n                $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$REDO_COMMAND, undefined);\n                break;\n        }\n    });\n}\nfunction $ed3b74ccfa001938$var$onInput(event, editor) {\n    // We don't want the onInput to bubble, in the case of nested editors.\n    event.stopPropagation();\n    $ed3b74ccfa001938$var$updateEditor(editor, ()=>{\n        const selection = $ed3b74ccfa001938$var$$getSelection();\n        const data = event.data;\n        const targetRange = $ed3b74ccfa001938$var$getTargetRange(event);\n        if (data != null && $ed3b74ccfa001938$var$$isRangeSelection(selection) && $ed3b74ccfa001938$var$$shouldPreventDefaultAndInsertText(selection, targetRange, data, event.timeStamp, false)) {\n            // Given we're over-riding the default behavior, we will need\n            // to ensure to disable composition before dispatching the\n            // insertText command for when changing the sequence for FF.\n            if ($ed3b74ccfa001938$var$isFirefoxEndingComposition) {\n                $ed3b74ccfa001938$var$onCompositionEndImpl(editor, data);\n                $ed3b74ccfa001938$var$isFirefoxEndingComposition = false;\n            }\n            const anchor = selection.anchor;\n            const anchorNode = anchor.getNode();\n            const domSelection = $ed3b74ccfa001938$var$getDOMSelection(editor._window);\n            if (domSelection === null) return;\n            const offset = anchor.offset; // If the content is the same as inserted, then don't dispatch an insertion.\n            // Given onInput doesn't take the current selection (it uses the previous)\n            // we can compare that against what the DOM currently says.\n            if (!$ed3b74ccfa001938$var$CAN_USE_BEFORE_INPUT || selection.isCollapsed() || !$ed3b74ccfa001938$var$$isTextNode(anchorNode) || domSelection.anchorNode === null || anchorNode.getTextContent().slice(0, offset) + data + anchorNode.getTextContent().slice(offset + selection.focus.offset) !== $ed3b74ccfa001938$var$getAnchorTextFromDOM(domSelection.anchorNode)) $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$CONTROLLED_TEXT_INSERTION_COMMAND, data);\n            const textLength = data.length; // Another hack for FF, as it's possible that the IME is still\n            // open, even though compositionend has already fired (sigh).\n            if ($ed3b74ccfa001938$var$IS_FIREFOX && textLength > 1 && event.inputType === \"insertCompositionText\" && !editor.isComposing()) selection.anchor.offset -= textLength;\n             // This ensures consistency on Android.\n            if (!$ed3b74ccfa001938$var$IS_SAFARI && !$ed3b74ccfa001938$var$IS_IOS && !$ed3b74ccfa001938$var$IS_APPLE_WEBKIT && editor.isComposing()) {\n                $ed3b74ccfa001938$var$lastKeyDownTimeStamp = 0;\n                $ed3b74ccfa001938$var$$setCompositionKey(null);\n            }\n        } else {\n            const characterData = data !== null ? data : undefined;\n            $ed3b74ccfa001938$var$$updateSelectedTextFromDOM(false, editor, characterData); // onInput always fires after onCompositionEnd for FF.\n            if ($ed3b74ccfa001938$var$isFirefoxEndingComposition) {\n                $ed3b74ccfa001938$var$onCompositionEndImpl(editor, data || undefined);\n                $ed3b74ccfa001938$var$isFirefoxEndingComposition = false;\n            }\n        } // Also flush any other mutations that might have occurred\n        // since the change.\n        $ed3b74ccfa001938$var$$flushMutations();\n    });\n    $ed3b74ccfa001938$var$unprocessedBeforeInputData = null;\n}\nfunction $ed3b74ccfa001938$var$onCompositionStart(event, editor) {\n    $ed3b74ccfa001938$var$updateEditor(editor, ()=>{\n        const selection = $ed3b74ccfa001938$var$$getSelection();\n        if ($ed3b74ccfa001938$var$$isRangeSelection(selection) && !editor.isComposing()) {\n            const anchor = selection.anchor;\n            const node = selection.anchor.getNode();\n            $ed3b74ccfa001938$var$$setCompositionKey(anchor.key);\n            if (// apply the empty space heuristic. We can't do this for Safari,\n            // as the keydown fires after composition start.\n            event.timeStamp < $ed3b74ccfa001938$var$lastKeyDownTimeStamp + $ed3b74ccfa001938$var$ANDROID_COMPOSITION_LATENCY || // FF has issues around composing multibyte characters, so we also\n            // need to invoke the empty space heuristic below.\n            anchor.type === \"element\" || !selection.isCollapsed() || node.getFormat() !== selection.format || node.getStyle() !== selection.style) // We insert a zero width character, ready for the composition\n            // to get inserted into the new node we create. If\n            // we don't do this, Safari will fail on us because\n            // there is no text node matching the selection.\n            $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$CONTROLLED_TEXT_INSERTION_COMMAND, $ed3b74ccfa001938$var$COMPOSITION_START_CHAR);\n        }\n    });\n}\nfunction $ed3b74ccfa001938$var$onCompositionEndImpl(editor, data) {\n    const compositionKey = editor._compositionKey;\n    $ed3b74ccfa001938$var$$setCompositionKey(null); // Handle termination of composition.\n    if (compositionKey !== null && data != null) {\n        // Composition can sometimes move to an adjacent DOM node when backspacing.\n        // So check for the empty case.\n        if (data === \"\") {\n            const node = $ed3b74ccfa001938$var$$getNodeByKey(compositionKey);\n            const textNode = $ed3b74ccfa001938$var$getDOMTextNode(editor.getElementByKey(compositionKey));\n            if (textNode !== null && textNode.nodeValue !== null && $ed3b74ccfa001938$var$$isTextNode(node)) $ed3b74ccfa001938$var$$updateTextNodeFromDOMContent(node, textNode.nodeValue, null, null, true);\n            return;\n        } // Composition can sometimes be that of a new line. In which case, we need to\n        // handle that accordingly.\n        if (data[data.length - 1] === \"\\n\") {\n            const selection = $ed3b74ccfa001938$var$$getSelection();\n            if ($ed3b74ccfa001938$var$$isRangeSelection(selection)) {\n                // If the last character is a line break, we also need to insert\n                // a line break.\n                const focus = selection.focus;\n                selection.anchor.set(focus.key, focus.offset, focus.type);\n                $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$KEY_ENTER_COMMAND, null);\n                return;\n            }\n        }\n    }\n    $ed3b74ccfa001938$var$$updateSelectedTextFromDOM(true, editor, data);\n}\nfunction $ed3b74ccfa001938$var$onCompositionEnd(event, editor) {\n    // Firefox fires onCompositionEnd before onInput, but Chrome/Webkit,\n    // fire onInput before onCompositionEnd. To ensure the sequence works\n    // like Chrome/Webkit we use the isFirefoxEndingComposition flag to\n    // defer handling of onCompositionEnd in Firefox till we have processed\n    // the logic in onInput.\n    if ($ed3b74ccfa001938$var$IS_FIREFOX) $ed3b74ccfa001938$var$isFirefoxEndingComposition = true;\n    else $ed3b74ccfa001938$var$updateEditor(editor, ()=>{\n        $ed3b74ccfa001938$var$onCompositionEndImpl(editor, event.data);\n    });\n}\nfunction $ed3b74ccfa001938$var$onKeyDown(event, editor) {\n    $ed3b74ccfa001938$var$lastKeyDownTimeStamp = event.timeStamp;\n    $ed3b74ccfa001938$var$lastKeyCode = event.keyCode;\n    if (editor.isComposing()) return;\n    const { keyCode: keyCode , shiftKey: shiftKey , ctrlKey: ctrlKey , metaKey: metaKey , altKey: altKey  } = event;\n    if ($ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$KEY_DOWN_COMMAND, event)) return;\n    if ($ed3b74ccfa001938$var$isMoveForward(keyCode, ctrlKey, altKey, metaKey)) $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$KEY_ARROW_RIGHT_COMMAND, event);\n    else if ($ed3b74ccfa001938$var$isMoveToEnd(keyCode, ctrlKey, shiftKey, altKey, metaKey)) $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$MOVE_TO_END, event);\n    else if ($ed3b74ccfa001938$var$isMoveBackward(keyCode, ctrlKey, altKey, metaKey)) $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$KEY_ARROW_LEFT_COMMAND, event);\n    else if ($ed3b74ccfa001938$var$isMoveToStart(keyCode, ctrlKey, shiftKey, altKey, metaKey)) $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$MOVE_TO_START, event);\n    else if ($ed3b74ccfa001938$var$isMoveUp(keyCode, ctrlKey, metaKey)) $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$KEY_ARROW_UP_COMMAND, event);\n    else if ($ed3b74ccfa001938$var$isMoveDown(keyCode, ctrlKey, metaKey)) $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$KEY_ARROW_DOWN_COMMAND, event);\n    else if ($ed3b74ccfa001938$var$isLineBreak(keyCode, shiftKey)) {\n        $ed3b74ccfa001938$var$isInsertLineBreak = true;\n        $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$KEY_ENTER_COMMAND, event);\n    } else if ($ed3b74ccfa001938$var$isSpace(keyCode)) $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$KEY_SPACE_COMMAND, event);\n    else if ($ed3b74ccfa001938$var$isOpenLineBreak(keyCode, ctrlKey)) {\n        event.preventDefault();\n        $ed3b74ccfa001938$var$isInsertLineBreak = true;\n        $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$INSERT_LINE_BREAK_COMMAND, true);\n    } else if ($ed3b74ccfa001938$var$isParagraph(keyCode, shiftKey)) {\n        $ed3b74ccfa001938$var$isInsertLineBreak = false;\n        $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$KEY_ENTER_COMMAND, event);\n    } else if ($ed3b74ccfa001938$var$isDeleteBackward(keyCode, altKey, metaKey, ctrlKey)) {\n        if ($ed3b74ccfa001938$var$isBackspace(keyCode)) $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$KEY_BACKSPACE_COMMAND, event);\n        else {\n            event.preventDefault();\n            $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$DELETE_CHARACTER_COMMAND, true);\n        }\n    } else if ($ed3b74ccfa001938$var$isEscape(keyCode)) $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$KEY_ESCAPE_COMMAND, event);\n    else if ($ed3b74ccfa001938$var$isDeleteForward(keyCode, ctrlKey, shiftKey, altKey, metaKey)) {\n        if ($ed3b74ccfa001938$var$isDelete(keyCode)) $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$KEY_DELETE_COMMAND, event);\n        else {\n            event.preventDefault();\n            $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$DELETE_CHARACTER_COMMAND, false);\n        }\n    } else if ($ed3b74ccfa001938$var$isDeleteWordBackward(keyCode, altKey, ctrlKey)) {\n        event.preventDefault();\n        $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$DELETE_WORD_COMMAND, true);\n    } else if ($ed3b74ccfa001938$var$isDeleteWordForward(keyCode, altKey, ctrlKey)) {\n        event.preventDefault();\n        $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$DELETE_WORD_COMMAND, false);\n    } else if ($ed3b74ccfa001938$var$isDeleteLineBackward(keyCode, metaKey)) {\n        event.preventDefault();\n        $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$DELETE_LINE_COMMAND, true);\n    } else if ($ed3b74ccfa001938$var$isDeleteLineForward(keyCode, metaKey)) {\n        event.preventDefault();\n        $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$DELETE_LINE_COMMAND, false);\n    } else if ($ed3b74ccfa001938$var$isBold(keyCode, altKey, metaKey, ctrlKey)) {\n        event.preventDefault();\n        $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$FORMAT_TEXT_COMMAND, \"bold\");\n    } else if ($ed3b74ccfa001938$var$isUnderline(keyCode, altKey, metaKey, ctrlKey)) {\n        event.preventDefault();\n        $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$FORMAT_TEXT_COMMAND, \"underline\");\n    } else if ($ed3b74ccfa001938$var$isItalic(keyCode, altKey, metaKey, ctrlKey)) {\n        event.preventDefault();\n        $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$FORMAT_TEXT_COMMAND, \"italic\");\n    } else if ($ed3b74ccfa001938$var$isTab(keyCode, altKey, ctrlKey, metaKey)) $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$KEY_TAB_COMMAND, event);\n    else if ($ed3b74ccfa001938$var$isUndo(keyCode, shiftKey, metaKey, ctrlKey)) {\n        event.preventDefault();\n        $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$UNDO_COMMAND, undefined);\n    } else if ($ed3b74ccfa001938$var$isRedo(keyCode, shiftKey, metaKey, ctrlKey)) {\n        event.preventDefault();\n        $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$REDO_COMMAND, undefined);\n    } else {\n        const prevSelection = editor._editorState._selection;\n        if ($ed3b74ccfa001938$var$$isNodeSelection(prevSelection)) {\n            if ($ed3b74ccfa001938$var$isCopy(keyCode, shiftKey, metaKey, ctrlKey)) {\n                event.preventDefault();\n                $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$COPY_COMMAND, event);\n            } else if ($ed3b74ccfa001938$var$isCut(keyCode, shiftKey, metaKey, ctrlKey)) {\n                event.preventDefault();\n                $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$CUT_COMMAND, event);\n            }\n        }\n    }\n    if ($ed3b74ccfa001938$var$isModifier(ctrlKey, shiftKey, altKey, metaKey)) $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$KEY_MODIFIER_COMMAND, event);\n}\nfunction $ed3b74ccfa001938$var$getRootElementRemoveHandles(rootElement) {\n    // @ts-expect-error: internal field\n    let eventHandles = rootElement.__lexicalEventHandles;\n    if (eventHandles === undefined) {\n        eventHandles = []; // @ts-expect-error: internal field\n        rootElement.__lexicalEventHandles = eventHandles;\n    }\n    return eventHandles;\n} // Mapping root editors to their active nested editors, contains nested editors\n// mapping only, so if root editor is selected map will have no reference to free up memory\nconst $ed3b74ccfa001938$var$activeNestedEditorsMap = new Map();\nfunction $ed3b74ccfa001938$var$onDocumentSelectionChange(event) {\n    const target = event.target;\n    const targetWindow = target == null ? null : target.nodeType === 9 ? target.defaultView : target.ownerDocument.defaultView;\n    const domSelection = $ed3b74ccfa001938$var$getDOMSelection(targetWindow);\n    if (domSelection === null) return;\n    const nextActiveEditor = $ed3b74ccfa001938$var$getNearestEditorFromDOMNode(domSelection.anchorNode);\n    if (nextActiveEditor === null) return;\n    if ($ed3b74ccfa001938$var$isSelectionChangeFromMouseDown) {\n        $ed3b74ccfa001938$var$isSelectionChangeFromMouseDown = false;\n        $ed3b74ccfa001938$var$updateEditor(nextActiveEditor, ()=>{\n            const lastSelection = $ed3b74ccfa001938$var$$getPreviousSelection();\n            const domAnchorNode = domSelection.anchorNode;\n            if (domAnchorNode === null) return;\n            const nodeType = domAnchorNode.nodeType; // If the user is attempting to click selection back onto text, then\n            // we should attempt create a range selection.\n            // When we click on an empty paragraph node or the end of a paragraph that ends\n            // with an image/poll, the nodeType will be ELEMENT_NODE\n            if (nodeType !== $ed3b74ccfa001938$var$DOM_ELEMENT_TYPE && nodeType !== $ed3b74ccfa001938$var$DOM_TEXT_TYPE) return;\n            const newSelection = $ed3b74ccfa001938$var$internalCreateRangeSelection(lastSelection, domSelection, nextActiveEditor);\n            $ed3b74ccfa001938$var$$setSelection(newSelection);\n        });\n    } // When editor receives selection change event, we're checking if\n    // it has any sibling editors (within same parent editor) that were active\n    // before, and trigger selection change on it to nullify selection.\n    const editors = $ed3b74ccfa001938$var$getEditorsToPropagate(nextActiveEditor);\n    const rootEditor = editors[editors.length - 1];\n    const rootEditorKey = rootEditor._key;\n    const activeNestedEditor = $ed3b74ccfa001938$var$activeNestedEditorsMap.get(rootEditorKey);\n    const prevActiveEditor = activeNestedEditor || rootEditor;\n    if (prevActiveEditor !== nextActiveEditor) $ed3b74ccfa001938$var$onSelectionChange(domSelection, prevActiveEditor, false);\n    $ed3b74ccfa001938$var$onSelectionChange(domSelection, nextActiveEditor, true); // If newly selected editor is nested, then add it to the map, clean map otherwise\n    if (nextActiveEditor !== rootEditor) $ed3b74ccfa001938$var$activeNestedEditorsMap.set(rootEditorKey, nextActiveEditor);\n    else if (activeNestedEditor) $ed3b74ccfa001938$var$activeNestedEditorsMap.delete(rootEditorKey);\n}\nfunction $ed3b74ccfa001938$var$stopLexicalPropagation(event) {\n    // We attach a special property to ensure the same event doesn't re-fire\n    // for parent editors.\n    // @ts-ignore\n    event._lexicalHandled = true;\n}\nfunction $ed3b74ccfa001938$var$hasStoppedLexicalPropagation(event) {\n    // @ts-ignore\n    const stopped = event._lexicalHandled === true;\n    return stopped;\n}\nfunction $ed3b74ccfa001938$var$addRootElementEvents(rootElement, editor) {\n    // We only want to have a single global selectionchange event handler, shared\n    // between all editor instances.\n    if ($ed3b74ccfa001938$var$rootElementsRegistered === 0) {\n        const doc = rootElement.ownerDocument;\n        doc.addEventListener(\"selectionchange\", $ed3b74ccfa001938$var$onDocumentSelectionChange);\n    }\n    $ed3b74ccfa001938$var$rootElementsRegistered++; // @ts-expect-error: internal field\n    rootElement.__lexicalEditor = editor;\n    const removeHandles = $ed3b74ccfa001938$var$getRootElementRemoveHandles(rootElement);\n    for(let i = 0; i < $ed3b74ccfa001938$var$rootElementEvents.length; i++){\n        const [eventName, onEvent] = $ed3b74ccfa001938$var$rootElementEvents[i];\n        const eventHandler = typeof onEvent === \"function\" ? (event)=>{\n            if ($ed3b74ccfa001938$var$hasStoppedLexicalPropagation(event)) return;\n            $ed3b74ccfa001938$var$stopLexicalPropagation(event);\n            if (editor.isEditable()) onEvent(event, editor);\n        } : (event)=>{\n            if ($ed3b74ccfa001938$var$hasStoppedLexicalPropagation(event)) return;\n            $ed3b74ccfa001938$var$stopLexicalPropagation(event);\n            if (editor.isEditable()) switch(eventName){\n                case \"cut\":\n                    return $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$CUT_COMMAND, event);\n                case \"copy\":\n                    return $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$COPY_COMMAND, event);\n                case \"paste\":\n                    return $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$PASTE_COMMAND, event);\n                case \"dragstart\":\n                    return $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$DRAGSTART_COMMAND, event);\n                case \"dragover\":\n                    return $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$DRAGOVER_COMMAND, event);\n                case \"dragend\":\n                    return $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$DRAGEND_COMMAND, event);\n                case \"focus\":\n                    return $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$FOCUS_COMMAND, event);\n                case \"blur\":\n                    return $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$BLUR_COMMAND, event);\n                case \"drop\":\n                    return $ed3b74ccfa001938$var$dispatchCommand(editor, $ed3b74ccfa001938$var$DROP_COMMAND, event);\n            }\n        };\n        rootElement.addEventListener(eventName, eventHandler);\n        removeHandles.push(()=>{\n            rootElement.removeEventListener(eventName, eventHandler);\n        });\n    }\n}\nfunction $ed3b74ccfa001938$var$removeRootElementEvents(rootElement) {\n    if ($ed3b74ccfa001938$var$rootElementsRegistered !== 0) {\n        $ed3b74ccfa001938$var$rootElementsRegistered--; // We only want to have a single global selectionchange event handler, shared\n        // between all editor instances.\n        if ($ed3b74ccfa001938$var$rootElementsRegistered === 0) {\n            const doc = rootElement.ownerDocument;\n            doc.removeEventListener(\"selectionchange\", $ed3b74ccfa001938$var$onDocumentSelectionChange);\n        }\n    } // @ts-expect-error: internal field\n    const editor = rootElement.__lexicalEditor;\n    if (editor !== null && editor !== undefined) {\n        $ed3b74ccfa001938$var$cleanActiveNestedEditorsMap(editor); // @ts-expect-error: internal field\n        rootElement.__lexicalEditor = null;\n    }\n    const removeHandles = $ed3b74ccfa001938$var$getRootElementRemoveHandles(rootElement);\n    for(let i = 0; i < removeHandles.length; i++)removeHandles[i]();\n     // @ts-expect-error: internal field\n    rootElement.__lexicalEventHandles = [];\n}\nfunction $ed3b74ccfa001938$var$cleanActiveNestedEditorsMap(editor) {\n    if (editor._parentEditor !== null) {\n        // For nested editor cleanup map if this editor was marked as active\n        const editors = $ed3b74ccfa001938$var$getEditorsToPropagate(editor);\n        const rootEditor = editors[editors.length - 1];\n        const rootEditorKey = rootEditor._key;\n        if ($ed3b74ccfa001938$var$activeNestedEditorsMap.get(rootEditorKey) === editor) $ed3b74ccfa001938$var$activeNestedEditorsMap.delete(rootEditorKey);\n    } else // For top-level editors cleanup map\n    $ed3b74ccfa001938$var$activeNestedEditorsMap.delete(editor._key);\n}\nfunction $ed3b74ccfa001938$var$markSelectionChangeFromDOMUpdate() {\n    $ed3b74ccfa001938$var$isSelectionChangeFromDOMUpdate = true;\n}\nfunction $ed3b74ccfa001938$var$markCollapsedSelectionFormat(format, style, offset, key, timeStamp) {\n    $ed3b74ccfa001938$var$collapsedSelectionFormat = [\n        format,\n        style,\n        offset,\n        key,\n        timeStamp\n    ];\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ class $ed3b74ccfa001938$var$Point {\n    is(point) {\n        return this.key === point.key && this.offset === point.offset && this.type === point.type;\n    }\n    isBefore(b) {\n        let aNode = this.getNode();\n        let bNode = b.getNode();\n        const aOffset = this.offset;\n        const bOffset = b.offset;\n        if ($ed3b74ccfa001938$var$$isElementNode(aNode)) {\n            const aNodeDescendant = aNode.getDescendantByIndex(aOffset);\n            aNode = aNodeDescendant != null ? aNodeDescendant : aNode;\n        }\n        if ($ed3b74ccfa001938$var$$isElementNode(bNode)) {\n            const bNodeDescendant = bNode.getDescendantByIndex(bOffset);\n            bNode = bNodeDescendant != null ? bNodeDescendant : bNode;\n        }\n        if (aNode === bNode) return aOffset < bOffset;\n        return aNode.isBefore(bNode);\n    }\n    getNode() {\n        const key = this.key;\n        const node = $ed3b74ccfa001938$var$$getNodeByKey(key);\n        if (node === null) throw Error(`Point.getNode: node not found`);\n        return node;\n    }\n    set(key, offset, type) {\n        const selection = this._selection;\n        const oldKey = this.key;\n        this.key = key;\n        this.offset = offset;\n        this.type = type;\n        if (!$ed3b74ccfa001938$var$isCurrentlyReadOnlyMode()) {\n            if ($ed3b74ccfa001938$var$$getCompositionKey() === oldKey) $ed3b74ccfa001938$var$$setCompositionKey(key);\n            if (selection !== null) {\n                selection._cachedNodes = null;\n                selection.dirty = true;\n            }\n        }\n    }\n    constructor(key, offset, type){\n        this._selection = null;\n        this.key = key;\n        this.offset = offset;\n        this.type = type;\n    }\n}\nfunction $ed3b74ccfa001938$var$$createPoint(key, offset, type) {\n    // @ts-expect-error: intentionally cast as we use a class for perf reasons\n    return new $ed3b74ccfa001938$var$Point(key, offset, type);\n}\nfunction $ed3b74ccfa001938$var$selectPointOnNode(point, node) {\n    let key = node.__key;\n    let offset = point.offset;\n    let type = \"element\";\n    if ($ed3b74ccfa001938$var$$isTextNode(node)) {\n        type = \"text\";\n        const textContentLength = node.getTextContentSize();\n        if (offset > textContentLength) offset = textContentLength;\n    } else if (!$ed3b74ccfa001938$var$$isElementNode(node)) {\n        const nextSibling = node.getNextSibling();\n        if ($ed3b74ccfa001938$var$$isTextNode(nextSibling)) {\n            key = nextSibling.__key;\n            offset = 0;\n            type = \"text\";\n        } else {\n            const parentNode = node.getParent();\n            if (parentNode) {\n                key = parentNode.__key;\n                offset = node.getIndexWithinParent() + 1;\n            }\n        }\n    }\n    point.set(key, offset, type);\n}\nfunction $ed3b74ccfa001938$var$$moveSelectionPointToEnd(point, node) {\n    if ($ed3b74ccfa001938$var$$isElementNode(node)) {\n        const lastNode = node.getLastDescendant();\n        if ($ed3b74ccfa001938$var$$isElementNode(lastNode) || $ed3b74ccfa001938$var$$isTextNode(lastNode)) $ed3b74ccfa001938$var$selectPointOnNode(point, lastNode);\n        else $ed3b74ccfa001938$var$selectPointOnNode(point, node);\n    } else $ed3b74ccfa001938$var$selectPointOnNode(point, node);\n}\nfunction $ed3b74ccfa001938$var$$transferStartingElementPointToTextPoint(start, end, format, style) {\n    const element = start.getNode();\n    const placementNode = element.getChildAtIndex(start.offset);\n    const textNode = $ed3b74ccfa001938$var$$createTextNode();\n    const target = $ed3b74ccfa001938$var$$isRootNode(element) ? $ed3b74ccfa001938$var$$createParagraphNode().append(textNode) : textNode;\n    textNode.setFormat(format);\n    textNode.setStyle(style);\n    if (placementNode === null) element.append(target);\n    else placementNode.insertBefore(target);\n     // Transfer the element point to a text point.\n    if (start.is(end)) end.set(textNode.__key, 0, \"text\");\n    start.set(textNode.__key, 0, \"text\");\n}\nfunction $ed3b74ccfa001938$var$$setPointValues(point, key, offset, type) {\n    point.key = key;\n    point.offset = offset;\n    point.type = type;\n}\nclass $ed3b74ccfa001938$var$NodeSelection {\n    is(selection) {\n        if (!$ed3b74ccfa001938$var$$isNodeSelection(selection)) return false;\n        const a = this._nodes;\n        const b = selection._nodes;\n        return a.size === b.size && Array.from(a).every((key)=>b.has(key));\n    }\n    add(key) {\n        this.dirty = true;\n        this._nodes.add(key);\n        this._cachedNodes = null;\n    }\n    delete(key) {\n        this.dirty = true;\n        this._nodes.delete(key);\n        this._cachedNodes = null;\n    }\n    clear() {\n        this.dirty = true;\n        this._nodes.clear();\n        this._cachedNodes = null;\n    }\n    has(key) {\n        return this._nodes.has(key);\n    }\n    clone() {\n        return new $ed3b74ccfa001938$var$NodeSelection(new Set(this._nodes));\n    }\n    extract() {\n        return this.getNodes();\n    }\n    insertRawText(text) {}\n    insertText() {}\n    insertNodes(nodes, selectStart) {\n        const selectedNodes = this.getNodes();\n        const selectedNodesLength = selectedNodes.length;\n        const lastSelectedNode = selectedNodes[selectedNodesLength - 1];\n        let selectionAtEnd; // Insert nodes\n        if ($ed3b74ccfa001938$var$$isTextNode(lastSelectedNode)) selectionAtEnd = lastSelectedNode.select();\n        else {\n            const index = lastSelectedNode.getIndexWithinParent() + 1;\n            selectionAtEnd = lastSelectedNode.getParentOrThrow().select(index, index);\n        }\n        selectionAtEnd.insertNodes(nodes, selectStart); // Remove selected nodes\n        for(let i = 0; i < selectedNodesLength; i++)selectedNodes[i].remove();\n        return true;\n    }\n    getNodes() {\n        const cachedNodes = this._cachedNodes;\n        if (cachedNodes !== null) return cachedNodes;\n        const objects = this._nodes;\n        const nodes = [];\n        for (const object of objects){\n            const node = $ed3b74ccfa001938$var$$getNodeByKey(object);\n            if (node !== null) nodes.push(node);\n        }\n        if (!$ed3b74ccfa001938$var$isCurrentlyReadOnlyMode()) this._cachedNodes = nodes;\n        return nodes;\n    }\n    getTextContent() {\n        const nodes = this.getNodes();\n        let textContent = \"\";\n        for(let i = 0; i < nodes.length; i++)textContent += nodes[i].getTextContent();\n        return textContent;\n    }\n    constructor(objects){\n        this.dirty = false;\n        this._nodes = objects;\n        this._cachedNodes = null;\n    }\n}\nfunction $ed3b74ccfa001938$var$$isRangeSelection(x) {\n    return x instanceof $ed3b74ccfa001938$var$RangeSelection;\n}\nclass $ed3b74ccfa001938$var$GridSelection {\n    is(selection) {\n        if (!$ed3b74ccfa001938$var$DEPRECATED_$isGridSelection(selection)) return false;\n        return this.gridKey === selection.gridKey && this.anchor.is(selection.anchor) && this.focus.is(selection.focus);\n    }\n    set(gridKey, anchorCellKey, focusCellKey) {\n        this.dirty = true;\n        this.gridKey = gridKey;\n        this.anchor.key = anchorCellKey;\n        this.focus.key = focusCellKey;\n        this._cachedNodes = null;\n    }\n    clone() {\n        return new $ed3b74ccfa001938$var$GridSelection(this.gridKey, this.anchor, this.focus);\n    }\n    isCollapsed() {\n        return false;\n    }\n    isBackward() {\n        return this.focus.isBefore(this.anchor);\n    }\n    getCharacterOffsets() {\n        return $ed3b74ccfa001938$var$getCharacterOffsets(this);\n    }\n    extract() {\n        return this.getNodes();\n    }\n    insertRawText(text) {}\n    insertText() {}\n    insertNodes(nodes, selectStart) {\n        const focusNode = this.focus.getNode();\n        const selection = $ed3b74ccfa001938$var$$normalizeSelection(focusNode.select(0, focusNode.getChildrenSize()));\n        return selection.insertNodes(nodes, selectStart);\n    }\n    getShape() {\n        const anchorCellNode = $ed3b74ccfa001938$var$$getNodeByKey(this.anchor.key);\n        if (!(anchorCellNode !== null)) throw Error(`getNodes: expected to find AnchorNode`);\n        const anchorCellNodeIndex = anchorCellNode.getIndexWithinParent();\n        const anchorCelRoweIndex = anchorCellNode.getParentOrThrow().getIndexWithinParent();\n        const focusCellNode = $ed3b74ccfa001938$var$$getNodeByKey(this.focus.key);\n        if (!(focusCellNode !== null)) throw Error(`getNodes: expected to find FocusNode`);\n        const focusCellNodeIndex = focusCellNode.getIndexWithinParent();\n        const focusCellRowIndex = focusCellNode.getParentOrThrow().getIndexWithinParent();\n        const startX = Math.min(anchorCellNodeIndex, focusCellNodeIndex);\n        const stopX = Math.max(anchorCellNodeIndex, focusCellNodeIndex);\n        const startY = Math.min(anchorCelRoweIndex, focusCellRowIndex);\n        const stopY = Math.max(anchorCelRoweIndex, focusCellRowIndex);\n        return {\n            fromX: Math.min(startX, stopX),\n            fromY: Math.min(startY, stopY),\n            toX: Math.max(startX, stopX),\n            toY: Math.max(startY, stopY)\n        };\n    }\n    getNodes() {\n        const cachedNodes = this._cachedNodes;\n        if (cachedNodes !== null) return cachedNodes;\n        const anchorNode = this.anchor.getNode();\n        const focusNode = this.focus.getNode();\n        const anchorCell = $ed3b74ccfa001938$var$$findMatchingParent(anchorNode, $ed3b74ccfa001938$var$DEPRECATED_$isGridCellNode);\n        const focusCell = $ed3b74ccfa001938$var$$findMatchingParent(focusNode, $ed3b74ccfa001938$var$DEPRECATED_$isGridCellNode);\n        if (!$ed3b74ccfa001938$var$DEPRECATED_$isGridCellNode(anchorCell)) throw Error(`Expected GridSelection anchor to be (or a child of) GridCellNode`);\n        if (!$ed3b74ccfa001938$var$DEPRECATED_$isGridCellNode(focusCell)) throw Error(`Expected GridSelection focus to be (or a child of) GridCellNode`);\n        const anchorRow = anchorCell.getParent();\n        if (!$ed3b74ccfa001938$var$DEPRECATED_$isGridRowNode(anchorRow)) throw Error(`Expected anchorCell to have a parent GridRowNode`);\n        const gridNode = anchorRow.getParent();\n        if (!$ed3b74ccfa001938$var$DEPRECATED_$isGridNode(gridNode)) throw Error(`Expected tableNode to have a parent GridNode`);\n         // TODO Mapping the whole Grid every time not efficient. We need to compute the entire state only\n        // once (on load) and iterate on it as updates occur. However, to do this we need to have the\n        // ability to store a state. Killing GridSelection and moving the logic to the plugin would make\n        // this possible.\n        const [map, cellAMap, cellBMap] = $ed3b74ccfa001938$var$computeGridMap(gridNode, anchorCell, focusCell);\n        let minColumn = Math.min(cellAMap.startColumn, cellBMap.startColumn);\n        let minRow = Math.min(cellAMap.startRow, cellBMap.startRow);\n        let maxColumn = Math.max(cellAMap.startColumn + cellAMap.cell.__colSpan - 1, cellBMap.startColumn + cellBMap.cell.__colSpan - 1);\n        let maxRow = Math.max(cellAMap.startRow + cellAMap.cell.__rowSpan - 1, cellBMap.startRow + cellBMap.cell.__rowSpan - 1);\n        let exploredMinColumn = minColumn;\n        let exploredMinRow = minRow;\n        let exploredMaxColumn = minColumn;\n        let exploredMaxRow = minRow;\n        function expandBoundary(mapValue) {\n            const { cell: cell , startColumn: cellStartColumn , startRow: cellStartRow  } = mapValue;\n            minColumn = Math.min(minColumn, cellStartColumn);\n            minRow = Math.min(minRow, cellStartRow);\n            maxColumn = Math.max(maxColumn, cellStartColumn + cell.__colSpan - 1);\n            maxRow = Math.max(maxRow, cellStartRow + cell.__rowSpan - 1);\n        }\n        while(minColumn < exploredMinColumn || minRow < exploredMinRow || maxColumn > exploredMaxColumn || maxRow > exploredMaxRow){\n            if (minColumn < exploredMinColumn) {\n                // Expand on the left\n                const rowDiff = exploredMaxRow - exploredMinRow;\n                const previousColumn = exploredMinColumn - 1;\n                for(let i = 0; i <= rowDiff; i++)expandBoundary(map[exploredMinRow + i][previousColumn]);\n                exploredMinColumn = previousColumn;\n            }\n            if (minRow < exploredMinRow) {\n                // Expand on top\n                const columnDiff = exploredMaxColumn - exploredMinColumn;\n                const previousRow = exploredMinRow - 1;\n                for(let i = 0; i <= columnDiff; i++)expandBoundary(map[previousRow][exploredMinColumn + i]);\n                exploredMinRow = previousRow;\n            }\n            if (maxColumn > exploredMaxColumn) {\n                // Expand on the right\n                const rowDiff = exploredMaxRow - exploredMinRow;\n                const nextColumn = exploredMaxColumn + 1;\n                for(let i = 0; i <= rowDiff; i++)expandBoundary(map[exploredMinRow + i][nextColumn]);\n                exploredMaxColumn = nextColumn;\n            }\n            if (maxRow > exploredMaxRow) {\n                // Expand on the bottom\n                const columnDiff = exploredMaxColumn - exploredMinColumn;\n                const nextRow = exploredMaxRow + 1;\n                for(let i = 0; i <= columnDiff; i++)expandBoundary(map[nextRow][exploredMinColumn + i]);\n                exploredMaxRow = nextRow;\n            }\n        }\n        const nodes = [\n            gridNode\n        ];\n        let lastRow = null;\n        for(let i = minRow; i <= maxRow; i++)for(let j = minColumn; j <= maxColumn; j++){\n            const { cell: cell  } = map[i][j];\n            const currentRow = cell.getParent();\n            if (!$ed3b74ccfa001938$var$DEPRECATED_$isGridRowNode(currentRow)) throw Error(`Expected GridCellNode parent to be a GridRowNode`);\n            if (currentRow !== lastRow) nodes.push(currentRow);\n            nodes.push(cell, ...$ed3b74ccfa001938$var$$getChildrenRecursively(cell));\n            lastRow = currentRow;\n        }\n        if (!$ed3b74ccfa001938$var$isCurrentlyReadOnlyMode()) this._cachedNodes = nodes;\n        return nodes;\n    }\n    getTextContent() {\n        const nodes = this.getNodes();\n        let textContent = \"\";\n        for(let i = 0; i < nodes.length; i++)textContent += nodes[i].getTextContent();\n        return textContent;\n    }\n    constructor(gridKey, anchor, focus){\n        this.gridKey = gridKey;\n        this.anchor = anchor;\n        this.focus = focus;\n        this.dirty = false;\n        this._cachedNodes = null;\n        anchor._selection = this;\n        focus._selection = this;\n    }\n}\nfunction $ed3b74ccfa001938$var$DEPRECATED_$isGridSelection(x) {\n    return x instanceof $ed3b74ccfa001938$var$GridSelection;\n}\nclass $ed3b74ccfa001938$var$RangeSelection {\n    is(selection) {\n        if (!$ed3b74ccfa001938$var$$isRangeSelection(selection)) return false;\n        return this.anchor.is(selection.anchor) && this.focus.is(selection.focus) && this.format === selection.format && this.style === selection.style;\n    }\n    isBackward() {\n        return this.focus.isBefore(this.anchor);\n    }\n    isCollapsed() {\n        return this.anchor.is(this.focus);\n    }\n    getNodes() {\n        const cachedNodes = this._cachedNodes;\n        if (cachedNodes !== null) return cachedNodes;\n        const anchor = this.anchor;\n        const focus = this.focus;\n        const isBefore = anchor.isBefore(focus);\n        const firstPoint = isBefore ? anchor : focus;\n        const lastPoint = isBefore ? focus : anchor;\n        let firstNode = firstPoint.getNode();\n        let lastNode = lastPoint.getNode();\n        const startOffset = firstPoint.offset;\n        const endOffset = lastPoint.offset;\n        if ($ed3b74ccfa001938$var$$isElementNode(firstNode)) {\n            const firstNodeDescendant = firstNode.getDescendantByIndex(startOffset);\n            firstNode = firstNodeDescendant != null ? firstNodeDescendant : firstNode;\n        }\n        if ($ed3b74ccfa001938$var$$isElementNode(lastNode)) {\n            let lastNodeDescendant = lastNode.getDescendantByIndex(endOffset); // We don't want to over-select, as node selection infers the child before\n            // the last descendant, not including that descendant.\n            if (lastNodeDescendant !== null && lastNodeDescendant !== firstNode && lastNode.getChildAtIndex(endOffset) === lastNodeDescendant) lastNodeDescendant = lastNodeDescendant.getPreviousSibling();\n            lastNode = lastNodeDescendant != null ? lastNodeDescendant : lastNode;\n        }\n        let nodes;\n        if (firstNode.is(lastNode)) {\n            if ($ed3b74ccfa001938$var$$isElementNode(firstNode) && firstNode.getChildrenSize() > 0) nodes = [];\n            else nodes = [\n                firstNode\n            ];\n        } else nodes = firstNode.getNodesBetween(lastNode);\n        if (!$ed3b74ccfa001938$var$isCurrentlyReadOnlyMode()) this._cachedNodes = nodes;\n        return nodes;\n    }\n    setTextNodeRange(anchorNode, anchorOffset, focusNode, focusOffset) {\n        $ed3b74ccfa001938$var$$setPointValues(this.anchor, anchorNode.__key, anchorOffset, \"text\");\n        $ed3b74ccfa001938$var$$setPointValues(this.focus, focusNode.__key, focusOffset, \"text\");\n        this._cachedNodes = null;\n        this.dirty = true;\n    }\n    getTextContent() {\n        const nodes = this.getNodes();\n        if (nodes.length === 0) return \"\";\n        const firstNode = nodes[0];\n        const lastNode = nodes[nodes.length - 1];\n        const anchor = this.anchor;\n        const focus = this.focus;\n        const isBefore = anchor.isBefore(focus);\n        const [anchorOffset, focusOffset] = $ed3b74ccfa001938$var$getCharacterOffsets(this);\n        let textContent = \"\";\n        let prevWasElement = true;\n        for(let i = 0; i < nodes.length; i++){\n            const node = nodes[i];\n            if ($ed3b74ccfa001938$var$$isElementNode(node) && !node.isInline()) {\n                if (!prevWasElement) textContent += \"\\n\";\n                if (node.isEmpty()) prevWasElement = false;\n                else prevWasElement = true;\n            } else {\n                prevWasElement = false;\n                if ($ed3b74ccfa001938$var$$isTextNode(node)) {\n                    let text = node.getTextContent();\n                    if (node === firstNode) {\n                        if (node === lastNode) {\n                            if (anchor.type !== \"element\" || focus.type !== \"element\" || focus.offset === anchor.offset) text = anchorOffset < focusOffset ? text.slice(anchorOffset, focusOffset) : text.slice(focusOffset, anchorOffset);\n                        } else text = isBefore ? text.slice(anchorOffset) : text.slice(focusOffset);\n                    } else if (node === lastNode) text = isBefore ? text.slice(0, focusOffset) : text.slice(0, anchorOffset);\n                    textContent += text;\n                } else if (($ed3b74ccfa001938$var$$isDecoratorNode(node) || $ed3b74ccfa001938$var$$isLineBreakNode(node)) && (node !== lastNode || !this.isCollapsed())) textContent += node.getTextContent();\n            }\n        }\n        return textContent;\n    }\n    applyDOMRange(range) {\n        const editor = $ed3b74ccfa001938$var$getActiveEditor();\n        const currentEditorState = editor.getEditorState();\n        const lastSelection = currentEditorState._selection;\n        const resolvedSelectionPoints = $ed3b74ccfa001938$var$internalResolveSelectionPoints(range.startContainer, range.startOffset, range.endContainer, range.endOffset, editor, lastSelection);\n        if (resolvedSelectionPoints === null) return;\n        const [anchorPoint, focusPoint] = resolvedSelectionPoints;\n        $ed3b74ccfa001938$var$$setPointValues(this.anchor, anchorPoint.key, anchorPoint.offset, anchorPoint.type);\n        $ed3b74ccfa001938$var$$setPointValues(this.focus, focusPoint.key, focusPoint.offset, focusPoint.type);\n        this._cachedNodes = null;\n    }\n    clone() {\n        const anchor = this.anchor;\n        const focus = this.focus;\n        const selection = new $ed3b74ccfa001938$var$RangeSelection($ed3b74ccfa001938$var$$createPoint(anchor.key, anchor.offset, anchor.type), $ed3b74ccfa001938$var$$createPoint(focus.key, focus.offset, focus.type), this.format, this.style);\n        return selection;\n    }\n    toggleFormat(format) {\n        this.format = $ed3b74ccfa001938$var$toggleTextFormatType(this.format, format, null);\n        this.dirty = true;\n    }\n    setStyle(style) {\n        this.style = style;\n        this.dirty = true;\n    }\n    hasFormat(type) {\n        const formatFlag = $ed3b74ccfa001938$var$TEXT_TYPE_TO_FORMAT[type];\n        return (this.format & formatFlag) !== 0;\n    }\n    insertRawText(text) {\n        const parts = text.split(/\\r?\\n/);\n        if (parts.length === 1) this.insertText(text);\n        else {\n            const nodes = [];\n            const length = parts.length;\n            for(let i = 0; i < length; i++){\n                const part = parts[i];\n                if (part !== \"\") nodes.push($ed3b74ccfa001938$var$$createTextNode(part));\n                if (i !== length - 1) nodes.push($ed3b74ccfa001938$var$$createLineBreakNode());\n            }\n            this.insertNodes(nodes);\n        }\n    }\n    insertText(text) {\n        const anchor = this.anchor;\n        const focus = this.focus;\n        const isBefore = this.isCollapsed() || anchor.isBefore(focus);\n        const format = this.format;\n        const style = this.style;\n        if (isBefore && anchor.type === \"element\") $ed3b74ccfa001938$var$$transferStartingElementPointToTextPoint(anchor, focus, format, style);\n        else if (!isBefore && focus.type === \"element\") $ed3b74ccfa001938$var$$transferStartingElementPointToTextPoint(focus, anchor, format, style);\n        const selectedNodes = this.getNodes();\n        const selectedNodesLength = selectedNodes.length;\n        const firstPoint = isBefore ? anchor : focus;\n        const endPoint = isBefore ? focus : anchor;\n        const startOffset = firstPoint.offset;\n        const endOffset = endPoint.offset;\n        let firstNode = selectedNodes[0];\n        if (!$ed3b74ccfa001938$var$$isTextNode(firstNode)) throw Error(`insertText: first node is not a text node`);\n        const firstNodeText = firstNode.getTextContent();\n        const firstNodeTextLength = firstNodeText.length;\n        const firstNodeParent = firstNode.getParentOrThrow();\n        const lastIndex = selectedNodesLength - 1;\n        let lastNode = selectedNodes[lastIndex];\n        if (this.isCollapsed() && startOffset === firstNodeTextLength && (firstNode.isSegmented() || firstNode.isToken() || !firstNode.canInsertTextAfter() || !firstNodeParent.canInsertTextAfter() && firstNode.getNextSibling() === null)) {\n            let nextSibling = firstNode.getNextSibling();\n            if (!$ed3b74ccfa001938$var$$isTextNode(nextSibling) || $ed3b74ccfa001938$var$$isTokenOrSegmented(nextSibling)) {\n                nextSibling = $ed3b74ccfa001938$var$$createTextNode();\n                nextSibling.setFormat(format);\n                if (!firstNodeParent.canInsertTextAfter()) firstNodeParent.insertAfter(nextSibling);\n                else firstNode.insertAfter(nextSibling);\n            }\n            nextSibling.select(0, 0);\n            firstNode = nextSibling;\n            if (text !== \"\") {\n                this.insertText(text);\n                return;\n            }\n        } else if (this.isCollapsed() && startOffset === 0 && (firstNode.isSegmented() || firstNode.isToken() || !firstNode.canInsertTextBefore() || !firstNodeParent.canInsertTextBefore() && firstNode.getPreviousSibling() === null)) {\n            let prevSibling = firstNode.getPreviousSibling();\n            if (!$ed3b74ccfa001938$var$$isTextNode(prevSibling) || $ed3b74ccfa001938$var$$isTokenOrSegmented(prevSibling)) {\n                prevSibling = $ed3b74ccfa001938$var$$createTextNode();\n                prevSibling.setFormat(format);\n                if (!firstNodeParent.canInsertTextBefore()) firstNodeParent.insertBefore(prevSibling);\n                else firstNode.insertBefore(prevSibling);\n            }\n            prevSibling.select();\n            firstNode = prevSibling;\n            if (text !== \"\") {\n                this.insertText(text);\n                return;\n            }\n        } else if (firstNode.isSegmented() && startOffset !== firstNodeTextLength) {\n            const textNode = $ed3b74ccfa001938$var$$createTextNode(firstNode.getTextContent());\n            textNode.setFormat(format);\n            firstNode.replace(textNode);\n            firstNode = textNode;\n        } else if (!this.isCollapsed() && text !== \"\") {\n            // When the firstNode or lastNode parents are elements that\n            // do not allow text to be inserted before or after, we first\n            // clear the content. Then we normalize selection, then insert\n            // the new content.\n            const lastNodeParent = lastNode.getParent();\n            if (!firstNodeParent.canInsertTextBefore() || !firstNodeParent.canInsertTextAfter() || $ed3b74ccfa001938$var$$isElementNode(lastNodeParent) && (!lastNodeParent.canInsertTextBefore() || !lastNodeParent.canInsertTextAfter())) {\n                this.insertText(\"\");\n                $ed3b74ccfa001938$var$normalizeSelectionPointsForBoundaries(this.anchor, this.focus, null);\n                this.insertText(text);\n                return;\n            }\n        }\n        if (selectedNodesLength === 1) {\n            if (firstNode.isToken()) {\n                const textNode = $ed3b74ccfa001938$var$$createTextNode(text);\n                textNode.select();\n                firstNode.replace(textNode);\n                return;\n            }\n            const firstNodeFormat = firstNode.getFormat();\n            const firstNodeStyle = firstNode.getStyle();\n            if (startOffset === endOffset && (firstNodeFormat !== format || firstNodeStyle !== style)) {\n                if (firstNode.getTextContent() === \"\") {\n                    firstNode.setFormat(format);\n                    firstNode.setStyle(style);\n                } else {\n                    const textNode = $ed3b74ccfa001938$var$$createTextNode(text);\n                    textNode.setFormat(format);\n                    textNode.setStyle(style);\n                    textNode.select();\n                    if (startOffset === 0) firstNode.insertBefore(textNode, false);\n                    else {\n                        const [targetNode] = firstNode.splitText(startOffset);\n                        targetNode.insertAfter(textNode, false);\n                    } // When composing, we need to adjust the anchor offset so that\n                    // we correctly replace that right range.\n                    if (textNode.isComposing() && this.anchor.type === \"text\") this.anchor.offset -= text.length;\n                    return;\n                }\n            }\n            const delCount = endOffset - startOffset;\n            firstNode = firstNode.spliceText(startOffset, delCount, text, true);\n            if (firstNode.getTextContent() === \"\") firstNode.remove();\n            else if (this.anchor.type === \"text\") {\n                if (firstNode.isComposing()) // When composing, we need to adjust the anchor offset so that\n                // we correctly replace that right range.\n                this.anchor.offset -= text.length;\n                else {\n                    this.format = firstNodeFormat;\n                    this.style = firstNodeStyle;\n                }\n            }\n        } else {\n            const markedNodeKeysForKeep = new Set([\n                ...firstNode.getParentKeys(),\n                ...lastNode.getParentKeys()\n            ]); // We have to get the parent elements before the next section,\n            // as in that section we might mutate the lastNode.\n            const firstElement = $ed3b74ccfa001938$var$$isElementNode(firstNode) ? firstNode : firstNode.getParentOrThrow();\n            let lastElement = $ed3b74ccfa001938$var$$isElementNode(lastNode) ? lastNode : lastNode.getParentOrThrow();\n            let lastElementChild = lastNode; // If the last element is inline, we should instead look at getting\n            // the nodes of its parent, rather than itself. This behavior will\n            // then better match how text node insertions work. We will need to\n            // also update the last element's child accordingly as we do this.\n            if (!firstElement.is(lastElement) && lastElement.isInline()) // Keep traversing till we have a non-inline element parent.\n            do {\n                lastElementChild = lastElement;\n                lastElement = lastElement.getParentOrThrow();\n            }while (lastElement.isInline());\n             // Handle mutations to the last node.\n            if (endPoint.type === \"text\" && (endOffset !== 0 || lastNode.getTextContent() === \"\") || endPoint.type === \"element\" && lastNode.getIndexWithinParent() < endOffset) {\n                if ($ed3b74ccfa001938$var$$isTextNode(lastNode) && !lastNode.isToken() && endOffset !== lastNode.getTextContentSize()) {\n                    if (lastNode.isSegmented()) {\n                        const textNode = $ed3b74ccfa001938$var$$createTextNode(lastNode.getTextContent());\n                        lastNode.replace(textNode);\n                        lastNode = textNode;\n                    }\n                    lastNode = lastNode.spliceText(0, endOffset, \"\");\n                    markedNodeKeysForKeep.add(lastNode.__key);\n                } else {\n                    const lastNodeParent = lastNode.getParentOrThrow();\n                    if (!lastNodeParent.canBeEmpty() && lastNodeParent.getChildrenSize() === 1) lastNodeParent.remove();\n                    else lastNode.remove();\n                }\n            } else markedNodeKeysForKeep.add(lastNode.__key);\n             // Either move the remaining nodes of the last parent to after\n            // the first child, or remove them entirely. If the last parent\n            // is the same as the first parent, this logic also works.\n            const lastNodeChildren = lastElement.getChildren();\n            const selectedNodesSet = new Set(selectedNodes);\n            const firstAndLastElementsAreEqual = firstElement.is(lastElement); // We choose a target to insert all nodes after. In the case of having\n            // and inline starting parent element with a starting node that has no\n            // siblings, we should insert after the starting parent element, otherwise\n            // we will incorrectly merge into the starting parent element.\n            // TODO: should we keep on traversing parents if we're inside another\n            // nested inline element?\n            const insertionTarget = firstElement.isInline() && firstNode.getNextSibling() === null ? firstElement : firstNode;\n            for(let i = lastNodeChildren.length - 1; i >= 0; i--){\n                const lastNodeChild = lastNodeChildren[i];\n                if (lastNodeChild.is(firstNode) || $ed3b74ccfa001938$var$$isElementNode(lastNodeChild) && lastNodeChild.isParentOf(firstNode)) break;\n                if (lastNodeChild.isAttached()) {\n                    if (!selectedNodesSet.has(lastNodeChild) || lastNodeChild.is(lastElementChild)) {\n                        if (!firstAndLastElementsAreEqual) insertionTarget.insertAfter(lastNodeChild, false);\n                    } else lastNodeChild.remove();\n                }\n            }\n            if (!firstAndLastElementsAreEqual) {\n                // Check if we have already moved out all the nodes of the\n                // last parent, and if so, traverse the parent tree and mark\n                // them all as being able to deleted too.\n                let parent = lastElement;\n                let lastRemovedParent = null;\n                while(parent !== null){\n                    const children = parent.getChildren();\n                    const childrenLength = children.length;\n                    if (childrenLength === 0 || children[childrenLength - 1].is(lastRemovedParent)) {\n                        markedNodeKeysForKeep.delete(parent.__key);\n                        lastRemovedParent = parent;\n                    }\n                    parent = parent.getParent();\n                }\n            } // Ensure we do splicing after moving of nodes, as splicing\n            // can have side-effects (in the case of hashtags).\n            if (!firstNode.isToken()) {\n                firstNode = firstNode.spliceText(startOffset, firstNodeTextLength - startOffset, text, true);\n                if (firstNode.getTextContent() === \"\") firstNode.remove();\n                else if (firstNode.isComposing() && this.anchor.type === \"text\") // When composing, we need to adjust the anchor offset so that\n                // we correctly replace that right range.\n                this.anchor.offset -= text.length;\n            } else if (startOffset === firstNodeTextLength) firstNode.select();\n            else {\n                const textNode = $ed3b74ccfa001938$var$$createTextNode(text);\n                textNode.select();\n                firstNode.replace(textNode);\n            } // Remove all selected nodes that haven't already been removed.\n            for(let i = 1; i < selectedNodesLength; i++){\n                const selectedNode = selectedNodes[i];\n                const key = selectedNode.__key;\n                if (!markedNodeKeysForKeep.has(key)) selectedNode.remove();\n            }\n        }\n    }\n    removeText() {\n        this.insertText(\"\");\n    }\n    formatText(formatType) {\n        if (this.isCollapsed()) {\n            this.toggleFormat(formatType); // When changing format, we should stop composition\n            $ed3b74ccfa001938$var$$setCompositionKey(null);\n            return;\n        }\n        const selectedNodes = this.getNodes();\n        const selectedTextNodes = [];\n        for (const selectedNode of selectedNodes)if ($ed3b74ccfa001938$var$$isTextNode(selectedNode)) selectedTextNodes.push(selectedNode);\n        const selectedTextNodesLength = selectedTextNodes.length;\n        if (selectedTextNodesLength === 0) {\n            this.toggleFormat(formatType); // When changing format, we should stop composition\n            $ed3b74ccfa001938$var$$setCompositionKey(null);\n            return;\n        }\n        const anchor = this.anchor;\n        const focus = this.focus;\n        const isBackward = this.isBackward();\n        const startPoint = isBackward ? focus : anchor;\n        const endPoint = isBackward ? anchor : focus;\n        let firstIndex = 0;\n        let firstNode = selectedTextNodes[0];\n        let startOffset = startPoint.type === \"element\" ? 0 : startPoint.offset; // In case selection started at the end of text node use next text node\n        if (startPoint.type === \"text\" && startOffset === firstNode.getTextContentSize()) {\n            firstIndex = 1;\n            firstNode = selectedTextNodes[1];\n            startOffset = 0;\n        }\n        if (firstNode == null) return;\n        const firstNextFormat = firstNode.getFormatFlags(formatType, null);\n        const lastIndex = selectedTextNodesLength - 1;\n        let lastNode = selectedTextNodes[lastIndex];\n        const endOffset = endPoint.type === \"text\" ? endPoint.offset : lastNode.getTextContentSize(); // Single node selected\n        if (firstNode.is(lastNode)) {\n            // No actual text is selected, so do nothing.\n            if (startOffset === endOffset) return;\n             // The entire node is selected, so just format it\n            if (startOffset === 0 && endOffset === firstNode.getTextContentSize()) firstNode.setFormat(firstNextFormat);\n            else {\n                // Node is partially selected, so split it into two nodes\n                // add style the selected one.\n                const splitNodes = firstNode.splitText(startOffset, endOffset);\n                const replacement = startOffset === 0 ? splitNodes[0] : splitNodes[1];\n                replacement.setFormat(firstNextFormat); // Update selection only if starts/ends on text node\n                if (startPoint.type === \"text\") startPoint.set(replacement.__key, 0, \"text\");\n                if (endPoint.type === \"text\") endPoint.set(replacement.__key, endOffset - startOffset, \"text\");\n            }\n            this.format = firstNextFormat;\n            return;\n        } // Multiple nodes selected\n        // The entire first node isn't selected, so split it\n        if (startOffset !== 0) {\n            [, firstNode] = firstNode.splitText(startOffset);\n            startOffset = 0;\n        }\n        firstNode.setFormat(firstNextFormat);\n        const lastNextFormat = lastNode.getFormatFlags(formatType, firstNextFormat); // If the offset is 0, it means no actual characters are selected,\n        // so we skip formatting the last node altogether.\n        if (endOffset > 0) {\n            if (endOffset !== lastNode.getTextContentSize()) [lastNode] = lastNode.splitText(endOffset);\n            lastNode.setFormat(lastNextFormat);\n        } // Process all text nodes in between\n        for(let i = firstIndex + 1; i < lastIndex; i++){\n            const textNode = selectedTextNodes[i];\n            if (!textNode.isToken()) {\n                const nextFormat = textNode.getFormatFlags(formatType, lastNextFormat);\n                textNode.setFormat(nextFormat);\n            }\n        } // Update selection only if starts/ends on text node\n        if (startPoint.type === \"text\") startPoint.set(firstNode.__key, startOffset, \"text\");\n        if (endPoint.type === \"text\") endPoint.set(lastNode.__key, endOffset, \"text\");\n        this.format = firstNextFormat | lastNextFormat;\n    }\n    insertNodes(nodes, selectStart) {\n        // If there is a range selected remove the text in it\n        if (!this.isCollapsed()) {\n            const selectionEnd = this.isBackward() ? this.anchor : this.focus;\n            const nextSibling = selectionEnd.getNode().getNextSibling();\n            const nextSiblingKey = nextSibling ? nextSibling.getKey() : null;\n            const prevSibling = selectionEnd.getNode().getPreviousSibling();\n            const prevSiblingKey = prevSibling ? prevSibling.getKey() : null;\n            this.removeText(); // If the selection has been moved to an adjacent inline element, create\n            // a temporary text node that we can insert the nodes after.\n            if (this.isCollapsed() && this.focus.type === \"element\") {\n                let textNode;\n                if (this.focus.key === nextSiblingKey && this.focus.offset === 0) {\n                    textNode = $ed3b74ccfa001938$var$$createTextNode();\n                    this.focus.getNode().insertBefore(textNode);\n                } else if (this.focus.key === prevSiblingKey && this.focus.offset === this.focus.getNode().getChildrenSize()) {\n                    textNode = $ed3b74ccfa001938$var$$createTextNode();\n                    this.focus.getNode().insertAfter(textNode);\n                }\n                if (textNode) {\n                    this.focus.set(textNode.__key, 0, \"text\");\n                    this.anchor.set(textNode.__key, 0, \"text\");\n                }\n            }\n        }\n        const anchor = this.anchor;\n        const anchorOffset = anchor.offset;\n        const anchorNode = anchor.getNode();\n        let target = anchorNode;\n        if (anchor.type === \"element\") {\n            const element = anchor.getNode();\n            const placementNode = element.getChildAtIndex(anchorOffset - 1);\n            if (placementNode === null) target = element;\n            else target = placementNode;\n        }\n        const siblings = []; // Get all remaining text node siblings in this element so we can\n        // append them after the last node we're inserting.\n        const nextSiblings = anchorNode.getNextSiblings();\n        const topLevelElement = $ed3b74ccfa001938$var$$isRootOrShadowRoot(anchorNode) ? null : anchorNode.getTopLevelElementOrThrow();\n        if ($ed3b74ccfa001938$var$$isTextNode(anchorNode)) {\n            const textContent = anchorNode.getTextContent();\n            const textContentLength = textContent.length;\n            if (anchorOffset === 0 && textContentLength !== 0) {\n                const prevSibling = anchorNode.getPreviousSibling();\n                if (prevSibling !== null) target = prevSibling;\n                else target = anchorNode.getParentOrThrow();\n                siblings.push(anchorNode);\n            } else if (anchorOffset === textContentLength) target = anchorNode;\n            else if (anchorNode.isToken()) // Do nothing if we're inside a token node\n            return false;\n            else {\n                // If we started with a range selected grab the danglingText after the\n                // end of the selection and put it on our siblings array so we can\n                // append it after the last node we're inserting\n                let danglingText;\n                [target, danglingText] = anchorNode.splitText(anchorOffset);\n                siblings.push(danglingText);\n            }\n        }\n        const startingNode = target;\n        siblings.push(...nextSiblings);\n        const firstNode = nodes[0];\n        let didReplaceOrMerge = false;\n        let lastNode = null; // Time to insert the nodes!\n        for(let i = 0; i < nodes.length; i++){\n            const node = nodes[i];\n            if (!$ed3b74ccfa001938$var$$isRootOrShadowRoot(target) && !$ed3b74ccfa001938$var$$isDecoratorNode(target) && $ed3b74ccfa001938$var$$isElementNode(node) && !node.isInline()) {\n                // -----\n                // Heuristics for the replacement or merging of elements\n                // -----\n                // If we have an incoming element node as the first node, then we'll need\n                // see if we can merge any descendant leaf nodes into our existing target.\n                // We can do this by finding the first descendant in our node and then we can\n                // pluck it and its parent (siblings included) out and insert them directly\n                // into our target. We only do this for the first node, as we are only\n                // interested in merging with the anchor, which is our target.\n                //\n                // If we apply either the replacement or merging heuristics, we need to be\n                // careful that we're not trying to insert a non-element node into a root node,\n                // so we check if the target's parent after this logic is the root node and if\n                // so we trigger an invariant to ensure this problem is caught in development\n                // and fixed accordingly.\n                if (node.is(firstNode)) {\n                    if ($ed3b74ccfa001938$var$$isElementNode(target) && target.isEmpty() && target.canReplaceWith(node)) {\n                        target.replace(node);\n                        target = node;\n                        didReplaceOrMerge = true;\n                        continue;\n                    } // We may have a node tree where there are many levels, for example with\n                    // lists and tables. So let's find the first descendant to try and merge\n                    // with. So if we have the target:\n                    //\n                    // Paragraph (1)\n                    //   Text (2)\n                    //\n                    // and we are trying to insert:\n                    //\n                    // ListNode (3)\n                    //   ListItemNode (4)\n                    //     Text (5)\n                    //   ListItemNode (6)\n                    //\n                    // The result would be:\n                    //\n                    // Paragraph (1)\n                    //   Text (2)\n                    //   Text (5)\n                    //\n                    const firstDescendant = node.getFirstDescendant();\n                    if ($ed3b74ccfa001938$var$$isLeafNode(firstDescendant)) {\n                        let element = firstDescendant.getParentOrThrow();\n                        while(element.isInline())element = element.getParentOrThrow();\n                        const children = element.getChildren();\n                        const childrenLength = children.length;\n                        if ($ed3b74ccfa001938$var$$isElementNode(target)) {\n                            let firstChild = target.getFirstChild();\n                            for(let s = 0; s < childrenLength; s++){\n                                const child = children[s];\n                                if (firstChild === null) target.append(child);\n                                else firstChild.insertAfter(child);\n                                firstChild = child;\n                            }\n                        } else {\n                            for(let s = childrenLength - 1; s >= 0; s--)target.insertAfter(children[s]);\n                            target = target.getParentOrThrow();\n                        }\n                        lastNode = children[childrenLength - 1];\n                        element.remove();\n                        didReplaceOrMerge = true;\n                        if (element.is(node)) continue;\n                    }\n                }\n                if ($ed3b74ccfa001938$var$$isTextNode(target)) {\n                    if (topLevelElement === null) throw Error(`insertNode: topLevelElement is root node`);\n                    target = topLevelElement;\n                }\n            } else if (didReplaceOrMerge && !$ed3b74ccfa001938$var$$isDecoratorNode(node) && $ed3b74ccfa001938$var$$isRootOrShadowRoot(target.getParent())) throw Error(`insertNodes: cannot insert a non-element into a root node`);\n            didReplaceOrMerge = false;\n            if ($ed3b74ccfa001938$var$$isElementNode(target) && !target.isInline()) {\n                lastNode = node;\n                if ($ed3b74ccfa001938$var$$isDecoratorNode(node) && !node.isInline()) target = target.insertAfter(node, false);\n                else if (!$ed3b74ccfa001938$var$$isElementNode(node)) {\n                    const firstChild = target.getFirstChild();\n                    if (firstChild !== null) firstChild.insertBefore(node);\n                    else target.append(node);\n                    target = node;\n                } else {\n                    if (!node.canBeEmpty() && node.isEmpty()) continue;\n                    if ($ed3b74ccfa001938$var$$isRootNode(target)) {\n                        const placementNode = target.getChildAtIndex(anchorOffset);\n                        if (placementNode !== null) placementNode.insertBefore(node);\n                        else target.append(node);\n                        target = node;\n                    } else if (node.isInline()) {\n                        target.append(node);\n                        target = node;\n                    } else target = target.insertAfter(node, false);\n                }\n            } else if (!$ed3b74ccfa001938$var$$isElementNode(node) || $ed3b74ccfa001938$var$$isElementNode(node) && node.isInline() || $ed3b74ccfa001938$var$$isDecoratorNode(target) && !target.isInline()) {\n                lastNode = node; // when pasting top level node in the middle of paragraph\n                // we need to split paragraph instead of placing it inline\n                if ($ed3b74ccfa001938$var$$isRangeSelection(this) && $ed3b74ccfa001938$var$$isDecoratorNode(node) && ($ed3b74ccfa001938$var$$isElementNode(target) || $ed3b74ccfa001938$var$$isTextNode(target)) && !node.isInline()) {\n                    let splitNode;\n                    let splitOffset;\n                    if ($ed3b74ccfa001938$var$$isTextNode(target)) {\n                        splitNode = target.getParentOrThrow();\n                        const [textNode] = target.splitText(anchorOffset);\n                        splitOffset = textNode.getIndexWithinParent() + 1;\n                    } else {\n                        splitNode = target;\n                        splitOffset = anchorOffset;\n                    }\n                    const [, rightTree] = $ed3b74ccfa001938$var$$splitNode(splitNode, splitOffset);\n                    target = rightTree.insertBefore(node);\n                } else target = target.insertAfter(node, false);\n            } else {\n                const nextTarget = target.getParentOrThrow(); // if we're inserting an Element after a LineBreak, we want to move the target to the parent\n                // and remove the LineBreak so we don't have empty space.\n                if ($ed3b74ccfa001938$var$$isLineBreakNode(target)) target.remove();\n                target = nextTarget; // Re-try again with the target being the parent\n                i--;\n                continue;\n            }\n        }\n        if (selectStart) {\n            // Handle moving selection to start for all nodes\n            if ($ed3b74ccfa001938$var$$isTextNode(startingNode)) startingNode.select();\n            else {\n                const prevSibling = target.getPreviousSibling();\n                if ($ed3b74ccfa001938$var$$isTextNode(prevSibling)) prevSibling.select();\n                else {\n                    const index = target.getIndexWithinParent();\n                    target.getParentOrThrow().select(index, index);\n                }\n            }\n        }\n        if ($ed3b74ccfa001938$var$$isElementNode(target)) {\n            // If the last node to be inserted was a text node,\n            // then we should attempt to move selection to that.\n            const lastChild = $ed3b74ccfa001938$var$$isTextNode(lastNode) ? lastNode : $ed3b74ccfa001938$var$$isElementNode(lastNode) && lastNode.isInline() ? lastNode.getLastDescendant() : target.getLastDescendant();\n            if (!selectStart) {\n                // Handle moving selection to end for elements\n                if (lastChild === null) target.select();\n                else if ($ed3b74ccfa001938$var$$isTextNode(lastChild)) {\n                    if (lastChild.getTextContent() === \"\") lastChild.selectPrevious();\n                    else lastChild.select();\n                } else lastChild.selectNext();\n            }\n            if (siblings.length !== 0) {\n                const originalTarget = target;\n                for(let i = siblings.length - 1; i >= 0; i--){\n                    const sibling = siblings[i];\n                    const prevParent = sibling.getParentOrThrow();\n                    if ($ed3b74ccfa001938$var$$isElementNode(target) && !$ed3b74ccfa001938$var$$isBlockElementNode(sibling) && !($ed3b74ccfa001938$var$$isDecoratorNode(sibling) && (!sibling.isInline() || sibling.isIsolated()))) {\n                        if (originalTarget === target) target.append(sibling);\n                        else target.insertBefore(sibling);\n                        target = sibling;\n                    } else if (!$ed3b74ccfa001938$var$$isElementNode(target) && !$ed3b74ccfa001938$var$$isBlockElementNode(sibling)) {\n                        target.insertBefore(sibling);\n                        target = sibling;\n                    } else if ($ed3b74ccfa001938$var$$isElementNode(sibling) && !sibling.canInsertAfter(target)) {\n                        // @ts-ignore The clone method does exist on the constructor.\n                        const prevParentClone = prevParent.constructor.clone(prevParent);\n                        if (!$ed3b74ccfa001938$var$$isElementNode(prevParentClone)) throw Error(`insertNodes: cloned parent clone is not an element`);\n                        prevParentClone.append(sibling);\n                        target.insertAfter(prevParentClone);\n                    } else target.insertAfter(sibling);\n                     // Check if the prev parent is empty, as it might need\n                    // removing.\n                    if (prevParent.isEmpty() && !prevParent.canBeEmpty()) prevParent.remove();\n                }\n            }\n        } else if (!selectStart) {\n            // Handle moving selection to end for other nodes\n            if ($ed3b74ccfa001938$var$$isTextNode(target)) target.select();\n            else {\n                const element = target.getParentOrThrow();\n                const index = target.getIndexWithinParent() + 1;\n                element.select(index, index);\n            }\n        }\n        return true;\n    }\n    insertParagraph() {\n        if (!this.isCollapsed()) this.removeText();\n        const anchor = this.anchor;\n        const anchorOffset = anchor.offset;\n        let currentElement;\n        let nodesToMove = [];\n        let siblingsToMove = [];\n        if (anchor.type === \"text\") {\n            const anchorNode = anchor.getNode();\n            nodesToMove = anchorNode.getNextSiblings().reverse();\n            currentElement = anchorNode.getParentOrThrow();\n            const isInline = currentElement.isInline();\n            const textContentLength = isInline ? currentElement.getTextContentSize() : anchorNode.getTextContentSize();\n            if (anchorOffset === 0) nodesToMove.push(anchorNode);\n            else {\n                if (isInline) // For inline nodes, we want to move all the siblings to the new paragraph\n                // if selection is at the end, we just move the siblings. Otherwise, we also\n                // split the text node and add that and it's siblings below.\n                siblingsToMove = currentElement.getNextSiblings();\n                if (anchorOffset !== textContentLength) {\n                    if (!isInline || anchorOffset !== anchorNode.getTextContentSize()) {\n                        const [, splitNode] = anchorNode.splitText(anchorOffset);\n                        nodesToMove.push(splitNode);\n                    }\n                }\n            }\n        } else {\n            currentElement = anchor.getNode();\n            if ($ed3b74ccfa001938$var$$isRootOrShadowRoot(currentElement)) {\n                const paragraph = $ed3b74ccfa001938$var$$createParagraphNode();\n                const child = currentElement.getChildAtIndex(anchorOffset);\n                paragraph.select();\n                if (child !== null) child.insertBefore(paragraph, false);\n                else currentElement.append(paragraph);\n                return;\n            }\n            nodesToMove = currentElement.getChildren().slice(anchorOffset).reverse();\n        }\n        const nodesToMoveLength = nodesToMove.length;\n        if (anchorOffset === 0 && nodesToMoveLength > 0 && currentElement.isInline()) {\n            const parent = currentElement.getParentOrThrow();\n            const newElement = parent.insertNewAfter(this, false);\n            if ($ed3b74ccfa001938$var$$isElementNode(newElement)) {\n                const children = parent.getChildren();\n                for(let i = 0; i < children.length; i++)newElement.append(children[i]);\n            }\n            return;\n        }\n        const newElement = currentElement.insertNewAfter(this, false);\n        if (newElement === null) // Handle as a line break insertion\n        this.insertLineBreak();\n        else if ($ed3b74ccfa001938$var$$isElementNode(newElement)) {\n            // If we're at the beginning of the current element, move the new element to be before the current element\n            const currentElementFirstChild = currentElement.getFirstChild();\n            const isBeginning = anchorOffset === 0 && (currentElement.is(anchor.getNode()) || currentElementFirstChild && currentElementFirstChild.is(anchor.getNode()));\n            if (isBeginning && nodesToMoveLength > 0) {\n                currentElement.insertBefore(newElement);\n                return;\n            }\n            let firstChild = null;\n            const siblingsToMoveLength = siblingsToMove.length;\n            const parent = newElement.getParentOrThrow(); // For inline elements, we append the siblings to the parent.\n            if (siblingsToMoveLength > 0) for(let i = 0; i < siblingsToMoveLength; i++){\n                const siblingToMove = siblingsToMove[i];\n                parent.append(siblingToMove);\n            }\n            if (nodesToMoveLength !== 0) for(let i = 0; i < nodesToMoveLength; i++){\n                const nodeToMove = nodesToMove[i];\n                if (firstChild === null) newElement.append(nodeToMove);\n                else firstChild.insertBefore(nodeToMove);\n                firstChild = nodeToMove;\n            }\n            if (!newElement.canBeEmpty() && newElement.getChildrenSize() === 0) {\n                newElement.selectPrevious();\n                newElement.remove();\n            } else newElement.selectStart();\n        }\n    }\n    insertLineBreak(selectStart) {\n        const lineBreakNode = $ed3b74ccfa001938$var$$createLineBreakNode();\n        const anchor = this.anchor;\n        if (anchor.type === \"element\") {\n            const element = anchor.getNode();\n            if ($ed3b74ccfa001938$var$$isRootNode(element)) this.insertParagraph();\n        }\n        if (selectStart) this.insertNodes([\n            lineBreakNode\n        ], true);\n        else if (this.insertNodes([\n            lineBreakNode\n        ])) lineBreakNode.selectNext(0, 0);\n    }\n    getCharacterOffsets() {\n        return $ed3b74ccfa001938$var$getCharacterOffsets(this);\n    }\n    extract() {\n        const selectedNodes = this.getNodes();\n        const selectedNodesLength = selectedNodes.length;\n        const lastIndex = selectedNodesLength - 1;\n        const anchor = this.anchor;\n        const focus = this.focus;\n        let firstNode = selectedNodes[0];\n        let lastNode = selectedNodes[lastIndex];\n        const [anchorOffset, focusOffset] = $ed3b74ccfa001938$var$getCharacterOffsets(this);\n        if (selectedNodesLength === 0) return [];\n        else if (selectedNodesLength === 1) {\n            if ($ed3b74ccfa001938$var$$isTextNode(firstNode) && !this.isCollapsed()) {\n                const startOffset = anchorOffset > focusOffset ? focusOffset : anchorOffset;\n                const endOffset = anchorOffset > focusOffset ? anchorOffset : focusOffset;\n                const splitNodes = firstNode.splitText(startOffset, endOffset);\n                const node = startOffset === 0 ? splitNodes[0] : splitNodes[1];\n                return node != null ? [\n                    node\n                ] : [];\n            }\n            return [\n                firstNode\n            ];\n        }\n        const isBefore = anchor.isBefore(focus);\n        if ($ed3b74ccfa001938$var$$isTextNode(firstNode)) {\n            const startOffset = isBefore ? anchorOffset : focusOffset;\n            if (startOffset === firstNode.getTextContentSize()) selectedNodes.shift();\n            else if (startOffset !== 0) {\n                [, firstNode] = firstNode.splitText(startOffset);\n                selectedNodes[0] = firstNode;\n            }\n        }\n        if ($ed3b74ccfa001938$var$$isTextNode(lastNode)) {\n            const lastNodeText = lastNode.getTextContent();\n            const lastNodeTextLength = lastNodeText.length;\n            const endOffset = isBefore ? focusOffset : anchorOffset;\n            if (endOffset === 0) selectedNodes.pop();\n            else if (endOffset !== lastNodeTextLength) {\n                [lastNode] = lastNode.splitText(endOffset);\n                selectedNodes[lastIndex] = lastNode;\n            }\n        }\n        return selectedNodes;\n    }\n    modify(alter, isBackward, granularity) {\n        const focus = this.focus;\n        const anchor = this.anchor;\n        const collapse = alter === \"move\"; // Handle the selection movement around decorators.\n        const possibleNode = $ed3b74ccfa001938$var$$getAdjacentNode(focus, isBackward);\n        if ($ed3b74ccfa001938$var$$isDecoratorNode(possibleNode) && !possibleNode.isIsolated()) {\n            // Make it possible to move selection from range selection to\n            // node selection on the node.\n            if (collapse && possibleNode.isKeyboardSelectable()) {\n                const nodeSelection = $ed3b74ccfa001938$var$$createNodeSelection();\n                nodeSelection.add(possibleNode.__key);\n                $ed3b74ccfa001938$var$$setSelection(nodeSelection);\n                return;\n            }\n            const sibling = isBackward ? possibleNode.getPreviousSibling() : possibleNode.getNextSibling();\n            if (!$ed3b74ccfa001938$var$$isTextNode(sibling)) {\n                const parent = possibleNode.getParentOrThrow();\n                let offset;\n                let elementKey;\n                if ($ed3b74ccfa001938$var$$isElementNode(sibling)) {\n                    elementKey = sibling.__key;\n                    offset = isBackward ? sibling.getChildrenSize() : 0;\n                } else {\n                    offset = possibleNode.getIndexWithinParent();\n                    elementKey = parent.__key;\n                    if (!isBackward) offset++;\n                }\n                focus.set(elementKey, offset, \"element\");\n                if (collapse) anchor.set(elementKey, offset, \"element\");\n                return;\n            } else {\n                const siblingKey = sibling.__key;\n                const offset = isBackward ? sibling.getTextContent().length : 0;\n                focus.set(siblingKey, offset, \"text\");\n                if (collapse) anchor.set(siblingKey, offset, \"text\");\n                return;\n            }\n        }\n        const editor = $ed3b74ccfa001938$var$getActiveEditor();\n        const domSelection = $ed3b74ccfa001938$var$getDOMSelection(editor._window);\n        if (!domSelection) return;\n        const blockCursorElement = editor._blockCursorElement;\n        const rootElement = editor._rootElement; // Remove the block cursor element if it exists. This will ensure selection\n        // works as intended. If we leave it in the DOM all sorts of strange bugs\n        // occur. :/\n        if (rootElement !== null && blockCursorElement !== null && $ed3b74ccfa001938$var$$isElementNode(possibleNode) && !possibleNode.isInline() && !possibleNode.canBeEmpty()) $ed3b74ccfa001938$var$removeDOMBlockCursorElement(blockCursorElement, editor, rootElement);\n         // We use the DOM selection.modify API here to \"tell\" us what the selection\n        // will be. We then use it to update the Lexical selection accordingly. This\n        // is much more reliable than waiting for a beforeinput and using the ranges\n        // from getTargetRanges(), and is also better than trying to do it ourselves\n        // using Intl.Segmenter or other workarounds that struggle with word segments\n        // and line segments (especially with word wrapping and non-Roman languages).\n        $ed3b74ccfa001938$var$moveNativeSelection(domSelection, alter, isBackward ? \"backward\" : \"forward\", granularity); // Guard against no ranges\n        if (domSelection.rangeCount > 0) {\n            const range = domSelection.getRangeAt(0); // Apply the DOM selection to our Lexical selection.\n            const anchorNode = this.anchor.getNode();\n            const root = $ed3b74ccfa001938$var$$isRootNode(anchorNode) ? anchorNode : $ed3b74ccfa001938$var$$getNearestRootOrShadowRoot(anchorNode);\n            this.applyDOMRange(range);\n            this.dirty = true;\n            if (!collapse) {\n                // Validate selection; make sure that the new extended selection respects shadow roots\n                const nodes = this.getNodes();\n                const validNodes = [];\n                let shrinkSelection = false;\n                for(let i = 0; i < nodes.length; i++){\n                    const nextNode = nodes[i];\n                    if ($ed3b74ccfa001938$var$$hasAncestor(nextNode, root)) validNodes.push(nextNode);\n                    else shrinkSelection = true;\n                }\n                if (shrinkSelection && validNodes.length > 0) {\n                    // validNodes length check is a safeguard against an invalid selection; as getNodes()\n                    // will return an empty array in this case\n                    if (isBackward) {\n                        const firstValidNode = validNodes[0];\n                        if ($ed3b74ccfa001938$var$$isElementNode(firstValidNode)) firstValidNode.selectStart();\n                        else firstValidNode.getParentOrThrow().selectStart();\n                    } else {\n                        const lastValidNode = validNodes[validNodes.length - 1];\n                        if ($ed3b74ccfa001938$var$$isElementNode(lastValidNode)) lastValidNode.selectEnd();\n                        else lastValidNode.getParentOrThrow().selectEnd();\n                    }\n                } // Because a range works on start and end, we might need to flip\n                // the anchor and focus points to match what the DOM has, not what\n                // the range has specifically.\n                if (domSelection.anchorNode !== range.startContainer || domSelection.anchorOffset !== range.startOffset) $ed3b74ccfa001938$var$$swapPoints(this);\n            }\n        }\n    }\n    deleteCharacter(isBackward) {\n        if (this.isCollapsed()) {\n            const anchor = this.anchor;\n            const focus = this.focus;\n            let anchorNode = anchor.getNode();\n            if (!isBackward && (anchor.type === \"element\" && $ed3b74ccfa001938$var$$isElementNode(anchorNode) && anchor.offset === anchorNode.getChildrenSize() || anchor.type === \"text\" && anchor.offset === anchorNode.getTextContentSize())) {\n                const parent = anchorNode.getParent();\n                const nextSibling = anchorNode.getNextSibling() || (parent === null ? null : parent.getNextSibling());\n                if ($ed3b74ccfa001938$var$$isElementNode(nextSibling) && !nextSibling.canExtractContents()) return;\n            } // Handle the deletion around decorators.\n            const possibleNode = $ed3b74ccfa001938$var$$getAdjacentNode(focus, isBackward);\n            if ($ed3b74ccfa001938$var$$isDecoratorNode(possibleNode) && !possibleNode.isIsolated()) {\n                // Make it possible to move selection from range selection to\n                // node selection on the node.\n                if (possibleNode.isKeyboardSelectable() && $ed3b74ccfa001938$var$$isElementNode(anchorNode) && anchorNode.getChildrenSize() === 0) {\n                    anchorNode.remove();\n                    const nodeSelection = $ed3b74ccfa001938$var$$createNodeSelection();\n                    nodeSelection.add(possibleNode.__key);\n                    $ed3b74ccfa001938$var$$setSelection(nodeSelection);\n                } else possibleNode.remove();\n                return;\n            }\n            this.modify(\"extend\", isBackward, \"character\");\n            if (!this.isCollapsed()) {\n                const focusNode = focus.type === \"text\" ? focus.getNode() : null;\n                anchorNode = anchor.type === \"text\" ? anchor.getNode() : null;\n                if (focusNode !== null && focusNode.isSegmented()) {\n                    const offset = focus.offset;\n                    const textContentSize = focusNode.getTextContentSize();\n                    if (focusNode.is(anchorNode) || isBackward && offset !== textContentSize || !isBackward && offset !== 0) {\n                        $ed3b74ccfa001938$var$$removeSegment(focusNode, isBackward, offset);\n                        return;\n                    }\n                } else if (anchorNode !== null && anchorNode.isSegmented()) {\n                    const offset = anchor.offset;\n                    const textContentSize = anchorNode.getTextContentSize();\n                    if (anchorNode.is(focusNode) || isBackward && offset !== 0 || !isBackward && offset !== textContentSize) {\n                        $ed3b74ccfa001938$var$$removeSegment(anchorNode, isBackward, offset);\n                        return;\n                    }\n                }\n                $ed3b74ccfa001938$var$$updateCaretSelectionForUnicodeCharacter(this, isBackward);\n            } else if (isBackward && anchor.offset === 0) {\n                // Special handling around rich text nodes\n                const element = anchor.type === \"element\" ? anchor.getNode() : anchor.getNode().getParentOrThrow();\n                if (element.collapseAtStart(this)) return;\n            }\n        }\n        const wasCollapsed = this.isCollapsed();\n        this.removeText();\n        if (isBackward && !wasCollapsed && this.isCollapsed() && this.anchor.type === \"element\" && this.anchor.offset === 0) {\n            const anchorNode = this.anchor.getNode();\n            if (anchorNode.isEmpty() && $ed3b74ccfa001938$var$$isRootNode(anchorNode.getParent()) && anchorNode.getIndexWithinParent() === 0) anchorNode.collapseAtStart(this);\n        }\n    }\n    deleteLine(isBackward) {\n        if (this.isCollapsed()) {\n            if (this.anchor.type === \"text\") this.modify(\"extend\", isBackward, \"lineboundary\");\n             // If selection is extended to cover text edge then extend it one character more\n            // to delete its parent element. Otherwise text content will be deleted but empty\n            // parent node will remain\n            const endPoint = isBackward ? this.focus : this.anchor;\n            if (endPoint.offset === 0) this.modify(\"extend\", isBackward, \"character\");\n        }\n        this.removeText();\n    }\n    deleteWord(isBackward) {\n        if (this.isCollapsed()) this.modify(\"extend\", isBackward, \"word\");\n        this.removeText();\n    }\n    constructor(anchor, focus, format, style){\n        this.anchor = anchor;\n        this.focus = focus;\n        this.dirty = false;\n        this.format = format;\n        this.style = style;\n        this._cachedNodes = null;\n        anchor._selection = this;\n        focus._selection = this;\n    }\n}\nfunction $ed3b74ccfa001938$var$$isNodeSelection(x) {\n    return x instanceof $ed3b74ccfa001938$var$NodeSelection;\n}\nfunction $ed3b74ccfa001938$var$getCharacterOffset(point) {\n    const offset = point.offset;\n    if (point.type === \"text\") return offset;\n    const parent = point.getNode();\n    return offset === parent.getChildrenSize() ? parent.getTextContent().length : 0;\n}\nfunction $ed3b74ccfa001938$var$getCharacterOffsets(selection) {\n    const anchor = selection.anchor;\n    const focus = selection.focus;\n    if (anchor.type === \"element\" && focus.type === \"element\" && anchor.key === focus.key && anchor.offset === focus.offset) return [\n        0,\n        0\n    ];\n    return [\n        $ed3b74ccfa001938$var$getCharacterOffset(anchor),\n        $ed3b74ccfa001938$var$getCharacterOffset(focus)\n    ];\n}\nfunction $ed3b74ccfa001938$var$$swapPoints(selection) {\n    const focus = selection.focus;\n    const anchor = selection.anchor;\n    const anchorKey = anchor.key;\n    const anchorOffset = anchor.offset;\n    const anchorType = anchor.type;\n    $ed3b74ccfa001938$var$$setPointValues(anchor, focus.key, focus.offset, focus.type);\n    $ed3b74ccfa001938$var$$setPointValues(focus, anchorKey, anchorOffset, anchorType);\n    selection._cachedNodes = null;\n}\nfunction $ed3b74ccfa001938$var$moveNativeSelection(domSelection, alter, direction, granularity) {\n    // @ts-expect-error Selection.modify() method applies a change to the current selection or cursor position,\n    // but is still non-standard in some browsers.\n    domSelection.modify(alter, direction, granularity);\n}\nfunction $ed3b74ccfa001938$var$$updateCaretSelectionForUnicodeCharacter(selection, isBackward) {\n    const anchor = selection.anchor;\n    const focus = selection.focus;\n    const anchorNode = anchor.getNode();\n    const focusNode = focus.getNode();\n    if (anchorNode === focusNode && anchor.type === \"text\" && focus.type === \"text\") {\n        // Handling of multibyte characters\n        const anchorOffset = anchor.offset;\n        const focusOffset = focus.offset;\n        const isBefore = anchorOffset < focusOffset;\n        const startOffset = isBefore ? anchorOffset : focusOffset;\n        const endOffset = isBefore ? focusOffset : anchorOffset;\n        const characterOffset = endOffset - 1;\n        if (startOffset !== characterOffset) {\n            const text = anchorNode.getTextContent().slice(startOffset, endOffset);\n            if (!$ed3b74ccfa001938$var$doesContainGrapheme(text)) {\n                if (isBackward) focus.offset = characterOffset;\n                else anchor.offset = characterOffset;\n            }\n        }\n    }\n}\nfunction $ed3b74ccfa001938$var$$removeSegment(node, isBackward, offset) {\n    const textNode = node;\n    const textContent = textNode.getTextContent();\n    const split = textContent.split(/(?=\\s)/g);\n    const splitLength = split.length;\n    let segmentOffset = 0;\n    let restoreOffset = 0;\n    for(let i = 0; i < splitLength; i++){\n        const text = split[i];\n        const isLast = i === splitLength - 1;\n        restoreOffset = segmentOffset;\n        segmentOffset += text.length;\n        if (isBackward && segmentOffset === offset || segmentOffset > offset || isLast) {\n            split.splice(i, 1);\n            if (isLast) restoreOffset = undefined;\n            break;\n        }\n    }\n    const nextTextContent = split.join(\"\").trim();\n    if (nextTextContent === \"\") textNode.remove();\n    else {\n        textNode.setTextContent(nextTextContent);\n        textNode.select(restoreOffset, restoreOffset);\n    }\n}\nfunction $ed3b74ccfa001938$var$shouldResolveAncestor(resolvedElement, resolvedOffset, lastPoint) {\n    const parent = resolvedElement.getParent();\n    return lastPoint === null || parent === null || !parent.canBeEmpty() || parent !== lastPoint.getNode();\n}\nfunction $ed3b74ccfa001938$var$internalResolveSelectionPoint(dom, offset, lastPoint, editor) {\n    let resolvedOffset = offset;\n    let resolvedNode; // If we have selection on an element, we will\n    // need to figure out (using the offset) what text\n    // node should be selected.\n    if (dom.nodeType === $ed3b74ccfa001938$var$DOM_ELEMENT_TYPE) {\n        // Resolve element to a ElementNode, or TextNode, or null\n        let moveSelectionToEnd = false; // Given we're moving selection to another node, selection is\n        // definitely dirty.\n        // We use the anchor to find which child node to select\n        const childNodes = dom.childNodes;\n        const childNodesLength = childNodes.length; // If the anchor is the same as length, then this means we\n        // need to select the very last text node.\n        if (resolvedOffset === childNodesLength) {\n            moveSelectionToEnd = true;\n            resolvedOffset = childNodesLength - 1;\n        }\n        let childDOM = childNodes[resolvedOffset];\n        let hasBlockCursor = false;\n        if (childDOM === editor._blockCursorElement) {\n            childDOM = childNodes[resolvedOffset + 1];\n            hasBlockCursor = true;\n        } else if (editor._blockCursorElement !== null) resolvedOffset--;\n        resolvedNode = $ed3b74ccfa001938$var$getNodeFromDOM(childDOM);\n        if ($ed3b74ccfa001938$var$$isTextNode(resolvedNode)) resolvedOffset = $ed3b74ccfa001938$var$getTextNodeOffset(resolvedNode, moveSelectionToEnd);\n        else {\n            let resolvedElement = $ed3b74ccfa001938$var$getNodeFromDOM(dom); // Ensure resolvedElement is actually a element.\n            if (resolvedElement === null) return null;\n            if ($ed3b74ccfa001938$var$$isElementNode(resolvedElement)) {\n                let child = resolvedElement.getChildAtIndex(resolvedOffset);\n                if ($ed3b74ccfa001938$var$$isElementNode(child) && $ed3b74ccfa001938$var$shouldResolveAncestor(child, resolvedOffset, lastPoint)) {\n                    const descendant = moveSelectionToEnd ? child.getLastDescendant() : child.getFirstDescendant();\n                    if (descendant === null) {\n                        resolvedElement = child;\n                        resolvedOffset = 0;\n                    } else {\n                        child = descendant;\n                        resolvedElement = $ed3b74ccfa001938$var$$isElementNode(child) ? child : child.getParentOrThrow();\n                    }\n                }\n                if ($ed3b74ccfa001938$var$$isTextNode(child)) {\n                    resolvedNode = child;\n                    resolvedElement = null;\n                    resolvedOffset = $ed3b74ccfa001938$var$getTextNodeOffset(child, moveSelectionToEnd);\n                } else if (child !== resolvedElement && moveSelectionToEnd && !hasBlockCursor) resolvedOffset++;\n            } else {\n                const index = resolvedElement.getIndexWithinParent(); // When selecting decorators, there can be some selection issues when using resolvedOffset,\n                // and instead we should be checking if we're using the offset\n                if (offset === 0 && $ed3b74ccfa001938$var$$isDecoratorNode(resolvedElement) && $ed3b74ccfa001938$var$getNodeFromDOM(dom) === resolvedElement) resolvedOffset = index;\n                else resolvedOffset = index + 1;\n                resolvedElement = resolvedElement.getParentOrThrow();\n            }\n            if ($ed3b74ccfa001938$var$$isElementNode(resolvedElement)) return $ed3b74ccfa001938$var$$createPoint(resolvedElement.__key, resolvedOffset, \"element\");\n        }\n    } else // TextNode or null\n    resolvedNode = $ed3b74ccfa001938$var$getNodeFromDOM(dom);\n    if (!$ed3b74ccfa001938$var$$isTextNode(resolvedNode)) return null;\n    return $ed3b74ccfa001938$var$$createPoint(resolvedNode.__key, resolvedOffset, \"text\");\n}\nfunction $ed3b74ccfa001938$var$resolveSelectionPointOnBoundary(point, isBackward, isCollapsed) {\n    const offset = point.offset;\n    const node = point.getNode();\n    if (offset === 0) {\n        const prevSibling = node.getPreviousSibling();\n        const parent = node.getParent();\n        if (!isBackward) {\n            if ($ed3b74ccfa001938$var$$isElementNode(prevSibling) && !isCollapsed && prevSibling.isInline()) {\n                point.key = prevSibling.__key;\n                point.offset = prevSibling.getChildrenSize(); // @ts-expect-error: intentional\n                point.type = \"element\";\n            } else if ($ed3b74ccfa001938$var$$isTextNode(prevSibling)) {\n                point.key = prevSibling.__key;\n                point.offset = prevSibling.getTextContent().length;\n            }\n        } else if ((isCollapsed || !isBackward) && prevSibling === null && $ed3b74ccfa001938$var$$isElementNode(parent) && parent.isInline()) {\n            const parentSibling = parent.getPreviousSibling();\n            if ($ed3b74ccfa001938$var$$isTextNode(parentSibling)) {\n                point.key = parentSibling.__key;\n                point.offset = parentSibling.getTextContent().length;\n            }\n        }\n    } else if (offset === node.getTextContent().length) {\n        const nextSibling = node.getNextSibling();\n        const parent = node.getParent();\n        if (isBackward && $ed3b74ccfa001938$var$$isElementNode(nextSibling) && nextSibling.isInline()) {\n            point.key = nextSibling.__key;\n            point.offset = 0; // @ts-expect-error: intentional\n            point.type = \"element\";\n        } else if ((isCollapsed || isBackward) && nextSibling === null && $ed3b74ccfa001938$var$$isElementNode(parent) && parent.isInline() && !parent.canInsertTextAfter()) {\n            const parentSibling = parent.getNextSibling();\n            if ($ed3b74ccfa001938$var$$isTextNode(parentSibling)) {\n                point.key = parentSibling.__key;\n                point.offset = 0;\n            }\n        }\n    }\n}\nfunction $ed3b74ccfa001938$var$normalizeSelectionPointsForBoundaries(anchor, focus, lastSelection) {\n    if (anchor.type === \"text\" && focus.type === \"text\") {\n        const isBackward = anchor.isBefore(focus);\n        const isCollapsed = anchor.is(focus); // Attempt to normalize the offset to the previous sibling if we're at the\n        // start of a text node and the sibling is a text node or inline element.\n        $ed3b74ccfa001938$var$resolveSelectionPointOnBoundary(anchor, isBackward, isCollapsed);\n        $ed3b74ccfa001938$var$resolveSelectionPointOnBoundary(focus, !isBackward, isCollapsed);\n        if (isCollapsed) {\n            focus.key = anchor.key;\n            focus.offset = anchor.offset;\n            focus.type = anchor.type;\n        }\n        const editor = $ed3b74ccfa001938$var$getActiveEditor();\n        if (editor.isComposing() && editor._compositionKey !== anchor.key && $ed3b74ccfa001938$var$$isRangeSelection(lastSelection)) {\n            const lastAnchor = lastSelection.anchor;\n            const lastFocus = lastSelection.focus;\n            $ed3b74ccfa001938$var$$setPointValues(anchor, lastAnchor.key, lastAnchor.offset, lastAnchor.type);\n            $ed3b74ccfa001938$var$$setPointValues(focus, lastFocus.key, lastFocus.offset, lastFocus.type);\n        }\n    }\n}\nfunction $ed3b74ccfa001938$var$internalResolveSelectionPoints(anchorDOM, anchorOffset, focusDOM, focusOffset, editor, lastSelection) {\n    if (anchorDOM === null || focusDOM === null || !$ed3b74ccfa001938$var$isSelectionWithinEditor(editor, anchorDOM, focusDOM)) return null;\n    const resolvedAnchorPoint = $ed3b74ccfa001938$var$internalResolveSelectionPoint(anchorDOM, anchorOffset, $ed3b74ccfa001938$var$$isRangeSelection(lastSelection) ? lastSelection.anchor : null, editor);\n    if (resolvedAnchorPoint === null) return null;\n    const resolvedFocusPoint = $ed3b74ccfa001938$var$internalResolveSelectionPoint(focusDOM, focusOffset, $ed3b74ccfa001938$var$$isRangeSelection(lastSelection) ? lastSelection.focus : null, editor);\n    if (resolvedFocusPoint === null) return null;\n    if (resolvedAnchorPoint.type === \"element\" && resolvedFocusPoint.type === \"element\") {\n        const anchorNode = $ed3b74ccfa001938$var$getNodeFromDOM(anchorDOM);\n        const focusNode = $ed3b74ccfa001938$var$getNodeFromDOM(focusDOM); // Ensure if we're selecting the content of a decorator that we\n        // return null for this point, as it's not in the controlled scope\n        // of Lexical.\n        if ($ed3b74ccfa001938$var$$isDecoratorNode(anchorNode) && $ed3b74ccfa001938$var$$isDecoratorNode(focusNode)) return null;\n    } // Handle normalization of selection when it is at the boundaries.\n    $ed3b74ccfa001938$var$normalizeSelectionPointsForBoundaries(resolvedAnchorPoint, resolvedFocusPoint, lastSelection);\n    return [\n        resolvedAnchorPoint,\n        resolvedFocusPoint\n    ];\n}\nfunction $ed3b74ccfa001938$var$$isBlockElementNode(node) {\n    return $ed3b74ccfa001938$var$$isElementNode(node) && !node.isInline();\n} // This is used to make a selection when the existing\n// selection is null, i.e. forcing selection on the editor\n// when it current exists outside the editor.\nfunction $ed3b74ccfa001938$var$internalMakeRangeSelection(anchorKey, anchorOffset, focusKey, focusOffset, anchorType, focusType) {\n    const editorState = $ed3b74ccfa001938$var$getActiveEditorState();\n    const selection = new $ed3b74ccfa001938$var$RangeSelection($ed3b74ccfa001938$var$$createPoint(anchorKey, anchorOffset, anchorType), $ed3b74ccfa001938$var$$createPoint(focusKey, focusOffset, focusType), 0, \"\");\n    selection.dirty = true;\n    editorState._selection = selection;\n    return selection;\n}\nfunction $ed3b74ccfa001938$var$$createRangeSelection() {\n    const anchor = $ed3b74ccfa001938$var$$createPoint(\"root\", 0, \"element\");\n    const focus = $ed3b74ccfa001938$var$$createPoint(\"root\", 0, \"element\");\n    return new $ed3b74ccfa001938$var$RangeSelection(anchor, focus, 0, \"\");\n}\nfunction $ed3b74ccfa001938$var$$createNodeSelection() {\n    return new $ed3b74ccfa001938$var$NodeSelection(new Set());\n}\nfunction $ed3b74ccfa001938$var$DEPRECATED_$createGridSelection() {\n    const anchor = $ed3b74ccfa001938$var$$createPoint(\"root\", 0, \"element\");\n    const focus = $ed3b74ccfa001938$var$$createPoint(\"root\", 0, \"element\");\n    return new $ed3b74ccfa001938$var$GridSelection(\"root\", anchor, focus);\n}\nfunction $ed3b74ccfa001938$var$internalCreateSelection(editor) {\n    const currentEditorState = editor.getEditorState();\n    const lastSelection = currentEditorState._selection;\n    const domSelection = $ed3b74ccfa001938$var$getDOMSelection(editor._window);\n    if ($ed3b74ccfa001938$var$$isNodeSelection(lastSelection) || $ed3b74ccfa001938$var$DEPRECATED_$isGridSelection(lastSelection)) return lastSelection.clone();\n    return $ed3b74ccfa001938$var$internalCreateRangeSelection(lastSelection, domSelection, editor);\n}\nfunction $ed3b74ccfa001938$var$internalCreateRangeSelection(lastSelection, domSelection, editor) {\n    const windowObj = editor._window;\n    if (windowObj === null) return null;\n     // When we create a selection, we try to use the previous\n    // selection where possible, unless an actual user selection\n    // change has occurred. When we do need to create a new selection\n    // we validate we can have text nodes for both anchor and focus\n    // nodes. If that holds true, we then return that selection\n    // as a mutable object that we use for the editor state for this\n    // update cycle. If a selection gets changed, and requires a\n    // update to native DOM selection, it gets marked as \"dirty\".\n    // If the selection changes, but matches with the existing\n    // DOM selection, then we only need to sync it. Otherwise,\n    // we generally bail out of doing an update to selection during\n    // reconciliation unless there are dirty nodes that need\n    // reconciling.\n    const windowEvent = windowObj.event;\n    const eventType = windowEvent ? windowEvent.type : undefined;\n    const isSelectionChange = eventType === \"selectionchange\";\n    const useDOMSelection = !$ed3b74ccfa001938$var$getIsProcesssingMutations() && (isSelectionChange || eventType === \"beforeinput\" || eventType === \"compositionstart\" || eventType === \"compositionend\" || eventType === \"click\" && windowEvent && windowEvent.detail === 3 || eventType === \"drop\" || eventType === undefined);\n    let anchorDOM, focusDOM, anchorOffset, focusOffset;\n    if (!$ed3b74ccfa001938$var$$isRangeSelection(lastSelection) || useDOMSelection) {\n        if (domSelection === null) return null;\n        anchorDOM = domSelection.anchorNode;\n        focusDOM = domSelection.focusNode;\n        anchorOffset = domSelection.anchorOffset;\n        focusOffset = domSelection.focusOffset;\n        if (isSelectionChange && $ed3b74ccfa001938$var$$isRangeSelection(lastSelection) && !$ed3b74ccfa001938$var$isSelectionWithinEditor(editor, anchorDOM, focusDOM)) return lastSelection.clone();\n    } else return lastSelection.clone();\n     // Let's resolve the text nodes from the offsets and DOM nodes we have from\n    // native selection.\n    const resolvedSelectionPoints = $ed3b74ccfa001938$var$internalResolveSelectionPoints(anchorDOM, anchorOffset, focusDOM, focusOffset, editor, lastSelection);\n    if (resolvedSelectionPoints === null) return null;\n    const [resolvedAnchorPoint, resolvedFocusPoint] = resolvedSelectionPoints;\n    return new $ed3b74ccfa001938$var$RangeSelection(resolvedAnchorPoint, resolvedFocusPoint, !$ed3b74ccfa001938$var$$isRangeSelection(lastSelection) ? 0 : lastSelection.format, !$ed3b74ccfa001938$var$$isRangeSelection(lastSelection) ? \"\" : lastSelection.style);\n}\nfunction $ed3b74ccfa001938$var$$getSelection() {\n    const editorState = $ed3b74ccfa001938$var$getActiveEditorState();\n    return editorState._selection;\n}\nfunction $ed3b74ccfa001938$var$$getPreviousSelection() {\n    const editor = $ed3b74ccfa001938$var$getActiveEditor();\n    return editor._editorState._selection;\n}\nfunction $ed3b74ccfa001938$var$$updateElementSelectionOnCreateDeleteNode(selection, parentNode, nodeOffset, times = 1) {\n    const anchor = selection.anchor;\n    const focus = selection.focus;\n    const anchorNode = anchor.getNode();\n    const focusNode = focus.getNode();\n    if (!parentNode.is(anchorNode) && !parentNode.is(focusNode)) return;\n    const parentKey = parentNode.__key; // Single node. We shift selection but never redimension it\n    if (selection.isCollapsed()) {\n        const selectionOffset = anchor.offset;\n        if (nodeOffset <= selectionOffset) {\n            const newSelectionOffset = Math.max(0, selectionOffset + times);\n            anchor.set(parentKey, newSelectionOffset, \"element\");\n            focus.set(parentKey, newSelectionOffset, \"element\"); // The new selection might point to text nodes, try to resolve them\n            $ed3b74ccfa001938$var$$updateSelectionResolveTextNodes(selection);\n        }\n        return;\n    } // Multiple nodes selected. We shift or redimension selection\n    const isBackward = selection.isBackward();\n    const firstPoint = isBackward ? focus : anchor;\n    const firstPointNode = firstPoint.getNode();\n    const lastPoint = isBackward ? anchor : focus;\n    const lastPointNode = lastPoint.getNode();\n    if (parentNode.is(firstPointNode)) {\n        const firstPointOffset = firstPoint.offset;\n        if (nodeOffset <= firstPointOffset) firstPoint.set(parentKey, Math.max(0, firstPointOffset + times), \"element\");\n    }\n    if (parentNode.is(lastPointNode)) {\n        const lastPointOffset = lastPoint.offset;\n        if (nodeOffset <= lastPointOffset) lastPoint.set(parentKey, Math.max(0, lastPointOffset + times), \"element\");\n    } // The new selection might point to text nodes, try to resolve them\n    $ed3b74ccfa001938$var$$updateSelectionResolveTextNodes(selection);\n}\nfunction $ed3b74ccfa001938$var$$updateSelectionResolveTextNodes(selection) {\n    const anchor = selection.anchor;\n    const anchorOffset = anchor.offset;\n    const focus = selection.focus;\n    const focusOffset = focus.offset;\n    const anchorNode = anchor.getNode();\n    const focusNode = focus.getNode();\n    if (selection.isCollapsed()) {\n        if (!$ed3b74ccfa001938$var$$isElementNode(anchorNode)) return;\n        const childSize = anchorNode.getChildrenSize();\n        const anchorOffsetAtEnd = anchorOffset >= childSize;\n        const child = anchorOffsetAtEnd ? anchorNode.getChildAtIndex(childSize - 1) : anchorNode.getChildAtIndex(anchorOffset);\n        if ($ed3b74ccfa001938$var$$isTextNode(child)) {\n            let newOffset = 0;\n            if (anchorOffsetAtEnd) newOffset = child.getTextContentSize();\n            anchor.set(child.__key, newOffset, \"text\");\n            focus.set(child.__key, newOffset, \"text\");\n        }\n        return;\n    }\n    if ($ed3b74ccfa001938$var$$isElementNode(anchorNode)) {\n        const childSize = anchorNode.getChildrenSize();\n        const anchorOffsetAtEnd = anchorOffset >= childSize;\n        const child = anchorOffsetAtEnd ? anchorNode.getChildAtIndex(childSize - 1) : anchorNode.getChildAtIndex(anchorOffset);\n        if ($ed3b74ccfa001938$var$$isTextNode(child)) {\n            let newOffset = 0;\n            if (anchorOffsetAtEnd) newOffset = child.getTextContentSize();\n            anchor.set(child.__key, newOffset, \"text\");\n        }\n    }\n    if ($ed3b74ccfa001938$var$$isElementNode(focusNode)) {\n        const childSize = focusNode.getChildrenSize();\n        const focusOffsetAtEnd = focusOffset >= childSize;\n        const child = focusOffsetAtEnd ? focusNode.getChildAtIndex(childSize - 1) : focusNode.getChildAtIndex(focusOffset);\n        if ($ed3b74ccfa001938$var$$isTextNode(child)) {\n            let newOffset = 0;\n            if (focusOffsetAtEnd) newOffset = child.getTextContentSize();\n            focus.set(child.__key, newOffset, \"text\");\n        }\n    }\n}\nfunction $ed3b74ccfa001938$var$applySelectionTransforms(nextEditorState, editor) {\n    const prevEditorState = editor.getEditorState();\n    const prevSelection = prevEditorState._selection;\n    const nextSelection = nextEditorState._selection;\n    if ($ed3b74ccfa001938$var$$isRangeSelection(nextSelection)) {\n        const anchor = nextSelection.anchor;\n        const focus = nextSelection.focus;\n        let anchorNode;\n        if (anchor.type === \"text\") {\n            anchorNode = anchor.getNode();\n            anchorNode.selectionTransform(prevSelection, nextSelection);\n        }\n        if (focus.type === \"text\") {\n            const focusNode = focus.getNode();\n            if (anchorNode !== focusNode) focusNode.selectionTransform(prevSelection, nextSelection);\n        }\n    }\n}\nfunction $ed3b74ccfa001938$var$moveSelectionPointToSibling(point, node, parent, prevSibling, nextSibling) {\n    let siblingKey = null;\n    let offset = 0;\n    let type = null;\n    if (prevSibling !== null) {\n        siblingKey = prevSibling.__key;\n        if ($ed3b74ccfa001938$var$$isTextNode(prevSibling)) {\n            offset = prevSibling.getTextContentSize();\n            type = \"text\";\n        } else if ($ed3b74ccfa001938$var$$isElementNode(prevSibling)) {\n            offset = prevSibling.getChildrenSize();\n            type = \"element\";\n        }\n    } else if (nextSibling !== null) {\n        siblingKey = nextSibling.__key;\n        if ($ed3b74ccfa001938$var$$isTextNode(nextSibling)) type = \"text\";\n        else if ($ed3b74ccfa001938$var$$isElementNode(nextSibling)) type = \"element\";\n    }\n    if (siblingKey !== null && type !== null) point.set(siblingKey, offset, type);\n    else {\n        offset = node.getIndexWithinParent();\n        if (offset === -1) // Move selection to end of parent\n        offset = parent.getChildrenSize();\n        point.set(parent.__key, offset, \"element\");\n    }\n}\nfunction $ed3b74ccfa001938$var$adjustPointOffsetForMergedSibling(point, isBefore, key, target, textLength) {\n    if (point.type === \"text\") {\n        point.key = key;\n        if (!isBefore) point.offset += textLength;\n    } else if (point.offset > target.getIndexWithinParent()) point.offset -= 1;\n}\nfunction $ed3b74ccfa001938$var$updateDOMSelection(prevSelection, nextSelection, editor, domSelection, tags, rootElement, nodeCount) {\n    const anchorDOMNode = domSelection.anchorNode;\n    const focusDOMNode = domSelection.focusNode;\n    const anchorOffset = domSelection.anchorOffset;\n    const focusOffset = domSelection.focusOffset;\n    const activeElement = document.activeElement; // TODO: make this not hard-coded, and add another config option\n    // that makes this configurable.\n    if (tags.has(\"collaboration\") && activeElement !== rootElement || activeElement !== null && $ed3b74ccfa001938$var$isSelectionCapturedInDecoratorInput(activeElement)) return;\n    if (!$ed3b74ccfa001938$var$$isRangeSelection(nextSelection)) {\n        // We don't remove selection if the prevSelection is null because\n        // of editor.setRootElement(). If this occurs on init when the\n        // editor is already focused, then this can cause the editor to\n        // lose focus.\n        if (prevSelection !== null && $ed3b74ccfa001938$var$isSelectionWithinEditor(editor, anchorDOMNode, focusDOMNode)) domSelection.removeAllRanges();\n        return;\n    }\n    const anchor = nextSelection.anchor;\n    const focus = nextSelection.focus;\n    const anchorKey = anchor.key;\n    const focusKey = focus.key;\n    const anchorDOM = $ed3b74ccfa001938$var$getElementByKeyOrThrow(editor, anchorKey);\n    const focusDOM = $ed3b74ccfa001938$var$getElementByKeyOrThrow(editor, focusKey);\n    const nextAnchorOffset = anchor.offset;\n    const nextFocusOffset = focus.offset;\n    const nextFormat = nextSelection.format;\n    const nextStyle = nextSelection.style;\n    const isCollapsed = nextSelection.isCollapsed();\n    let nextAnchorNode = anchorDOM;\n    let nextFocusNode = focusDOM;\n    let anchorFormatOrStyleChanged = false;\n    if (anchor.type === \"text\") {\n        nextAnchorNode = $ed3b74ccfa001938$var$getDOMTextNode(anchorDOM);\n        const anchorNode = anchor.getNode();\n        anchorFormatOrStyleChanged = anchorNode.getFormat() !== nextFormat || anchorNode.getStyle() !== nextStyle;\n    } else if ($ed3b74ccfa001938$var$$isRangeSelection(prevSelection) && prevSelection.anchor.type === \"text\") anchorFormatOrStyleChanged = true;\n    if (focus.type === \"text\") nextFocusNode = $ed3b74ccfa001938$var$getDOMTextNode(focusDOM);\n     // If we can't get an underlying text node for selection, then\n    // we should avoid setting selection to something incorrect.\n    if (nextAnchorNode === null || nextFocusNode === null) return;\n    if (isCollapsed && (prevSelection === null || anchorFormatOrStyleChanged || $ed3b74ccfa001938$var$$isRangeSelection(prevSelection) && (prevSelection.format !== nextFormat || prevSelection.style !== nextStyle))) $ed3b74ccfa001938$var$markCollapsedSelectionFormat(nextFormat, nextStyle, nextAnchorOffset, anchorKey, performance.now());\n     // Diff against the native DOM selection to ensure we don't do\n    // an unnecessary selection update. We also skip this check if\n    // we're moving selection to within an element, as this can\n    // sometimes be problematic around scrolling.\n    if (anchorOffset === nextAnchorOffset && focusOffset === nextFocusOffset && anchorDOMNode === nextAnchorNode && focusDOMNode === nextFocusNode && // Badly interpreted range selection when collapsed - #1482\n    !(domSelection.type === \"Range\" && isCollapsed)) {\n        // If the root element does not have focus, ensure it has focus\n        if (activeElement === null || !rootElement.contains(activeElement)) rootElement.focus({\n            preventScroll: true\n        });\n        if (anchor.type !== \"element\") return;\n    } // Apply the updated selection to the DOM. Note: this will trigger\n    // a \"selectionchange\" event, although it will be asynchronous.\n    try {\n        domSelection.setBaseAndExtent(nextAnchorNode, nextAnchorOffset, nextFocusNode, nextFocusOffset);\n    } catch (error) {\n    // occur with FF and there's no good reason as to why it\n    // should happen.\n    }\n    if (!tags.has(\"skip-scroll-into-view\") && nextSelection.isCollapsed() && rootElement !== null && rootElement === document.activeElement) {\n        const selectionTarget = nextSelection instanceof $ed3b74ccfa001938$var$RangeSelection && nextSelection.anchor.type === \"element\" ? nextAnchorNode.childNodes[nextAnchorOffset] || null : domSelection.rangeCount > 0 ? domSelection.getRangeAt(0) : null;\n        if (selectionTarget !== null) {\n            // @ts-ignore Text nodes do have getBoundingClientRect\n            const selectionRect = selectionTarget.getBoundingClientRect();\n            $ed3b74ccfa001938$var$scrollIntoViewIfNeeded(editor, selectionRect, rootElement);\n        }\n    }\n    $ed3b74ccfa001938$var$markSelectionChangeFromDOMUpdate();\n}\nfunction $ed3b74ccfa001938$var$$insertNodes(nodes, selectStart) {\n    let selection = $ed3b74ccfa001938$var$$getSelection();\n    if (selection === null) selection = $ed3b74ccfa001938$var$$getRoot().selectEnd();\n    return selection.insertNodes(nodes, selectStart);\n}\nfunction $ed3b74ccfa001938$var$$getTextContent() {\n    const selection = $ed3b74ccfa001938$var$$getSelection();\n    if (selection === null) return \"\";\n    return selection.getTextContent();\n}\nfunction $ed3b74ccfa001938$var$computeGridMap(grid, cellA, cellB) {\n    const tableMap = [];\n    let cellAValue = null;\n    let cellBValue = null;\n    function write(startRow, startColumn, cell) {\n        const value = {\n            cell: cell,\n            startColumn: startColumn,\n            startRow: startRow\n        };\n        const rowSpan = cell.__rowSpan;\n        const colSpan = cell.__colSpan;\n        for(let i = 0; i < rowSpan; i++){\n            if (tableMap[startRow + i] === undefined) tableMap[startRow + i] = [];\n            for(let j = 0; j < colSpan; j++)tableMap[startRow + i][startColumn + j] = value;\n        }\n        if (cellA.is(cell)) cellAValue = value;\n        if (cellB.is(cell)) cellBValue = value;\n    }\n    function isEmpty(row, column) {\n        return tableMap[row] === undefined || tableMap[row][column] === undefined;\n    }\n    const gridChildren = grid.getChildren();\n    for(let i = 0; i < gridChildren.length; i++){\n        const row = gridChildren[i];\n        if (!$ed3b74ccfa001938$var$DEPRECATED_$isGridRowNode(row)) throw Error(`Expected GridNode children to be GridRowNode`);\n        const rowChildren = row.getChildren();\n        let j = 0;\n        for (const cell of rowChildren){\n            if (!$ed3b74ccfa001938$var$DEPRECATED_$isGridCellNode(cell)) throw Error(`Expected GridRowNode children to be GridCellNode`);\n            while(!isEmpty(i, j))j++;\n            write(i, j, cell);\n            j += cell.__colSpan;\n        }\n    }\n    if (!(cellAValue !== null)) throw Error(`Anchor not found in Grid`);\n    if (!(cellBValue !== null)) throw Error(`Focus not found in Grid`);\n    return [\n        tableMap,\n        cellAValue,\n        cellBValue\n    ];\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ let $ed3b74ccfa001938$var$activeEditorState = null;\nlet $ed3b74ccfa001938$var$activeEditor = null;\nlet $ed3b74ccfa001938$var$isReadOnlyMode = false;\nlet $ed3b74ccfa001938$var$isAttemptingToRecoverFromReconcilerError = false;\nlet $ed3b74ccfa001938$var$infiniteTransformCount = 0;\nconst $ed3b74ccfa001938$var$observerOptions = {\n    characterData: true,\n    childList: true,\n    subtree: true\n};\nfunction $ed3b74ccfa001938$var$isCurrentlyReadOnlyMode() {\n    return $ed3b74ccfa001938$var$isReadOnlyMode || $ed3b74ccfa001938$var$activeEditorState !== null && $ed3b74ccfa001938$var$activeEditorState._readOnly;\n}\nfunction $ed3b74ccfa001938$var$errorOnReadOnly() {\n    if ($ed3b74ccfa001938$var$isReadOnlyMode) throw Error(`Cannot use method in read-only mode.`);\n}\nfunction $ed3b74ccfa001938$var$errorOnInfiniteTransforms() {\n    if ($ed3b74ccfa001938$var$infiniteTransformCount > 99) throw Error(`One or more transforms are endlessly triggering additional transforms. May have encountered infinite recursion caused by transforms that have their preconditions too lose and/or conflict with each other.`);\n}\nfunction $ed3b74ccfa001938$var$getActiveEditorState() {\n    if ($ed3b74ccfa001938$var$activeEditorState === null) throw Error(`Unable to find an active editor state. State helpers or node methods can only be used synchronously during the callback of editor.update() or editorState.read().`);\n    return $ed3b74ccfa001938$var$activeEditorState;\n}\nfunction $ed3b74ccfa001938$var$getActiveEditor() {\n    if ($ed3b74ccfa001938$var$activeEditor === null) throw Error(`Unable to find an active editor. This method can only be used synchronously during the callback of editor.update().`);\n    return $ed3b74ccfa001938$var$activeEditor;\n}\nfunction $ed3b74ccfa001938$var$internalGetActiveEditor() {\n    return $ed3b74ccfa001938$var$activeEditor;\n}\nfunction $ed3b74ccfa001938$var$$applyTransforms(editor, node, transformsCache) {\n    const type = node.__type;\n    const registeredNode = $ed3b74ccfa001938$var$getRegisteredNodeOrThrow(editor, type);\n    let transformsArr = transformsCache.get(type);\n    if (transformsArr === undefined) {\n        transformsArr = Array.from(registeredNode.transforms);\n        transformsCache.set(type, transformsArr);\n    }\n    const transformsArrLength = transformsArr.length;\n    for(let i = 0; i < transformsArrLength; i++){\n        transformsArr[i](node);\n        if (!node.isAttached()) break;\n    }\n}\nfunction $ed3b74ccfa001938$var$$isNodeValidForTransform(node, compositionKey) {\n    return node !== undefined && // We don't want to transform nodes being composed\n    node.__key !== compositionKey && node.isAttached();\n}\nfunction $ed3b74ccfa001938$var$$normalizeAllDirtyTextNodes(editorState, editor) {\n    const dirtyLeaves = editor._dirtyLeaves;\n    const nodeMap = editorState._nodeMap;\n    for (const nodeKey of dirtyLeaves){\n        const node = nodeMap.get(nodeKey);\n        if ($ed3b74ccfa001938$var$$isTextNode(node) && node.isAttached() && node.isSimpleText() && !node.isUnmergeable()) $ed3b74ccfa001938$var$$normalizeTextNode(node);\n    }\n}\n/**\n * Transform heuristic:\n * 1. We transform leaves first. If transforms generate additional dirty nodes we repeat step 1.\n * The reasoning behind this is that marking a leaf as dirty marks all its parent elements as dirty too.\n * 2. We transform elements. If element transforms generate additional dirty nodes we repeat step 1.\n * If element transforms only generate additional dirty elements we only repeat step 2.\n *\n * Note that to keep track of newly dirty nodes and subtrees we leverage the editor._dirtyNodes and\n * editor._subtrees which we reset in every loop.\n */ function $ed3b74ccfa001938$var$$applyAllTransforms(editorState, editor) {\n    const dirtyLeaves = editor._dirtyLeaves;\n    const dirtyElements = editor._dirtyElements;\n    const nodeMap = editorState._nodeMap;\n    const compositionKey = $ed3b74ccfa001938$var$$getCompositionKey();\n    const transformsCache = new Map();\n    let untransformedDirtyLeaves = dirtyLeaves;\n    let untransformedDirtyLeavesLength = untransformedDirtyLeaves.size;\n    let untransformedDirtyElements = dirtyElements;\n    let untransformedDirtyElementsLength = untransformedDirtyElements.size;\n    while(untransformedDirtyLeavesLength > 0 || untransformedDirtyElementsLength > 0){\n        if (untransformedDirtyLeavesLength > 0) {\n            // We leverage editor._dirtyLeaves to track the new dirty leaves after the transforms\n            editor._dirtyLeaves = new Set();\n            for (const nodeKey of untransformedDirtyLeaves){\n                const node = nodeMap.get(nodeKey);\n                if ($ed3b74ccfa001938$var$$isTextNode(node) && node.isAttached() && node.isSimpleText() && !node.isUnmergeable()) $ed3b74ccfa001938$var$$normalizeTextNode(node);\n                if (node !== undefined && $ed3b74ccfa001938$var$$isNodeValidForTransform(node, compositionKey)) $ed3b74ccfa001938$var$$applyTransforms(editor, node, transformsCache);\n                dirtyLeaves.add(nodeKey);\n            }\n            untransformedDirtyLeaves = editor._dirtyLeaves;\n            untransformedDirtyLeavesLength = untransformedDirtyLeaves.size; // We want to prioritize node transforms over element transforms\n            if (untransformedDirtyLeavesLength > 0) {\n                $ed3b74ccfa001938$var$infiniteTransformCount++;\n                continue;\n            }\n        } // All dirty leaves have been processed. Let's do elements!\n        // We have previously processed dirty leaves, so let's restart the editor leaves Set to track\n        // new ones caused by element transforms\n        editor._dirtyLeaves = new Set();\n        editor._dirtyElements = new Map();\n        for (const currentUntransformedDirtyElement of untransformedDirtyElements){\n            const nodeKey = currentUntransformedDirtyElement[0];\n            const intentionallyMarkedAsDirty = currentUntransformedDirtyElement[1];\n            if (nodeKey !== \"root\" && !intentionallyMarkedAsDirty) continue;\n            const node = nodeMap.get(nodeKey);\n            if (node !== undefined && $ed3b74ccfa001938$var$$isNodeValidForTransform(node, compositionKey)) $ed3b74ccfa001938$var$$applyTransforms(editor, node, transformsCache);\n            dirtyElements.set(nodeKey, intentionallyMarkedAsDirty);\n        }\n        untransformedDirtyLeaves = editor._dirtyLeaves;\n        untransformedDirtyLeavesLength = untransformedDirtyLeaves.size;\n        untransformedDirtyElements = editor._dirtyElements;\n        untransformedDirtyElementsLength = untransformedDirtyElements.size;\n        $ed3b74ccfa001938$var$infiniteTransformCount++;\n    }\n    editor._dirtyLeaves = dirtyLeaves;\n    editor._dirtyElements = dirtyElements;\n}\nfunction $ed3b74ccfa001938$var$$parseSerializedNode(serializedNode) {\n    const internalSerializedNode = serializedNode;\n    return $ed3b74ccfa001938$var$$parseSerializedNodeImpl(internalSerializedNode, $ed3b74ccfa001938$var$getActiveEditor()._nodes);\n}\nfunction $ed3b74ccfa001938$var$$parseSerializedNodeImpl(serializedNode, registeredNodes) {\n    const type = serializedNode.type;\n    const registeredNode = registeredNodes.get(type);\n    if (registeredNode === undefined) throw Error(`parseEditorState: type \"${type}\" + not found`);\n    const nodeClass = registeredNode.klass;\n    if (serializedNode.type !== nodeClass.getType()) throw Error(`LexicalNode: Node ${nodeClass.name} does not implement .importJSON().`);\n    const node = nodeClass.importJSON(serializedNode);\n    const children = serializedNode.children;\n    if ($ed3b74ccfa001938$var$$isElementNode(node) && Array.isArray(children)) for(let i = 0; i < children.length; i++){\n        const serializedJSONChildNode = children[i];\n        const childNode = $ed3b74ccfa001938$var$$parseSerializedNodeImpl(serializedJSONChildNode, registeredNodes);\n        node.append(childNode);\n    }\n    return node;\n}\nfunction $ed3b74ccfa001938$var$parseEditorState(serializedEditorState, editor, updateFn) {\n    const editorState = $ed3b74ccfa001938$var$createEmptyEditorState();\n    const previousActiveEditorState = $ed3b74ccfa001938$var$activeEditorState;\n    const previousReadOnlyMode = $ed3b74ccfa001938$var$isReadOnlyMode;\n    const previousActiveEditor = $ed3b74ccfa001938$var$activeEditor;\n    const previousDirtyElements = editor._dirtyElements;\n    const previousDirtyLeaves = editor._dirtyLeaves;\n    const previousCloneNotNeeded = editor._cloneNotNeeded;\n    const previousDirtyType = editor._dirtyType;\n    editor._dirtyElements = new Map();\n    editor._dirtyLeaves = new Set();\n    editor._cloneNotNeeded = new Set();\n    editor._dirtyType = 0;\n    $ed3b74ccfa001938$var$activeEditorState = editorState;\n    $ed3b74ccfa001938$var$isReadOnlyMode = false;\n    $ed3b74ccfa001938$var$activeEditor = editor;\n    try {\n        const registeredNodes = editor._nodes;\n        const serializedNode = serializedEditorState.root;\n        $ed3b74ccfa001938$var$$parseSerializedNodeImpl(serializedNode, registeredNodes);\n        if (updateFn) updateFn();\n         // Make the editorState immutable\n        editorState._readOnly = true;\n        $ed3b74ccfa001938$var$handleDEVOnlyPendingUpdateGuarantees(editorState);\n    } finally{\n        editor._dirtyElements = previousDirtyElements;\n        editor._dirtyLeaves = previousDirtyLeaves;\n        editor._cloneNotNeeded = previousCloneNotNeeded;\n        editor._dirtyType = previousDirtyType;\n        $ed3b74ccfa001938$var$activeEditorState = previousActiveEditorState;\n        $ed3b74ccfa001938$var$isReadOnlyMode = previousReadOnlyMode;\n        $ed3b74ccfa001938$var$activeEditor = previousActiveEditor;\n    }\n    return editorState;\n} // This technically isn't an update but given we need\n// exposure to the module's active bindings, we have this\n// function here\nfunction $ed3b74ccfa001938$var$readEditorState(editorState, callbackFn) {\n    const previousActiveEditorState = $ed3b74ccfa001938$var$activeEditorState;\n    const previousReadOnlyMode = $ed3b74ccfa001938$var$isReadOnlyMode;\n    const previousActiveEditor = $ed3b74ccfa001938$var$activeEditor;\n    $ed3b74ccfa001938$var$activeEditorState = editorState;\n    $ed3b74ccfa001938$var$isReadOnlyMode = true;\n    $ed3b74ccfa001938$var$activeEditor = null;\n    try {\n        return callbackFn();\n    } finally{\n        $ed3b74ccfa001938$var$activeEditorState = previousActiveEditorState;\n        $ed3b74ccfa001938$var$isReadOnlyMode = previousReadOnlyMode;\n        $ed3b74ccfa001938$var$activeEditor = previousActiveEditor;\n    }\n}\nfunction $ed3b74ccfa001938$var$handleDEVOnlyPendingUpdateGuarantees(pendingEditorState) {\n    // Given we can't Object.freeze the nodeMap as it's a Map,\n    // we instead replace its set, clear and delete methods.\n    const nodeMap = pendingEditorState._nodeMap;\n    nodeMap.set = ()=>{\n        throw new Error(\"Cannot call set() on a frozen Lexical node map\");\n    };\n    nodeMap.clear = ()=>{\n        throw new Error(\"Cannot call clear() on a frozen Lexical node map\");\n    };\n    nodeMap.delete = ()=>{\n        throw new Error(\"Cannot call delete() on a frozen Lexical node map\");\n    };\n}\nfunction $ed3b74ccfa001938$var$commitPendingUpdates(editor) {\n    const pendingEditorState = editor._pendingEditorState;\n    const rootElement = editor._rootElement;\n    const shouldSkipDOM = editor._headless || rootElement === null;\n    if (pendingEditorState === null) return;\n     // ======\n    // Reconciliation has started.\n    // ======\n    const currentEditorState = editor._editorState;\n    const currentSelection = currentEditorState._selection;\n    const pendingSelection = pendingEditorState._selection;\n    const needsUpdate = editor._dirtyType !== $ed3b74ccfa001938$var$NO_DIRTY_NODES;\n    const previousActiveEditorState = $ed3b74ccfa001938$var$activeEditorState;\n    const previousReadOnlyMode = $ed3b74ccfa001938$var$isReadOnlyMode;\n    const previousActiveEditor = $ed3b74ccfa001938$var$activeEditor;\n    const previouslyUpdating = editor._updating;\n    const observer = editor._observer;\n    let mutatedNodes = null;\n    editor._pendingEditorState = null;\n    editor._editorState = pendingEditorState;\n    if (!shouldSkipDOM && needsUpdate && observer !== null) {\n        $ed3b74ccfa001938$var$activeEditor = editor;\n        $ed3b74ccfa001938$var$activeEditorState = pendingEditorState;\n        $ed3b74ccfa001938$var$isReadOnlyMode = false; // We don't want updates to sync block the reconciliation.\n        editor._updating = true;\n        try {\n            const dirtyType = editor._dirtyType;\n            const dirtyElements = editor._dirtyElements;\n            const dirtyLeaves = editor._dirtyLeaves;\n            observer.disconnect();\n            mutatedNodes = $ed3b74ccfa001938$var$reconcileRoot(currentEditorState, pendingEditorState, editor, dirtyType, dirtyElements, dirtyLeaves);\n        } catch (error) {\n            // Report errors\n            if (error instanceof Error) editor._onError(error);\n             // Reset editor and restore incoming editor state to the DOM\n            if (!$ed3b74ccfa001938$var$isAttemptingToRecoverFromReconcilerError) {\n                $ed3b74ccfa001938$var$resetEditor(editor, null, rootElement, pendingEditorState);\n                $ed3b74ccfa001938$var$initMutationObserver(editor);\n                editor._dirtyType = $ed3b74ccfa001938$var$FULL_RECONCILE;\n                $ed3b74ccfa001938$var$isAttemptingToRecoverFromReconcilerError = true;\n                $ed3b74ccfa001938$var$commitPendingUpdates(editor);\n                $ed3b74ccfa001938$var$isAttemptingToRecoverFromReconcilerError = false;\n            } else // To avoid a possible situation of infinite loops, lets throw\n            throw error;\n            return;\n        } finally{\n            observer.observe(rootElement, $ed3b74ccfa001938$var$observerOptions);\n            editor._updating = previouslyUpdating;\n            $ed3b74ccfa001938$var$activeEditorState = previousActiveEditorState;\n            $ed3b74ccfa001938$var$isReadOnlyMode = previousReadOnlyMode;\n            $ed3b74ccfa001938$var$activeEditor = previousActiveEditor;\n        }\n    }\n    if (!pendingEditorState._readOnly) {\n        pendingEditorState._readOnly = true;\n        $ed3b74ccfa001938$var$handleDEVOnlyPendingUpdateGuarantees(pendingEditorState);\n        if ($ed3b74ccfa001938$var$$isRangeSelection(pendingSelection)) {\n            Object.freeze(pendingSelection.anchor);\n            Object.freeze(pendingSelection.focus);\n        }\n        Object.freeze(pendingSelection);\n    }\n    const dirtyLeaves = editor._dirtyLeaves;\n    const dirtyElements = editor._dirtyElements;\n    const normalizedNodes = editor._normalizedNodes;\n    const tags = editor._updateTags;\n    const deferred = editor._deferred;\n    if (needsUpdate) {\n        editor._dirtyType = $ed3b74ccfa001938$var$NO_DIRTY_NODES;\n        editor._cloneNotNeeded.clear();\n        editor._dirtyLeaves = new Set();\n        editor._dirtyElements = new Map();\n        editor._normalizedNodes = new Set();\n        editor._updateTags = new Set();\n    }\n    $ed3b74ccfa001938$var$$garbageCollectDetachedDecorators(editor, pendingEditorState); // ======\n    // Reconciliation has finished. Now update selection and trigger listeners.\n    // ======\n    const domSelection = shouldSkipDOM ? null : $ed3b74ccfa001938$var$getDOMSelection(editor._window); // Attempt to update the DOM selection, including focusing of the root element,\n    // and scroll into view if needed.\n    if (editor._editable && // domSelection will be null in headless\n    domSelection !== null && (needsUpdate || pendingSelection === null || pendingSelection.dirty)) {\n        $ed3b74ccfa001938$var$activeEditor = editor;\n        $ed3b74ccfa001938$var$activeEditorState = pendingEditorState;\n        try {\n            if (observer !== null) observer.disconnect();\n            if (needsUpdate || pendingSelection === null || pendingSelection.dirty) {\n                const blockCursorElement = editor._blockCursorElement;\n                if (blockCursorElement !== null) $ed3b74ccfa001938$var$removeDOMBlockCursorElement(blockCursorElement, editor, rootElement);\n                $ed3b74ccfa001938$var$updateDOMSelection(currentSelection, pendingSelection, editor, domSelection, tags, rootElement);\n            }\n            $ed3b74ccfa001938$var$updateDOMBlockCursorElement(editor, rootElement, pendingSelection);\n            if (observer !== null) observer.observe(rootElement, $ed3b74ccfa001938$var$observerOptions);\n        } finally{\n            $ed3b74ccfa001938$var$activeEditor = previousActiveEditor;\n            $ed3b74ccfa001938$var$activeEditorState = previousActiveEditorState;\n        }\n    }\n    if (mutatedNodes !== null) $ed3b74ccfa001938$var$triggerMutationListeners(editor, currentEditorState, pendingEditorState, mutatedNodes, tags, dirtyLeaves);\n    if (!$ed3b74ccfa001938$var$$isRangeSelection(pendingSelection) && pendingSelection !== null && (currentSelection === null || !currentSelection.is(pendingSelection))) editor.dispatchCommand($ed3b74ccfa001938$var$SELECTION_CHANGE_COMMAND, undefined);\n    /**\n   * Capture pendingDecorators after garbage collecting detached decorators\n   */ const pendingDecorators = editor._pendingDecorators;\n    if (pendingDecorators !== null) {\n        editor._decorators = pendingDecorators;\n        editor._pendingDecorators = null;\n        $ed3b74ccfa001938$var$triggerListeners(\"decorator\", editor, true, pendingDecorators);\n    }\n    $ed3b74ccfa001938$var$triggerTextContentListeners(editor, currentEditorState, pendingEditorState);\n    $ed3b74ccfa001938$var$triggerListeners(\"update\", editor, true, {\n        dirtyElements: dirtyElements,\n        dirtyLeaves: dirtyLeaves,\n        editorState: pendingEditorState,\n        normalizedNodes: normalizedNodes,\n        prevEditorState: currentEditorState,\n        tags: tags\n    });\n    $ed3b74ccfa001938$var$triggerDeferredUpdateCallbacks(editor, deferred);\n    $ed3b74ccfa001938$var$triggerEnqueuedUpdates(editor);\n}\nfunction $ed3b74ccfa001938$var$triggerTextContentListeners(editor, currentEditorState, pendingEditorState) {\n    const currentTextContent = $ed3b74ccfa001938$var$getEditorStateTextContent(currentEditorState);\n    const latestTextContent = $ed3b74ccfa001938$var$getEditorStateTextContent(pendingEditorState);\n    if (currentTextContent !== latestTextContent) $ed3b74ccfa001938$var$triggerListeners(\"textcontent\", editor, true, latestTextContent);\n}\nfunction $ed3b74ccfa001938$var$triggerMutationListeners(editor, currentEditorState, pendingEditorState, mutatedNodes, updateTags, dirtyLeaves) {\n    const listeners = Array.from(editor._listeners.mutation);\n    const listenersLength = listeners.length;\n    for(let i = 0; i < listenersLength; i++){\n        const [listener, klass] = listeners[i];\n        const mutatedNodesByType = mutatedNodes.get(klass);\n        if (mutatedNodesByType !== undefined) listener(mutatedNodesByType, {\n            dirtyLeaves: dirtyLeaves,\n            updateTags: updateTags\n        });\n    }\n}\nfunction $ed3b74ccfa001938$var$triggerListeners(type, editor, isCurrentlyEnqueuingUpdates, ...payload) {\n    const previouslyUpdating = editor._updating;\n    editor._updating = isCurrentlyEnqueuingUpdates;\n    try {\n        const listeners = Array.from(editor._listeners[type]);\n        for(let i = 0; i < listeners.length; i++)// @ts-ignore\n        listeners[i].apply(null, payload);\n    } finally{\n        editor._updating = previouslyUpdating;\n    }\n}\nfunction $ed3b74ccfa001938$var$triggerCommandListeners(editor, type, payload) {\n    if (editor._updating === false || $ed3b74ccfa001938$var$activeEditor !== editor) {\n        let returnVal = false;\n        editor.update(()=>{\n            returnVal = $ed3b74ccfa001938$var$triggerCommandListeners(editor, type, payload);\n        });\n        return returnVal;\n    }\n    const editors = $ed3b74ccfa001938$var$getEditorsToPropagate(editor);\n    for(let i = 4; i >= 0; i--)for(let e = 0; e < editors.length; e++){\n        const currentEditor = editors[e];\n        const commandListeners = currentEditor._commands;\n        const listenerInPriorityOrder = commandListeners.get(type);\n        if (listenerInPriorityOrder !== undefined) {\n            const listenersSet = listenerInPriorityOrder[i];\n            if (listenersSet !== undefined) {\n                const listeners = Array.from(listenersSet);\n                const listenersLength = listeners.length;\n                for(let j = 0; j < listenersLength; j++){\n                    if (listeners[j](payload, editor) === true) return true;\n                }\n            }\n        }\n    }\n    return false;\n}\nfunction $ed3b74ccfa001938$var$triggerEnqueuedUpdates(editor) {\n    const queuedUpdates = editor._updates;\n    if (queuedUpdates.length !== 0) {\n        const queuedUpdate = queuedUpdates.shift();\n        if (queuedUpdate) {\n            const [updateFn, options] = queuedUpdate;\n            $ed3b74ccfa001938$var$beginUpdate(editor, updateFn, options);\n        }\n    }\n}\nfunction $ed3b74ccfa001938$var$triggerDeferredUpdateCallbacks(editor, deferred) {\n    editor._deferred = [];\n    if (deferred.length !== 0) {\n        const previouslyUpdating = editor._updating;\n        editor._updating = true;\n        try {\n            for(let i = 0; i < deferred.length; i++)deferred[i]();\n        } finally{\n            editor._updating = previouslyUpdating;\n        }\n    }\n}\nfunction $ed3b74ccfa001938$var$processNestedUpdates(editor, initialSkipTransforms) {\n    const queuedUpdates = editor._updates;\n    let skipTransforms = initialSkipTransforms || false; // Updates might grow as we process them, we so we'll need\n    // to handle each update as we go until the updates array is\n    // empty.\n    while(queuedUpdates.length !== 0){\n        const queuedUpdate = queuedUpdates.shift();\n        if (queuedUpdate) {\n            const [nextUpdateFn, options] = queuedUpdate;\n            let onUpdate;\n            let tag;\n            if (options !== undefined) {\n                onUpdate = options.onUpdate;\n                tag = options.tag;\n                if (options.skipTransforms) skipTransforms = true;\n                if (onUpdate) editor._deferred.push(onUpdate);\n                if (tag) editor._updateTags.add(tag);\n            }\n            nextUpdateFn();\n        }\n    }\n    return skipTransforms;\n}\nfunction $ed3b74ccfa001938$var$beginUpdate(editor, updateFn, options) {\n    const updateTags = editor._updateTags;\n    let onUpdate;\n    let tag;\n    let skipTransforms = false;\n    let discrete = false;\n    if (options !== undefined) {\n        onUpdate = options.onUpdate;\n        tag = options.tag;\n        if (tag != null) updateTags.add(tag);\n        skipTransforms = options.skipTransforms || false;\n        discrete = options.discrete || false;\n    }\n    if (onUpdate) editor._deferred.push(onUpdate);\n    const currentEditorState = editor._editorState;\n    let pendingEditorState = editor._pendingEditorState;\n    let editorStateWasCloned = false;\n    if (pendingEditorState === null || pendingEditorState._readOnly) {\n        pendingEditorState = editor._pendingEditorState = $ed3b74ccfa001938$var$cloneEditorState(pendingEditorState || currentEditorState);\n        editorStateWasCloned = true;\n    }\n    pendingEditorState._flushSync = discrete;\n    const previousActiveEditorState = $ed3b74ccfa001938$var$activeEditorState;\n    const previousReadOnlyMode = $ed3b74ccfa001938$var$isReadOnlyMode;\n    const previousActiveEditor = $ed3b74ccfa001938$var$activeEditor;\n    const previouslyUpdating = editor._updating;\n    $ed3b74ccfa001938$var$activeEditorState = pendingEditorState;\n    $ed3b74ccfa001938$var$isReadOnlyMode = false;\n    editor._updating = true;\n    $ed3b74ccfa001938$var$activeEditor = editor;\n    try {\n        if (editorStateWasCloned) {\n            if (editor._headless) {\n                if (currentEditorState._selection != null) pendingEditorState._selection = currentEditorState._selection.clone();\n            } else pendingEditorState._selection = $ed3b74ccfa001938$var$internalCreateSelection(editor);\n        }\n        const startingCompositionKey = editor._compositionKey;\n        updateFn();\n        skipTransforms = $ed3b74ccfa001938$var$processNestedUpdates(editor, skipTransforms);\n        $ed3b74ccfa001938$var$applySelectionTransforms(pendingEditorState, editor);\n        if (editor._dirtyType !== $ed3b74ccfa001938$var$NO_DIRTY_NODES) {\n            if (skipTransforms) $ed3b74ccfa001938$var$$normalizeAllDirtyTextNodes(pendingEditorState, editor);\n            else $ed3b74ccfa001938$var$$applyAllTransforms(pendingEditorState, editor);\n            $ed3b74ccfa001938$var$processNestedUpdates(editor);\n            $ed3b74ccfa001938$var$$garbageCollectDetachedNodes(currentEditorState, pendingEditorState, editor._dirtyLeaves, editor._dirtyElements);\n        }\n        const endingCompositionKey = editor._compositionKey;\n        if (startingCompositionKey !== endingCompositionKey) pendingEditorState._flushSync = true;\n        const pendingSelection = pendingEditorState._selection;\n        if ($ed3b74ccfa001938$var$$isRangeSelection(pendingSelection)) {\n            const pendingNodeMap = pendingEditorState._nodeMap;\n            const anchorKey = pendingSelection.anchor.key;\n            const focusKey = pendingSelection.focus.key;\n            if (pendingNodeMap.get(anchorKey) === undefined || pendingNodeMap.get(focusKey) === undefined) throw Error(`updateEditor: selection has been lost because the previously selected nodes have been removed and selection wasn't moved to another node. Ensure selection changes after removing/replacing a selected node.`);\n        } else if ($ed3b74ccfa001938$var$$isNodeSelection(pendingSelection)) // TODO: we should also validate node selection?\n        {\n            if (pendingSelection._nodes.size === 0) pendingEditorState._selection = null;\n        }\n    } catch (error) {\n        // Report errors\n        if (error instanceof Error) editor._onError(error);\n         // Restore existing editor state to the DOM\n        editor._pendingEditorState = currentEditorState;\n        editor._dirtyType = $ed3b74ccfa001938$var$FULL_RECONCILE;\n        editor._cloneNotNeeded.clear();\n        editor._dirtyLeaves = new Set();\n        editor._dirtyElements.clear();\n        $ed3b74ccfa001938$var$commitPendingUpdates(editor);\n        return;\n    } finally{\n        $ed3b74ccfa001938$var$activeEditorState = previousActiveEditorState;\n        $ed3b74ccfa001938$var$isReadOnlyMode = previousReadOnlyMode;\n        $ed3b74ccfa001938$var$activeEditor = previousActiveEditor;\n        editor._updating = previouslyUpdating;\n        $ed3b74ccfa001938$var$infiniteTransformCount = 0;\n    }\n    const shouldUpdate = editor._dirtyType !== $ed3b74ccfa001938$var$NO_DIRTY_NODES || $ed3b74ccfa001938$var$editorStateHasDirtySelection(pendingEditorState, editor);\n    if (shouldUpdate) {\n        if (pendingEditorState._flushSync) {\n            pendingEditorState._flushSync = false;\n            $ed3b74ccfa001938$var$commitPendingUpdates(editor);\n        } else if (editorStateWasCloned) $ed3b74ccfa001938$var$scheduleMicroTask(()=>{\n            $ed3b74ccfa001938$var$commitPendingUpdates(editor);\n        });\n    } else {\n        pendingEditorState._flushSync = false;\n        if (editorStateWasCloned) {\n            updateTags.clear();\n            editor._deferred = [];\n            editor._pendingEditorState = null;\n        }\n    }\n}\nfunction $ed3b74ccfa001938$var$updateEditor(editor, updateFn, options) {\n    if (editor._updating) editor._updates.push([\n        updateFn,\n        options\n    ]);\n    else $ed3b74ccfa001938$var$beginUpdate(editor, updateFn, options);\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ function $ed3b74ccfa001938$var$removeNode(nodeToRemove, restoreSelection, preserveEmptyParent) {\n    $ed3b74ccfa001938$var$errorOnReadOnly();\n    const key = nodeToRemove.__key;\n    const parent = nodeToRemove.getParent();\n    if (parent === null) return;\n    const selection = $ed3b74ccfa001938$var$$maybeMoveChildrenSelectionToParent(nodeToRemove);\n    let selectionMoved = false;\n    if ($ed3b74ccfa001938$var$$isRangeSelection(selection) && restoreSelection) {\n        const anchor = selection.anchor;\n        const focus = selection.focus;\n        if (anchor.key === key) {\n            $ed3b74ccfa001938$var$moveSelectionPointToSibling(anchor, nodeToRemove, parent, nodeToRemove.getPreviousSibling(), nodeToRemove.getNextSibling());\n            selectionMoved = true;\n        }\n        if (focus.key === key) {\n            $ed3b74ccfa001938$var$moveSelectionPointToSibling(focus, nodeToRemove, parent, nodeToRemove.getPreviousSibling(), nodeToRemove.getNextSibling());\n            selectionMoved = true;\n        }\n    }\n    if ($ed3b74ccfa001938$var$$isRangeSelection(selection) && restoreSelection && !selectionMoved) {\n        // Doing this is O(n) so lets avoid it unless we need to do it\n        const index = nodeToRemove.getIndexWithinParent();\n        $ed3b74ccfa001938$var$removeFromParent(nodeToRemove);\n        $ed3b74ccfa001938$var$$updateElementSelectionOnCreateDeleteNode(selection, parent, index, -1);\n    } else $ed3b74ccfa001938$var$removeFromParent(nodeToRemove);\n    if (!preserveEmptyParent && !$ed3b74ccfa001938$var$$isRootOrShadowRoot(parent) && !parent.canBeEmpty() && parent.isEmpty()) $ed3b74ccfa001938$var$removeNode(parent, restoreSelection);\n    if (restoreSelection && $ed3b74ccfa001938$var$$isRootNode(parent) && parent.isEmpty()) parent.selectEnd();\n}\nclass $ed3b74ccfa001938$var$LexicalNode {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    // Flow doesn't support abstract classes unfortunately, so we can't _force_\n    // subclasses of Node to implement statics. All subclasses of Node should have\n    // a static getType and clone method though. We define getType and clone here so we can call it\n    // on any  Node, and we throw this error by default since the subclass should provide\n    // their own implementation.\n    /**\n   * Returns the string type of this node. Every node must\n   * implement this and it MUST BE UNIQUE amongst nodes registered\n   * on the editor.\n   *\n   */ static getType() {\n        throw Error(`LexicalNode: Node ${this.name} does not implement .getType().`);\n    }\n    /**\n   * Clones this node, creating a new node with a different key\n   * and adding it to the EditorState (but not attaching it anywhere!). All nodes must\n   * implement this method.\n   *\n   */ static clone(_data) {\n        throw Error(`LexicalNode: Node ${this.name} does not implement .clone().`);\n    }\n    /**\n   * Returns the string type of this node.\n   */ getType() {\n        return this.__type;\n    }\n    /**\n   * Returns true if there is a path between this node and the RootNode, false otherwise.\n   * This is a way of determining if the node is \"attached\" EditorState. Unattached nodes\n   * won't be reconciled and will ultimatelt be cleaned up by the Lexical GC.\n   */ isAttached() {\n        let nodeKey = this.__key;\n        while(nodeKey !== null){\n            if (nodeKey === \"root\") return true;\n            const node = $ed3b74ccfa001938$var$$getNodeByKey(nodeKey);\n            if (node === null) break;\n            nodeKey = node.__parent;\n        }\n        return false;\n    }\n    /**\n   * Returns true if this node is contained within the provided Selection., false otherwise.\n   * Relies on the algorithms implemented in {@link BaseSelection.getNodes} to determine\n   * what's included.\n   *\n   * @param selection - The selection that we want to determine if the node is in.\n   */ isSelected(selection) {\n        const targetSelection = selection || $ed3b74ccfa001938$var$$getSelection();\n        if (targetSelection == null) return false;\n        const isSelected = targetSelection.getNodes().some((n)=>n.__key === this.__key);\n        if ($ed3b74ccfa001938$var$$isTextNode(this)) return isSelected;\n         // For inline images inside of element nodes.\n        // Without this change the image will be selected if the cursor is before or after it.\n        if ($ed3b74ccfa001938$var$$isRangeSelection(targetSelection) && targetSelection.anchor.type === \"element\" && targetSelection.focus.type === \"element\" && targetSelection.anchor.key === targetSelection.focus.key && targetSelection.anchor.offset === targetSelection.focus.offset) return false;\n        return isSelected;\n    }\n    /**\n   * Returns this nodes key.\n   */ getKey() {\n        // Key is stable between copies\n        return this.__key;\n    }\n    /**\n   * Returns the zero-based index of this node within the parent.\n   */ getIndexWithinParent() {\n        const parent = this.getParent();\n        if (parent === null) return -1;\n        let node = parent.getFirstChild();\n        let index = 0;\n        while(node !== null){\n            if (this.is(node)) return index;\n            index++;\n            node = node.getNextSibling();\n        }\n        return -1;\n    }\n    /**\n   * Returns the parent of this node, or null if none is found.\n   */ getParent() {\n        const parent = this.getLatest().__parent;\n        if (parent === null) return null;\n        return $ed3b74ccfa001938$var$$getNodeByKey(parent);\n    }\n    /**\n   * Returns the parent of this node, or throws if none is found.\n   */ getParentOrThrow() {\n        const parent = this.getParent();\n        if (parent === null) throw Error(`Expected node ${this.__key} to have a parent.`);\n        return parent;\n    }\n    /**\n   * Returns the highest (in the EditorState tree)\n   * non-root ancestor of this node, or null if none is found. See {@link lexical!$isRootOrShadowRoot}\n   * for more information on which Elements comprise \"roots\".\n   */ getTopLevelElement() {\n        let node = this;\n        while(node !== null){\n            const parent = node.getParent();\n            if ($ed3b74ccfa001938$var$$isRootOrShadowRoot(parent)) return node;\n            node = parent;\n        }\n        return null;\n    }\n    /**\n   * Returns the highest (in the EditorState tree)\n   * non-root ancestor of this node, or throws if none is found. See {@link lexical!$isRootOrShadowRoot}\n   * for more information on which Elements comprise \"roots\".\n   */ getTopLevelElementOrThrow() {\n        const parent = this.getTopLevelElement();\n        if (parent === null) throw Error(`Expected node ${this.__key} to have a top parent element.`);\n        return parent;\n    }\n    /**\n   * Returns a list of the every ancestor of this node,\n   * all the way up to the RootNode.\n   *\n   */ getParents() {\n        const parents = [];\n        let node = this.getParent();\n        while(node !== null){\n            parents.push(node);\n            node = node.getParent();\n        }\n        return parents;\n    }\n    /**\n   * Returns a list of the keys of every ancestor of this node,\n   * all the way up to the RootNode.\n   *\n   */ getParentKeys() {\n        const parents = [];\n        let node = this.getParent();\n        while(node !== null){\n            parents.push(node.__key);\n            node = node.getParent();\n        }\n        return parents;\n    }\n    /**\n   * Returns the \"previous\" siblings - that is, the node that comes\n   * before this one in the same parent.\n   *\n   */ getPreviousSibling() {\n        const self = this.getLatest();\n        const prevKey = self.__prev;\n        return prevKey === null ? null : $ed3b74ccfa001938$var$$getNodeByKey(prevKey);\n    }\n    /**\n   * Returns the \"previous\" siblings - that is, the nodes that come between\n   * this one and the first child of it's parent, inclusive.\n   *\n   */ getPreviousSiblings() {\n        const siblings = [];\n        const parent = this.getParent();\n        if (parent === null) return siblings;\n        let node = parent.getFirstChild();\n        while(node !== null){\n            if (node.is(this)) break;\n            siblings.push(node);\n            node = node.getNextSibling();\n        }\n        return siblings;\n    }\n    /**\n   * Returns the \"next\" siblings - that is, the node that comes\n   * after this one in the same parent\n   *\n   */ getNextSibling() {\n        const self = this.getLatest();\n        const nextKey = self.__next;\n        return nextKey === null ? null : $ed3b74ccfa001938$var$$getNodeByKey(nextKey);\n    }\n    /**\n   * Returns all \"next\" siblings - that is, the nodes that come between this\n   * one and the last child of it's parent, inclusive.\n   *\n   */ getNextSiblings() {\n        const siblings = [];\n        let node = this.getNextSibling();\n        while(node !== null){\n            siblings.push(node);\n            node = node.getNextSibling();\n        }\n        return siblings;\n    }\n    /**\n   * Returns the closest common ancestor of this node and the provided one or null\n   * if one cannot be found.\n   *\n   * @param node - the other node to find the common ancestor of.\n   */ getCommonAncestor(node) {\n        const a = this.getParents();\n        const b = node.getParents();\n        if ($ed3b74ccfa001938$var$$isElementNode(this)) a.unshift(this);\n        if ($ed3b74ccfa001938$var$$isElementNode(node)) b.unshift(node);\n        const aLength = a.length;\n        const bLength = b.length;\n        if (aLength === 0 || bLength === 0 || a[aLength - 1] !== b[bLength - 1]) return null;\n        const bSet = new Set(b);\n        for(let i = 0; i < aLength; i++){\n            const ancestor = a[i];\n            if (bSet.has(ancestor)) return ancestor;\n        }\n        return null;\n    }\n    /**\n   * Returns true if the provided node is the exact same one as this node, from Lexical's perspective.\n   * Always use this instead of referential equality.\n   *\n   * @param object - the node to perform the equality comparison on.\n   */ is(object) {\n        if (object == null) return false;\n        return this.__key === object.__key;\n    }\n    /**\n   * Returns true if this node logical precedes the target node in the editor state.\n   *\n   * @param targetNode - the node we're testing to see if it's after this one.\n   */ isBefore(targetNode) {\n        if (this === targetNode) return false;\n        if (targetNode.isParentOf(this)) return true;\n        if (this.isParentOf(targetNode)) return false;\n        const commonAncestor = this.getCommonAncestor(targetNode);\n        let indexA = 0;\n        let indexB = 0;\n        let node = this;\n        while(true){\n            const parent = node.getParentOrThrow();\n            if (parent === commonAncestor) {\n                indexA = node.getIndexWithinParent();\n                break;\n            }\n            node = parent;\n        }\n        node = targetNode;\n        while(true){\n            const parent = node.getParentOrThrow();\n            if (parent === commonAncestor) {\n                indexB = node.getIndexWithinParent();\n                break;\n            }\n            node = parent;\n        }\n        return indexA < indexB;\n    }\n    /**\n   * Returns true if this node is the parent of the target node, false otherwise.\n   *\n   * @param targetNode - the would-be child node.\n   */ isParentOf(targetNode) {\n        const key = this.__key;\n        if (key === targetNode.__key) return false;\n        let node = targetNode;\n        while(node !== null){\n            if (node.__key === key) return true;\n            node = node.getParent();\n        }\n        return false;\n    }\n    /**\n   * Returns a list of nodes that are between this node and\n   * the target node in the EditorState.\n   *\n   * @param targetNode - the node that marks the other end of the range of nodes to be returned.\n   */ getNodesBetween(targetNode) {\n        const isBefore = this.isBefore(targetNode);\n        const nodes = [];\n        const visited = new Set();\n        let node = this;\n        while(true){\n            const key = node.__key;\n            if (!visited.has(key)) {\n                visited.add(key);\n                nodes.push(node);\n            }\n            if (node === targetNode) break;\n            const child = $ed3b74ccfa001938$var$$isElementNode(node) ? isBefore ? node.getFirstChild() : node.getLastChild() : null;\n            if (child !== null) {\n                node = child;\n                continue;\n            }\n            const nextSibling = isBefore ? node.getNextSibling() : node.getPreviousSibling();\n            if (nextSibling !== null) {\n                node = nextSibling;\n                continue;\n            }\n            const parent = node.getParentOrThrow();\n            if (!visited.has(parent.__key)) nodes.push(parent);\n            if (parent === targetNode) break;\n            let parentSibling = null;\n            let ancestor = parent;\n            do {\n                if (ancestor === null) throw Error(`getNodesBetween: ancestor is null`);\n                parentSibling = isBefore ? ancestor.getNextSibling() : ancestor.getPreviousSibling();\n                ancestor = ancestor.getParent();\n                if (ancestor !== null) {\n                    if (parentSibling === null && !visited.has(ancestor.__key)) nodes.push(ancestor);\n                }\n            }while (parentSibling === null);\n            node = parentSibling;\n        }\n        if (!isBefore) nodes.reverse();\n        return nodes;\n    }\n    /**\n   * Returns true if this node has been marked dirty during this update cycle.\n   *\n   */ isDirty() {\n        const editor = $ed3b74ccfa001938$var$getActiveEditor();\n        const dirtyLeaves = editor._dirtyLeaves;\n        return dirtyLeaves !== null && dirtyLeaves.has(this.__key);\n    }\n    /**\n   * Returns the latest version of the node from the active EditorState.\n   * This is used to avoid getting values from stale node references.\n   *\n   */ getLatest() {\n        const latest = $ed3b74ccfa001938$var$$getNodeByKey(this.__key);\n        if (latest === null) throw Error(`Lexical node does not exist in active editor state. Avoid using the same node references between nested closures from editorState.read/editor.update.`);\n        return latest;\n    }\n    /**\n   * Returns a mutable version of the node. Will throw an error if\n   * called outside of a Lexical Editor {@link LexicalEditor.update} callback.\n   *\n   */ getWritable() {\n        $ed3b74ccfa001938$var$errorOnReadOnly();\n        const editorState = $ed3b74ccfa001938$var$getActiveEditorState();\n        const editor = $ed3b74ccfa001938$var$getActiveEditor();\n        const nodeMap = editorState._nodeMap;\n        const key = this.__key; // Ensure we get the latest node from pending state\n        const latestNode = this.getLatest();\n        const parent = latestNode.__parent;\n        const cloneNotNeeded = editor._cloneNotNeeded;\n        const selection = $ed3b74ccfa001938$var$$getSelection();\n        if (selection !== null) selection._cachedNodes = null;\n        if (cloneNotNeeded.has(key)) {\n            // Transforms clear the dirty node set on each iteration to keep track on newly dirty nodes\n            $ed3b74ccfa001938$var$internalMarkNodeAsDirty(latestNode);\n            return latestNode;\n        }\n        const constructor = latestNode.constructor; // @ts-expect-error\n        const mutableNode = constructor.clone(latestNode);\n        mutableNode.__parent = parent;\n        mutableNode.__next = latestNode.__next;\n        mutableNode.__prev = latestNode.__prev;\n        if ($ed3b74ccfa001938$var$$isElementNode(latestNode) && $ed3b74ccfa001938$var$$isElementNode(mutableNode)) {\n            mutableNode.__first = latestNode.__first;\n            mutableNode.__last = latestNode.__last;\n            mutableNode.__size = latestNode.__size;\n            mutableNode.__indent = latestNode.__indent;\n            mutableNode.__format = latestNode.__format;\n            mutableNode.__dir = latestNode.__dir;\n        } else if ($ed3b74ccfa001938$var$$isTextNode(latestNode) && $ed3b74ccfa001938$var$$isTextNode(mutableNode)) {\n            mutableNode.__format = latestNode.__format;\n            mutableNode.__style = latestNode.__style;\n            mutableNode.__mode = latestNode.__mode;\n            mutableNode.__detail = latestNode.__detail;\n        }\n        cloneNotNeeded.add(key);\n        mutableNode.__key = key;\n        $ed3b74ccfa001938$var$internalMarkNodeAsDirty(mutableNode); // Update reference in node map\n        nodeMap.set(key, mutableNode);\n        return mutableNode;\n    }\n    /**\n   * Returns the text content of the node. Override this for\n   * custom nodes that should have a representation in plain text\n   * format (for copy + paste, for example)\n   *\n   */ getTextContent() {\n        return \"\";\n    }\n    /**\n   * Returns the length of the string produced by calling getTextContent on this node.\n   *\n   */ getTextContentSize() {\n        return this.getTextContent().length;\n    }\n    /**\n   * Called during the reconciliation process to determine which nodes\n   * to insert into the DOM for this Lexical Node.\n   *\n   * This method must return exactly one HTMLElement. Nested elements are not supported.\n   *\n   * Do not attempt to update the Lexical EditorState during this phase of the update lifecyle.\n   *\n   * @param _config - allows access to things like the EditorTheme (to apply classes) during reconciliation.\n   * @param _editor - allows access to the editor for context during reconciliation.\n   *\n   * */ createDOM(_config, _editor) {\n        throw Error(`createDOM: base method not extended`);\n    }\n    /**\n   * Called when a node changes and should update the DOM\n   * in whatever way is necessary to make it align with any changes that might\n   * have happened during the update.\n   *\n   * Returning \"true\" here will cause lexical to unmount and recreate the DOM node\n   * (by calling createDOM). You would need to do this if the element tag changes,\n   * for instance.\n   *\n   * */ updateDOM(_prevNode, _dom, _config) {\n        throw Error(`updateDOM: base method not extended`);\n    }\n    /**\n   * Controls how the this node is serialized to HTML. This is important for\n   * copy and paste between Lexical and non-Lexical editors, or Lexical editors with different namespaces,\n   * in which case the primary transfer format is HTML. It's also important if you're serializing\n   * to HTML for any other reason via {@link @lexical/html!$generateHtmlFromNodes}. You could\n   * also use this method to build your own HTML renderer.\n   *\n   * */ exportDOM(editor) {\n        const element = this.createDOM(editor._config, editor);\n        return {\n            element: element\n        };\n    }\n    /**\n   * Controls how the this node is serialized to JSON. This is important for\n   * copy and paste between Lexical editors sharing the same namespace. It's also important\n   * if you're serializing to JSON for persistent storage somewhere.\n   * See [Serialization & Deserialization](https://lexical.dev/docs/concepts/serialization#lexical---html).\n   *\n   * */ exportJSON() {\n        throw Error(`exportJSON: base method not extended`);\n    }\n    /**\n   * Controls how the this node is deserialized from JSON. This is usually boilerplate,\n   * but provides an abstraction betweent he node implementation and serialized interfaec that can\n   * be important if you ever make breaking changes to a node schema (by adding or removing properties).\n   * See [Serialization & Deserialization](https://lexical.dev/docs/concepts/serialization#lexical---html).\n   *\n   * */ static importJSON(_serializedNode) {\n        throw Error(`LexicalNode: Node ${this.name} does not implement .importJSON().`);\n    }\n    /**\n   * @experimental\n   *\n   * Registers the returned function as a transform on the node during\n   * Editor initialization. Most such use cases should be addressed via\n   * the {@link LexicalEditor.registerNodeTransform} API.\n   *\n   * Experimental - use at your own risk.\n   */ static transform() {\n        return null;\n    }\n    /**\n   * Removes this LexicalNode from the EditorState. If the node isn't re-inserted\n   * somewhere, the Lexical garbage collector will eventually clean it up.\n   *\n   * @param preserveEmptyParent - If falsy, the node's parent will be removed if\n   * it's empty after the removal operation. This is the default behavior, subject to\n   * other node heuristics such as {@link ElementNode#canBeEmpty}\n   * */ remove(preserveEmptyParent) {\n        $ed3b74ccfa001938$var$removeNode(this, true, preserveEmptyParent);\n    }\n    /**\n   * Replaces this LexicalNode with the provided node, optionally transferring the children\n   * of the replaced node to the replacing node.\n   *\n   * @param replaceWith - The node to replace this one with.\n   * @param includeChildren - Whether or not to transfer the children of this node to the replacing node.\n   * */ replace(replaceWith, includeChildren) {\n        $ed3b74ccfa001938$var$errorOnReadOnly();\n        let selection = $ed3b74ccfa001938$var$$getSelection();\n        if (selection !== null) selection = selection.clone();\n        $ed3b74ccfa001938$var$errorOnInsertTextNodeOnRoot(this, replaceWith);\n        const self = this.getLatest();\n        const toReplaceKey = this.__key;\n        const key = replaceWith.__key;\n        const writableReplaceWith = replaceWith.getWritable();\n        const writableParent = this.getParentOrThrow().getWritable();\n        const size = writableParent.__size;\n        $ed3b74ccfa001938$var$removeFromParent(writableReplaceWith);\n        const prevSibling = self.getPreviousSibling();\n        const nextSibling = self.getNextSibling();\n        const prevKey = self.__prev;\n        const nextKey = self.__next;\n        const parentKey = self.__parent;\n        $ed3b74ccfa001938$var$removeNode(self, false, true);\n        if (prevSibling === null) writableParent.__first = key;\n        else {\n            const writablePrevSibling = prevSibling.getWritable();\n            writablePrevSibling.__next = key;\n        }\n        writableReplaceWith.__prev = prevKey;\n        if (nextSibling === null) writableParent.__last = key;\n        else {\n            const writableNextSibling = nextSibling.getWritable();\n            writableNextSibling.__prev = key;\n        }\n        writableReplaceWith.__next = nextKey;\n        writableReplaceWith.__parent = parentKey;\n        writableParent.__size = size;\n        if (includeChildren) this.getChildren().forEach((child)=>{\n            writableReplaceWith.append(child);\n        });\n        if ($ed3b74ccfa001938$var$$isRangeSelection(selection)) {\n            $ed3b74ccfa001938$var$$setSelection(selection);\n            const anchor = selection.anchor;\n            const focus = selection.focus;\n            if (anchor.key === toReplaceKey) $ed3b74ccfa001938$var$$moveSelectionPointToEnd(anchor, writableReplaceWith);\n            if (focus.key === toReplaceKey) $ed3b74ccfa001938$var$$moveSelectionPointToEnd(focus, writableReplaceWith);\n        }\n        if ($ed3b74ccfa001938$var$$getCompositionKey() === toReplaceKey) $ed3b74ccfa001938$var$$setCompositionKey(key);\n        return writableReplaceWith;\n    }\n    /**\n   * Inserts a node after this LexicalNode (as the next sibling).\n   *\n   * @param nodeToInsert - The node to insert after this one.\n   * @param restoreSelection - Whether or not to attempt to resolve the\n   * selection to the appropriate place after the operation is complete.\n   * */ insertAfter(nodeToInsert, restoreSelection = true) {\n        $ed3b74ccfa001938$var$errorOnReadOnly();\n        $ed3b74ccfa001938$var$errorOnInsertTextNodeOnRoot(this, nodeToInsert);\n        const writableSelf = this.getWritable();\n        const writableNodeToInsert = nodeToInsert.getWritable();\n        const oldParent = writableNodeToInsert.getParent();\n        const selection = $ed3b74ccfa001938$var$$getSelection();\n        let elementAnchorSelectionOnNode = false;\n        let elementFocusSelectionOnNode = false;\n        if (oldParent !== null) {\n            // TODO: this is O(n), can we improve?\n            const oldIndex = nodeToInsert.getIndexWithinParent();\n            $ed3b74ccfa001938$var$removeFromParent(writableNodeToInsert);\n            if ($ed3b74ccfa001938$var$$isRangeSelection(selection)) {\n                const oldParentKey = oldParent.__key;\n                const anchor = selection.anchor;\n                const focus = selection.focus;\n                elementAnchorSelectionOnNode = anchor.type === \"element\" && anchor.key === oldParentKey && anchor.offset === oldIndex + 1;\n                elementFocusSelectionOnNode = focus.type === \"element\" && focus.key === oldParentKey && focus.offset === oldIndex + 1;\n            }\n        }\n        const nextSibling = this.getNextSibling();\n        const writableParent = this.getParentOrThrow().getWritable();\n        const insertKey = writableNodeToInsert.__key;\n        const nextKey = writableSelf.__next;\n        if (nextSibling === null) writableParent.__last = insertKey;\n        else {\n            const writableNextSibling = nextSibling.getWritable();\n            writableNextSibling.__prev = insertKey;\n        }\n        writableParent.__size++;\n        writableSelf.__next = insertKey;\n        writableNodeToInsert.__next = nextKey;\n        writableNodeToInsert.__prev = writableSelf.__key;\n        writableNodeToInsert.__parent = writableSelf.__parent;\n        if (restoreSelection && $ed3b74ccfa001938$var$$isRangeSelection(selection)) {\n            const index = this.getIndexWithinParent();\n            $ed3b74ccfa001938$var$$updateElementSelectionOnCreateDeleteNode(selection, writableParent, index + 1);\n            const writableParentKey = writableParent.__key;\n            if (elementAnchorSelectionOnNode) selection.anchor.set(writableParentKey, index + 2, \"element\");\n            if (elementFocusSelectionOnNode) selection.focus.set(writableParentKey, index + 2, \"element\");\n        }\n        return nodeToInsert;\n    }\n    /**\n   * Inserts a node before this LexicalNode (as the previous sibling).\n   *\n   * @param nodeToInsert - The node to insert after this one.\n   * @param restoreSelection - Whether or not to attempt to resolve the\n   * selection to the appropriate place after the operation is complete.\n   * */ insertBefore(nodeToInsert, restoreSelection = true) {\n        $ed3b74ccfa001938$var$errorOnReadOnly();\n        $ed3b74ccfa001938$var$errorOnInsertTextNodeOnRoot(this, nodeToInsert);\n        const writableSelf = this.getWritable();\n        const writableNodeToInsert = nodeToInsert.getWritable();\n        const insertKey = writableNodeToInsert.__key;\n        $ed3b74ccfa001938$var$removeFromParent(writableNodeToInsert);\n        const prevSibling = this.getPreviousSibling();\n        const writableParent = this.getParentOrThrow().getWritable();\n        const prevKey = writableSelf.__prev; // TODO: this is O(n), can we improve?\n        const index = this.getIndexWithinParent();\n        if (prevSibling === null) writableParent.__first = insertKey;\n        else {\n            const writablePrevSibling = prevSibling.getWritable();\n            writablePrevSibling.__next = insertKey;\n        }\n        writableParent.__size++;\n        writableSelf.__prev = insertKey;\n        writableNodeToInsert.__prev = prevKey;\n        writableNodeToInsert.__next = writableSelf.__key;\n        writableNodeToInsert.__parent = writableSelf.__parent;\n        const selection = $ed3b74ccfa001938$var$$getSelection();\n        if (restoreSelection && $ed3b74ccfa001938$var$$isRangeSelection(selection)) {\n            const parent = this.getParentOrThrow();\n            $ed3b74ccfa001938$var$$updateElementSelectionOnCreateDeleteNode(selection, parent, index);\n        }\n        return nodeToInsert;\n    }\n    /**\n   * Whether or not this node has a required parent. Used during copy + paste operations\n   * to normalize nodes that would otherwise be orphaned. For example, ListItemNodes without\n   * a ListNode parent or TextNodes with a ParagraphNode parent.\n   *\n   * */ isParentRequired() {\n        return false;\n    }\n    /**\n   * The creation logic for any required parent. Should be implemented if {@link isParentRequired} returns true.\n   *\n   * */ createParentElementNode() {\n        return $ed3b74ccfa001938$var$$createParagraphNode();\n    }\n    /**\n   * Moves selection to the previous sibling of this node, at the specified offsets.\n   *\n   * @param anchorOffset - The anchor offset for selection.\n   * @param focusOffset -  The focus offset for selection\n   * */ selectPrevious(anchorOffset, focusOffset) {\n        $ed3b74ccfa001938$var$errorOnReadOnly();\n        const prevSibling = this.getPreviousSibling();\n        const parent = this.getParentOrThrow();\n        if (prevSibling === null) return parent.select(0, 0);\n        if ($ed3b74ccfa001938$var$$isElementNode(prevSibling)) return prevSibling.select();\n        else if (!$ed3b74ccfa001938$var$$isTextNode(prevSibling)) {\n            const index = prevSibling.getIndexWithinParent() + 1;\n            return parent.select(index, index);\n        }\n        return prevSibling.select(anchorOffset, focusOffset);\n    }\n    /**\n   * Moves selection to the next sibling of this node, at the specified offsets.\n   *\n   * @param anchorOffset - The anchor offset for selection.\n   * @param focusOffset -  The focus offset for selection\n   * */ selectNext(anchorOffset, focusOffset) {\n        $ed3b74ccfa001938$var$errorOnReadOnly();\n        const nextSibling = this.getNextSibling();\n        const parent = this.getParentOrThrow();\n        if (nextSibling === null) return parent.select();\n        if ($ed3b74ccfa001938$var$$isElementNode(nextSibling)) return nextSibling.select(0, 0);\n        else if (!$ed3b74ccfa001938$var$$isTextNode(nextSibling)) {\n            const index = nextSibling.getIndexWithinParent();\n            return parent.select(index, index);\n        }\n        return nextSibling.select(anchorOffset, focusOffset);\n    }\n    /**\n   * Marks a node dirty, triggering transforms and\n   * forcing it to be reconciled during the update cycle.\n   *\n   * */ markDirty() {\n        this.getWritable();\n    }\n    constructor(key){\n        // @ts-expect-error\n        this.__type = this.constructor.getType();\n        this.__parent = null;\n        this.__prev = null;\n        this.__next = null;\n        $ed3b74ccfa001938$var$$setNodeKey(this, key);\n        if (this.__type !== \"root\") {\n            $ed3b74ccfa001938$var$errorOnReadOnly();\n            $ed3b74ccfa001938$var$errorOnTypeKlassMismatch(this.__type, this.constructor);\n        }\n    }\n}\nfunction $ed3b74ccfa001938$var$errorOnTypeKlassMismatch(type, klass) {\n    const registeredNode = $ed3b74ccfa001938$var$getActiveEditor()._nodes.get(type); // Common error - split in its own invariant\n    if (registeredNode === undefined) throw Error(`Create node: Attempted to create node ${klass.name} that was not configured to be used on the editor.`);\n    const editorKlass = registeredNode.klass;\n    if (editorKlass !== klass) throw Error(`Create node: Type ${type} in node ${klass.name} does not match registered node ${editorKlass.name} with the same type`);\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ /** @noInheritDoc */ class $ed3b74ccfa001938$var$DecoratorNode extends $ed3b74ccfa001938$var$LexicalNode {\n    decorate(editor, config) {\n        throw Error(`decorate: base method not extended`);\n    }\n    isIsolated() {\n        return false;\n    }\n    isInline() {\n        return true;\n    }\n    isKeyboardSelectable() {\n        return true;\n    }\n    constructor(key){\n        super(key);\n    }\n}\nfunction $ed3b74ccfa001938$var$$isDecoratorNode(node) {\n    return node instanceof $ed3b74ccfa001938$var$DecoratorNode;\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ /** @noInheritDoc */ class $ed3b74ccfa001938$var$ElementNode extends $ed3b74ccfa001938$var$LexicalNode {\n    getFormat() {\n        const self = this.getLatest();\n        return self.__format;\n    }\n    getFormatType() {\n        const format = this.getFormat();\n        return $ed3b74ccfa001938$var$ELEMENT_FORMAT_TO_TYPE[format] || \"\";\n    }\n    getIndent() {\n        const self = this.getLatest();\n        return self.__indent;\n    }\n    getChildren() {\n        const children = [];\n        let child = this.getFirstChild();\n        while(child !== null){\n            children.push(child);\n            child = child.getNextSibling();\n        }\n        return children;\n    }\n    getChildrenKeys() {\n        const children = [];\n        let child = this.getFirstChild();\n        while(child !== null){\n            children.push(child.__key);\n            child = child.getNextSibling();\n        }\n        return children;\n    }\n    getChildrenSize() {\n        const self = this.getLatest();\n        return self.__size;\n    }\n    isEmpty() {\n        return this.getChildrenSize() === 0;\n    }\n    isDirty() {\n        const editor = $ed3b74ccfa001938$var$getActiveEditor();\n        const dirtyElements = editor._dirtyElements;\n        return dirtyElements !== null && dirtyElements.has(this.__key);\n    }\n    isLastChild() {\n        const self = this.getLatest();\n        const parentLastChild = this.getParentOrThrow().getLastChild();\n        return parentLastChild !== null && parentLastChild.is(self);\n    }\n    getAllTextNodes() {\n        const textNodes = [];\n        let child = this.getFirstChild();\n        while(child !== null){\n            if ($ed3b74ccfa001938$var$$isTextNode(child)) textNodes.push(child);\n            if ($ed3b74ccfa001938$var$$isElementNode(child)) {\n                const subChildrenNodes = child.getAllTextNodes();\n                textNodes.push(...subChildrenNodes);\n            }\n            child = child.getNextSibling();\n        }\n        return textNodes;\n    }\n    getFirstDescendant() {\n        let node = this.getFirstChild();\n        while(node !== null){\n            if ($ed3b74ccfa001938$var$$isElementNode(node)) {\n                const child = node.getFirstChild();\n                if (child !== null) {\n                    node = child;\n                    continue;\n                }\n            }\n            break;\n        }\n        return node;\n    }\n    getLastDescendant() {\n        let node = this.getLastChild();\n        while(node !== null){\n            if ($ed3b74ccfa001938$var$$isElementNode(node)) {\n                const child = node.getLastChild();\n                if (child !== null) {\n                    node = child;\n                    continue;\n                }\n            }\n            break;\n        }\n        return node;\n    }\n    getDescendantByIndex(index) {\n        const children = this.getChildren();\n        const childrenLength = children.length; // For non-empty element nodes, we resolve its descendant\n        // (either a leaf node or the bottom-most element)\n        if (index >= childrenLength) {\n            const resolvedNode = children[childrenLength - 1];\n            return $ed3b74ccfa001938$var$$isElementNode(resolvedNode) && resolvedNode.getLastDescendant() || resolvedNode || null;\n        }\n        const resolvedNode = children[index];\n        return $ed3b74ccfa001938$var$$isElementNode(resolvedNode) && resolvedNode.getFirstDescendant() || resolvedNode || null;\n    }\n    getFirstChild() {\n        const self = this.getLatest();\n        const firstKey = self.__first;\n        return firstKey === null ? null : $ed3b74ccfa001938$var$$getNodeByKey(firstKey);\n    }\n    getFirstChildOrThrow() {\n        const firstChild = this.getFirstChild();\n        if (firstChild === null) throw Error(`Expected node ${this.__key} to have a first child.`);\n        return firstChild;\n    }\n    getLastChild() {\n        const self = this.getLatest();\n        const lastKey = self.__last;\n        return lastKey === null ? null : $ed3b74ccfa001938$var$$getNodeByKey(lastKey);\n    }\n    getLastChildOrThrow() {\n        const lastChild = this.getLastChild();\n        if (lastChild === null) throw Error(`Expected node ${this.__key} to have a last child.`);\n        return lastChild;\n    }\n    getChildAtIndex(index) {\n        const size = this.getChildrenSize();\n        let node;\n        let i;\n        if (index < size / 2) {\n            node = this.getFirstChild();\n            i = 0;\n            while(node !== null && i <= index){\n                if (i === index) return node;\n                node = node.getNextSibling();\n                i++;\n            }\n            return null;\n        }\n        node = this.getLastChild();\n        i = size - 1;\n        while(node !== null && i >= index){\n            if (i === index) return node;\n            node = node.getPreviousSibling();\n            i--;\n        }\n        return null;\n    }\n    getTextContent() {\n        let textContent = \"\";\n        const children = this.getChildren();\n        const childrenLength = children.length;\n        for(let i = 0; i < childrenLength; i++){\n            const child = children[i];\n            textContent += child.getTextContent();\n            if ($ed3b74ccfa001938$var$$isElementNode(child) && i !== childrenLength - 1 && !child.isInline()) textContent += $ed3b74ccfa001938$var$DOUBLE_LINE_BREAK;\n        }\n        return textContent;\n    }\n    getTextContentSize() {\n        let textContentSize = 0;\n        const children = this.getChildren();\n        const childrenLength = children.length;\n        for(let i = 0; i < childrenLength; i++){\n            const child = children[i];\n            textContentSize += child.getTextContentSize();\n            if ($ed3b74ccfa001938$var$$isElementNode(child) && i !== childrenLength - 1 && !child.isInline()) textContentSize += $ed3b74ccfa001938$var$DOUBLE_LINE_BREAK.length;\n        }\n        return textContentSize;\n    }\n    getDirection() {\n        const self = this.getLatest();\n        return self.__dir;\n    }\n    hasFormat(type) {\n        if (type !== \"\") {\n            const formatFlag = $ed3b74ccfa001938$var$ELEMENT_TYPE_TO_FORMAT[type];\n            return (this.getFormat() & formatFlag) !== 0;\n        }\n        return false;\n    }\n    select(_anchorOffset, _focusOffset) {\n        $ed3b74ccfa001938$var$errorOnReadOnly();\n        const selection = $ed3b74ccfa001938$var$$getSelection();\n        let anchorOffset = _anchorOffset;\n        let focusOffset = _focusOffset;\n        const childrenCount = this.getChildrenSize();\n        if (!this.canBeEmpty()) {\n            if (_anchorOffset === 0 && _focusOffset === 0) {\n                const firstChild = this.getFirstChild();\n                if ($ed3b74ccfa001938$var$$isTextNode(firstChild) || $ed3b74ccfa001938$var$$isElementNode(firstChild)) return firstChild.select(0, 0);\n            } else if ((_anchorOffset === undefined || _anchorOffset === childrenCount) && (_focusOffset === undefined || _focusOffset === childrenCount)) {\n                const lastChild = this.getLastChild();\n                if ($ed3b74ccfa001938$var$$isTextNode(lastChild) || $ed3b74ccfa001938$var$$isElementNode(lastChild)) return lastChild.select();\n            }\n        }\n        if (anchorOffset === undefined) anchorOffset = childrenCount;\n        if (focusOffset === undefined) focusOffset = childrenCount;\n        const key = this.__key;\n        if (!$ed3b74ccfa001938$var$$isRangeSelection(selection)) return $ed3b74ccfa001938$var$internalMakeRangeSelection(key, anchorOffset, key, focusOffset, \"element\", \"element\");\n        else {\n            selection.anchor.set(key, anchorOffset, \"element\");\n            selection.focus.set(key, focusOffset, \"element\");\n            selection.dirty = true;\n        }\n        return selection;\n    }\n    selectStart() {\n        const firstNode = this.getFirstDescendant();\n        if ($ed3b74ccfa001938$var$$isElementNode(firstNode) || $ed3b74ccfa001938$var$$isTextNode(firstNode)) return firstNode.select(0, 0);\n         // Decorator or LineBreak\n        if (firstNode !== null) return firstNode.selectPrevious();\n        return this.select(0, 0);\n    }\n    selectEnd() {\n        const lastNode = this.getLastDescendant();\n        if ($ed3b74ccfa001938$var$$isElementNode(lastNode) || $ed3b74ccfa001938$var$$isTextNode(lastNode)) return lastNode.select();\n         // Decorator or LineBreak\n        if (lastNode !== null) return lastNode.selectNext();\n        return this.select();\n    }\n    clear() {\n        const writableSelf = this.getWritable();\n        const children = this.getChildren();\n        children.forEach((child)=>child.remove());\n        return writableSelf;\n    }\n    append(...nodesToAppend) {\n        return this.splice(this.getChildrenSize(), 0, nodesToAppend);\n    }\n    setDirection(direction) {\n        const self = this.getWritable();\n        self.__dir = direction;\n        return self;\n    }\n    setFormat(type) {\n        const self = this.getWritable();\n        self.__format = type !== \"\" ? $ed3b74ccfa001938$var$ELEMENT_TYPE_TO_FORMAT[type] : 0;\n        return this;\n    }\n    setIndent(indentLevel) {\n        const self = this.getWritable();\n        self.__indent = indentLevel;\n        return this;\n    }\n    splice(start, deleteCount, nodesToInsert) {\n        const nodesToInsertLength = nodesToInsert.length;\n        const oldSize = this.getChildrenSize();\n        const writableSelf = this.getWritable();\n        const writableSelfKey = writableSelf.__key;\n        const nodesToInsertKeys = [];\n        const nodesToRemoveKeys = [];\n        const nodeAfterRange = this.getChildAtIndex(start + deleteCount);\n        let nodeBeforeRange = null;\n        let newSize = oldSize - deleteCount + nodesToInsertLength;\n        if (start !== 0) {\n            if (start === oldSize) nodeBeforeRange = this.getLastChild();\n            else {\n                const node = this.getChildAtIndex(start);\n                if (node !== null) nodeBeforeRange = node.getPreviousSibling();\n            }\n        }\n        if (deleteCount > 0) {\n            let nodeToDelete = nodeBeforeRange === null ? this.getFirstChild() : nodeBeforeRange.getNextSibling();\n            for(let i = 0; i < deleteCount; i++){\n                if (nodeToDelete === null) throw Error(`splice: sibling not found`);\n                const nextSibling = nodeToDelete.getNextSibling();\n                const nodeKeyToDelete = nodeToDelete.__key;\n                const writableNodeToDelete = nodeToDelete.getWritable();\n                $ed3b74ccfa001938$var$removeFromParent(writableNodeToDelete);\n                nodesToRemoveKeys.push(nodeKeyToDelete);\n                nodeToDelete = nextSibling;\n            }\n        }\n        let prevNode = nodeBeforeRange;\n        for(let i = 0; i < nodesToInsertLength; i++){\n            const nodeToInsert = nodesToInsert[i];\n            if (prevNode !== null && nodeToInsert.is(prevNode)) nodeBeforeRange = prevNode = prevNode.getPreviousSibling();\n            const writableNodeToInsert = nodeToInsert.getWritable();\n            if (writableNodeToInsert.__parent === writableSelfKey) newSize--;\n            $ed3b74ccfa001938$var$removeFromParent(writableNodeToInsert);\n            const nodeKeyToInsert = nodeToInsert.__key;\n            if (prevNode === null) {\n                writableSelf.__first = nodeKeyToInsert;\n                writableNodeToInsert.__prev = null;\n            } else {\n                const writablePrevNode = prevNode.getWritable();\n                writablePrevNode.__next = nodeKeyToInsert;\n                writableNodeToInsert.__prev = writablePrevNode.__key;\n            }\n            if (nodeToInsert.__key === writableSelfKey) throw Error(`append: attempting to append self`);\n             // Set child parent to self\n            writableNodeToInsert.__parent = writableSelfKey;\n            nodesToInsertKeys.push(nodeKeyToInsert);\n            prevNode = nodeToInsert;\n        }\n        if (start + deleteCount === oldSize) {\n            if (prevNode !== null) {\n                const writablePrevNode = prevNode.getWritable();\n                writablePrevNode.__next = null;\n                writableSelf.__last = prevNode.__key;\n            }\n        } else if (nodeAfterRange !== null) {\n            const writableNodeAfterRange = nodeAfterRange.getWritable();\n            if (prevNode !== null) {\n                const writablePrevNode = prevNode.getWritable();\n                writableNodeAfterRange.__prev = prevNode.__key;\n                writablePrevNode.__next = nodeAfterRange.__key;\n            } else writableNodeAfterRange.__prev = null;\n        }\n        writableSelf.__size = newSize; // In case of deletion we need to adjust selection, unlink removed nodes\n        // and clean up node itself if it becomes empty. None of these needed\n        // for insertion-only cases\n        if (nodesToRemoveKeys.length) {\n            // Adjusting selection, in case node that was anchor/focus will be deleted\n            const selection = $ed3b74ccfa001938$var$$getSelection();\n            if ($ed3b74ccfa001938$var$$isRangeSelection(selection)) {\n                const nodesToRemoveKeySet = new Set(nodesToRemoveKeys);\n                const nodesToInsertKeySet = new Set(nodesToInsertKeys);\n                const { anchor: anchor , focus: focus  } = selection;\n                if ($ed3b74ccfa001938$var$isPointRemoved(anchor, nodesToRemoveKeySet, nodesToInsertKeySet)) $ed3b74ccfa001938$var$moveSelectionPointToSibling(anchor, anchor.getNode(), this, nodeBeforeRange, nodeAfterRange);\n                if ($ed3b74ccfa001938$var$isPointRemoved(focus, nodesToRemoveKeySet, nodesToInsertKeySet)) $ed3b74ccfa001938$var$moveSelectionPointToSibling(focus, focus.getNode(), this, nodeBeforeRange, nodeAfterRange);\n                 // Cleanup if node can't be empty\n                if (newSize === 0 && !this.canBeEmpty() && !$ed3b74ccfa001938$var$$isRootOrShadowRoot(this)) this.remove();\n            }\n        }\n        return writableSelf;\n    }\n    exportJSON() {\n        return {\n            children: [],\n            direction: this.getDirection(),\n            format: this.getFormatType(),\n            indent: this.getIndent(),\n            type: \"element\",\n            version: 1\n        };\n    }\n    insertNewAfter(selection, restoreSelection) {\n        return null;\n    }\n    canInsertTab() {\n        return false;\n    }\n    canIndent() {\n        return true;\n    }\n    /*\n   * This method controls the behavior of a the node during backwards\n   * deletion (i.e., backspace) when selection is at the beginning of\n   * the node (offset 0)\n   */ collapseAtStart(selection) {\n        return false;\n    }\n    excludeFromCopy(destination) {\n        return false;\n    }\n    canExtractContents() {\n        return true;\n    }\n    canReplaceWith(replacement) {\n        return true;\n    }\n    canInsertAfter(node) {\n        return true;\n    }\n    canBeEmpty() {\n        return true;\n    }\n    canInsertTextBefore() {\n        return true;\n    }\n    canInsertTextAfter() {\n        return true;\n    }\n    isInline() {\n        return false;\n    }\n    // end of the hiercharchy, most implementations should treat it as there's nothing (upwards)\n    // beyond this point. For example, node.getTopLevelElement(), when performed inside a TableCellNode\n    // will return the immediate first child underneath TableCellNode instead of RootNode.\n    isShadowRoot() {\n        return false;\n    }\n    canMergeWith(node) {\n        return false;\n    }\n    extractWithChild(child, selection, destination) {\n        return false;\n    }\n    /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ constructor(key){\n        super(key);\n        this.__first = null;\n        this.__last = null;\n        this.__size = 0;\n        this.__format = 0;\n        this.__indent = 0;\n        this.__dir = null;\n    }\n}\nfunction $ed3b74ccfa001938$var$$isElementNode(node) {\n    return node instanceof $ed3b74ccfa001938$var$ElementNode;\n}\nfunction $ed3b74ccfa001938$var$isPointRemoved(point, nodesToRemoveKeySet, nodesToInsertKeySet) {\n    let node = point.getNode();\n    while(node){\n        const nodeKey = node.__key;\n        if (nodesToRemoveKeySet.has(nodeKey) && !nodesToInsertKeySet.has(nodeKey)) return true;\n        node = node.getParent();\n    }\n    return false;\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ /** @noInheritDoc */ class $ed3b74ccfa001938$var$RootNode extends $ed3b74ccfa001938$var$ElementNode {\n    /** @internal */ static getType() {\n        return \"root\";\n    }\n    static clone() {\n        return new $ed3b74ccfa001938$var$RootNode();\n    }\n    getTopLevelElementOrThrow() {\n        throw Error(`getTopLevelElementOrThrow: root nodes are not top level elements`);\n    }\n    getTextContent() {\n        const cachedText = this.__cachedText;\n        if ($ed3b74ccfa001938$var$isCurrentlyReadOnlyMode() || $ed3b74ccfa001938$var$getActiveEditor()._dirtyType === $ed3b74ccfa001938$var$NO_DIRTY_NODES) {\n            if (cachedText !== null) return cachedText;\n        }\n        return super.getTextContent();\n    }\n    remove() {\n        throw Error(`remove: cannot be called on root nodes`);\n    }\n    replace(node) {\n        throw Error(`replace: cannot be called on root nodes`);\n    }\n    insertBefore(nodeToInsert) {\n        throw Error(`insertBefore: cannot be called on root nodes`);\n    }\n    insertAfter(nodeToInsert) {\n        throw Error(`insertAfter: cannot be called on root nodes`);\n    }\n    updateDOM(prevNode, dom) {\n        return false;\n    }\n    append(...nodesToAppend) {\n        for(let i = 0; i < nodesToAppend.length; i++){\n            const node = nodesToAppend[i];\n            if (!$ed3b74ccfa001938$var$$isElementNode(node) && !$ed3b74ccfa001938$var$$isDecoratorNode(node)) throw Error(`rootNode.append: Only element or decorator nodes can be appended to the root node`);\n        }\n        return super.append(...nodesToAppend);\n    }\n    static importJSON(serializedNode) {\n        // We don't create a root, and instead use the existing root.\n        const node = $ed3b74ccfa001938$var$$getRoot();\n        node.setFormat(serializedNode.format);\n        node.setIndent(serializedNode.indent);\n        node.setDirection(serializedNode.direction);\n        return node;\n    }\n    exportJSON() {\n        return {\n            children: [],\n            direction: this.getDirection(),\n            format: this.getFormatType(),\n            indent: this.getIndent(),\n            type: \"root\",\n            version: 1\n        };\n    }\n    collapseAtStart() {\n        return true;\n    }\n    constructor(){\n        super(\"root\");\n        this.__cachedText = null;\n    }\n}\nfunction $ed3b74ccfa001938$var$$createRootNode() {\n    return new $ed3b74ccfa001938$var$RootNode();\n}\nfunction $ed3b74ccfa001938$var$$isRootNode(node) {\n    return node instanceof $ed3b74ccfa001938$var$RootNode;\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ function $ed3b74ccfa001938$var$editorStateHasDirtySelection(editorState, editor) {\n    const currentSelection = editor.getEditorState()._selection;\n    const pendingSelection = editorState._selection; // Check if we need to update because of changes in selection\n    if (pendingSelection !== null) {\n        if (pendingSelection.dirty || !pendingSelection.is(currentSelection)) return true;\n    } else if (currentSelection !== null) return true;\n    return false;\n}\nfunction $ed3b74ccfa001938$var$cloneEditorState(current) {\n    return new $ed3b74ccfa001938$var$EditorState(new Map(current._nodeMap));\n}\nfunction $ed3b74ccfa001938$var$createEmptyEditorState() {\n    return new $ed3b74ccfa001938$var$EditorState(new Map([\n        [\n            \"root\",\n            $ed3b74ccfa001938$var$$createRootNode()\n        ]\n    ]));\n}\nfunction $ed3b74ccfa001938$var$exportNodeToJSON(node) {\n    const serializedNode = node.exportJSON();\n    const nodeClass = node.constructor; // @ts-expect-error TODO Replace Class utility type with InstanceType\n    if (serializedNode.type !== nodeClass.getType()) throw Error(`LexicalNode: Node ${nodeClass.name} does not implement .exportJSON().`);\n     // @ts-expect-error TODO Replace Class utility type with InstanceType\n    const serializedChildren = serializedNode.children;\n    if ($ed3b74ccfa001938$var$$isElementNode(node)) {\n        if (!Array.isArray(serializedChildren)) throw Error(`LexicalNode: Node ${nodeClass.name} is an element but .exportJSON() does not have a children array.`);\n        const children = node.getChildren();\n        for(let i = 0; i < children.length; i++){\n            const child = children[i];\n            const serializedChildNode = $ed3b74ccfa001938$var$exportNodeToJSON(child);\n            serializedChildren.push(serializedChildNode);\n        }\n    } // @ts-expect-error\n    return serializedNode;\n}\nclass $ed3b74ccfa001938$var$EditorState {\n    isEmpty() {\n        return this._nodeMap.size === 1 && this._selection === null;\n    }\n    read(callbackFn) {\n        return $ed3b74ccfa001938$var$readEditorState(this, callbackFn);\n    }\n    clone(selection) {\n        const editorState = new $ed3b74ccfa001938$var$EditorState(this._nodeMap, selection === undefined ? this._selection : selection);\n        editorState._readOnly = true;\n        return editorState;\n    }\n    toJSON() {\n        return $ed3b74ccfa001938$var$readEditorState(this, ()=>({\n                root: $ed3b74ccfa001938$var$exportNodeToJSON($ed3b74ccfa001938$var$$getRoot())\n            }));\n    }\n    constructor(nodeMap, selection){\n        this._nodeMap = nodeMap;\n        this._selection = selection || null;\n        this._flushSync = false;\n        this._readOnly = false;\n    }\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ /** @noInheritDoc */ class $ed3b74ccfa001938$var$LineBreakNode extends $ed3b74ccfa001938$var$LexicalNode {\n    static getType() {\n        return \"linebreak\";\n    }\n    static clone(node) {\n        return new $ed3b74ccfa001938$var$LineBreakNode(node.__key);\n    }\n    getTextContent() {\n        return \"\\n\";\n    }\n    createDOM() {\n        return document.createElement(\"br\");\n    }\n    updateDOM() {\n        return false;\n    }\n    static importDOM() {\n        return {\n            br: (node)=>{\n                const parentElement = node.parentElement; // If the <br> is the only child, then skip including it\n                if (parentElement != null && parentElement.firstChild === node && parentElement.lastChild === node) return null;\n                return {\n                    conversion: $ed3b74ccfa001938$var$convertLineBreakElement,\n                    priority: 0\n                };\n            }\n        };\n    }\n    static importJSON(serializedLineBreakNode) {\n        return $ed3b74ccfa001938$var$$createLineBreakNode();\n    }\n    exportJSON() {\n        return {\n            type: \"linebreak\",\n            version: 1\n        };\n    }\n    constructor(key){\n        super(key);\n    }\n}\nfunction $ed3b74ccfa001938$var$convertLineBreakElement(node) {\n    return {\n        node: $ed3b74ccfa001938$var$$createLineBreakNode()\n    };\n}\nfunction $ed3b74ccfa001938$var$$createLineBreakNode() {\n    return $ed3b74ccfa001938$var$$applyNodeReplacement(new $ed3b74ccfa001938$var$LineBreakNode());\n}\nfunction $ed3b74ccfa001938$var$$isLineBreakNode(node) {\n    return node instanceof $ed3b74ccfa001938$var$LineBreakNode;\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ function $ed3b74ccfa001938$var$getElementOuterTag(node, format) {\n    if (format & $ed3b74ccfa001938$var$IS_CODE) return \"code\";\n    if (format & $ed3b74ccfa001938$var$IS_HIGHLIGHT) return \"mark\";\n    if (format & $ed3b74ccfa001938$var$IS_SUBSCRIPT) return \"sub\";\n    if (format & $ed3b74ccfa001938$var$IS_SUPERSCRIPT) return \"sup\";\n    return null;\n}\nfunction $ed3b74ccfa001938$var$getElementInnerTag(node, format) {\n    if (format & $ed3b74ccfa001938$var$IS_BOLD) return \"strong\";\n    if (format & $ed3b74ccfa001938$var$IS_ITALIC) return \"em\";\n    return \"span\";\n}\nfunction $ed3b74ccfa001938$var$setTextThemeClassNames(tag, prevFormat, nextFormat, dom, textClassNames) {\n    const domClassList = dom.classList; // Firstly we handle the base theme.\n    let classNames = $ed3b74ccfa001938$var$getCachedClassNameArray(textClassNames, \"base\");\n    if (classNames !== undefined) domClassList.add(...classNames);\n     // Secondly we handle the special case: underline + strikethrough.\n    // We have to do this as we need a way to compose the fact that\n    // the same CSS property will need to be used: text-decoration.\n    // In an ideal world we shouldn't have to do this, but there's no\n    // easy workaround for many atomic CSS systems today.\n    classNames = $ed3b74ccfa001938$var$getCachedClassNameArray(textClassNames, \"underlineStrikethrough\");\n    let hasUnderlineStrikethrough = false;\n    const prevUnderlineStrikethrough = prevFormat & $ed3b74ccfa001938$var$IS_UNDERLINE && prevFormat & $ed3b74ccfa001938$var$IS_STRIKETHROUGH;\n    const nextUnderlineStrikethrough = nextFormat & $ed3b74ccfa001938$var$IS_UNDERLINE && nextFormat & $ed3b74ccfa001938$var$IS_STRIKETHROUGH;\n    if (classNames !== undefined) {\n        if (nextUnderlineStrikethrough) {\n            hasUnderlineStrikethrough = true;\n            if (!prevUnderlineStrikethrough) domClassList.add(...classNames);\n        } else if (prevUnderlineStrikethrough) domClassList.remove(...classNames);\n    }\n    for(const key in $ed3b74ccfa001938$var$TEXT_TYPE_TO_FORMAT){\n        const format = key;\n        const flag = $ed3b74ccfa001938$var$TEXT_TYPE_TO_FORMAT[format];\n        classNames = $ed3b74ccfa001938$var$getCachedClassNameArray(textClassNames, key);\n        if (classNames !== undefined) {\n            if (nextFormat & flag) {\n                if (hasUnderlineStrikethrough && (key === \"underline\" || key === \"strikethrough\")) {\n                    if (prevFormat & flag) domClassList.remove(...classNames);\n                    continue;\n                }\n                if ((prevFormat & flag) === 0 || prevUnderlineStrikethrough && key === \"underline\" || key === \"strikethrough\") domClassList.add(...classNames);\n            } else if (prevFormat & flag) domClassList.remove(...classNames);\n        }\n    }\n}\nfunction $ed3b74ccfa001938$var$diffComposedText(a, b) {\n    const aLength = a.length;\n    const bLength = b.length;\n    let left = 0;\n    let right = 0;\n    while(left < aLength && left < bLength && a[left] === b[left])left++;\n    while(right + left < aLength && right + left < bLength && a[aLength - right - 1] === b[bLength - right - 1])right++;\n    return [\n        left,\n        aLength - left - right,\n        b.slice(left, bLength - right)\n    ];\n}\nfunction $ed3b74ccfa001938$var$setTextContent(nextText, dom, node) {\n    const firstChild = dom.firstChild;\n    const isComposing = node.isComposing(); // Always add a suffix if we're composing a node\n    const suffix = isComposing ? $ed3b74ccfa001938$var$COMPOSITION_SUFFIX : \"\";\n    const text = nextText + suffix;\n    if (firstChild == null) dom.textContent = text;\n    else {\n        const nodeValue = firstChild.nodeValue;\n        if (nodeValue !== text) {\n            if (isComposing || $ed3b74ccfa001938$var$IS_FIREFOX) {\n                // We also use the diff composed text for general text in FF to avoid\n                // the spellcheck red line from flickering.\n                const [index, remove, insert] = $ed3b74ccfa001938$var$diffComposedText(nodeValue, text);\n                if (remove !== 0) // @ts-expect-error\n                firstChild.deleteData(index, remove);\n                 // @ts-expect-error\n                firstChild.insertData(index, insert);\n            } else firstChild.nodeValue = text;\n        }\n    }\n}\nfunction $ed3b74ccfa001938$var$createTextInnerDOM(innerDOM, node, innerTag, format, text, config) {\n    $ed3b74ccfa001938$var$setTextContent(text, innerDOM, node);\n    const theme = config.theme; // Apply theme class names\n    const textClassNames = theme.text;\n    if (textClassNames !== undefined) $ed3b74ccfa001938$var$setTextThemeClassNames(innerTag, 0, format, innerDOM, textClassNames);\n}\nfunction $ed3b74ccfa001938$var$wrapElementWith(element, tag) {\n    const el = document.createElement(tag);\n    el.appendChild(element);\n    return el;\n}\n/** @noInheritDoc */ class $ed3b74ccfa001938$var$TextNode extends $ed3b74ccfa001938$var$LexicalNode {\n    /** @internal */ /** @internal */ /** @internal */ /** @internal */ static getType() {\n        return \"text\";\n    }\n    static clone(node) {\n        return new $ed3b74ccfa001938$var$TextNode(node.__text, node.__key);\n    }\n    getFormat() {\n        const self = this.getLatest();\n        return self.__format;\n    }\n    getDetail() {\n        const self = this.getLatest();\n        return self.__detail;\n    }\n    getMode() {\n        const self = this.getLatest();\n        return $ed3b74ccfa001938$var$TEXT_TYPE_TO_MODE[self.__mode];\n    }\n    getStyle() {\n        const self = this.getLatest();\n        return self.__style;\n    }\n    isToken() {\n        const self = this.getLatest();\n        return self.__mode === $ed3b74ccfa001938$var$IS_TOKEN;\n    }\n    isComposing() {\n        return this.__key === $ed3b74ccfa001938$var$$getCompositionKey();\n    }\n    isSegmented() {\n        const self = this.getLatest();\n        return self.__mode === $ed3b74ccfa001938$var$IS_SEGMENTED;\n    }\n    isDirectionless() {\n        const self = this.getLatest();\n        return (self.__detail & $ed3b74ccfa001938$var$IS_DIRECTIONLESS) !== 0;\n    }\n    isUnmergeable() {\n        const self = this.getLatest();\n        return (self.__detail & $ed3b74ccfa001938$var$IS_UNMERGEABLE) !== 0;\n    }\n    hasFormat(type) {\n        const formatFlag = $ed3b74ccfa001938$var$TEXT_TYPE_TO_FORMAT[type];\n        return (this.getFormat() & formatFlag) !== 0;\n    }\n    isSimpleText() {\n        return this.__type === \"text\" && this.__mode === 0;\n    }\n    getTextContent() {\n        const self = this.getLatest();\n        return self.__text;\n    }\n    getFormatFlags(type, alignWithFormat) {\n        const self = this.getLatest();\n        const format = self.__format;\n        return $ed3b74ccfa001938$var$toggleTextFormatType(format, type, alignWithFormat);\n    }\n    createDOM(config) {\n        const format = this.__format;\n        const outerTag = $ed3b74ccfa001938$var$getElementOuterTag(this, format);\n        const innerTag = $ed3b74ccfa001938$var$getElementInnerTag(this, format);\n        const tag = outerTag === null ? innerTag : outerTag;\n        const dom = document.createElement(tag);\n        let innerDOM = dom;\n        if (outerTag !== null) {\n            innerDOM = document.createElement(innerTag);\n            dom.appendChild(innerDOM);\n        }\n        const text = this.__text;\n        $ed3b74ccfa001938$var$createTextInnerDOM(innerDOM, this, innerTag, format, text, config);\n        const style = this.__style;\n        if (style !== \"\") dom.style.cssText = style;\n        return dom;\n    }\n    updateDOM(prevNode, dom, config) {\n        const nextText = this.__text;\n        const prevFormat = prevNode.__format;\n        const nextFormat = this.__format;\n        const prevOuterTag = $ed3b74ccfa001938$var$getElementOuterTag(this, prevFormat);\n        const nextOuterTag = $ed3b74ccfa001938$var$getElementOuterTag(this, nextFormat);\n        const prevInnerTag = $ed3b74ccfa001938$var$getElementInnerTag(this, prevFormat);\n        const nextInnerTag = $ed3b74ccfa001938$var$getElementInnerTag(this, nextFormat);\n        const prevTag = prevOuterTag === null ? prevInnerTag : prevOuterTag;\n        const nextTag = nextOuterTag === null ? nextInnerTag : nextOuterTag;\n        if (prevTag !== nextTag) return true;\n        if (prevOuterTag === nextOuterTag && prevInnerTag !== nextInnerTag) {\n            // should always be an element\n            const prevInnerDOM = dom.firstChild;\n            if (prevInnerDOM == null) throw Error(`updateDOM: prevInnerDOM is null or undefined`);\n            const nextInnerDOM = document.createElement(nextInnerTag);\n            $ed3b74ccfa001938$var$createTextInnerDOM(nextInnerDOM, this, nextInnerTag, nextFormat, nextText, config);\n            dom.replaceChild(nextInnerDOM, prevInnerDOM);\n            return false;\n        }\n        let innerDOM = dom;\n        if (nextOuterTag !== null) {\n            if (prevOuterTag !== null) {\n                innerDOM = dom.firstChild;\n                if (innerDOM == null) throw Error(`updateDOM: innerDOM is null or undefined`);\n            }\n        }\n        $ed3b74ccfa001938$var$setTextContent(nextText, innerDOM, this);\n        const theme = config.theme; // Apply theme class names\n        const textClassNames = theme.text;\n        if (textClassNames !== undefined && prevFormat !== nextFormat) $ed3b74ccfa001938$var$setTextThemeClassNames(nextInnerTag, prevFormat, nextFormat, innerDOM, textClassNames);\n        const prevStyle = prevNode.__style;\n        const nextStyle = this.__style;\n        if (prevStyle !== nextStyle) dom.style.cssText = nextStyle;\n        return false;\n    }\n    static importDOM() {\n        return {\n            \"#text\": ()=>({\n                    conversion: $ed3b74ccfa001938$var$convertTextDOMNode,\n                    priority: 0\n                }),\n            b: ()=>({\n                    conversion: $ed3b74ccfa001938$var$convertBringAttentionToElement,\n                    priority: 0\n                }),\n            br: ()=>({\n                    conversion: $ed3b74ccfa001938$var$convertLineBreakToElement,\n                    priority: 0\n                }),\n            code: ()=>({\n                    conversion: $ed3b74ccfa001938$var$convertTextFormatElement,\n                    priority: 0\n                }),\n            em: ()=>({\n                    conversion: $ed3b74ccfa001938$var$convertTextFormatElement,\n                    priority: 0\n                }),\n            i: ()=>({\n                    conversion: $ed3b74ccfa001938$var$convertTextFormatElement,\n                    priority: 0\n                }),\n            s: ()=>({\n                    conversion: $ed3b74ccfa001938$var$convertTextFormatElement,\n                    priority: 0\n                }),\n            span: ()=>({\n                    conversion: $ed3b74ccfa001938$var$convertSpanElement,\n                    priority: 0\n                }),\n            strong: ()=>({\n                    conversion: $ed3b74ccfa001938$var$convertTextFormatElement,\n                    priority: 0\n                }),\n            sub: ()=>({\n                    conversion: $ed3b74ccfa001938$var$convertTextFormatElement,\n                    priority: 0\n                }),\n            sup: ()=>({\n                    conversion: $ed3b74ccfa001938$var$convertTextFormatElement,\n                    priority: 0\n                }),\n            u: ()=>({\n                    conversion: $ed3b74ccfa001938$var$convertTextFormatElement,\n                    priority: 0\n                })\n        };\n    }\n    static importJSON(serializedNode) {\n        const node = $ed3b74ccfa001938$var$$createTextNode(serializedNode.text);\n        node.setFormat(serializedNode.format);\n        node.setDetail(serializedNode.detail);\n        node.setMode(serializedNode.mode);\n        node.setStyle(serializedNode.style);\n        return node;\n    }\n    // for headless mode where people might use Lexical to generate\n    // HTML content and not have the ability to use CSS classes.\n    exportDOM(editor) {\n        let { element: element  } = super.exportDOM(editor); // This is the only way to properly add support for most clients,\n        // even if it's semantically incorrect to have to resort to using\n        // <b>, <u>, <s>, <i> elements.\n        if (element !== null) {\n            if (this.hasFormat(\"bold\")) element = $ed3b74ccfa001938$var$wrapElementWith(element, \"b\");\n            if (this.hasFormat(\"italic\")) element = $ed3b74ccfa001938$var$wrapElementWith(element, \"i\");\n            if (this.hasFormat(\"strikethrough\")) element = $ed3b74ccfa001938$var$wrapElementWith(element, \"s\");\n            if (this.hasFormat(\"underline\")) element = $ed3b74ccfa001938$var$wrapElementWith(element, \"u\");\n        }\n        return {\n            element: element\n        };\n    }\n    exportJSON() {\n        return {\n            detail: this.getDetail(),\n            format: this.getFormat(),\n            mode: this.getMode(),\n            style: this.getStyle(),\n            text: this.getTextContent(),\n            type: \"text\",\n            version: 1\n        };\n    }\n    selectionTransform(prevSelection, nextSelection) {\n        return;\n    }\n    setFormat(format) {\n        const self = this.getWritable();\n        self.__format = typeof format === \"string\" ? $ed3b74ccfa001938$var$TEXT_TYPE_TO_FORMAT[format] : format;\n        return self;\n    }\n    setDetail(detail) {\n        const self = this.getWritable();\n        self.__detail = typeof detail === \"string\" ? $ed3b74ccfa001938$var$DETAIL_TYPE_TO_DETAIL[detail] : detail;\n        return self;\n    }\n    setStyle(style) {\n        const self = this.getWritable();\n        self.__style = style;\n        return self;\n    }\n    toggleFormat(type) {\n        const formatFlag = $ed3b74ccfa001938$var$TEXT_TYPE_TO_FORMAT[type];\n        return this.setFormat(this.getFormat() ^ formatFlag);\n    }\n    toggleDirectionless() {\n        const self = this.getWritable();\n        self.__detail ^= $ed3b74ccfa001938$var$IS_DIRECTIONLESS;\n        return self;\n    }\n    toggleUnmergeable() {\n        const self = this.getWritable();\n        self.__detail ^= $ed3b74ccfa001938$var$IS_UNMERGEABLE;\n        return self;\n    }\n    setMode(type) {\n        const mode = $ed3b74ccfa001938$var$TEXT_MODE_TO_TYPE[type];\n        if (this.__mode === mode) return this;\n        const self = this.getWritable();\n        self.__mode = mode;\n        return self;\n    }\n    setTextContent(text) {\n        if (this.__text === text) return this;\n        const self = this.getWritable();\n        self.__text = text;\n        return self;\n    }\n    select(_anchorOffset, _focusOffset) {\n        $ed3b74ccfa001938$var$errorOnReadOnly();\n        let anchorOffset = _anchorOffset;\n        let focusOffset = _focusOffset;\n        const selection = $ed3b74ccfa001938$var$$getSelection();\n        const text = this.getTextContent();\n        const key = this.__key;\n        if (typeof text === \"string\") {\n            const lastOffset = text.length;\n            if (anchorOffset === undefined) anchorOffset = lastOffset;\n            if (focusOffset === undefined) focusOffset = lastOffset;\n        } else {\n            anchorOffset = 0;\n            focusOffset = 0;\n        }\n        if (!$ed3b74ccfa001938$var$$isRangeSelection(selection)) return $ed3b74ccfa001938$var$internalMakeRangeSelection(key, anchorOffset, key, focusOffset, \"text\", \"text\");\n        else {\n            const compositionKey = $ed3b74ccfa001938$var$$getCompositionKey();\n            if (compositionKey === selection.anchor.key || compositionKey === selection.focus.key) $ed3b74ccfa001938$var$$setCompositionKey(key);\n            selection.setTextNodeRange(this, anchorOffset, this, focusOffset);\n        }\n        return selection;\n    }\n    spliceText(offset, delCount, newText, moveSelection) {\n        const writableSelf = this.getWritable();\n        const text = writableSelf.__text;\n        const handledTextLength = newText.length;\n        let index = offset;\n        if (index < 0) {\n            index = handledTextLength + index;\n            if (index < 0) index = 0;\n        }\n        const selection = $ed3b74ccfa001938$var$$getSelection();\n        if (moveSelection && $ed3b74ccfa001938$var$$isRangeSelection(selection)) {\n            const newOffset = offset + handledTextLength;\n            selection.setTextNodeRange(writableSelf, newOffset, writableSelf, newOffset);\n        }\n        const updatedText = text.slice(0, index) + newText + text.slice(index + delCount);\n        writableSelf.__text = updatedText;\n        return writableSelf;\n    }\n    canInsertTextBefore() {\n        return true;\n    }\n    canInsertTextAfter() {\n        return true;\n    }\n    canContainTabs() {\n        return false;\n    }\n    splitText(...splitOffsets) {\n        $ed3b74ccfa001938$var$errorOnReadOnly();\n        const self = this.getLatest();\n        const textContent = self.getTextContent();\n        const key = self.__key;\n        const compositionKey = $ed3b74ccfa001938$var$$getCompositionKey();\n        const offsetsSet = new Set(splitOffsets);\n        const parts = [];\n        const textLength = textContent.length;\n        let string = \"\";\n        for(let i = 0; i < textLength; i++){\n            if (string !== \"\" && offsetsSet.has(i)) {\n                parts.push(string);\n                string = \"\";\n            }\n            string += textContent[i];\n        }\n        if (string !== \"\") parts.push(string);\n        const partsLength = parts.length;\n        if (partsLength === 0) return [];\n        else if (parts[0] === textContent) return [\n            self\n        ];\n        const firstPart = parts[0];\n        const parent = self.getParentOrThrow();\n        let writableNode;\n        const format = self.getFormat();\n        const style = self.getStyle();\n        const detail = self.__detail;\n        let hasReplacedSelf = false;\n        if (self.isSegmented()) {\n            // Create a new TextNode\n            writableNode = $ed3b74ccfa001938$var$$createTextNode(firstPart);\n            writableNode.__format = format;\n            writableNode.__style = style;\n            writableNode.__detail = detail;\n            hasReplacedSelf = true;\n        } else {\n            // For the first part, update the existing node\n            writableNode = self.getWritable();\n            writableNode.__text = firstPart;\n        } // Handle selection\n        const selection = $ed3b74ccfa001938$var$$getSelection(); // Then handle all other parts\n        const splitNodes = [\n            writableNode\n        ];\n        let textSize = firstPart.length;\n        for(let i = 1; i < partsLength; i++){\n            const part = parts[i];\n            const partSize = part.length;\n            const sibling = $ed3b74ccfa001938$var$$createTextNode(part).getWritable();\n            sibling.__format = format;\n            sibling.__style = style;\n            sibling.__detail = detail;\n            const siblingKey = sibling.__key;\n            const nextTextSize = textSize + partSize;\n            if ($ed3b74ccfa001938$var$$isRangeSelection(selection)) {\n                const anchor = selection.anchor;\n                const focus = selection.focus;\n                if (anchor.key === key && anchor.type === \"text\" && anchor.offset > textSize && anchor.offset <= nextTextSize) {\n                    anchor.key = siblingKey;\n                    anchor.offset -= textSize;\n                    selection.dirty = true;\n                }\n                if (focus.key === key && focus.type === \"text\" && focus.offset > textSize && focus.offset <= nextTextSize) {\n                    focus.key = siblingKey;\n                    focus.offset -= textSize;\n                    selection.dirty = true;\n                }\n            }\n            if (compositionKey === key) $ed3b74ccfa001938$var$$setCompositionKey(siblingKey);\n            textSize = nextTextSize;\n            splitNodes.push(sibling);\n        } // Insert the nodes into the parent's children\n        $ed3b74ccfa001938$var$internalMarkSiblingsAsDirty(this);\n        const writableParent = parent.getWritable();\n        const insertionIndex = this.getIndexWithinParent();\n        if (hasReplacedSelf) {\n            writableParent.splice(insertionIndex, 0, splitNodes);\n            this.remove();\n        } else writableParent.splice(insertionIndex, 1, splitNodes);\n        if ($ed3b74ccfa001938$var$$isRangeSelection(selection)) $ed3b74ccfa001938$var$$updateElementSelectionOnCreateDeleteNode(selection, parent, insertionIndex, partsLength - 1);\n        return splitNodes;\n    }\n    mergeWithSibling(target) {\n        const isBefore = target === this.getPreviousSibling();\n        if (!isBefore && target !== this.getNextSibling()) throw Error(`mergeWithSibling: sibling must be a previous or next sibling`);\n        const key = this.__key;\n        const targetKey = target.__key;\n        const text = this.__text;\n        const textLength = text.length;\n        const compositionKey = $ed3b74ccfa001938$var$$getCompositionKey();\n        if (compositionKey === targetKey) $ed3b74ccfa001938$var$$setCompositionKey(key);\n        const selection = $ed3b74ccfa001938$var$$getSelection();\n        if ($ed3b74ccfa001938$var$$isRangeSelection(selection)) {\n            const anchor = selection.anchor;\n            const focus = selection.focus;\n            if (anchor !== null && anchor.key === targetKey) {\n                $ed3b74ccfa001938$var$adjustPointOffsetForMergedSibling(anchor, isBefore, key, target, textLength);\n                selection.dirty = true;\n            }\n            if (focus !== null && focus.key === targetKey) {\n                $ed3b74ccfa001938$var$adjustPointOffsetForMergedSibling(focus, isBefore, key, target, textLength);\n                selection.dirty = true;\n            }\n        }\n        const targetText = target.__text;\n        const newText = isBefore ? targetText + text : text + targetText;\n        this.setTextContent(newText);\n        const writableSelf = this.getWritable();\n        target.remove();\n        return writableSelf;\n    }\n    isTextEntity() {\n        return false;\n    }\n    constructor(text, key){\n        super(key);\n        this.__text = text;\n        this.__format = 0;\n        this.__style = \"\";\n        this.__mode = 0;\n        this.__detail = 0;\n    }\n}\nfunction $ed3b74ccfa001938$var$convertSpanElement(domNode) {\n    // domNode is a <span> since we matched it by nodeName\n    const span = domNode; // Google Docs uses span tags + font-weight for bold text\n    const hasBoldFontWeight = span.style.fontWeight === \"700\"; // Google Docs uses span tags + text-decoration: line-through for strikethrough text\n    const hasLinethroughTextDecoration = span.style.textDecoration === \"line-through\"; // Google Docs uses span tags + font-style for italic text\n    const hasItalicFontStyle = span.style.fontStyle === \"italic\"; // Google Docs uses span tags + text-decoration: underline for underline text\n    const hasUnderlineTextDecoration = span.style.textDecoration === \"underline\"; // Google Docs uses span tags + vertical-align to specify subscript and superscript\n    const verticalAlign = span.style.verticalAlign;\n    return {\n        forChild: (lexicalNode)=>{\n            if (!$ed3b74ccfa001938$var$$isTextNode(lexicalNode)) return lexicalNode;\n            if (hasBoldFontWeight) lexicalNode.toggleFormat(\"bold\");\n            if (hasLinethroughTextDecoration) lexicalNode.toggleFormat(\"strikethrough\");\n            if (hasItalicFontStyle) lexicalNode.toggleFormat(\"italic\");\n            if (hasUnderlineTextDecoration) lexicalNode.toggleFormat(\"underline\");\n            if (verticalAlign === \"sub\") lexicalNode.toggleFormat(\"subscript\");\n            if (verticalAlign === \"super\") lexicalNode.toggleFormat(\"superscript\");\n            return lexicalNode;\n        },\n        node: null\n    };\n}\nfunction $ed3b74ccfa001938$var$convertLineBreakToElement() {\n    return {\n        node: $ed3b74ccfa001938$var$$createLineBreakNode()\n    };\n}\nfunction $ed3b74ccfa001938$var$convertBringAttentionToElement(domNode) {\n    // domNode is a <b> since we matched it by nodeName\n    const b = domNode; // Google Docs wraps all copied HTML in a <b> with font-weight normal\n    const hasNormalFontWeight = b.style.fontWeight === \"normal\";\n    return {\n        forChild: (lexicalNode)=>{\n            if ($ed3b74ccfa001938$var$$isTextNode(lexicalNode) && !hasNormalFontWeight) lexicalNode.toggleFormat(\"bold\");\n            return lexicalNode;\n        },\n        node: null\n    };\n}\nfunction $ed3b74ccfa001938$var$convertTextDOMNode(domNode, _parent, preformatted) {\n    let textContent = domNode.textContent || \"\";\n    if (!preformatted && /\\n/.test(textContent)) {\n        textContent = textContent.replace(/\\r?\\n/gm, \" \");\n        if (textContent.trim().length === 0) return {\n            node: null\n        };\n    }\n    return {\n        node: $ed3b74ccfa001938$var$$createTextNode(textContent)\n    };\n}\nconst $ed3b74ccfa001938$var$nodeNameToTextFormat = {\n    code: \"code\",\n    em: \"italic\",\n    i: \"italic\",\n    s: \"strikethrough\",\n    strong: \"bold\",\n    sub: \"subscript\",\n    sup: \"superscript\",\n    u: \"underline\"\n};\nfunction $ed3b74ccfa001938$var$convertTextFormatElement(domNode) {\n    const format = $ed3b74ccfa001938$var$nodeNameToTextFormat[domNode.nodeName.toLowerCase()];\n    if (format === undefined) return {\n        node: null\n    };\n    return {\n        forChild: (lexicalNode)=>{\n            if ($ed3b74ccfa001938$var$$isTextNode(lexicalNode) && !lexicalNode.hasFormat(format)) lexicalNode.toggleFormat(format);\n            return lexicalNode;\n        },\n        node: null\n    };\n}\nfunction $ed3b74ccfa001938$var$$createTextNode(text = \"\") {\n    return $ed3b74ccfa001938$var$$applyNodeReplacement(new $ed3b74ccfa001938$var$TextNode(text));\n}\nfunction $ed3b74ccfa001938$var$$isTextNode(node) {\n    return node instanceof $ed3b74ccfa001938$var$TextNode;\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ /** @noInheritDoc */ class $ed3b74ccfa001938$var$ParagraphNode extends $ed3b74ccfa001938$var$ElementNode {\n    static getType() {\n        return \"paragraph\";\n    }\n    static clone(node) {\n        return new $ed3b74ccfa001938$var$ParagraphNode(node.__key);\n    }\n    createDOM(config) {\n        const dom = document.createElement(\"p\");\n        const classNames = $ed3b74ccfa001938$var$getCachedClassNameArray(config.theme, \"paragraph\");\n        if (classNames !== undefined) {\n            const domClassList = dom.classList;\n            domClassList.add(...classNames);\n        }\n        return dom;\n    }\n    updateDOM(prevNode, dom, config) {\n        return false;\n    }\n    static importDOM() {\n        return {\n            p: (node)=>({\n                    conversion: $ed3b74ccfa001938$var$convertParagraphElement,\n                    priority: 0\n                })\n        };\n    }\n    exportDOM(editor) {\n        const { element: element  } = super.exportDOM(editor);\n        if (element && this.isEmpty()) element.append(document.createElement(\"br\"));\n        if (element) {\n            const formatType = this.getFormatType();\n            element.style.textAlign = formatType;\n            const direction = this.getDirection();\n            if (direction) element.dir = direction;\n            const indent = this.getIndent();\n            if (indent > 0) // padding-inline-start is not widely supported in email HTML, but\n            // Lexical Reconciler uses padding-inline-start. Using text-indent instead.\n            element.style.textIndent = `${indent * 20}px`;\n        }\n        return {\n            element: element\n        };\n    }\n    static importJSON(serializedNode) {\n        const node = $ed3b74ccfa001938$var$$createParagraphNode();\n        node.setFormat(serializedNode.format);\n        node.setIndent(serializedNode.indent);\n        node.setDirection(serializedNode.direction);\n        return node;\n    }\n    exportJSON() {\n        return {\n            ...super.exportJSON(),\n            type: \"paragraph\",\n            version: 1\n        };\n    }\n    insertNewAfter(_, restoreSelection) {\n        const newElement = $ed3b74ccfa001938$var$$createParagraphNode();\n        const direction = this.getDirection();\n        newElement.setDirection(direction);\n        this.insertAfter(newElement, restoreSelection);\n        return newElement;\n    }\n    collapseAtStart() {\n        const children = this.getChildren(); // If we have an empty (trimmed) first paragraph and try and remove it,\n        // delete the paragraph as long as we have another sibling to go to\n        if (children.length === 0 || $ed3b74ccfa001938$var$$isTextNode(children[0]) && children[0].getTextContent().trim() === \"\") {\n            const nextSibling = this.getNextSibling();\n            if (nextSibling !== null) {\n                this.selectNext();\n                this.remove();\n                return true;\n            }\n            const prevSibling = this.getPreviousSibling();\n            if (prevSibling !== null) {\n                this.selectPrevious();\n                this.remove();\n                return true;\n            }\n        }\n        return false;\n    }\n}\nfunction $ed3b74ccfa001938$var$convertParagraphElement(element) {\n    const node = $ed3b74ccfa001938$var$$createParagraphNode();\n    if (element.style) {\n        node.setFormat(element.style.textAlign);\n        const indent = parseInt(element.style.textIndent, 10) / 20;\n        if (indent > 0) node.setIndent(indent);\n    }\n    return {\n        node: node\n    };\n}\nfunction $ed3b74ccfa001938$var$$createParagraphNode() {\n    return $ed3b74ccfa001938$var$$applyNodeReplacement(new $ed3b74ccfa001938$var$ParagraphNode());\n}\nfunction $ed3b74ccfa001938$var$$isParagraphNode(node) {\n    return node instanceof $ed3b74ccfa001938$var$ParagraphNode;\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ const $ed3b74ccfa001938$var$COMMAND_PRIORITY_EDITOR = 0;\nconst $ed3b74ccfa001938$var$COMMAND_PRIORITY_LOW = 1;\nconst $ed3b74ccfa001938$var$COMMAND_PRIORITY_NORMAL = 2;\nconst $ed3b74ccfa001938$var$COMMAND_PRIORITY_HIGH = 3;\nconst $ed3b74ccfa001938$var$COMMAND_PRIORITY_CRITICAL = 4; // eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction $ed3b74ccfa001938$var$resetEditor(editor, prevRootElement, nextRootElement, pendingEditorState) {\n    const keyNodeMap = editor._keyToDOMMap;\n    keyNodeMap.clear();\n    editor._editorState = $ed3b74ccfa001938$var$createEmptyEditorState();\n    editor._pendingEditorState = pendingEditorState;\n    editor._compositionKey = null;\n    editor._dirtyType = $ed3b74ccfa001938$var$NO_DIRTY_NODES;\n    editor._cloneNotNeeded.clear();\n    editor._dirtyLeaves = new Set();\n    editor._dirtyElements.clear();\n    editor._normalizedNodes = new Set();\n    editor._updateTags = new Set();\n    editor._updates = [];\n    editor._blockCursorElement = null;\n    const observer = editor._observer;\n    if (observer !== null) {\n        observer.disconnect();\n        editor._observer = null;\n    } // Remove all the DOM nodes from the root element\n    if (prevRootElement !== null) prevRootElement.textContent = \"\";\n    if (nextRootElement !== null) {\n        nextRootElement.textContent = \"\";\n        keyNodeMap.set(\"root\", nextRootElement);\n    }\n}\nfunction $ed3b74ccfa001938$var$initializeConversionCache(nodes) {\n    const conversionCache = new Map();\n    const handledConversions = new Set();\n    nodes.forEach((node)=>{\n        const importDOM = node.klass.importDOM != null ? node.klass.importDOM.bind(node.klass) : null;\n        if (importDOM == null || handledConversions.has(importDOM)) return;\n        handledConversions.add(importDOM);\n        const map = importDOM();\n        if (map !== null) Object.keys(map).forEach((key)=>{\n            let currentCache = conversionCache.get(key);\n            if (currentCache === undefined) {\n                currentCache = [];\n                conversionCache.set(key, currentCache);\n            }\n            currentCache.push(map[key]);\n        });\n    });\n    return conversionCache;\n}\n/**\n * Creates a new LexicalEditor attached to a single contentEditable (provided in the config). This is\n * the lowest-level initialization API for a LexicalEditor. If you're using React or another framework,\n * consider using the appropriate abstractions, such as LexicalComposer\n * @param editorConfig - the editor configuration.\n * @returns a LexicalEditor instance\n */ function $ed3b74ccfa001938$var$createEditor(editorConfig) {\n    const config = editorConfig || {};\n    const activeEditor = $ed3b74ccfa001938$var$internalGetActiveEditor();\n    const theme = config.theme || {};\n    const parentEditor = editorConfig === undefined ? activeEditor : config.parentEditor || null;\n    const disableEvents = config.disableEvents || false;\n    const editorState = $ed3b74ccfa001938$var$createEmptyEditorState();\n    const namespace = config.namespace || (parentEditor !== null ? parentEditor._config.namespace : $ed3b74ccfa001938$var$createUID());\n    const initialEditorState = config.editorState;\n    const nodes = [\n        $ed3b74ccfa001938$var$RootNode,\n        $ed3b74ccfa001938$var$TextNode,\n        $ed3b74ccfa001938$var$LineBreakNode,\n        $ed3b74ccfa001938$var$ParagraphNode,\n        ...config.nodes || []\n    ];\n    const onError = config.onError;\n    const isEditable = config.editable !== undefined ? config.editable : true;\n    let registeredNodes;\n    if (editorConfig === undefined && activeEditor !== null) registeredNodes = activeEditor._nodes;\n    else {\n        registeredNodes = new Map();\n        for(let i = 0; i < nodes.length; i++){\n            let klass = nodes[i];\n            let replacementClass = null;\n            let replacementKlass = null;\n            if (typeof klass !== \"function\") {\n                const options = klass;\n                klass = options.replace;\n                replacementClass = options.with;\n                replacementKlass = options.withKlass ? options.withKlass : null;\n            } // Ensure custom nodes implement required methods.\n            {\n                const name = klass.name;\n                if (name !== \"RootNode\") {\n                    const proto = klass.prototype;\n                    [\n                        \"getType\",\n                        \"clone\"\n                    ].forEach((method)=>{\n                        // eslint-disable-next-line no-prototype-builtins\n                        if (!klass.hasOwnProperty(method)) console.warn(`${name} must implement static \"${method}\" method`);\n                    });\n                    if (!klass.hasOwnProperty(\"importDOM\") && // eslint-disable-next-line no-prototype-builtins\n                    klass.hasOwnProperty(\"exportDOM\")) console.warn(`${name} should implement \"importDOM\" if using a custom \"exportDOM\" method to ensure HTML serialization (important for copy & paste) works as expected`);\n                    if (proto instanceof $ed3b74ccfa001938$var$DecoratorNode) // eslint-disable-next-line no-prototype-builtins\n                    {\n                        if (!proto.hasOwnProperty(\"decorate\")) console.warn(`${proto.constructor.name} must implement \"decorate\" method`);\n                    }\n                    if (!klass.hasOwnProperty(\"importJSON\")) console.warn(`${name} should implement \"importJSON\" method to ensure JSON and default HTML serialization works as expected`);\n                    if (!proto.hasOwnProperty(\"exportJSON\")) console.warn(`${name} should implement \"exportJSON\" method to ensure JSON and default HTML serialization works as expected`);\n                }\n            }\n            const type = klass.getType();\n            const transform = klass.transform();\n            const transforms = new Set();\n            if (transform !== null) transforms.add(transform);\n            registeredNodes.set(type, {\n                klass: klass,\n                replace: replacementClass,\n                replaceWithKlass: replacementKlass,\n                transforms: transforms\n            });\n        }\n    }\n    const editor = new $ed3b74ccfa001938$var$LexicalEditor(editorState, parentEditor, registeredNodes, {\n        disableEvents: disableEvents,\n        namespace: namespace,\n        theme: theme\n    }, onError ? onError : console.error, $ed3b74ccfa001938$var$initializeConversionCache(registeredNodes), isEditable);\n    if (initialEditorState !== undefined) {\n        editor._pendingEditorState = initialEditorState;\n        editor._dirtyType = $ed3b74ccfa001938$var$FULL_RECONCILE;\n    }\n    return editor;\n}\nclass $ed3b74ccfa001938$var$LexicalEditor {\n    /**\n   *\n   * @returns true if the editor is currently in \"composition\" mode due to receiving input\n   * through an IME, or 3P extension, for example. Returns false otherwise.\n   */ isComposing() {\n        return this._compositionKey != null;\n    }\n    /**\n   * Registers a listener for Editor update event. Will trigger the provided callback\n   * each time the editor goes through an update (via {@link LexicalEditor.update}) until the\n   * teardown function is called.\n   *\n   * @returns a teardown function that can be used to cleanup the listener.\n   */ registerUpdateListener(listener) {\n        const listenerSetOrMap = this._listeners.update;\n        listenerSetOrMap.add(listener);\n        return ()=>{\n            listenerSetOrMap.delete(listener);\n        };\n    }\n    /**\n   * Registers a listener for for when the editor changes between editable and non-editable states.\n   * Will trigger the provided callback each time the editor transitions between these states until the\n   * teardown function is called.\n   *\n   * @returns a teardown function that can be used to cleanup the listener.\n   */ registerEditableListener(listener) {\n        const listenerSetOrMap = this._listeners.editable;\n        listenerSetOrMap.add(listener);\n        return ()=>{\n            listenerSetOrMap.delete(listener);\n        };\n    }\n    /**\n   * Registers a listener for when the editor's decorator object changes. The decorator object contains\n   * all DecoratorNode keys -> their decorated value. This is primarily used with external UI frameworks.\n   *\n   * Will trigger the provided callback each time the editor transitions between these states until the\n   * teardown function is called.\n   *\n   * @returns a teardown function that can be used to cleanup the listener.\n   */ registerDecoratorListener(listener) {\n        const listenerSetOrMap = this._listeners.decorator;\n        listenerSetOrMap.add(listener);\n        return ()=>{\n            listenerSetOrMap.delete(listener);\n        };\n    }\n    /**\n   * Registers a listener for when Lexical commits an update to the DOM and the text content of\n   * the editor changes from the previous state of the editor. If the text content is the\n   * same between updates, no notifications to the listeners will happen.\n   *\n   * Will trigger the provided callback each time the editor transitions between these states until the\n   * teardown function is called.\n   *\n   * @returns a teardown function that can be used to cleanup the listener.\n   */ registerTextContentListener(listener) {\n        const listenerSetOrMap = this._listeners.textcontent;\n        listenerSetOrMap.add(listener);\n        return ()=>{\n            listenerSetOrMap.delete(listener);\n        };\n    }\n    /**\n   * Registers a listener for when the editor's root DOM element (the content editable\n   * Lexical attaches to) changes. This is primarily used to attach event listeners to the root\n   *  element. The root listener function is executed directly upon registration and then on\n   * any subsequent update.\n   *\n   * Will trigger the provided callback each time the editor transitions between these states until the\n   * teardown function is called.\n   *\n   * @returns a teardown function that can be used to cleanup the listener.\n   */ registerRootListener(listener) {\n        const listenerSetOrMap = this._listeners.root;\n        listener(this._rootElement, null);\n        listenerSetOrMap.add(listener);\n        return ()=>{\n            listener(null, this._rootElement);\n            listenerSetOrMap.delete(listener);\n        };\n    }\n    /**\n   * Registers a listener that will trigger anytime the provided command\n   * is dispatched, subject to priority. Listeners that run at a higher priority can \"intercept\"\n   * commands and prevent them from propagating to other handlers by returning true.\n   *\n   * Listeners registered at the same priority level will run deterministically in the order of registration.\n   *\n   * @param command - the command that will trigger the callback.\n   * @param listener - the function that will execute when the command is dispatched.\n   * @param priority - the relative priority of the listener. 0 | 1 | 2 | 3 | 4\n   * @returns a teardown function that can be used to cleanup the listener.\n   */ registerCommand(command, listener, priority) {\n        if (priority === undefined) throw Error(`Listener for type \"command\" requires a \"priority\".`);\n        const commandsMap = this._commands;\n        if (!commandsMap.has(command)) commandsMap.set(command, [\n            new Set(),\n            new Set(),\n            new Set(),\n            new Set(),\n            new Set()\n        ]);\n        const listenersInPriorityOrder = commandsMap.get(command);\n        if (listenersInPriorityOrder === undefined) throw Error(`registerCommand: Command ${String(command)} not found in command map`);\n        const listeners = listenersInPriorityOrder[priority];\n        listeners.add(listener);\n        return ()=>{\n            listeners.delete(listener);\n            if (listenersInPriorityOrder.every((listenersSet)=>listenersSet.size === 0)) commandsMap.delete(command);\n        };\n    }\n    /**\n   * Registers a listener that will run when a Lexical node of the provided class is\n   * mutated. The listener will receive a list of nodes along with the type of mutation\n   * that was performed on each: created, destroyed, or updated.\n   *\n   * One common use case for this is to attach DOM event listeners to the underlying DOM nodes as Lexical nodes are created.\n   * {@link LexicalEditor.getElementByKey} can be used for this.\n   *\n   * @param klass - The class of the node that you want to listen to mutations on.\n   * @param listener - The logic you want to run when the node is mutated.\n   * @returns a teardown function that can be used to cleanup the listener.\n   */ registerMutationListener(klass, listener) {\n        const registeredNode = this._nodes.get(klass.getType());\n        if (registeredNode === undefined) throw Error(`Node ${klass.name} has not been registered. Ensure node has been passed to createEditor.`);\n        const mutations = this._listeners.mutation;\n        mutations.set(listener, klass);\n        return ()=>{\n            mutations.delete(listener);\n        };\n    }\n    /** @internal */ registerNodeTransformToKlass(klass, listener) {\n        const type = klass.getType();\n        const registeredNode = this._nodes.get(type);\n        if (registeredNode === undefined) throw Error(`Node ${klass.name} has not been registered. Ensure node has been passed to createEditor.`);\n        const transforms = registeredNode.transforms;\n        transforms.add(listener);\n        return registeredNode;\n    }\n    /**\n   * Registers a listener that will run when a Lexical node of the provided class is\n   * marked dirty during an update. The listener will continue to run as long as the node\n   * is marked dirty. There are no guarantees around the order of transform execution!\n   *\n   * Watch out for infinite loops. See [Node Transforms](https://lexical.dev/docs/concepts/transforms)\n   * @param klass - The class of the node that you want to run transforms on.\n   * @param listener - The logic you want to run when the node is updated.\n   * @returns a teardown function that can be used to cleanup the listener.\n   */ registerNodeTransform(klass, listener) {\n        const registeredNode = this.registerNodeTransformToKlass(klass, listener);\n        const registeredNodes = [\n            registeredNode\n        ];\n        const replaceWithKlass = registeredNode.replaceWithKlass;\n        if (replaceWithKlass != null) {\n            const registeredReplaceWithNode = this.registerNodeTransformToKlass(replaceWithKlass, listener);\n            registeredNodes.push(registeredReplaceWithNode);\n        }\n        $ed3b74ccfa001938$var$markAllNodesAsDirty(this, klass.getType());\n        return ()=>{\n            registeredNodes.forEach((node)=>node.transforms.delete(listener));\n        };\n    }\n    /**\n   * Used to assert that certain nodes are registered, usually by plugins to ensure nodes that they\n   * depend on have been registered.\n   * @returns True if the editor has registered all of the provided node types, false otherwise.\n   */ hasNodes(nodes) {\n        for(let i = 0; i < nodes.length; i++){\n            const klass = nodes[i];\n            const type = klass.getType();\n            if (!this._nodes.has(type)) return false;\n        }\n        return true;\n    }\n    /**\n   * Dispatches a command of the specified type with the specified payload.\n   * This triggers all command listeners (set by {@link LexicalEditor.registerCommand})\n   * for this type, passing them the provided payload.\n   * @param type - the type of command listeners to trigger.\n   * @param payload - the data to pass as an argument to the command listeners.\n   */ dispatchCommand(type, payload) {\n        return $ed3b74ccfa001938$var$dispatchCommand(this, type, payload);\n    }\n    /**\n   * Gets a map of all decorators in the editor.\n   * @returns A mapping of call decorator keys to their decorated content\n   */ getDecorators() {\n        return this._decorators;\n    }\n    /**\n   *\n   * @returns the current root element of the editor. If you want to register\n   * an event listener, do it via {@link LexicalEditor.registerRootListener}, since\n   * this reference may not be stable.\n   */ getRootElement() {\n        return this._rootElement;\n    }\n    /**\n   * Gets the key of the editor\n   * @returns The editor key\n   */ getKey() {\n        return this._key;\n    }\n    /**\n   * Imperatively set the root contenteditable element that Lexical listens\n   * for events on.\n   */ setRootElement(nextRootElement) {\n        const prevRootElement = this._rootElement;\n        if (nextRootElement !== prevRootElement) {\n            const classNames = $ed3b74ccfa001938$var$getCachedClassNameArray(this._config.theme, \"root\");\n            const pendingEditorState = this._pendingEditorState || this._editorState;\n            this._rootElement = nextRootElement;\n            $ed3b74ccfa001938$var$resetEditor(this, prevRootElement, nextRootElement, pendingEditorState);\n            if (prevRootElement !== null) {\n                // TODO: remove this flag once we no longer use UEv2 internally\n                if (!this._config.disableEvents) $ed3b74ccfa001938$var$removeRootElementEvents(prevRootElement);\n                if (classNames != null) prevRootElement.classList.remove(...classNames);\n            }\n            if (nextRootElement !== null) {\n                const windowObj = $ed3b74ccfa001938$var$getDefaultView(nextRootElement);\n                const style = nextRootElement.style;\n                style.userSelect = \"text\";\n                style.whiteSpace = \"pre-wrap\";\n                style.wordBreak = \"break-word\";\n                nextRootElement.setAttribute(\"data-lexical-editor\", \"true\");\n                this._window = windowObj;\n                this._dirtyType = $ed3b74ccfa001938$var$FULL_RECONCILE;\n                $ed3b74ccfa001938$var$initMutationObserver(this);\n                this._updateTags.add(\"history-merge\");\n                $ed3b74ccfa001938$var$commitPendingUpdates(this); // TODO: remove this flag once we no longer use UEv2 internally\n                if (!this._config.disableEvents) $ed3b74ccfa001938$var$addRootElementEvents(nextRootElement, this);\n                if (classNames != null) nextRootElement.classList.add(...classNames);\n            } else this._window = null;\n            $ed3b74ccfa001938$var$triggerListeners(\"root\", this, false, nextRootElement, prevRootElement);\n        }\n    }\n    /**\n   * Gets the underlying HTMLElement associated with the LexicalNode for the given key.\n   * @returns the HTMLElement rendered by the LexicalNode associated with the key.\n   * @param key - the key of the LexicalNode.\n   */ getElementByKey(key) {\n        return this._keyToDOMMap.get(key) || null;\n    }\n    /**\n   * Gets the active editor state.\n   * @returns The editor state\n   */ getEditorState() {\n        return this._editorState;\n    }\n    /**\n   * Imperatively set the EditorState. Triggers reconciliation like an update.\n   * @param editorState - the state to set the editor\n   * @param options - options for the update.\n   */ setEditorState(editorState, options) {\n        if (editorState.isEmpty()) throw Error(`setEditorState: the editor state is empty. Ensure the editor state's root node never becomes empty.`);\n        $ed3b74ccfa001938$var$flushRootMutations(this);\n        const pendingEditorState = this._pendingEditorState;\n        const tags = this._updateTags;\n        const tag = options !== undefined ? options.tag : null;\n        if (pendingEditorState !== null && !pendingEditorState.isEmpty()) {\n            if (tag != null) tags.add(tag);\n            $ed3b74ccfa001938$var$commitPendingUpdates(this);\n        }\n        this._pendingEditorState = editorState;\n        this._dirtyType = $ed3b74ccfa001938$var$FULL_RECONCILE;\n        this._dirtyElements.set(\"root\", false);\n        this._compositionKey = null;\n        if (tag != null) tags.add(tag);\n        $ed3b74ccfa001938$var$commitPendingUpdates(this);\n    }\n    /**\n   * Parses a SerializedEditorState (usually produced by {@link EditorState.toJSON}) and returns\n   * and EditorState object that can be, for example, passed to {@link LexicalEditor.setEditorState}. Typically,\n   * deserliazation from JSON stored in a database uses this method.\n   * @param maybeStringifiedEditorState\n   * @param updateFn\n   * @returns\n   */ parseEditorState(maybeStringifiedEditorState, updateFn) {\n        const serializedEditorState = typeof maybeStringifiedEditorState === \"string\" ? JSON.parse(maybeStringifiedEditorState) : maybeStringifiedEditorState;\n        return $ed3b74ccfa001938$var$parseEditorState(serializedEditorState, this, updateFn);\n    }\n    /**\n   * Executes an update to the editor state. The updateFn callback is the ONLY place\n   * where Lexical editor state can be safely mutated.\n   * @param updateFn - A function that has access to writable editor state.\n   * @param options - A bag of options to control the behavior of the update.\n   * @param options.onUpdate - A function to run once the update is complete.\n   * Useful for synchronizing updates in some cases.\n   * @param options.skipTransforms - Setting this to true will suppress all node\n   * transforms for this update cycle.\n   * @param options.tag - A tag to identify this update, in an update listener, for instance.\n   * Some tags are reserved by the core and control update behavior in different ways.\n   * @param options.discrete - If true, prevents this update from being batched, forcing it to\n   * run synchronously.\n   */ update(updateFn, options) {\n        $ed3b74ccfa001938$var$updateEditor(this, updateFn, options);\n    }\n    /**\n   * Focuses the editor\n   * @param callbackFn - A function to run after the editor is focused.\n   * @param options - A bag of options\n   * @param options.defaultSelection - Where to move selection when the editor is\n   * focused. Can be rootStart, rootEnd, or undefined. Defaults to rootEnd.\n   */ focus(callbackFn, options = {}) {\n        const rootElement = this._rootElement;\n        if (rootElement !== null) {\n            // This ensures that iOS does not trigger caps lock upon focus\n            rootElement.setAttribute(\"autocapitalize\", \"off\");\n            $ed3b74ccfa001938$var$updateEditor(this, ()=>{\n                const selection = $ed3b74ccfa001938$var$$getSelection();\n                const root = $ed3b74ccfa001938$var$$getRoot();\n                if (selection !== null) // Marking the selection dirty will force the selection back to it\n                selection.dirty = true;\n                else if (root.getChildrenSize() !== 0) {\n                    if (options.defaultSelection === \"rootStart\") root.selectStart();\n                    else root.selectEnd();\n                }\n            }, {\n                onUpdate: ()=>{\n                    rootElement.removeAttribute(\"autocapitalize\");\n                    if (callbackFn) callbackFn();\n                }\n            }); // In the case where onUpdate doesn't fire (due to the focus update not\n            // occuring).\n            if (this._pendingEditorState === null) rootElement.removeAttribute(\"autocapitalize\");\n        }\n    }\n    /**\n   * Removes focus from the editor.\n   */ blur() {\n        const rootElement = this._rootElement;\n        if (rootElement !== null) rootElement.blur();\n        const domSelection = $ed3b74ccfa001938$var$getDOMSelection(this._window);\n        if (domSelection !== null) domSelection.removeAllRanges();\n    }\n    /**\n   * Returns true if the editor is editable, false otherwise.\n   * @returns True if the editor is editable, false otherwise.\n   */ isEditable() {\n        return this._editable;\n    }\n    /**\n   * Sets the editable property of the editor. When false, the\n   * editor will not listen for user events on the underling contenteditable.\n   * @param editable - the value to set the editable mode to.\n   */ setEditable(editable) {\n        if (this._editable !== editable) {\n            this._editable = editable;\n            $ed3b74ccfa001938$var$triggerListeners(\"editable\", this, true, editable);\n        }\n    }\n    /**\n   * Returns a JSON-serializable javascript object NOT a JSON string.\n   * You still must call JSON.stringify (or something else) to turn the\n   * state into a string you can transfer over the wire and store in a database.\n   *\n   * See {@link LexicalNode.exportJSON}\n   *\n   * @returns A JSON-serializable javascript object\n   */ toJSON() {\n        return {\n            editorState: this._editorState.toJSON()\n        };\n    }\n    /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ /** @internal */ constructor(editorState, parentEditor, nodes, config, onError, htmlConversions, editable){\n        this._parentEditor = parentEditor; // The root element associated with this editor\n        this._rootElement = null; // The current editor state\n        this._editorState = editorState; // Handling of drafts and updates\n        this._pendingEditorState = null; // Used to help co-ordinate selection and events\n        this._compositionKey = null;\n        this._deferred = []; // Used during reconciliation\n        this._keyToDOMMap = new Map();\n        this._updates = [];\n        this._updating = false; // Listeners\n        this._listeners = {\n            decorator: new Set(),\n            editable: new Set(),\n            mutation: new Map(),\n            root: new Set(),\n            textcontent: new Set(),\n            update: new Set()\n        }; // Commands\n        this._commands = new Map(); // Editor configuration for theme/context.\n        this._config = config; // Mapping of types to their nodes\n        this._nodes = nodes; // React node decorators for portals\n        this._decorators = {};\n        this._pendingDecorators = null; // Used to optimize reconciliation\n        this._dirtyType = $ed3b74ccfa001938$var$NO_DIRTY_NODES;\n        this._cloneNotNeeded = new Set();\n        this._dirtyLeaves = new Set();\n        this._dirtyElements = new Map();\n        this._normalizedNodes = new Set();\n        this._updateTags = new Set(); // Handling of DOM mutations\n        this._observer = null; // Used for identifying owning editors\n        this._key = $ed3b74ccfa001938$var$createUID();\n        this._onError = onError;\n        this._htmlConversions = htmlConversions; // We don't actually make use of the `editable` argument above.\n        // Doing so, causes e2e tests around the lock to fail.\n        this._editable = true;\n        this._headless = parentEditor !== null && parentEditor._headless;\n        this._window = null;\n        this._blockCursorElement = null;\n    }\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ /** @noInheritDoc */ class $ed3b74ccfa001938$var$DEPRECATED_GridCellNode extends $ed3b74ccfa001938$var$ElementNode {\n    exportJSON() {\n        return {\n            ...super.exportJSON(),\n            colSpan: this.__colSpan\n        };\n    }\n    setColSpan(colSpan) {\n        this.getWritable().__colSpan = colSpan;\n        return this;\n    }\n    setRowSpan(rowSpan) {\n        this.getWritable().__rowSpan = rowSpan;\n        return this;\n    }\n    /** @internal */ constructor(colSpan, key){\n        super(key);\n        this.__colSpan = colSpan;\n        this.__rowSpan = 1;\n    }\n}\nfunction $ed3b74ccfa001938$var$DEPRECATED_$isGridCellNode(node) {\n    return node instanceof $ed3b74ccfa001938$var$DEPRECATED_GridCellNode;\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ class $ed3b74ccfa001938$var$DEPRECATED_GridNode extends $ed3b74ccfa001938$var$ElementNode {\n}\nfunction $ed3b74ccfa001938$var$DEPRECATED_$isGridNode(node) {\n    return node instanceof $ed3b74ccfa001938$var$DEPRECATED_GridNode;\n}\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */ class $ed3b74ccfa001938$var$DEPRECATED_GridRowNode extends $ed3b74ccfa001938$var$ElementNode {\n}\nfunction $ed3b74ccfa001938$var$DEPRECATED_$isGridRowNode(node) {\n    return node instanceof $ed3b74ccfa001938$var$DEPRECATED_GridRowNode;\n}\n$ed3b74ccfa001938$export$24cab2f466b76c04 = $ed3b74ccfa001938$var$$addUpdateTag;\n$ed3b74ccfa001938$export$2f5beb31df92ea57 = $ed3b74ccfa001938$var$$applyNodeReplacement;\n$ed3b74ccfa001938$export$def73b17b22438e7 = $ed3b74ccfa001938$var$$copyNode;\n$ed3b74ccfa001938$export$4ccaf7d0d16ab4c = $ed3b74ccfa001938$var$$createLineBreakNode;\n$ed3b74ccfa001938$export$f8cd0c3f35d1a61c = $ed3b74ccfa001938$var$$createNodeSelection;\n$ed3b74ccfa001938$export$7f0c05ffb7ced90d = $ed3b74ccfa001938$var$$createParagraphNode;\n$ed3b74ccfa001938$export$1ccc217b9831b072 = $ed3b74ccfa001938$var$$createRangeSelection;\n$ed3b74ccfa001938$export$2785f39dcdec0078 = $ed3b74ccfa001938$var$$createTextNode;\n$ed3b74ccfa001938$export$c4b907be1879d8c1 = $ed3b74ccfa001938$var$$getAdjacentNode;\n$ed3b74ccfa001938$export$fef265f0d2fcffdd = $ed3b74ccfa001938$var$$getNearestNodeFromDOMNode;\n$ed3b74ccfa001938$export$6f13c476561e4734 = $ed3b74ccfa001938$var$$getNearestRootOrShadowRoot;\n$ed3b74ccfa001938$export$e725f93d4d48c6d8 = $ed3b74ccfa001938$var$$getNodeByKey;\n$ed3b74ccfa001938$export$846e9407a8b5d98c = $ed3b74ccfa001938$var$$getPreviousSelection;\n$ed3b74ccfa001938$export$8d83ea843c4eea9a = $ed3b74ccfa001938$var$$getRoot;\n$ed3b74ccfa001938$export$63a3201b3a5c7d90 = $ed3b74ccfa001938$var$$getSelection;\n$ed3b74ccfa001938$export$2d96f9a07231d1b9 = $ed3b74ccfa001938$var$$getTextContent;\n$ed3b74ccfa001938$export$e3d4b782f65c81f1 = $ed3b74ccfa001938$var$$hasAncestor;\n$ed3b74ccfa001938$export$d773017360b45449 = $ed3b74ccfa001938$var$$insertNodes;\n$ed3b74ccfa001938$export$60aa03725ce41b1c = $ed3b74ccfa001938$var$$isDecoratorNode;\n$ed3b74ccfa001938$export$923a058ef54437a4 = $ed3b74ccfa001938$var$$isElementNode;\n$ed3b74ccfa001938$export$a78813a4e8e8b9dd = $ed3b74ccfa001938$var$$isInlineElementOrDecoratorNode;\n$ed3b74ccfa001938$export$8d016e0592201ace = $ed3b74ccfa001938$var$$isLeafNode;\n$ed3b74ccfa001938$export$b16330e40aa25c4e = $ed3b74ccfa001938$var$$isLineBreakNode;\n$ed3b74ccfa001938$export$7257e4181651a7c3 = $ed3b74ccfa001938$var$$isNodeSelection;\n$ed3b74ccfa001938$export$1fdda795300c79c6 = $ed3b74ccfa001938$var$$isParagraphNode;\n$ed3b74ccfa001938$export$181b63acea8a0224 = $ed3b74ccfa001938$var$$isRangeSelection;\n$ed3b74ccfa001938$export$5b29ca560c2fedab = $ed3b74ccfa001938$var$$isRootNode;\n$ed3b74ccfa001938$export$6f851a24c61146af = $ed3b74ccfa001938$var$$isRootOrShadowRoot;\n$ed3b74ccfa001938$export$471953706258be2b = $ed3b74ccfa001938$var$$isTextNode;\n$ed3b74ccfa001938$export$ac6fed8d7d40e66c = $ed3b74ccfa001938$var$$nodesOfType;\n$ed3b74ccfa001938$export$db10bc6ba67ffcb5 = $ed3b74ccfa001938$var$$normalizeSelection;\n$ed3b74ccfa001938$export$e1d3a194df5be556 = $ed3b74ccfa001938$var$$parseSerializedNode;\n$ed3b74ccfa001938$export$ea25f5ef71f2d042 = $ed3b74ccfa001938$var$$setCompositionKey;\n$ed3b74ccfa001938$export$2aad78c37810bca9 = $ed3b74ccfa001938$var$$setSelection;\n$ed3b74ccfa001938$export$cc2d53c74c1fb2b2 = $ed3b74ccfa001938$var$$splitNode;\n$ed3b74ccfa001938$export$4b6d457d076906ac = $ed3b74ccfa001938$var$BLUR_COMMAND;\n$ed3b74ccfa001938$export$e36aacf84f559bb3 = $ed3b74ccfa001938$var$CAN_REDO_COMMAND;\n$ed3b74ccfa001938$export$9fd9dd31dd6ebdf5 = $ed3b74ccfa001938$var$CAN_UNDO_COMMAND;\n$ed3b74ccfa001938$export$4926ce1a5702fdc7 = $ed3b74ccfa001938$var$CLEAR_EDITOR_COMMAND;\n$ed3b74ccfa001938$export$d3f69a65bbe7edc = $ed3b74ccfa001938$var$CLEAR_HISTORY_COMMAND;\n$ed3b74ccfa001938$export$c1a2de6c823e5f82 = $ed3b74ccfa001938$var$CLICK_COMMAND;\n$ed3b74ccfa001938$export$6afdf194f304e546 = $ed3b74ccfa001938$var$COMMAND_PRIORITY_CRITICAL;\n$ed3b74ccfa001938$export$11c61e12af5e1f41 = $ed3b74ccfa001938$var$COMMAND_PRIORITY_EDITOR;\n$ed3b74ccfa001938$export$e8fb7042985cd2e9 = $ed3b74ccfa001938$var$COMMAND_PRIORITY_HIGH;\n$ed3b74ccfa001938$export$1d1358fe8b5bfab4 = $ed3b74ccfa001938$var$COMMAND_PRIORITY_LOW;\n$ed3b74ccfa001938$export$7bb13e375de35064 = $ed3b74ccfa001938$var$COMMAND_PRIORITY_NORMAL;\n$ed3b74ccfa001938$export$6f67c758bb657857 = $ed3b74ccfa001938$var$CONTROLLED_TEXT_INSERTION_COMMAND;\n$ed3b74ccfa001938$export$3435fcfb1f59ef96 = $ed3b74ccfa001938$var$COPY_COMMAND;\n$ed3b74ccfa001938$export$4dc8a35a083beec4 = $ed3b74ccfa001938$var$CUT_COMMAND;\n$ed3b74ccfa001938$export$35595bf6d7e36fd5 = $ed3b74ccfa001938$var$DELETE_CHARACTER_COMMAND;\n$ed3b74ccfa001938$export$d77fad8fb8747fd = $ed3b74ccfa001938$var$DELETE_LINE_COMMAND;\n$ed3b74ccfa001938$export$8e315b175631384c = $ed3b74ccfa001938$var$DELETE_WORD_COMMAND;\n$ed3b74ccfa001938$export$3c62f6ea1bcc0126 = $ed3b74ccfa001938$var$DEPRECATED_$createGridSelection;\n$ed3b74ccfa001938$export$512956df40f3b40e = $ed3b74ccfa001938$var$DEPRECATED_$isGridCellNode;\n$ed3b74ccfa001938$export$5f4fd2bb79122677 = $ed3b74ccfa001938$var$DEPRECATED_$isGridNode;\n$ed3b74ccfa001938$export$6409391dce4c0f48 = $ed3b74ccfa001938$var$DEPRECATED_$isGridRowNode;\n$ed3b74ccfa001938$export$d3f36a5fb5c9efe5 = $ed3b74ccfa001938$var$DEPRECATED_$isGridSelection;\n$ed3b74ccfa001938$export$e284ef4eccc325c5 = $ed3b74ccfa001938$var$DEPRECATED_GridCellNode;\n$ed3b74ccfa001938$export$5627752ddf7eed41 = $ed3b74ccfa001938$var$DEPRECATED_GridNode;\n$ed3b74ccfa001938$export$8c09d9a078ea3c2f = $ed3b74ccfa001938$var$DEPRECATED_GridRowNode;\n$ed3b74ccfa001938$export$ffbd838cf75d7d8e = $ed3b74ccfa001938$var$DRAGEND_COMMAND;\n$ed3b74ccfa001938$export$b62c1cce98fa7223 = $ed3b74ccfa001938$var$DRAGOVER_COMMAND;\n$ed3b74ccfa001938$export$2e0fd45fde1da719 = $ed3b74ccfa001938$var$DRAGSTART_COMMAND;\n$ed3b74ccfa001938$export$eac1e4b16b80d3ea = $ed3b74ccfa001938$var$DROP_COMMAND;\n$ed3b74ccfa001938$export$8244b9efe04488e = $ed3b74ccfa001938$var$DecoratorNode;\n$ed3b74ccfa001938$export$dc064fe9e59310fd = $ed3b74ccfa001938$var$ElementNode;\n$ed3b74ccfa001938$export$cafe35f35e77bf56 = $ed3b74ccfa001938$var$FOCUS_COMMAND;\n$ed3b74ccfa001938$export$d394dc6514823b18 = $ed3b74ccfa001938$var$FORMAT_ELEMENT_COMMAND;\n$ed3b74ccfa001938$export$85443a1a9543f043 = $ed3b74ccfa001938$var$FORMAT_TEXT_COMMAND;\n$ed3b74ccfa001938$export$2f74f6a2d927e6bd = $ed3b74ccfa001938$var$INDENT_CONTENT_COMMAND;\n$ed3b74ccfa001938$export$64e35ce26e025724 = $ed3b74ccfa001938$var$INSERT_LINE_BREAK_COMMAND;\n$ed3b74ccfa001938$export$24f4fea65b096b4 = $ed3b74ccfa001938$var$INSERT_PARAGRAPH_COMMAND;\n$ed3b74ccfa001938$export$baa60daa2ca402b3 = $ed3b74ccfa001938$var$KEY_ARROW_DOWN_COMMAND;\n$ed3b74ccfa001938$export$7525f8f8ab44508 = $ed3b74ccfa001938$var$KEY_ARROW_LEFT_COMMAND;\n$ed3b74ccfa001938$export$217ec2281ac1c53b = $ed3b74ccfa001938$var$KEY_ARROW_RIGHT_COMMAND;\n$ed3b74ccfa001938$export$7833c2a33ae81d3d = $ed3b74ccfa001938$var$KEY_ARROW_UP_COMMAND;\n$ed3b74ccfa001938$export$24bbba9bfa830f78 = $ed3b74ccfa001938$var$KEY_BACKSPACE_COMMAND;\n$ed3b74ccfa001938$export$13a0e72b5c0146bb = $ed3b74ccfa001938$var$KEY_DELETE_COMMAND;\n$ed3b74ccfa001938$export$61973214e0e18936 = $ed3b74ccfa001938$var$KEY_DOWN_COMMAND;\n$ed3b74ccfa001938$export$2cdb7cdd6fccb293 = $ed3b74ccfa001938$var$KEY_ENTER_COMMAND;\n$ed3b74ccfa001938$export$53589e422a755d59 = $ed3b74ccfa001938$var$KEY_ESCAPE_COMMAND;\n$ed3b74ccfa001938$export$452548a3c1874d61 = $ed3b74ccfa001938$var$KEY_MODIFIER_COMMAND;\n$ed3b74ccfa001938$export$d0bc2bb647ce4c17 = $ed3b74ccfa001938$var$KEY_SPACE_COMMAND;\n$ed3b74ccfa001938$export$b321bdc226ccdcde = $ed3b74ccfa001938$var$KEY_TAB_COMMAND;\n$ed3b74ccfa001938$export$965f56e8043e93ae = $ed3b74ccfa001938$var$LineBreakNode;\n$ed3b74ccfa001938$export$fb3b2d438650aff6 = $ed3b74ccfa001938$var$MOVE_TO_END;\n$ed3b74ccfa001938$export$dc117ee4d661295a = $ed3b74ccfa001938$var$MOVE_TO_START;\n$ed3b74ccfa001938$export$ecf9caa19e96e40d = $ed3b74ccfa001938$var$OUTDENT_CONTENT_COMMAND;\n$ed3b74ccfa001938$export$7fb70c61b3bcc883 = $ed3b74ccfa001938$var$PASTE_COMMAND;\n$ed3b74ccfa001938$export$e94424771493b912 = $ed3b74ccfa001938$var$ParagraphNode;\n$ed3b74ccfa001938$export$8c4a0748d31d9941 = $ed3b74ccfa001938$var$REDO_COMMAND;\n$ed3b74ccfa001938$export$9cc285f2a3ff220c = $ed3b74ccfa001938$var$REMOVE_TEXT_COMMAND;\n$ed3b74ccfa001938$export$1c180cb67301903c = $ed3b74ccfa001938$var$RootNode;\n$ed3b74ccfa001938$export$e396fef71d2b56e5 = $ed3b74ccfa001938$var$SELECTION_CHANGE_COMMAND;\n$ed3b74ccfa001938$export$f0a25ea3087686aa = $ed3b74ccfa001938$var$TextNode;\n$ed3b74ccfa001938$export$34722a4946cb641e = $ed3b74ccfa001938$var$UNDO_COMMAND;\n$ed3b74ccfa001938$export$8d4021544bdece00 = $ed3b74ccfa001938$var$createCommand;\n$ed3b74ccfa001938$export$eb02d1ee0d3cac30 = $ed3b74ccfa001938$var$createEditor;\n$ed3b74ccfa001938$export$f1b377b21cd6350b = $ed3b74ccfa001938$var$isSelectionWithinEditor;\n\n\nexport {$ed3b74ccfa001938$export$24cab2f466b76c04 as $addUpdateTag, $ed3b74ccfa001938$export$2f5beb31df92ea57 as $applyNodeReplacement, $ed3b74ccfa001938$export$def73b17b22438e7 as $copyNode, $ed3b74ccfa001938$export$4ccaf7d0d16ab4c as $createLineBreakNode, $ed3b74ccfa001938$export$f8cd0c3f35d1a61c as $createNodeSelection, $ed3b74ccfa001938$export$7f0c05ffb7ced90d as $createParagraphNode, $ed3b74ccfa001938$export$1ccc217b9831b072 as $createRangeSelection, $ed3b74ccfa001938$export$2785f39dcdec0078 as $createTextNode, $ed3b74ccfa001938$export$c4b907be1879d8c1 as $getAdjacentNode, $ed3b74ccfa001938$export$fef265f0d2fcffdd as $getNearestNodeFromDOMNode, $ed3b74ccfa001938$export$6f13c476561e4734 as $getNearestRootOrShadowRoot, $ed3b74ccfa001938$export$e725f93d4d48c6d8 as $getNodeByKey, $ed3b74ccfa001938$export$846e9407a8b5d98c as $getPreviousSelection, $ed3b74ccfa001938$export$8d83ea843c4eea9a as $getRoot, $ed3b74ccfa001938$export$63a3201b3a5c7d90 as $getSelection, $ed3b74ccfa001938$export$2d96f9a07231d1b9 as $getTextContent, $ed3b74ccfa001938$export$e3d4b782f65c81f1 as $hasAncestor, $ed3b74ccfa001938$export$d773017360b45449 as $insertNodes, $ed3b74ccfa001938$export$60aa03725ce41b1c as $isDecoratorNode, $ed3b74ccfa001938$export$923a058ef54437a4 as $isElementNode, $ed3b74ccfa001938$export$a78813a4e8e8b9dd as $isInlineElementOrDecoratorNode, $ed3b74ccfa001938$export$8d016e0592201ace as $isLeafNode, $ed3b74ccfa001938$export$b16330e40aa25c4e as $isLineBreakNode, $ed3b74ccfa001938$export$7257e4181651a7c3 as $isNodeSelection, $ed3b74ccfa001938$export$1fdda795300c79c6 as $isParagraphNode, $ed3b74ccfa001938$export$181b63acea8a0224 as $isRangeSelection, $ed3b74ccfa001938$export$5b29ca560c2fedab as $isRootNode, $ed3b74ccfa001938$export$6f851a24c61146af as $isRootOrShadowRoot, $ed3b74ccfa001938$export$471953706258be2b as $isTextNode, $ed3b74ccfa001938$export$ac6fed8d7d40e66c as $nodesOfType, $ed3b74ccfa001938$export$db10bc6ba67ffcb5 as $normalizeSelection__EXPERIMENTAL, $ed3b74ccfa001938$export$e1d3a194df5be556 as $parseSerializedNode, $ed3b74ccfa001938$export$ea25f5ef71f2d042 as $setCompositionKey, $ed3b74ccfa001938$export$2aad78c37810bca9 as $setSelection, $ed3b74ccfa001938$export$cc2d53c74c1fb2b2 as $splitNode, $ed3b74ccfa001938$export$4b6d457d076906ac as BLUR_COMMAND, $ed3b74ccfa001938$export$e36aacf84f559bb3 as CAN_REDO_COMMAND, $ed3b74ccfa001938$export$9fd9dd31dd6ebdf5 as CAN_UNDO_COMMAND, $ed3b74ccfa001938$export$4926ce1a5702fdc7 as CLEAR_EDITOR_COMMAND, $ed3b74ccfa001938$export$d3f69a65bbe7edc as CLEAR_HISTORY_COMMAND, $ed3b74ccfa001938$export$c1a2de6c823e5f82 as CLICK_COMMAND, $ed3b74ccfa001938$export$6afdf194f304e546 as COMMAND_PRIORITY_CRITICAL, $ed3b74ccfa001938$export$11c61e12af5e1f41 as COMMAND_PRIORITY_EDITOR, $ed3b74ccfa001938$export$e8fb7042985cd2e9 as COMMAND_PRIORITY_HIGH, $ed3b74ccfa001938$export$1d1358fe8b5bfab4 as COMMAND_PRIORITY_LOW, $ed3b74ccfa001938$export$7bb13e375de35064 as COMMAND_PRIORITY_NORMAL, $ed3b74ccfa001938$export$6f67c758bb657857 as CONTROLLED_TEXT_INSERTION_COMMAND, $ed3b74ccfa001938$export$3435fcfb1f59ef96 as COPY_COMMAND, $ed3b74ccfa001938$export$4dc8a35a083beec4 as CUT_COMMAND, $ed3b74ccfa001938$export$35595bf6d7e36fd5 as DELETE_CHARACTER_COMMAND, $ed3b74ccfa001938$export$d77fad8fb8747fd as DELETE_LINE_COMMAND, $ed3b74ccfa001938$export$8e315b175631384c as DELETE_WORD_COMMAND, $ed3b74ccfa001938$export$3c62f6ea1bcc0126 as DEPRECATED_$createGridSelection, $ed3b74ccfa001938$export$512956df40f3b40e as DEPRECATED_$isGridCellNode, $ed3b74ccfa001938$export$5f4fd2bb79122677 as DEPRECATED_$isGridNode, $ed3b74ccfa001938$export$6409391dce4c0f48 as DEPRECATED_$isGridRowNode, $ed3b74ccfa001938$export$d3f36a5fb5c9efe5 as DEPRECATED_$isGridSelection, $ed3b74ccfa001938$export$e284ef4eccc325c5 as DEPRECATED_GridCellNode, $ed3b74ccfa001938$export$5627752ddf7eed41 as DEPRECATED_GridNode, $ed3b74ccfa001938$export$8c09d9a078ea3c2f as DEPRECATED_GridRowNode, $ed3b74ccfa001938$export$ffbd838cf75d7d8e as DRAGEND_COMMAND, $ed3b74ccfa001938$export$b62c1cce98fa7223 as DRAGOVER_COMMAND, $ed3b74ccfa001938$export$2e0fd45fde1da719 as DRAGSTART_COMMAND, $ed3b74ccfa001938$export$eac1e4b16b80d3ea as DROP_COMMAND, $ed3b74ccfa001938$export$8244b9efe04488e as DecoratorNode, $ed3b74ccfa001938$export$dc064fe9e59310fd as ElementNode, $ed3b74ccfa001938$export$cafe35f35e77bf56 as FOCUS_COMMAND, $ed3b74ccfa001938$export$d394dc6514823b18 as FORMAT_ELEMENT_COMMAND, $ed3b74ccfa001938$export$85443a1a9543f043 as FORMAT_TEXT_COMMAND, $ed3b74ccfa001938$export$2f74f6a2d927e6bd as INDENT_CONTENT_COMMAND, $ed3b74ccfa001938$export$64e35ce26e025724 as INSERT_LINE_BREAK_COMMAND, $ed3b74ccfa001938$export$24f4fea65b096b4 as INSERT_PARAGRAPH_COMMAND, $ed3b74ccfa001938$export$baa60daa2ca402b3 as KEY_ARROW_DOWN_COMMAND, $ed3b74ccfa001938$export$7525f8f8ab44508 as KEY_ARROW_LEFT_COMMAND, $ed3b74ccfa001938$export$217ec2281ac1c53b as KEY_ARROW_RIGHT_COMMAND, $ed3b74ccfa001938$export$7833c2a33ae81d3d as KEY_ARROW_UP_COMMAND, $ed3b74ccfa001938$export$24bbba9bfa830f78 as KEY_BACKSPACE_COMMAND, $ed3b74ccfa001938$export$13a0e72b5c0146bb as KEY_DELETE_COMMAND, $ed3b74ccfa001938$export$61973214e0e18936 as KEY_DOWN_COMMAND, $ed3b74ccfa001938$export$2cdb7cdd6fccb293 as KEY_ENTER_COMMAND, $ed3b74ccfa001938$export$53589e422a755d59 as KEY_ESCAPE_COMMAND, $ed3b74ccfa001938$export$452548a3c1874d61 as KEY_MODIFIER_COMMAND, $ed3b74ccfa001938$export$d0bc2bb647ce4c17 as KEY_SPACE_COMMAND, $ed3b74ccfa001938$export$b321bdc226ccdcde as KEY_TAB_COMMAND, $ed3b74ccfa001938$export$965f56e8043e93ae as LineBreakNode, $ed3b74ccfa001938$export$fb3b2d438650aff6 as MOVE_TO_END, $ed3b74ccfa001938$export$dc117ee4d661295a as MOVE_TO_START, $ed3b74ccfa001938$export$ecf9caa19e96e40d as OUTDENT_CONTENT_COMMAND, $ed3b74ccfa001938$export$7fb70c61b3bcc883 as PASTE_COMMAND, $ed3b74ccfa001938$export$e94424771493b912 as ParagraphNode, $ed3b74ccfa001938$export$8c4a0748d31d9941 as REDO_COMMAND, $ed3b74ccfa001938$export$9cc285f2a3ff220c as REMOVE_TEXT_COMMAND, $ed3b74ccfa001938$export$1c180cb67301903c as RootNode, $ed3b74ccfa001938$export$e396fef71d2b56e5 as SELECTION_CHANGE_COMMAND, $ed3b74ccfa001938$export$f0a25ea3087686aa as TextNode, $ed3b74ccfa001938$export$34722a4946cb641e as UNDO_COMMAND, $ed3b74ccfa001938$export$8d4021544bdece00 as createCommand, $ed3b74ccfa001938$export$eb02d1ee0d3cac30 as createEditor, $ed3b74ccfa001938$export$f1b377b21cd6350b as isSelectionWithinEditor, $ed3b74ccfa001938$exports as default};\n//# sourceMappingURL=Lexical.es.prod.js.map\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,data:application/json;charset=utf-8;base64,eyJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Q0FLQyxHQUNELEFBZ3FWQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FBQ0EsSUFBQTtBQUNBLElBQUE7QUFDQSxJQUFBO0FB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LDJDQUE4QjtBQUM5Qiw0Q0FBOEI7QUFDOUIsNENBQTBDO0FBQzFDLDRDQUFxQztBQUNyQyw0Q0FBaUM7QUFDakMsNENBQW9DO0FBQ3BDLDRDQUFzQztBQUN0Qyw0Q0FBa0M7QUFDbEMsNENBQThCO0FBQzlCLDRDQUFpQztBQUNqQyw0Q0FBMEI7QUFDMUIsNENBQTJCO0FBQzNCLDRDQUE0QjtBQUM1Qiw0Q0FBdUI7QUFDdkIsMkNBQXdCO0FBQ3hCLDRDQUFzQjtBQUN0Qiw0Q0FBd0I7QUFDeEIsNENBQWlDO0FBQ2pDLDRDQUE4QjtBQUM5Qiw0Q0FBaUM7QUFDakMsNENBQW9DO0FBQ3BDLDJDQUFtQztBQUNuQyw0Q0FBaUM7QUFDakMsMkNBQWlDO0FBQ2pDLDRDQUFrQztBQUNsQyw0Q0FBK0I7QUFDL0IsNENBQWdDO0FBQ2hDLDRDQUE2QjtBQUM3Qiw0Q0FBMkI7QUFDM0IsNENBQTRCO0FBQzVCLDRDQUE2QjtBQUM3Qiw0Q0FBK0I7QUFDL0IsNENBQTRCO0FBQzVCLDRDQUEwQjtBQUMxQiw0Q0FBd0I7QUFDeEIsNENBQXNCO0FBQ3RCLDRDQUF3QjtBQUN4Qiw0Q0FBa0M7QUFDbEMsNENBQXdCO0FBQ3hCLDRDQUF3QjtBQUN4Qiw0Q0FBdUI7QUFDdkIsNENBQThCO0FBQzlCLDRDQUFtQjtBQUNuQiw0Q0FBbUM7QUFDbkMsNENBQW1CO0FBQ25CLDRDQUF1QjtBQUN2Qiw0Q0FBd0I7QUFDeEIsNENBQXVCO0FBQ3ZCLDRDQUFrQyIsInNvdXJjZXMiOlsic3JjL0xleGljYWwuZGV2LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5mdW5jdGlvbiBjcmVhdGVDb21tYW5kKHR5cGUpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlXG4gIH0gO1xufVxuY29uc3QgU0VMRUNUSU9OX0NIQU5HRV9DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnU0VMRUNUSU9OX0NIQU5HRV9DT01NQU5EJyk7XG5jb25zdCBDTElDS19DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnQ0xJQ0tfQ09NTUFORCcpO1xuY29uc3QgREVMRVRFX0NIQVJBQ1RFUl9DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnREVMRVRFX0NIQVJBQ1RFUl9DT01NQU5EJyk7XG5jb25zdCBJTlNFUlRfTElORV9CUkVBS19DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnSU5TRVJUX0xJTkVfQlJFQUtfQ09NTUFORCcpO1xuY29uc3QgSU5TRVJUX1BBUkFHUkFQSF9DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnSU5TRVJUX1BBUkFHUkFQSF9DT01NQU5EJyk7XG5jb25zdCBDT05UUk9MTEVEX1RFWFRfSU5TRVJUSU9OX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdDT05UUk9MTEVEX1RFWFRfSU5TRVJUSU9OX0NPTU1BTkQnKTtcbmNvbnN0IFBBU1RFX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdQQVNURV9DT01NQU5EJyk7XG5jb25zdCBSRU1PVkVfVEVYVF9DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnUkVNT1ZFX1RFWFRfQ09NTUFORCcpO1xuY29uc3QgREVMRVRFX1dPUkRfQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ0RFTEVURV9XT1JEX0NPTU1BTkQnKTtcbmNvbnN0IERFTEVURV9MSU5FX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdERUxFVEVfTElORV9DT01NQU5EJyk7XG5jb25zdCBGT1JNQVRfVEVYVF9DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnRk9STUFUX1RFWFRfQ09NTUFORCcpO1xuY29uc3QgVU5ET19DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnVU5ET19DT01NQU5EJyk7XG5jb25zdCBSRURPX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdSRURPX0NPTU1BTkQnKTtcbmNvbnN0IEtFWV9ET1dOX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdLRVlET1dOX0NPTU1BTkQnKTtcbmNvbnN0IEtFWV9BUlJPV19SSUdIVF9DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnS0VZX0FSUk9XX1JJR0hUX0NPTU1BTkQnKTtcbmNvbnN0IE1PVkVfVE9fRU5EID0gY3JlYXRlQ29tbWFuZCgnTU9WRV9UT19FTkQnKTtcbmNvbnN0IEtFWV9BUlJPV19MRUZUX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdLRVlfQVJST1dfTEVGVF9DT01NQU5EJyk7XG5jb25zdCBNT1ZFX1RPX1NUQVJUID0gY3JlYXRlQ29tbWFuZCgnTU9WRV9UT19TVEFSVCcpO1xuY29uc3QgS0VZX0FSUk9XX1VQX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdLRVlfQVJST1dfVVBfQ09NTUFORCcpO1xuY29uc3QgS0VZX0FSUk9XX0RPV05fQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ0tFWV9BUlJPV19ET1dOX0NPTU1BTkQnKTtcbmNvbnN0IEtFWV9FTlRFUl9DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnS0VZX0VOVEVSX0NPTU1BTkQnKTtcbmNvbnN0IEtFWV9TUEFDRV9DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnS0VZX1NQQUNFX0NPTU1BTkQnKTtcbmNvbnN0IEtFWV9CQUNLU1BBQ0VfQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ0tFWV9CQUNLU1BBQ0VfQ09NTUFORCcpO1xuY29uc3QgS0VZX0VTQ0FQRV9DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnS0VZX0VTQ0FQRV9DT01NQU5EJyk7XG5jb25zdCBLRVlfREVMRVRFX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdLRVlfREVMRVRFX0NPTU1BTkQnKTtcbmNvbnN0IEtFWV9UQUJfQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ0tFWV9UQUJfQ09NTUFORCcpO1xuY29uc3QgSU5ERU5UX0NPTlRFTlRfQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ0lOREVOVF9DT05URU5UX0NPTU1BTkQnKTtcbmNvbnN0IE9VVERFTlRfQ09OVEVOVF9DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnT1VUREVOVF9DT05URU5UX0NPTU1BTkQnKTtcbmNvbnN0IERST1BfQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ0RST1BfQ09NTUFORCcpO1xuY29uc3QgRk9STUFUX0VMRU1FTlRfQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ0ZPUk1BVF9FTEVNRU5UX0NPTU1BTkQnKTtcbmNvbnN0IERSQUdTVEFSVF9DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnRFJBR1NUQVJUX0NPTU1BTkQnKTtcbmNvbnN0IERSQUdPVkVSX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdEUkFHT1ZFUl9DT01NQU5EJyk7XG5jb25zdCBEUkFHRU5EX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdEUkFHRU5EX0NPTU1BTkQnKTtcbmNvbnN0IENPUFlfQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ0NPUFlfQ09NTUFORCcpO1xuY29uc3QgQ1VUX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdDVVRfQ09NTUFORCcpO1xuY29uc3QgQ0xFQVJfRURJVE9SX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdDTEVBUl9FRElUT1JfQ09NTUFORCcpO1xuY29uc3QgQ0xFQVJfSElTVE9SWV9DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnQ0xFQVJfSElTVE9SWV9DT01NQU5EJyk7XG5jb25zdCBDQU5fUkVET19DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnQ0FOX1JFRE9fQ09NTUFORCcpO1xuY29uc3QgQ0FOX1VORE9fQ09NTUFORCA9IGNyZWF0ZUNvbW1hbmQoJ0NBTl9VTkRPX0NPTU1BTkQnKTtcbmNvbnN0IEZPQ1VTX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdGT0NVU19DT01NQU5EJyk7XG5jb25zdCBCTFVSX0NPTU1BTkQgPSBjcmVhdGVDb21tYW5kKCdCTFVSX0NPTU1BTkQnKTtcbmNvbnN0IEtFWV9NT0RJRklFUl9DT01NQU5EID0gY3JlYXRlQ29tbWFuZCgnS0VZX01PRElGSUVSX0NPTU1BTkQnKTtcblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xuY29uc3QgQ0FOX1VTRV9ET00gPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LmRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgIT09ICd1bmRlZmluZWQnO1xuXG4vKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5jb25zdCBkb2N1bWVudE1vZGUgPSBDQU5fVVNFX0RPTSAmJiAnZG9jdW1lbnRNb2RlJyBpbiBkb2N1bWVudCA/IGRvY3VtZW50LmRvY3VtZW50TW9kZSA6IG51bGw7XG5jb25zdCBJU19BUFBMRSA9IENBTl9VU0VfRE9NICYmIC9NYWN8aVBvZHxpUGhvbmV8aVBhZC8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pO1xuY29uc3QgSVNfRklSRUZPWCA9IENBTl9VU0VfRE9NICYmIC9eKD8hLipTZWFtb25rZXkpKD89LipGaXJlZm94KS4qL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbmNvbnN0IENBTl9VU0VfQkVGT1JFX0lOUFVUID0gQ0FOX1VTRV9ET00gJiYgJ0lucHV0RXZlbnQnIGluIHdpbmRvdyAmJiAhZG9jdW1lbnRNb2RlID8gJ2dldFRhcmdldFJhbmdlcycgaW4gbmV3IHdpbmRvdy5JbnB1dEV2ZW50KCdpbnB1dCcpIDogZmFsc2U7XG5jb25zdCBJU19TQUZBUkkgPSBDQU5fVVNFX0RPTSAmJiAvVmVyc2lvblxcL1tcXGQuXSsuKlNhZmFyaS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbmNvbnN0IElTX0lPUyA9IENBTl9VU0VfRE9NICYmIC9pUGFkfGlQaG9uZXxpUG9kLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmICF3aW5kb3cuTVNTdHJlYW07IC8vIEtlZXAgdGhlc2UgaW4gY2FzZSB3ZSBuZWVkIHRvIHVzZSB0aGVtIGluIHRoZSBmdXR1cmUuXG4vLyBleHBvcnQgY29uc3QgSVNfV0lORE9XUzogYm9vbGVhbiA9IENBTl9VU0VfRE9NICYmIC9XaW4vLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKTtcblxuY29uc3QgSVNfQ0hST01FID0gQ0FOX1VTRV9ET00gJiYgL14oPz0uKkNocm9tZSkuKi9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7IC8vIGV4cG9ydCBjb25zdCBjYW5Vc2VUZXh0SW5wdXRFdmVudDogYm9vbGVhbiA9IENBTl9VU0VfRE9NICYmICdUZXh0RXZlbnQnIGluIHdpbmRvdyAmJiAhZG9jdW1lbnRNb2RlO1xuXG5jb25zdCBJU19BUFBMRV9XRUJLSVQgPSBDQU5fVVNFX0RPTSAmJiAvQXBwbGVXZWJLaXRcXC9bXFxkLl0rLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmICFJU19DSFJPTUU7XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cblxuY29uc3QgRE9NX0VMRU1FTlRfVFlQRSA9IDE7XG5jb25zdCBET01fVEVYVF9UWVBFID0gMzsgLy8gUmVjb25jaWxpbmdcblxuY29uc3QgTk9fRElSVFlfTk9ERVMgPSAwO1xuY29uc3QgSEFTX0RJUlRZX05PREVTID0gMTtcbmNvbnN0IEZVTExfUkVDT05DSUxFID0gMjsgLy8gVGV4dCBub2RlIG1vZGVzXG5cbmNvbnN0IElTX05PUk1BTCA9IDA7XG5jb25zdCBJU19UT0tFTiA9IDE7XG5jb25zdCBJU19TRUdNRU5URUQgPSAyOyAvLyBJU19JTkVSVCA9IDNcbi8vIFRleHQgbm9kZSBmb3JtYXR0aW5nXG5cbmNvbnN0IElTX0JPTEQgPSAxO1xuY29uc3QgSVNfSVRBTElDID0gMSA8PCAxO1xuY29uc3QgSVNfU1RSSUtFVEhST1VHSCA9IDEgPDwgMjtcbmNvbnN0IElTX1VOREVSTElORSA9IDEgPDwgMztcbmNvbnN0IElTX0NPREUgPSAxIDw8IDQ7XG5jb25zdCBJU19TVUJTQ1JJUFQgPSAxIDw8IDU7XG5jb25zdCBJU19TVVBFUlNDUklQVCA9IDEgPDwgNjtcbmNvbnN0IElTX0hJR0hMSUdIVCA9IDEgPDwgNztcbmNvbnN0IElTX0FMTF9GT1JNQVRUSU5HID0gSVNfQk9MRCB8IElTX0lUQUxJQyB8IElTX1NUUklLRVRIUk9VR0ggfCBJU19VTkRFUkxJTkUgfCBJU19DT0RFIHwgSVNfU1VCU0NSSVBUIHwgSVNfU1VQRVJTQ1JJUFQgfCBJU19ISUdITElHSFQ7IC8vIFRleHQgbm9kZSBkZXRhaWxzXG5cbmNvbnN0IElTX0RJUkVDVElPTkxFU1MgPSAxO1xuY29uc3QgSVNfVU5NRVJHRUFCTEUgPSAxIDw8IDE7IC8vIEVsZW1lbnQgbm9kZSBmb3JtYXR0aW5nXG5cbmNvbnN0IElTX0FMSUdOX0xFRlQgPSAxO1xuY29uc3QgSVNfQUxJR05fQ0VOVEVSID0gMjtcbmNvbnN0IElTX0FMSUdOX1JJR0hUID0gMztcbmNvbnN0IElTX0FMSUdOX0pVU1RJRlkgPSA0O1xuY29uc3QgSVNfQUxJR05fU1RBUlQgPSA1O1xuY29uc3QgSVNfQUxJR05fRU5EID0gNjsgLy8gUmVjb25jaWxpYXRpb25cblxuY29uc3QgTk9OX0JSRUFLSU5HX1NQQUNFID0gJ1xcdTAwQTAnO1xuY29uc3QgWkVST19XSURUSF9TUEFDRSA9ICdcXHUyMDBiJzsgLy8gRm9yIGlPUy9TYWZhcmkgd2UgdXNlIGEgbm9uIGJyZWFraW5nIHNwYWNlLCBvdGhlcndpc2UgdGhlIGN1cnNvciBhcHBlYXJzXG4vLyBvdmVybGFwcGluZyB0aGUgY29tcG9zZWQgdGV4dC5cblxuY29uc3QgQ09NUE9TSVRJT05fU1VGRklYID0gSVNfU0FGQVJJIHx8IElTX0lPUyB8fCBJU19BUFBMRV9XRUJLSVQgPyBOT05fQlJFQUtJTkdfU1BBQ0UgOiBaRVJPX1dJRFRIX1NQQUNFO1xuY29uc3QgRE9VQkxFX0xJTkVfQlJFQUsgPSAnXFxuXFxuJzsgLy8gRm9yIEZGLCB3ZSBuZWVkIHRvIHVzZSBhIG5vbi1icmVha2luZyBzcGFjZSwgb3IgaXQgZ2V0cyBjb21wb3NpdGlvblxuLy8gaW4gYSBzdHVjayBzdGF0ZS5cblxuY29uc3QgQ09NUE9TSVRJT05fU1RBUlRfQ0hBUiA9IElTX0ZJUkVGT1ggPyBOT05fQlJFQUtJTkdfU1BBQ0UgOiBDT01QT1NJVElPTl9TVUZGSVg7XG5jb25zdCBSVEwgPSAnXFx1MDU5MS1cXHUwN0ZGXFx1RkIxRC1cXHVGREZEXFx1RkU3MC1cXHVGRUZDJztcbmNvbnN0IExUUiA9ICdBLVphLXpcXHUwMEMwLVxcdTAwRDZcXHUwMEQ4LVxcdTAwRjYnICsgJ1xcdTAwRjgtXFx1MDJCOFxcdTAzMDAtXFx1MDU5MFxcdTA4MDAtXFx1MUZGRlxcdTIwMEVcXHUyQzAwLVxcdUZCMUMnICsgJ1xcdUZFMDAtXFx1RkU2RlxcdUZFRkQtXFx1RkZGRic7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1taXNsZWFkaW5nLWNoYXJhY3Rlci1jbGFzc1xuXG5jb25zdCBSVExfUkVHRVggPSBuZXcgUmVnRXhwKCdeW14nICsgTFRSICsgJ10qWycgKyBSVEwgKyAnXScpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbWlzbGVhZGluZy1jaGFyYWN0ZXItY2xhc3NcblxuY29uc3QgTFRSX1JFR0VYID0gbmV3IFJlZ0V4cCgnXlteJyArIFJUTCArICddKlsnICsgTFRSICsgJ10nKTtcbmNvbnN0IFRFWFRfVFlQRV9UT19GT1JNQVQgPSB7XG4gIGJvbGQ6IElTX0JPTEQsXG4gIGNvZGU6IElTX0NPREUsXG4gIGhpZ2hsaWdodDogSVNfSElHSExJR0hULFxuICBpdGFsaWM6IElTX0lUQUxJQyxcbiAgc3RyaWtldGhyb3VnaDogSVNfU1RSSUtFVEhST1VHSCxcbiAgc3Vic2NyaXB0OiBJU19TVUJTQ1JJUFQsXG4gIHN1cGVyc2NyaXB0OiBJU19TVVBFUlNDUklQVCxcbiAgdW5kZXJsaW5lOiBJU19VTkRFUkxJTkVcbn07XG5jb25zdCBERVRBSUxfVFlQRV9UT19ERVRBSUwgPSB7XG4gIGRpcmVjdGlvbmxlc3M6IElTX0RJUkVDVElPTkxFU1MsXG4gIHVubWVyZ2VhYmxlOiBJU19VTk1FUkdFQUJMRVxufTtcbmNvbnN0IEVMRU1FTlRfVFlQRV9UT19GT1JNQVQgPSB7XG4gIGNlbnRlcjogSVNfQUxJR05fQ0VOVEVSLFxuICBlbmQ6IElTX0FMSUdOX0VORCxcbiAganVzdGlmeTogSVNfQUxJR05fSlVTVElGWSxcbiAgbGVmdDogSVNfQUxJR05fTEVGVCxcbiAgcmlnaHQ6IElTX0FMSUdOX1JJR0hULFxuICBzdGFydDogSVNfQUxJR05fU1RBUlRcbn07XG5jb25zdCBFTEVNRU5UX0ZPUk1BVF9UT19UWVBFID0ge1xuICBbSVNfQUxJR05fQ0VOVEVSXTogJ2NlbnRlcicsXG4gIFtJU19BTElHTl9FTkRdOiAnZW5kJyxcbiAgW0lTX0FMSUdOX0pVU1RJRlldOiAnanVzdGlmeScsXG4gIFtJU19BTElHTl9MRUZUXTogJ2xlZnQnLFxuICBbSVNfQUxJR05fUklHSFRdOiAncmlnaHQnLFxuICBbSVNfQUxJR05fU1RBUlRdOiAnc3RhcnQnXG59O1xuY29uc3QgVEVYVF9NT0RFX1RPX1RZUEUgPSB7XG4gIG5vcm1hbDogSVNfTk9STUFMLFxuICBzZWdtZW50ZWQ6IElTX1NFR01FTlRFRCxcbiAgdG9rZW46IElTX1RPS0VOXG59O1xuY29uc3QgVEVYVF9UWVBFX1RPX01PREUgPSB7XG4gIFtJU19OT1JNQUxdOiAnbm9ybWFsJyxcbiAgW0lTX1NFR01FTlRFRF06ICdzZWdtZW50ZWQnLFxuICBbSVNfVE9LRU5dOiAndG9rZW4nXG59O1xuXG4vKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5cbmNvbnN0IFRFWFRfTVVUQVRJT05fVkFSSUFOQ0UgPSAxMDA7XG5sZXQgaXNQcm9jZXNzaW5nTXV0YXRpb25zID0gZmFsc2U7XG5sZXQgbGFzdFRleHRFbnRyeVRpbWVTdGFtcCA9IDA7XG5mdW5jdGlvbiBnZXRJc1Byb2Nlc3NzaW5nTXV0YXRpb25zKCkge1xuICByZXR1cm4gaXNQcm9jZXNzaW5nTXV0YXRpb25zO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVUaW1lU3RhbXAoZXZlbnQpIHtcbiAgbGFzdFRleHRFbnRyeVRpbWVTdGFtcCA9IGV2ZW50LnRpbWVTdGFtcDtcbn1cblxuZnVuY3Rpb24gaW5pdFRleHRFbnRyeUxpc3RlbmVyKGVkaXRvcikge1xuICBpZiAobGFzdFRleHRFbnRyeVRpbWVTdGFtcCA9PT0gMCkge1xuICAgIGdldFdpbmRvdyhlZGl0b3IpLmFkZEV2ZW50TGlzdGVuZXIoJ3RleHRJbnB1dCcsIHVwZGF0ZVRpbWVTdGFtcCwgdHJ1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNNYW5hZ2VkTGluZUJyZWFrKGRvbSwgdGFyZ2V0LCBlZGl0b3IpIHtcbiAgcmV0dXJuICgvLyBAdHMtZXhwZWN0LWVycm9yOiBpbnRlcm5hbCBmaWVsZFxuICAgIHRhcmdldC5fX2xleGljYWxMaW5lQnJlYWsgPT09IGRvbSB8fCAvLyBAdHMtaWdub3JlIFdlIGludGVudGlvbmFsbHkgYWRkIHRoaXMgdG8gdGhlIE5vZGUuXG4gICAgZG9tW2BfX2xleGljYWxLZXlfJHtlZGl0b3IuX2tleX1gXSAhPT0gdW5kZWZpbmVkXG4gICk7XG59XG5cbmZ1bmN0aW9uIGdldExhc3RTZWxlY3Rpb24oZWRpdG9yKSB7XG4gIHJldHVybiBlZGl0b3IuZ2V0RWRpdG9yU3RhdGUoKS5yZWFkKCgpID0+IHtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSAkZ2V0U2VsZWN0aW9uKCk7XG4gICAgcmV0dXJuIHNlbGVjdGlvbiAhPT0gbnVsbCA/IHNlbGVjdGlvbi5jbG9uZSgpIDogbnVsbDtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVRleHRNdXRhdGlvbih0YXJnZXQsIG5vZGUsIGVkaXRvcikge1xuICBjb25zdCBkb21TZWxlY3Rpb24gPSBnZXRET01TZWxlY3Rpb24oZWRpdG9yLl93aW5kb3cpO1xuICBsZXQgYW5jaG9yT2Zmc2V0ID0gbnVsbDtcbiAgbGV0IGZvY3VzT2Zmc2V0ID0gbnVsbDtcblxuICBpZiAoZG9tU2VsZWN0aW9uICE9PSBudWxsICYmIGRvbVNlbGVjdGlvbi5hbmNob3JOb2RlID09PSB0YXJnZXQpIHtcbiAgICBhbmNob3JPZmZzZXQgPSBkb21TZWxlY3Rpb24uYW5jaG9yT2Zmc2V0O1xuICAgIGZvY3VzT2Zmc2V0ID0gZG9tU2VsZWN0aW9uLmZvY3VzT2Zmc2V0O1xuICB9XG5cbiAgY29uc3QgdGV4dCA9IHRhcmdldC5ub2RlVmFsdWU7XG5cbiAgaWYgKHRleHQgIT09IG51bGwpIHtcbiAgICAkdXBkYXRlVGV4dE5vZGVGcm9tRE9NQ29udGVudChub2RlLCB0ZXh0LCBhbmNob3JPZmZzZXQsIGZvY3VzT2Zmc2V0LCBmYWxzZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2hvdWxkVXBkYXRlVGV4dE5vZGVGcm9tTXV0YXRpb24oc2VsZWN0aW9uLCB0YXJnZXRET00sIHRhcmdldE5vZGUpIHtcbiAgaWYgKCRpc1JhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikpIHtcbiAgICBjb25zdCBhbmNob3JOb2RlID0gc2VsZWN0aW9uLmFuY2hvci5nZXROb2RlKCk7XG5cbiAgICBpZiAoYW5jaG9yTm9kZS5pcyh0YXJnZXROb2RlKSAmJiBzZWxlY3Rpb24uZm9ybWF0ICE9PSBhbmNob3JOb2RlLmdldEZvcm1hdCgpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldERPTS5ub2RlVHlwZSA9PT0gRE9NX1RFWFRfVFlQRSAmJiB0YXJnZXROb2RlLmlzQXR0YWNoZWQoKTtcbn1cblxuZnVuY3Rpb24gJGZsdXNoTXV0YXRpb25zJDEoZWRpdG9yLCBtdXRhdGlvbnMsIG9ic2VydmVyKSB7XG4gIGlzUHJvY2Vzc2luZ011dGF0aW9ucyA9IHRydWU7XG4gIGNvbnN0IHNob3VsZEZsdXNoVGV4dE11dGF0aW9ucyA9IHBlcmZvcm1hbmNlLm5vdygpIC0gbGFzdFRleHRFbnRyeVRpbWVTdGFtcCA+IFRFWFRfTVVUQVRJT05fVkFSSUFOQ0U7XG5cbiAgdHJ5IHtcbiAgICB1cGRhdGVFZGl0b3IoZWRpdG9yLCAoKSA9PiB7XG4gICAgICBjb25zdCBzZWxlY3Rpb24gPSAkZ2V0U2VsZWN0aW9uKCkgfHwgZ2V0TGFzdFNlbGVjdGlvbihlZGl0b3IpO1xuICAgICAgY29uc3QgYmFkRE9NVGFyZ2V0cyA9IG5ldyBNYXAoKTtcbiAgICAgIGNvbnN0IHJvb3RFbGVtZW50ID0gZWRpdG9yLmdldFJvb3RFbGVtZW50KCk7IC8vIFdlIHVzZSB0aGUgY3VycmVudCBlZGl0b3Igc3RhdGUsIGFzIHRoYXQgcmVmbGVjdHMgd2hhdCBpc1xuICAgICAgLy8gYWN0dWFsbHkgXCJvbiBzY3JlZW5cIi5cblxuICAgICAgY29uc3QgY3VycmVudEVkaXRvclN0YXRlID0gZWRpdG9yLl9lZGl0b3JTdGF0ZTtcbiAgICAgIGNvbnN0IGJsb2NrQ3Vyc29yRWxlbWVudCA9IGVkaXRvci5fYmxvY2tDdXJzb3JFbGVtZW50O1xuICAgICAgbGV0IHNob3VsZFJldmVydFNlbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgbGV0IHBvc3NpYmxlVGV4dEZvckZpcmVmb3hQYXN0ZSA9ICcnO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG11dGF0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBtdXRhdGlvbiA9IG11dGF0aW9uc1tpXTtcbiAgICAgICAgY29uc3QgdHlwZSA9IG11dGF0aW9uLnR5cGU7XG4gICAgICAgIGNvbnN0IHRhcmdldERPTSA9IG11dGF0aW9uLnRhcmdldDtcbiAgICAgICAgbGV0IHRhcmdldE5vZGUgPSAkZ2V0TmVhcmVzdE5vZGVGcm9tRE9NTm9kZSh0YXJnZXRET00sIGN1cnJlbnRFZGl0b3JTdGF0ZSk7XG5cbiAgICAgICAgaWYgKHRhcmdldE5vZGUgPT09IG51bGwgJiYgdGFyZ2V0RE9NICE9PSByb290RWxlbWVudCB8fCAkaXNEZWNvcmF0b3JOb2RlKHRhcmdldE5vZGUpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZSA9PT0gJ2NoYXJhY3RlckRhdGEnKSB7XG4gICAgICAgICAgLy8gVGV4dCBtdXRhdGlvbnMgYXJlIGRlZmVycmVkIGFuZCBwYXNzZWQgdG8gbXV0YXRpb24gbGlzdGVuZXJzIHRvIGJlXG4gICAgICAgICAgLy8gcHJvY2Vzc2VkIG91dHNpZGUgb2YgdGhlIExleGljYWwgZW5naW5lLlxuICAgICAgICAgIGlmIChzaG91bGRGbHVzaFRleHRNdXRhdGlvbnMgJiYgJGlzVGV4dE5vZGUodGFyZ2V0Tm9kZSkgJiYgc2hvdWxkVXBkYXRlVGV4dE5vZGVGcm9tTXV0YXRpb24oc2VsZWN0aW9uLCB0YXJnZXRET00sIHRhcmdldE5vZGUpKSB7XG4gICAgICAgICAgICBoYW5kbGVUZXh0TXV0YXRpb24oIC8vIG5vZGVUeXBlID09PSBET01fVEVYVF9UWVBFIGlzIGEgVGV4dCBET00gbm9kZVxuICAgICAgICAgICAgICB0YXJnZXRET00sIHRhcmdldE5vZGUsIGVkaXRvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdjaGlsZExpc3QnKSB7XG4gICAgICAgICAgc2hvdWxkUmV2ZXJ0U2VsZWN0aW9uID0gdHJ1ZTsgLy8gV2UgYXR0ZW1wdCB0byBcInVuZG9cIiBhbnkgY2hhbmdlcyB0aGF0IGhhdmUgb2NjdXJyZWQgb3V0c2lkZVxuICAgICAgICAgIC8vIG9mIExleGljYWwuIFdlIHdhbnQgTGV4aWNhbCdzIGVkaXRvciBzdGF0ZSB0byBiZSBzb3VyY2Ugb2YgdHJ1dGguXG4gICAgICAgICAgLy8gVG8gdGhlIHVzZXIsIHRoZXNlIHdpbGwgbG9vayBsaWtlIG5vLW9wcy5cblxuICAgICAgICAgIGNvbnN0IGFkZGVkRE9NcyA9IG11dGF0aW9uLmFkZGVkTm9kZXM7XG5cbiAgICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IGFkZGVkRE9Ncy5sZW5ndGg7IHMrKykge1xuICAgICAgICAgICAgY29uc3QgYWRkZWRET00gPSBhZGRlZERPTXNbc107XG4gICAgICAgICAgICBjb25zdCBub2RlID0gZ2V0Tm9kZUZyb21ET01Ob2RlKGFkZGVkRE9NKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudERPTSA9IGFkZGVkRE9NLnBhcmVudE5vZGU7XG5cbiAgICAgICAgICAgIGlmIChwYXJlbnRET00gIT0gbnVsbCAmJiBhZGRlZERPTSAhPT0gYmxvY2tDdXJzb3JFbGVtZW50ICYmIG5vZGUgPT09IG51bGwgJiYgKGFkZGVkRE9NLm5vZGVOYW1lICE9PSAnQlInIHx8ICFpc01hbmFnZWRMaW5lQnJlYWsoYWRkZWRET00sIHBhcmVudERPTSwgZWRpdG9yKSkpIHtcbiAgICAgICAgICAgICAgaWYgKElTX0ZJUkVGT1gpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwb3NzaWJsZVRleHQgPSBhZGRlZERPTS5pbm5lclRleHQgfHwgYWRkZWRET00ubm9kZVZhbHVlO1xuXG4gICAgICAgICAgICAgICAgaWYgKHBvc3NpYmxlVGV4dCkge1xuICAgICAgICAgICAgICAgICAgcG9zc2libGVUZXh0Rm9yRmlyZWZveFBhc3RlICs9IHBvc3NpYmxlVGV4dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBwYXJlbnRET00ucmVtb3ZlQ2hpbGQoYWRkZWRET00pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHJlbW92ZWRET01zID0gbXV0YXRpb24ucmVtb3ZlZE5vZGVzO1xuICAgICAgICAgIGNvbnN0IHJlbW92ZWRET01zTGVuZ3RoID0gcmVtb3ZlZERPTXMubGVuZ3RoO1xuXG4gICAgICAgICAgaWYgKHJlbW92ZWRET01zTGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbGV0IHVucmVtb3ZlZEJScyA9IDA7XG5cbiAgICAgICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgcmVtb3ZlZERPTXNMZW5ndGg7IHMrKykge1xuICAgICAgICAgICAgICBjb25zdCByZW1vdmVkRE9NID0gcmVtb3ZlZERPTXNbc107XG5cbiAgICAgICAgICAgICAgaWYgKHJlbW92ZWRET00ubm9kZU5hbWUgPT09ICdCUicgJiYgaXNNYW5hZ2VkTGluZUJyZWFrKHJlbW92ZWRET00sIHRhcmdldERPTSwgZWRpdG9yKSB8fCBibG9ja0N1cnNvckVsZW1lbnQgPT09IHJlbW92ZWRET00pIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRET00uYXBwZW5kQ2hpbGQocmVtb3ZlZERPTSk7XG4gICAgICAgICAgICAgICAgdW5yZW1vdmVkQlJzKys7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJlbW92ZWRET01zTGVuZ3RoICE9PSB1bnJlbW92ZWRCUnMpIHtcbiAgICAgICAgICAgICAgaWYgKHRhcmdldERPTSA9PT0gcm9vdEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXROb2RlID0gaW50ZXJuYWxHZXRSb290KGN1cnJlbnRFZGl0b3JTdGF0ZSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBiYWRET01UYXJnZXRzLnNldCh0YXJnZXRET00sIHRhcmdldE5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSAvLyBOb3cgd2UgcHJvY2VzcyBlYWNoIG9mIHRoZSB1bmlxdWUgdGFyZ2V0IG5vZGVzLCBhdHRlbXB0aW5nXG4gICAgICAvLyB0byByZXN0b3JlIHRoZWlyIGNvbnRlbnRzIGJhY2sgdG8gdGhlIHNvdXJjZSBvZiB0cnV0aCwgd2hpY2hcbiAgICAgIC8vIGlzIExleGljYWwncyBcImN1cnJlbnRcIiBlZGl0b3Igc3RhdGUuIFRoaXMgaXMgYmFzaWNhbGx5IGxpa2VcbiAgICAgIC8vIGFuIGludGVybmFsIHJldmVydCBvbiB0aGUgRE9NLlxuXG5cbiAgICAgIGlmIChiYWRET01UYXJnZXRzLnNpemUgPiAwKSB7XG4gICAgICAgIGZvciAoY29uc3QgW3RhcmdldERPTSwgdGFyZ2V0Tm9kZV0gb2YgYmFkRE9NVGFyZ2V0cykge1xuICAgICAgICAgIGlmICgkaXNFbGVtZW50Tm9kZSh0YXJnZXROb2RlKSkge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRLZXlzID0gdGFyZ2V0Tm9kZS5nZXRDaGlsZHJlbktleXMoKTtcbiAgICAgICAgICAgIGxldCBjdXJyZW50RE9NID0gdGFyZ2V0RE9NLmZpcnN0Q2hpbGQ7XG5cbiAgICAgICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgY2hpbGRLZXlzLmxlbmd0aDsgcysrKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGtleSA9IGNoaWxkS2V5c1tzXTtcbiAgICAgICAgICAgICAgY29uc3QgY29ycmVjdERPTSA9IGVkaXRvci5nZXRFbGVtZW50QnlLZXkoa2V5KTtcblxuICAgICAgICAgICAgICBpZiAoY29ycmVjdERPTSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKGN1cnJlbnRET00gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRhcmdldERPTS5hcHBlbmRDaGlsZChjb3JyZWN0RE9NKTtcbiAgICAgICAgICAgICAgICBjdXJyZW50RE9NID0gY29ycmVjdERPTTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50RE9NICE9PSBjb3JyZWN0RE9NKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0RE9NLnJlcGxhY2VDaGlsZChjb3JyZWN0RE9NLCBjdXJyZW50RE9NKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGN1cnJlbnRET00gPSBjdXJyZW50RE9NLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoJGlzVGV4dE5vZGUodGFyZ2V0Tm9kZSkpIHtcbiAgICAgICAgICAgIHRhcmdldE5vZGUubWFya0RpcnR5KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IC8vIENhcHR1cmUgYWxsIHRoZSBtdXRhdGlvbnMgbWFkZSBkdXJpbmcgdGhpcyBmdW5jdGlvbi4gVGhpc1xuICAgICAgLy8gYWxzbyBwcmV2ZW50cyB1cyBoYXZpbmcgdG8gcHJvY2VzcyB0aGVtIG9uIHRoZSBuZXh0IGN5Y2xlXG4gICAgICAvLyBvZiBvbk11dGF0aW9uLCBhcyB0aGVzZSBtdXRhdGlvbnMgd2VyZSBtYWRlIGJ5IHVzLlxuXG5cbiAgICAgIGNvbnN0IHJlY29yZHMgPSBvYnNlcnZlci50YWtlUmVjb3JkcygpOyAvLyBDaGVjayBmb3IgYW55IHJhbmRvbSBhdXRvLWFkZGVkIDxicj4gZWxlbWVudHMsIGFuZCByZW1vdmUgdGhlbS5cbiAgICAgIC8vIFRoZXNlIGdldCBhZGRlZCBieSB0aGUgYnJvd3NlciB3aGVuIHdlIHVuZG8gdGhlIGFib3ZlIG11dGF0aW9uc1xuICAgICAgLy8gYW5kIHRoaXMgY2FuIGxlYWQgdG8gYSBicm9rZW4gVUkuXG5cbiAgICAgIGlmIChyZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWNvcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgcmVjb3JkID0gcmVjb3Jkc1tpXTtcbiAgICAgICAgICBjb25zdCBhZGRlZE5vZGVzID0gcmVjb3JkLmFkZGVkTm9kZXM7XG4gICAgICAgICAgY29uc3QgdGFyZ2V0ID0gcmVjb3JkLnRhcmdldDtcblxuICAgICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgYWRkZWROb2Rlcy5sZW5ndGg7IHMrKykge1xuICAgICAgICAgICAgY29uc3QgYWRkZWRET00gPSBhZGRlZE5vZGVzW3NdO1xuICAgICAgICAgICAgY29uc3QgcGFyZW50RE9NID0gYWRkZWRET00ucGFyZW50Tm9kZTtcblxuICAgICAgICAgICAgaWYgKHBhcmVudERPTSAhPSBudWxsICYmIGFkZGVkRE9NLm5vZGVOYW1lID09PSAnQlInICYmICFpc01hbmFnZWRMaW5lQnJlYWsoYWRkZWRET00sIHRhcmdldCwgZWRpdG9yKSkge1xuICAgICAgICAgICAgICBwYXJlbnRET00ucmVtb3ZlQ2hpbGQoYWRkZWRET00pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSAvLyBDbGVhciBhbnkgb2YgdGhvc2UgcmVtb3ZhbCBtdXRhdGlvbnNcblxuXG4gICAgICAgIG9ic2VydmVyLnRha2VSZWNvcmRzKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzZWxlY3Rpb24gIT09IG51bGwpIHtcbiAgICAgICAgaWYgKHNob3VsZFJldmVydFNlbGVjdGlvbikge1xuICAgICAgICAgIHNlbGVjdGlvbi5kaXJ0eSA9IHRydWU7XG4gICAgICAgICAgJHNldFNlbGVjdGlvbihzZWxlY3Rpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKElTX0ZJUkVGT1ggJiYgaXNGaXJlZm94Q2xpcGJvYXJkRXZlbnRzKGVkaXRvcikpIHtcbiAgICAgICAgICBzZWxlY3Rpb24uaW5zZXJ0UmF3VGV4dChwb3NzaWJsZVRleHRGb3JGaXJlZm94UGFzdGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0gZmluYWxseSB7XG4gICAgaXNQcm9jZXNzaW5nTXV0YXRpb25zID0gZmFsc2U7XG4gIH1cbn1cbmZ1bmN0aW9uIGZsdXNoUm9vdE11dGF0aW9ucyhlZGl0b3IpIHtcbiAgY29uc3Qgb2JzZXJ2ZXIgPSBlZGl0b3IuX29ic2VydmVyO1xuXG4gIGlmIChvYnNlcnZlciAhPT0gbnVsbCkge1xuICAgIGNvbnN0IG11dGF0aW9ucyA9IG9ic2VydmVyLnRha2VSZWNvcmRzKCk7XG4gICAgJGZsdXNoTXV0YXRpb25zJDEoZWRpdG9yLCBtdXRhdGlvbnMsIG9ic2VydmVyKTtcbiAgfVxufVxuZnVuY3Rpb24gaW5pdE11dGF0aW9uT2JzZXJ2ZXIoZWRpdG9yKSB7XG4gIGluaXRUZXh0RW50cnlMaXN0ZW5lcihlZGl0b3IpO1xuICBlZGl0b3IuX29ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucywgb2JzZXJ2ZXIpID0+IHtcbiAgICAkZmx1c2hNdXRhdGlvbnMkMShlZGl0b3IsIG11dGF0aW9ucywgb2JzZXJ2ZXIpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xubGV0IGtleUNvdW50ZXIgPSAxO1xuZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21LZXkoKSB7XG4gIHJldHVybiAnJyArIGtleUNvdW50ZXIrKztcbn1cbmZ1bmN0aW9uIGdldFJlZ2lzdGVyZWROb2RlT3JUaHJvdyhlZGl0b3IsIG5vZGVUeXBlKSB7XG4gIGNvbnN0IHJlZ2lzdGVyZWROb2RlID0gZWRpdG9yLl9ub2Rlcy5nZXQobm9kZVR5cGUpO1xuXG4gIGlmIChyZWdpc3RlcmVkTm9kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAge1xuICAgICAgdGhyb3cgRXJyb3IoYHJlZ2lzdGVyZWROb2RlOiBUeXBlICR7bm9kZVR5cGV9IG5vdCBmb3VuZGApO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZWdpc3RlcmVkTm9kZTtcbn1cbmNvbnN0IHNjaGVkdWxlTWljcm9UYXNrID0gdHlwZW9mIHF1ZXVlTWljcm90YXNrID09PSAnZnVuY3Rpb24nID8gcXVldWVNaWNyb3Rhc2sgOiBmbiA9PiB7XG4gIC8vIE5vIHdpbmRvdyBwcmVmaXggaW50ZW5kZWQgKCMxNDAwKVxuICBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZuKTtcbn07XG5mdW5jdGlvbiAkaXNTZWxlY3Rpb25DYXB0dXJlZEluRGVjb3JhdG9yKG5vZGUpIHtcbiAgcmV0dXJuICRpc0RlY29yYXRvck5vZGUoJGdldE5lYXJlc3ROb2RlRnJvbURPTU5vZGUobm9kZSkpO1xufVxuZnVuY3Rpb24gaXNTZWxlY3Rpb25DYXB0dXJlZEluRGVjb3JhdG9ySW5wdXQoYW5jaG9yRE9NKSB7XG4gIGNvbnN0IGFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuXG4gIGlmIChhY3RpdmVFbGVtZW50ID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY29uc3Qgbm9kZU5hbWUgPSBhY3RpdmVFbGVtZW50Lm5vZGVOYW1lO1xuICByZXR1cm4gJGlzRGVjb3JhdG9yTm9kZSgkZ2V0TmVhcmVzdE5vZGVGcm9tRE9NTm9kZShhbmNob3JET00pKSAmJiAobm9kZU5hbWUgPT09ICdJTlBVVCcgfHwgbm9kZU5hbWUgPT09ICdURVhUQVJFQScgfHwgYWN0aXZlRWxlbWVudC5jb250ZW50RWRpdGFibGUgPT09ICd0cnVlJyAmJiAvLyBAdHMtaWdub3JlIGl0ZXJuYWwgZmllbGRcbiAgICBhY3RpdmVFbGVtZW50Ll9fbGV4aWNhbEVkaXRvciA9PSBudWxsKTtcbn1cbmZ1bmN0aW9uIGlzU2VsZWN0aW9uV2l0aGluRWRpdG9yKGVkaXRvciwgYW5jaG9yRE9NLCBmb2N1c0RPTSkge1xuICBjb25zdCByb290RWxlbWVudCA9IGVkaXRvci5nZXRSb290RWxlbWVudCgpO1xuXG4gIHRyeSB7XG4gICAgcmV0dXJuIHJvb3RFbGVtZW50ICE9PSBudWxsICYmIHJvb3RFbGVtZW50LmNvbnRhaW5zKGFuY2hvckRPTSkgJiYgcm9vdEVsZW1lbnQuY29udGFpbnMoZm9jdXNET00pICYmIC8vIElnbm9yZSBpZiBzZWxlY3Rpb24gaXMgd2l0aGluIG5lc3RlZCBlZGl0b3JcbiAgICAgIGFuY2hvckRPTSAhPT0gbnVsbCAmJiAhaXNTZWxlY3Rpb25DYXB0dXJlZEluRGVjb3JhdG9ySW5wdXQoYW5jaG9yRE9NKSAmJiBnZXROZWFyZXN0RWRpdG9yRnJvbURPTU5vZGUoYW5jaG9yRE9NKSA9PT0gZWRpdG9yO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0TmVhcmVzdEVkaXRvckZyb21ET01Ob2RlKG5vZGUpIHtcbiAgbGV0IGN1cnJlbnROb2RlID0gbm9kZTtcblxuICB3aGlsZSAoY3VycmVudE5vZGUgIT0gbnVsbCkge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IGludGVybmFsIGZpZWxkXG4gICAgY29uc3QgZWRpdG9yID0gY3VycmVudE5vZGUuX19sZXhpY2FsRWRpdG9yO1xuXG4gICAgaWYgKGVkaXRvciAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gZWRpdG9yO1xuICAgIH1cblxuICAgIGN1cnJlbnROb2RlID0gZ2V0UGFyZW50RWxlbWVudChjdXJyZW50Tm9kZSk7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGdldFRleHREaXJlY3Rpb24odGV4dCkge1xuICBpZiAoUlRMX1JFR0VYLnRlc3QodGV4dCkpIHtcbiAgICByZXR1cm4gJ3J0bCc7XG4gIH1cblxuICBpZiAoTFRSX1JFR0VYLnRlc3QodGV4dCkpIHtcbiAgICByZXR1cm4gJ2x0cic7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uICRpc1Rva2VuT3JTZWdtZW50ZWQobm9kZSkge1xuICByZXR1cm4gbm9kZS5pc1Rva2VuKCkgfHwgbm9kZS5pc1NlZ21lbnRlZCgpO1xufVxuXG5mdW5jdGlvbiBpc0RPTU5vZGVMZXhpY2FsVGV4dE5vZGUobm9kZSkge1xuICByZXR1cm4gbm9kZS5ub2RlVHlwZSA9PT0gRE9NX1RFWFRfVFlQRTtcbn1cblxuZnVuY3Rpb24gZ2V0RE9NVGV4dE5vZGUoZWxlbWVudCkge1xuICBsZXQgbm9kZSA9IGVsZW1lbnQ7XG5cbiAgd2hpbGUgKG5vZGUgIT0gbnVsbCkge1xuICAgIGlmIChpc0RPTU5vZGVMZXhpY2FsVGV4dE5vZGUobm9kZSkpIHtcbiAgICAgIHJldHVybiBub2RlO1xuICAgIH1cblxuICAgIG5vZGUgPSBub2RlLmZpcnN0Q2hpbGQ7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIHRvZ2dsZVRleHRGb3JtYXRUeXBlKGZvcm1hdCwgdHlwZSwgYWxpZ25XaXRoRm9ybWF0KSB7XG4gIGNvbnN0IGFjdGl2ZUZvcm1hdCA9IFRFWFRfVFlQRV9UT19GT1JNQVRbdHlwZV07XG4gIGNvbnN0IGlzU3RhdGVGbGFnUHJlc2VudCA9IGZvcm1hdCAmIGFjdGl2ZUZvcm1hdDtcblxuICBpZiAoaXNTdGF0ZUZsYWdQcmVzZW50ICYmIChhbGlnbldpdGhGb3JtYXQgPT09IG51bGwgfHwgKGFsaWduV2l0aEZvcm1hdCAmIGFjdGl2ZUZvcm1hdCkgPT09IDApKSB7XG4gICAgLy8gUmVtb3ZlIHRoZSBzdGF0ZSBmbGFnLlxuICAgIHJldHVybiBmb3JtYXQgXiBhY3RpdmVGb3JtYXQ7XG4gIH1cblxuICBpZiAoYWxpZ25XaXRoRm9ybWF0ID09PSBudWxsIHx8IGFsaWduV2l0aEZvcm1hdCAmIGFjdGl2ZUZvcm1hdCkge1xuICAgIC8vIEFkZCB0aGUgc3RhdGUgZmxhZy5cbiAgICByZXR1cm4gZm9ybWF0IHwgYWN0aXZlRm9ybWF0O1xuICB9XG5cbiAgcmV0dXJuIGZvcm1hdDtcbn1cbmZ1bmN0aW9uICRpc0xlYWZOb2RlKG5vZGUpIHtcbiAgcmV0dXJuICRpc1RleHROb2RlKG5vZGUpIHx8ICRpc0xpbmVCcmVha05vZGUobm9kZSkgfHwgJGlzRGVjb3JhdG9yTm9kZShub2RlKTtcbn1cbmZ1bmN0aW9uICRzZXROb2RlS2V5KG5vZGUsIGV4aXN0aW5nS2V5KSB7XG4gIGlmIChleGlzdGluZ0tleSAhPSBudWxsKSB7XG4gICAgbm9kZS5fX2tleSA9IGV4aXN0aW5nS2V5O1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGVycm9yT25SZWFkT25seSgpO1xuICBlcnJvck9uSW5maW5pdGVUcmFuc2Zvcm1zKCk7XG4gIGNvbnN0IGVkaXRvciA9IGdldEFjdGl2ZUVkaXRvcigpO1xuICBjb25zdCBlZGl0b3JTdGF0ZSA9IGdldEFjdGl2ZUVkaXRvclN0YXRlKCk7XG4gIGNvbnN0IGtleSA9IGdlbmVyYXRlUmFuZG9tS2V5KCk7XG5cbiAgZWRpdG9yU3RhdGUuX25vZGVNYXAuc2V0KGtleSwgbm9kZSk7IC8vIFRPRE8gU3BsaXQgdGhpcyBmdW5jdGlvbiBpbnRvIGxlYWYvZWxlbWVudFxuXG5cbiAgaWYgKCRpc0VsZW1lbnROb2RlKG5vZGUpKSB7XG4gICAgZWRpdG9yLl9kaXJ0eUVsZW1lbnRzLnNldChrZXksIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIGVkaXRvci5fZGlydHlMZWF2ZXMuYWRkKGtleSk7XG4gIH1cblxuICBlZGl0b3IuX2Nsb25lTm90TmVlZGVkLmFkZChrZXkpO1xuXG4gIGVkaXRvci5fZGlydHlUeXBlID0gSEFTX0RJUlRZX05PREVTO1xuICBub2RlLl9fa2V5ID0ga2V5O1xufVxuXG5mdW5jdGlvbiBpbnRlcm5hbE1hcmtQYXJlbnRFbGVtZW50c0FzRGlydHkocGFyZW50S2V5LCBub2RlTWFwLCBkaXJ0eUVsZW1lbnRzKSB7XG4gIGxldCBuZXh0UGFyZW50S2V5ID0gcGFyZW50S2V5O1xuXG4gIHdoaWxlIChuZXh0UGFyZW50S2V5ICE9PSBudWxsKSB7XG4gICAgaWYgKGRpcnR5RWxlbWVudHMuaGFzKG5leHRQYXJlbnRLZXkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgbm9kZSA9IG5vZGVNYXAuZ2V0KG5leHRQYXJlbnRLZXkpO1xuXG4gICAgaWYgKG5vZGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgZGlydHlFbGVtZW50cy5zZXQobmV4dFBhcmVudEtleSwgZmFsc2UpO1xuICAgIG5leHRQYXJlbnRLZXkgPSBub2RlLl9fcGFyZW50O1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUZyb21QYXJlbnQobm9kZSkge1xuICBjb25zdCBvbGRQYXJlbnQgPSBub2RlLmdldFBhcmVudCgpO1xuXG4gIGlmIChvbGRQYXJlbnQgIT09IG51bGwpIHtcbiAgICBjb25zdCB3cml0YWJsZU5vZGUgPSBub2RlLmdldFdyaXRhYmxlKCk7XG4gICAgY29uc3Qgd3JpdGFibGVQYXJlbnQgPSBvbGRQYXJlbnQuZ2V0V3JpdGFibGUoKTtcbiAgICBjb25zdCBwcmV2U2libGluZyA9IG5vZGUuZ2V0UHJldmlvdXNTaWJsaW5nKCk7XG4gICAgY29uc3QgbmV4dFNpYmxpbmcgPSBub2RlLmdldE5leHRTaWJsaW5nKCk7IC8vIFRPRE86IHRoaXMgZnVuY3Rpb24gZHVwbGljYXRlcyBhIGJ1bmNoIG9mIG9wZXJhdGlvbnMsIGNhbiBiZSBzaW1wbGlmaWVkLlxuXG4gICAgaWYgKHByZXZTaWJsaW5nID09PSBudWxsKSB7XG4gICAgICBpZiAobmV4dFNpYmxpbmcgIT09IG51bGwpIHtcbiAgICAgICAgY29uc3Qgd3JpdGFibGVOZXh0U2libGluZyA9IG5leHRTaWJsaW5nLmdldFdyaXRhYmxlKCk7XG4gICAgICAgIHdyaXRhYmxlUGFyZW50Ll9fZmlyc3QgPSBuZXh0U2libGluZy5fX2tleTtcbiAgICAgICAgd3JpdGFibGVOZXh0U2libGluZy5fX3ByZXYgPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd3JpdGFibGVQYXJlbnQuX19maXJzdCA9IG51bGw7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHdyaXRhYmxlUHJldlNpYmxpbmcgPSBwcmV2U2libGluZy5nZXRXcml0YWJsZSgpO1xuXG4gICAgICBpZiAobmV4dFNpYmxpbmcgIT09IG51bGwpIHtcbiAgICAgICAgY29uc3Qgd3JpdGFibGVOZXh0U2libGluZyA9IG5leHRTaWJsaW5nLmdldFdyaXRhYmxlKCk7XG4gICAgICAgIHdyaXRhYmxlTmV4dFNpYmxpbmcuX19wcmV2ID0gd3JpdGFibGVQcmV2U2libGluZy5fX2tleTtcbiAgICAgICAgd3JpdGFibGVQcmV2U2libGluZy5fX25leHQgPSB3cml0YWJsZU5leHRTaWJsaW5nLl9fa2V5O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd3JpdGFibGVQcmV2U2libGluZy5fX25leHQgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICB3cml0YWJsZU5vZGUuX19wcmV2ID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAobmV4dFNpYmxpbmcgPT09IG51bGwpIHtcbiAgICAgIGlmIChwcmV2U2libGluZyAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCB3cml0YWJsZVByZXZTaWJsaW5nID0gcHJldlNpYmxpbmcuZ2V0V3JpdGFibGUoKTtcbiAgICAgICAgd3JpdGFibGVQYXJlbnQuX19sYXN0ID0gcHJldlNpYmxpbmcuX19rZXk7XG4gICAgICAgIHdyaXRhYmxlUHJldlNpYmxpbmcuX19uZXh0ID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdyaXRhYmxlUGFyZW50Ll9fbGFzdCA9IG51bGw7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHdyaXRhYmxlTmV4dFNpYmxpbmcgPSBuZXh0U2libGluZy5nZXRXcml0YWJsZSgpO1xuXG4gICAgICBpZiAocHJldlNpYmxpbmcgIT09IG51bGwpIHtcbiAgICAgICAgY29uc3Qgd3JpdGFibGVQcmV2U2libGluZyA9IHByZXZTaWJsaW5nLmdldFdyaXRhYmxlKCk7XG4gICAgICAgIHdyaXRhYmxlUHJldlNpYmxpbmcuX19uZXh0ID0gd3JpdGFibGVOZXh0U2libGluZy5fX2tleTtcbiAgICAgICAgd3JpdGFibGVOZXh0U2libGluZy5fX3ByZXYgPSB3cml0YWJsZVByZXZTaWJsaW5nLl9fa2V5O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd3JpdGFibGVOZXh0U2libGluZy5fX3ByZXYgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICB3cml0YWJsZU5vZGUuX19uZXh0ID0gbnVsbDtcbiAgICB9XG5cbiAgICB3cml0YWJsZVBhcmVudC5fX3NpemUtLTtcbiAgICB3cml0YWJsZU5vZGUuX19wYXJlbnQgPSBudWxsO1xuICB9XG59IC8vIE5ldmVyIHVzZSB0aGlzIGZ1bmN0aW9uIGRpcmVjdGx5ISBJdCB3aWxsIGJyZWFrXG4vLyB0aGUgY2xvbmluZyBoZXVyaXN0aWMuIEluc3RlYWQgdXNlIG5vZGUuZ2V0V3JpdGFibGUoKS5cblxuZnVuY3Rpb24gaW50ZXJuYWxNYXJrTm9kZUFzRGlydHkobm9kZSkge1xuICBlcnJvck9uSW5maW5pdGVUcmFuc2Zvcm1zKCk7XG4gIGNvbnN0IGxhdGVzdCA9IG5vZGUuZ2V0TGF0ZXN0KCk7XG4gIGNvbnN0IHBhcmVudCA9IGxhdGVzdC5fX3BhcmVudDtcbiAgY29uc3QgZWRpdG9yU3RhdGUgPSBnZXRBY3RpdmVFZGl0b3JTdGF0ZSgpO1xuICBjb25zdCBlZGl0b3IgPSBnZXRBY3RpdmVFZGl0b3IoKTtcbiAgY29uc3Qgbm9kZU1hcCA9IGVkaXRvclN0YXRlLl9ub2RlTWFwO1xuICBjb25zdCBkaXJ0eUVsZW1lbnRzID0gZWRpdG9yLl9kaXJ0eUVsZW1lbnRzO1xuXG4gIGlmIChwYXJlbnQgIT09IG51bGwpIHtcbiAgICBpbnRlcm5hbE1hcmtQYXJlbnRFbGVtZW50c0FzRGlydHkocGFyZW50LCBub2RlTWFwLCBkaXJ0eUVsZW1lbnRzKTtcbiAgfVxuXG4gIGNvbnN0IGtleSA9IGxhdGVzdC5fX2tleTtcbiAgZWRpdG9yLl9kaXJ0eVR5cGUgPSBIQVNfRElSVFlfTk9ERVM7XG5cbiAgaWYgKCRpc0VsZW1lbnROb2RlKG5vZGUpKSB7XG4gICAgZGlydHlFbGVtZW50cy5zZXQoa2V5LCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBUT0RPIHNwbGl0IGludGVybmFsbHkgTWFya05vZGVBc0RpcnR5IGludG8gdHdvIGRlZGljYXRlZCBFbGVtZW50L2xlYXZlIGZ1bmN0aW9uc1xuICAgIGVkaXRvci5fZGlydHlMZWF2ZXMuYWRkKGtleSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGludGVybmFsTWFya1NpYmxpbmdzQXNEaXJ0eShub2RlKSB7XG4gIGNvbnN0IHByZXZpb3VzTm9kZSA9IG5vZGUuZ2V0UHJldmlvdXNTaWJsaW5nKCk7XG4gIGNvbnN0IG5leHROb2RlID0gbm9kZS5nZXROZXh0U2libGluZygpO1xuXG4gIGlmIChwcmV2aW91c05vZGUgIT09IG51bGwpIHtcbiAgICBpbnRlcm5hbE1hcmtOb2RlQXNEaXJ0eShwcmV2aW91c05vZGUpO1xuICB9XG5cbiAgaWYgKG5leHROb2RlICE9PSBudWxsKSB7XG4gICAgaW50ZXJuYWxNYXJrTm9kZUFzRGlydHkobmV4dE5vZGUpO1xuICB9XG59XG5mdW5jdGlvbiAkc2V0Q29tcG9zaXRpb25LZXkoY29tcG9zaXRpb25LZXkpIHtcbiAgZXJyb3JPblJlYWRPbmx5KCk7XG4gIGNvbnN0IGVkaXRvciA9IGdldEFjdGl2ZUVkaXRvcigpO1xuICBjb25zdCBwcmV2aW91c0NvbXBvc2l0aW9uS2V5ID0gZWRpdG9yLl9jb21wb3NpdGlvbktleTtcblxuICBpZiAoY29tcG9zaXRpb25LZXkgIT09IHByZXZpb3VzQ29tcG9zaXRpb25LZXkpIHtcbiAgICBlZGl0b3IuX2NvbXBvc2l0aW9uS2V5ID0gY29tcG9zaXRpb25LZXk7XG5cbiAgICBpZiAocHJldmlvdXNDb21wb3NpdGlvbktleSAhPT0gbnVsbCkge1xuICAgICAgY29uc3Qgbm9kZSA9ICRnZXROb2RlQnlLZXkocHJldmlvdXNDb21wb3NpdGlvbktleSk7XG5cbiAgICAgIGlmIChub2RlICE9PSBudWxsKSB7XG4gICAgICAgIG5vZGUuZ2V0V3JpdGFibGUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY29tcG9zaXRpb25LZXkgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IG5vZGUgPSAkZ2V0Tm9kZUJ5S2V5KGNvbXBvc2l0aW9uS2V5KTtcblxuICAgICAgaWYgKG5vZGUgIT09IG51bGwpIHtcbiAgICAgICAgbm9kZS5nZXRXcml0YWJsZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gJGdldENvbXBvc2l0aW9uS2V5KCkge1xuICBpZiAoaXNDdXJyZW50bHlSZWFkT25seU1vZGUoKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgZWRpdG9yID0gZ2V0QWN0aXZlRWRpdG9yKCk7XG4gIHJldHVybiBlZGl0b3IuX2NvbXBvc2l0aW9uS2V5O1xufVxuZnVuY3Rpb24gJGdldE5vZGVCeUtleShrZXksIF9lZGl0b3JTdGF0ZSkge1xuICBjb25zdCBlZGl0b3JTdGF0ZSA9IF9lZGl0b3JTdGF0ZSB8fCBnZXRBY3RpdmVFZGl0b3JTdGF0ZSgpO1xuXG4gIGNvbnN0IG5vZGUgPSBlZGl0b3JTdGF0ZS5fbm9kZU1hcC5nZXQoa2V5KTtcblxuICBpZiAobm9kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gbm9kZTtcbn1cbmZ1bmN0aW9uIGdldE5vZGVGcm9tRE9NTm9kZShkb20sIGVkaXRvclN0YXRlKSB7XG4gIGNvbnN0IGVkaXRvciA9IGdldEFjdGl2ZUVkaXRvcigpOyAvLyBAdHMtaWdub3JlIFdlIGludGVudGlvbmFsbHkgYWRkIHRoaXMgdG8gdGhlIE5vZGUuXG5cbiAgY29uc3Qga2V5ID0gZG9tW2BfX2xleGljYWxLZXlfJHtlZGl0b3IuX2tleX1gXTtcblxuICBpZiAoa2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gJGdldE5vZGVCeUtleShrZXksIGVkaXRvclN0YXRlKTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gJGdldE5lYXJlc3ROb2RlRnJvbURPTU5vZGUoc3RhcnRpbmdET00sIGVkaXRvclN0YXRlKSB7XG4gIGxldCBkb20gPSBzdGFydGluZ0RPTTtcblxuICB3aGlsZSAoZG9tICE9IG51bGwpIHtcbiAgICBjb25zdCBub2RlID0gZ2V0Tm9kZUZyb21ET01Ob2RlKGRvbSwgZWRpdG9yU3RhdGUpO1xuXG4gICAgaWYgKG5vZGUgIT09IG51bGwpIHtcbiAgICAgIHJldHVybiBub2RlO1xuICAgIH1cblxuICAgIGRvbSA9IGdldFBhcmVudEVsZW1lbnQoZG9tKTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gY2xvbmVEZWNvcmF0b3JzKGVkaXRvcikge1xuICBjb25zdCBjdXJyZW50RGVjb3JhdG9ycyA9IGVkaXRvci5fZGVjb3JhdG9ycztcbiAgY29uc3QgcGVuZGluZ0RlY29yYXRvcnMgPSBPYmplY3QuYXNzaWduKHt9LCBjdXJyZW50RGVjb3JhdG9ycyk7XG4gIGVkaXRvci5fcGVuZGluZ0RlY29yYXRvcnMgPSBwZW5kaW5nRGVjb3JhdG9ycztcbiAgcmV0dXJuIHBlbmRpbmdEZWNvcmF0b3JzO1xufVxuZnVuY3Rpb24gZ2V0RWRpdG9yU3RhdGVUZXh0Q29udGVudChlZGl0b3JTdGF0ZSkge1xuICByZXR1cm4gZWRpdG9yU3RhdGUucmVhZCgoKSA9PiAkZ2V0Um9vdCgpLmdldFRleHRDb250ZW50KCkpO1xufVxuZnVuY3Rpb24gbWFya0FsbE5vZGVzQXNEaXJ0eShlZGl0b3IsIHR5cGUpIHtcbiAgLy8gTWFyayBhbGwgZXhpc3RpbmcgdGV4dCBub2RlcyBhcyBkaXJ0eVxuICB1cGRhdGVFZGl0b3IoZWRpdG9yLCAoKSA9PiB7XG4gICAgY29uc3QgZWRpdG9yU3RhdGUgPSBnZXRBY3RpdmVFZGl0b3JTdGF0ZSgpO1xuXG4gICAgaWYgKGVkaXRvclN0YXRlLmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlID09PSAncm9vdCcpIHtcbiAgICAgICRnZXRSb290KCkubWFya0RpcnR5KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgbm9kZU1hcCA9IGVkaXRvclN0YXRlLl9ub2RlTWFwO1xuXG4gICAgZm9yIChjb25zdCBbLCBub2RlXSBvZiBub2RlTWFwKSB7XG4gICAgICBub2RlLm1hcmtEaXJ0eSgpO1xuICAgIH1cbiAgfSwgZWRpdG9yLl9wZW5kaW5nRWRpdG9yU3RhdGUgPT09IG51bGwgPyB7XG4gICAgdGFnOiAnaGlzdG9yeS1tZXJnZSdcbiAgfSA6IHVuZGVmaW5lZCk7XG59XG5mdW5jdGlvbiAkZ2V0Um9vdCgpIHtcbiAgcmV0dXJuIGludGVybmFsR2V0Um9vdChnZXRBY3RpdmVFZGl0b3JTdGF0ZSgpKTtcbn1cbmZ1bmN0aW9uIGludGVybmFsR2V0Um9vdChlZGl0b3JTdGF0ZSkge1xuICByZXR1cm4gZWRpdG9yU3RhdGUuX25vZGVNYXAuZ2V0KCdyb290Jyk7XG59XG5mdW5jdGlvbiAkc2V0U2VsZWN0aW9uKHNlbGVjdGlvbikge1xuICBlcnJvck9uUmVhZE9ubHkoKTtcbiAgY29uc3QgZWRpdG9yU3RhdGUgPSBnZXRBY3RpdmVFZGl0b3JTdGF0ZSgpO1xuXG4gIGlmIChzZWxlY3Rpb24gIT09IG51bGwpIHtcbiAgICB7XG4gICAgICBpZiAoT2JqZWN0LmlzRnJvemVuKHNlbGVjdGlvbikpIHtcbiAgICAgICAge1xuICAgICAgICAgIHRocm93IEVycm9yKGAkc2V0U2VsZWN0aW9uIGNhbGxlZCBvbiBmcm96ZW4gc2VsZWN0aW9uIG9iamVjdC4gRW5zdXJlIHNlbGVjdGlvbiBpcyBjbG9uZWQgYmVmb3JlIHBhc3NpbmcgaW4uYCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBzZWxlY3Rpb24uZGlydHkgPSB0cnVlO1xuICAgIHNlbGVjdGlvbi5fY2FjaGVkTm9kZXMgPSBudWxsO1xuICB9XG5cbiAgZWRpdG9yU3RhdGUuX3NlbGVjdGlvbiA9IHNlbGVjdGlvbjtcbn1cbmZ1bmN0aW9uICRmbHVzaE11dGF0aW9ucygpIHtcbiAgZXJyb3JPblJlYWRPbmx5KCk7XG4gIGNvbnN0IGVkaXRvciA9IGdldEFjdGl2ZUVkaXRvcigpO1xuICBmbHVzaFJvb3RNdXRhdGlvbnMoZWRpdG9yKTtcbn1cbmZ1bmN0aW9uIGdldE5vZGVGcm9tRE9NKGRvbSkge1xuICBjb25zdCBlZGl0b3IgPSBnZXRBY3RpdmVFZGl0b3IoKTtcbiAgY29uc3Qgbm9kZUtleSA9IGdldE5vZGVLZXlGcm9tRE9NKGRvbSwgZWRpdG9yKTtcblxuICBpZiAobm9kZUtleSA9PT0gbnVsbCkge1xuICAgIGNvbnN0IHJvb3RFbGVtZW50ID0gZWRpdG9yLmdldFJvb3RFbGVtZW50KCk7XG5cbiAgICBpZiAoZG9tID09PSByb290RWxlbWVudCkge1xuICAgICAgcmV0dXJuICRnZXROb2RlQnlLZXkoJ3Jvb3QnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiAkZ2V0Tm9kZUJ5S2V5KG5vZGVLZXkpO1xufVxuZnVuY3Rpb24gZ2V0VGV4dE5vZGVPZmZzZXQobm9kZSwgbW92ZVNlbGVjdGlvblRvRW5kKSB7XG4gIHJldHVybiBtb3ZlU2VsZWN0aW9uVG9FbmQgPyBub2RlLmdldFRleHRDb250ZW50U2l6ZSgpIDogMDtcbn1cblxuZnVuY3Rpb24gZ2V0Tm9kZUtleUZyb21ET00oIC8vIE5vdGUgdGhhdCBub2RlIGhlcmUgcmVmZXJzIHRvIGEgRE9NIE5vZGUsIG5vdCBhbiBMZXhpY2FsIE5vZGVcbiAgZG9tLCBlZGl0b3IpIHtcbiAgbGV0IG5vZGUgPSBkb207XG5cbiAgd2hpbGUgKG5vZGUgIT0gbnVsbCkge1xuICAgIC8vIEB0cy1pZ25vcmUgV2UgaW50ZW50aW9uYWxseSBhZGQgdGhpcyB0byB0aGUgTm9kZS5cbiAgICBjb25zdCBrZXkgPSBub2RlW2BfX2xleGljYWxLZXlfJHtlZGl0b3IuX2tleX1gXTtcblxuICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG5cbiAgICBub2RlID0gZ2V0UGFyZW50RWxlbWVudChub2RlKTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBkb2VzQ29udGFpbkdyYXBoZW1lKHN0cikge1xuICByZXR1cm4gL1tcXHVEODAwLVxcdURCRkZdW1xcdURDMDAtXFx1REZGRl0vZy50ZXN0KHN0cik7XG59XG5mdW5jdGlvbiBnZXRFZGl0b3JzVG9Qcm9wYWdhdGUoZWRpdG9yKSB7XG4gIGNvbnN0IGVkaXRvcnNUb1Byb3BhZ2F0ZSA9IFtdO1xuICBsZXQgY3VycmVudEVkaXRvciA9IGVkaXRvcjtcblxuICB3aGlsZSAoY3VycmVudEVkaXRvciAhPT0gbnVsbCkge1xuICAgIGVkaXRvcnNUb1Byb3BhZ2F0ZS5wdXNoKGN1cnJlbnRFZGl0b3IpO1xuICAgIGN1cnJlbnRFZGl0b3IgPSBjdXJyZW50RWRpdG9yLl9wYXJlbnRFZGl0b3I7XG4gIH1cblxuICByZXR1cm4gZWRpdG9yc1RvUHJvcGFnYXRlO1xufVxuZnVuY3Rpb24gY3JlYXRlVUlEKCkge1xuICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikucmVwbGFjZSgvW15hLXpdKy9nLCAnJykuc3Vic3RyKDAsIDUpO1xufVxuZnVuY3Rpb24gZ2V0QW5jaG9yVGV4dEZyb21ET00oYW5jaG9yTm9kZSkge1xuICBpZiAoYW5jaG9yTm9kZS5ub2RlVHlwZSA9PT0gRE9NX1RFWFRfVFlQRSkge1xuICAgIHJldHVybiBhbmNob3JOb2RlLm5vZGVWYWx1ZTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gJHVwZGF0ZVNlbGVjdGVkVGV4dEZyb21ET00oaXNDb21wb3NpdGlvbkVuZCwgZWRpdG9yLCBkYXRhKSB7XG4gIC8vIFVwZGF0ZSB0aGUgdGV4dCBjb250ZW50IHdpdGggdGhlIGxhdGVzdCBjb21wb3NpdGlvbiB0ZXh0XG4gIGNvbnN0IGRvbVNlbGVjdGlvbiA9IGdldERPTVNlbGVjdGlvbihlZGl0b3IuX3dpbmRvdyk7XG5cbiAgaWYgKGRvbVNlbGVjdGlvbiA9PT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGFuY2hvck5vZGUgPSBkb21TZWxlY3Rpb24uYW5jaG9yTm9kZTtcbiAgbGV0IHtcbiAgICBhbmNob3JPZmZzZXQsXG4gICAgZm9jdXNPZmZzZXRcbiAgfSA9IGRvbVNlbGVjdGlvbjtcblxuICBpZiAoYW5jaG9yTm9kZSAhPT0gbnVsbCkge1xuICAgIGxldCB0ZXh0Q29udGVudCA9IGdldEFuY2hvclRleHRGcm9tRE9NKGFuY2hvck5vZGUpO1xuICAgIGNvbnN0IG5vZGUgPSAkZ2V0TmVhcmVzdE5vZGVGcm9tRE9NTm9kZShhbmNob3JOb2RlKTtcblxuICAgIGlmICh0ZXh0Q29udGVudCAhPT0gbnVsbCAmJiAkaXNUZXh0Tm9kZShub2RlKSkge1xuICAgICAgaWYgKG5vZGUuY2FuQ29udGFpblRhYnMoKSkge1xuICAgICAgICBjb25zdCBoYXNUYWJDaGFyYWN0ZXIgPSB0ZXh0Q29udGVudC5pbmNsdWRlcygnXFx0Jyk7IC8vIEF0IHByZXNlbnQsIHRoaXMgY29uZGl0aW9uIGlzIHByaW1hcmlseSB1c2VkIGZvciBjb2RlIGhpZ2hsaWdodHMgd2hlblxuICAgICAgICAvLyBncm91cGVkIHRvZ2V0aGVyIGluIGxpbmVzIChkaXZzKS4gSWYgYSBjb2RlIGhpZ2hsaWdodCBpbmNsdWRlcyBhIHRhYixcbiAgICAgICAgLy8gdGhlIG5ld2x5IHR5cGVkIGNoYXJhY3RlciBtYXkgYmUgbWlzc2luZyBmcm9tIHRoZSBET00ncyB0ZXh0Q29udGVudC5cbiAgICAgICAgLy8gTGV0J3MgdGFrZSBhbiBleGFtcGxlLiBJZiBhIExpbmVkQ29kZU5vZGUgbG9va2VkIHJvdWdobHkgbGlrZSB0aGlzOlxuICAgICAgICAvLyA8Y29kZT48ZGl2Pjxjb2RlSGlnaGxpZ2h0IC8+PGNvZGVIaWdobGlnaHQgLz48L2Rpdj48L2NvZGU+LFxuICAgICAgICAvLyB0aGUgZm9sbG93aW5nIGNvdWxkIG9jY3VyIHdoZW4gdXNpbmcgdGFiczpcbiAgICAgICAgLy8gYS4gL3Rjb25zdCAtLXR5cGUtLT4gJ2QnIGF0IG9mZnNldCAxIC0tZ2V0LS0+IC90Y29uc3RcbiAgICAgICAgLy8gICAgLSBNaXNzaW5nICdkJ1xuICAgICAgICAvLyBiLiAvdGNvbnN0IC0tdHlwZS0tPiAnZCcgYXQgb2Zmc2V0IDMgLS1nZXQtLT4gL3Rjb25kc3RcbiAgICAgICAgLy8gICAgLS10eXBlLS0+ICdkJyBhdCBvZmZzZXQgMyAtLWdldC0tPiAvdGNvbmRzdFxuICAgICAgICAvLyAgICAtIE1pc3Npbmcgc2Vjb25kICdkJ1xuICAgICAgICAvLyBJbiB0aGVzZSBjYXNlcywgd2UgY2FuIGZpeCB0aGUgcHJvYmxlbSBieSBtYW51YWxseSBpbnNlcnRpbmcgdGhlXG4gICAgICAgIC8vIG5ld2x5IHR5cGVkIGNoYXJhY3RlciB3aGVyZSB3ZSBrbm93IGl0IHNob3VsZCBoYXZlIGJlZW4uXG5cbiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5sZW5ndGggPiAwICYmIGhhc1RhYkNoYXJhY3Rlcikge1xuICAgICAgICAgIGNvbnN0IHNlbGVjdGlvbk9mZnNldCA9IGRhdGEubGVuZ3RoO1xuICAgICAgICAgIGNvbnN0IGluc2VydGlvbk9mZnNldCA9IGFuY2hvck9mZnNldCArIHNlbGVjdGlvbk9mZnNldCAtIDE7XG4gICAgICAgICAgY29uc3QgYmVmb3JlSW5zZXJ0aW9uID0gdGV4dENvbnRlbnQuc2xpY2UoMCwgaW5zZXJ0aW9uT2Zmc2V0KTtcbiAgICAgICAgICBjb25zdCBhZnRlckluc2VydGlvbiA9IHRleHRDb250ZW50LnNsaWNlKGluc2VydGlvbk9mZnNldCwgdGV4dENvbnRlbnQubGVuZ3RoKTtcbiAgICAgICAgICB0ZXh0Q29udGVudCA9IGAke2JlZm9yZUluc2VydGlvbn0ke2RhdGF9JHthZnRlckluc2VydGlvbn1gO1xuICAgICAgICAgIGFuY2hvck9mZnNldCArPSBzZWxlY3Rpb25PZmZzZXQ7XG4gICAgICAgICAgZm9jdXNPZmZzZXQgKz0gc2VsZWN0aW9uT2Zmc2V0O1xuICAgICAgICB9XG4gICAgICB9IC8vIERhdGEgaXMgaW50ZW50aW9uYWxseSB0cnV0aHksIGFzIHdlIGNoZWNrIGZvciBib29sZWFuLCBudWxsIGFuZCBlbXB0eSBzdHJpbmcuXG5cblxuICAgICAgaWYgKHRleHRDb250ZW50ID09PSBDT01QT1NJVElPTl9TVUZGSVggJiYgZGF0YSkge1xuICAgICAgICBjb25zdCBvZmZzZXQgPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgdGV4dENvbnRlbnQgPSBkYXRhO1xuICAgICAgICBhbmNob3JPZmZzZXQgPSBvZmZzZXQ7XG4gICAgICAgIGZvY3VzT2Zmc2V0ID0gb2Zmc2V0O1xuICAgICAgfVxuXG4gICAgICBpZiAodGV4dENvbnRlbnQgIT09IG51bGwpIHtcbiAgICAgICAgJHVwZGF0ZVRleHROb2RlRnJvbURPTUNvbnRlbnQobm9kZSwgdGV4dENvbnRlbnQsIGFuY2hvck9mZnNldCwgZm9jdXNPZmZzZXQsIGlzQ29tcG9zaXRpb25FbmQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gJHVwZGF0ZVRleHROb2RlRnJvbURPTUNvbnRlbnQodGV4dE5vZGUsIHRleHRDb250ZW50LCBhbmNob3JPZmZzZXQsIGZvY3VzT2Zmc2V0LCBjb21wb3NpdGlvbkVuZCkge1xuICBsZXQgbm9kZSA9IHRleHROb2RlO1xuXG4gIGlmIChub2RlLmlzQXR0YWNoZWQoKSAmJiAoY29tcG9zaXRpb25FbmQgfHwgIW5vZGUuaXNEaXJ0eSgpKSkge1xuICAgIGNvbnN0IGlzQ29tcG9zaW5nID0gbm9kZS5pc0NvbXBvc2luZygpO1xuICAgIGxldCBub3JtYWxpemVkVGV4dENvbnRlbnQgPSB0ZXh0Q29udGVudDtcblxuICAgIGlmICgoaXNDb21wb3NpbmcgfHwgY29tcG9zaXRpb25FbmQpICYmIHRleHRDb250ZW50W3RleHRDb250ZW50Lmxlbmd0aCAtIDFdID09PSBDT01QT1NJVElPTl9TVUZGSVgpIHtcbiAgICAgIG5vcm1hbGl6ZWRUZXh0Q29udGVudCA9IHRleHRDb250ZW50LnNsaWNlKDAsIC0xKTtcbiAgICB9XG5cbiAgICBjb25zdCBwcmV2VGV4dENvbnRlbnQgPSBub2RlLmdldFRleHRDb250ZW50KCk7XG5cbiAgICBpZiAoY29tcG9zaXRpb25FbmQgfHwgbm9ybWFsaXplZFRleHRDb250ZW50ICE9PSBwcmV2VGV4dENvbnRlbnQpIHtcbiAgICAgIGlmIChub3JtYWxpemVkVGV4dENvbnRlbnQgPT09ICcnKSB7XG4gICAgICAgICRzZXRDb21wb3NpdGlvbktleShudWxsKTtcblxuICAgICAgICBpZiAoIUlTX1NBRkFSSSAmJiAhSVNfSU9TICYmICFJU19BUFBMRV9XRUJLSVQpIHtcbiAgICAgICAgICAvLyBGb3IgY29tcG9zaXRpb24gKG1haW5seSBBbmRyb2lkKSwgd2UgaGF2ZSB0byByZW1vdmUgdGhlIG5vZGUgb24gYSBsYXRlciB1cGRhdGVcbiAgICAgICAgICBjb25zdCBlZGl0b3IgPSBnZXRBY3RpdmVFZGl0b3IoKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGVkaXRvci51cGRhdGUoKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAobm9kZS5pc0F0dGFjaGVkKCkpIHtcbiAgICAgICAgICAgICAgICBub2RlLnJlbW92ZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LCAyMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbm9kZS5yZW1vdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcGFyZW50ID0gbm9kZS5nZXRQYXJlbnQoKTtcbiAgICAgIGNvbnN0IHByZXZTZWxlY3Rpb24gPSAkZ2V0UHJldmlvdXNTZWxlY3Rpb24oKTtcbiAgICAgIGNvbnN0IGNvbXBvc2l0aW9uS2V5ID0gJGdldENvbXBvc2l0aW9uS2V5KCk7XG4gICAgICBjb25zdCBub2RlS2V5ID0gbm9kZS5nZXRLZXkoKTtcblxuICAgICAgaWYgKG5vZGUuaXNUb2tlbigpIHx8IGNvbXBvc2l0aW9uS2V5ICE9PSBudWxsICYmIG5vZGVLZXkgPT09IGNvbXBvc2l0aW9uS2V5ICYmICFpc0NvbXBvc2luZyB8fCAvLyBDaGVjayBpZiBjaGFyYWN0ZXIgd2FzIGFkZGVkIGF0IHRoZSBzdGFydCwgYW5kIHdlIG5lZWRcbiAgICAgICAgLy8gdG8gY2xlYXIgdGhpcyBpbnB1dCBmcm9tIG9jY3VycmluZyBhcyB0aGF0IGFjdGlvbiB3YXNuJ3RcbiAgICAgICAgLy8gcGVybWl0dGVkLlxuICAgICAgICBwYXJlbnQgIT09IG51bGwgJiYgJGlzUmFuZ2VTZWxlY3Rpb24ocHJldlNlbGVjdGlvbikgJiYgIXBhcmVudC5jYW5JbnNlcnRUZXh0QmVmb3JlKCkgJiYgcHJldlNlbGVjdGlvbi5hbmNob3Iub2Zmc2V0ID09PSAwKSB7XG4gICAgICAgIG5vZGUubWFya0RpcnR5KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc2VsZWN0aW9uID0gJGdldFNlbGVjdGlvbigpO1xuXG4gICAgICBpZiAoISRpc1JhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikgfHwgYW5jaG9yT2Zmc2V0ID09PSBudWxsIHx8IGZvY3VzT2Zmc2V0ID09PSBudWxsKSB7XG4gICAgICAgIG5vZGUuc2V0VGV4dENvbnRlbnQobm9ybWFsaXplZFRleHRDb250ZW50KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzZWxlY3Rpb24uc2V0VGV4dE5vZGVSYW5nZShub2RlLCBhbmNob3JPZmZzZXQsIG5vZGUsIGZvY3VzT2Zmc2V0KTtcblxuICAgICAgaWYgKG5vZGUuaXNTZWdtZW50ZWQoKSkge1xuICAgICAgICBjb25zdCBvcmlnaW5hbFRleHRDb250ZW50ID0gbm9kZS5nZXRUZXh0Q29udGVudCgpO1xuICAgICAgICBjb25zdCByZXBsYWNlbWVudCA9ICRjcmVhdGVUZXh0Tm9kZShvcmlnaW5hbFRleHRDb250ZW50KTtcbiAgICAgICAgbm9kZS5yZXBsYWNlKHJlcGxhY2VtZW50KTtcbiAgICAgICAgbm9kZSA9IHJlcGxhY2VtZW50O1xuICAgICAgfVxuXG4gICAgICBub2RlLnNldFRleHRDb250ZW50KG5vcm1hbGl6ZWRUZXh0Q29udGVudCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uICRwcmV2aW91c1NpYmxpbmdEb2VzTm90QWNjZXB0VGV4dChub2RlKSB7XG4gIGNvbnN0IHByZXZpb3VzU2libGluZyA9IG5vZGUuZ2V0UHJldmlvdXNTaWJsaW5nKCk7XG4gIHJldHVybiAoJGlzVGV4dE5vZGUocHJldmlvdXNTaWJsaW5nKSB8fCAkaXNFbGVtZW50Tm9kZShwcmV2aW91c1NpYmxpbmcpICYmIHByZXZpb3VzU2libGluZy5pc0lubGluZSgpKSAmJiAhcHJldmlvdXNTaWJsaW5nLmNhbkluc2VydFRleHRBZnRlcigpO1xufSAvLyBUaGlzIGZ1bmN0aW9uIGlzIGNvbm5lY3RlZCB0byAkc2hvdWxkUHJldmVudERlZmF1bHRBbmRJbnNlcnRUZXh0IGFuZCBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlXG4vLyBUZXh0Tm9kZSBib3VuZGFyaWVzIGFyZSB3cml0YWJsZSBvciB3ZSBzaG91bGQgdXNlIHRoZSBwcmV2aW91cy9uZXh0IHNpYmxpbmcgaW5zdGVhZC4gRm9yIGV4YW1wbGUsXG4vLyBpbiB0aGUgY2FzZSBvZiBhIExpbmtOb2RlLCBib3VuZGFyaWVzIGFyZSBub3Qgd3JpdGFibGUuXG5cblxuZnVuY3Rpb24gJHNob3VsZEluc2VydFRleHRBZnRlck9yQmVmb3JlVGV4dE5vZGUoc2VsZWN0aW9uLCBub2RlKSB7XG4gIGlmIChub2RlLmlzU2VnbWVudGVkKCkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmICghc2VsZWN0aW9uLmlzQ29sbGFwc2VkKCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCBvZmZzZXQgPSBzZWxlY3Rpb24uYW5jaG9yLm9mZnNldDtcbiAgY29uc3QgcGFyZW50ID0gbm9kZS5nZXRQYXJlbnRPclRocm93KCk7XG4gIGNvbnN0IGlzVG9rZW4gPSBub2RlLmlzVG9rZW4oKTtcblxuICBpZiAob2Zmc2V0ID09PSAwKSB7XG4gICAgcmV0dXJuICFub2RlLmNhbkluc2VydFRleHRCZWZvcmUoKSB8fCAhcGFyZW50LmNhbkluc2VydFRleHRCZWZvcmUoKSB8fCBpc1Rva2VuIHx8ICRwcmV2aW91c1NpYmxpbmdEb2VzTm90QWNjZXB0VGV4dChub2RlKTtcbiAgfSBlbHNlIGlmIChvZmZzZXQgPT09IG5vZGUuZ2V0VGV4dENvbnRlbnRTaXplKCkpIHtcbiAgICByZXR1cm4gIW5vZGUuY2FuSW5zZXJ0VGV4dEFmdGVyKCkgfHwgIXBhcmVudC5jYW5JbnNlcnRUZXh0QWZ0ZXIoKSB8fCBpc1Rva2VuO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuZnVuY3Rpb24gaXNUYWIoa2V5Q29kZSwgYWx0S2V5LCBjdHJsS2V5LCBtZXRhS2V5KSB7XG4gIHJldHVybiBrZXlDb2RlID09PSA5ICYmICFhbHRLZXkgJiYgIWN0cmxLZXkgJiYgIW1ldGFLZXk7XG59XG5mdW5jdGlvbiBpc0JvbGQoa2V5Q29kZSwgYWx0S2V5LCBtZXRhS2V5LCBjdHJsS2V5KSB7XG4gIHJldHVybiBrZXlDb2RlID09PSA2NiAmJiAhYWx0S2V5ICYmIGNvbnRyb2xPck1ldGEobWV0YUtleSwgY3RybEtleSk7XG59XG5mdW5jdGlvbiBpc0l0YWxpYyhrZXlDb2RlLCBhbHRLZXksIG1ldGFLZXksIGN0cmxLZXkpIHtcbiAgcmV0dXJuIGtleUNvZGUgPT09IDczICYmICFhbHRLZXkgJiYgY29udHJvbE9yTWV0YShtZXRhS2V5LCBjdHJsS2V5KTtcbn1cbmZ1bmN0aW9uIGlzVW5kZXJsaW5lKGtleUNvZGUsIGFsdEtleSwgbWV0YUtleSwgY3RybEtleSkge1xuICByZXR1cm4ga2V5Q29kZSA9PT0gODUgJiYgIWFsdEtleSAmJiBjb250cm9sT3JNZXRhKG1ldGFLZXksIGN0cmxLZXkpO1xufVxuZnVuY3Rpb24gaXNQYXJhZ3JhcGgoa2V5Q29kZSwgc2hpZnRLZXkpIHtcbiAgcmV0dXJuIGlzUmV0dXJuKGtleUNvZGUpICYmICFzaGlmdEtleTtcbn1cbmZ1bmN0aW9uIGlzTGluZUJyZWFrKGtleUNvZGUsIHNoaWZ0S2V5KSB7XG4gIHJldHVybiBpc1JldHVybihrZXlDb2RlKSAmJiBzaGlmdEtleTtcbn0gLy8gSW5zZXJ0cyBhIG5ldyBsaW5lIGFmdGVyIHRoZSBzZWxlY3Rpb25cblxuZnVuY3Rpb24gaXNPcGVuTGluZUJyZWFrKGtleUNvZGUsIGN0cmxLZXkpIHtcbiAgLy8gNzkgPSBLZXlPXG4gIHJldHVybiBJU19BUFBMRSAmJiBjdHJsS2V5ICYmIGtleUNvZGUgPT09IDc5O1xufVxuZnVuY3Rpb24gaXNEZWxldGVXb3JkQmFja3dhcmQoa2V5Q29kZSwgYWx0S2V5LCBjdHJsS2V5KSB7XG4gIHJldHVybiBpc0JhY2tzcGFjZShrZXlDb2RlKSAmJiAoSVNfQVBQTEUgPyBhbHRLZXkgOiBjdHJsS2V5KTtcbn1cbmZ1bmN0aW9uIGlzRGVsZXRlV29yZEZvcndhcmQoa2V5Q29kZSwgYWx0S2V5LCBjdHJsS2V5KSB7XG4gIHJldHVybiBpc0RlbGV0ZShrZXlDb2RlKSAmJiAoSVNfQVBQTEUgPyBhbHRLZXkgOiBjdHJsS2V5KTtcbn1cbmZ1bmN0aW9uIGlzRGVsZXRlTGluZUJhY2t3YXJkKGtleUNvZGUsIG1ldGFLZXkpIHtcbiAgcmV0dXJuIElTX0FQUExFICYmIG1ldGFLZXkgJiYgaXNCYWNrc3BhY2Uoa2V5Q29kZSk7XG59XG5mdW5jdGlvbiBpc0RlbGV0ZUxpbmVGb3J3YXJkKGtleUNvZGUsIG1ldGFLZXkpIHtcbiAgcmV0dXJuIElTX0FQUExFICYmIG1ldGFLZXkgJiYgaXNEZWxldGUoa2V5Q29kZSk7XG59XG5mdW5jdGlvbiBpc0RlbGV0ZUJhY2t3YXJkKGtleUNvZGUsIGFsdEtleSwgbWV0YUtleSwgY3RybEtleSkge1xuICBpZiAoSVNfQVBQTEUpIHtcbiAgICBpZiAoYWx0S2V5IHx8IG1ldGFLZXkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gaXNCYWNrc3BhY2Uoa2V5Q29kZSkgfHwga2V5Q29kZSA9PT0gNzIgJiYgY3RybEtleTtcbiAgfVxuXG4gIGlmIChjdHJsS2V5IHx8IGFsdEtleSB8fCBtZXRhS2V5KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIGlzQmFja3NwYWNlKGtleUNvZGUpO1xufVxuZnVuY3Rpb24gaXNEZWxldGVGb3J3YXJkKGtleUNvZGUsIGN0cmxLZXksIHNoaWZ0S2V5LCBhbHRLZXksIG1ldGFLZXkpIHtcbiAgaWYgKElTX0FQUExFKSB7XG4gICAgaWYgKHNoaWZ0S2V5IHx8IGFsdEtleSB8fCBtZXRhS2V5KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIGlzRGVsZXRlKGtleUNvZGUpIHx8IGtleUNvZGUgPT09IDY4ICYmIGN0cmxLZXk7XG4gIH1cblxuICBpZiAoY3RybEtleSB8fCBhbHRLZXkgfHwgbWV0YUtleSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBpc0RlbGV0ZShrZXlDb2RlKTtcbn1cbmZ1bmN0aW9uIGlzVW5kbyhrZXlDb2RlLCBzaGlmdEtleSwgbWV0YUtleSwgY3RybEtleSkge1xuICByZXR1cm4ga2V5Q29kZSA9PT0gOTAgJiYgIXNoaWZ0S2V5ICYmIGNvbnRyb2xPck1ldGEobWV0YUtleSwgY3RybEtleSk7XG59XG5mdW5jdGlvbiBpc1JlZG8oa2V5Q29kZSwgc2hpZnRLZXksIG1ldGFLZXksIGN0cmxLZXkpIHtcbiAgaWYgKElTX0FQUExFKSB7XG4gICAgcmV0dXJuIGtleUNvZGUgPT09IDkwICYmIG1ldGFLZXkgJiYgc2hpZnRLZXk7XG4gIH1cblxuICByZXR1cm4ga2V5Q29kZSA9PT0gODkgJiYgY3RybEtleSB8fCBrZXlDb2RlID09PSA5MCAmJiBjdHJsS2V5ICYmIHNoaWZ0S2V5O1xufVxuZnVuY3Rpb24gaXNDb3B5KGtleUNvZGUsIHNoaWZ0S2V5LCBtZXRhS2V5LCBjdHJsS2V5KSB7XG4gIGlmIChzaGlmdEtleSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChrZXlDb2RlID09PSA2Nykge1xuICAgIHJldHVybiBJU19BUFBMRSA/IG1ldGFLZXkgOiBjdHJsS2V5O1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaXNDdXQoa2V5Q29kZSwgc2hpZnRLZXksIG1ldGFLZXksIGN0cmxLZXkpIHtcbiAgaWYgKHNoaWZ0S2V5KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKGtleUNvZGUgPT09IDg4KSB7XG4gICAgcmV0dXJuIElTX0FQUExFID8gbWV0YUtleSA6IGN0cmxLZXk7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGlzQXJyb3dMZWZ0KGtleUNvZGUpIHtcbiAgcmV0dXJuIGtleUNvZGUgPT09IDM3O1xufVxuXG5mdW5jdGlvbiBpc0Fycm93UmlnaHQoa2V5Q29kZSkge1xuICByZXR1cm4ga2V5Q29kZSA9PT0gMzk7XG59XG5cbmZ1bmN0aW9uIGlzQXJyb3dVcChrZXlDb2RlKSB7XG4gIHJldHVybiBrZXlDb2RlID09PSAzODtcbn1cblxuZnVuY3Rpb24gaXNBcnJvd0Rvd24oa2V5Q29kZSkge1xuICByZXR1cm4ga2V5Q29kZSA9PT0gNDA7XG59XG5cbmZ1bmN0aW9uIGlzTW92ZUJhY2t3YXJkKGtleUNvZGUsIGN0cmxLZXksIGFsdEtleSwgbWV0YUtleSkge1xuICByZXR1cm4gaXNBcnJvd0xlZnQoa2V5Q29kZSkgJiYgIWN0cmxLZXkgJiYgIW1ldGFLZXkgJiYgIWFsdEtleTtcbn1cbmZ1bmN0aW9uIGlzTW92ZVRvU3RhcnQoa2V5Q29kZSwgY3RybEtleSwgc2hpZnRLZXksIGFsdEtleSwgbWV0YUtleSkge1xuICByZXR1cm4gaXNBcnJvd0xlZnQoa2V5Q29kZSkgJiYgIWFsdEtleSAmJiAhc2hpZnRLZXkgJiYgKGN0cmxLZXkgfHwgbWV0YUtleSk7XG59XG5mdW5jdGlvbiBpc01vdmVGb3J3YXJkKGtleUNvZGUsIGN0cmxLZXksIGFsdEtleSwgbWV0YUtleSkge1xuICByZXR1cm4gaXNBcnJvd1JpZ2h0KGtleUNvZGUpICYmICFjdHJsS2V5ICYmICFtZXRhS2V5ICYmICFhbHRLZXk7XG59XG5mdW5jdGlvbiBpc01vdmVUb0VuZChrZXlDb2RlLCBjdHJsS2V5LCBzaGlmdEtleSwgYWx0S2V5LCBtZXRhS2V5KSB7XG4gIHJldHVybiBpc0Fycm93UmlnaHQoa2V5Q29kZSkgJiYgIWFsdEtleSAmJiAhc2hpZnRLZXkgJiYgKGN0cmxLZXkgfHwgbWV0YUtleSk7XG59XG5mdW5jdGlvbiBpc01vdmVVcChrZXlDb2RlLCBjdHJsS2V5LCBtZXRhS2V5KSB7XG4gIHJldHVybiBpc0Fycm93VXAoa2V5Q29kZSkgJiYgIWN0cmxLZXkgJiYgIW1ldGFLZXk7XG59XG5mdW5jdGlvbiBpc01vdmVEb3duKGtleUNvZGUsIGN0cmxLZXksIG1ldGFLZXkpIHtcbiAgcmV0dXJuIGlzQXJyb3dEb3duKGtleUNvZGUpICYmICFjdHJsS2V5ICYmICFtZXRhS2V5O1xufVxuZnVuY3Rpb24gaXNNb2RpZmllcihjdHJsS2V5LCBzaGlmdEtleSwgYWx0S2V5LCBtZXRhS2V5KSB7XG4gIHJldHVybiBjdHJsS2V5IHx8IHNoaWZ0S2V5IHx8IGFsdEtleSB8fCBtZXRhS2V5O1xufVxuZnVuY3Rpb24gaXNTcGFjZShrZXlDb2RlKSB7XG4gIHJldHVybiBrZXlDb2RlID09PSAzMjtcbn1cbmZ1bmN0aW9uIGNvbnRyb2xPck1ldGEobWV0YUtleSwgY3RybEtleSkge1xuICBpZiAoSVNfQVBQTEUpIHtcbiAgICByZXR1cm4gbWV0YUtleTtcbiAgfVxuXG4gIHJldHVybiBjdHJsS2V5O1xufVxuZnVuY3Rpb24gaXNSZXR1cm4oa2V5Q29kZSkge1xuICByZXR1cm4ga2V5Q29kZSA9PT0gMTM7XG59XG5mdW5jdGlvbiBpc0JhY2tzcGFjZShrZXlDb2RlKSB7XG4gIHJldHVybiBrZXlDb2RlID09PSA4O1xufVxuZnVuY3Rpb24gaXNFc2NhcGUoa2V5Q29kZSkge1xuICByZXR1cm4ga2V5Q29kZSA9PT0gMjc7XG59XG5mdW5jdGlvbiBpc0RlbGV0ZShrZXlDb2RlKSB7XG4gIHJldHVybiBrZXlDb2RlID09PSA0Njtcbn1cbmZ1bmN0aW9uIGdldENhY2hlZENsYXNzTmFtZUFycmF5KGNsYXNzTmFtZXNUaGVtZSwgY2xhc3NOYW1lVGhlbWVUeXBlKSB7XG4gIGNvbnN0IGNsYXNzTmFtZXMgPSBjbGFzc05hbWVzVGhlbWVbY2xhc3NOYW1lVGhlbWVUeXBlXTsgLy8gQXMgd2UncmUgdXNpbmcgY2xhc3NMaXN0LCB3ZSBuZWVkXG4gIC8vIHRvIGhhbmRsZSBjbGFzc05hbWUgdG9rZW5zIHRoYXQgaGF2ZSBzcGFjZXMuXG4gIC8vIFRoZSBlYXNpZXN0IHdheSB0byBkbyB0aGlzIHRvIGNvbnZlcnQgdGhlXG4gIC8vIGNsYXNzTmFtZSB0b2tlbnMgdG8gYW4gYXJyYXkgdGhhdCBjYW4gYmVcbiAgLy8gYXBwbGllZCB0byBjbGFzc0xpc3QuYWRkKCkvcmVtb3ZlKCkuXG5cbiAgaWYgKHR5cGVvZiBjbGFzc05hbWVzID09PSAnc3RyaW5nJykge1xuICAgIGNvbnN0IGNsYXNzTmFtZXNBcnIgPSBjbGFzc05hbWVzLnNwbGl0KCcgJyk7XG4gICAgY2xhc3NOYW1lc1RoZW1lW2NsYXNzTmFtZVRoZW1lVHlwZV0gPSBjbGFzc05hbWVzQXJyO1xuICAgIHJldHVybiBjbGFzc05hbWVzQXJyO1xuICB9XG5cbiAgcmV0dXJuIGNsYXNzTmFtZXM7XG59XG5mdW5jdGlvbiBzZXRNdXRhdGVkTm9kZShtdXRhdGVkTm9kZXMsIHJlZ2lzdGVyZWROb2RlcywgbXV0YXRpb25MaXN0ZW5lcnMsIG5vZGUsIG11dGF0aW9uKSB7XG4gIGlmIChtdXRhdGlvbkxpc3RlbmVycy5zaXplID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qgbm9kZVR5cGUgPSBub2RlLl9fdHlwZTtcbiAgY29uc3Qgbm9kZUtleSA9IG5vZGUuX19rZXk7XG4gIGNvbnN0IHJlZ2lzdGVyZWROb2RlID0gcmVnaXN0ZXJlZE5vZGVzLmdldChub2RlVHlwZSk7XG5cbiAgaWYgKHJlZ2lzdGVyZWROb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICB7XG4gICAgICB0aHJvdyBFcnJvcihgVHlwZSAke25vZGVUeXBlfSBub3QgaW4gcmVnaXN0ZXJlZE5vZGVzYCk7XG4gICAgfVxuICB9XG5cbiAgY29uc3Qga2xhc3MgPSByZWdpc3RlcmVkTm9kZS5rbGFzcztcbiAgbGV0IG11dGF0ZWROb2Rlc0J5VHlwZSA9IG11dGF0ZWROb2Rlcy5nZXQoa2xhc3MpO1xuXG4gIGlmIChtdXRhdGVkTm9kZXNCeVR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgIG11dGF0ZWROb2Rlc0J5VHlwZSA9IG5ldyBNYXAoKTtcbiAgICBtdXRhdGVkTm9kZXMuc2V0KGtsYXNzLCBtdXRhdGVkTm9kZXNCeVR5cGUpO1xuICB9XG5cbiAgY29uc3QgcHJldk11dGF0aW9uID0gbXV0YXRlZE5vZGVzQnlUeXBlLmdldChub2RlS2V5KTsgLy8gSWYgdGhlIG5vZGUgaGFzIGFscmVhZHkgYmVlbiBcImRlc3Ryb3llZFwiLCB5ZXQgd2UgYXJlXG4gIC8vIHJlLW1ha2luZyBpdCwgdGhlbiB0aGlzIG1lYW5zIGEgbW92ZSBsaWtlbHkgaGFwcGVuZWQuXG4gIC8vIFdlIHNob3VsZCBjaGFuZ2UgdGhlIG11dGF0aW9uIHRvIGJlIHRoYXQgb2YgXCJ1cGRhdGVkXCJcbiAgLy8gaW5zdGVhZC5cblxuICBjb25zdCBpc01vdmUgPSBwcmV2TXV0YXRpb24gPT09ICdkZXN0cm95ZWQnICYmIG11dGF0aW9uID09PSAnY3JlYXRlZCc7XG5cbiAgaWYgKHByZXZNdXRhdGlvbiA9PT0gdW5kZWZpbmVkIHx8IGlzTW92ZSkge1xuICAgIG11dGF0ZWROb2Rlc0J5VHlwZS5zZXQobm9kZUtleSwgaXNNb3ZlID8gJ3VwZGF0ZWQnIDogbXV0YXRpb24pO1xuICB9XG59XG5mdW5jdGlvbiAkbm9kZXNPZlR5cGUoa2xhc3MpIHtcbiAgY29uc3QgZWRpdG9yU3RhdGUgPSBnZXRBY3RpdmVFZGl0b3JTdGF0ZSgpO1xuICBjb25zdCByZWFkT25seSA9IGVkaXRvclN0YXRlLl9yZWFkT25seTtcbiAgY29uc3Qga2xhc3NUeXBlID0ga2xhc3MuZ2V0VHlwZSgpO1xuICBjb25zdCBub2RlcyA9IGVkaXRvclN0YXRlLl9ub2RlTWFwO1xuICBjb25zdCBub2Rlc09mVHlwZSA9IFtdO1xuXG4gIGZvciAoY29uc3QgWywgbm9kZV0gb2Ygbm9kZXMpIHtcbiAgICBpZiAobm9kZSBpbnN0YW5jZW9mIGtsYXNzICYmIG5vZGUuX190eXBlID09PSBrbGFzc1R5cGUgJiYgKHJlYWRPbmx5IHx8IG5vZGUuaXNBdHRhY2hlZCgpKSkge1xuICAgICAgbm9kZXNPZlR5cGUucHVzaChub2RlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbm9kZXNPZlR5cGU7XG59XG5cbmZ1bmN0aW9uIHJlc29sdmVFbGVtZW50KGVsZW1lbnQsIGlzQmFja3dhcmQsIGZvY3VzT2Zmc2V0KSB7XG4gIGNvbnN0IHBhcmVudCA9IGVsZW1lbnQuZ2V0UGFyZW50KCk7XG4gIGxldCBvZmZzZXQgPSBmb2N1c09mZnNldDtcbiAgbGV0IGJsb2NrID0gZWxlbWVudDtcblxuICBpZiAocGFyZW50ICE9PSBudWxsKSB7XG4gICAgaWYgKGlzQmFja3dhcmQgJiYgZm9jdXNPZmZzZXQgPT09IDApIHtcbiAgICAgIG9mZnNldCA9IGJsb2NrLmdldEluZGV4V2l0aGluUGFyZW50KCk7XG4gICAgICBibG9jayA9IHBhcmVudDtcbiAgICB9IGVsc2UgaWYgKCFpc0JhY2t3YXJkICYmIGZvY3VzT2Zmc2V0ID09PSBibG9jay5nZXRDaGlsZHJlblNpemUoKSkge1xuICAgICAgb2Zmc2V0ID0gYmxvY2suZ2V0SW5kZXhXaXRoaW5QYXJlbnQoKSArIDE7XG4gICAgICBibG9jayA9IHBhcmVudDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYmxvY2suZ2V0Q2hpbGRBdEluZGV4KGlzQmFja3dhcmQgPyBvZmZzZXQgLSAxIDogb2Zmc2V0KTtcbn1cblxuZnVuY3Rpb24gJGdldEFkamFjZW50Tm9kZShmb2N1cywgaXNCYWNrd2FyZCkge1xuICBjb25zdCBmb2N1c09mZnNldCA9IGZvY3VzLm9mZnNldDtcblxuICBpZiAoZm9jdXMudHlwZSA9PT0gJ2VsZW1lbnQnKSB7XG4gICAgY29uc3QgYmxvY2sgPSBmb2N1cy5nZXROb2RlKCk7XG4gICAgcmV0dXJuIHJlc29sdmVFbGVtZW50KGJsb2NrLCBpc0JhY2t3YXJkLCBmb2N1c09mZnNldCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgZm9jdXNOb2RlID0gZm9jdXMuZ2V0Tm9kZSgpO1xuXG4gICAgaWYgKGlzQmFja3dhcmQgJiYgZm9jdXNPZmZzZXQgPT09IDAgfHwgIWlzQmFja3dhcmQgJiYgZm9jdXNPZmZzZXQgPT09IGZvY3VzTm9kZS5nZXRUZXh0Q29udGVudFNpemUoKSkge1xuICAgICAgY29uc3QgcG9zc2libGVOb2RlID0gaXNCYWNrd2FyZCA/IGZvY3VzTm9kZS5nZXRQcmV2aW91c1NpYmxpbmcoKSA6IGZvY3VzTm9kZS5nZXROZXh0U2libGluZygpO1xuXG4gICAgICBpZiAocG9zc2libGVOb2RlID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlRWxlbWVudChmb2N1c05vZGUuZ2V0UGFyZW50T3JUaHJvdygpLCBpc0JhY2t3YXJkLCBmb2N1c05vZGUuZ2V0SW5kZXhXaXRoaW5QYXJlbnQoKSArIChpc0JhY2t3YXJkID8gMCA6IDEpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHBvc3NpYmxlTm9kZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGlzRmlyZWZveENsaXBib2FyZEV2ZW50cyhlZGl0b3IpIHtcbiAgY29uc3QgZXZlbnQgPSBnZXRXaW5kb3coZWRpdG9yKS5ldmVudDtcbiAgY29uc3QgaW5wdXRUeXBlID0gZXZlbnQgJiYgZXZlbnQuaW5wdXRUeXBlO1xuICByZXR1cm4gaW5wdXRUeXBlID09PSAnaW5zZXJ0RnJvbVBhc3RlJyB8fCBpbnB1dFR5cGUgPT09ICdpbnNlcnRGcm9tUGFzdGVBc1F1b3RhdGlvbic7XG59XG5mdW5jdGlvbiBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBjb21tYW5kLCBwYXlsb2FkKSB7XG4gIHJldHVybiB0cmlnZ2VyQ29tbWFuZExpc3RlbmVycyhlZGl0b3IsIGNvbW1hbmQsIHBheWxvYWQpO1xufVxuZnVuY3Rpb24gJHRleHRDb250ZW50UmVxdWlyZXNEb3VibGVMaW5lYnJlYWtBdEVuZChub2RlKSB7XG4gIHJldHVybiAhJGlzUm9vdE5vZGUobm9kZSkgJiYgIW5vZGUuaXNMYXN0Q2hpbGQoKSAmJiAhbm9kZS5pc0lubGluZSgpO1xufVxuZnVuY3Rpb24gZ2V0RWxlbWVudEJ5S2V5T3JUaHJvdyhlZGl0b3IsIGtleSkge1xuICBjb25zdCBlbGVtZW50ID0gZWRpdG9yLl9rZXlUb0RPTU1hcC5nZXQoa2V5KTtcblxuICBpZiAoZWxlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAge1xuICAgICAgdGhyb3cgRXJyb3IoYFJlY29uY2lsaWF0aW9uOiBjb3VsZCBub3QgZmluZCBET00gZWxlbWVudCBmb3Igbm9kZSBrZXkgJHtrZXl9YCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5mdW5jdGlvbiBnZXRQYXJlbnRFbGVtZW50KG5vZGUpIHtcbiAgY29uc3QgcGFyZW50RWxlbWVudCA9IG5vZGUuYXNzaWduZWRTbG90IHx8IG5vZGUucGFyZW50RWxlbWVudDtcbiAgcmV0dXJuIHBhcmVudEVsZW1lbnQgIT09IG51bGwgJiYgcGFyZW50RWxlbWVudC5ub2RlVHlwZSA9PT0gMTEgPyBwYXJlbnRFbGVtZW50Lmhvc3QgOiBwYXJlbnRFbGVtZW50O1xufVxuZnVuY3Rpb24gc2Nyb2xsSW50b1ZpZXdJZk5lZWRlZChlZGl0b3IsIHNlbGVjdGlvblJlY3QsIHJvb3RFbGVtZW50KSB7XG4gIGNvbnN0IGRvYyA9IHJvb3RFbGVtZW50Lm93bmVyRG9jdW1lbnQ7XG4gIGNvbnN0IGRlZmF1bHRWaWV3ID0gZG9jLmRlZmF1bHRWaWV3O1xuXG4gIGlmIChkZWZhdWx0VmlldyA9PT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCB7XG4gICAgdG9wOiBjdXJyZW50VG9wLFxuICAgIGJvdHRvbTogY3VycmVudEJvdHRvbVxuICB9ID0gc2VsZWN0aW9uUmVjdDtcbiAgbGV0IHRhcmdldFRvcCA9IDA7XG4gIGxldCB0YXJnZXRCb3R0b20gPSAwO1xuICBsZXQgZWxlbWVudCA9IHJvb3RFbGVtZW50O1xuXG4gIHdoaWxlIChlbGVtZW50ICE9PSBudWxsKSB7XG4gICAgY29uc3QgaXNCb2R5RWxlbWVudCA9IGVsZW1lbnQgPT09IGRvYy5ib2R5O1xuXG4gICAgaWYgKGlzQm9keUVsZW1lbnQpIHtcbiAgICAgIHRhcmdldFRvcCA9IDA7XG4gICAgICB0YXJnZXRCb3R0b20gPSBnZXRXaW5kb3coZWRpdG9yKS5pbm5lckhlaWdodDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdGFyZ2V0UmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICB0YXJnZXRUb3AgPSB0YXJnZXRSZWN0LnRvcDtcbiAgICAgIHRhcmdldEJvdHRvbSA9IHRhcmdldFJlY3QuYm90dG9tO1xuICAgIH1cblxuICAgIGxldCBkaWZmID0gMDtcblxuICAgIGlmIChjdXJyZW50VG9wIDwgdGFyZ2V0VG9wKSB7XG4gICAgICBkaWZmID0gLSh0YXJnZXRUb3AgLSBjdXJyZW50VG9wKTtcbiAgICB9IGVsc2UgaWYgKGN1cnJlbnRCb3R0b20gPiB0YXJnZXRCb3R0b20pIHtcbiAgICAgIGRpZmYgPSBjdXJyZW50Qm90dG9tIC0gdGFyZ2V0Qm90dG9tO1xuICAgIH1cblxuICAgIGlmIChkaWZmICE9PSAwKSB7XG4gICAgICBpZiAoaXNCb2R5RWxlbWVudCkge1xuICAgICAgICAvLyBPbmx5IGhhbmRsZXMgc2Nyb2xsaW5nIG9mIFkgYXhpc1xuICAgICAgICBkZWZhdWx0Vmlldy5zY3JvbGxCeSgwLCBkaWZmKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjcm9sbFRvcCA9IGVsZW1lbnQuc2Nyb2xsVG9wO1xuICAgICAgICBlbGVtZW50LnNjcm9sbFRvcCArPSBkaWZmO1xuICAgICAgICBjb25zdCB5T2Zmc2V0ID0gZWxlbWVudC5zY3JvbGxUb3AgLSBzY3JvbGxUb3A7XG4gICAgICAgIGN1cnJlbnRUb3AgLT0geU9mZnNldDtcbiAgICAgICAgY3VycmVudEJvdHRvbSAtPSB5T2Zmc2V0O1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpc0JvZHlFbGVtZW50KSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBlbGVtZW50ID0gZ2V0UGFyZW50RWxlbWVudChlbGVtZW50KTtcbiAgfVxufVxuZnVuY3Rpb24gJGFkZFVwZGF0ZVRhZyh0YWcpIHtcbiAgZXJyb3JPblJlYWRPbmx5KCk7XG4gIGNvbnN0IGVkaXRvciA9IGdldEFjdGl2ZUVkaXRvcigpO1xuXG4gIGVkaXRvci5fdXBkYXRlVGFncy5hZGQodGFnKTtcbn1cbmZ1bmN0aW9uICRtYXliZU1vdmVDaGlsZHJlblNlbGVjdGlvblRvUGFyZW50KHBhcmVudE5vZGUsIG9mZnNldCA9IDApIHtcbiAgaWYgKG9mZnNldCAhPT0gMCkge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGBUT0RPYCk7XG4gICAgfVxuICB9XG5cbiAgY29uc3Qgc2VsZWN0aW9uID0gJGdldFNlbGVjdGlvbigpO1xuXG4gIGlmICghJGlzUmFuZ2VTZWxlY3Rpb24oc2VsZWN0aW9uKSB8fCAhJGlzRWxlbWVudE5vZGUocGFyZW50Tm9kZSkpIHtcbiAgICByZXR1cm4gc2VsZWN0aW9uO1xuICB9XG5cbiAgY29uc3Qge1xuICAgIGFuY2hvcixcbiAgICBmb2N1c1xuICB9ID0gc2VsZWN0aW9uO1xuICBjb25zdCBhbmNob3JOb2RlID0gYW5jaG9yLmdldE5vZGUoKTtcbiAgY29uc3QgZm9jdXNOb2RlID0gZm9jdXMuZ2V0Tm9kZSgpO1xuXG4gIGlmICgkaGFzQW5jZXN0b3IoYW5jaG9yTm9kZSwgcGFyZW50Tm9kZSkpIHtcbiAgICBhbmNob3Iuc2V0KHBhcmVudE5vZGUuX19rZXksIDAsICdlbGVtZW50Jyk7XG4gIH1cblxuICBpZiAoJGhhc0FuY2VzdG9yKGZvY3VzTm9kZSwgcGFyZW50Tm9kZSkpIHtcbiAgICBmb2N1cy5zZXQocGFyZW50Tm9kZS5fX2tleSwgMCwgJ2VsZW1lbnQnKTtcbiAgfVxuXG4gIHJldHVybiBzZWxlY3Rpb247XG59XG5mdW5jdGlvbiAkaGFzQW5jZXN0b3IoY2hpbGQsIHRhcmdldE5vZGUpIHtcbiAgbGV0IHBhcmVudCA9IGNoaWxkLmdldFBhcmVudCgpO1xuXG4gIHdoaWxlIChwYXJlbnQgIT09IG51bGwpIHtcbiAgICBpZiAocGFyZW50LmlzKHRhcmdldE5vZGUpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBwYXJlbnQgPSBwYXJlbnQuZ2V0UGFyZW50KCk7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBnZXREZWZhdWx0Vmlldyhkb21FbGVtKSB7XG4gIGNvbnN0IG93bmVyRG9jID0gZG9tRWxlbS5vd25lckRvY3VtZW50O1xuICByZXR1cm4gb3duZXJEb2MgJiYgb3duZXJEb2MuZGVmYXVsdFZpZXcgfHwgbnVsbDtcbn1cbmZ1bmN0aW9uIGdldFdpbmRvdyhlZGl0b3IpIHtcbiAgY29uc3Qgd2luZG93T2JqID0gZWRpdG9yLl93aW5kb3c7XG5cbiAgaWYgKHdpbmRvd09iaiA9PT0gbnVsbCkge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGB3aW5kb3cgb2JqZWN0IG5vdCBmb3VuZGApO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB3aW5kb3dPYmo7XG59XG5mdW5jdGlvbiAkaXNJbmxpbmVFbGVtZW50T3JEZWNvcmF0b3JOb2RlKG5vZGUpIHtcbiAgcmV0dXJuICRpc0VsZW1lbnROb2RlKG5vZGUpICYmIG5vZGUuaXNJbmxpbmUoKSB8fCAkaXNEZWNvcmF0b3JOb2RlKG5vZGUpICYmIG5vZGUuaXNJbmxpbmUoKTtcbn1cbmZ1bmN0aW9uICRnZXROZWFyZXN0Um9vdE9yU2hhZG93Um9vdChub2RlKSB7XG4gIGxldCBwYXJlbnQgPSBub2RlLmdldFBhcmVudE9yVGhyb3coKTtcblxuICB3aGlsZSAocGFyZW50ICE9PSBudWxsKSB7XG4gICAgaWYgKCRpc1Jvb3RPclNoYWRvd1Jvb3QocGFyZW50KSkge1xuICAgICAgcmV0dXJuIHBhcmVudDtcbiAgICB9XG5cbiAgICBwYXJlbnQgPSBwYXJlbnQuZ2V0UGFyZW50T3JUaHJvdygpO1xuICB9XG5cbiAgcmV0dXJuIHBhcmVudDtcbn1cbmZ1bmN0aW9uICRpc1Jvb3RPclNoYWRvd1Jvb3Qobm9kZSkge1xuICByZXR1cm4gJGlzUm9vdE5vZGUobm9kZSkgfHwgJGlzRWxlbWVudE5vZGUobm9kZSkgJiYgbm9kZS5pc1NoYWRvd1Jvb3QoKTtcbn1cbmZ1bmN0aW9uICRjb3B5Tm9kZShub2RlKSB7XG4gIC8vIEB0cy1pZ25vcmVcbiAgY29uc3QgY29weSA9IG5vZGUuY29uc3RydWN0b3IuY2xvbmUobm9kZSk7XG4gICRzZXROb2RlS2V5KGNvcHksIG51bGwpO1xuICByZXR1cm4gY29weTtcbn1cbmZ1bmN0aW9uICRhcHBseU5vZGVSZXBsYWNlbWVudChub2RlKSB7XG4gIGNvbnN0IGVkaXRvciA9IGdldEFjdGl2ZUVkaXRvcigpO1xuICBjb25zdCBub2RlVHlwZSA9IG5vZGUuY29uc3RydWN0b3IuZ2V0VHlwZSgpO1xuXG4gIGNvbnN0IHJlZ2lzdGVyZWROb2RlID0gZWRpdG9yLl9ub2Rlcy5nZXQobm9kZVR5cGUpO1xuXG4gIGlmIChyZWdpc3RlcmVkTm9kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAge1xuICAgICAgdGhyb3cgRXJyb3IoYCRpbml0aWFsaXplTm9kZSBmYWlsZWQuIEVuc3VyZSBub2RlIGhhcyBiZWVuIHJlZ2lzdGVyZWQgdG8gdGhlIGVkaXRvci4gWW91IGNhbiBkbyB0aGlzIGJ5IHBhc3NpbmcgdGhlIG5vZGUgY2xhc3MgdmlhIHRoZSBcIm5vZGVzXCIgYXJyYXkgaW4gdGhlIGVkaXRvciBjb25maWcuYCk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgcmVwbGFjZUZ1bmMgPSByZWdpc3RlcmVkTm9kZS5yZXBsYWNlO1xuXG4gIGlmIChyZXBsYWNlRnVuYyAhPT0gbnVsbCkge1xuICAgIGNvbnN0IHJlcGxhY2VtZW50Tm9kZSA9IHJlcGxhY2VGdW5jKG5vZGUpO1xuXG4gICAgaWYgKCEocmVwbGFjZW1lbnROb2RlIGluc3RhbmNlb2Ygbm9kZS5jb25zdHJ1Y3RvcikpIHtcbiAgICAgIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoYCRpbml0aWFsaXplTm9kZSBmYWlsZWQuIEVuc3VyZSByZXBsYWNlbWVudCBub2RlIGlzIGEgc3ViY2xhc3Mgb2YgdGhlIG9yaWdpbmFsIG5vZGUuYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcGxhY2VtZW50Tm9kZTtcbiAgfVxuXG4gIHJldHVybiBub2RlO1xufVxuZnVuY3Rpb24gZXJyb3JPbkluc2VydFRleHROb2RlT25Sb290KG5vZGUsIGluc2VydE5vZGUpIHtcbiAgY29uc3QgcGFyZW50Tm9kZSA9IG5vZGUuZ2V0UGFyZW50KCk7XG5cbiAgaWYgKCRpc1Jvb3ROb2RlKHBhcmVudE5vZGUpICYmICEkaXNFbGVtZW50Tm9kZShpbnNlcnROb2RlKSAmJiAhJGlzRGVjb3JhdG9yTm9kZShpbnNlcnROb2RlKSkge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGBPbmx5IGVsZW1lbnQgb3IgZGVjb3JhdG9yIG5vZGVzIGNhbiBiZSBpbnNlcnRlZCBpbiB0byB0aGUgcm9vdCBub2RlYCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUJsb2NrQ3Vyc29yRWxlbWVudChlZGl0b3JDb25maWcpIHtcbiAgY29uc3QgdGhlbWUgPSBlZGl0b3JDb25maWcudGhlbWU7XG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZWxlbWVudC5jb250ZW50RWRpdGFibGUgPSAnZmFsc2UnO1xuICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1sZXhpY2FsLWN1cnNvcicsICd0cnVlJyk7XG4gIGxldCBibG9ja0N1cnNvclRoZW1lID0gdGhlbWUuYmxvY2tDdXJzb3I7XG5cbiAgaWYgKGJsb2NrQ3Vyc29yVGhlbWUgIT09IHVuZGVmaW5lZCkge1xuICAgIGlmICh0eXBlb2YgYmxvY2tDdXJzb3JUaGVtZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnN0IGNsYXNzTmFtZXNBcnIgPSBibG9ja0N1cnNvclRoZW1lLnNwbGl0KCcgJyk7IC8vIEB0cy1leHBlY3QtZXJyb3I6IGludGVudGlvbmFsXG5cbiAgICAgIGJsb2NrQ3Vyc29yVGhlbWUgPSB0aGVtZS5ibG9ja0N1cnNvciA9IGNsYXNzTmFtZXNBcnI7XG4gICAgfVxuXG4gICAgaWYgKGJsb2NrQ3Vyc29yVGhlbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKC4uLmJsb2NrQ3Vyc29yVGhlbWUpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBlbGVtZW50O1xufVxuXG5mdW5jdGlvbiBuZWVkc0Jsb2NrQ3Vyc29yKG5vZGUpIHtcbiAgcmV0dXJuICgkaXNEZWNvcmF0b3JOb2RlKG5vZGUpIHx8ICRpc0VsZW1lbnROb2RlKG5vZGUpICYmICFub2RlLmNhbkJlRW1wdHkoKSkgJiYgIW5vZGUuaXNJbmxpbmUoKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRE9NQmxvY2tDdXJzb3JFbGVtZW50KGJsb2NrQ3Vyc29yRWxlbWVudCwgZWRpdG9yLCByb290RWxlbWVudCkge1xuICByb290RWxlbWVudC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY2FyZXQtY29sb3InKTtcbiAgZWRpdG9yLl9ibG9ja0N1cnNvckVsZW1lbnQgPSBudWxsO1xuICBjb25zdCBwYXJlbnRFbGVtZW50ID0gYmxvY2tDdXJzb3JFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG5cbiAgaWYgKHBhcmVudEVsZW1lbnQgIT09IG51bGwpIHtcbiAgICBwYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGJsb2NrQ3Vyc29yRWxlbWVudCk7XG4gIH1cbn1cbmZ1bmN0aW9uIHVwZGF0ZURPTUJsb2NrQ3Vyc29yRWxlbWVudChlZGl0b3IsIHJvb3RFbGVtZW50LCBuZXh0U2VsZWN0aW9uKSB7XG4gIGxldCBibG9ja0N1cnNvckVsZW1lbnQgPSBlZGl0b3IuX2Jsb2NrQ3Vyc29yRWxlbWVudDtcblxuICBpZiAoJGlzUmFuZ2VTZWxlY3Rpb24obmV4dFNlbGVjdGlvbikgJiYgbmV4dFNlbGVjdGlvbi5pc0NvbGxhcHNlZCgpICYmIG5leHRTZWxlY3Rpb24uYW5jaG9yLnR5cGUgPT09ICdlbGVtZW50JyAmJiByb290RWxlbWVudC5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSkge1xuICAgIGNvbnN0IGFuY2hvciA9IG5leHRTZWxlY3Rpb24uYW5jaG9yO1xuICAgIGNvbnN0IGVsZW1lbnROb2RlID0gYW5jaG9yLmdldE5vZGUoKTtcbiAgICBjb25zdCBvZmZzZXQgPSBhbmNob3Iub2Zmc2V0O1xuICAgIGNvbnN0IGVsZW1lbnROb2RlU2l6ZSA9IGVsZW1lbnROb2RlLmdldENoaWxkcmVuU2l6ZSgpO1xuICAgIGxldCBpc0Jsb2NrQ3Vyc29yID0gZmFsc2U7XG4gICAgbGV0IGluc2VydEJlZm9yZUVsZW1lbnQgPSBudWxsO1xuXG4gICAgaWYgKG9mZnNldCA9PT0gZWxlbWVudE5vZGVTaXplKSB7XG4gICAgICBjb25zdCBjaGlsZCA9IGVsZW1lbnROb2RlLmdldENoaWxkQXRJbmRleChvZmZzZXQgLSAxKTtcblxuICAgICAgaWYgKG5lZWRzQmxvY2tDdXJzb3IoY2hpbGQpKSB7XG4gICAgICAgIGlzQmxvY2tDdXJzb3IgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjaGlsZCA9IGVsZW1lbnROb2RlLmdldENoaWxkQXRJbmRleChvZmZzZXQpO1xuXG4gICAgICBpZiAobmVlZHNCbG9ja0N1cnNvcihjaGlsZCkpIHtcbiAgICAgICAgY29uc3Qgc2libGluZyA9IGNoaWxkLmdldFByZXZpb3VzU2libGluZygpO1xuXG4gICAgICAgIGlmIChzaWJsaW5nID09PSBudWxsIHx8IG5lZWRzQmxvY2tDdXJzb3Ioc2libGluZykpIHtcbiAgICAgICAgICBpc0Jsb2NrQ3Vyc29yID0gdHJ1ZTtcbiAgICAgICAgICBpbnNlcnRCZWZvcmVFbGVtZW50ID0gZWRpdG9yLmdldEVsZW1lbnRCeUtleShjaGlsZC5fX2tleSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaXNCbG9ja0N1cnNvcikge1xuICAgICAgY29uc3QgZWxlbWVudERPTSA9IGVkaXRvci5nZXRFbGVtZW50QnlLZXkoZWxlbWVudE5vZGUuX19rZXkpO1xuXG4gICAgICBpZiAoYmxvY2tDdXJzb3JFbGVtZW50ID09PSBudWxsKSB7XG4gICAgICAgIGVkaXRvci5fYmxvY2tDdXJzb3JFbGVtZW50ID0gYmxvY2tDdXJzb3JFbGVtZW50ID0gY3JlYXRlQmxvY2tDdXJzb3JFbGVtZW50KGVkaXRvci5fY29uZmlnKTtcbiAgICAgIH1cblxuICAgICAgcm9vdEVsZW1lbnQuc3R5bGUuY2FyZXRDb2xvciA9ICd0cmFuc3BhcmVudCc7XG5cbiAgICAgIGlmIChpbnNlcnRCZWZvcmVFbGVtZW50ID09PSBudWxsKSB7XG4gICAgICAgIGVsZW1lbnRET00uYXBwZW5kQ2hpbGQoYmxvY2tDdXJzb3JFbGVtZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnRET00uaW5zZXJ0QmVmb3JlKGJsb2NrQ3Vyc29yRWxlbWVudCwgaW5zZXJ0QmVmb3JlRWxlbWVudCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0gLy8gUmVtb3ZlIGN1cnNvclxuXG5cbiAgaWYgKGJsb2NrQ3Vyc29yRWxlbWVudCAhPT0gbnVsbCkge1xuICAgIHJlbW92ZURPTUJsb2NrQ3Vyc29yRWxlbWVudChibG9ja0N1cnNvckVsZW1lbnQsIGVkaXRvciwgcm9vdEVsZW1lbnQpO1xuICB9XG59XG5mdW5jdGlvbiBnZXRET01TZWxlY3Rpb24odGFyZ2V0V2luZG93KSB7XG4gIHJldHVybiAhQ0FOX1VTRV9ET00gPyBudWxsIDogKHRhcmdldFdpbmRvdyB8fCB3aW5kb3cpLmdldFNlbGVjdGlvbigpO1xufVxuZnVuY3Rpb24gJHNwbGl0Tm9kZShub2RlLCBvZmZzZXQpIHtcbiAgbGV0IHN0YXJ0Tm9kZSA9IG5vZGUuZ2V0Q2hpbGRBdEluZGV4KG9mZnNldCk7XG5cbiAgaWYgKHN0YXJ0Tm9kZSA9PSBudWxsKSB7XG4gICAgc3RhcnROb2RlID0gbm9kZTtcbiAgfVxuXG4gIGlmICghISRpc1Jvb3RPclNoYWRvd1Jvb3Qobm9kZSkpIHtcbiAgICB0aHJvdyBFcnJvcihgQ2FuIG5vdCBjYWxsICRzcGxpdE5vZGUoKSBvbiByb290IGVsZW1lbnRgKTtcbiAgfVxuXG4gIGNvbnN0IHJlY3Vyc2UgPSBjdXJyZW50Tm9kZSA9PiB7XG4gICAgY29uc3QgcGFyZW50ID0gY3VycmVudE5vZGUuZ2V0UGFyZW50T3JUaHJvdygpO1xuICAgIGNvbnN0IGlzUGFyZW50Um9vdCA9ICRpc1Jvb3RPclNoYWRvd1Jvb3QocGFyZW50KTsgLy8gVGhlIG5vZGUgd2Ugc3RhcnQgc3BsaXQgZnJvbSAobGVhZikgaXMgbW92ZWQsIGJ1dCBpdHMgcmVjdXJzaXZlXG4gICAgLy8gcGFyZW50cyBhcmUgY29waWVkIHRvIGNyZWF0ZSBzZXBhcmF0ZSB0cmVlXG5cbiAgICBjb25zdCBub2RlVG9Nb3ZlID0gY3VycmVudE5vZGUgPT09IHN0YXJ0Tm9kZSAmJiAhaXNQYXJlbnRSb290ID8gY3VycmVudE5vZGUgOiAkY29weU5vZGUoY3VycmVudE5vZGUpO1xuXG4gICAgaWYgKGlzUGFyZW50Um9vdCkge1xuICAgICAgY3VycmVudE5vZGUuaW5zZXJ0QWZ0ZXIobm9kZVRvTW92ZSk7XG4gICAgICByZXR1cm4gW2N1cnJlbnROb2RlLCBub2RlVG9Nb3ZlLCBub2RlVG9Nb3ZlXTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgW2xlZnRUcmVlLCByaWdodFRyZWUsIG5ld1BhcmVudF0gPSByZWN1cnNlKHBhcmVudCk7XG4gICAgICBjb25zdCBuZXh0U2libGluZ3MgPSBjdXJyZW50Tm9kZS5nZXROZXh0U2libGluZ3MoKTtcbiAgICAgIG5ld1BhcmVudC5hcHBlbmQobm9kZVRvTW92ZSwgLi4ubmV4dFNpYmxpbmdzKTtcbiAgICAgIHJldHVybiBbbGVmdFRyZWUsIHJpZ2h0VHJlZSwgbm9kZVRvTW92ZV07XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IFtsZWZ0VHJlZSwgcmlnaHRUcmVlXSA9IHJlY3Vyc2Uoc3RhcnROb2RlKTtcbiAgcmV0dXJuIFtsZWZ0VHJlZSwgcmlnaHRUcmVlXTtcbn1cbmZ1bmN0aW9uICRmaW5kTWF0Y2hpbmdQYXJlbnQoc3RhcnRpbmdOb2RlLCBmaW5kRm4pIHtcbiAgbGV0IGN1cnIgPSBzdGFydGluZ05vZGU7XG5cbiAgd2hpbGUgKGN1cnIgIT09ICRnZXRSb290KCkgJiYgY3VyciAhPSBudWxsKSB7XG4gICAgaWYgKGZpbmRGbihjdXJyKSkge1xuICAgICAgcmV0dXJuIGN1cnI7XG4gICAgfVxuXG4gICAgY3VyciA9IGN1cnIuZ2V0UGFyZW50KCk7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uICRnZXRDaGlsZHJlblJlY3Vyc2l2ZWx5KG5vZGUpIHtcbiAgY29uc3Qgbm9kZXMgPSBbXTtcbiAgY29uc3Qgc3RhY2sgPSBbbm9kZV07XG5cbiAgd2hpbGUgKHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBjdXJyZW50Tm9kZSA9IHN0YWNrLnBvcCgpO1xuXG4gICAgaWYgKCEoY3VycmVudE5vZGUgIT09IHVuZGVmaW5lZCkpIHtcbiAgICAgIHRocm93IEVycm9yKGBTdGFjay5sZW5ndGggPiAwOyBjYW4ndCBiZSB1bmRlZmluZWRgKTtcbiAgICB9XG5cbiAgICBpZiAoJGlzRWxlbWVudE5vZGUoY3VycmVudE5vZGUpKSB7XG4gICAgICBzdGFjay51bnNoaWZ0KC4uLmN1cnJlbnROb2RlLmdldENoaWxkcmVuKCkpO1xuICAgIH1cblxuICAgIGlmIChjdXJyZW50Tm9kZSAhPT0gbm9kZSkge1xuICAgICAgbm9kZXMucHVzaChjdXJyZW50Tm9kZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5vZGVzO1xufVxuXG4vKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5mdW5jdGlvbiAkZ2FyYmFnZUNvbGxlY3REZXRhY2hlZERlY29yYXRvcnMoZWRpdG9yLCBwZW5kaW5nRWRpdG9yU3RhdGUpIHtcbiAgY29uc3QgY3VycmVudERlY29yYXRvcnMgPSBlZGl0b3IuX2RlY29yYXRvcnM7XG4gIGNvbnN0IHBlbmRpbmdEZWNvcmF0b3JzID0gZWRpdG9yLl9wZW5kaW5nRGVjb3JhdG9ycztcbiAgbGV0IGRlY29yYXRvcnMgPSBwZW5kaW5nRGVjb3JhdG9ycyB8fCBjdXJyZW50RGVjb3JhdG9ycztcbiAgY29uc3Qgbm9kZU1hcCA9IHBlbmRpbmdFZGl0b3JTdGF0ZS5fbm9kZU1hcDtcbiAgbGV0IGtleTtcblxuICBmb3IgKGtleSBpbiBkZWNvcmF0b3JzKSB7XG4gICAgaWYgKCFub2RlTWFwLmhhcyhrZXkpKSB7XG4gICAgICBpZiAoZGVjb3JhdG9ycyA9PT0gY3VycmVudERlY29yYXRvcnMpIHtcbiAgICAgICAgZGVjb3JhdG9ycyA9IGNsb25lRGVjb3JhdG9ycyhlZGl0b3IpO1xuICAgICAgfVxuXG4gICAgICBkZWxldGUgZGVjb3JhdG9yc1trZXldO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiAkZ2FyYmFnZUNvbGxlY3REZXRhY2hlZERlZXBDaGlsZE5vZGVzKG5vZGUsIHBhcmVudEtleSwgcHJldk5vZGVNYXAsIG5vZGVNYXAsIGRpcnR5Tm9kZXMpIHtcbiAgbGV0IGNoaWxkID0gbm9kZS5nZXRGaXJzdENoaWxkKCk7XG5cbiAgd2hpbGUgKGNoaWxkICE9PSBudWxsKSB7XG4gICAgY29uc3QgY2hpbGRLZXkgPSBjaGlsZC5fX2tleTtcblxuICAgIGlmIChjaGlsZCAhPT0gdW5kZWZpbmVkICYmIGNoaWxkLl9fcGFyZW50ID09PSBwYXJlbnRLZXkpIHtcbiAgICAgIGlmICgkaXNFbGVtZW50Tm9kZShjaGlsZCkpIHtcbiAgICAgICAgJGdhcmJhZ2VDb2xsZWN0RGV0YWNoZWREZWVwQ2hpbGROb2RlcyhjaGlsZCwgY2hpbGRLZXksIHByZXZOb2RlTWFwLCBub2RlTWFwLCBkaXJ0eU5vZGVzKTtcbiAgICAgIH0gLy8gSWYgd2UgaGF2ZSBjcmVhdGVkIGEgbm9kZSBhbmQgaXQgd2FzIGRlcmVmZXJlbmNlZCwgdGhlbiBhbHNvXG4gICAgICAvLyByZW1vdmUgaXQgZnJvbSBvdXQgZGlydHkgbm9kZXMgU2V0LlxuXG5cbiAgICAgIGlmICghcHJldk5vZGVNYXAuaGFzKGNoaWxkS2V5KSkge1xuICAgICAgICBkaXJ0eU5vZGVzLmRlbGV0ZShjaGlsZEtleSk7XG4gICAgICB9XG5cbiAgICAgIG5vZGVNYXAuZGVsZXRlKGNoaWxkS2V5KTtcbiAgICB9XG5cbiAgICBjaGlsZCA9IGNoaWxkLmlzQXR0YWNoZWQoKSA/IGNoaWxkLmdldE5leHRTaWJsaW5nKCkgOiBudWxsO1xuICB9XG59XG5cbmZ1bmN0aW9uICRnYXJiYWdlQ29sbGVjdERldGFjaGVkTm9kZXMocHJldkVkaXRvclN0YXRlLCBlZGl0b3JTdGF0ZSwgZGlydHlMZWF2ZXMsIGRpcnR5RWxlbWVudHMpIHtcbiAgY29uc3QgcHJldk5vZGVNYXAgPSBwcmV2RWRpdG9yU3RhdGUuX25vZGVNYXA7XG4gIGNvbnN0IG5vZGVNYXAgPSBlZGl0b3JTdGF0ZS5fbm9kZU1hcDtcblxuICBmb3IgKGNvbnN0IG5vZGVLZXkgb2YgZGlydHlMZWF2ZXMpIHtcbiAgICBjb25zdCBub2RlID0gbm9kZU1hcC5nZXQobm9kZUtleSk7XG5cbiAgICBpZiAobm9kZSAhPT0gdW5kZWZpbmVkICYmICFub2RlLmlzQXR0YWNoZWQoKSkge1xuICAgICAgaWYgKCFwcmV2Tm9kZU1hcC5oYXMobm9kZUtleSkpIHtcbiAgICAgICAgZGlydHlMZWF2ZXMuZGVsZXRlKG5vZGVLZXkpO1xuICAgICAgfVxuXG4gICAgICBub2RlTWFwLmRlbGV0ZShub2RlS2V5KTtcbiAgICB9XG4gIH1cblxuICBmb3IgKGNvbnN0IFtub2RlS2V5XSBvZiBkaXJ0eUVsZW1lbnRzKSB7XG4gICAgY29uc3Qgbm9kZSA9IG5vZGVNYXAuZ2V0KG5vZGVLZXkpO1xuXG4gICAgaWYgKG5vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gR2FyYmFnZSBjb2xsZWN0IG5vZGUgYW5kIGl0cyBjaGlsZHJlbiBpZiB0aGV5IGV4aXN0XG4gICAgICBpZiAoIW5vZGUuaXNBdHRhY2hlZCgpKSB7XG4gICAgICAgIGlmICgkaXNFbGVtZW50Tm9kZShub2RlKSkge1xuICAgICAgICAgICRnYXJiYWdlQ29sbGVjdERldGFjaGVkRGVlcENoaWxkTm9kZXMobm9kZSwgbm9kZUtleSwgcHJldk5vZGVNYXAsIG5vZGVNYXAsIGRpcnR5RWxlbWVudHMpO1xuICAgICAgICB9IC8vIElmIHdlIGhhdmUgY3JlYXRlZCBhIG5vZGUgYW5kIGl0IHdhcyBkZXJlZmVyZW5jZWQsIHRoZW4gYWxzb1xuICAgICAgICAvLyByZW1vdmUgaXQgZnJvbSBvdXQgZGlydHkgbm9kZXMgU2V0LlxuXG5cbiAgICAgICAgaWYgKCFwcmV2Tm9kZU1hcC5oYXMobm9kZUtleSkpIHtcbiAgICAgICAgICBkaXJ0eUVsZW1lbnRzLmRlbGV0ZShub2RlS2V5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIG5vZGVNYXAuZGVsZXRlKG5vZGVLZXkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5cbmZ1bmN0aW9uICRjYW5TaW1wbGVUZXh0Tm9kZXNCZU1lcmdlZChub2RlMSwgbm9kZTIpIHtcbiAgY29uc3Qgbm9kZTFNb2RlID0gbm9kZTEuX19tb2RlO1xuICBjb25zdCBub2RlMUZvcm1hdCA9IG5vZGUxLl9fZm9ybWF0O1xuICBjb25zdCBub2RlMVN0eWxlID0gbm9kZTEuX19zdHlsZTtcbiAgY29uc3Qgbm9kZTJNb2RlID0gbm9kZTIuX19tb2RlO1xuICBjb25zdCBub2RlMkZvcm1hdCA9IG5vZGUyLl9fZm9ybWF0O1xuICBjb25zdCBub2RlMlN0eWxlID0gbm9kZTIuX19zdHlsZTtcbiAgcmV0dXJuIChub2RlMU1vZGUgPT09IG51bGwgfHwgbm9kZTFNb2RlID09PSBub2RlMk1vZGUpICYmIChub2RlMUZvcm1hdCA9PT0gbnVsbCB8fCBub2RlMUZvcm1hdCA9PT0gbm9kZTJGb3JtYXQpICYmIChub2RlMVN0eWxlID09PSBudWxsIHx8IG5vZGUxU3R5bGUgPT09IG5vZGUyU3R5bGUpO1xufVxuXG5mdW5jdGlvbiAkbWVyZ2VUZXh0Tm9kZXMobm9kZTEsIG5vZGUyKSB7XG4gIGNvbnN0IHdyaXRhYmxlTm9kZTEgPSBub2RlMS5tZXJnZVdpdGhTaWJsaW5nKG5vZGUyKTtcblxuICBjb25zdCBub3JtYWxpemVkTm9kZXMgPSBnZXRBY3RpdmVFZGl0b3IoKS5fbm9ybWFsaXplZE5vZGVzO1xuXG4gIG5vcm1hbGl6ZWROb2Rlcy5hZGQobm9kZTEuX19rZXkpO1xuICBub3JtYWxpemVkTm9kZXMuYWRkKG5vZGUyLl9fa2V5KTtcbiAgcmV0dXJuIHdyaXRhYmxlTm9kZTE7XG59XG5cbmZ1bmN0aW9uICRub3JtYWxpemVUZXh0Tm9kZSh0ZXh0Tm9kZSkge1xuICBsZXQgbm9kZSA9IHRleHROb2RlO1xuXG4gIGlmIChub2RlLl9fdGV4dCA9PT0gJycgJiYgbm9kZS5pc1NpbXBsZVRleHQoKSAmJiAhbm9kZS5pc1VubWVyZ2VhYmxlKCkpIHtcbiAgICBub2RlLnJlbW92ZSgpO1xuICAgIHJldHVybjtcbiAgfSAvLyBCYWNrd2FyZFxuXG5cbiAgbGV0IHByZXZpb3VzTm9kZTtcblxuICB3aGlsZSAoKHByZXZpb3VzTm9kZSA9IG5vZGUuZ2V0UHJldmlvdXNTaWJsaW5nKCkpICE9PSBudWxsICYmICRpc1RleHROb2RlKHByZXZpb3VzTm9kZSkgJiYgcHJldmlvdXNOb2RlLmlzU2ltcGxlVGV4dCgpICYmICFwcmV2aW91c05vZGUuaXNVbm1lcmdlYWJsZSgpKSB7XG4gICAgaWYgKHByZXZpb3VzTm9kZS5fX3RleHQgPT09ICcnKSB7XG4gICAgICBwcmV2aW91c05vZGUucmVtb3ZlKCk7XG4gICAgfSBlbHNlIGlmICgkY2FuU2ltcGxlVGV4dE5vZGVzQmVNZXJnZWQocHJldmlvdXNOb2RlLCBub2RlKSkge1xuICAgICAgbm9kZSA9ICRtZXJnZVRleHROb2RlcyhwcmV2aW91c05vZGUsIG5vZGUpO1xuICAgICAgYnJlYWs7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSAvLyBGb3J3YXJkXG5cblxuICBsZXQgbmV4dE5vZGU7XG5cbiAgd2hpbGUgKChuZXh0Tm9kZSA9IG5vZGUuZ2V0TmV4dFNpYmxpbmcoKSkgIT09IG51bGwgJiYgJGlzVGV4dE5vZGUobmV4dE5vZGUpICYmIG5leHROb2RlLmlzU2ltcGxlVGV4dCgpICYmICFuZXh0Tm9kZS5pc1VubWVyZ2VhYmxlKCkpIHtcbiAgICBpZiAobmV4dE5vZGUuX190ZXh0ID09PSAnJykge1xuICAgICAgbmV4dE5vZGUucmVtb3ZlKCk7XG4gICAgfSBlbHNlIGlmICgkY2FuU2ltcGxlVGV4dE5vZGVzQmVNZXJnZWQobm9kZSwgbmV4dE5vZGUpKSB7XG4gICAgICBub2RlID0gJG1lcmdlVGV4dE5vZGVzKG5vZGUsIG5leHROb2RlKTtcbiAgICAgIGJyZWFrO1xuICAgIH0gZWxzZSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uICRub3JtYWxpemVTZWxlY3Rpb24oc2VsZWN0aW9uKSB7XG4gICRub3JtYWxpemVQb2ludChzZWxlY3Rpb24uYW5jaG9yKTtcbiAgJG5vcm1hbGl6ZVBvaW50KHNlbGVjdGlvbi5mb2N1cyk7XG4gIHJldHVybiBzZWxlY3Rpb247XG59XG5cbmZ1bmN0aW9uICRub3JtYWxpemVQb2ludChwb2ludCkge1xuICB3aGlsZSAocG9pbnQudHlwZSA9PT0gJ2VsZW1lbnQnKSB7XG4gICAgY29uc3Qgbm9kZSA9IHBvaW50LmdldE5vZGUoKTtcbiAgICBjb25zdCBvZmZzZXQgPSBwb2ludC5vZmZzZXQ7XG4gICAgbGV0IG5leHROb2RlO1xuICAgIGxldCBuZXh0T2Zmc2V0QXRFbmQ7XG5cbiAgICBpZiAob2Zmc2V0ID09PSBub2RlLmdldENoaWxkcmVuU2l6ZSgpKSB7XG4gICAgICBuZXh0Tm9kZSA9IG5vZGUuZ2V0Q2hpbGRBdEluZGV4KG9mZnNldCAtIDEpO1xuICAgICAgbmV4dE9mZnNldEF0RW5kID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV4dE5vZGUgPSBub2RlLmdldENoaWxkQXRJbmRleChvZmZzZXQpO1xuICAgICAgbmV4dE9mZnNldEF0RW5kID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCRpc1RleHROb2RlKG5leHROb2RlKSkge1xuICAgICAgcG9pbnQuc2V0KG5leHROb2RlLl9fa2V5LCBuZXh0T2Zmc2V0QXRFbmQgPyBuZXh0Tm9kZS5nZXRUZXh0Q29udGVudFNpemUoKSA6IDAsICd0ZXh0Jyk7XG4gICAgICBicmVhaztcbiAgICB9IGVsc2UgaWYgKCEkaXNFbGVtZW50Tm9kZShuZXh0Tm9kZSkpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHBvaW50LnNldChuZXh0Tm9kZS5fX2tleSwgbmV4dE9mZnNldEF0RW5kID8gbmV4dE5vZGUuZ2V0Q2hpbGRyZW5TaXplKCkgOiAwLCAnZWxlbWVudCcpO1xuICB9XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cbmxldCBzdWJUcmVlVGV4dENvbnRlbnQgPSAnJztcbmxldCBzdWJUcmVlRGlyZWN0aW9uZWRUZXh0Q29udGVudCA9ICcnO1xubGV0IGVkaXRvclRleHRDb250ZW50ID0gJyc7XG5sZXQgYWN0aXZlRWRpdG9yQ29uZmlnO1xubGV0IGFjdGl2ZUVkaXRvciQxO1xubGV0IGFjdGl2ZUVkaXRvck5vZGVzO1xubGV0IHRyZWF0QWxsTm9kZXNBc0RpcnR5ID0gZmFsc2U7XG5sZXQgYWN0aXZlRWRpdG9yU3RhdGVSZWFkT25seSA9IGZhbHNlO1xubGV0IGFjdGl2ZU11dGF0aW9uTGlzdGVuZXJzO1xubGV0IGFjdGl2ZVRleHREaXJlY3Rpb24gPSBudWxsO1xubGV0IGFjdGl2ZURpcnR5RWxlbWVudHM7XG5sZXQgYWN0aXZlRGlydHlMZWF2ZXM7XG5sZXQgYWN0aXZlUHJldk5vZGVNYXA7XG5sZXQgYWN0aXZlTmV4dE5vZGVNYXA7XG5sZXQgYWN0aXZlUHJldktleVRvRE9NTWFwO1xubGV0IG11dGF0ZWROb2RlcztcblxuZnVuY3Rpb24gZGVzdHJveU5vZGUoa2V5LCBwYXJlbnRET00pIHtcbiAgY29uc3Qgbm9kZSA9IGFjdGl2ZVByZXZOb2RlTWFwLmdldChrZXkpO1xuXG4gIGlmIChwYXJlbnRET00gIT09IG51bGwpIHtcbiAgICBjb25zdCBkb20gPSBnZXRQcmV2RWxlbWVudEJ5S2V5T3JUaHJvdyhrZXkpO1xuXG4gICAgaWYgKGRvbS5wYXJlbnROb2RlID09PSBwYXJlbnRET00pIHtcbiAgICAgIHBhcmVudERPTS5yZW1vdmVDaGlsZChkb20pO1xuICAgIH1cbiAgfSAvLyBUaGlzIGxvZ2ljIGlzIHJlYWxseSBpbXBvcnRhbnQsIG90aGVyd2lzZSB3ZSB3aWxsIGxlYWsgRE9NIG5vZGVzXG4gIC8vIHdoZW4gdGhlaXIgY29ycmVzcG9uZGluZyBMZXhpY2FsTm9kZXMgYXJlIHJlbW92ZWQgZnJvbSB0aGUgZWRpdG9yIHN0YXRlLlxuXG5cbiAgaWYgKCFhY3RpdmVOZXh0Tm9kZU1hcC5oYXMoa2V5KSkge1xuICAgIGFjdGl2ZUVkaXRvciQxLl9rZXlUb0RPTU1hcC5kZWxldGUoa2V5KTtcbiAgfVxuXG4gIGlmICgkaXNFbGVtZW50Tm9kZShub2RlKSkge1xuICAgIGNvbnN0IGNoaWxkcmVuID0gY3JlYXRlQ2hpbGRyZW5BcnJheShub2RlLCBhY3RpdmVQcmV2Tm9kZU1hcCk7XG4gICAgZGVzdHJveUNoaWxkcmVuKGNoaWxkcmVuLCAwLCBjaGlsZHJlbi5sZW5ndGggLSAxLCBudWxsKTtcbiAgfVxuXG4gIGlmIChub2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICBzZXRNdXRhdGVkTm9kZShtdXRhdGVkTm9kZXMsIGFjdGl2ZUVkaXRvck5vZGVzLCBhY3RpdmVNdXRhdGlvbkxpc3RlbmVycywgbm9kZSwgJ2Rlc3Ryb3llZCcpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRlc3Ryb3lDaGlsZHJlbihjaGlsZHJlbiwgX3N0YXJ0SW5kZXgsIGVuZEluZGV4LCBkb20pIHtcbiAgbGV0IHN0YXJ0SW5kZXggPSBfc3RhcnRJbmRleDtcblxuICBmb3IgKDsgc3RhcnRJbmRleCA8PSBlbmRJbmRleDsgKytzdGFydEluZGV4KSB7XG4gICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltzdGFydEluZGV4XTtcblxuICAgIGlmIChjaGlsZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBkZXN0cm95Tm9kZShjaGlsZCwgZG9tKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0VGV4dEFsaWduKGRvbVN0eWxlLCB2YWx1ZSkge1xuICBkb21TdHlsZS5zZXRQcm9wZXJ0eSgndGV4dC1hbGlnbicsIHZhbHVlKTtcbn1cblxuY29uc3QgREVGQVVMVF9JTkRFTlRfVkFMVUUgPSAnMjBweCc7XG5cbmZ1bmN0aW9uIHNldEVsZW1lbnRJbmRlbnQoZG9tLCBpbmRlbnQpIHtcbiAgY29uc3QgaW5kZW50Q2xhc3NOYW1lID0gYWN0aXZlRWRpdG9yQ29uZmlnLnRoZW1lLmluZGVudDtcblxuICBpZiAodHlwZW9mIGluZGVudENsYXNzTmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zdCBlbGVtZW50SGFzQ2xhc3NOYW1lID0gZG9tLmNsYXNzTGlzdC5jb250YWlucyhpbmRlbnRDbGFzc05hbWUpO1xuXG4gICAgaWYgKGluZGVudCA+IDAgJiYgIWVsZW1lbnRIYXNDbGFzc05hbWUpIHtcbiAgICAgIGRvbS5jbGFzc0xpc3QuYWRkKGluZGVudENsYXNzTmFtZSk7XG4gICAgfSBlbHNlIGlmIChpbmRlbnQgPCAxICYmIGVsZW1lbnRIYXNDbGFzc05hbWUpIHtcbiAgICAgIGRvbS5jbGFzc0xpc3QucmVtb3ZlKGluZGVudENsYXNzTmFtZSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgaW5kZW50YXRpb25CYXNlVmFsdWUgPSBnZXRDb21wdXRlZFN0eWxlKGRvbSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1sZXhpY2FsLWluZGVudC1iYXNlLXZhbHVlJykgfHwgREVGQVVMVF9JTkRFTlRfVkFMVUU7XG4gIGRvbS5zdHlsZS5zZXRQcm9wZXJ0eSgncGFkZGluZy1pbmxpbmUtc3RhcnQnLCBpbmRlbnQgPT09IDAgPyAnJyA6IGBjYWxjKCR7aW5kZW50fSAqICR7aW5kZW50YXRpb25CYXNlVmFsdWV9KWApO1xufVxuXG5mdW5jdGlvbiBzZXRFbGVtZW50Rm9ybWF0KGRvbSwgZm9ybWF0KSB7XG4gIGNvbnN0IGRvbVN0eWxlID0gZG9tLnN0eWxlO1xuXG4gIGlmIChmb3JtYXQgPT09IDApIHtcbiAgICBzZXRUZXh0QWxpZ24oZG9tU3R5bGUsICcnKTtcbiAgfSBlbHNlIGlmIChmb3JtYXQgPT09IElTX0FMSUdOX0xFRlQpIHtcbiAgICBzZXRUZXh0QWxpZ24oZG9tU3R5bGUsICdsZWZ0Jyk7XG4gIH0gZWxzZSBpZiAoZm9ybWF0ID09PSBJU19BTElHTl9DRU5URVIpIHtcbiAgICBzZXRUZXh0QWxpZ24oZG9tU3R5bGUsICdjZW50ZXInKTtcbiAgfSBlbHNlIGlmIChmb3JtYXQgPT09IElTX0FMSUdOX1JJR0hUKSB7XG4gICAgc2V0VGV4dEFsaWduKGRvbVN0eWxlLCAncmlnaHQnKTtcbiAgfSBlbHNlIGlmIChmb3JtYXQgPT09IElTX0FMSUdOX0pVU1RJRlkpIHtcbiAgICBzZXRUZXh0QWxpZ24oZG9tU3R5bGUsICdqdXN0aWZ5Jyk7XG4gIH0gZWxzZSBpZiAoZm9ybWF0ID09PSBJU19BTElHTl9TVEFSVCkge1xuICAgIHNldFRleHRBbGlnbihkb21TdHlsZSwgJ3N0YXJ0Jyk7XG4gIH0gZWxzZSBpZiAoZm9ybWF0ID09PSBJU19BTElHTl9FTkQpIHtcbiAgICBzZXRUZXh0QWxpZ24oZG9tU3R5bGUsICdlbmQnKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVOb2RlKGtleSwgcGFyZW50RE9NLCBpbnNlcnRET00pIHtcbiAgY29uc3Qgbm9kZSA9IGFjdGl2ZU5leHROb2RlTWFwLmdldChrZXkpO1xuXG4gIGlmIChub2RlID09PSB1bmRlZmluZWQpIHtcbiAgICB7XG4gICAgICB0aHJvdyBFcnJvcihgY3JlYXRlTm9kZTogbm9kZSBkb2VzIG5vdCBleGlzdCBpbiBub2RlTWFwYCk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgZG9tID0gbm9kZS5jcmVhdGVET00oYWN0aXZlRWRpdG9yQ29uZmlnLCBhY3RpdmVFZGl0b3IkMSk7XG4gIHN0b3JlRE9NV2l0aEtleShrZXksIGRvbSwgYWN0aXZlRWRpdG9yJDEpOyAvLyBUaGlzIGhlbHBzIHByZXNlcnZlIHRoZSB0ZXh0LCBhbmQgc3RvcHMgc3BlbGwgY2hlY2sgdG9vbHMgZnJvbVxuICAvLyBtZXJnaW5nIG9yIGJyZWFrIHRoZSBzcGFucyAod2hpY2ggaGFwcGVucyBpZiB0aGV5IGFyZSBtaXNzaW5nXG4gIC8vIHRoaXMgYXR0cmlidXRlKS5cblxuICBpZiAoJGlzVGV4dE5vZGUobm9kZSkpIHtcbiAgICBkb20uc2V0QXR0cmlidXRlKCdkYXRhLWxleGljYWwtdGV4dCcsICd0cnVlJyk7XG4gIH0gZWxzZSBpZiAoJGlzRGVjb3JhdG9yTm9kZShub2RlKSkge1xuICAgIGRvbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbGV4aWNhbC1kZWNvcmF0b3InLCAndHJ1ZScpO1xuICB9XG5cbiAgaWYgKCRpc0VsZW1lbnROb2RlKG5vZGUpKSB7XG4gICAgY29uc3QgaW5kZW50ID0gbm9kZS5fX2luZGVudDtcbiAgICBjb25zdCBjaGlsZHJlblNpemUgPSBub2RlLl9fc2l6ZTtcblxuICAgIGlmIChpbmRlbnQgIT09IDApIHtcbiAgICAgIHNldEVsZW1lbnRJbmRlbnQoZG9tLCBpbmRlbnQpO1xuICAgIH1cblxuICAgIGlmIChjaGlsZHJlblNpemUgIT09IDApIHtcbiAgICAgIGNvbnN0IGVuZEluZGV4ID0gY2hpbGRyZW5TaXplIC0gMTtcbiAgICAgIGNvbnN0IGNoaWxkcmVuID0gY3JlYXRlQ2hpbGRyZW5BcnJheShub2RlLCBhY3RpdmVOZXh0Tm9kZU1hcCk7XG4gICAgICBjcmVhdGVDaGlsZHJlbldpdGhEaXJlY3Rpb24oY2hpbGRyZW4sIGVuZEluZGV4LCBub2RlLCBkb20pO1xuICAgIH1cblxuICAgIGNvbnN0IGZvcm1hdCA9IG5vZGUuX19mb3JtYXQ7XG5cbiAgICBpZiAoZm9ybWF0ICE9PSAwKSB7XG4gICAgICBzZXRFbGVtZW50Rm9ybWF0KGRvbSwgZm9ybWF0KTtcbiAgICB9XG5cbiAgICBpZiAoIW5vZGUuaXNJbmxpbmUoKSkge1xuICAgICAgcmVjb25jaWxlRWxlbWVudFRlcm1pbmF0aW5nTGluZUJyZWFrKG51bGwsIG5vZGUsIGRvbSk7XG4gICAgfVxuXG4gICAgaWYgKCR0ZXh0Q29udGVudFJlcXVpcmVzRG91YmxlTGluZWJyZWFrQXRFbmQobm9kZSkpIHtcbiAgICAgIHN1YlRyZWVUZXh0Q29udGVudCArPSBET1VCTEVfTElORV9CUkVBSztcbiAgICAgIGVkaXRvclRleHRDb250ZW50ICs9IERPVUJMRV9MSU5FX0JSRUFLO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjb25zdCB0ZXh0ID0gbm9kZS5nZXRUZXh0Q29udGVudCgpO1xuXG4gICAgaWYgKCRpc0RlY29yYXRvck5vZGUobm9kZSkpIHtcbiAgICAgIGNvbnN0IGRlY29yYXRvciA9IG5vZGUuZGVjb3JhdGUoYWN0aXZlRWRpdG9yJDEsIGFjdGl2ZUVkaXRvckNvbmZpZyk7XG5cbiAgICAgIGlmIChkZWNvcmF0b3IgIT09IG51bGwpIHtcbiAgICAgICAgcmVjb25jaWxlRGVjb3JhdG9yKGtleSwgZGVjb3JhdG9yKTtcbiAgICAgIH0gLy8gRGVjb3JhdG9ycyBhcmUgYWx3YXlzIG5vbiBlZGl0YWJsZVxuXG5cbiAgICAgIGRvbS5jb250ZW50RWRpdGFibGUgPSAnZmFsc2UnO1xuICAgIH0gZWxzZSBpZiAoJGlzVGV4dE5vZGUobm9kZSkpIHtcbiAgICAgIGlmICghbm9kZS5pc0RpcmVjdGlvbmxlc3MoKSkge1xuICAgICAgICBzdWJUcmVlRGlyZWN0aW9uZWRUZXh0Q29udGVudCArPSB0ZXh0O1xuICAgICAgfVxuICAgIH1cblxuICAgIHN1YlRyZWVUZXh0Q29udGVudCArPSB0ZXh0O1xuICAgIGVkaXRvclRleHRDb250ZW50ICs9IHRleHQ7XG4gIH1cblxuICBpZiAocGFyZW50RE9NICE9PSBudWxsKSB7XG4gICAgaWYgKGluc2VydERPTSAhPSBudWxsKSB7XG4gICAgICBwYXJlbnRET00uaW5zZXJ0QmVmb3JlKGRvbSwgaW5zZXJ0RE9NKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogaW50ZXJuYWwgZmllbGRcbiAgICAgIGNvbnN0IHBvc3NpYmxlTGluZUJyZWFrID0gcGFyZW50RE9NLl9fbGV4aWNhbExpbmVCcmVhaztcblxuICAgICAgaWYgKHBvc3NpYmxlTGluZUJyZWFrICE9IG51bGwpIHtcbiAgICAgICAgcGFyZW50RE9NLmluc2VydEJlZm9yZShkb20sIHBvc3NpYmxlTGluZUJyZWFrKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmVudERPTS5hcHBlbmRDaGlsZChkb20pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHtcbiAgICAvLyBGcmVlemUgdGhlIG5vZGUgaW4gREVWIHRvIHByZXZlbnQgYWNjaWRlbnRhbCBtdXRhdGlvbnNcbiAgICBPYmplY3QuZnJlZXplKG5vZGUpO1xuICB9XG5cbiAgc2V0TXV0YXRlZE5vZGUobXV0YXRlZE5vZGVzLCBhY3RpdmVFZGl0b3JOb2RlcywgYWN0aXZlTXV0YXRpb25MaXN0ZW5lcnMsIG5vZGUsICdjcmVhdGVkJyk7XG4gIHJldHVybiBkb207XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNoaWxkcmVuV2l0aERpcmVjdGlvbihjaGlsZHJlbiwgZW5kSW5kZXgsIGVsZW1lbnQsIGRvbSkge1xuICBjb25zdCBwcmV2aW91c1N1YlRyZWVEaXJlY3Rpb25lZFRleHRDb250ZW50ID0gc3ViVHJlZURpcmVjdGlvbmVkVGV4dENvbnRlbnQ7XG4gIHN1YlRyZWVEaXJlY3Rpb25lZFRleHRDb250ZW50ID0gJyc7XG4gIGNyZWF0ZUNoaWxkcmVuKGNoaWxkcmVuLCBlbGVtZW50LCAwLCBlbmRJbmRleCwgZG9tLCBudWxsKTtcbiAgcmVjb25jaWxlQmxvY2tEaXJlY3Rpb24oZWxlbWVudCwgZG9tKTtcbiAgc3ViVHJlZURpcmVjdGlvbmVkVGV4dENvbnRlbnQgPSBwcmV2aW91c1N1YlRyZWVEaXJlY3Rpb25lZFRleHRDb250ZW50O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDaGlsZHJlbihjaGlsZHJlbiwgZWxlbWVudCwgX3N0YXJ0SW5kZXgsIGVuZEluZGV4LCBkb20sIGluc2VydERPTSkge1xuICBjb25zdCBwcmV2aW91c1N1YlRyZWVUZXh0Q29udGVudCA9IHN1YlRyZWVUZXh0Q29udGVudDtcbiAgc3ViVHJlZVRleHRDb250ZW50ID0gJyc7XG4gIGxldCBzdGFydEluZGV4ID0gX3N0YXJ0SW5kZXg7XG5cbiAgZm9yICg7IHN0YXJ0SW5kZXggPD0gZW5kSW5kZXg7ICsrc3RhcnRJbmRleCkge1xuICAgIGNyZWF0ZU5vZGUoY2hpbGRyZW5bc3RhcnRJbmRleF0sIGRvbSwgaW5zZXJ0RE9NKTtcbiAgfVxuXG4gIGlmICgkdGV4dENvbnRlbnRSZXF1aXJlc0RvdWJsZUxpbmVicmVha0F0RW5kKGVsZW1lbnQpKSB7XG4gICAgc3ViVHJlZVRleHRDb250ZW50ICs9IERPVUJMRV9MSU5FX0JSRUFLO1xuICB9IC8vIEB0cy1leHBlY3QtZXJyb3I6IGludGVybmFsIGZpZWxkXG5cblxuICBkb20uX19sZXhpY2FsVGV4dENvbnRlbnQgPSBzdWJUcmVlVGV4dENvbnRlbnQ7XG4gIHN1YlRyZWVUZXh0Q29udGVudCA9IHByZXZpb3VzU3ViVHJlZVRleHRDb250ZW50ICsgc3ViVHJlZVRleHRDb250ZW50O1xufVxuXG5mdW5jdGlvbiBpc0xhc3RDaGlsZExpbmVCcmVha09yRGVjb3JhdG9yKGNoaWxkS2V5LCBub2RlTWFwKSB7XG4gIGNvbnN0IG5vZGUgPSBub2RlTWFwLmdldChjaGlsZEtleSk7XG4gIHJldHVybiAkaXNMaW5lQnJlYWtOb2RlKG5vZGUpIHx8ICRpc0RlY29yYXRvck5vZGUobm9kZSkgJiYgbm9kZS5pc0lubGluZSgpO1xufSAvLyBJZiB3ZSBlbmQgYW4gZWxlbWVudCB3aXRoIGEgTGluZUJyZWFrTm9kZSwgdGhlbiB3ZSBuZWVkIHRvIGFkZCBhbiBhZGRpdGlvbmFsIDxicj5cblxuXG5mdW5jdGlvbiByZWNvbmNpbGVFbGVtZW50VGVybWluYXRpbmdMaW5lQnJlYWsocHJldkVsZW1lbnQsIG5leHRFbGVtZW50LCBkb20pIHtcbiAgY29uc3QgcHJldkxpbmVCcmVhayA9IHByZXZFbGVtZW50ICE9PSBudWxsICYmIChwcmV2RWxlbWVudC5fX3NpemUgPT09IDAgfHwgaXNMYXN0Q2hpbGRMaW5lQnJlYWtPckRlY29yYXRvcihwcmV2RWxlbWVudC5fX2xhc3QsIGFjdGl2ZVByZXZOb2RlTWFwKSk7XG4gIGNvbnN0IG5leHRMaW5lQnJlYWsgPSBuZXh0RWxlbWVudC5fX3NpemUgPT09IDAgfHwgaXNMYXN0Q2hpbGRMaW5lQnJlYWtPckRlY29yYXRvcihuZXh0RWxlbWVudC5fX2xhc3QsIGFjdGl2ZU5leHROb2RlTWFwKTtcblxuICBpZiAocHJldkxpbmVCcmVhaykge1xuICAgIGlmICghbmV4dExpbmVCcmVhaykge1xuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogaW50ZXJuYWwgZmllbGRcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb20uX19sZXhpY2FsTGluZUJyZWFrO1xuXG4gICAgICBpZiAoZWxlbWVudCAhPSBudWxsKSB7XG4gICAgICAgIGRvbS5yZW1vdmVDaGlsZChlbGVtZW50KTtcbiAgICAgIH0gLy8gQHRzLWV4cGVjdC1lcnJvcjogaW50ZXJuYWwgZmllbGRcblxuXG4gICAgICBkb20uX19sZXhpY2FsTGluZUJyZWFrID0gbnVsbDtcbiAgICB9XG4gIH0gZWxzZSBpZiAobmV4dExpbmVCcmVhaykge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdicicpOyAvLyBAdHMtZXhwZWN0LWVycm9yOiBpbnRlcm5hbCBmaWVsZFxuXG4gICAgZG9tLl9fbGV4aWNhbExpbmVCcmVhayA9IGVsZW1lbnQ7XG4gICAgZG9tLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlY29uY2lsZUJsb2NrRGlyZWN0aW9uKGVsZW1lbnQsIGRvbSkge1xuICBjb25zdCBwcmV2aW91c1N1YlRyZWVEaXJlY3Rpb25UZXh0Q29udGVudCA9IC8vIEB0cy1leHBlY3QtZXJyb3I6IGludGVybmFsIGZpZWxkXG4gICAgZG9tLl9fbGV4aWNhbERpclRleHRDb250ZW50OyAvLyBAdHMtZXhwZWN0LWVycm9yOiBpbnRlcm5hbCBmaWVsZFxuXG4gIGNvbnN0IHByZXZpb3VzRGlyZWN0aW9uID0gZG9tLl9fbGV4aWNhbERpcjtcblxuICBpZiAocHJldmlvdXNTdWJUcmVlRGlyZWN0aW9uVGV4dENvbnRlbnQgIT09IHN1YlRyZWVEaXJlY3Rpb25lZFRleHRDb250ZW50IHx8IHByZXZpb3VzRGlyZWN0aW9uICE9PSBhY3RpdmVUZXh0RGlyZWN0aW9uKSB7XG4gICAgY29uc3QgaGFzRW1wdHlEaXJlY3Rpb25lZFRleHRDb250ZW50ID0gc3ViVHJlZURpcmVjdGlvbmVkVGV4dENvbnRlbnQgPT09ICcnO1xuICAgIGNvbnN0IGRpcmVjdGlvbiA9IGhhc0VtcHR5RGlyZWN0aW9uZWRUZXh0Q29udGVudCA/IGFjdGl2ZVRleHREaXJlY3Rpb24gOiBnZXRUZXh0RGlyZWN0aW9uKHN1YlRyZWVEaXJlY3Rpb25lZFRleHRDb250ZW50KTtcblxuICAgIGlmIChkaXJlY3Rpb24gIT09IHByZXZpb3VzRGlyZWN0aW9uKSB7XG4gICAgICBjb25zdCBjbGFzc0xpc3QgPSBkb20uY2xhc3NMaXN0O1xuICAgICAgY29uc3QgdGhlbWUgPSBhY3RpdmVFZGl0b3JDb25maWcudGhlbWU7XG4gICAgICBsZXQgcHJldmlvdXNEaXJlY3Rpb25UaGVtZSA9IHByZXZpb3VzRGlyZWN0aW9uICE9PSBudWxsID8gdGhlbWVbcHJldmlvdXNEaXJlY3Rpb25dIDogdW5kZWZpbmVkO1xuICAgICAgbGV0IG5leHREaXJlY3Rpb25UaGVtZSA9IGRpcmVjdGlvbiAhPT0gbnVsbCA/IHRoZW1lW2RpcmVjdGlvbl0gOiB1bmRlZmluZWQ7IC8vIFJlbW92ZSB0aGUgb2xkIHRoZW1lIGNsYXNzZXMgaWYgdGhleSBleGlzdFxuXG4gICAgICBpZiAocHJldmlvdXNEaXJlY3Rpb25UaGVtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcHJldmlvdXNEaXJlY3Rpb25UaGVtZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBjb25zdCBjbGFzc05hbWVzQXJyID0gcHJldmlvdXNEaXJlY3Rpb25UaGVtZS5zcGxpdCgnICcpO1xuICAgICAgICAgIHByZXZpb3VzRGlyZWN0aW9uVGhlbWUgPSB0aGVtZVtwcmV2aW91c0RpcmVjdGlvbl0gPSBjbGFzc05hbWVzQXJyO1xuICAgICAgICB9IC8vIEB0cy1pZ25vcmU6IGludGVudGlvbmFsXG5cblxuICAgICAgICBjbGFzc0xpc3QucmVtb3ZlKC4uLnByZXZpb3VzRGlyZWN0aW9uVGhlbWUpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGlyZWN0aW9uID09PSBudWxsIHx8IGhhc0VtcHR5RGlyZWN0aW9uZWRUZXh0Q29udGVudCAmJiBkaXJlY3Rpb24gPT09ICdsdHInKSB7XG4gICAgICAgIC8vIFJlbW92ZSBkaXJlY3Rpb25cbiAgICAgICAgZG9tLnJlbW92ZUF0dHJpYnV0ZSgnZGlyJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBBcHBseSB0aGUgbmV3IHRoZW1lIGNsYXNzZXMgaWYgdGhleSBleGlzdFxuICAgICAgICBpZiAobmV4dERpcmVjdGlvblRoZW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG5leHREaXJlY3Rpb25UaGVtZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsYXNzTmFtZXNBcnIgPSBuZXh0RGlyZWN0aW9uVGhlbWUuc3BsaXQoJyAnKTsgLy8gQHRzLWV4cGVjdC1lcnJvcjogaW50ZW50aW9uYWxcblxuICAgICAgICAgICAgbmV4dERpcmVjdGlvblRoZW1lID0gdGhlbWVbZGlyZWN0aW9uXSA9IGNsYXNzTmFtZXNBcnI7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKG5leHREaXJlY3Rpb25UaGVtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjbGFzc0xpc3QuYWRkKC4uLm5leHREaXJlY3Rpb25UaGVtZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IC8vIFVwZGF0ZSBkaXJlY3Rpb25cblxuXG4gICAgICAgIGRvbS5kaXIgPSBkaXJlY3Rpb247XG4gICAgICB9XG5cbiAgICAgIGlmICghYWN0aXZlRWRpdG9yU3RhdGVSZWFkT25seSkge1xuICAgICAgICBjb25zdCB3cml0YWJsZU5vZGUgPSBlbGVtZW50LmdldFdyaXRhYmxlKCk7XG4gICAgICAgIHdyaXRhYmxlTm9kZS5fX2RpciA9IGRpcmVjdGlvbjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhY3RpdmVUZXh0RGlyZWN0aW9uID0gZGlyZWN0aW9uOyAvLyBAdHMtZXhwZWN0LWVycm9yOiBpbnRlcm5hbCBmaWVsZFxuXG4gICAgZG9tLl9fbGV4aWNhbERpclRleHRDb250ZW50ID0gc3ViVHJlZURpcmVjdGlvbmVkVGV4dENvbnRlbnQ7IC8vIEB0cy1leHBlY3QtZXJyb3I6IGludGVybmFsIGZpZWxkXG5cbiAgICBkb20uX19sZXhpY2FsRGlyID0gZGlyZWN0aW9uO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlY29uY2lsZUNoaWxkcmVuV2l0aERpcmVjdGlvbihwcmV2RWxlbWVudCwgbmV4dEVsZW1lbnQsIGRvbSkge1xuICBjb25zdCBwcmV2aW91c1N1YlRyZWVEaXJlY3Rpb25UZXh0Q29udGVudCA9IHN1YlRyZWVEaXJlY3Rpb25lZFRleHRDb250ZW50O1xuICBzdWJUcmVlRGlyZWN0aW9uZWRUZXh0Q29udGVudCA9ICcnO1xuICByZWNvbmNpbGVDaGlsZHJlbihwcmV2RWxlbWVudCwgbmV4dEVsZW1lbnQsIGRvbSk7XG4gIHJlY29uY2lsZUJsb2NrRGlyZWN0aW9uKG5leHRFbGVtZW50LCBkb20pO1xuICBzdWJUcmVlRGlyZWN0aW9uZWRUZXh0Q29udGVudCA9IHByZXZpb3VzU3ViVHJlZURpcmVjdGlvblRleHRDb250ZW50O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDaGlsZHJlbkFycmF5KGVsZW1lbnQsIG5vZGVNYXApIHtcbiAgY29uc3QgY2hpbGRyZW4gPSBbXTtcbiAgbGV0IG5vZGVLZXkgPSBlbGVtZW50Ll9fZmlyc3Q7XG5cbiAgd2hpbGUgKG5vZGVLZXkgIT09IG51bGwpIHtcbiAgICBjb25zdCBub2RlID0gbm9kZU1hcC5nZXQobm9kZUtleSk7XG5cbiAgICBpZiAobm9kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB7XG4gICAgICAgIHRocm93IEVycm9yKGBjcmVhdGVDaGlsZHJlbkFycmF5OiBub2RlIGRvZXMgbm90IGV4aXN0IGluIG5vZGVNYXBgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjaGlsZHJlbi5wdXNoKG5vZGVLZXkpO1xuICAgIG5vZGVLZXkgPSBub2RlLl9fbmV4dDtcbiAgfVxuXG4gIHJldHVybiBjaGlsZHJlbjtcbn1cblxuZnVuY3Rpb24gcmVjb25jaWxlQ2hpbGRyZW4ocHJldkVsZW1lbnQsIG5leHRFbGVtZW50LCBkb20pIHtcbiAgY29uc3QgcHJldmlvdXNTdWJUcmVlVGV4dENvbnRlbnQgPSBzdWJUcmVlVGV4dENvbnRlbnQ7XG4gIGNvbnN0IHByZXZDaGlsZHJlblNpemUgPSBwcmV2RWxlbWVudC5fX3NpemU7XG4gIGNvbnN0IG5leHRDaGlsZHJlblNpemUgPSBuZXh0RWxlbWVudC5fX3NpemU7XG4gIHN1YlRyZWVUZXh0Q29udGVudCA9ICcnO1xuXG4gIGlmIChwcmV2Q2hpbGRyZW5TaXplID09PSAxICYmIG5leHRDaGlsZHJlblNpemUgPT09IDEpIHtcbiAgICBjb25zdCBwcmV2Rmlyc3RDaGlsZEtleSA9IHByZXZFbGVtZW50Ll9fZmlyc3Q7XG4gICAgY29uc3QgbmV4dEZyc3RDaGlsZEtleSA9IG5leHRFbGVtZW50Ll9fZmlyc3Q7XG5cbiAgICBpZiAocHJldkZpcnN0Q2hpbGRLZXkgPT09IG5leHRGcnN0Q2hpbGRLZXkpIHtcbiAgICAgIHJlY29uY2lsZU5vZGUocHJldkZpcnN0Q2hpbGRLZXksIGRvbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGxhc3RET00gPSBnZXRQcmV2RWxlbWVudEJ5S2V5T3JUaHJvdyhwcmV2Rmlyc3RDaGlsZEtleSk7XG4gICAgICBjb25zdCByZXBsYWNlbWVudERPTSA9IGNyZWF0ZU5vZGUobmV4dEZyc3RDaGlsZEtleSwgbnVsbCwgbnVsbCk7XG4gICAgICBkb20ucmVwbGFjZUNoaWxkKHJlcGxhY2VtZW50RE9NLCBsYXN0RE9NKTtcbiAgICAgIGRlc3Ryb3lOb2RlKHByZXZGaXJzdENoaWxkS2V5LCBudWxsKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgcHJldkNoaWxkcmVuID0gY3JlYXRlQ2hpbGRyZW5BcnJheShwcmV2RWxlbWVudCwgYWN0aXZlUHJldk5vZGVNYXApO1xuICAgIGNvbnN0IG5leHRDaGlsZHJlbiA9IGNyZWF0ZUNoaWxkcmVuQXJyYXkobmV4dEVsZW1lbnQsIGFjdGl2ZU5leHROb2RlTWFwKTtcblxuICAgIGlmIChwcmV2Q2hpbGRyZW5TaXplID09PSAwKSB7XG4gICAgICBpZiAobmV4dENoaWxkcmVuU2l6ZSAhPT0gMCkge1xuICAgICAgICBjcmVhdGVDaGlsZHJlbihuZXh0Q2hpbGRyZW4sIG5leHRFbGVtZW50LCAwLCBuZXh0Q2hpbGRyZW5TaXplIC0gMSwgZG9tLCBudWxsKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG5leHRDaGlsZHJlblNpemUgPT09IDApIHtcbiAgICAgIGlmIChwcmV2Q2hpbGRyZW5TaXplICE9PSAwKSB7XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IGludGVybmFsIGZpZWxkXG4gICAgICAgIGNvbnN0IGxleGljYWxMaW5lQnJlYWsgPSBkb20uX19sZXhpY2FsTGluZUJyZWFrO1xuICAgICAgICBjb25zdCBjYW5Vc2VGYXN0UGF0aCA9IGxleGljYWxMaW5lQnJlYWsgPT0gbnVsbDtcbiAgICAgICAgZGVzdHJveUNoaWxkcmVuKHByZXZDaGlsZHJlbiwgMCwgcHJldkNoaWxkcmVuU2l6ZSAtIDEsIGNhblVzZUZhc3RQYXRoID8gbnVsbCA6IGRvbSk7XG5cbiAgICAgICAgaWYgKGNhblVzZUZhc3RQYXRoKSB7XG4gICAgICAgICAgLy8gRmFzdCBwYXRoIGZvciByZW1vdmluZyBET00gbm9kZXNcbiAgICAgICAgICBkb20udGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZWNvbmNpbGVOb2RlQ2hpbGRyZW4obmV4dEVsZW1lbnQsIHByZXZDaGlsZHJlbiwgbmV4dENoaWxkcmVuLCBwcmV2Q2hpbGRyZW5TaXplLCBuZXh0Q2hpbGRyZW5TaXplLCBkb20pO1xuICAgIH1cbiAgfVxuXG4gIGlmICgkdGV4dENvbnRlbnRSZXF1aXJlc0RvdWJsZUxpbmVicmVha0F0RW5kKG5leHRFbGVtZW50KSkge1xuICAgIHN1YlRyZWVUZXh0Q29udGVudCArPSBET1VCTEVfTElORV9CUkVBSztcbiAgfSAvLyBAdHMtZXhwZWN0LWVycm9yOiBpbnRlcm5hbCBmaWVsZFxuXG5cbiAgZG9tLl9fbGV4aWNhbFRleHRDb250ZW50ID0gc3ViVHJlZVRleHRDb250ZW50O1xuICBzdWJUcmVlVGV4dENvbnRlbnQgPSBwcmV2aW91c1N1YlRyZWVUZXh0Q29udGVudCArIHN1YlRyZWVUZXh0Q29udGVudDtcbn1cblxuZnVuY3Rpb24gcmVjb25jaWxlTm9kZShrZXksIHBhcmVudERPTSkge1xuICBjb25zdCBwcmV2Tm9kZSA9IGFjdGl2ZVByZXZOb2RlTWFwLmdldChrZXkpO1xuICBsZXQgbmV4dE5vZGUgPSBhY3RpdmVOZXh0Tm9kZU1hcC5nZXQoa2V5KTtcblxuICBpZiAocHJldk5vZGUgPT09IHVuZGVmaW5lZCB8fCBuZXh0Tm9kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAge1xuICAgICAgdGhyb3cgRXJyb3IoYHJlY29uY2lsZU5vZGU6IHByZXZOb2RlIG9yIG5leHROb2RlIGRvZXMgbm90IGV4aXN0IGluIG5vZGVNYXBgKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBpc0RpcnR5ID0gdHJlYXRBbGxOb2Rlc0FzRGlydHkgfHwgYWN0aXZlRGlydHlMZWF2ZXMuaGFzKGtleSkgfHwgYWN0aXZlRGlydHlFbGVtZW50cy5oYXMoa2V5KTtcbiAgY29uc3QgZG9tID0gZ2V0RWxlbWVudEJ5S2V5T3JUaHJvdyhhY3RpdmVFZGl0b3IkMSwga2V5KTsgLy8gSWYgdGhlIG5vZGUga2V5IHBvaW50cyB0byB0aGUgc2FtZSBpbnN0YW5jZSBpbiBib3RoIHN0YXRlc1xuICAvLyBhbmQgaXNuJ3QgZGlydHksIHdlIGp1c3QgdXBkYXRlIHRoZSB0ZXh0IGNvbnRlbnQgY2FjaGVcbiAgLy8gYW5kIHJldHVybiB0aGUgZXhpc3RpbmcgRE9NIE5vZGUuXG5cbiAgaWYgKHByZXZOb2RlID09PSBuZXh0Tm9kZSAmJiAhaXNEaXJ0eSkge1xuICAgIGlmICgkaXNFbGVtZW50Tm9kZShwcmV2Tm9kZSkpIHtcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IGludGVybmFsIGZpZWxkXG4gICAgICBjb25zdCBwcmV2aW91c1N1YlRyZWVUZXh0Q29udGVudCA9IGRvbS5fX2xleGljYWxUZXh0Q29udGVudDtcblxuICAgICAgaWYgKHByZXZpb3VzU3ViVHJlZVRleHRDb250ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc3ViVHJlZVRleHRDb250ZW50ICs9IHByZXZpb3VzU3ViVHJlZVRleHRDb250ZW50O1xuICAgICAgICBlZGl0b3JUZXh0Q29udGVudCArPSBwcmV2aW91c1N1YlRyZWVUZXh0Q29udGVudDtcbiAgICAgIH0gLy8gQHRzLWV4cGVjdC1lcnJvcjogaW50ZXJuYWwgZmllbGRcblxuXG4gICAgICBjb25zdCBwcmV2aW91c1N1YlRyZWVEaXJlY3Rpb25UZXh0Q29udGVudCA9IGRvbS5fX2xleGljYWxEaXJUZXh0Q29udGVudDtcblxuICAgICAgaWYgKHByZXZpb3VzU3ViVHJlZURpcmVjdGlvblRleHRDb250ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc3ViVHJlZURpcmVjdGlvbmVkVGV4dENvbnRlbnQgKz0gcHJldmlvdXNTdWJUcmVlRGlyZWN0aW9uVGV4dENvbnRlbnQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHRleHQgPSBwcmV2Tm9kZS5nZXRUZXh0Q29udGVudCgpO1xuXG4gICAgICBpZiAoJGlzVGV4dE5vZGUocHJldk5vZGUpICYmICFwcmV2Tm9kZS5pc0RpcmVjdGlvbmxlc3MoKSkge1xuICAgICAgICBzdWJUcmVlRGlyZWN0aW9uZWRUZXh0Q29udGVudCArPSB0ZXh0O1xuICAgICAgfVxuXG4gICAgICBlZGl0b3JUZXh0Q29udGVudCArPSB0ZXh0O1xuICAgICAgc3ViVHJlZVRleHRDb250ZW50ICs9IHRleHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRvbTtcbiAgfSAvLyBJZiB0aGUgbm9kZSBrZXkgZG9lc24ndCBwb2ludCB0byB0aGUgc2FtZSBpbnN0YW5jZSBpbiBib3RoIG1hcHMsXG4gIC8vIGl0IG1lYW5zIGl0IHdlcmUgY2xvbmVkLiBJZiB0aGV5J3JlIGFsc28gZGlydHksIHdlIG1hcmsgdGhlbSBhcyBtdXRhdGVkLlxuXG5cbiAgaWYgKHByZXZOb2RlICE9PSBuZXh0Tm9kZSAmJiBpc0RpcnR5KSB7XG4gICAgc2V0TXV0YXRlZE5vZGUobXV0YXRlZE5vZGVzLCBhY3RpdmVFZGl0b3JOb2RlcywgYWN0aXZlTXV0YXRpb25MaXN0ZW5lcnMsIG5leHROb2RlLCAndXBkYXRlZCcpO1xuICB9IC8vIFVwZGF0ZSBub2RlLiBJZiBpdCByZXR1cm5zIHRydWUsIHdlIG5lZWQgdG8gdW5tb3VudCBhbmQgcmUtY3JlYXRlIHRoZSBub2RlXG5cblxuICBpZiAobmV4dE5vZGUudXBkYXRlRE9NKHByZXZOb2RlLCBkb20sIGFjdGl2ZUVkaXRvckNvbmZpZykpIHtcbiAgICBjb25zdCByZXBsYWNlbWVudERPTSA9IGNyZWF0ZU5vZGUoa2V5LCBudWxsLCBudWxsKTtcblxuICAgIGlmIChwYXJlbnRET00gPT09IG51bGwpIHtcbiAgICAgIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoYHJlY29uY2lsZU5vZGU6IHBhcmVudERPTSBpcyBudWxsYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcGFyZW50RE9NLnJlcGxhY2VDaGlsZChyZXBsYWNlbWVudERPTSwgZG9tKTtcbiAgICBkZXN0cm95Tm9kZShrZXksIG51bGwpO1xuICAgIHJldHVybiByZXBsYWNlbWVudERPTTtcbiAgfVxuXG4gIGlmICgkaXNFbGVtZW50Tm9kZShwcmV2Tm9kZSkgJiYgJGlzRWxlbWVudE5vZGUobmV4dE5vZGUpKSB7XG4gICAgLy8gUmVjb25jaWxlIGVsZW1lbnQgY2hpbGRyZW5cbiAgICBjb25zdCBuZXh0SW5kZW50ID0gbmV4dE5vZGUuX19pbmRlbnQ7XG5cbiAgICBpZiAobmV4dEluZGVudCAhPT0gcHJldk5vZGUuX19pbmRlbnQpIHtcbiAgICAgIHNldEVsZW1lbnRJbmRlbnQoZG9tLCBuZXh0SW5kZW50KTtcbiAgICB9XG5cbiAgICBjb25zdCBuZXh0Rm9ybWF0ID0gbmV4dE5vZGUuX19mb3JtYXQ7XG5cbiAgICBpZiAobmV4dEZvcm1hdCAhPT0gcHJldk5vZGUuX19mb3JtYXQpIHtcbiAgICAgIHNldEVsZW1lbnRGb3JtYXQoZG9tLCBuZXh0Rm9ybWF0KTtcbiAgICB9XG5cbiAgICBpZiAoaXNEaXJ0eSkge1xuICAgICAgcmVjb25jaWxlQ2hpbGRyZW5XaXRoRGlyZWN0aW9uKHByZXZOb2RlLCBuZXh0Tm9kZSwgZG9tKTtcblxuICAgICAgaWYgKCEkaXNSb290Tm9kZShuZXh0Tm9kZSkgJiYgIW5leHROb2RlLmlzSW5saW5lKCkpIHtcbiAgICAgICAgcmVjb25jaWxlRWxlbWVudFRlcm1pbmF0aW5nTGluZUJyZWFrKHByZXZOb2RlLCBuZXh0Tm9kZSwgZG9tKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoJHRleHRDb250ZW50UmVxdWlyZXNEb3VibGVMaW5lYnJlYWtBdEVuZChuZXh0Tm9kZSkpIHtcbiAgICAgIHN1YlRyZWVUZXh0Q29udGVudCArPSBET1VCTEVfTElORV9CUkVBSztcbiAgICAgIGVkaXRvclRleHRDb250ZW50ICs9IERPVUJMRV9MSU5FX0JSRUFLO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjb25zdCB0ZXh0ID0gbmV4dE5vZGUuZ2V0VGV4dENvbnRlbnQoKTtcblxuICAgIGlmICgkaXNEZWNvcmF0b3JOb2RlKG5leHROb2RlKSkge1xuICAgICAgY29uc3QgZGVjb3JhdG9yID0gbmV4dE5vZGUuZGVjb3JhdGUoYWN0aXZlRWRpdG9yJDEsIGFjdGl2ZUVkaXRvckNvbmZpZyk7XG5cbiAgICAgIGlmIChkZWNvcmF0b3IgIT09IG51bGwpIHtcbiAgICAgICAgcmVjb25jaWxlRGVjb3JhdG9yKGtleSwgZGVjb3JhdG9yKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCRpc1RleHROb2RlKG5leHROb2RlKSAmJiAhbmV4dE5vZGUuaXNEaXJlY3Rpb25sZXNzKCkpIHtcbiAgICAgIC8vIEhhbmRsZSB0ZXh0IGNvbnRlbnQsIGZvciBMVFIsIExUUiBjYXNlcy5cbiAgICAgIHN1YlRyZWVEaXJlY3Rpb25lZFRleHRDb250ZW50ICs9IHRleHQ7XG4gICAgfVxuXG4gICAgc3ViVHJlZVRleHRDb250ZW50ICs9IHRleHQ7XG4gICAgZWRpdG9yVGV4dENvbnRlbnQgKz0gdGV4dDtcbiAgfVxuXG4gIGlmICghYWN0aXZlRWRpdG9yU3RhdGVSZWFkT25seSAmJiAkaXNSb290Tm9kZShuZXh0Tm9kZSkgJiYgbmV4dE5vZGUuX19jYWNoZWRUZXh0ICE9PSBlZGl0b3JUZXh0Q29udGVudCkge1xuICAgIC8vIENhY2hlIHRoZSBsYXRlc3QgdGV4dCBjb250ZW50LlxuICAgIG5leHROb2RlID0gbmV4dE5vZGUuZ2V0V3JpdGFibGUoKTtcbiAgICBuZXh0Tm9kZS5fX2NhY2hlZFRleHQgPSBlZGl0b3JUZXh0Q29udGVudDtcbiAgfVxuXG4gIHtcbiAgICAvLyBGcmVlemUgdGhlIG5vZGUgaW4gREVWIHRvIHByZXZlbnQgYWNjaWRlbnRhbCBtdXRhdGlvbnNcbiAgICBPYmplY3QuZnJlZXplKG5leHROb2RlKTtcbiAgfVxuXG4gIHJldHVybiBkb207XG59XG5cbmZ1bmN0aW9uIHJlY29uY2lsZURlY29yYXRvcihrZXksIGRlY29yYXRvcikge1xuICBsZXQgcGVuZGluZ0RlY29yYXRvcnMgPSBhY3RpdmVFZGl0b3IkMS5fcGVuZGluZ0RlY29yYXRvcnM7XG4gIGNvbnN0IGN1cnJlbnREZWNvcmF0b3JzID0gYWN0aXZlRWRpdG9yJDEuX2RlY29yYXRvcnM7XG5cbiAgaWYgKHBlbmRpbmdEZWNvcmF0b3JzID09PSBudWxsKSB7XG4gICAgaWYgKGN1cnJlbnREZWNvcmF0b3JzW2tleV0gPT09IGRlY29yYXRvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHBlbmRpbmdEZWNvcmF0b3JzID0gY2xvbmVEZWNvcmF0b3JzKGFjdGl2ZUVkaXRvciQxKTtcbiAgfVxuXG4gIHBlbmRpbmdEZWNvcmF0b3JzW2tleV0gPSBkZWNvcmF0b3I7XG59XG5cbmZ1bmN0aW9uIGdldEZpcnN0Q2hpbGQoZWxlbWVudCkge1xuICByZXR1cm4gZWxlbWVudC5maXJzdENoaWxkO1xufVxuXG5mdW5jdGlvbiBnZXROZXh0U2libGluZyhlbGVtZW50KSB7XG4gIGxldCBuZXh0U2libGluZyA9IGVsZW1lbnQubmV4dFNpYmxpbmc7XG5cbiAgaWYgKG5leHRTaWJsaW5nICE9PSBudWxsICYmIG5leHRTaWJsaW5nID09PSBhY3RpdmVFZGl0b3IkMS5fYmxvY2tDdXJzb3JFbGVtZW50KSB7XG4gICAgbmV4dFNpYmxpbmcgPSBuZXh0U2libGluZy5uZXh0U2libGluZztcbiAgfVxuXG4gIHJldHVybiBuZXh0U2libGluZztcbn1cblxuZnVuY3Rpb24gcmVjb25jaWxlTm9kZUNoaWxkcmVuKG5leHRFbGVtZW50LCBwcmV2Q2hpbGRyZW4sIG5leHRDaGlsZHJlbiwgcHJldkNoaWxkcmVuTGVuZ3RoLCBuZXh0Q2hpbGRyZW5MZW5ndGgsIGRvbSkge1xuICBjb25zdCBwcmV2RW5kSW5kZXggPSBwcmV2Q2hpbGRyZW5MZW5ndGggLSAxO1xuICBjb25zdCBuZXh0RW5kSW5kZXggPSBuZXh0Q2hpbGRyZW5MZW5ndGggLSAxO1xuICBsZXQgcHJldkNoaWxkcmVuU2V0O1xuICBsZXQgbmV4dENoaWxkcmVuU2V0O1xuICBsZXQgc2libGluZ0RPTSA9IGdldEZpcnN0Q2hpbGQoZG9tKTtcbiAgbGV0IHByZXZJbmRleCA9IDA7XG4gIGxldCBuZXh0SW5kZXggPSAwO1xuXG4gIHdoaWxlIChwcmV2SW5kZXggPD0gcHJldkVuZEluZGV4ICYmIG5leHRJbmRleCA8PSBuZXh0RW5kSW5kZXgpIHtcbiAgICBjb25zdCBwcmV2S2V5ID0gcHJldkNoaWxkcmVuW3ByZXZJbmRleF07XG4gICAgY29uc3QgbmV4dEtleSA9IG5leHRDaGlsZHJlbltuZXh0SW5kZXhdO1xuXG4gICAgaWYgKHByZXZLZXkgPT09IG5leHRLZXkpIHtcbiAgICAgIHNpYmxpbmdET00gPSBnZXROZXh0U2libGluZyhyZWNvbmNpbGVOb2RlKG5leHRLZXksIGRvbSkpO1xuICAgICAgcHJldkluZGV4Kys7XG4gICAgICBuZXh0SW5kZXgrKztcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHByZXZDaGlsZHJlblNldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHByZXZDaGlsZHJlblNldCA9IG5ldyBTZXQocHJldkNoaWxkcmVuKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG5leHRDaGlsZHJlblNldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5leHRDaGlsZHJlblNldCA9IG5ldyBTZXQobmV4dENoaWxkcmVuKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbmV4dEhhc1ByZXZLZXkgPSBuZXh0Q2hpbGRyZW5TZXQuaGFzKHByZXZLZXkpO1xuICAgICAgY29uc3QgcHJldkhhc05leHRLZXkgPSBwcmV2Q2hpbGRyZW5TZXQuaGFzKG5leHRLZXkpO1xuXG4gICAgICBpZiAoIW5leHRIYXNQcmV2S2V5KSB7XG4gICAgICAgIC8vIFJlbW92ZSBwcmV2XG4gICAgICAgIHNpYmxpbmdET00gPSBnZXROZXh0U2libGluZyhnZXRQcmV2RWxlbWVudEJ5S2V5T3JUaHJvdyhwcmV2S2V5KSk7XG4gICAgICAgIGRlc3Ryb3lOb2RlKHByZXZLZXksIGRvbSk7XG4gICAgICAgIHByZXZJbmRleCsrO1xuICAgICAgfSBlbHNlIGlmICghcHJldkhhc05leHRLZXkpIHtcbiAgICAgICAgLy8gQ3JlYXRlIG5leHRcbiAgICAgICAgY3JlYXRlTm9kZShuZXh0S2V5LCBkb20sIHNpYmxpbmdET00pO1xuICAgICAgICBuZXh0SW5kZXgrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE1vdmUgbmV4dFxuICAgICAgICBjb25zdCBjaGlsZERPTSA9IGdldEVsZW1lbnRCeUtleU9yVGhyb3coYWN0aXZlRWRpdG9yJDEsIG5leHRLZXkpO1xuXG4gICAgICAgIGlmIChjaGlsZERPTSA9PT0gc2libGluZ0RPTSkge1xuICAgICAgICAgIHNpYmxpbmdET00gPSBnZXROZXh0U2libGluZyhyZWNvbmNpbGVOb2RlKG5leHRLZXksIGRvbSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChzaWJsaW5nRE9NICE9IG51bGwpIHtcbiAgICAgICAgICAgIGRvbS5pbnNlcnRCZWZvcmUoY2hpbGRET00sIHNpYmxpbmdET00pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkb20uYXBwZW5kQ2hpbGQoY2hpbGRET00pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJlY29uY2lsZU5vZGUobmV4dEtleSwgZG9tKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByZXZJbmRleCsrO1xuICAgICAgICBuZXh0SW5kZXgrKztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zdCBhcHBlbmROZXdDaGlsZHJlbiA9IHByZXZJbmRleCA+IHByZXZFbmRJbmRleDtcbiAgY29uc3QgcmVtb3ZlT2xkQ2hpbGRyZW4gPSBuZXh0SW5kZXggPiBuZXh0RW5kSW5kZXg7XG5cbiAgaWYgKGFwcGVuZE5ld0NoaWxkcmVuICYmICFyZW1vdmVPbGRDaGlsZHJlbikge1xuICAgIGNvbnN0IHByZXZpb3VzTm9kZSA9IG5leHRDaGlsZHJlbltuZXh0RW5kSW5kZXggKyAxXTtcbiAgICBjb25zdCBpbnNlcnRET00gPSBwcmV2aW91c05vZGUgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBhY3RpdmVFZGl0b3IkMS5nZXRFbGVtZW50QnlLZXkocHJldmlvdXNOb2RlKTtcbiAgICBjcmVhdGVDaGlsZHJlbihuZXh0Q2hpbGRyZW4sIG5leHRFbGVtZW50LCBuZXh0SW5kZXgsIG5leHRFbmRJbmRleCwgZG9tLCBpbnNlcnRET00pO1xuICB9IGVsc2UgaWYgKHJlbW92ZU9sZENoaWxkcmVuICYmICFhcHBlbmROZXdDaGlsZHJlbikge1xuICAgIGRlc3Ryb3lDaGlsZHJlbihwcmV2Q2hpbGRyZW4sIHByZXZJbmRleCwgcHJldkVuZEluZGV4LCBkb20pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlY29uY2lsZVJvb3QocHJldkVkaXRvclN0YXRlLCBuZXh0RWRpdG9yU3RhdGUsIGVkaXRvciwgZGlydHlUeXBlLCBkaXJ0eUVsZW1lbnRzLCBkaXJ0eUxlYXZlcykge1xuICAvLyBXZSBjYWNoZSB0ZXh0IGNvbnRlbnQgdG8gbWFrZSByZXRyaWV2YWwgbW9yZSBlZmZpY2llbnQuXG4gIC8vIFRoZSBjYWNoZSBtdXN0IGJlIHJlYnVpbHQgZHVyaW5nIHJlY29uY2lsaWF0aW9uIHRvIGFjY291bnQgZm9yIGFueSBjaGFuZ2VzLlxuICBzdWJUcmVlVGV4dENvbnRlbnQgPSAnJztcbiAgZWRpdG9yVGV4dENvbnRlbnQgPSAnJztcbiAgc3ViVHJlZURpcmVjdGlvbmVkVGV4dENvbnRlbnQgPSAnJzsgLy8gUmF0aGVyIHRoYW4gcGFzcyBhcm91bmQgYSBsb2FkIG9mIGFyZ3VtZW50cyB0aHJvdWdoIHRoZSBzdGFjayByZWN1cnNpdmVseVxuICAvLyB3ZSBpbnN0ZWFkIHNldCB0aGVtIGFzIGJpbmRpbmdzIHdpdGhpbiB0aGUgc2NvcGUgb2YgdGhlIG1vZHVsZS5cblxuICB0cmVhdEFsbE5vZGVzQXNEaXJ0eSA9IGRpcnR5VHlwZSA9PT0gRlVMTF9SRUNPTkNJTEU7XG4gIGFjdGl2ZVRleHREaXJlY3Rpb24gPSBudWxsO1xuICBhY3RpdmVFZGl0b3IkMSA9IGVkaXRvcjtcbiAgYWN0aXZlRWRpdG9yQ29uZmlnID0gZWRpdG9yLl9jb25maWc7XG4gIGFjdGl2ZUVkaXRvck5vZGVzID0gZWRpdG9yLl9ub2RlcztcbiAgYWN0aXZlTXV0YXRpb25MaXN0ZW5lcnMgPSBhY3RpdmVFZGl0b3IkMS5fbGlzdGVuZXJzLm11dGF0aW9uO1xuICBhY3RpdmVEaXJ0eUVsZW1lbnRzID0gZGlydHlFbGVtZW50cztcbiAgYWN0aXZlRGlydHlMZWF2ZXMgPSBkaXJ0eUxlYXZlcztcbiAgYWN0aXZlUHJldk5vZGVNYXAgPSBwcmV2RWRpdG9yU3RhdGUuX25vZGVNYXA7XG4gIGFjdGl2ZU5leHROb2RlTWFwID0gbmV4dEVkaXRvclN0YXRlLl9ub2RlTWFwO1xuICBhY3RpdmVFZGl0b3JTdGF0ZVJlYWRPbmx5ID0gbmV4dEVkaXRvclN0YXRlLl9yZWFkT25seTtcbiAgYWN0aXZlUHJldktleVRvRE9NTWFwID0gbmV3IE1hcChlZGl0b3IuX2tleVRvRE9NTWFwKTsgLy8gV2Uga2VlcCB0cmFjayBvZiBtdXRhdGVkIG5vZGVzIHNvIHdlIGNhbiB0cmlnZ2VyIG11dGF0aW9uXG4gIC8vIGxpc3RlbmVycyBsYXRlciBpbiB0aGUgdXBkYXRlIGN5Y2xlLlxuXG4gIGNvbnN0IGN1cnJlbnRNdXRhdGVkTm9kZXMgPSBuZXcgTWFwKCk7XG4gIG11dGF0ZWROb2RlcyA9IGN1cnJlbnRNdXRhdGVkTm9kZXM7XG4gIHJlY29uY2lsZU5vZGUoJ3Jvb3QnLCBudWxsKTsgLy8gV2UgZG9uJ3Qgd2FudCBhIGJ1bmNoIG9mIHZvaWQgY2hlY2tzIHRocm91Z2hvdXQgdGhlIHNjb3BlXG4gIC8vIHNvIGluc3RlYWQgd2UgbWFrZSBpdCBzZWVtIHRoYXQgdGhlc2UgdmFsdWVzIGFyZSBhbHdheXMgc2V0LlxuICAvLyBXZSBhbHNvIHdhbnQgdG8gbWFrZSBzdXJlIHdlIGNsZWFyIHRoZW0gZG93biwgb3RoZXJ3aXNlIHdlXG4gIC8vIGNhbiBsZWFrIG1lbW9yeS5cbiAgLy8gQHRzLWlnbm9yZVxuXG4gIGFjdGl2ZUVkaXRvciQxID0gdW5kZWZpbmVkOyAvLyBAdHMtaWdub3JlXG5cbiAgYWN0aXZlRWRpdG9yTm9kZXMgPSB1bmRlZmluZWQ7IC8vIEB0cy1pZ25vcmVcblxuICBhY3RpdmVEaXJ0eUVsZW1lbnRzID0gdW5kZWZpbmVkOyAvLyBAdHMtaWdub3JlXG5cbiAgYWN0aXZlRGlydHlMZWF2ZXMgPSB1bmRlZmluZWQ7IC8vIEB0cy1pZ25vcmVcblxuICBhY3RpdmVQcmV2Tm9kZU1hcCA9IHVuZGVmaW5lZDsgLy8gQHRzLWlnbm9yZVxuXG4gIGFjdGl2ZU5leHROb2RlTWFwID0gdW5kZWZpbmVkOyAvLyBAdHMtaWdub3JlXG5cbiAgYWN0aXZlRWRpdG9yQ29uZmlnID0gdW5kZWZpbmVkOyAvLyBAdHMtaWdub3JlXG5cbiAgYWN0aXZlUHJldktleVRvRE9NTWFwID0gdW5kZWZpbmVkOyAvLyBAdHMtaWdub3JlXG5cbiAgbXV0YXRlZE5vZGVzID0gdW5kZWZpbmVkO1xuICByZXR1cm4gY3VycmVudE11dGF0ZWROb2Rlcztcbn1cbmZ1bmN0aW9uIHN0b3JlRE9NV2l0aEtleShrZXksIGRvbSwgZWRpdG9yKSB7XG4gIGNvbnN0IGtleVRvRE9NTWFwID0gZWRpdG9yLl9rZXlUb0RPTU1hcDsgLy8gQHRzLWlnbm9yZSBXZSBpbnRlbnRpb25hbGx5IGFkZCB0aGlzIHRvIHRoZSBOb2RlLlxuXG4gIGRvbVsnX19sZXhpY2FsS2V5XycgKyBlZGl0b3IuX2tleV0gPSBrZXk7XG4gIGtleVRvRE9NTWFwLnNldChrZXksIGRvbSk7XG59XG5cbmZ1bmN0aW9uIGdldFByZXZFbGVtZW50QnlLZXlPclRocm93KGtleSkge1xuICBjb25zdCBlbGVtZW50ID0gYWN0aXZlUHJldktleVRvRE9NTWFwLmdldChrZXkpO1xuXG4gIGlmIChlbGVtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICB7XG4gICAgICB0aHJvdyBFcnJvcihgUmVjb25jaWxpYXRpb246IGNvdWxkIG5vdCBmaW5kIERPTSBlbGVtZW50IGZvciBub2RlIGtleSAke2tleX1gKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZWxlbWVudDtcbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xuY29uc3QgUEFTU19USFJPVUdIX0NPTU1BTkQgPSBPYmplY3QuZnJlZXplKHt9KTtcbmNvbnN0IEFORFJPSURfQ09NUE9TSVRJT05fTEFURU5DWSA9IDMwO1xuY29uc3Qgcm9vdEVsZW1lbnRFdmVudHMgPSBbWydrZXlkb3duJywgb25LZXlEb3duXSwgWydwb2ludGVyZG93bicsIG9uUG9pbnRlckRvd25dLCBbJ2NvbXBvc2l0aW9uc3RhcnQnLCBvbkNvbXBvc2l0aW9uU3RhcnRdLCBbJ2NvbXBvc2l0aW9uZW5kJywgb25Db21wb3NpdGlvbkVuZF0sIFsnaW5wdXQnLCBvbklucHV0XSwgWydjbGljaycsIG9uQ2xpY2tdLCBbJ2N1dCcsIFBBU1NfVEhST1VHSF9DT01NQU5EXSwgWydjb3B5JywgUEFTU19USFJPVUdIX0NPTU1BTkRdLCBbJ2RyYWdzdGFydCcsIFBBU1NfVEhST1VHSF9DT01NQU5EXSwgWydkcmFnb3ZlcicsIFBBU1NfVEhST1VHSF9DT01NQU5EXSwgWydkcmFnZW5kJywgUEFTU19USFJPVUdIX0NPTU1BTkRdLCBbJ3Bhc3RlJywgUEFTU19USFJPVUdIX0NPTU1BTkRdLCBbJ2ZvY3VzJywgUEFTU19USFJPVUdIX0NPTU1BTkRdLCBbJ2JsdXInLCBQQVNTX1RIUk9VR0hfQ09NTUFORF0sIFsnZHJvcCcsIFBBU1NfVEhST1VHSF9DT01NQU5EXV07XG5cbmlmIChDQU5fVVNFX0JFRk9SRV9JTlBVVCkge1xuICByb290RWxlbWVudEV2ZW50cy5wdXNoKFsnYmVmb3JlaW5wdXQnLCAoZXZlbnQsIGVkaXRvcikgPT4gb25CZWZvcmVJbnB1dChldmVudCwgZWRpdG9yKV0pO1xufVxuXG5sZXQgbGFzdEtleURvd25UaW1lU3RhbXAgPSAwO1xubGV0IGxhc3RLZXlDb2RlID0gMDtcbmxldCBsYXN0QmVmb3JlSW5wdXRJbnNlcnRUZXh0VGltZVN0YW1wID0gMDtcbmxldCB1bnByb2Nlc3NlZEJlZm9yZUlucHV0RGF0YSA9IG51bGw7XG5sZXQgcm9vdEVsZW1lbnRzUmVnaXN0ZXJlZCA9IDA7XG5sZXQgaXNTZWxlY3Rpb25DaGFuZ2VGcm9tRE9NVXBkYXRlID0gZmFsc2U7XG5sZXQgaXNTZWxlY3Rpb25DaGFuZ2VGcm9tTW91c2VEb3duID0gZmFsc2U7XG5sZXQgaXNJbnNlcnRMaW5lQnJlYWsgPSBmYWxzZTtcbmxldCBpc0ZpcmVmb3hFbmRpbmdDb21wb3NpdGlvbiA9IGZhbHNlO1xubGV0IGNvbGxhcHNlZFNlbGVjdGlvbkZvcm1hdCA9IFswLCAnJywgMCwgJ3Jvb3QnLCAwXTsgLy8gVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGRldGVybWluZSBpZiBMZXhpY2FsIHNob3VsZCBhdHRlbXB0IHRvIG92ZXJyaWRlXG4vLyB0aGUgZGVmYXVsdCBicm93c2VyIGJlaGF2aW9yIGZvciBpbnNlcnRpb24gb2YgdGV4dCBhbmQgdXNlIGl0cyBvd24gaW50ZXJuYWxcbi8vIGhldXJpc3RpY3MuIFRoaXMgaXMgYW4gZXh0cmVtZWx5IGltcG9ydGFudCBmdW5jdGlvbiwgYW5kIG1ha2VzIG11Y2ggb2YgTGV4aWNhbFxuLy8gd29yayBhcyBpbnRlbmRlZCBiZXR3ZWVuIGRpZmZlcmVudCBicm93c2VycyBhbmQgYWNyb3NzIHdvcmQsIGxpbmUgYW5kIGNoYXJhY3RlclxuLy8gYm91bmRhcnkvZm9ybWF0cy4gSXQgYWxzbyBpcyBpbXBvcnRhbnQgZm9yIHRleHQgcmVwbGFjZW1lbnQsIG5vZGUgc2NoZW1hcyBhbmRcbi8vIGNvbXBvc2l0aW9uIG1lY2hhbmljcy5cblxuZnVuY3Rpb24gJHNob3VsZFByZXZlbnREZWZhdWx0QW5kSW5zZXJ0VGV4dChzZWxlY3Rpb24sIGRvbVRhcmdldFJhbmdlLCB0ZXh0LCB0aW1lU3RhbXAsIGlzQmVmb3JlSW5wdXQpIHtcbiAgY29uc3QgYW5jaG9yID0gc2VsZWN0aW9uLmFuY2hvcjtcbiAgY29uc3QgZm9jdXMgPSBzZWxlY3Rpb24uZm9jdXM7XG4gIGNvbnN0IGFuY2hvck5vZGUgPSBhbmNob3IuZ2V0Tm9kZSgpO1xuICBjb25zdCBlZGl0b3IgPSBnZXRBY3RpdmVFZGl0b3IoKTtcbiAgY29uc3QgZG9tU2VsZWN0aW9uID0gZ2V0RE9NU2VsZWN0aW9uKGVkaXRvci5fd2luZG93KTtcbiAgY29uc3QgZG9tQW5jaG9yTm9kZSA9IGRvbVNlbGVjdGlvbiAhPT0gbnVsbCA/IGRvbVNlbGVjdGlvbi5hbmNob3JOb2RlIDogbnVsbDtcbiAgY29uc3QgYW5jaG9yS2V5ID0gYW5jaG9yLmtleTtcbiAgY29uc3QgYmFja2luZ0FuY2hvckVsZW1lbnQgPSBlZGl0b3IuZ2V0RWxlbWVudEJ5S2V5KGFuY2hvcktleSk7XG4gIGNvbnN0IHRleHRMZW5ndGggPSB0ZXh0Lmxlbmd0aDtcbiAgcmV0dXJuIGFuY2hvcktleSAhPT0gZm9jdXMua2V5IHx8IC8vIElmIHdlJ3JlIHdvcmtpbmcgd2l0aCBhIG5vbi10ZXh0IG5vZGUuXG4gICAgISRpc1RleHROb2RlKGFuY2hvck5vZGUpIHx8IC8vIElmIHdlIGFyZSByZXBsYWNpbmcgYSByYW5nZSB3aXRoIGEgc2luZ2xlIGNoYXJhY3RlciBvciBncmFwaGVtZSwgYW5kIG5vdCBjb21wb3NpbmcuXG4gICAgKCFpc0JlZm9yZUlucHV0ICYmICghQ0FOX1VTRV9CRUZPUkVfSU5QVVQgfHwgLy8gV2UgY2hlY2sgdG8gc2VlIGlmIHRoZXJlIGhhcyBiZWVuXG4gICAgICAvLyBhIHJlY2VudCBiZWZvcmVpbnB1dCBldmVudCBmb3IgXCJ0ZXh0SW5wdXRcIi4gSWYgdGhlcmUgaGFzIGJlZW4gb25lIGluIHRoZSBsYXN0XG4gICAgICAvLyA1MG1zIHRoZW4gd2UgcHJvY2VlZCBhcyBub3JtYWwuIEhvd2V2ZXIsIGlmIHRoZXJlIGlzIG5vdCwgdGhlbiB0aGlzIGlzIGxpa2VseVxuICAgICAgLy8gYSBkYW5nbGluZyBgaW5wdXRgIGV2ZW50IGNhdXNlZCBieSBleGVjQ29tbWFuZCgnaW5zZXJ0VGV4dCcpLlxuICAgICAgbGFzdEJlZm9yZUlucHV0SW5zZXJ0VGV4dFRpbWVTdGFtcCA8IHRpbWVTdGFtcCArIDUwKSB8fCBhbmNob3JOb2RlLmlzRGlydHkoKSAmJiB0ZXh0TGVuZ3RoIDwgMiB8fCBkb2VzQ29udGFpbkdyYXBoZW1lKHRleHQpKSAmJiBhbmNob3Iub2Zmc2V0ICE9PSBmb2N1cy5vZmZzZXQgJiYgIWFuY2hvck5vZGUuaXNDb21wb3NpbmcoKSB8fCAvLyBBbnkgbm9uIHN0YW5kYXJkIHRleHQgbm9kZS5cbiAgICAkaXNUb2tlbk9yU2VnbWVudGVkKGFuY2hvck5vZGUpIHx8IC8vIElmIHRoZSB0ZXh0IGxlbmd0aCBpcyBtb3JlIHRoYW4gYSBzaW5nbGUgY2hhcmFjdGVyIGFuZCB3ZSdyZSBlaXRoZXJcbiAgICAvLyBkZWFsaW5nIHdpdGggdGhpcyBpbiBcImJlZm9yZWlucHV0XCIgb3Igd2hlcmUgdGhlIG5vZGUgaGFzIGFscmVhZHkgcmVjZW50bHlcbiAgICAvLyBiZWVuIGNoYW5nZWQgKHRodXMgaXMgZGlydHkpLlxuICAgIGFuY2hvck5vZGUuaXNEaXJ0eSgpICYmIHRleHRMZW5ndGggPiAxIHx8IC8vIElmIHRoZSBET00gc2VsZWN0aW9uIGVsZW1lbnQgaXMgbm90IHRoZSBzYW1lIGFzIHRoZSBiYWNraW5nIG5vZGUgZHVyaW5nIGJlZm9yZWlucHV0LlxuICAgIChpc0JlZm9yZUlucHV0IHx8ICFDQU5fVVNFX0JFRk9SRV9JTlBVVCkgJiYgYmFja2luZ0FuY2hvckVsZW1lbnQgIT09IG51bGwgJiYgIWFuY2hvck5vZGUuaXNDb21wb3NpbmcoKSAmJiBkb21BbmNob3JOb2RlICE9PSBnZXRET01UZXh0Tm9kZShiYWNraW5nQW5jaG9yRWxlbWVudCkgfHwgLy8gSWYgVGFyZ2V0UmFuZ2UgaXMgbm90IHRoZSBzYW1lIGFzIHRoZSBET00gc2VsZWN0aW9uOyBicm93c2VyIHRyeWluZyB0byBlZGl0IHJhbmRvbSBwYXJ0c1xuICAgIC8vIG9mIHRoZSBlZGl0b3IuXG4gICAgZG9tU2VsZWN0aW9uICE9PSBudWxsICYmIGRvbVRhcmdldFJhbmdlICE9PSBudWxsICYmICghZG9tVGFyZ2V0UmFuZ2UuY29sbGFwc2VkIHx8IGRvbVRhcmdldFJhbmdlLnN0YXJ0Q29udGFpbmVyICE9PSBkb21TZWxlY3Rpb24uYW5jaG9yTm9kZSB8fCBkb21UYXJnZXRSYW5nZS5zdGFydE9mZnNldCAhPT0gZG9tU2VsZWN0aW9uLmFuY2hvck9mZnNldCkgfHwgLy8gQ2hlY2sgaWYgd2UncmUgY2hhbmdpbmcgZnJvbSBib2xkIHRvIGl0YWxpY3MsIG9yIHNvbWUgb3RoZXIgZm9ybWF0LlxuICAgIGFuY2hvck5vZGUuZ2V0Rm9ybWF0KCkgIT09IHNlbGVjdGlvbi5mb3JtYXQgfHwgYW5jaG9yTm9kZS5nZXRTdHlsZSgpICE9PSBzZWxlY3Rpb24uc3R5bGUgfHwgLy8gT25lIGxhc3Qgc2V0IG9mIGhldXJpc3RpY3MgdG8gY2hlY2sgYWdhaW5zdC5cbiAgICAkc2hvdWxkSW5zZXJ0VGV4dEFmdGVyT3JCZWZvcmVUZXh0Tm9kZShzZWxlY3Rpb24sIGFuY2hvck5vZGUpO1xufVxuXG5mdW5jdGlvbiBzaG91bGRTa2lwU2VsZWN0aW9uQ2hhbmdlKGRvbU5vZGUsIG9mZnNldCkge1xuICByZXR1cm4gZG9tTm9kZSAhPT0gbnVsbCAmJiBkb21Ob2RlLm5vZGVWYWx1ZSAhPT0gbnVsbCAmJiBkb21Ob2RlLm5vZGVUeXBlID09PSBET01fVEVYVF9UWVBFICYmIG9mZnNldCAhPT0gMCAmJiBvZmZzZXQgIT09IGRvbU5vZGUubm9kZVZhbHVlLmxlbmd0aDtcbn1cblxuZnVuY3Rpb24gb25TZWxlY3Rpb25DaGFuZ2UoZG9tU2VsZWN0aW9uLCBlZGl0b3IsIGlzQWN0aXZlKSB7XG4gIGNvbnN0IHtcbiAgICBhbmNob3JOb2RlOiBhbmNob3JET00sXG4gICAgYW5jaG9yT2Zmc2V0LFxuICAgIGZvY3VzTm9kZTogZm9jdXNET00sXG4gICAgZm9jdXNPZmZzZXRcbiAgfSA9IGRvbVNlbGVjdGlvbjtcblxuICBpZiAoaXNTZWxlY3Rpb25DaGFuZ2VGcm9tRE9NVXBkYXRlKSB7XG4gICAgaXNTZWxlY3Rpb25DaGFuZ2VGcm9tRE9NVXBkYXRlID0gZmFsc2U7IC8vIElmIG5hdGl2ZSBET00gc2VsZWN0aW9uIGlzIG9uIGEgRE9NIGVsZW1lbnQsIHRoZW5cbiAgICAvLyB3ZSBzaG91bGQgY29udGludWUgYXMgdXN1YWwsIGFzIExleGljYWwncyBzZWxlY3Rpb25cbiAgICAvLyBtYXkgaGF2ZSBub3JtYWxpemVkIHRvIGEgYmV0dGVyIGNoaWxkLiBJZiB0aGUgRE9NXG4gICAgLy8gZWxlbWVudCBpcyBhIHRleHQgbm9kZSwgd2UgY2FuIHNhZmVseSBhcHBseSB0aGlzXG4gICAgLy8gb3B0aW1pemF0aW9uIGFuZCBza2lwIHRoZSBzZWxlY3Rpb24gY2hhbmdlIGVudGlyZWx5LlxuICAgIC8vIFdlIGFsc28gbmVlZCB0byBjaGVjayBpZiB0aGUgb2Zmc2V0IGlzIGF0IHRoZSBib3VuZGFyeSxcbiAgICAvLyBiZWNhdXNlIGluIHRoaXMgY2FzZSwgd2UgbWlnaHQgbmVlZCB0byBub3JtYWxpemUgdG8gYVxuICAgIC8vIHNpYmxpbmcgaW5zdGVhZC5cblxuICAgIGlmIChzaG91bGRTa2lwU2VsZWN0aW9uQ2hhbmdlKGFuY2hvckRPTSwgYW5jaG9yT2Zmc2V0KSAmJiBzaG91bGRTa2lwU2VsZWN0aW9uQ2hhbmdlKGZvY3VzRE9NLCBmb2N1c09mZnNldCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVFZGl0b3IoZWRpdG9yLCAoKSA9PiB7XG4gICAgLy8gTm9uLWFjdGl2ZSBlZGl0b3IgZG9uJ3QgbmVlZCBhbnkgZXh0cmEgbG9naWMgZm9yIHNlbGVjdGlvbiwgaXQgb25seSBuZWVkcyB1cGRhdGVcbiAgICAvLyB0byByZWNvbmNpbGUgc2VsZWN0aW9uIChzZXQgaXQgdG8gbnVsbCkgdG8gZW5zdXJlIHRoYXQgb25seSBvbmUgZWRpdG9yIGhhcyBub24tbnVsbCBzZWxlY3Rpb24uXG4gICAgaWYgKCFpc0FjdGl2ZSkge1xuICAgICAgJHNldFNlbGVjdGlvbihudWxsKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWlzU2VsZWN0aW9uV2l0aGluRWRpdG9yKGVkaXRvciwgYW5jaG9yRE9NLCBmb2N1c0RPTSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzZWxlY3Rpb24gPSAkZ2V0U2VsZWN0aW9uKCk7IC8vIFVwZGF0ZSB0aGUgc2VsZWN0aW9uIGZvcm1hdFxuXG4gICAgaWYgKCRpc1JhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikpIHtcbiAgICAgIGNvbnN0IGFuY2hvciA9IHNlbGVjdGlvbi5hbmNob3I7XG4gICAgICBjb25zdCBhbmNob3JOb2RlID0gYW5jaG9yLmdldE5vZGUoKTtcblxuICAgICAgaWYgKHNlbGVjdGlvbi5pc0NvbGxhcHNlZCgpKSB7XG4gICAgICAgIC8vIEJhZGx5IGludGVycHJldGVkIHJhbmdlIHNlbGVjdGlvbiB3aGVuIGNvbGxhcHNlZCAtICMxNDgyXG4gICAgICAgIGlmIChkb21TZWxlY3Rpb24udHlwZSA9PT0gJ1JhbmdlJyAmJiBkb21TZWxlY3Rpb24uYW5jaG9yTm9kZSA9PT0gZG9tU2VsZWN0aW9uLmZvY3VzTm9kZSkge1xuICAgICAgICAgIHNlbGVjdGlvbi5kaXJ0eSA9IHRydWU7XG4gICAgICAgIH0gLy8gSWYgd2UgaGF2ZSBtYXJrZWQgYSBjb2xsYXBzZWQgc2VsZWN0aW9uIGZvcm1hdCwgYW5kIHdlJ3JlXG4gICAgICAgIC8vIHdpdGhpbiB0aGUgZ2l2ZW4gdGltZSByYW5nZSDigJMgdGhlbiBhdHRlbXB0IHRvIHVzZSB0aGF0IGZvcm1hdFxuICAgICAgICAvLyBpbnN0ZWFkIG9mIGdldHRpbmcgdGhlIGZvcm1hdCBmcm9tIHRoZSBhbmNob3Igbm9kZS5cblxuXG4gICAgICAgIGNvbnN0IHdpbmRvd0V2ZW50ID0gZ2V0V2luZG93KGVkaXRvcikuZXZlbnQ7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUaW1lU3RhbXAgPSB3aW5kb3dFdmVudCA/IHdpbmRvd0V2ZW50LnRpbWVTdGFtcCA6IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICBjb25zdCBbbGFzdEZvcm1hdCwgbGFzdFN0eWxlLCBsYXN0T2Zmc2V0LCBsYXN0S2V5LCB0aW1lU3RhbXBdID0gY29sbGFwc2VkU2VsZWN0aW9uRm9ybWF0O1xuXG4gICAgICAgIGlmIChjdXJyZW50VGltZVN0YW1wIDwgdGltZVN0YW1wICsgMjAwICYmIGFuY2hvci5vZmZzZXQgPT09IGxhc3RPZmZzZXQgJiYgYW5jaG9yLmtleSA9PT0gbGFzdEtleSkge1xuICAgICAgICAgIHNlbGVjdGlvbi5mb3JtYXQgPSBsYXN0Rm9ybWF0O1xuICAgICAgICAgIHNlbGVjdGlvbi5zdHlsZSA9IGxhc3RTdHlsZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoYW5jaG9yLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgc2VsZWN0aW9uLmZvcm1hdCA9IGFuY2hvck5vZGUuZ2V0Rm9ybWF0KCk7XG4gICAgICAgICAgICBzZWxlY3Rpb24uc3R5bGUgPSBhbmNob3JOb2RlLmdldFN0eWxlKCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChhbmNob3IudHlwZSA9PT0gJ2VsZW1lbnQnKSB7XG4gICAgICAgICAgICBzZWxlY3Rpb24uZm9ybWF0ID0gMDtcbiAgICAgICAgICAgIHNlbGVjdGlvbi5zdHlsZSA9ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGNvbWJpbmVkRm9ybWF0ID0gSVNfQUxMX0ZPUk1BVFRJTkc7XG4gICAgICAgIGxldCBoYXNUZXh0Tm9kZXMgPSBmYWxzZTtcbiAgICAgICAgY29uc3Qgbm9kZXMgPSBzZWxlY3Rpb24uZ2V0Tm9kZXMoKTtcbiAgICAgICAgY29uc3Qgbm9kZXNMZW5ndGggPSBub2Rlcy5sZW5ndGg7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2Rlc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldO1xuXG4gICAgICAgICAgaWYgKCRpc1RleHROb2RlKG5vZGUpKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiB3aGF0IGFib3V0IHN0eWxlP1xuICAgICAgICAgICAgaGFzVGV4dE5vZGVzID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbWJpbmVkRm9ybWF0ICY9IG5vZGUuZ2V0Rm9ybWF0KCk7XG5cbiAgICAgICAgICAgIGlmIChjb21iaW5lZEZvcm1hdCA9PT0gMCkge1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzZWxlY3Rpb24uZm9ybWF0ID0gaGFzVGV4dE5vZGVzID8gY29tYmluZWRGb3JtYXQgOiAwO1xuICAgICAgfVxuICAgIH1cblxuICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIFNFTEVDVElPTl9DSEFOR0VfQ09NTUFORCwgdW5kZWZpbmVkKTtcbiAgfSk7XG59IC8vIFRoaXMgaXMgYSB3b3JrLWFyb3VuZCBpcyBtYWlubHkgQ2hyb21lIHNwZWNpZmljIGJ1ZyB3aGVyZSBpZiB5b3Ugc2VsZWN0XG4vLyB0aGUgY29udGVudHMgb2YgYW4gZW1wdHkgYmxvY2ssIHlvdSBjYW5ub3QgZWFzaWx5IHVuc2VsZWN0IGFueXRoaW5nLlxuLy8gVGhpcyByZXN1bHRzIGluIGEgdGlueSBzZWxlY3Rpb24gYm94IHRoYXQgbG9va3MgYnVnZ3kvYnJva2VuLiBUaGlzIGNhblxuLy8gYWxzbyBoZWxwIG90aGVyIGJyb3dzZXJzIHdoZW4gc2VsZWN0aW9uIG1pZ2h0IFwiYXBwZWFyXCIgbG9zdCwgd2hlbiBpdFxuLy8gcmVhbGx5IGlzbid0LlxuXG5cbmZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQsIGVkaXRvcikge1xuICB1cGRhdGVFZGl0b3IoZWRpdG9yLCAoKSA9PiB7XG4gICAgY29uc3Qgc2VsZWN0aW9uID0gJGdldFNlbGVjdGlvbigpO1xuICAgIGNvbnN0IGRvbVNlbGVjdGlvbiA9IGdldERPTVNlbGVjdGlvbihlZGl0b3IuX3dpbmRvdyk7XG4gICAgY29uc3QgbGFzdFNlbGVjdGlvbiA9ICRnZXRQcmV2aW91c1NlbGVjdGlvbigpO1xuXG4gICAgaWYgKCRpc1JhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikpIHtcbiAgICAgIGNvbnN0IGFuY2hvciA9IHNlbGVjdGlvbi5hbmNob3I7XG4gICAgICBjb25zdCBhbmNob3JOb2RlID0gYW5jaG9yLmdldE5vZGUoKTtcblxuICAgICAgaWYgKGRvbVNlbGVjdGlvbiAmJiBhbmNob3IudHlwZSA9PT0gJ2VsZW1lbnQnICYmIGFuY2hvci5vZmZzZXQgPT09IDAgJiYgc2VsZWN0aW9uLmlzQ29sbGFwc2VkKCkgJiYgISRpc1Jvb3ROb2RlKGFuY2hvck5vZGUpICYmICRnZXRSb290KCkuZ2V0Q2hpbGRyZW5TaXplKCkgPT09IDEgJiYgYW5jaG9yTm9kZS5nZXRUb3BMZXZlbEVsZW1lbnRPclRocm93KCkuaXNFbXB0eSgpICYmIGxhc3RTZWxlY3Rpb24gIT09IG51bGwgJiYgc2VsZWN0aW9uLmlzKGxhc3RTZWxlY3Rpb24pKSB7XG4gICAgICAgIGRvbVNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgICAgc2VsZWN0aW9uLmRpcnR5ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBDTElDS19DT01NQU5ELCBldmVudCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBvblBvaW50ZXJEb3duKGV2ZW50LCBlZGl0b3IpIHtcbiAgLy8gVE9ETyBpbXBsZW1lbnQgdGV4dCBkcmFnICYgZHJvcFxuICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gIGNvbnN0IHBvaW50ZXJUeXBlID0gZXZlbnQucG9pbnRlclR5cGU7XG5cbiAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIE5vZGUgJiYgcG9pbnRlclR5cGUgIT09ICd0b3VjaCcpIHtcbiAgICB1cGRhdGVFZGl0b3IoZWRpdG9yLCAoKSA9PiB7XG4gICAgICAvLyBEcmFnICYgZHJvcCBzaG91bGQgbm90IHJlY29tcHV0ZSBzZWxlY3Rpb24gdW50aWwgbW91c2UgdXA7IG90aGVyd2lzZSB0aGUgaW5pdGlhbGx5XG4gICAgICAvLyBzZWxlY3RlZCBjb250ZW50IGlzIGxvc3QuXG4gICAgICBpZiAoISRpc1NlbGVjdGlvbkNhcHR1cmVkSW5EZWNvcmF0b3IodGFyZ2V0KSkge1xuICAgICAgICBpc1NlbGVjdGlvbkNoYW5nZUZyb21Nb3VzZURvd24gPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldFRhcmdldFJhbmdlKGV2ZW50KSB7XG4gIGlmICghZXZlbnQuZ2V0VGFyZ2V0UmFuZ2VzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCB0YXJnZXRSYW5nZXMgPSBldmVudC5nZXRUYXJnZXRSYW5nZXMoKTtcblxuICBpZiAodGFyZ2V0UmFuZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIHRhcmdldFJhbmdlc1swXTtcbn1cblxuZnVuY3Rpb24gJGNhblJlbW92ZVRleHQoYW5jaG9yTm9kZSwgZm9jdXNOb2RlKSB7XG4gIHJldHVybiBhbmNob3JOb2RlICE9PSBmb2N1c05vZGUgfHwgJGlzRWxlbWVudE5vZGUoYW5jaG9yTm9kZSkgfHwgJGlzRWxlbWVudE5vZGUoZm9jdXNOb2RlKSB8fCAhYW5jaG9yTm9kZS5pc1Rva2VuKCkgfHwgIWZvY3VzTm9kZS5pc1Rva2VuKCk7XG59XG5cbmZ1bmN0aW9uIGlzUG9zc2libHlBbmRyb2lkS2V5UHJlc3ModGltZVN0YW1wKSB7XG4gIHJldHVybiBsYXN0S2V5Q29kZSA9PT0gMjI5ICYmIHRpbWVTdGFtcCA8IGxhc3RLZXlEb3duVGltZVN0YW1wICsgQU5EUk9JRF9DT01QT1NJVElPTl9MQVRFTkNZO1xufVxuXG5mdW5jdGlvbiBvbkJlZm9yZUlucHV0KGV2ZW50LCBlZGl0b3IpIHtcbiAgY29uc3QgaW5wdXRUeXBlID0gZXZlbnQuaW5wdXRUeXBlO1xuICBjb25zdCB0YXJnZXRSYW5nZSA9IGdldFRhcmdldFJhbmdlKGV2ZW50KTsgLy8gV2UgbGV0IHRoZSBicm93c2VyIGRvIGl0cyBvd24gdGhpbmcgZm9yIGNvbXBvc2l0aW9uLlxuXG4gIGlmIChpbnB1dFR5cGUgPT09ICdkZWxldGVDb21wb3NpdGlvblRleHQnIHx8IC8vIElmIHdlJ3JlIHBhc3RpbmcgaW4gRkYsIHdlIHNob3VsZG4ndCBnZXQgdGhpcyBldmVudFxuICAgIC8vIGFzIHRoZSBgcGFzdGVgIGV2ZW50IHNob3VsZCBoYXZlIHRyaWdnZXJlZCwgdW5sZXNzIHRoZVxuICAgIC8vIHVzZXIgaGFzIGRvbS5ldmVudC5jbGlwYm9hcmRldmVudHMuZW5hYmxlZCBkaXNhYmxlZCBpblxuICAgIC8vIGFib3V0OmNvbmZpZy4gSW4gdGhhdCBjYXNlLCB3ZSBuZWVkIHRvIHByb2Nlc3MgdGhlXG4gICAgLy8gcGFzdGVkIGNvbnRlbnQgaW4gdGhlIERPTSBtdXRhdGlvbiBwaGFzZS5cbiAgICBJU19GSVJFRk9YICYmIGlzRmlyZWZveENsaXBib2FyZEV2ZW50cyhlZGl0b3IpKSB7XG4gICAgcmV0dXJuO1xuICB9IGVsc2UgaWYgKGlucHV0VHlwZSA9PT0gJ2luc2VydENvbXBvc2l0aW9uVGV4dCcpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB1cGRhdGVFZGl0b3IoZWRpdG9yLCAoKSA9PiB7XG4gICAgY29uc3Qgc2VsZWN0aW9uID0gJGdldFNlbGVjdGlvbigpO1xuXG4gICAgaWYgKGlucHV0VHlwZSA9PT0gJ2RlbGV0ZUNvbnRlbnRCYWNrd2FyZCcpIHtcbiAgICAgIGlmIChzZWxlY3Rpb24gPT09IG51bGwpIHtcbiAgICAgICAgLy8gVXNlIHByZXZpb3VzIHNlbGVjdGlvblxuICAgICAgICBjb25zdCBwcmV2U2VsZWN0aW9uID0gJGdldFByZXZpb3VzU2VsZWN0aW9uKCk7XG5cbiAgICAgICAgaWYgKCEkaXNSYW5nZVNlbGVjdGlvbihwcmV2U2VsZWN0aW9uKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgICRzZXRTZWxlY3Rpb24ocHJldlNlbGVjdGlvbi5jbG9uZSgpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCRpc1JhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikpIHtcbiAgICAgICAgLy8gVXNlZCBmb3IgaGFuZGxpbmcgYmFja3NwYWNlIGluIEFuZHJvaWQuXG4gICAgICAgIGlmIChpc1Bvc3NpYmx5QW5kcm9pZEtleVByZXNzKGV2ZW50LnRpbWVTdGFtcCkgJiYgZWRpdG9yLmlzQ29tcG9zaW5nKCkgJiYgc2VsZWN0aW9uLmFuY2hvci5rZXkgPT09IHNlbGVjdGlvbi5mb2N1cy5rZXkpIHtcbiAgICAgICAgICAkc2V0Q29tcG9zaXRpb25LZXkobnVsbCk7XG4gICAgICAgICAgbGFzdEtleURvd25UaW1lU3RhbXAgPSAwOyAvLyBGaXhlcyBhbiBBbmRyb2lkIGJ1ZyB3aGVyZSBzZWxlY3Rpb24gZmxpY2tlcnMgd2hlbiBiYWNrc3BhY2luZ1xuXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB1cGRhdGVFZGl0b3IoZWRpdG9yLCAoKSA9PiB7XG4gICAgICAgICAgICAgICRzZXRDb21wb3NpdGlvbktleShudWxsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sIEFORFJPSURfQ09NUE9TSVRJT05fTEFURU5DWSk7XG5cbiAgICAgICAgICBpZiAoJGlzUmFuZ2VTZWxlY3Rpb24oc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgY29uc3QgYW5jaG9yTm9kZSA9IHNlbGVjdGlvbi5hbmNob3IuZ2V0Tm9kZSgpO1xuICAgICAgICAgICAgYW5jaG9yTm9kZS5tYXJrRGlydHkoKTtcbiAgICAgICAgICAgIHNlbGVjdGlvbi5mb3JtYXQgPSBhbmNob3JOb2RlLmdldEZvcm1hdCgpO1xuICAgICAgICAgICAgc2VsZWN0aW9uLnN0eWxlID0gYW5jaG9yTm9kZS5nZXRTdHlsZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIERFTEVURV9DSEFSQUNURVJfQ09NTUFORCwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCEkaXNSYW5nZVNlbGVjdGlvbihzZWxlY3Rpb24pKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IGV2ZW50LmRhdGE7IC8vIFRoaXMgcmVwcmVzZW50cyB0aGUgY2FzZSB3aGVuIHR3byBiZWZvcmVpbnB1dCBldmVudHMgYXJlIHRyaWdnZXJlZCBhdCB0aGUgc2FtZSB0aW1lICh3aXRob3V0IGFcbiAgICAvLyBmdWxsIGV2ZW50IGxvb3AgZW5kaW5nIGF0IGlucHV0KS4gVGhpcyBoYXBwZW5zIHdpdGggTWFjT1Mgd2l0aCB0aGUgZGVmYXVsdCBrZXlib2FyZCBzZXR0aW5ncyxcbiAgICAvLyBhIGNvbWJpbmF0aW9uIG9mIGF1dG9jb3JyZWN0aW9uICsgYXV0b2NhcGl0YWxpemF0aW9uLlxuICAgIC8vIEhhdmluZyBMZXhpY2FsIHJ1biBldmVyeXRoaW5nIGluIGNvbnRyb2xsZWQgbW9kZSB3b3VsZCBmaXggdGhlIGlzc3VlIHdpdGhvdXQgYWRkaXRpb25hbCBjb2RlXG4gICAgLy8gYnV0IHRoaXMgd291bGQga2lsbCB0aGUgbWFzc2l2ZSBwZXJmb3JtYW5jZSB3aW4gZnJvbSB0aGUgbW9zdCBjb21tb24gdHlwaW5nIGV2ZW50LlxuICAgIC8vIEFsdGVybmF0aXZlbHksIHdoZW4gdGhpcyBoYXBwZW5zIHdlIGNhbiBwcmVtYXR1cmVseSB1cGRhdGUgb3VyIEVkaXRvclN0YXRlIGJhc2VkIG9uIHRoZSBET01cbiAgICAvLyBjb250ZW50LCBhIGpvYiB0aGF0IHdvdWxkIHVzdWFsbHkgYmUgdGhlIGlucHV0IGV2ZW50J3MgcmVzcG9uc2liaWxpdHkuXG5cbiAgICBpZiAodW5wcm9jZXNzZWRCZWZvcmVJbnB1dERhdGEgIT09IG51bGwpIHtcbiAgICAgICR1cGRhdGVTZWxlY3RlZFRleHRGcm9tRE9NKGZhbHNlLCBlZGl0b3IsIHVucHJvY2Vzc2VkQmVmb3JlSW5wdXREYXRhKTtcbiAgICB9XG5cbiAgICBpZiAoKCFzZWxlY3Rpb24uZGlydHkgfHwgdW5wcm9jZXNzZWRCZWZvcmVJbnB1dERhdGEgIT09IG51bGwpICYmIHNlbGVjdGlvbi5pc0NvbGxhcHNlZCgpICYmICEkaXNSb290Tm9kZShzZWxlY3Rpb24uYW5jaG9yLmdldE5vZGUoKSkgJiYgdGFyZ2V0UmFuZ2UgIT09IG51bGwpIHtcbiAgICAgIHNlbGVjdGlvbi5hcHBseURPTVJhbmdlKHRhcmdldFJhbmdlKTtcbiAgICB9XG5cbiAgICB1bnByb2Nlc3NlZEJlZm9yZUlucHV0RGF0YSA9IG51bGw7XG4gICAgY29uc3QgYW5jaG9yID0gc2VsZWN0aW9uLmFuY2hvcjtcbiAgICBjb25zdCBmb2N1cyA9IHNlbGVjdGlvbi5mb2N1cztcbiAgICBjb25zdCBhbmNob3JOb2RlID0gYW5jaG9yLmdldE5vZGUoKTtcbiAgICBjb25zdCBmb2N1c05vZGUgPSBmb2N1cy5nZXROb2RlKCk7XG5cbiAgICBpZiAoaW5wdXRUeXBlID09PSAnaW5zZXJ0VGV4dCcgfHwgaW5wdXRUeXBlID09PSAnaW5zZXJ0VHJhbnNwb3NlJykge1xuICAgICAgaWYgKGRhdGEgPT09ICdcXG4nKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIElOU0VSVF9MSU5FX0JSRUFLX0NPTU1BTkQsIGZhbHNlKTtcbiAgICAgIH0gZWxzZSBpZiAoZGF0YSA9PT0gRE9VQkxFX0xJTkVfQlJFQUspIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgSU5TRVJUX1BBUkFHUkFQSF9DT01NQU5ELCB1bmRlZmluZWQpO1xuICAgICAgfSBlbHNlIGlmIChkYXRhID09IG51bGwgJiYgZXZlbnQuZGF0YVRyYW5zZmVyKSB7XG4gICAgICAgIC8vIEdldHMgYXJvdW5kIGEgU2FmYXJpIHRleHQgcmVwbGFjZW1lbnQgYnVnLlxuICAgICAgICBjb25zdCB0ZXh0ID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgc2VsZWN0aW9uLmluc2VydFJhd1RleHQodGV4dCk7XG4gICAgICB9IGVsc2UgaWYgKGRhdGEgIT0gbnVsbCAmJiAkc2hvdWxkUHJldmVudERlZmF1bHRBbmRJbnNlcnRUZXh0KHNlbGVjdGlvbiwgdGFyZ2V0UmFuZ2UsIGRhdGEsIGV2ZW50LnRpbWVTdGFtcCwgdHJ1ZSkpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgQ09OVFJPTExFRF9URVhUX0lOU0VSVElPTl9DT01NQU5ELCBkYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVucHJvY2Vzc2VkQmVmb3JlSW5wdXREYXRhID0gZGF0YTtcbiAgICAgIH1cblxuICAgICAgbGFzdEJlZm9yZUlucHV0SW5zZXJ0VGV4dFRpbWVTdGFtcCA9IGV2ZW50LnRpbWVTdGFtcDtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIFByZXZlbnQgdGhlIGJyb3dzZXIgZnJvbSBjYXJyeWluZyBvdXRcbiAgICAvLyB0aGUgaW5wdXQgZXZlbnQsIHNvIHdlIGNhbiBjb250cm9sIHRoZVxuICAgIC8vIG91dHB1dC5cblxuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHN3aXRjaCAoaW5wdXRUeXBlKSB7XG4gICAgICBjYXNlICdpbnNlcnRGcm9tWWFuayc6XG4gICAgICBjYXNlICdpbnNlcnRGcm9tRHJvcCc6XG4gICAgICBjYXNlICdpbnNlcnRSZXBsYWNlbWVudFRleHQnOlxuICAgICAge1xuICAgICAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBDT05UUk9MTEVEX1RFWFRfSU5TRVJUSU9OX0NPTU1BTkQsIGV2ZW50KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2luc2VydEZyb21Db21wb3NpdGlvbic6XG4gICAgICB7XG4gICAgICAgIC8vIFRoaXMgaXMgdGhlIGVuZCBvZiBjb21wb3NpdGlvblxuICAgICAgICAkc2V0Q29tcG9zaXRpb25LZXkobnVsbCk7XG4gICAgICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIENPTlRST0xMRURfVEVYVF9JTlNFUlRJT05fQ09NTUFORCwgZXZlbnQpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSAnaW5zZXJ0TGluZUJyZWFrJzpcbiAgICAgIHtcbiAgICAgICAgLy8gVXNlZCBmb3IgQW5kcm9pZFxuICAgICAgICAkc2V0Q29tcG9zaXRpb25LZXkobnVsbCk7XG4gICAgICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIElOU0VSVF9MSU5FX0JSRUFLX0NPTU1BTkQsIGZhbHNlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2luc2VydFBhcmFncmFwaCc6XG4gICAgICB7XG4gICAgICAgIC8vIFVzZWQgZm9yIEFuZHJvaWRcbiAgICAgICAgJHNldENvbXBvc2l0aW9uS2V5KG51bGwpOyAvLyBTb21lIGJyb3dzZXJzIGRvIG5vdCBwcm92aWRlIHRoZSB0eXBlIFwiaW5zZXJ0TGluZUJyZWFrXCIuXG4gICAgICAgIC8vIFNvIGluc3RlYWQsIHdlIG5lZWQgdG8gaW5mZXIgaXQgZnJvbSB0aGUga2V5Ym9hcmQgZXZlbnQuXG5cbiAgICAgICAgaWYgKGlzSW5zZXJ0TGluZUJyZWFrKSB7XG4gICAgICAgICAgaXNJbnNlcnRMaW5lQnJlYWsgPSBmYWxzZTtcbiAgICAgICAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBJTlNFUlRfTElORV9CUkVBS19DT01NQU5ELCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgSU5TRVJUX1BBUkFHUkFQSF9DT01NQU5ELCB1bmRlZmluZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2luc2VydEZyb21QYXN0ZSc6XG4gICAgICBjYXNlICdpbnNlcnRGcm9tUGFzdGVBc1F1b3RhdGlvbic6XG4gICAgICB7XG4gICAgICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIFBBU1RFX0NPTU1BTkQsIGV2ZW50KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlbGV0ZUJ5Q29tcG9zaXRpb24nOlxuICAgICAge1xuICAgICAgICBpZiAoJGNhblJlbW92ZVRleHQoYW5jaG9yTm9kZSwgZm9jdXNOb2RlKSkge1xuICAgICAgICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIFJFTU9WRV9URVhUX0NPTU1BTkQsIHVuZGVmaW5lZCk7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVsZXRlQnlEcmFnJzpcbiAgICAgIGNhc2UgJ2RlbGV0ZUJ5Q3V0JzpcbiAgICAgIHtcbiAgICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgUkVNT1ZFX1RFWFRfQ09NTUFORCwgdW5kZWZpbmVkKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlbGV0ZUNvbnRlbnQnOlxuICAgICAge1xuICAgICAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBERUxFVEVfQ0hBUkFDVEVSX0NPTU1BTkQsIGZhbHNlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlbGV0ZVdvcmRCYWNrd2FyZCc6XG4gICAgICB7XG4gICAgICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIERFTEVURV9XT1JEX0NPTU1BTkQsIHRydWUpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVsZXRlV29yZEZvcndhcmQnOlxuICAgICAge1xuICAgICAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBERUxFVEVfV09SRF9DT01NQU5ELCBmYWxzZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWxldGVIYXJkTGluZUJhY2t3YXJkJzpcbiAgICAgIGNhc2UgJ2RlbGV0ZVNvZnRMaW5lQmFja3dhcmQnOlxuICAgICAge1xuICAgICAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBERUxFVEVfTElORV9DT01NQU5ELCB0cnVlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlbGV0ZUNvbnRlbnRGb3J3YXJkJzpcbiAgICAgIGNhc2UgJ2RlbGV0ZUhhcmRMaW5lRm9yd2FyZCc6XG4gICAgICBjYXNlICdkZWxldGVTb2Z0TGluZUZvcndhcmQnOlxuICAgICAge1xuICAgICAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBERUxFVEVfTElORV9DT01NQU5ELCBmYWxzZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdmb3JtYXRTdHJpa2VUaHJvdWdoJzpcbiAgICAgIHtcbiAgICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgRk9STUFUX1RFWFRfQ09NTUFORCwgJ3N0cmlrZXRocm91Z2gnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2Zvcm1hdEJvbGQnOlxuICAgICAge1xuICAgICAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBGT1JNQVRfVEVYVF9DT01NQU5ELCAnYm9sZCcpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZm9ybWF0SXRhbGljJzpcbiAgICAgIHtcbiAgICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgRk9STUFUX1RFWFRfQ09NTUFORCwgJ2l0YWxpYycpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZm9ybWF0VW5kZXJsaW5lJzpcbiAgICAgIHtcbiAgICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgRk9STUFUX1RFWFRfQ09NTUFORCwgJ3VuZGVybGluZScpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSAnaGlzdG9yeVVuZG8nOlxuICAgICAge1xuICAgICAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBVTkRPX0NPTU1BTkQsIHVuZGVmaW5lZCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdoaXN0b3J5UmVkbyc6XG4gICAgICB7XG4gICAgICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIFJFRE9fQ09NTUFORCwgdW5kZWZpbmVkKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBvbklucHV0KGV2ZW50LCBlZGl0b3IpIHtcbiAgLy8gV2UgZG9uJ3Qgd2FudCB0aGUgb25JbnB1dCB0byBidWJibGUsIGluIHRoZSBjYXNlIG9mIG5lc3RlZCBlZGl0b3JzLlxuICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgdXBkYXRlRWRpdG9yKGVkaXRvciwgKCkgPT4ge1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9ICRnZXRTZWxlY3Rpb24oKTtcbiAgICBjb25zdCBkYXRhID0gZXZlbnQuZGF0YTtcbiAgICBjb25zdCB0YXJnZXRSYW5nZSA9IGdldFRhcmdldFJhbmdlKGV2ZW50KTtcblxuICAgIGlmIChkYXRhICE9IG51bGwgJiYgJGlzUmFuZ2VTZWxlY3Rpb24oc2VsZWN0aW9uKSAmJiAkc2hvdWxkUHJldmVudERlZmF1bHRBbmRJbnNlcnRUZXh0KHNlbGVjdGlvbiwgdGFyZ2V0UmFuZ2UsIGRhdGEsIGV2ZW50LnRpbWVTdGFtcCwgZmFsc2UpKSB7XG4gICAgICAvLyBHaXZlbiB3ZSdyZSBvdmVyLXJpZGluZyB0aGUgZGVmYXVsdCBiZWhhdmlvciwgd2Ugd2lsbCBuZWVkXG4gICAgICAvLyB0byBlbnN1cmUgdG8gZGlzYWJsZSBjb21wb3NpdGlvbiBiZWZvcmUgZGlzcGF0Y2hpbmcgdGhlXG4gICAgICAvLyBpbnNlcnRUZXh0IGNvbW1hbmQgZm9yIHdoZW4gY2hhbmdpbmcgdGhlIHNlcXVlbmNlIGZvciBGRi5cbiAgICAgIGlmIChpc0ZpcmVmb3hFbmRpbmdDb21wb3NpdGlvbikge1xuICAgICAgICBvbkNvbXBvc2l0aW9uRW5kSW1wbChlZGl0b3IsIGRhdGEpO1xuICAgICAgICBpc0ZpcmVmb3hFbmRpbmdDb21wb3NpdGlvbiA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBhbmNob3IgPSBzZWxlY3Rpb24uYW5jaG9yO1xuICAgICAgY29uc3QgYW5jaG9yTm9kZSA9IGFuY2hvci5nZXROb2RlKCk7XG4gICAgICBjb25zdCBkb21TZWxlY3Rpb24gPSBnZXRET01TZWxlY3Rpb24oZWRpdG9yLl93aW5kb3cpO1xuXG4gICAgICBpZiAoZG9tU2VsZWN0aW9uID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgb2Zmc2V0ID0gYW5jaG9yLm9mZnNldDsgLy8gSWYgdGhlIGNvbnRlbnQgaXMgdGhlIHNhbWUgYXMgaW5zZXJ0ZWQsIHRoZW4gZG9uJ3QgZGlzcGF0Y2ggYW4gaW5zZXJ0aW9uLlxuICAgICAgLy8gR2l2ZW4gb25JbnB1dCBkb2Vzbid0IHRha2UgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIChpdCB1c2VzIHRoZSBwcmV2aW91cylcbiAgICAgIC8vIHdlIGNhbiBjb21wYXJlIHRoYXQgYWdhaW5zdCB3aGF0IHRoZSBET00gY3VycmVudGx5IHNheXMuXG5cbiAgICAgIGlmICghQ0FOX1VTRV9CRUZPUkVfSU5QVVQgfHwgc2VsZWN0aW9uLmlzQ29sbGFwc2VkKCkgfHwgISRpc1RleHROb2RlKGFuY2hvck5vZGUpIHx8IGRvbVNlbGVjdGlvbi5hbmNob3JOb2RlID09PSBudWxsIHx8IGFuY2hvck5vZGUuZ2V0VGV4dENvbnRlbnQoKS5zbGljZSgwLCBvZmZzZXQpICsgZGF0YSArIGFuY2hvck5vZGUuZ2V0VGV4dENvbnRlbnQoKS5zbGljZShvZmZzZXQgKyBzZWxlY3Rpb24uZm9jdXMub2Zmc2V0KSAhPT0gZ2V0QW5jaG9yVGV4dEZyb21ET00oZG9tU2VsZWN0aW9uLmFuY2hvck5vZGUpKSB7XG4gICAgICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIENPTlRST0xMRURfVEVYVF9JTlNFUlRJT05fQ09NTUFORCwgZGF0YSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRleHRMZW5ndGggPSBkYXRhLmxlbmd0aDsgLy8gQW5vdGhlciBoYWNrIGZvciBGRiwgYXMgaXQncyBwb3NzaWJsZSB0aGF0IHRoZSBJTUUgaXMgc3RpbGxcbiAgICAgIC8vIG9wZW4sIGV2ZW4gdGhvdWdoIGNvbXBvc2l0aW9uZW5kIGhhcyBhbHJlYWR5IGZpcmVkIChzaWdoKS5cblxuICAgICAgaWYgKElTX0ZJUkVGT1ggJiYgdGV4dExlbmd0aCA+IDEgJiYgZXZlbnQuaW5wdXRUeXBlID09PSAnaW5zZXJ0Q29tcG9zaXRpb25UZXh0JyAmJiAhZWRpdG9yLmlzQ29tcG9zaW5nKCkpIHtcbiAgICAgICAgc2VsZWN0aW9uLmFuY2hvci5vZmZzZXQgLT0gdGV4dExlbmd0aDtcbiAgICAgIH0gLy8gVGhpcyBlbnN1cmVzIGNvbnNpc3RlbmN5IG9uIEFuZHJvaWQuXG5cblxuICAgICAgaWYgKCFJU19TQUZBUkkgJiYgIUlTX0lPUyAmJiAhSVNfQVBQTEVfV0VCS0lUICYmIGVkaXRvci5pc0NvbXBvc2luZygpKSB7XG4gICAgICAgIGxhc3RLZXlEb3duVGltZVN0YW1wID0gMDtcbiAgICAgICAgJHNldENvbXBvc2l0aW9uS2V5KG51bGwpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjaGFyYWN0ZXJEYXRhID0gZGF0YSAhPT0gbnVsbCA/IGRhdGEgOiB1bmRlZmluZWQ7XG4gICAgICAkdXBkYXRlU2VsZWN0ZWRUZXh0RnJvbURPTShmYWxzZSwgZWRpdG9yLCBjaGFyYWN0ZXJEYXRhKTsgLy8gb25JbnB1dCBhbHdheXMgZmlyZXMgYWZ0ZXIgb25Db21wb3NpdGlvbkVuZCBmb3IgRkYuXG5cbiAgICAgIGlmIChpc0ZpcmVmb3hFbmRpbmdDb21wb3NpdGlvbikge1xuICAgICAgICBvbkNvbXBvc2l0aW9uRW5kSW1wbChlZGl0b3IsIGRhdGEgfHwgdW5kZWZpbmVkKTtcbiAgICAgICAgaXNGaXJlZm94RW5kaW5nQ29tcG9zaXRpb24gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9IC8vIEFsc28gZmx1c2ggYW55IG90aGVyIG11dGF0aW9ucyB0aGF0IG1pZ2h0IGhhdmUgb2NjdXJyZWRcbiAgICAvLyBzaW5jZSB0aGUgY2hhbmdlLlxuXG5cbiAgICAkZmx1c2hNdXRhdGlvbnMoKTtcbiAgfSk7XG4gIHVucHJvY2Vzc2VkQmVmb3JlSW5wdXREYXRhID0gbnVsbDtcbn1cblxuZnVuY3Rpb24gb25Db21wb3NpdGlvblN0YXJ0KGV2ZW50LCBlZGl0b3IpIHtcbiAgdXBkYXRlRWRpdG9yKGVkaXRvciwgKCkgPT4ge1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9ICRnZXRTZWxlY3Rpb24oKTtcblxuICAgIGlmICgkaXNSYW5nZVNlbGVjdGlvbihzZWxlY3Rpb24pICYmICFlZGl0b3IuaXNDb21wb3NpbmcoKSkge1xuICAgICAgY29uc3QgYW5jaG9yID0gc2VsZWN0aW9uLmFuY2hvcjtcbiAgICAgIGNvbnN0IG5vZGUgPSBzZWxlY3Rpb24uYW5jaG9yLmdldE5vZGUoKTtcbiAgICAgICRzZXRDb21wb3NpdGlvbktleShhbmNob3Iua2V5KTtcblxuICAgICAgaWYgKCAvLyBJZiBpdCBoYXMgYmVlbiAzMG1zIHNpbmNlIHRoZSBsYXN0IGtleWRvd24sIHRoZW4gd2Ugc2hvdWxkXG4gICAgICAgIC8vIGFwcGx5IHRoZSBlbXB0eSBzcGFjZSBoZXVyaXN0aWMuIFdlIGNhbid0IGRvIHRoaXMgZm9yIFNhZmFyaSxcbiAgICAgICAgLy8gYXMgdGhlIGtleWRvd24gZmlyZXMgYWZ0ZXIgY29tcG9zaXRpb24gc3RhcnQuXG4gICAgICAgIGV2ZW50LnRpbWVTdGFtcCA8IGxhc3RLZXlEb3duVGltZVN0YW1wICsgQU5EUk9JRF9DT01QT1NJVElPTl9MQVRFTkNZIHx8IC8vIEZGIGhhcyBpc3N1ZXMgYXJvdW5kIGNvbXBvc2luZyBtdWx0aWJ5dGUgY2hhcmFjdGVycywgc28gd2UgYWxzb1xuICAgICAgICAvLyBuZWVkIHRvIGludm9rZSB0aGUgZW1wdHkgc3BhY2UgaGV1cmlzdGljIGJlbG93LlxuICAgICAgICBhbmNob3IudHlwZSA9PT0gJ2VsZW1lbnQnIHx8ICFzZWxlY3Rpb24uaXNDb2xsYXBzZWQoKSB8fCBub2RlLmdldEZvcm1hdCgpICE9PSBzZWxlY3Rpb24uZm9ybWF0IHx8IG5vZGUuZ2V0U3R5bGUoKSAhPT0gc2VsZWN0aW9uLnN0eWxlKSB7XG4gICAgICAgIC8vIFdlIGluc2VydCBhIHplcm8gd2lkdGggY2hhcmFjdGVyLCByZWFkeSBmb3IgdGhlIGNvbXBvc2l0aW9uXG4gICAgICAgIC8vIHRvIGdldCBpbnNlcnRlZCBpbnRvIHRoZSBuZXcgbm9kZSB3ZSBjcmVhdGUuIElmXG4gICAgICAgIC8vIHdlIGRvbid0IGRvIHRoaXMsIFNhZmFyaSB3aWxsIGZhaWwgb24gdXMgYmVjYXVzZVxuICAgICAgICAvLyB0aGVyZSBpcyBubyB0ZXh0IG5vZGUgbWF0Y2hpbmcgdGhlIHNlbGVjdGlvbi5cbiAgICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgQ09OVFJPTExFRF9URVhUX0lOU0VSVElPTl9DT01NQU5ELCBDT01QT1NJVElPTl9TVEFSVF9DSEFSKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBvbkNvbXBvc2l0aW9uRW5kSW1wbChlZGl0b3IsIGRhdGEpIHtcbiAgY29uc3QgY29tcG9zaXRpb25LZXkgPSBlZGl0b3IuX2NvbXBvc2l0aW9uS2V5O1xuICAkc2V0Q29tcG9zaXRpb25LZXkobnVsbCk7IC8vIEhhbmRsZSB0ZXJtaW5hdGlvbiBvZiBjb21wb3NpdGlvbi5cblxuICBpZiAoY29tcG9zaXRpb25LZXkgIT09IG51bGwgJiYgZGF0YSAhPSBudWxsKSB7XG4gICAgLy8gQ29tcG9zaXRpb24gY2FuIHNvbWV0aW1lcyBtb3ZlIHRvIGFuIGFkamFjZW50IERPTSBub2RlIHdoZW4gYmFja3NwYWNpbmcuXG4gICAgLy8gU28gY2hlY2sgZm9yIHRoZSBlbXB0eSBjYXNlLlxuICAgIGlmIChkYXRhID09PSAnJykge1xuICAgICAgY29uc3Qgbm9kZSA9ICRnZXROb2RlQnlLZXkoY29tcG9zaXRpb25LZXkpO1xuICAgICAgY29uc3QgdGV4dE5vZGUgPSBnZXRET01UZXh0Tm9kZShlZGl0b3IuZ2V0RWxlbWVudEJ5S2V5KGNvbXBvc2l0aW9uS2V5KSk7XG5cbiAgICAgIGlmICh0ZXh0Tm9kZSAhPT0gbnVsbCAmJiB0ZXh0Tm9kZS5ub2RlVmFsdWUgIT09IG51bGwgJiYgJGlzVGV4dE5vZGUobm9kZSkpIHtcbiAgICAgICAgJHVwZGF0ZVRleHROb2RlRnJvbURPTUNvbnRlbnQobm9kZSwgdGV4dE5vZGUubm9kZVZhbHVlLCBudWxsLCBudWxsLCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gQ29tcG9zaXRpb24gY2FuIHNvbWV0aW1lcyBiZSB0aGF0IG9mIGEgbmV3IGxpbmUuIEluIHdoaWNoIGNhc2UsIHdlIG5lZWQgdG9cbiAgICAvLyBoYW5kbGUgdGhhdCBhY2NvcmRpbmdseS5cblxuXG4gICAgaWYgKGRhdGFbZGF0YS5sZW5ndGggLSAxXSA9PT0gJ1xcbicpIHtcbiAgICAgIGNvbnN0IHNlbGVjdGlvbiA9ICRnZXRTZWxlY3Rpb24oKTtcblxuICAgICAgaWYgKCRpc1JhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikpIHtcbiAgICAgICAgLy8gSWYgdGhlIGxhc3QgY2hhcmFjdGVyIGlzIGEgbGluZSBicmVhaywgd2UgYWxzbyBuZWVkIHRvIGluc2VydFxuICAgICAgICAvLyBhIGxpbmUgYnJlYWsuXG4gICAgICAgIGNvbnN0IGZvY3VzID0gc2VsZWN0aW9uLmZvY3VzO1xuICAgICAgICBzZWxlY3Rpb24uYW5jaG9yLnNldChmb2N1cy5rZXksIGZvY3VzLm9mZnNldCwgZm9jdXMudHlwZSk7XG4gICAgICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIEtFWV9FTlRFUl9DT01NQU5ELCBudWxsKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gICR1cGRhdGVTZWxlY3RlZFRleHRGcm9tRE9NKHRydWUsIGVkaXRvciwgZGF0YSk7XG59XG5cbmZ1bmN0aW9uIG9uQ29tcG9zaXRpb25FbmQoZXZlbnQsIGVkaXRvcikge1xuICAvLyBGaXJlZm94IGZpcmVzIG9uQ29tcG9zaXRpb25FbmQgYmVmb3JlIG9uSW5wdXQsIGJ1dCBDaHJvbWUvV2Via2l0LFxuICAvLyBmaXJlIG9uSW5wdXQgYmVmb3JlIG9uQ29tcG9zaXRpb25FbmQuIFRvIGVuc3VyZSB0aGUgc2VxdWVuY2Ugd29ya3NcbiAgLy8gbGlrZSBDaHJvbWUvV2Via2l0IHdlIHVzZSB0aGUgaXNGaXJlZm94RW5kaW5nQ29tcG9zaXRpb24gZmxhZyB0b1xuICAvLyBkZWZlciBoYW5kbGluZyBvZiBvbkNvbXBvc2l0aW9uRW5kIGluIEZpcmVmb3ggdGlsbCB3ZSBoYXZlIHByb2Nlc3NlZFxuICAvLyB0aGUgbG9naWMgaW4gb25JbnB1dC5cbiAgaWYgKElTX0ZJUkVGT1gpIHtcbiAgICBpc0ZpcmVmb3hFbmRpbmdDb21wb3NpdGlvbiA9IHRydWU7XG4gIH0gZWxzZSB7XG4gICAgdXBkYXRlRWRpdG9yKGVkaXRvciwgKCkgPT4ge1xuICAgICAgb25Db21wb3NpdGlvbkVuZEltcGwoZWRpdG9yLCBldmVudC5kYXRhKTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBvbktleURvd24oZXZlbnQsIGVkaXRvcikge1xuICBsYXN0S2V5RG93blRpbWVTdGFtcCA9IGV2ZW50LnRpbWVTdGFtcDtcbiAgbGFzdEtleUNvZGUgPSBldmVudC5rZXlDb2RlO1xuXG4gIGlmIChlZGl0b3IuaXNDb21wb3NpbmcoKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHtcbiAgICBrZXlDb2RlLFxuICAgIHNoaWZ0S2V5LFxuICAgIGN0cmxLZXksXG4gICAgbWV0YUtleSxcbiAgICBhbHRLZXlcbiAgfSA9IGV2ZW50O1xuXG4gIGlmIChkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBLRVlfRE9XTl9DT01NQU5ELCBldmVudCkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoaXNNb3ZlRm9yd2FyZChrZXlDb2RlLCBjdHJsS2V5LCBhbHRLZXksIG1ldGFLZXkpKSB7XG4gICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgS0VZX0FSUk9XX1JJR0hUX0NPTU1BTkQsIGV2ZW50KTtcbiAgfSBlbHNlIGlmIChpc01vdmVUb0VuZChrZXlDb2RlLCBjdHJsS2V5LCBzaGlmdEtleSwgYWx0S2V5LCBtZXRhS2V5KSkge1xuICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIE1PVkVfVE9fRU5ELCBldmVudCk7XG4gIH0gZWxzZSBpZiAoaXNNb3ZlQmFja3dhcmQoa2V5Q29kZSwgY3RybEtleSwgYWx0S2V5LCBtZXRhS2V5KSkge1xuICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIEtFWV9BUlJPV19MRUZUX0NPTU1BTkQsIGV2ZW50KTtcbiAgfSBlbHNlIGlmIChpc01vdmVUb1N0YXJ0KGtleUNvZGUsIGN0cmxLZXksIHNoaWZ0S2V5LCBhbHRLZXksIG1ldGFLZXkpKSB7XG4gICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgTU9WRV9UT19TVEFSVCwgZXZlbnQpO1xuICB9IGVsc2UgaWYgKGlzTW92ZVVwKGtleUNvZGUsIGN0cmxLZXksIG1ldGFLZXkpKSB7XG4gICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgS0VZX0FSUk9XX1VQX0NPTU1BTkQsIGV2ZW50KTtcbiAgfSBlbHNlIGlmIChpc01vdmVEb3duKGtleUNvZGUsIGN0cmxLZXksIG1ldGFLZXkpKSB7XG4gICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgS0VZX0FSUk9XX0RPV05fQ09NTUFORCwgZXZlbnQpO1xuICB9IGVsc2UgaWYgKGlzTGluZUJyZWFrKGtleUNvZGUsIHNoaWZ0S2V5KSkge1xuICAgIGlzSW5zZXJ0TGluZUJyZWFrID0gdHJ1ZTtcbiAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBLRVlfRU5URVJfQ09NTUFORCwgZXZlbnQpO1xuICB9IGVsc2UgaWYgKGlzU3BhY2Uoa2V5Q29kZSkpIHtcbiAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBLRVlfU1BBQ0VfQ09NTUFORCwgZXZlbnQpO1xuICB9IGVsc2UgaWYgKGlzT3BlbkxpbmVCcmVhayhrZXlDb2RlLCBjdHJsS2V5KSkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgaXNJbnNlcnRMaW5lQnJlYWsgPSB0cnVlO1xuICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIElOU0VSVF9MSU5FX0JSRUFLX0NPTU1BTkQsIHRydWUpO1xuICB9IGVsc2UgaWYgKGlzUGFyYWdyYXBoKGtleUNvZGUsIHNoaWZ0S2V5KSkge1xuICAgIGlzSW5zZXJ0TGluZUJyZWFrID0gZmFsc2U7XG4gICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgS0VZX0VOVEVSX0NPTU1BTkQsIGV2ZW50KTtcbiAgfSBlbHNlIGlmIChpc0RlbGV0ZUJhY2t3YXJkKGtleUNvZGUsIGFsdEtleSwgbWV0YUtleSwgY3RybEtleSkpIHtcbiAgICBpZiAoaXNCYWNrc3BhY2Uoa2V5Q29kZSkpIHtcbiAgICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIEtFWV9CQUNLU1BBQ0VfQ09NTUFORCwgZXZlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgREVMRVRFX0NIQVJBQ1RFUl9DT01NQU5ELCB0cnVlKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNFc2NhcGUoa2V5Q29kZSkpIHtcbiAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBLRVlfRVNDQVBFX0NPTU1BTkQsIGV2ZW50KTtcbiAgfSBlbHNlIGlmIChpc0RlbGV0ZUZvcndhcmQoa2V5Q29kZSwgY3RybEtleSwgc2hpZnRLZXksIGFsdEtleSwgbWV0YUtleSkpIHtcbiAgICBpZiAoaXNEZWxldGUoa2V5Q29kZSkpIHtcbiAgICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIEtFWV9ERUxFVEVfQ09NTUFORCwgZXZlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgREVMRVRFX0NIQVJBQ1RFUl9DT01NQU5ELCBmYWxzZSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzRGVsZXRlV29yZEJhY2t3YXJkKGtleUNvZGUsIGFsdEtleSwgY3RybEtleSkpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIERFTEVURV9XT1JEX0NPTU1BTkQsIHRydWUpO1xuICB9IGVsc2UgaWYgKGlzRGVsZXRlV29yZEZvcndhcmQoa2V5Q29kZSwgYWx0S2V5LCBjdHJsS2V5KSkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgREVMRVRFX1dPUkRfQ09NTUFORCwgZmFsc2UpO1xuICB9IGVsc2UgaWYgKGlzRGVsZXRlTGluZUJhY2t3YXJkKGtleUNvZGUsIG1ldGFLZXkpKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBERUxFVEVfTElORV9DT01NQU5ELCB0cnVlKTtcbiAgfSBlbHNlIGlmIChpc0RlbGV0ZUxpbmVGb3J3YXJkKGtleUNvZGUsIG1ldGFLZXkpKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBERUxFVEVfTElORV9DT01NQU5ELCBmYWxzZSk7XG4gIH0gZWxzZSBpZiAoaXNCb2xkKGtleUNvZGUsIGFsdEtleSwgbWV0YUtleSwgY3RybEtleSkpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIEZPUk1BVF9URVhUX0NPTU1BTkQsICdib2xkJyk7XG4gIH0gZWxzZSBpZiAoaXNVbmRlcmxpbmUoa2V5Q29kZSwgYWx0S2V5LCBtZXRhS2V5LCBjdHJsS2V5KSkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgRk9STUFUX1RFWFRfQ09NTUFORCwgJ3VuZGVybGluZScpO1xuICB9IGVsc2UgaWYgKGlzSXRhbGljKGtleUNvZGUsIGFsdEtleSwgbWV0YUtleSwgY3RybEtleSkpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIEZPUk1BVF9URVhUX0NPTU1BTkQsICdpdGFsaWMnKTtcbiAgfSBlbHNlIGlmIChpc1RhYihrZXlDb2RlLCBhbHRLZXksIGN0cmxLZXksIG1ldGFLZXkpKSB7XG4gICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgS0VZX1RBQl9DT01NQU5ELCBldmVudCk7XG4gIH0gZWxzZSBpZiAoaXNVbmRvKGtleUNvZGUsIHNoaWZ0S2V5LCBtZXRhS2V5LCBjdHJsS2V5KSkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgVU5ET19DT01NQU5ELCB1bmRlZmluZWQpO1xuICB9IGVsc2UgaWYgKGlzUmVkbyhrZXlDb2RlLCBzaGlmdEtleSwgbWV0YUtleSwgY3RybEtleSkpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIFJFRE9fQ09NTUFORCwgdW5kZWZpbmVkKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBwcmV2U2VsZWN0aW9uID0gZWRpdG9yLl9lZGl0b3JTdGF0ZS5fc2VsZWN0aW9uO1xuXG4gICAgaWYgKCRpc05vZGVTZWxlY3Rpb24ocHJldlNlbGVjdGlvbikpIHtcbiAgICAgIGlmIChpc0NvcHkoa2V5Q29kZSwgc2hpZnRLZXksIG1ldGFLZXksIGN0cmxLZXkpKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIENPUFlfQ09NTUFORCwgZXZlbnQpO1xuICAgICAgfSBlbHNlIGlmIChpc0N1dChrZXlDb2RlLCBzaGlmdEtleSwgbWV0YUtleSwgY3RybEtleSkpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgQ1VUX0NPTU1BTkQsIGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoaXNNb2RpZmllcihjdHJsS2V5LCBzaGlmdEtleSwgYWx0S2V5LCBtZXRhS2V5KSkge1xuICAgIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIEtFWV9NT0RJRklFUl9DT01NQU5ELCBldmVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0Um9vdEVsZW1lbnRSZW1vdmVIYW5kbGVzKHJvb3RFbGVtZW50KSB7XG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IGludGVybmFsIGZpZWxkXG4gIGxldCBldmVudEhhbmRsZXMgPSByb290RWxlbWVudC5fX2xleGljYWxFdmVudEhhbmRsZXM7XG5cbiAgaWYgKGV2ZW50SGFuZGxlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZXZlbnRIYW5kbGVzID0gW107IC8vIEB0cy1leHBlY3QtZXJyb3I6IGludGVybmFsIGZpZWxkXG5cbiAgICByb290RWxlbWVudC5fX2xleGljYWxFdmVudEhhbmRsZXMgPSBldmVudEhhbmRsZXM7XG4gIH1cblxuICByZXR1cm4gZXZlbnRIYW5kbGVzO1xufSAvLyBNYXBwaW5nIHJvb3QgZWRpdG9ycyB0byB0aGVpciBhY3RpdmUgbmVzdGVkIGVkaXRvcnMsIGNvbnRhaW5zIG5lc3RlZCBlZGl0b3JzXG4vLyBtYXBwaW5nIG9ubHksIHNvIGlmIHJvb3QgZWRpdG9yIGlzIHNlbGVjdGVkIG1hcCB3aWxsIGhhdmUgbm8gcmVmZXJlbmNlIHRvIGZyZWUgdXAgbWVtb3J5XG5cblxuY29uc3QgYWN0aXZlTmVzdGVkRWRpdG9yc01hcCA9IG5ldyBNYXAoKTtcblxuZnVuY3Rpb24gb25Eb2N1bWVudFNlbGVjdGlvbkNoYW5nZShldmVudCkge1xuICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gIGNvbnN0IHRhcmdldFdpbmRvdyA9IHRhcmdldCA9PSBudWxsID8gbnVsbCA6IHRhcmdldC5ub2RlVHlwZSA9PT0gOSA/IHRhcmdldC5kZWZhdWx0VmlldyA6IHRhcmdldC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuICBjb25zdCBkb21TZWxlY3Rpb24gPSBnZXRET01TZWxlY3Rpb24odGFyZ2V0V2luZG93KTtcblxuICBpZiAoZG9tU2VsZWN0aW9uID09PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgbmV4dEFjdGl2ZUVkaXRvciA9IGdldE5lYXJlc3RFZGl0b3JGcm9tRE9NTm9kZShkb21TZWxlY3Rpb24uYW5jaG9yTm9kZSk7XG5cbiAgaWYgKG5leHRBY3RpdmVFZGl0b3IgPT09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoaXNTZWxlY3Rpb25DaGFuZ2VGcm9tTW91c2VEb3duKSB7XG4gICAgaXNTZWxlY3Rpb25DaGFuZ2VGcm9tTW91c2VEb3duID0gZmFsc2U7XG4gICAgdXBkYXRlRWRpdG9yKG5leHRBY3RpdmVFZGl0b3IsICgpID0+IHtcbiAgICAgIGNvbnN0IGxhc3RTZWxlY3Rpb24gPSAkZ2V0UHJldmlvdXNTZWxlY3Rpb24oKTtcbiAgICAgIGNvbnN0IGRvbUFuY2hvck5vZGUgPSBkb21TZWxlY3Rpb24uYW5jaG9yTm9kZTtcblxuICAgICAgaWYgKGRvbUFuY2hvck5vZGUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBub2RlVHlwZSA9IGRvbUFuY2hvck5vZGUubm9kZVR5cGU7IC8vIElmIHRoZSB1c2VyIGlzIGF0dGVtcHRpbmcgdG8gY2xpY2sgc2VsZWN0aW9uIGJhY2sgb250byB0ZXh0LCB0aGVuXG4gICAgICAvLyB3ZSBzaG91bGQgYXR0ZW1wdCBjcmVhdGUgYSByYW5nZSBzZWxlY3Rpb24uXG4gICAgICAvLyBXaGVuIHdlIGNsaWNrIG9uIGFuIGVtcHR5IHBhcmFncmFwaCBub2RlIG9yIHRoZSBlbmQgb2YgYSBwYXJhZ3JhcGggdGhhdCBlbmRzXG4gICAgICAvLyB3aXRoIGFuIGltYWdlL3BvbGwsIHRoZSBub2RlVHlwZSB3aWxsIGJlIEVMRU1FTlRfTk9ERVxuXG4gICAgICBpZiAobm9kZVR5cGUgIT09IERPTV9FTEVNRU5UX1RZUEUgJiYgbm9kZVR5cGUgIT09IERPTV9URVhUX1RZUEUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBuZXdTZWxlY3Rpb24gPSBpbnRlcm5hbENyZWF0ZVJhbmdlU2VsZWN0aW9uKGxhc3RTZWxlY3Rpb24sIGRvbVNlbGVjdGlvbiwgbmV4dEFjdGl2ZUVkaXRvcik7XG4gICAgICAkc2V0U2VsZWN0aW9uKG5ld1NlbGVjdGlvbik7XG4gICAgfSk7XG4gIH0gLy8gV2hlbiBlZGl0b3IgcmVjZWl2ZXMgc2VsZWN0aW9uIGNoYW5nZSBldmVudCwgd2UncmUgY2hlY2tpbmcgaWZcbiAgLy8gaXQgaGFzIGFueSBzaWJsaW5nIGVkaXRvcnMgKHdpdGhpbiBzYW1lIHBhcmVudCBlZGl0b3IpIHRoYXQgd2VyZSBhY3RpdmVcbiAgLy8gYmVmb3JlLCBhbmQgdHJpZ2dlciBzZWxlY3Rpb24gY2hhbmdlIG9uIGl0IHRvIG51bGxpZnkgc2VsZWN0aW9uLlxuXG5cbiAgY29uc3QgZWRpdG9ycyA9IGdldEVkaXRvcnNUb1Byb3BhZ2F0ZShuZXh0QWN0aXZlRWRpdG9yKTtcbiAgY29uc3Qgcm9vdEVkaXRvciA9IGVkaXRvcnNbZWRpdG9ycy5sZW5ndGggLSAxXTtcbiAgY29uc3Qgcm9vdEVkaXRvcktleSA9IHJvb3RFZGl0b3IuX2tleTtcbiAgY29uc3QgYWN0aXZlTmVzdGVkRWRpdG9yID0gYWN0aXZlTmVzdGVkRWRpdG9yc01hcC5nZXQocm9vdEVkaXRvcktleSk7XG4gIGNvbnN0IHByZXZBY3RpdmVFZGl0b3IgPSBhY3RpdmVOZXN0ZWRFZGl0b3IgfHwgcm9vdEVkaXRvcjtcblxuICBpZiAocHJldkFjdGl2ZUVkaXRvciAhPT0gbmV4dEFjdGl2ZUVkaXRvcikge1xuICAgIG9uU2VsZWN0aW9uQ2hhbmdlKGRvbVNlbGVjdGlvbiwgcHJldkFjdGl2ZUVkaXRvciwgZmFsc2UpO1xuICB9XG5cbiAgb25TZWxlY3Rpb25DaGFuZ2UoZG9tU2VsZWN0aW9uLCBuZXh0QWN0aXZlRWRpdG9yLCB0cnVlKTsgLy8gSWYgbmV3bHkgc2VsZWN0ZWQgZWRpdG9yIGlzIG5lc3RlZCwgdGhlbiBhZGQgaXQgdG8gdGhlIG1hcCwgY2xlYW4gbWFwIG90aGVyd2lzZVxuXG4gIGlmIChuZXh0QWN0aXZlRWRpdG9yICE9PSByb290RWRpdG9yKSB7XG4gICAgYWN0aXZlTmVzdGVkRWRpdG9yc01hcC5zZXQocm9vdEVkaXRvcktleSwgbmV4dEFjdGl2ZUVkaXRvcik7XG4gIH0gZWxzZSBpZiAoYWN0aXZlTmVzdGVkRWRpdG9yKSB7XG4gICAgYWN0aXZlTmVzdGVkRWRpdG9yc01hcC5kZWxldGUocm9vdEVkaXRvcktleSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc3RvcExleGljYWxQcm9wYWdhdGlvbihldmVudCkge1xuICAvLyBXZSBhdHRhY2ggYSBzcGVjaWFsIHByb3BlcnR5IHRvIGVuc3VyZSB0aGUgc2FtZSBldmVudCBkb2Vzbid0IHJlLWZpcmVcbiAgLy8gZm9yIHBhcmVudCBlZGl0b3JzLlxuICAvLyBAdHMtaWdub3JlXG4gIGV2ZW50Ll9sZXhpY2FsSGFuZGxlZCA9IHRydWU7XG59XG5cbmZ1bmN0aW9uIGhhc1N0b3BwZWRMZXhpY2FsUHJvcGFnYXRpb24oZXZlbnQpIHtcbiAgLy8gQHRzLWlnbm9yZVxuICBjb25zdCBzdG9wcGVkID0gZXZlbnQuX2xleGljYWxIYW5kbGVkID09PSB0cnVlO1xuICByZXR1cm4gc3RvcHBlZDtcbn1cblxuZnVuY3Rpb24gYWRkUm9vdEVsZW1lbnRFdmVudHMocm9vdEVsZW1lbnQsIGVkaXRvcikge1xuICAvLyBXZSBvbmx5IHdhbnQgdG8gaGF2ZSBhIHNpbmdsZSBnbG9iYWwgc2VsZWN0aW9uY2hhbmdlIGV2ZW50IGhhbmRsZXIsIHNoYXJlZFxuICAvLyBiZXR3ZWVuIGFsbCBlZGl0b3IgaW5zdGFuY2VzLlxuICBpZiAocm9vdEVsZW1lbnRzUmVnaXN0ZXJlZCA9PT0gMCkge1xuICAgIGNvbnN0IGRvYyA9IHJvb3RFbGVtZW50Lm93bmVyRG9jdW1lbnQ7XG4gICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ3NlbGVjdGlvbmNoYW5nZScsIG9uRG9jdW1lbnRTZWxlY3Rpb25DaGFuZ2UpO1xuICB9XG5cbiAgcm9vdEVsZW1lbnRzUmVnaXN0ZXJlZCsrOyAvLyBAdHMtZXhwZWN0LWVycm9yOiBpbnRlcm5hbCBmaWVsZFxuXG4gIHJvb3RFbGVtZW50Ll9fbGV4aWNhbEVkaXRvciA9IGVkaXRvcjtcbiAgY29uc3QgcmVtb3ZlSGFuZGxlcyA9IGdldFJvb3RFbGVtZW50UmVtb3ZlSGFuZGxlcyhyb290RWxlbWVudCk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByb290RWxlbWVudEV2ZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IFtldmVudE5hbWUsIG9uRXZlbnRdID0gcm9vdEVsZW1lbnRFdmVudHNbaV07XG4gICAgY29uc3QgZXZlbnRIYW5kbGVyID0gdHlwZW9mIG9uRXZlbnQgPT09ICdmdW5jdGlvbicgPyBldmVudCA9PiB7XG4gICAgICBpZiAoaGFzU3RvcHBlZExleGljYWxQcm9wYWdhdGlvbihldmVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzdG9wTGV4aWNhbFByb3BhZ2F0aW9uKGV2ZW50KTtcblxuICAgICAgaWYgKGVkaXRvci5pc0VkaXRhYmxlKCkpIHtcbiAgICAgICAgb25FdmVudChldmVudCwgZWRpdG9yKTtcbiAgICAgIH1cbiAgICB9IDogZXZlbnQgPT4ge1xuICAgICAgaWYgKGhhc1N0b3BwZWRMZXhpY2FsUHJvcGFnYXRpb24oZXZlbnQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc3RvcExleGljYWxQcm9wYWdhdGlvbihldmVudCk7XG5cbiAgICAgIGlmIChlZGl0b3IuaXNFZGl0YWJsZSgpKSB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnROYW1lKSB7XG4gICAgICAgICAgY2FzZSAnY3V0JzpcbiAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBDVVRfQ09NTUFORCwgZXZlbnQpO1xuXG4gICAgICAgICAgY2FzZSAnY29weSc6XG4gICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgQ09QWV9DT01NQU5ELCBldmVudCk7XG5cbiAgICAgICAgICBjYXNlICdwYXN0ZSc6XG4gICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2hDb21tYW5kKGVkaXRvciwgUEFTVEVfQ09NTUFORCwgZXZlbnQpO1xuXG4gICAgICAgICAgY2FzZSAnZHJhZ3N0YXJ0JzpcbiAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBEUkFHU1RBUlRfQ09NTUFORCwgZXZlbnQpO1xuXG4gICAgICAgICAgY2FzZSAnZHJhZ292ZXInOlxuICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIERSQUdPVkVSX0NPTU1BTkQsIGV2ZW50KTtcblxuICAgICAgICAgIGNhc2UgJ2RyYWdlbmQnOlxuICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIERSQUdFTkRfQ09NTUFORCwgZXZlbnQpO1xuXG4gICAgICAgICAgY2FzZSAnZm9jdXMnOlxuICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoQ29tbWFuZChlZGl0b3IsIEZPQ1VTX0NPTU1BTkQsIGV2ZW50KTtcblxuICAgICAgICAgIGNhc2UgJ2JsdXInOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBCTFVSX0NPTU1BTkQsIGV2ZW50KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlICdkcm9wJzpcbiAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaENvbW1hbmQoZWRpdG9yLCBEUk9QX0NPTU1BTkQsIGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgcm9vdEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGV2ZW50SGFuZGxlcik7XG4gICAgcmVtb3ZlSGFuZGxlcy5wdXNoKCgpID0+IHtcbiAgICAgIHJvb3RFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBldmVudEhhbmRsZXIpO1xuICAgIH0pO1xuICB9XG59XG5mdW5jdGlvbiByZW1vdmVSb290RWxlbWVudEV2ZW50cyhyb290RWxlbWVudCkge1xuICBpZiAocm9vdEVsZW1lbnRzUmVnaXN0ZXJlZCAhPT0gMCkge1xuICAgIHJvb3RFbGVtZW50c1JlZ2lzdGVyZWQtLTsgLy8gV2Ugb25seSB3YW50IHRvIGhhdmUgYSBzaW5nbGUgZ2xvYmFsIHNlbGVjdGlvbmNoYW5nZSBldmVudCBoYW5kbGVyLCBzaGFyZWRcbiAgICAvLyBiZXR3ZWVuIGFsbCBlZGl0b3IgaW5zdGFuY2VzLlxuXG4gICAgaWYgKHJvb3RFbGVtZW50c1JlZ2lzdGVyZWQgPT09IDApIHtcbiAgICAgIGNvbnN0IGRvYyA9IHJvb3RFbGVtZW50Lm93bmVyRG9jdW1lbnQ7XG4gICAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2VsZWN0aW9uY2hhbmdlJywgb25Eb2N1bWVudFNlbGVjdGlvbkNoYW5nZSk7XG4gICAgfVxuICB9IC8vIEB0cy1leHBlY3QtZXJyb3I6IGludGVybmFsIGZpZWxkXG5cblxuICBjb25zdCBlZGl0b3IgPSByb290RWxlbWVudC5fX2xleGljYWxFZGl0b3I7XG5cbiAgaWYgKGVkaXRvciAhPT0gbnVsbCAmJiBlZGl0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgIGNsZWFuQWN0aXZlTmVzdGVkRWRpdG9yc01hcChlZGl0b3IpOyAvLyBAdHMtZXhwZWN0LWVycm9yOiBpbnRlcm5hbCBmaWVsZFxuXG4gICAgcm9vdEVsZW1lbnQuX19sZXhpY2FsRWRpdG9yID0gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IHJlbW92ZUhhbmRsZXMgPSBnZXRSb290RWxlbWVudFJlbW92ZUhhbmRsZXMocm9vdEVsZW1lbnQpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcmVtb3ZlSGFuZGxlcy5sZW5ndGg7IGkrKykge1xuICAgIHJlbW92ZUhhbmRsZXNbaV0oKTtcbiAgfSAvLyBAdHMtZXhwZWN0LWVycm9yOiBpbnRlcm5hbCBmaWVsZFxuXG5cbiAgcm9vdEVsZW1lbnQuX19sZXhpY2FsRXZlbnRIYW5kbGVzID0gW107XG59XG5cbmZ1bmN0aW9uIGNsZWFuQWN0aXZlTmVzdGVkRWRpdG9yc01hcChlZGl0b3IpIHtcbiAgaWYgKGVkaXRvci5fcGFyZW50RWRpdG9yICE9PSBudWxsKSB7XG4gICAgLy8gRm9yIG5lc3RlZCBlZGl0b3IgY2xlYW51cCBtYXAgaWYgdGhpcyBlZGl0b3Igd2FzIG1hcmtlZCBhcyBhY3RpdmVcbiAgICBjb25zdCBlZGl0b3JzID0gZ2V0RWRpdG9yc1RvUHJvcGFnYXRlKGVkaXRvcik7XG4gICAgY29uc3Qgcm9vdEVkaXRvciA9IGVkaXRvcnNbZWRpdG9ycy5sZW5ndGggLSAxXTtcbiAgICBjb25zdCByb290RWRpdG9yS2V5ID0gcm9vdEVkaXRvci5fa2V5O1xuXG4gICAgaWYgKGFjdGl2ZU5lc3RlZEVkaXRvcnNNYXAuZ2V0KHJvb3RFZGl0b3JLZXkpID09PSBlZGl0b3IpIHtcbiAgICAgIGFjdGl2ZU5lc3RlZEVkaXRvcnNNYXAuZGVsZXRlKHJvb3RFZGl0b3JLZXkpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBGb3IgdG9wLWxldmVsIGVkaXRvcnMgY2xlYW51cCBtYXBcbiAgICBhY3RpdmVOZXN0ZWRFZGl0b3JzTWFwLmRlbGV0ZShlZGl0b3IuX2tleSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gbWFya1NlbGVjdGlvbkNoYW5nZUZyb21ET01VcGRhdGUoKSB7XG4gIGlzU2VsZWN0aW9uQ2hhbmdlRnJvbURPTVVwZGF0ZSA9IHRydWU7XG59XG5mdW5jdGlvbiBtYXJrQ29sbGFwc2VkU2VsZWN0aW9uRm9ybWF0KGZvcm1hdCwgc3R5bGUsIG9mZnNldCwga2V5LCB0aW1lU3RhbXApIHtcbiAgY29sbGFwc2VkU2VsZWN0aW9uRm9ybWF0ID0gW2Zvcm1hdCwgc3R5bGUsIG9mZnNldCwga2V5LCB0aW1lU3RhbXBdO1xufVxuXG4vKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5jbGFzcyBQb2ludCB7XG4gIGNvbnN0cnVjdG9yKGtleSwgb2Zmc2V0LCB0eXBlKSB7XG4gICAgdGhpcy5fc2VsZWN0aW9uID0gbnVsbDtcbiAgICB0aGlzLmtleSA9IGtleTtcbiAgICB0aGlzLm9mZnNldCA9IG9mZnNldDtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICB9XG5cbiAgaXMocG9pbnQpIHtcbiAgICByZXR1cm4gdGhpcy5rZXkgPT09IHBvaW50LmtleSAmJiB0aGlzLm9mZnNldCA9PT0gcG9pbnQub2Zmc2V0ICYmIHRoaXMudHlwZSA9PT0gcG9pbnQudHlwZTtcbiAgfVxuXG4gIGlzQmVmb3JlKGIpIHtcbiAgICBsZXQgYU5vZGUgPSB0aGlzLmdldE5vZGUoKTtcbiAgICBsZXQgYk5vZGUgPSBiLmdldE5vZGUoKTtcbiAgICBjb25zdCBhT2Zmc2V0ID0gdGhpcy5vZmZzZXQ7XG4gICAgY29uc3QgYk9mZnNldCA9IGIub2Zmc2V0O1xuXG4gICAgaWYgKCRpc0VsZW1lbnROb2RlKGFOb2RlKSkge1xuICAgICAgY29uc3QgYU5vZGVEZXNjZW5kYW50ID0gYU5vZGUuZ2V0RGVzY2VuZGFudEJ5SW5kZXgoYU9mZnNldCk7XG4gICAgICBhTm9kZSA9IGFOb2RlRGVzY2VuZGFudCAhPSBudWxsID8gYU5vZGVEZXNjZW5kYW50IDogYU5vZGU7XG4gICAgfVxuXG4gICAgaWYgKCRpc0VsZW1lbnROb2RlKGJOb2RlKSkge1xuICAgICAgY29uc3QgYk5vZGVEZXNjZW5kYW50ID0gYk5vZGUuZ2V0RGVzY2VuZGFudEJ5SW5kZXgoYk9mZnNldCk7XG4gICAgICBiTm9kZSA9IGJOb2RlRGVzY2VuZGFudCAhPSBudWxsID8gYk5vZGVEZXNjZW5kYW50IDogYk5vZGU7XG4gICAgfVxuXG4gICAgaWYgKGFOb2RlID09PSBiTm9kZSkge1xuICAgICAgcmV0dXJuIGFPZmZzZXQgPCBiT2Zmc2V0O1xuICAgIH1cblxuICAgIHJldHVybiBhTm9kZS5pc0JlZm9yZShiTm9kZSk7XG4gIH1cblxuICBnZXROb2RlKCkge1xuICAgIGNvbnN0IGtleSA9IHRoaXMua2V5O1xuICAgIGNvbnN0IG5vZGUgPSAkZ2V0Tm9kZUJ5S2V5KGtleSk7XG5cbiAgICBpZiAobm9kZSA9PT0gbnVsbCkge1xuICAgICAge1xuICAgICAgICB0aHJvdyBFcnJvcihgUG9pbnQuZ2V0Tm9kZTogbm9kZSBub3QgZm91bmRgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuXG4gIHNldChrZXksIG9mZnNldCwgdHlwZSkge1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9IHRoaXMuX3NlbGVjdGlvbjtcbiAgICBjb25zdCBvbGRLZXkgPSB0aGlzLmtleTtcbiAgICB0aGlzLmtleSA9IGtleTtcbiAgICB0aGlzLm9mZnNldCA9IG9mZnNldDtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuXG4gICAgaWYgKCFpc0N1cnJlbnRseVJlYWRPbmx5TW9kZSgpKSB7XG4gICAgICBpZiAoJGdldENvbXBvc2l0aW9uS2V5KCkgPT09IG9sZEtleSkge1xuICAgICAgICAkc2V0Q29tcG9zaXRpb25LZXkoa2V5KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNlbGVjdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICBzZWxlY3Rpb24uX2NhY2hlZE5vZGVzID0gbnVsbDtcbiAgICAgICAgc2VsZWN0aW9uLmRpcnR5ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxufVxuXG5mdW5jdGlvbiAkY3JlYXRlUG9pbnQoa2V5LCBvZmZzZXQsIHR5cGUpIHtcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogaW50ZW50aW9uYWxseSBjYXN0IGFzIHdlIHVzZSBhIGNsYXNzIGZvciBwZXJmIHJlYXNvbnNcbiAgcmV0dXJuIG5ldyBQb2ludChrZXksIG9mZnNldCwgdHlwZSk7XG59XG5cbmZ1bmN0aW9uIHNlbGVjdFBvaW50T25Ob2RlKHBvaW50LCBub2RlKSB7XG4gIGxldCBrZXkgPSBub2RlLl9fa2V5O1xuICBsZXQgb2Zmc2V0ID0gcG9pbnQub2Zmc2V0O1xuICBsZXQgdHlwZSA9ICdlbGVtZW50JztcblxuICBpZiAoJGlzVGV4dE5vZGUobm9kZSkpIHtcbiAgICB0eXBlID0gJ3RleHQnO1xuICAgIGNvbnN0IHRleHRDb250ZW50TGVuZ3RoID0gbm9kZS5nZXRUZXh0Q29udGVudFNpemUoKTtcblxuICAgIGlmIChvZmZzZXQgPiB0ZXh0Q29udGVudExlbmd0aCkge1xuICAgICAgb2Zmc2V0ID0gdGV4dENvbnRlbnRMZW5ndGg7XG4gICAgfVxuICB9IGVsc2UgaWYgKCEkaXNFbGVtZW50Tm9kZShub2RlKSkge1xuICAgIGNvbnN0IG5leHRTaWJsaW5nID0gbm9kZS5nZXROZXh0U2libGluZygpO1xuXG4gICAgaWYgKCRpc1RleHROb2RlKG5leHRTaWJsaW5nKSkge1xuICAgICAga2V5ID0gbmV4dFNpYmxpbmcuX19rZXk7XG4gICAgICBvZmZzZXQgPSAwO1xuICAgICAgdHlwZSA9ICd0ZXh0JztcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcGFyZW50Tm9kZSA9IG5vZGUuZ2V0UGFyZW50KCk7XG5cbiAgICAgIGlmIChwYXJlbnROb2RlKSB7XG4gICAgICAgIGtleSA9IHBhcmVudE5vZGUuX19rZXk7XG4gICAgICAgIG9mZnNldCA9IG5vZGUuZ2V0SW5kZXhXaXRoaW5QYXJlbnQoKSArIDE7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcG9pbnQuc2V0KGtleSwgb2Zmc2V0LCB0eXBlKTtcbn1cblxuZnVuY3Rpb24gJG1vdmVTZWxlY3Rpb25Qb2ludFRvRW5kKHBvaW50LCBub2RlKSB7XG4gIGlmICgkaXNFbGVtZW50Tm9kZShub2RlKSkge1xuICAgIGNvbnN0IGxhc3ROb2RlID0gbm9kZS5nZXRMYXN0RGVzY2VuZGFudCgpO1xuXG4gICAgaWYgKCRpc0VsZW1lbnROb2RlKGxhc3ROb2RlKSB8fCAkaXNUZXh0Tm9kZShsYXN0Tm9kZSkpIHtcbiAgICAgIHNlbGVjdFBvaW50T25Ob2RlKHBvaW50LCBsYXN0Tm9kZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGVjdFBvaW50T25Ob2RlKHBvaW50LCBub2RlKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgc2VsZWN0UG9pbnRPbk5vZGUocG9pbnQsIG5vZGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uICR0cmFuc2ZlclN0YXJ0aW5nRWxlbWVudFBvaW50VG9UZXh0UG9pbnQoc3RhcnQsIGVuZCwgZm9ybWF0LCBzdHlsZSkge1xuICBjb25zdCBlbGVtZW50ID0gc3RhcnQuZ2V0Tm9kZSgpO1xuICBjb25zdCBwbGFjZW1lbnROb2RlID0gZWxlbWVudC5nZXRDaGlsZEF0SW5kZXgoc3RhcnQub2Zmc2V0KTtcbiAgY29uc3QgdGV4dE5vZGUgPSAkY3JlYXRlVGV4dE5vZGUoKTtcbiAgY29uc3QgdGFyZ2V0ID0gJGlzUm9vdE5vZGUoZWxlbWVudCkgPyAkY3JlYXRlUGFyYWdyYXBoTm9kZSgpLmFwcGVuZCh0ZXh0Tm9kZSkgOiB0ZXh0Tm9kZTtcbiAgdGV4dE5vZGUuc2V0Rm9ybWF0KGZvcm1hdCk7XG4gIHRleHROb2RlLnNldFN0eWxlKHN0eWxlKTtcblxuICBpZiAocGxhY2VtZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIGVsZW1lbnQuYXBwZW5kKHRhcmdldCk7XG4gIH0gZWxzZSB7XG4gICAgcGxhY2VtZW50Tm9kZS5pbnNlcnRCZWZvcmUodGFyZ2V0KTtcbiAgfSAvLyBUcmFuc2ZlciB0aGUgZWxlbWVudCBwb2ludCB0byBhIHRleHQgcG9pbnQuXG5cblxuICBpZiAoc3RhcnQuaXMoZW5kKSkge1xuICAgIGVuZC5zZXQodGV4dE5vZGUuX19rZXksIDAsICd0ZXh0Jyk7XG4gIH1cblxuICBzdGFydC5zZXQodGV4dE5vZGUuX19rZXksIDAsICd0ZXh0Jyk7XG59XG5cbmZ1bmN0aW9uICRzZXRQb2ludFZhbHVlcyhwb2ludCwga2V5LCBvZmZzZXQsIHR5cGUpIHtcbiAgcG9pbnQua2V5ID0ga2V5O1xuICBwb2ludC5vZmZzZXQgPSBvZmZzZXQ7XG4gIHBvaW50LnR5cGUgPSB0eXBlO1xufVxuXG5jbGFzcyBOb2RlU2VsZWN0aW9uIHtcbiAgY29uc3RydWN0b3Iob2JqZWN0cykge1xuICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICB0aGlzLl9ub2RlcyA9IG9iamVjdHM7XG4gICAgdGhpcy5fY2FjaGVkTm9kZXMgPSBudWxsO1xuICB9XG5cbiAgaXMoc2VsZWN0aW9uKSB7XG4gICAgaWYgKCEkaXNOb2RlU2VsZWN0aW9uKHNlbGVjdGlvbikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBhID0gdGhpcy5fbm9kZXM7XG4gICAgY29uc3QgYiA9IHNlbGVjdGlvbi5fbm9kZXM7XG4gICAgcmV0dXJuIGEuc2l6ZSA9PT0gYi5zaXplICYmIEFycmF5LmZyb20oYSkuZXZlcnkoa2V5ID0+IGIuaGFzKGtleSkpO1xuICB9XG5cbiAgYWRkKGtleSkge1xuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuXG4gICAgdGhpcy5fbm9kZXMuYWRkKGtleSk7XG5cbiAgICB0aGlzLl9jYWNoZWROb2RlcyA9IG51bGw7XG4gIH1cblxuICBkZWxldGUoa2V5KSB7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG5cbiAgICB0aGlzLl9ub2Rlcy5kZWxldGUoa2V5KTtcblxuICAgIHRoaXMuX2NhY2hlZE5vZGVzID0gbnVsbDtcbiAgfVxuXG4gIGNsZWFyKCkge1xuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuXG4gICAgdGhpcy5fbm9kZXMuY2xlYXIoKTtcblxuICAgIHRoaXMuX2NhY2hlZE5vZGVzID0gbnVsbDtcbiAgfVxuXG4gIGhhcyhrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5fbm9kZXMuaGFzKGtleSk7XG4gIH1cblxuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IE5vZGVTZWxlY3Rpb24obmV3IFNldCh0aGlzLl9ub2RlcykpO1xuICB9XG5cbiAgZXh0cmFjdCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXROb2RlcygpO1xuICB9XG5cbiAgaW5zZXJ0UmF3VGV4dCh0ZXh0KSB7Ly8gRG8gbm90aGluZz9cbiAgfVxuXG4gIGluc2VydFRleHQoKSB7Ly8gRG8gbm90aGluZz9cbiAgfVxuXG4gIGluc2VydE5vZGVzKG5vZGVzLCBzZWxlY3RTdGFydCkge1xuICAgIGNvbnN0IHNlbGVjdGVkTm9kZXMgPSB0aGlzLmdldE5vZGVzKCk7XG4gICAgY29uc3Qgc2VsZWN0ZWROb2Rlc0xlbmd0aCA9IHNlbGVjdGVkTm9kZXMubGVuZ3RoO1xuICAgIGNvbnN0IGxhc3RTZWxlY3RlZE5vZGUgPSBzZWxlY3RlZE5vZGVzW3NlbGVjdGVkTm9kZXNMZW5ndGggLSAxXTtcbiAgICBsZXQgc2VsZWN0aW9uQXRFbmQ7IC8vIEluc2VydCBub2Rlc1xuXG4gICAgaWYgKCRpc1RleHROb2RlKGxhc3RTZWxlY3RlZE5vZGUpKSB7XG4gICAgICBzZWxlY3Rpb25BdEVuZCA9IGxhc3RTZWxlY3RlZE5vZGUuc2VsZWN0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gbGFzdFNlbGVjdGVkTm9kZS5nZXRJbmRleFdpdGhpblBhcmVudCgpICsgMTtcbiAgICAgIHNlbGVjdGlvbkF0RW5kID0gbGFzdFNlbGVjdGVkTm9kZS5nZXRQYXJlbnRPclRocm93KCkuc2VsZWN0KGluZGV4LCBpbmRleCk7XG4gICAgfVxuXG4gICAgc2VsZWN0aW9uQXRFbmQuaW5zZXJ0Tm9kZXMobm9kZXMsIHNlbGVjdFN0YXJ0KTsgLy8gUmVtb3ZlIHNlbGVjdGVkIG5vZGVzXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdGVkTm9kZXNMZW5ndGg7IGkrKykge1xuICAgICAgc2VsZWN0ZWROb2Rlc1tpXS5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGdldE5vZGVzKCkge1xuICAgIGNvbnN0IGNhY2hlZE5vZGVzID0gdGhpcy5fY2FjaGVkTm9kZXM7XG5cbiAgICBpZiAoY2FjaGVkTm9kZXMgIT09IG51bGwpIHtcbiAgICAgIHJldHVybiBjYWNoZWROb2RlcztcbiAgICB9XG5cbiAgICBjb25zdCBvYmplY3RzID0gdGhpcy5fbm9kZXM7XG4gICAgY29uc3Qgbm9kZXMgPSBbXTtcblxuICAgIGZvciAoY29uc3Qgb2JqZWN0IG9mIG9iamVjdHMpIHtcbiAgICAgIGNvbnN0IG5vZGUgPSAkZ2V0Tm9kZUJ5S2V5KG9iamVjdCk7XG5cbiAgICAgIGlmIChub2RlICE9PSBudWxsKSB7XG4gICAgICAgIG5vZGVzLnB1c2gobm9kZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFpc0N1cnJlbnRseVJlYWRPbmx5TW9kZSgpKSB7XG4gICAgICB0aGlzLl9jYWNoZWROb2RlcyA9IG5vZGVzO1xuICAgIH1cblxuICAgIHJldHVybiBub2RlcztcbiAgfVxuXG4gIGdldFRleHRDb250ZW50KCkge1xuICAgIGNvbnN0IG5vZGVzID0gdGhpcy5nZXROb2RlcygpO1xuICAgIGxldCB0ZXh0Q29udGVudCA9ICcnO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGV4dENvbnRlbnQgKz0gbm9kZXNbaV0uZ2V0VGV4dENvbnRlbnQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGV4dENvbnRlbnQ7XG4gIH1cblxufVxuZnVuY3Rpb24gJGlzUmFuZ2VTZWxlY3Rpb24oeCkge1xuICByZXR1cm4geCBpbnN0YW5jZW9mIFJhbmdlU2VsZWN0aW9uO1xufVxuY2xhc3MgR3JpZFNlbGVjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKGdyaWRLZXksIGFuY2hvciwgZm9jdXMpIHtcbiAgICB0aGlzLmdyaWRLZXkgPSBncmlkS2V5O1xuICAgIHRoaXMuYW5jaG9yID0gYW5jaG9yO1xuICAgIHRoaXMuZm9jdXMgPSBmb2N1cztcbiAgICB0aGlzLmRpcnR5ID0gZmFsc2U7XG4gICAgdGhpcy5fY2FjaGVkTm9kZXMgPSBudWxsO1xuICAgIGFuY2hvci5fc2VsZWN0aW9uID0gdGhpcztcbiAgICBmb2N1cy5fc2VsZWN0aW9uID0gdGhpcztcbiAgfVxuXG4gIGlzKHNlbGVjdGlvbikge1xuICAgIGlmICghREVQUkVDQVRFRF8kaXNHcmlkU2VsZWN0aW9uKHNlbGVjdGlvbikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5ncmlkS2V5ID09PSBzZWxlY3Rpb24uZ3JpZEtleSAmJiB0aGlzLmFuY2hvci5pcyhzZWxlY3Rpb24uYW5jaG9yKSAmJiB0aGlzLmZvY3VzLmlzKHNlbGVjdGlvbi5mb2N1cyk7XG4gIH1cblxuICBzZXQoZ3JpZEtleSwgYW5jaG9yQ2VsbEtleSwgZm9jdXNDZWxsS2V5KSB7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gICAgdGhpcy5ncmlkS2V5ID0gZ3JpZEtleTtcbiAgICB0aGlzLmFuY2hvci5rZXkgPSBhbmNob3JDZWxsS2V5O1xuICAgIHRoaXMuZm9jdXMua2V5ID0gZm9jdXNDZWxsS2V5O1xuICAgIHRoaXMuX2NhY2hlZE5vZGVzID0gbnVsbDtcbiAgfVxuXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgR3JpZFNlbGVjdGlvbih0aGlzLmdyaWRLZXksIHRoaXMuYW5jaG9yLCB0aGlzLmZvY3VzKTtcbiAgfVxuXG4gIGlzQ29sbGFwc2VkKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlzQmFja3dhcmQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZm9jdXMuaXNCZWZvcmUodGhpcy5hbmNob3IpO1xuICB9XG5cbiAgZ2V0Q2hhcmFjdGVyT2Zmc2V0cygpIHtcbiAgICByZXR1cm4gZ2V0Q2hhcmFjdGVyT2Zmc2V0cyh0aGlzKTtcbiAgfVxuXG4gIGV4dHJhY3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Tm9kZXMoKTtcbiAgfVxuXG4gIGluc2VydFJhd1RleHQodGV4dCkgey8vIERvIG5vdGhpbmc/XG4gIH1cblxuICBpbnNlcnRUZXh0KCkgey8vIERvIG5vdGhpbmc/XG4gIH1cblxuICBpbnNlcnROb2Rlcyhub2Rlcywgc2VsZWN0U3RhcnQpIHtcbiAgICBjb25zdCBmb2N1c05vZGUgPSB0aGlzLmZvY3VzLmdldE5vZGUoKTtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSAkbm9ybWFsaXplU2VsZWN0aW9uKGZvY3VzTm9kZS5zZWxlY3QoMCwgZm9jdXNOb2RlLmdldENoaWxkcmVuU2l6ZSgpKSk7XG4gICAgcmV0dXJuIHNlbGVjdGlvbi5pbnNlcnROb2Rlcyhub2Rlcywgc2VsZWN0U3RhcnQpO1xuICB9IC8vIFRPRE8gRGVwcmVjYXRlIHRoaXMgbWV0aG9kLiBJdCdzIGNvbmZ1c2luZyB3aGVuIHVzZWQgd2l0aCBjb2xzcGFufHJvd3NwYW5cblxuXG4gIGdldFNoYXBlKCkge1xuICAgIGNvbnN0IGFuY2hvckNlbGxOb2RlID0gJGdldE5vZGVCeUtleSh0aGlzLmFuY2hvci5rZXkpO1xuXG4gICAgaWYgKCEoYW5jaG9yQ2VsbE5vZGUgIT09IG51bGwpKSB7XG4gICAgICB0aHJvdyBFcnJvcihgZ2V0Tm9kZXM6IGV4cGVjdGVkIHRvIGZpbmQgQW5jaG9yTm9kZWApO1xuICAgIH1cblxuICAgIGNvbnN0IGFuY2hvckNlbGxOb2RlSW5kZXggPSBhbmNob3JDZWxsTm9kZS5nZXRJbmRleFdpdGhpblBhcmVudCgpO1xuICAgIGNvbnN0IGFuY2hvckNlbFJvd2VJbmRleCA9IGFuY2hvckNlbGxOb2RlLmdldFBhcmVudE9yVGhyb3coKS5nZXRJbmRleFdpdGhpblBhcmVudCgpO1xuICAgIGNvbnN0IGZvY3VzQ2VsbE5vZGUgPSAkZ2V0Tm9kZUJ5S2V5KHRoaXMuZm9jdXMua2V5KTtcblxuICAgIGlmICghKGZvY3VzQ2VsbE5vZGUgIT09IG51bGwpKSB7XG4gICAgICB0aHJvdyBFcnJvcihgZ2V0Tm9kZXM6IGV4cGVjdGVkIHRvIGZpbmQgRm9jdXNOb2RlYCk7XG4gICAgfVxuXG4gICAgY29uc3QgZm9jdXNDZWxsTm9kZUluZGV4ID0gZm9jdXNDZWxsTm9kZS5nZXRJbmRleFdpdGhpblBhcmVudCgpO1xuICAgIGNvbnN0IGZvY3VzQ2VsbFJvd0luZGV4ID0gZm9jdXNDZWxsTm9kZS5nZXRQYXJlbnRPclRocm93KCkuZ2V0SW5kZXhXaXRoaW5QYXJlbnQoKTtcbiAgICBjb25zdCBzdGFydFggPSBNYXRoLm1pbihhbmNob3JDZWxsTm9kZUluZGV4LCBmb2N1c0NlbGxOb2RlSW5kZXgpO1xuICAgIGNvbnN0IHN0b3BYID0gTWF0aC5tYXgoYW5jaG9yQ2VsbE5vZGVJbmRleCwgZm9jdXNDZWxsTm9kZUluZGV4KTtcbiAgICBjb25zdCBzdGFydFkgPSBNYXRoLm1pbihhbmNob3JDZWxSb3dlSW5kZXgsIGZvY3VzQ2VsbFJvd0luZGV4KTtcbiAgICBjb25zdCBzdG9wWSA9IE1hdGgubWF4KGFuY2hvckNlbFJvd2VJbmRleCwgZm9jdXNDZWxsUm93SW5kZXgpO1xuICAgIHJldHVybiB7XG4gICAgICBmcm9tWDogTWF0aC5taW4oc3RhcnRYLCBzdG9wWCksXG4gICAgICBmcm9tWTogTWF0aC5taW4oc3RhcnRZLCBzdG9wWSksXG4gICAgICB0b1g6IE1hdGgubWF4KHN0YXJ0WCwgc3RvcFgpLFxuICAgICAgdG9ZOiBNYXRoLm1heChzdGFydFksIHN0b3BZKVxuICAgIH07XG4gIH1cblxuICBnZXROb2RlcygpIHtcbiAgICBjb25zdCBjYWNoZWROb2RlcyA9IHRoaXMuX2NhY2hlZE5vZGVzO1xuXG4gICAgaWYgKGNhY2hlZE5vZGVzICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gY2FjaGVkTm9kZXM7XG4gICAgfVxuXG4gICAgY29uc3QgYW5jaG9yTm9kZSA9IHRoaXMuYW5jaG9yLmdldE5vZGUoKTtcbiAgICBjb25zdCBmb2N1c05vZGUgPSB0aGlzLmZvY3VzLmdldE5vZGUoKTtcbiAgICBjb25zdCBhbmNob3JDZWxsID0gJGZpbmRNYXRjaGluZ1BhcmVudChhbmNob3JOb2RlLCBERVBSRUNBVEVEXyRpc0dyaWRDZWxsTm9kZSk7XG4gICAgY29uc3QgZm9jdXNDZWxsID0gJGZpbmRNYXRjaGluZ1BhcmVudChmb2N1c05vZGUsIERFUFJFQ0FURURfJGlzR3JpZENlbGxOb2RlKTtcblxuICAgIGlmICghREVQUkVDQVRFRF8kaXNHcmlkQ2VsbE5vZGUoYW5jaG9yQ2VsbCkpIHtcbiAgICAgIHRocm93IEVycm9yKGBFeHBlY3RlZCBHcmlkU2VsZWN0aW9uIGFuY2hvciB0byBiZSAob3IgYSBjaGlsZCBvZikgR3JpZENlbGxOb2RlYCk7XG4gICAgfVxuXG4gICAgaWYgKCFERVBSRUNBVEVEXyRpc0dyaWRDZWxsTm9kZShmb2N1c0NlbGwpKSB7XG4gICAgICB0aHJvdyBFcnJvcihgRXhwZWN0ZWQgR3JpZFNlbGVjdGlvbiBmb2N1cyB0byBiZSAob3IgYSBjaGlsZCBvZikgR3JpZENlbGxOb2RlYCk7XG4gICAgfVxuXG4gICAgY29uc3QgYW5jaG9yUm93ID0gYW5jaG9yQ2VsbC5nZXRQYXJlbnQoKTtcblxuICAgIGlmICghREVQUkVDQVRFRF8kaXNHcmlkUm93Tm9kZShhbmNob3JSb3cpKSB7XG4gICAgICB0aHJvdyBFcnJvcihgRXhwZWN0ZWQgYW5jaG9yQ2VsbCB0byBoYXZlIGEgcGFyZW50IEdyaWRSb3dOb2RlYCk7XG4gICAgfVxuXG4gICAgY29uc3QgZ3JpZE5vZGUgPSBhbmNob3JSb3cuZ2V0UGFyZW50KCk7XG5cbiAgICBpZiAoIURFUFJFQ0FURURfJGlzR3JpZE5vZGUoZ3JpZE5vZGUpKSB7XG4gICAgICB0aHJvdyBFcnJvcihgRXhwZWN0ZWQgdGFibGVOb2RlIHRvIGhhdmUgYSBwYXJlbnQgR3JpZE5vZGVgKTtcbiAgICB9IC8vIFRPRE8gTWFwcGluZyB0aGUgd2hvbGUgR3JpZCBldmVyeSB0aW1lIG5vdCBlZmZpY2llbnQuIFdlIG5lZWQgdG8gY29tcHV0ZSB0aGUgZW50aXJlIHN0YXRlIG9ubHlcbiAgICAvLyBvbmNlIChvbiBsb2FkKSBhbmQgaXRlcmF0ZSBvbiBpdCBhcyB1cGRhdGVzIG9jY3VyLiBIb3dldmVyLCB0byBkbyB0aGlzIHdlIG5lZWQgdG8gaGF2ZSB0aGVcbiAgICAvLyBhYmlsaXR5IHRvIHN0b3JlIGEgc3RhdGUuIEtpbGxpbmcgR3JpZFNlbGVjdGlvbiBhbmQgbW92aW5nIHRoZSBsb2dpYyB0byB0aGUgcGx1Z2luIHdvdWxkIG1ha2VcbiAgICAvLyB0aGlzIHBvc3NpYmxlLlxuXG5cbiAgICBjb25zdCBbbWFwLCBjZWxsQU1hcCwgY2VsbEJNYXBdID0gY29tcHV0ZUdyaWRNYXAoZ3JpZE5vZGUsIGFuY2hvckNlbGwsIGZvY3VzQ2VsbCk7XG4gICAgbGV0IG1pbkNvbHVtbiA9IE1hdGgubWluKGNlbGxBTWFwLnN0YXJ0Q29sdW1uLCBjZWxsQk1hcC5zdGFydENvbHVtbik7XG4gICAgbGV0IG1pblJvdyA9IE1hdGgubWluKGNlbGxBTWFwLnN0YXJ0Um93LCBjZWxsQk1hcC5zdGFydFJvdyk7XG4gICAgbGV0IG1heENvbHVtbiA9IE1hdGgubWF4KGNlbGxBTWFwLnN0YXJ0Q29sdW1uICsgY2VsbEFNYXAuY2VsbC5fX2NvbFNwYW4gLSAxLCBjZWxsQk1hcC5zdGFydENvbHVtbiArIGNlbGxCTWFwLmNlbGwuX19jb2xTcGFuIC0gMSk7XG4gICAgbGV0IG1heFJvdyA9IE1hdGgubWF4KGNlbGxBTWFwLnN0YXJ0Um93ICsgY2VsbEFNYXAuY2VsbC5fX3Jvd1NwYW4gLSAxLCBjZWxsQk1hcC5zdGFydFJvdyArIGNlbGxCTWFwLmNlbGwuX19yb3dTcGFuIC0gMSk7XG4gICAgbGV0IGV4cGxvcmVkTWluQ29sdW1uID0gbWluQ29sdW1uO1xuICAgIGxldCBleHBsb3JlZE1pblJvdyA9IG1pblJvdztcbiAgICBsZXQgZXhwbG9yZWRNYXhDb2x1bW4gPSBtaW5Db2x1bW47XG4gICAgbGV0IGV4cGxvcmVkTWF4Um93ID0gbWluUm93O1xuXG4gICAgZnVuY3Rpb24gZXhwYW5kQm91bmRhcnkobWFwVmFsdWUpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgY2VsbCxcbiAgICAgICAgc3RhcnRDb2x1bW46IGNlbGxTdGFydENvbHVtbixcbiAgICAgICAgc3RhcnRSb3c6IGNlbGxTdGFydFJvd1xuICAgICAgfSA9IG1hcFZhbHVlO1xuICAgICAgbWluQ29sdW1uID0gTWF0aC5taW4obWluQ29sdW1uLCBjZWxsU3RhcnRDb2x1bW4pO1xuICAgICAgbWluUm93ID0gTWF0aC5taW4obWluUm93LCBjZWxsU3RhcnRSb3cpO1xuICAgICAgbWF4Q29sdW1uID0gTWF0aC5tYXgobWF4Q29sdW1uLCBjZWxsU3RhcnRDb2x1bW4gKyBjZWxsLl9fY29sU3BhbiAtIDEpO1xuICAgICAgbWF4Um93ID0gTWF0aC5tYXgobWF4Um93LCBjZWxsU3RhcnRSb3cgKyBjZWxsLl9fcm93U3BhbiAtIDEpO1xuICAgIH1cblxuICAgIHdoaWxlIChtaW5Db2x1bW4gPCBleHBsb3JlZE1pbkNvbHVtbiB8fCBtaW5Sb3cgPCBleHBsb3JlZE1pblJvdyB8fCBtYXhDb2x1bW4gPiBleHBsb3JlZE1heENvbHVtbiB8fCBtYXhSb3cgPiBleHBsb3JlZE1heFJvdykge1xuICAgICAgaWYgKG1pbkNvbHVtbiA8IGV4cGxvcmVkTWluQ29sdW1uKSB7XG4gICAgICAgIC8vIEV4cGFuZCBvbiB0aGUgbGVmdFxuICAgICAgICBjb25zdCByb3dEaWZmID0gZXhwbG9yZWRNYXhSb3cgLSBleHBsb3JlZE1pblJvdztcbiAgICAgICAgY29uc3QgcHJldmlvdXNDb2x1bW4gPSBleHBsb3JlZE1pbkNvbHVtbiAtIDE7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gcm93RGlmZjsgaSsrKSB7XG4gICAgICAgICAgZXhwYW5kQm91bmRhcnkobWFwW2V4cGxvcmVkTWluUm93ICsgaV1bcHJldmlvdXNDb2x1bW5dKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cGxvcmVkTWluQ29sdW1uID0gcHJldmlvdXNDb2x1bW47XG4gICAgICB9XG5cbiAgICAgIGlmIChtaW5Sb3cgPCBleHBsb3JlZE1pblJvdykge1xuICAgICAgICAvLyBFeHBhbmQgb24gdG9wXG4gICAgICAgIGNvbnN0IGNvbHVtbkRpZmYgPSBleHBsb3JlZE1heENvbHVtbiAtIGV4cGxvcmVkTWluQ29sdW1uO1xuICAgICAgICBjb25zdCBwcmV2aW91c1JvdyA9IGV4cGxvcmVkTWluUm93IC0gMTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBjb2x1bW5EaWZmOyBpKyspIHtcbiAgICAgICAgICBleHBhbmRCb3VuZGFyeShtYXBbcHJldmlvdXNSb3ddW2V4cGxvcmVkTWluQ29sdW1uICsgaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwbG9yZWRNaW5Sb3cgPSBwcmV2aW91c1JvdztcbiAgICAgIH1cblxuICAgICAgaWYgKG1heENvbHVtbiA+IGV4cGxvcmVkTWF4Q29sdW1uKSB7XG4gICAgICAgIC8vIEV4cGFuZCBvbiB0aGUgcmlnaHRcbiAgICAgICAgY29uc3Qgcm93RGlmZiA9IGV4cGxvcmVkTWF4Um93IC0gZXhwbG9yZWRNaW5Sb3c7XG4gICAgICAgIGNvbnN0IG5leHRDb2x1bW4gPSBleHBsb3JlZE1heENvbHVtbiArIDE7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gcm93RGlmZjsgaSsrKSB7XG4gICAgICAgICAgZXhwYW5kQm91bmRhcnkobWFwW2V4cGxvcmVkTWluUm93ICsgaV1bbmV4dENvbHVtbl0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwbG9yZWRNYXhDb2x1bW4gPSBuZXh0Q29sdW1uO1xuICAgICAgfVxuXG4gICAgICBpZiAobWF4Um93ID4gZXhwbG9yZWRNYXhSb3cpIHtcbiAgICAgICAgLy8gRXhwYW5kIG9uIHRoZSBib3R0b21cbiAgICAgICAgY29uc3QgY29sdW1uRGlmZiA9IGV4cGxvcmVkTWF4Q29sdW1uIC0gZXhwbG9yZWRNaW5Db2x1bW47XG4gICAgICAgIGNvbnN0IG5leHRSb3cgPSBleHBsb3JlZE1heFJvdyArIDE7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gY29sdW1uRGlmZjsgaSsrKSB7XG4gICAgICAgICAgZXhwYW5kQm91bmRhcnkobWFwW25leHRSb3ddW2V4cGxvcmVkTWluQ29sdW1uICsgaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwbG9yZWRNYXhSb3cgPSBuZXh0Um93O1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG5vZGVzID0gW2dyaWROb2RlXTtcbiAgICBsZXQgbGFzdFJvdyA9IG51bGw7XG5cbiAgICBmb3IgKGxldCBpID0gbWluUm93OyBpIDw9IG1heFJvdzsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gbWluQ29sdW1uOyBqIDw9IG1heENvbHVtbjsgaisrKSB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBjZWxsXG4gICAgICAgIH0gPSBtYXBbaV1bal07XG4gICAgICAgIGNvbnN0IGN1cnJlbnRSb3cgPSBjZWxsLmdldFBhcmVudCgpO1xuXG4gICAgICAgIGlmICghREVQUkVDQVRFRF8kaXNHcmlkUm93Tm9kZShjdXJyZW50Um93KSkge1xuICAgICAgICAgIHRocm93IEVycm9yKGBFeHBlY3RlZCBHcmlkQ2VsbE5vZGUgcGFyZW50IHRvIGJlIGEgR3JpZFJvd05vZGVgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjdXJyZW50Um93ICE9PSBsYXN0Um93KSB7XG4gICAgICAgICAgbm9kZXMucHVzaChjdXJyZW50Um93KTtcbiAgICAgICAgfVxuXG4gICAgICAgIG5vZGVzLnB1c2goY2VsbCwgLi4uJGdldENoaWxkcmVuUmVjdXJzaXZlbHkoY2VsbCkpO1xuICAgICAgICBsYXN0Um93ID0gY3VycmVudFJvdztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWlzQ3VycmVudGx5UmVhZE9ubHlNb2RlKCkpIHtcbiAgICAgIHRoaXMuX2NhY2hlZE5vZGVzID0gbm9kZXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5vZGVzO1xuICB9XG5cbiAgZ2V0VGV4dENvbnRlbnQoKSB7XG4gICAgY29uc3Qgbm9kZXMgPSB0aGlzLmdldE5vZGVzKCk7XG4gICAgbGV0IHRleHRDb250ZW50ID0gJyc7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0ZXh0Q29udGVudCArPSBub2Rlc1tpXS5nZXRUZXh0Q29udGVudCgpO1xuICAgIH1cblxuICAgIHJldHVybiB0ZXh0Q29udGVudDtcbiAgfVxuXG59XG5mdW5jdGlvbiBERVBSRUNBVEVEXyRpc0dyaWRTZWxlY3Rpb24oeCkge1xuICByZXR1cm4geCBpbnN0YW5jZW9mIEdyaWRTZWxlY3Rpb247XG59XG5jbGFzcyBSYW5nZVNlbGVjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKGFuY2hvciwgZm9jdXMsIGZvcm1hdCwgc3R5bGUpIHtcbiAgICB0aGlzLmFuY2hvciA9IGFuY2hvcjtcbiAgICB0aGlzLmZvY3VzID0gZm9jdXM7XG4gICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0O1xuICAgIHRoaXMuc3R5bGUgPSBzdHlsZTtcbiAgICB0aGlzLl9jYWNoZWROb2RlcyA9IG51bGw7XG4gICAgYW5jaG9yLl9zZWxlY3Rpb24gPSB0aGlzO1xuICAgIGZvY3VzLl9zZWxlY3Rpb24gPSB0aGlzO1xuICB9XG5cbiAgaXMoc2VsZWN0aW9uKSB7XG4gICAgaWYgKCEkaXNSYW5nZVNlbGVjdGlvbihzZWxlY3Rpb24pKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuYW5jaG9yLmlzKHNlbGVjdGlvbi5hbmNob3IpICYmIHRoaXMuZm9jdXMuaXMoc2VsZWN0aW9uLmZvY3VzKSAmJiB0aGlzLmZvcm1hdCA9PT0gc2VsZWN0aW9uLmZvcm1hdCAmJiB0aGlzLnN0eWxlID09PSBzZWxlY3Rpb24uc3R5bGU7XG4gIH1cblxuICBpc0JhY2t3YXJkKCkge1xuICAgIHJldHVybiB0aGlzLmZvY3VzLmlzQmVmb3JlKHRoaXMuYW5jaG9yKTtcbiAgfVxuXG4gIGlzQ29sbGFwc2VkKCkge1xuICAgIHJldHVybiB0aGlzLmFuY2hvci5pcyh0aGlzLmZvY3VzKTtcbiAgfVxuXG4gIGdldE5vZGVzKCkge1xuICAgIGNvbnN0IGNhY2hlZE5vZGVzID0gdGhpcy5fY2FjaGVkTm9kZXM7XG5cbiAgICBpZiAoY2FjaGVkTm9kZXMgIT09IG51bGwpIHtcbiAgICAgIHJldHVybiBjYWNoZWROb2RlcztcbiAgICB9XG5cbiAgICBjb25zdCBhbmNob3IgPSB0aGlzLmFuY2hvcjtcbiAgICBjb25zdCBmb2N1cyA9IHRoaXMuZm9jdXM7XG4gICAgY29uc3QgaXNCZWZvcmUgPSBhbmNob3IuaXNCZWZvcmUoZm9jdXMpO1xuICAgIGNvbnN0IGZpcnN0UG9pbnQgPSBpc0JlZm9yZSA/IGFuY2hvciA6IGZvY3VzO1xuICAgIGNvbnN0IGxhc3RQb2ludCA9IGlzQmVmb3JlID8gZm9jdXMgOiBhbmNob3I7XG4gICAgbGV0IGZpcnN0Tm9kZSA9IGZpcnN0UG9pbnQuZ2V0Tm9kZSgpO1xuICAgIGxldCBsYXN0Tm9kZSA9IGxhc3RQb2ludC5nZXROb2RlKCk7XG4gICAgY29uc3Qgc3RhcnRPZmZzZXQgPSBmaXJzdFBvaW50Lm9mZnNldDtcbiAgICBjb25zdCBlbmRPZmZzZXQgPSBsYXN0UG9pbnQub2Zmc2V0O1xuXG4gICAgaWYgKCRpc0VsZW1lbnROb2RlKGZpcnN0Tm9kZSkpIHtcbiAgICAgIGNvbnN0IGZpcnN0Tm9kZURlc2NlbmRhbnQgPSBmaXJzdE5vZGUuZ2V0RGVzY2VuZGFudEJ5SW5kZXgoc3RhcnRPZmZzZXQpO1xuICAgICAgZmlyc3ROb2RlID0gZmlyc3ROb2RlRGVzY2VuZGFudCAhPSBudWxsID8gZmlyc3ROb2RlRGVzY2VuZGFudCA6IGZpcnN0Tm9kZTtcbiAgICB9XG5cbiAgICBpZiAoJGlzRWxlbWVudE5vZGUobGFzdE5vZGUpKSB7XG4gICAgICBsZXQgbGFzdE5vZGVEZXNjZW5kYW50ID0gbGFzdE5vZGUuZ2V0RGVzY2VuZGFudEJ5SW5kZXgoZW5kT2Zmc2V0KTsgLy8gV2UgZG9uJ3Qgd2FudCB0byBvdmVyLXNlbGVjdCwgYXMgbm9kZSBzZWxlY3Rpb24gaW5mZXJzIHRoZSBjaGlsZCBiZWZvcmVcbiAgICAgIC8vIHRoZSBsYXN0IGRlc2NlbmRhbnQsIG5vdCBpbmNsdWRpbmcgdGhhdCBkZXNjZW5kYW50LlxuXG4gICAgICBpZiAobGFzdE5vZGVEZXNjZW5kYW50ICE9PSBudWxsICYmIGxhc3ROb2RlRGVzY2VuZGFudCAhPT0gZmlyc3ROb2RlICYmIGxhc3ROb2RlLmdldENoaWxkQXRJbmRleChlbmRPZmZzZXQpID09PSBsYXN0Tm9kZURlc2NlbmRhbnQpIHtcbiAgICAgICAgbGFzdE5vZGVEZXNjZW5kYW50ID0gbGFzdE5vZGVEZXNjZW5kYW50LmdldFByZXZpb3VzU2libGluZygpO1xuICAgICAgfVxuXG4gICAgICBsYXN0Tm9kZSA9IGxhc3ROb2RlRGVzY2VuZGFudCAhPSBudWxsID8gbGFzdE5vZGVEZXNjZW5kYW50IDogbGFzdE5vZGU7XG4gICAgfVxuXG4gICAgbGV0IG5vZGVzO1xuXG4gICAgaWYgKGZpcnN0Tm9kZS5pcyhsYXN0Tm9kZSkpIHtcbiAgICAgIGlmICgkaXNFbGVtZW50Tm9kZShmaXJzdE5vZGUpICYmIGZpcnN0Tm9kZS5nZXRDaGlsZHJlblNpemUoKSA+IDApIHtcbiAgICAgICAgbm9kZXMgPSBbXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vZGVzID0gW2ZpcnN0Tm9kZV07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGVzID0gZmlyc3ROb2RlLmdldE5vZGVzQmV0d2VlbihsYXN0Tm9kZSk7XG4gICAgfVxuXG4gICAgaWYgKCFpc0N1cnJlbnRseVJlYWRPbmx5TW9kZSgpKSB7XG4gICAgICB0aGlzLl9jYWNoZWROb2RlcyA9IG5vZGVzO1xuICAgIH1cblxuICAgIHJldHVybiBub2RlcztcbiAgfVxuXG4gIHNldFRleHROb2RlUmFuZ2UoYW5jaG9yTm9kZSwgYW5jaG9yT2Zmc2V0LCBmb2N1c05vZGUsIGZvY3VzT2Zmc2V0KSB7XG4gICAgJHNldFBvaW50VmFsdWVzKHRoaXMuYW5jaG9yLCBhbmNob3JOb2RlLl9fa2V5LCBhbmNob3JPZmZzZXQsICd0ZXh0Jyk7XG4gICAgJHNldFBvaW50VmFsdWVzKHRoaXMuZm9jdXMsIGZvY3VzTm9kZS5fX2tleSwgZm9jdXNPZmZzZXQsICd0ZXh0Jyk7XG4gICAgdGhpcy5fY2FjaGVkTm9kZXMgPSBudWxsO1xuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICB9XG5cbiAgZ2V0VGV4dENvbnRlbnQoKSB7XG4gICAgY29uc3Qgbm9kZXMgPSB0aGlzLmdldE5vZGVzKCk7XG5cbiAgICBpZiAobm9kZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgY29uc3QgZmlyc3ROb2RlID0gbm9kZXNbMF07XG4gICAgY29uc3QgbGFzdE5vZGUgPSBub2Rlc1tub2Rlcy5sZW5ndGggLSAxXTtcbiAgICBjb25zdCBhbmNob3IgPSB0aGlzLmFuY2hvcjtcbiAgICBjb25zdCBmb2N1cyA9IHRoaXMuZm9jdXM7XG4gICAgY29uc3QgaXNCZWZvcmUgPSBhbmNob3IuaXNCZWZvcmUoZm9jdXMpO1xuICAgIGNvbnN0IFthbmNob3JPZmZzZXQsIGZvY3VzT2Zmc2V0XSA9IGdldENoYXJhY3Rlck9mZnNldHModGhpcyk7XG4gICAgbGV0IHRleHRDb250ZW50ID0gJyc7XG4gICAgbGV0IHByZXZXYXNFbGVtZW50ID0gdHJ1ZTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTtcblxuICAgICAgaWYgKCRpc0VsZW1lbnROb2RlKG5vZGUpICYmICFub2RlLmlzSW5saW5lKCkpIHtcbiAgICAgICAgaWYgKCFwcmV2V2FzRWxlbWVudCkge1xuICAgICAgICAgIHRleHRDb250ZW50ICs9ICdcXG4nO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5vZGUuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgcHJldldhc0VsZW1lbnQgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcmV2V2FzRWxlbWVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByZXZXYXNFbGVtZW50ID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKCRpc1RleHROb2RlKG5vZGUpKSB7XG4gICAgICAgICAgbGV0IHRleHQgPSBub2RlLmdldFRleHRDb250ZW50KCk7XG5cbiAgICAgICAgICBpZiAobm9kZSA9PT0gZmlyc3ROb2RlKSB7XG4gICAgICAgICAgICBpZiAobm9kZSA9PT0gbGFzdE5vZGUpIHtcbiAgICAgICAgICAgICAgaWYgKGFuY2hvci50eXBlICE9PSAnZWxlbWVudCcgfHwgZm9jdXMudHlwZSAhPT0gJ2VsZW1lbnQnIHx8IGZvY3VzLm9mZnNldCA9PT0gYW5jaG9yLm9mZnNldCkge1xuICAgICAgICAgICAgICAgIHRleHQgPSBhbmNob3JPZmZzZXQgPCBmb2N1c09mZnNldCA/IHRleHQuc2xpY2UoYW5jaG9yT2Zmc2V0LCBmb2N1c09mZnNldCkgOiB0ZXh0LnNsaWNlKGZvY3VzT2Zmc2V0LCBhbmNob3JPZmZzZXQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0ZXh0ID0gaXNCZWZvcmUgPyB0ZXh0LnNsaWNlKGFuY2hvck9mZnNldCkgOiB0ZXh0LnNsaWNlKGZvY3VzT2Zmc2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKG5vZGUgPT09IGxhc3ROb2RlKSB7XG4gICAgICAgICAgICB0ZXh0ID0gaXNCZWZvcmUgPyB0ZXh0LnNsaWNlKDAsIGZvY3VzT2Zmc2V0KSA6IHRleHQuc2xpY2UoMCwgYW5jaG9yT2Zmc2V0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0ZXh0Q29udGVudCArPSB0ZXh0O1xuICAgICAgICB9IGVsc2UgaWYgKCgkaXNEZWNvcmF0b3JOb2RlKG5vZGUpIHx8ICRpc0xpbmVCcmVha05vZGUobm9kZSkpICYmIChub2RlICE9PSBsYXN0Tm9kZSB8fCAhdGhpcy5pc0NvbGxhcHNlZCgpKSkge1xuICAgICAgICAgIHRleHRDb250ZW50ICs9IG5vZGUuZ2V0VGV4dENvbnRlbnQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0ZXh0Q29udGVudDtcbiAgfVxuXG4gIGFwcGx5RE9NUmFuZ2UocmFuZ2UpIHtcbiAgICBjb25zdCBlZGl0b3IgPSBnZXRBY3RpdmVFZGl0b3IoKTtcbiAgICBjb25zdCBjdXJyZW50RWRpdG9yU3RhdGUgPSBlZGl0b3IuZ2V0RWRpdG9yU3RhdGUoKTtcbiAgICBjb25zdCBsYXN0U2VsZWN0aW9uID0gY3VycmVudEVkaXRvclN0YXRlLl9zZWxlY3Rpb247XG4gICAgY29uc3QgcmVzb2x2ZWRTZWxlY3Rpb25Qb2ludHMgPSBpbnRlcm5hbFJlc29sdmVTZWxlY3Rpb25Qb2ludHMocmFuZ2Uuc3RhcnRDb250YWluZXIsIHJhbmdlLnN0YXJ0T2Zmc2V0LCByYW5nZS5lbmRDb250YWluZXIsIHJhbmdlLmVuZE9mZnNldCwgZWRpdG9yLCBsYXN0U2VsZWN0aW9uKTtcblxuICAgIGlmIChyZXNvbHZlZFNlbGVjdGlvblBvaW50cyA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IFthbmNob3JQb2ludCwgZm9jdXNQb2ludF0gPSByZXNvbHZlZFNlbGVjdGlvblBvaW50cztcbiAgICAkc2V0UG9pbnRWYWx1ZXModGhpcy5hbmNob3IsIGFuY2hvclBvaW50LmtleSwgYW5jaG9yUG9pbnQub2Zmc2V0LCBhbmNob3JQb2ludC50eXBlKTtcbiAgICAkc2V0UG9pbnRWYWx1ZXModGhpcy5mb2N1cywgZm9jdXNQb2ludC5rZXksIGZvY3VzUG9pbnQub2Zmc2V0LCBmb2N1c1BvaW50LnR5cGUpO1xuICAgIHRoaXMuX2NhY2hlZE5vZGVzID0gbnVsbDtcbiAgfVxuXG4gIGNsb25lKCkge1xuICAgIGNvbnN0IGFuY2hvciA9IHRoaXMuYW5jaG9yO1xuICAgIGNvbnN0IGZvY3VzID0gdGhpcy5mb2N1cztcbiAgICBjb25zdCBzZWxlY3Rpb24gPSBuZXcgUmFuZ2VTZWxlY3Rpb24oJGNyZWF0ZVBvaW50KGFuY2hvci5rZXksIGFuY2hvci5vZmZzZXQsIGFuY2hvci50eXBlKSwgJGNyZWF0ZVBvaW50KGZvY3VzLmtleSwgZm9jdXMub2Zmc2V0LCBmb2N1cy50eXBlKSwgdGhpcy5mb3JtYXQsIHRoaXMuc3R5bGUpO1xuICAgIHJldHVybiBzZWxlY3Rpb247XG4gIH1cblxuICB0b2dnbGVGb3JtYXQoZm9ybWF0KSB7XG4gICAgdGhpcy5mb3JtYXQgPSB0b2dnbGVUZXh0Rm9ybWF0VHlwZSh0aGlzLmZvcm1hdCwgZm9ybWF0LCBudWxsKTtcbiAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgfVxuXG4gIHNldFN0eWxlKHN0eWxlKSB7XG4gICAgdGhpcy5zdHlsZSA9IHN0eWxlO1xuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICB9XG5cbiAgaGFzRm9ybWF0KHR5cGUpIHtcbiAgICBjb25zdCBmb3JtYXRGbGFnID0gVEVYVF9UWVBFX1RPX0ZPUk1BVFt0eXBlXTtcbiAgICByZXR1cm4gKHRoaXMuZm9ybWF0ICYgZm9ybWF0RmxhZykgIT09IDA7XG4gIH1cblxuICBpbnNlcnRSYXdUZXh0KHRleHQpIHtcbiAgICBjb25zdCBwYXJ0cyA9IHRleHQuc3BsaXQoL1xccj9cXG4vKTtcblxuICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDEpIHtcbiAgICAgIHRoaXMuaW5zZXJ0VGV4dCh0ZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgbm9kZXMgPSBbXTtcbiAgICAgIGNvbnN0IGxlbmd0aCA9IHBhcnRzLmxlbmd0aDtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBwYXJ0ID0gcGFydHNbaV07XG5cbiAgICAgICAgaWYgKHBhcnQgIT09ICcnKSB7XG4gICAgICAgICAgbm9kZXMucHVzaCgkY3JlYXRlVGV4dE5vZGUocGFydCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGkgIT09IGxlbmd0aCAtIDEpIHtcbiAgICAgICAgICBub2Rlcy5wdXNoKCRjcmVhdGVMaW5lQnJlYWtOb2RlKCkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuaW5zZXJ0Tm9kZXMobm9kZXMpO1xuICAgIH1cbiAgfVxuXG4gIGluc2VydFRleHQodGV4dCkge1xuICAgIGNvbnN0IGFuY2hvciA9IHRoaXMuYW5jaG9yO1xuICAgIGNvbnN0IGZvY3VzID0gdGhpcy5mb2N1cztcbiAgICBjb25zdCBpc0JlZm9yZSA9IHRoaXMuaXNDb2xsYXBzZWQoKSB8fCBhbmNob3IuaXNCZWZvcmUoZm9jdXMpO1xuICAgIGNvbnN0IGZvcm1hdCA9IHRoaXMuZm9ybWF0O1xuICAgIGNvbnN0IHN0eWxlID0gdGhpcy5zdHlsZTtcblxuICAgIGlmIChpc0JlZm9yZSAmJiBhbmNob3IudHlwZSA9PT0gJ2VsZW1lbnQnKSB7XG4gICAgICAkdHJhbnNmZXJTdGFydGluZ0VsZW1lbnRQb2ludFRvVGV4dFBvaW50KGFuY2hvciwgZm9jdXMsIGZvcm1hdCwgc3R5bGUpO1xuICAgIH0gZWxzZSBpZiAoIWlzQmVmb3JlICYmIGZvY3VzLnR5cGUgPT09ICdlbGVtZW50Jykge1xuICAgICAgJHRyYW5zZmVyU3RhcnRpbmdFbGVtZW50UG9pbnRUb1RleHRQb2ludChmb2N1cywgYW5jaG9yLCBmb3JtYXQsIHN0eWxlKTtcbiAgICB9XG5cbiAgICBjb25zdCBzZWxlY3RlZE5vZGVzID0gdGhpcy5nZXROb2RlcygpO1xuICAgIGNvbnN0IHNlbGVjdGVkTm9kZXNMZW5ndGggPSBzZWxlY3RlZE5vZGVzLmxlbmd0aDtcbiAgICBjb25zdCBmaXJzdFBvaW50ID0gaXNCZWZvcmUgPyBhbmNob3IgOiBmb2N1cztcbiAgICBjb25zdCBlbmRQb2ludCA9IGlzQmVmb3JlID8gZm9jdXMgOiBhbmNob3I7XG4gICAgY29uc3Qgc3RhcnRPZmZzZXQgPSBmaXJzdFBvaW50Lm9mZnNldDtcbiAgICBjb25zdCBlbmRPZmZzZXQgPSBlbmRQb2ludC5vZmZzZXQ7XG4gICAgbGV0IGZpcnN0Tm9kZSA9IHNlbGVjdGVkTm9kZXNbMF07XG5cbiAgICBpZiAoISRpc1RleHROb2RlKGZpcnN0Tm9kZSkpIHtcbiAgICAgIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoYGluc2VydFRleHQ6IGZpcnN0IG5vZGUgaXMgbm90IGEgdGV4dCBub2RlYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZmlyc3ROb2RlVGV4dCA9IGZpcnN0Tm9kZS5nZXRUZXh0Q29udGVudCgpO1xuICAgIGNvbnN0IGZpcnN0Tm9kZVRleHRMZW5ndGggPSBmaXJzdE5vZGVUZXh0Lmxlbmd0aDtcbiAgICBjb25zdCBmaXJzdE5vZGVQYXJlbnQgPSBmaXJzdE5vZGUuZ2V0UGFyZW50T3JUaHJvdygpO1xuICAgIGNvbnN0IGxhc3RJbmRleCA9IHNlbGVjdGVkTm9kZXNMZW5ndGggLSAxO1xuICAgIGxldCBsYXN0Tm9kZSA9IHNlbGVjdGVkTm9kZXNbbGFzdEluZGV4XTtcblxuICAgIGlmICh0aGlzLmlzQ29sbGFwc2VkKCkgJiYgc3RhcnRPZmZzZXQgPT09IGZpcnN0Tm9kZVRleHRMZW5ndGggJiYgKGZpcnN0Tm9kZS5pc1NlZ21lbnRlZCgpIHx8IGZpcnN0Tm9kZS5pc1Rva2VuKCkgfHwgIWZpcnN0Tm9kZS5jYW5JbnNlcnRUZXh0QWZ0ZXIoKSB8fCAhZmlyc3ROb2RlUGFyZW50LmNhbkluc2VydFRleHRBZnRlcigpICYmIGZpcnN0Tm9kZS5nZXROZXh0U2libGluZygpID09PSBudWxsKSkge1xuICAgICAgbGV0IG5leHRTaWJsaW5nID0gZmlyc3ROb2RlLmdldE5leHRTaWJsaW5nKCk7XG5cbiAgICAgIGlmICghJGlzVGV4dE5vZGUobmV4dFNpYmxpbmcpIHx8ICRpc1Rva2VuT3JTZWdtZW50ZWQobmV4dFNpYmxpbmcpKSB7XG4gICAgICAgIG5leHRTaWJsaW5nID0gJGNyZWF0ZVRleHROb2RlKCk7XG4gICAgICAgIG5leHRTaWJsaW5nLnNldEZvcm1hdChmb3JtYXQpO1xuXG4gICAgICAgIGlmICghZmlyc3ROb2RlUGFyZW50LmNhbkluc2VydFRleHRBZnRlcigpKSB7XG4gICAgICAgICAgZmlyc3ROb2RlUGFyZW50Lmluc2VydEFmdGVyKG5leHRTaWJsaW5nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmaXJzdE5vZGUuaW5zZXJ0QWZ0ZXIobmV4dFNpYmxpbmcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG5leHRTaWJsaW5nLnNlbGVjdCgwLCAwKTtcbiAgICAgIGZpcnN0Tm9kZSA9IG5leHRTaWJsaW5nO1xuXG4gICAgICBpZiAodGV4dCAhPT0gJycpIHtcbiAgICAgICAgdGhpcy5pbnNlcnRUZXh0KHRleHQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzQ29sbGFwc2VkKCkgJiYgc3RhcnRPZmZzZXQgPT09IDAgJiYgKGZpcnN0Tm9kZS5pc1NlZ21lbnRlZCgpIHx8IGZpcnN0Tm9kZS5pc1Rva2VuKCkgfHwgIWZpcnN0Tm9kZS5jYW5JbnNlcnRUZXh0QmVmb3JlKCkgfHwgIWZpcnN0Tm9kZVBhcmVudC5jYW5JbnNlcnRUZXh0QmVmb3JlKCkgJiYgZmlyc3ROb2RlLmdldFByZXZpb3VzU2libGluZygpID09PSBudWxsKSkge1xuICAgICAgbGV0IHByZXZTaWJsaW5nID0gZmlyc3ROb2RlLmdldFByZXZpb3VzU2libGluZygpO1xuXG4gICAgICBpZiAoISRpc1RleHROb2RlKHByZXZTaWJsaW5nKSB8fCAkaXNUb2tlbk9yU2VnbWVudGVkKHByZXZTaWJsaW5nKSkge1xuICAgICAgICBwcmV2U2libGluZyA9ICRjcmVhdGVUZXh0Tm9kZSgpO1xuICAgICAgICBwcmV2U2libGluZy5zZXRGb3JtYXQoZm9ybWF0KTtcblxuICAgICAgICBpZiAoIWZpcnN0Tm9kZVBhcmVudC5jYW5JbnNlcnRUZXh0QmVmb3JlKCkpIHtcbiAgICAgICAgICBmaXJzdE5vZGVQYXJlbnQuaW5zZXJ0QmVmb3JlKHByZXZTaWJsaW5nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmaXJzdE5vZGUuaW5zZXJ0QmVmb3JlKHByZXZTaWJsaW5nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBwcmV2U2libGluZy5zZWxlY3QoKTtcbiAgICAgIGZpcnN0Tm9kZSA9IHByZXZTaWJsaW5nO1xuXG4gICAgICBpZiAodGV4dCAhPT0gJycpIHtcbiAgICAgICAgdGhpcy5pbnNlcnRUZXh0KHRleHQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChmaXJzdE5vZGUuaXNTZWdtZW50ZWQoKSAmJiBzdGFydE9mZnNldCAhPT0gZmlyc3ROb2RlVGV4dExlbmd0aCkge1xuICAgICAgY29uc3QgdGV4dE5vZGUgPSAkY3JlYXRlVGV4dE5vZGUoZmlyc3ROb2RlLmdldFRleHRDb250ZW50KCkpO1xuICAgICAgdGV4dE5vZGUuc2V0Rm9ybWF0KGZvcm1hdCk7XG4gICAgICBmaXJzdE5vZGUucmVwbGFjZSh0ZXh0Tm9kZSk7XG4gICAgICBmaXJzdE5vZGUgPSB0ZXh0Tm9kZTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmlzQ29sbGFwc2VkKCkgJiYgdGV4dCAhPT0gJycpIHtcbiAgICAgIC8vIFdoZW4gdGhlIGZpcnN0Tm9kZSBvciBsYXN0Tm9kZSBwYXJlbnRzIGFyZSBlbGVtZW50cyB0aGF0XG4gICAgICAvLyBkbyBub3QgYWxsb3cgdGV4dCB0byBiZSBpbnNlcnRlZCBiZWZvcmUgb3IgYWZ0ZXIsIHdlIGZpcnN0XG4gICAgICAvLyBjbGVhciB0aGUgY29udGVudC4gVGhlbiB3ZSBub3JtYWxpemUgc2VsZWN0aW9uLCB0aGVuIGluc2VydFxuICAgICAgLy8gdGhlIG5ldyBjb250ZW50LlxuICAgICAgY29uc3QgbGFzdE5vZGVQYXJlbnQgPSBsYXN0Tm9kZS5nZXRQYXJlbnQoKTtcblxuICAgICAgaWYgKCFmaXJzdE5vZGVQYXJlbnQuY2FuSW5zZXJ0VGV4dEJlZm9yZSgpIHx8ICFmaXJzdE5vZGVQYXJlbnQuY2FuSW5zZXJ0VGV4dEFmdGVyKCkgfHwgJGlzRWxlbWVudE5vZGUobGFzdE5vZGVQYXJlbnQpICYmICghbGFzdE5vZGVQYXJlbnQuY2FuSW5zZXJ0VGV4dEJlZm9yZSgpIHx8ICFsYXN0Tm9kZVBhcmVudC5jYW5JbnNlcnRUZXh0QWZ0ZXIoKSkpIHtcbiAgICAgICAgdGhpcy5pbnNlcnRUZXh0KCcnKTtcbiAgICAgICAgbm9ybWFsaXplU2VsZWN0aW9uUG9pbnRzRm9yQm91bmRhcmllcyh0aGlzLmFuY2hvciwgdGhpcy5mb2N1cywgbnVsbCk7XG4gICAgICAgIHRoaXMuaW5zZXJ0VGV4dCh0ZXh0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzZWxlY3RlZE5vZGVzTGVuZ3RoID09PSAxKSB7XG4gICAgICBpZiAoZmlyc3ROb2RlLmlzVG9rZW4oKSkge1xuICAgICAgICBjb25zdCB0ZXh0Tm9kZSA9ICRjcmVhdGVUZXh0Tm9kZSh0ZXh0KTtcbiAgICAgICAgdGV4dE5vZGUuc2VsZWN0KCk7XG4gICAgICAgIGZpcnN0Tm9kZS5yZXBsYWNlKHRleHROb2RlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmaXJzdE5vZGVGb3JtYXQgPSBmaXJzdE5vZGUuZ2V0Rm9ybWF0KCk7XG4gICAgICBjb25zdCBmaXJzdE5vZGVTdHlsZSA9IGZpcnN0Tm9kZS5nZXRTdHlsZSgpO1xuXG4gICAgICBpZiAoc3RhcnRPZmZzZXQgPT09IGVuZE9mZnNldCAmJiAoZmlyc3ROb2RlRm9ybWF0ICE9PSBmb3JtYXQgfHwgZmlyc3ROb2RlU3R5bGUgIT09IHN0eWxlKSkge1xuICAgICAgICBpZiAoZmlyc3ROb2RlLmdldFRleHRDb250ZW50KCkgPT09ICcnKSB7XG4gICAgICAgICAgZmlyc3ROb2RlLnNldEZvcm1hdChmb3JtYXQpO1xuICAgICAgICAgIGZpcnN0Tm9kZS5zZXRTdHlsZShzdHlsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgdGV4dE5vZGUgPSAkY3JlYXRlVGV4dE5vZGUodGV4dCk7XG4gICAgICAgICAgdGV4dE5vZGUuc2V0Rm9ybWF0KGZvcm1hdCk7XG4gICAgICAgICAgdGV4dE5vZGUuc2V0U3R5bGUoc3R5bGUpO1xuICAgICAgICAgIHRleHROb2RlLnNlbGVjdCgpO1xuXG4gICAgICAgICAgaWYgKHN0YXJ0T2Zmc2V0ID09PSAwKSB7XG4gICAgICAgICAgICBmaXJzdE5vZGUuaW5zZXJ0QmVmb3JlKHRleHROb2RlLCBmYWxzZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IFt0YXJnZXROb2RlXSA9IGZpcnN0Tm9kZS5zcGxpdFRleHQoc3RhcnRPZmZzZXQpO1xuICAgICAgICAgICAgdGFyZ2V0Tm9kZS5pbnNlcnRBZnRlcih0ZXh0Tm9kZSwgZmFsc2UpO1xuICAgICAgICAgIH0gLy8gV2hlbiBjb21wb3NpbmcsIHdlIG5lZWQgdG8gYWRqdXN0IHRoZSBhbmNob3Igb2Zmc2V0IHNvIHRoYXRcbiAgICAgICAgICAvLyB3ZSBjb3JyZWN0bHkgcmVwbGFjZSB0aGF0IHJpZ2h0IHJhbmdlLlxuXG5cbiAgICAgICAgICBpZiAodGV4dE5vZGUuaXNDb21wb3NpbmcoKSAmJiB0aGlzLmFuY2hvci50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yLm9mZnNldCAtPSB0ZXh0Lmxlbmd0aDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgZGVsQ291bnQgPSBlbmRPZmZzZXQgLSBzdGFydE9mZnNldDtcbiAgICAgIGZpcnN0Tm9kZSA9IGZpcnN0Tm9kZS5zcGxpY2VUZXh0KHN0YXJ0T2Zmc2V0LCBkZWxDb3VudCwgdGV4dCwgdHJ1ZSk7XG5cbiAgICAgIGlmIChmaXJzdE5vZGUuZ2V0VGV4dENvbnRlbnQoKSA9PT0gJycpIHtcbiAgICAgICAgZmlyc3ROb2RlLnJlbW92ZSgpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmFuY2hvci50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgaWYgKGZpcnN0Tm9kZS5pc0NvbXBvc2luZygpKSB7XG4gICAgICAgICAgLy8gV2hlbiBjb21wb3NpbmcsIHdlIG5lZWQgdG8gYWRqdXN0IHRoZSBhbmNob3Igb2Zmc2V0IHNvIHRoYXRcbiAgICAgICAgICAvLyB3ZSBjb3JyZWN0bHkgcmVwbGFjZSB0aGF0IHJpZ2h0IHJhbmdlLlxuICAgICAgICAgIHRoaXMuYW5jaG9yLm9mZnNldCAtPSB0ZXh0Lmxlbmd0aDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmZvcm1hdCA9IGZpcnN0Tm9kZUZvcm1hdDtcbiAgICAgICAgICB0aGlzLnN0eWxlID0gZmlyc3ROb2RlU3R5bGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbWFya2VkTm9kZUtleXNGb3JLZWVwID0gbmV3IFNldChbLi4uZmlyc3ROb2RlLmdldFBhcmVudEtleXMoKSwgLi4ubGFzdE5vZGUuZ2V0UGFyZW50S2V5cygpXSk7IC8vIFdlIGhhdmUgdG8gZ2V0IHRoZSBwYXJlbnQgZWxlbWVudHMgYmVmb3JlIHRoZSBuZXh0IHNlY3Rpb24sXG4gICAgICAvLyBhcyBpbiB0aGF0IHNlY3Rpb24gd2UgbWlnaHQgbXV0YXRlIHRoZSBsYXN0Tm9kZS5cblxuICAgICAgY29uc3QgZmlyc3RFbGVtZW50ID0gJGlzRWxlbWVudE5vZGUoZmlyc3ROb2RlKSA/IGZpcnN0Tm9kZSA6IGZpcnN0Tm9kZS5nZXRQYXJlbnRPclRocm93KCk7XG4gICAgICBsZXQgbGFzdEVsZW1lbnQgPSAkaXNFbGVtZW50Tm9kZShsYXN0Tm9kZSkgPyBsYXN0Tm9kZSA6IGxhc3ROb2RlLmdldFBhcmVudE9yVGhyb3coKTtcbiAgICAgIGxldCBsYXN0RWxlbWVudENoaWxkID0gbGFzdE5vZGU7IC8vIElmIHRoZSBsYXN0IGVsZW1lbnQgaXMgaW5saW5lLCB3ZSBzaG91bGQgaW5zdGVhZCBsb29rIGF0IGdldHRpbmdcbiAgICAgIC8vIHRoZSBub2RlcyBvZiBpdHMgcGFyZW50LCByYXRoZXIgdGhhbiBpdHNlbGYuIFRoaXMgYmVoYXZpb3Igd2lsbFxuICAgICAgLy8gdGhlbiBiZXR0ZXIgbWF0Y2ggaG93IHRleHQgbm9kZSBpbnNlcnRpb25zIHdvcmsuIFdlIHdpbGwgbmVlZCB0b1xuICAgICAgLy8gYWxzbyB1cGRhdGUgdGhlIGxhc3QgZWxlbWVudCdzIGNoaWxkIGFjY29yZGluZ2x5IGFzIHdlIGRvIHRoaXMuXG5cbiAgICAgIGlmICghZmlyc3RFbGVtZW50LmlzKGxhc3RFbGVtZW50KSAmJiBsYXN0RWxlbWVudC5pc0lubGluZSgpKSB7XG4gICAgICAgIC8vIEtlZXAgdHJhdmVyc2luZyB0aWxsIHdlIGhhdmUgYSBub24taW5saW5lIGVsZW1lbnQgcGFyZW50LlxuICAgICAgICBkbyB7XG4gICAgICAgICAgbGFzdEVsZW1lbnRDaGlsZCA9IGxhc3RFbGVtZW50O1xuICAgICAgICAgIGxhc3RFbGVtZW50ID0gbGFzdEVsZW1lbnQuZ2V0UGFyZW50T3JUaHJvdygpO1xuICAgICAgICB9IHdoaWxlIChsYXN0RWxlbWVudC5pc0lubGluZSgpKTtcbiAgICAgIH0gLy8gSGFuZGxlIG11dGF0aW9ucyB0byB0aGUgbGFzdCBub2RlLlxuXG5cbiAgICAgIGlmIChlbmRQb2ludC50eXBlID09PSAndGV4dCcgJiYgKGVuZE9mZnNldCAhPT0gMCB8fCBsYXN0Tm9kZS5nZXRUZXh0Q29udGVudCgpID09PSAnJykgfHwgZW5kUG9pbnQudHlwZSA9PT0gJ2VsZW1lbnQnICYmIGxhc3ROb2RlLmdldEluZGV4V2l0aGluUGFyZW50KCkgPCBlbmRPZmZzZXQpIHtcbiAgICAgICAgaWYgKCRpc1RleHROb2RlKGxhc3ROb2RlKSAmJiAhbGFzdE5vZGUuaXNUb2tlbigpICYmIGVuZE9mZnNldCAhPT0gbGFzdE5vZGUuZ2V0VGV4dENvbnRlbnRTaXplKCkpIHtcbiAgICAgICAgICBpZiAobGFzdE5vZGUuaXNTZWdtZW50ZWQoKSkge1xuICAgICAgICAgICAgY29uc3QgdGV4dE5vZGUgPSAkY3JlYXRlVGV4dE5vZGUobGFzdE5vZGUuZ2V0VGV4dENvbnRlbnQoKSk7XG4gICAgICAgICAgICBsYXN0Tm9kZS5yZXBsYWNlKHRleHROb2RlKTtcbiAgICAgICAgICAgIGxhc3ROb2RlID0gdGV4dE5vZGU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGFzdE5vZGUgPSBsYXN0Tm9kZS5zcGxpY2VUZXh0KDAsIGVuZE9mZnNldCwgJycpO1xuICAgICAgICAgIG1hcmtlZE5vZGVLZXlzRm9yS2VlcC5hZGQobGFzdE5vZGUuX19rZXkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGxhc3ROb2RlUGFyZW50ID0gbGFzdE5vZGUuZ2V0UGFyZW50T3JUaHJvdygpO1xuXG4gICAgICAgICAgaWYgKCFsYXN0Tm9kZVBhcmVudC5jYW5CZUVtcHR5KCkgJiYgbGFzdE5vZGVQYXJlbnQuZ2V0Q2hpbGRyZW5TaXplKCkgPT09IDEpIHtcbiAgICAgICAgICAgIGxhc3ROb2RlUGFyZW50LnJlbW92ZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsYXN0Tm9kZS5yZW1vdmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1hcmtlZE5vZGVLZXlzRm9yS2VlcC5hZGQobGFzdE5vZGUuX19rZXkpO1xuICAgICAgfSAvLyBFaXRoZXIgbW92ZSB0aGUgcmVtYWluaW5nIG5vZGVzIG9mIHRoZSBsYXN0IHBhcmVudCB0byBhZnRlclxuICAgICAgLy8gdGhlIGZpcnN0IGNoaWxkLCBvciByZW1vdmUgdGhlbSBlbnRpcmVseS4gSWYgdGhlIGxhc3QgcGFyZW50XG4gICAgICAvLyBpcyB0aGUgc2FtZSBhcyB0aGUgZmlyc3QgcGFyZW50LCB0aGlzIGxvZ2ljIGFsc28gd29ya3MuXG5cblxuICAgICAgY29uc3QgbGFzdE5vZGVDaGlsZHJlbiA9IGxhc3RFbGVtZW50LmdldENoaWxkcmVuKCk7XG4gICAgICBjb25zdCBzZWxlY3RlZE5vZGVzU2V0ID0gbmV3IFNldChzZWxlY3RlZE5vZGVzKTtcbiAgICAgIGNvbnN0IGZpcnN0QW5kTGFzdEVsZW1lbnRzQXJlRXF1YWwgPSBmaXJzdEVsZW1lbnQuaXMobGFzdEVsZW1lbnQpOyAvLyBXZSBjaG9vc2UgYSB0YXJnZXQgdG8gaW5zZXJ0IGFsbCBub2RlcyBhZnRlci4gSW4gdGhlIGNhc2Ugb2YgaGF2aW5nXG4gICAgICAvLyBhbmQgaW5saW5lIHN0YXJ0aW5nIHBhcmVudCBlbGVtZW50IHdpdGggYSBzdGFydGluZyBub2RlIHRoYXQgaGFzIG5vXG4gICAgICAvLyBzaWJsaW5ncywgd2Ugc2hvdWxkIGluc2VydCBhZnRlciB0aGUgc3RhcnRpbmcgcGFyZW50IGVsZW1lbnQsIG90aGVyd2lzZVxuICAgICAgLy8gd2Ugd2lsbCBpbmNvcnJlY3RseSBtZXJnZSBpbnRvIHRoZSBzdGFydGluZyBwYXJlbnQgZWxlbWVudC5cbiAgICAgIC8vIFRPRE86IHNob3VsZCB3ZSBrZWVwIG9uIHRyYXZlcnNpbmcgcGFyZW50cyBpZiB3ZSdyZSBpbnNpZGUgYW5vdGhlclxuICAgICAgLy8gbmVzdGVkIGlubGluZSBlbGVtZW50P1xuXG4gICAgICBjb25zdCBpbnNlcnRpb25UYXJnZXQgPSBmaXJzdEVsZW1lbnQuaXNJbmxpbmUoKSAmJiBmaXJzdE5vZGUuZ2V0TmV4dFNpYmxpbmcoKSA9PT0gbnVsbCA/IGZpcnN0RWxlbWVudCA6IGZpcnN0Tm9kZTtcblxuICAgICAgZm9yIChsZXQgaSA9IGxhc3ROb2RlQ2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgY29uc3QgbGFzdE5vZGVDaGlsZCA9IGxhc3ROb2RlQ2hpbGRyZW5baV07XG5cbiAgICAgICAgaWYgKGxhc3ROb2RlQ2hpbGQuaXMoZmlyc3ROb2RlKSB8fCAkaXNFbGVtZW50Tm9kZShsYXN0Tm9kZUNoaWxkKSAmJiBsYXN0Tm9kZUNoaWxkLmlzUGFyZW50T2YoZmlyc3ROb2RlKSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxhc3ROb2RlQ2hpbGQuaXNBdHRhY2hlZCgpKSB7XG4gICAgICAgICAgaWYgKCFzZWxlY3RlZE5vZGVzU2V0LmhhcyhsYXN0Tm9kZUNoaWxkKSB8fCBsYXN0Tm9kZUNoaWxkLmlzKGxhc3RFbGVtZW50Q2hpbGQpKSB7XG4gICAgICAgICAgICBpZiAoIWZpcnN0QW5kTGFzdEVsZW1lbnRzQXJlRXF1YWwpIHtcbiAgICAgICAgICAgICAgaW5zZXJ0aW9uVGFyZ2V0Lmluc2VydEFmdGVyKGxhc3ROb2RlQ2hpbGQsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGFzdE5vZGVDaGlsZC5yZW1vdmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFmaXJzdEFuZExhc3RFbGVtZW50c0FyZUVxdWFsKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgYWxyZWFkeSBtb3ZlZCBvdXQgYWxsIHRoZSBub2RlcyBvZiB0aGVcbiAgICAgICAgLy8gbGFzdCBwYXJlbnQsIGFuZCBpZiBzbywgdHJhdmVyc2UgdGhlIHBhcmVudCB0cmVlIGFuZCBtYXJrXG4gICAgICAgIC8vIHRoZW0gYWxsIGFzIGJlaW5nIGFibGUgdG8gZGVsZXRlZCB0b28uXG4gICAgICAgIGxldCBwYXJlbnQgPSBsYXN0RWxlbWVudDtcbiAgICAgICAgbGV0IGxhc3RSZW1vdmVkUGFyZW50ID0gbnVsbDtcblxuICAgICAgICB3aGlsZSAocGFyZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBwYXJlbnQuZ2V0Q2hpbGRyZW4oKTtcbiAgICAgICAgICBjb25zdCBjaGlsZHJlbkxlbmd0aCA9IGNoaWxkcmVuLmxlbmd0aDtcblxuICAgICAgICAgIGlmIChjaGlsZHJlbkxlbmd0aCA9PT0gMCB8fCBjaGlsZHJlbltjaGlsZHJlbkxlbmd0aCAtIDFdLmlzKGxhc3RSZW1vdmVkUGFyZW50KSkge1xuICAgICAgICAgICAgbWFya2VkTm9kZUtleXNGb3JLZWVwLmRlbGV0ZShwYXJlbnQuX19rZXkpO1xuICAgICAgICAgICAgbGFzdFJlbW92ZWRQYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcGFyZW50ID0gcGFyZW50LmdldFBhcmVudCgpO1xuICAgICAgICB9XG4gICAgICB9IC8vIEVuc3VyZSB3ZSBkbyBzcGxpY2luZyBhZnRlciBtb3Zpbmcgb2Ygbm9kZXMsIGFzIHNwbGljaW5nXG4gICAgICAvLyBjYW4gaGF2ZSBzaWRlLWVmZmVjdHMgKGluIHRoZSBjYXNlIG9mIGhhc2h0YWdzKS5cblxuXG4gICAgICBpZiAoIWZpcnN0Tm9kZS5pc1Rva2VuKCkpIHtcbiAgICAgICAgZmlyc3ROb2RlID0gZmlyc3ROb2RlLnNwbGljZVRleHQoc3RhcnRPZmZzZXQsIGZpcnN0Tm9kZVRleHRMZW5ndGggLSBzdGFydE9mZnNldCwgdGV4dCwgdHJ1ZSk7XG5cbiAgICAgICAgaWYgKGZpcnN0Tm9kZS5nZXRUZXh0Q29udGVudCgpID09PSAnJykge1xuICAgICAgICAgIGZpcnN0Tm9kZS5yZW1vdmUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChmaXJzdE5vZGUuaXNDb21wb3NpbmcoKSAmJiB0aGlzLmFuY2hvci50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAvLyBXaGVuIGNvbXBvc2luZywgd2UgbmVlZCB0byBhZGp1c3QgdGhlIGFuY2hvciBvZmZzZXQgc28gdGhhdFxuICAgICAgICAgIC8vIHdlIGNvcnJlY3RseSByZXBsYWNlIHRoYXQgcmlnaHQgcmFuZ2UuXG4gICAgICAgICAgdGhpcy5hbmNob3Iub2Zmc2V0IC09IHRleHQubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHN0YXJ0T2Zmc2V0ID09PSBmaXJzdE5vZGVUZXh0TGVuZ3RoKSB7XG4gICAgICAgIGZpcnN0Tm9kZS5zZWxlY3QoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHRleHROb2RlID0gJGNyZWF0ZVRleHROb2RlKHRleHQpO1xuICAgICAgICB0ZXh0Tm9kZS5zZWxlY3QoKTtcbiAgICAgICAgZmlyc3ROb2RlLnJlcGxhY2UodGV4dE5vZGUpO1xuICAgICAgfSAvLyBSZW1vdmUgYWxsIHNlbGVjdGVkIG5vZGVzIHRoYXQgaGF2ZW4ndCBhbHJlYWR5IGJlZW4gcmVtb3ZlZC5cblxuXG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNlbGVjdGVkTm9kZXNMZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzZWxlY3RlZE5vZGUgPSBzZWxlY3RlZE5vZGVzW2ldO1xuICAgICAgICBjb25zdCBrZXkgPSBzZWxlY3RlZE5vZGUuX19rZXk7XG5cbiAgICAgICAgaWYgKCFtYXJrZWROb2RlS2V5c0ZvcktlZXAuaGFzKGtleSkpIHtcbiAgICAgICAgICBzZWxlY3RlZE5vZGUucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZW1vdmVUZXh0KCkge1xuICAgIHRoaXMuaW5zZXJ0VGV4dCgnJyk7XG4gIH1cblxuICBmb3JtYXRUZXh0KGZvcm1hdFR5cGUpIHtcbiAgICBpZiAodGhpcy5pc0NvbGxhcHNlZCgpKSB7XG4gICAgICB0aGlzLnRvZ2dsZUZvcm1hdChmb3JtYXRUeXBlKTsgLy8gV2hlbiBjaGFuZ2luZyBmb3JtYXQsIHdlIHNob3VsZCBzdG9wIGNvbXBvc2l0aW9uXG5cbiAgICAgICRzZXRDb21wb3NpdGlvbktleShudWxsKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzZWxlY3RlZE5vZGVzID0gdGhpcy5nZXROb2RlcygpO1xuICAgIGNvbnN0IHNlbGVjdGVkVGV4dE5vZGVzID0gW107XG5cbiAgICBmb3IgKGNvbnN0IHNlbGVjdGVkTm9kZSBvZiBzZWxlY3RlZE5vZGVzKSB7XG4gICAgICBpZiAoJGlzVGV4dE5vZGUoc2VsZWN0ZWROb2RlKSkge1xuICAgICAgICBzZWxlY3RlZFRleHROb2Rlcy5wdXNoKHNlbGVjdGVkTm9kZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc2VsZWN0ZWRUZXh0Tm9kZXNMZW5ndGggPSBzZWxlY3RlZFRleHROb2Rlcy5sZW5ndGg7XG5cbiAgICBpZiAoc2VsZWN0ZWRUZXh0Tm9kZXNMZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMudG9nZ2xlRm9ybWF0KGZvcm1hdFR5cGUpOyAvLyBXaGVuIGNoYW5naW5nIGZvcm1hdCwgd2Ugc2hvdWxkIHN0b3AgY29tcG9zaXRpb25cblxuICAgICAgJHNldENvbXBvc2l0aW9uS2V5KG51bGwpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGFuY2hvciA9IHRoaXMuYW5jaG9yO1xuICAgIGNvbnN0IGZvY3VzID0gdGhpcy5mb2N1cztcbiAgICBjb25zdCBpc0JhY2t3YXJkID0gdGhpcy5pc0JhY2t3YXJkKCk7XG4gICAgY29uc3Qgc3RhcnRQb2ludCA9IGlzQmFja3dhcmQgPyBmb2N1cyA6IGFuY2hvcjtcbiAgICBjb25zdCBlbmRQb2ludCA9IGlzQmFja3dhcmQgPyBhbmNob3IgOiBmb2N1cztcbiAgICBsZXQgZmlyc3RJbmRleCA9IDA7XG4gICAgbGV0IGZpcnN0Tm9kZSA9IHNlbGVjdGVkVGV4dE5vZGVzWzBdO1xuICAgIGxldCBzdGFydE9mZnNldCA9IHN0YXJ0UG9pbnQudHlwZSA9PT0gJ2VsZW1lbnQnID8gMCA6IHN0YXJ0UG9pbnQub2Zmc2V0OyAvLyBJbiBjYXNlIHNlbGVjdGlvbiBzdGFydGVkIGF0IHRoZSBlbmQgb2YgdGV4dCBub2RlIHVzZSBuZXh0IHRleHQgbm9kZVxuXG4gICAgaWYgKHN0YXJ0UG9pbnQudHlwZSA9PT0gJ3RleHQnICYmIHN0YXJ0T2Zmc2V0ID09PSBmaXJzdE5vZGUuZ2V0VGV4dENvbnRlbnRTaXplKCkpIHtcbiAgICAgIGZpcnN0SW5kZXggPSAxO1xuICAgICAgZmlyc3ROb2RlID0gc2VsZWN0ZWRUZXh0Tm9kZXNbMV07XG4gICAgICBzdGFydE9mZnNldCA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGZpcnN0Tm9kZSA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZmlyc3ROZXh0Rm9ybWF0ID0gZmlyc3ROb2RlLmdldEZvcm1hdEZsYWdzKGZvcm1hdFR5cGUsIG51bGwpO1xuICAgIGNvbnN0IGxhc3RJbmRleCA9IHNlbGVjdGVkVGV4dE5vZGVzTGVuZ3RoIC0gMTtcbiAgICBsZXQgbGFzdE5vZGUgPSBzZWxlY3RlZFRleHROb2Rlc1tsYXN0SW5kZXhdO1xuICAgIGNvbnN0IGVuZE9mZnNldCA9IGVuZFBvaW50LnR5cGUgPT09ICd0ZXh0JyA/IGVuZFBvaW50Lm9mZnNldCA6IGxhc3ROb2RlLmdldFRleHRDb250ZW50U2l6ZSgpOyAvLyBTaW5nbGUgbm9kZSBzZWxlY3RlZFxuXG4gICAgaWYgKGZpcnN0Tm9kZS5pcyhsYXN0Tm9kZSkpIHtcbiAgICAgIC8vIE5vIGFjdHVhbCB0ZXh0IGlzIHNlbGVjdGVkLCBzbyBkbyBub3RoaW5nLlxuICAgICAgaWYgKHN0YXJ0T2Zmc2V0ID09PSBlbmRPZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBUaGUgZW50aXJlIG5vZGUgaXMgc2VsZWN0ZWQsIHNvIGp1c3QgZm9ybWF0IGl0XG5cblxuICAgICAgaWYgKHN0YXJ0T2Zmc2V0ID09PSAwICYmIGVuZE9mZnNldCA9PT0gZmlyc3ROb2RlLmdldFRleHRDb250ZW50U2l6ZSgpKSB7XG4gICAgICAgIGZpcnN0Tm9kZS5zZXRGb3JtYXQoZmlyc3ROZXh0Rm9ybWF0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE5vZGUgaXMgcGFydGlhbGx5IHNlbGVjdGVkLCBzbyBzcGxpdCBpdCBpbnRvIHR3byBub2Rlc1xuICAgICAgICAvLyBhZGQgc3R5bGUgdGhlIHNlbGVjdGVkIG9uZS5cbiAgICAgICAgY29uc3Qgc3BsaXROb2RlcyA9IGZpcnN0Tm9kZS5zcGxpdFRleHQoc3RhcnRPZmZzZXQsIGVuZE9mZnNldCk7XG4gICAgICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gc3RhcnRPZmZzZXQgPT09IDAgPyBzcGxpdE5vZGVzWzBdIDogc3BsaXROb2Rlc1sxXTtcbiAgICAgICAgcmVwbGFjZW1lbnQuc2V0Rm9ybWF0KGZpcnN0TmV4dEZvcm1hdCk7IC8vIFVwZGF0ZSBzZWxlY3Rpb24gb25seSBpZiBzdGFydHMvZW5kcyBvbiB0ZXh0IG5vZGVcblxuICAgICAgICBpZiAoc3RhcnRQb2ludC50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICBzdGFydFBvaW50LnNldChyZXBsYWNlbWVudC5fX2tleSwgMCwgJ3RleHQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbmRQb2ludC50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICBlbmRQb2ludC5zZXQocmVwbGFjZW1lbnQuX19rZXksIGVuZE9mZnNldCAtIHN0YXJ0T2Zmc2V0LCAndGV4dCcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZm9ybWF0ID0gZmlyc3ROZXh0Rm9ybWF0O1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gTXVsdGlwbGUgbm9kZXMgc2VsZWN0ZWRcbiAgICAvLyBUaGUgZW50aXJlIGZpcnN0IG5vZGUgaXNuJ3Qgc2VsZWN0ZWQsIHNvIHNwbGl0IGl0XG5cblxuICAgIGlmIChzdGFydE9mZnNldCAhPT0gMCkge1xuICAgICAgWywgZmlyc3ROb2RlXSA9IGZpcnN0Tm9kZS5zcGxpdFRleHQoc3RhcnRPZmZzZXQpO1xuICAgICAgc3RhcnRPZmZzZXQgPSAwO1xuICAgIH1cblxuICAgIGZpcnN0Tm9kZS5zZXRGb3JtYXQoZmlyc3ROZXh0Rm9ybWF0KTtcbiAgICBjb25zdCBsYXN0TmV4dEZvcm1hdCA9IGxhc3ROb2RlLmdldEZvcm1hdEZsYWdzKGZvcm1hdFR5cGUsIGZpcnN0TmV4dEZvcm1hdCk7IC8vIElmIHRoZSBvZmZzZXQgaXMgMCwgaXQgbWVhbnMgbm8gYWN0dWFsIGNoYXJhY3RlcnMgYXJlIHNlbGVjdGVkLFxuICAgIC8vIHNvIHdlIHNraXAgZm9ybWF0dGluZyB0aGUgbGFzdCBub2RlIGFsdG9nZXRoZXIuXG5cbiAgICBpZiAoZW5kT2Zmc2V0ID4gMCkge1xuICAgICAgaWYgKGVuZE9mZnNldCAhPT0gbGFzdE5vZGUuZ2V0VGV4dENvbnRlbnRTaXplKCkpIHtcbiAgICAgICAgW2xhc3ROb2RlXSA9IGxhc3ROb2RlLnNwbGl0VGV4dChlbmRPZmZzZXQpO1xuICAgICAgfVxuXG4gICAgICBsYXN0Tm9kZS5zZXRGb3JtYXQobGFzdE5leHRGb3JtYXQpO1xuICAgIH0gLy8gUHJvY2VzcyBhbGwgdGV4dCBub2RlcyBpbiBiZXR3ZWVuXG5cblxuICAgIGZvciAobGV0IGkgPSBmaXJzdEluZGV4ICsgMTsgaSA8IGxhc3RJbmRleDsgaSsrKSB7XG4gICAgICBjb25zdCB0ZXh0Tm9kZSA9IHNlbGVjdGVkVGV4dE5vZGVzW2ldO1xuXG4gICAgICBpZiAoIXRleHROb2RlLmlzVG9rZW4oKSkge1xuICAgICAgICBjb25zdCBuZXh0Rm9ybWF0ID0gdGV4dE5vZGUuZ2V0Rm9ybWF0RmxhZ3MoZm9ybWF0VHlwZSwgbGFzdE5leHRGb3JtYXQpO1xuICAgICAgICB0ZXh0Tm9kZS5zZXRGb3JtYXQobmV4dEZvcm1hdCk7XG4gICAgICB9XG4gICAgfSAvLyBVcGRhdGUgc2VsZWN0aW9uIG9ubHkgaWYgc3RhcnRzL2VuZHMgb24gdGV4dCBub2RlXG5cblxuICAgIGlmIChzdGFydFBvaW50LnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgc3RhcnRQb2ludC5zZXQoZmlyc3ROb2RlLl9fa2V5LCBzdGFydE9mZnNldCwgJ3RleHQnKTtcbiAgICB9XG5cbiAgICBpZiAoZW5kUG9pbnQudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICBlbmRQb2ludC5zZXQobGFzdE5vZGUuX19rZXksIGVuZE9mZnNldCwgJ3RleHQnKTtcbiAgICB9XG5cbiAgICB0aGlzLmZvcm1hdCA9IGZpcnN0TmV4dEZvcm1hdCB8IGxhc3ROZXh0Rm9ybWF0O1xuICB9XG5cbiAgaW5zZXJ0Tm9kZXMobm9kZXMsIHNlbGVjdFN0YXJ0KSB7XG4gICAgLy8gSWYgdGhlcmUgaXMgYSByYW5nZSBzZWxlY3RlZCByZW1vdmUgdGhlIHRleHQgaW4gaXRcbiAgICBpZiAoIXRoaXMuaXNDb2xsYXBzZWQoKSkge1xuICAgICAgY29uc3Qgc2VsZWN0aW9uRW5kID0gdGhpcy5pc0JhY2t3YXJkKCkgPyB0aGlzLmFuY2hvciA6IHRoaXMuZm9jdXM7XG4gICAgICBjb25zdCBuZXh0U2libGluZyA9IHNlbGVjdGlvbkVuZC5nZXROb2RlKCkuZ2V0TmV4dFNpYmxpbmcoKTtcbiAgICAgIGNvbnN0IG5leHRTaWJsaW5nS2V5ID0gbmV4dFNpYmxpbmcgPyBuZXh0U2libGluZy5nZXRLZXkoKSA6IG51bGw7XG4gICAgICBjb25zdCBwcmV2U2libGluZyA9IHNlbGVjdGlvbkVuZC5nZXROb2RlKCkuZ2V0UHJldmlvdXNTaWJsaW5nKCk7XG4gICAgICBjb25zdCBwcmV2U2libGluZ0tleSA9IHByZXZTaWJsaW5nID8gcHJldlNpYmxpbmcuZ2V0S2V5KCkgOiBudWxsO1xuICAgICAgdGhpcy5yZW1vdmVUZXh0KCk7IC8vIElmIHRoZSBzZWxlY3Rpb24gaGFzIGJlZW4gbW92ZWQgdG8gYW4gYWRqYWNlbnQgaW5saW5lIGVsZW1lbnQsIGNyZWF0ZVxuICAgICAgLy8gYSB0ZW1wb3JhcnkgdGV4dCBub2RlIHRoYXQgd2UgY2FuIGluc2VydCB0aGUgbm9kZXMgYWZ0ZXIuXG5cbiAgICAgIGlmICh0aGlzLmlzQ29sbGFwc2VkKCkgJiYgdGhpcy5mb2N1cy50eXBlID09PSAnZWxlbWVudCcpIHtcbiAgICAgICAgbGV0IHRleHROb2RlO1xuXG4gICAgICAgIGlmICh0aGlzLmZvY3VzLmtleSA9PT0gbmV4dFNpYmxpbmdLZXkgJiYgdGhpcy5mb2N1cy5vZmZzZXQgPT09IDApIHtcbiAgICAgICAgICB0ZXh0Tm9kZSA9ICRjcmVhdGVUZXh0Tm9kZSgpO1xuICAgICAgICAgIHRoaXMuZm9jdXMuZ2V0Tm9kZSgpLmluc2VydEJlZm9yZSh0ZXh0Tm9kZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5mb2N1cy5rZXkgPT09IHByZXZTaWJsaW5nS2V5ICYmIHRoaXMuZm9jdXMub2Zmc2V0ID09PSB0aGlzLmZvY3VzLmdldE5vZGUoKS5nZXRDaGlsZHJlblNpemUoKSkge1xuICAgICAgICAgIHRleHROb2RlID0gJGNyZWF0ZVRleHROb2RlKCk7XG4gICAgICAgICAgdGhpcy5mb2N1cy5nZXROb2RlKCkuaW5zZXJ0QWZ0ZXIodGV4dE5vZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRleHROb2RlKSB7XG4gICAgICAgICAgdGhpcy5mb2N1cy5zZXQodGV4dE5vZGUuX19rZXksIDAsICd0ZXh0Jyk7XG4gICAgICAgICAgdGhpcy5hbmNob3Iuc2V0KHRleHROb2RlLl9fa2V5LCAwLCAndGV4dCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYW5jaG9yID0gdGhpcy5hbmNob3I7XG4gICAgY29uc3QgYW5jaG9yT2Zmc2V0ID0gYW5jaG9yLm9mZnNldDtcbiAgICBjb25zdCBhbmNob3JOb2RlID0gYW5jaG9yLmdldE5vZGUoKTtcbiAgICBsZXQgdGFyZ2V0ID0gYW5jaG9yTm9kZTtcblxuICAgIGlmIChhbmNob3IudHlwZSA9PT0gJ2VsZW1lbnQnKSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gYW5jaG9yLmdldE5vZGUoKTtcbiAgICAgIGNvbnN0IHBsYWNlbWVudE5vZGUgPSBlbGVtZW50LmdldENoaWxkQXRJbmRleChhbmNob3JPZmZzZXQgLSAxKTtcblxuICAgICAgaWYgKHBsYWNlbWVudE5vZGUgPT09IG51bGwpIHtcbiAgICAgICAgdGFyZ2V0ID0gZWxlbWVudDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldCA9IHBsYWNlbWVudE5vZGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc2libGluZ3MgPSBbXTsgLy8gR2V0IGFsbCByZW1haW5pbmcgdGV4dCBub2RlIHNpYmxpbmdzIGluIHRoaXMgZWxlbWVudCBzbyB3ZSBjYW5cbiAgICAvLyBhcHBlbmQgdGhlbSBhZnRlciB0aGUgbGFzdCBub2RlIHdlJ3JlIGluc2VydGluZy5cblxuICAgIGNvbnN0IG5leHRTaWJsaW5ncyA9IGFuY2hvck5vZGUuZ2V0TmV4dFNpYmxpbmdzKCk7XG4gICAgY29uc3QgdG9wTGV2ZWxFbGVtZW50ID0gJGlzUm9vdE9yU2hhZG93Um9vdChhbmNob3JOb2RlKSA/IG51bGwgOiBhbmNob3JOb2RlLmdldFRvcExldmVsRWxlbWVudE9yVGhyb3coKTtcblxuICAgIGlmICgkaXNUZXh0Tm9kZShhbmNob3JOb2RlKSkge1xuICAgICAgY29uc3QgdGV4dENvbnRlbnQgPSBhbmNob3JOb2RlLmdldFRleHRDb250ZW50KCk7XG4gICAgICBjb25zdCB0ZXh0Q29udGVudExlbmd0aCA9IHRleHRDb250ZW50Lmxlbmd0aDtcblxuICAgICAgaWYgKGFuY2hvck9mZnNldCA9PT0gMCAmJiB0ZXh0Q29udGVudExlbmd0aCAhPT0gMCkge1xuICAgICAgICBjb25zdCBwcmV2U2libGluZyA9IGFuY2hvck5vZGUuZ2V0UHJldmlvdXNTaWJsaW5nKCk7XG5cbiAgICAgICAgaWYgKHByZXZTaWJsaW5nICE9PSBudWxsKSB7XG4gICAgICAgICAgdGFyZ2V0ID0gcHJldlNpYmxpbmc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGFyZ2V0ID0gYW5jaG9yTm9kZS5nZXRQYXJlbnRPclRocm93KCk7XG4gICAgICAgIH1cblxuICAgICAgICBzaWJsaW5ncy5wdXNoKGFuY2hvck5vZGUpO1xuICAgICAgfSBlbHNlIGlmIChhbmNob3JPZmZzZXQgPT09IHRleHRDb250ZW50TGVuZ3RoKSB7XG4gICAgICAgIHRhcmdldCA9IGFuY2hvck5vZGU7XG4gICAgICB9IGVsc2UgaWYgKGFuY2hvck5vZGUuaXNUb2tlbigpKSB7XG4gICAgICAgIC8vIERvIG5vdGhpbmcgaWYgd2UncmUgaW5zaWRlIGEgdG9rZW4gbm9kZVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJZiB3ZSBzdGFydGVkIHdpdGggYSByYW5nZSBzZWxlY3RlZCBncmFiIHRoZSBkYW5nbGluZ1RleHQgYWZ0ZXIgdGhlXG4gICAgICAgIC8vIGVuZCBvZiB0aGUgc2VsZWN0aW9uIGFuZCBwdXQgaXQgb24gb3VyIHNpYmxpbmdzIGFycmF5IHNvIHdlIGNhblxuICAgICAgICAvLyBhcHBlbmQgaXQgYWZ0ZXIgdGhlIGxhc3Qgbm9kZSB3ZSdyZSBpbnNlcnRpbmdcbiAgICAgICAgbGV0IGRhbmdsaW5nVGV4dDtcbiAgICAgICAgW3RhcmdldCwgZGFuZ2xpbmdUZXh0XSA9IGFuY2hvck5vZGUuc3BsaXRUZXh0KGFuY2hvck9mZnNldCk7XG4gICAgICAgIHNpYmxpbmdzLnB1c2goZGFuZ2xpbmdUZXh0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBzdGFydGluZ05vZGUgPSB0YXJnZXQ7XG4gICAgc2libGluZ3MucHVzaCguLi5uZXh0U2libGluZ3MpO1xuICAgIGNvbnN0IGZpcnN0Tm9kZSA9IG5vZGVzWzBdO1xuICAgIGxldCBkaWRSZXBsYWNlT3JNZXJnZSA9IGZhbHNlO1xuICAgIGxldCBsYXN0Tm9kZSA9IG51bGw7IC8vIFRpbWUgdG8gaW5zZXJ0IHRoZSBub2RlcyFcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTtcblxuICAgICAgaWYgKCEkaXNSb290T3JTaGFkb3dSb290KHRhcmdldCkgJiYgISRpc0RlY29yYXRvck5vZGUodGFyZ2V0KSAmJiAkaXNFbGVtZW50Tm9kZShub2RlKSAmJiAhbm9kZS5pc0lubGluZSgpKSB7XG4gICAgICAgIC8vIC0tLS0tXG4gICAgICAgIC8vIEhldXJpc3RpY3MgZm9yIHRoZSByZXBsYWNlbWVudCBvciBtZXJnaW5nIG9mIGVsZW1lbnRzXG4gICAgICAgIC8vIC0tLS0tXG4gICAgICAgIC8vIElmIHdlIGhhdmUgYW4gaW5jb21pbmcgZWxlbWVudCBub2RlIGFzIHRoZSBmaXJzdCBub2RlLCB0aGVuIHdlJ2xsIG5lZWRcbiAgICAgICAgLy8gc2VlIGlmIHdlIGNhbiBtZXJnZSBhbnkgZGVzY2VuZGFudCBsZWFmIG5vZGVzIGludG8gb3VyIGV4aXN0aW5nIHRhcmdldC5cbiAgICAgICAgLy8gV2UgY2FuIGRvIHRoaXMgYnkgZmluZGluZyB0aGUgZmlyc3QgZGVzY2VuZGFudCBpbiBvdXIgbm9kZSBhbmQgdGhlbiB3ZSBjYW5cbiAgICAgICAgLy8gcGx1Y2sgaXQgYW5kIGl0cyBwYXJlbnQgKHNpYmxpbmdzIGluY2x1ZGVkKSBvdXQgYW5kIGluc2VydCB0aGVtIGRpcmVjdGx5XG4gICAgICAgIC8vIGludG8gb3VyIHRhcmdldC4gV2Ugb25seSBkbyB0aGlzIGZvciB0aGUgZmlyc3Qgbm9kZSwgYXMgd2UgYXJlIG9ubHlcbiAgICAgICAgLy8gaW50ZXJlc3RlZCBpbiBtZXJnaW5nIHdpdGggdGhlIGFuY2hvciwgd2hpY2ggaXMgb3VyIHRhcmdldC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gSWYgd2UgYXBwbHkgZWl0aGVyIHRoZSByZXBsYWNlbWVudCBvciBtZXJnaW5nIGhldXJpc3RpY3MsIHdlIG5lZWQgdG8gYmVcbiAgICAgICAgLy8gY2FyZWZ1bCB0aGF0IHdlJ3JlIG5vdCB0cnlpbmcgdG8gaW5zZXJ0IGEgbm9uLWVsZW1lbnQgbm9kZSBpbnRvIGEgcm9vdCBub2RlLFxuICAgICAgICAvLyBzbyB3ZSBjaGVjayBpZiB0aGUgdGFyZ2V0J3MgcGFyZW50IGFmdGVyIHRoaXMgbG9naWMgaXMgdGhlIHJvb3Qgbm9kZSBhbmQgaWZcbiAgICAgICAgLy8gc28gd2UgdHJpZ2dlciBhbiBpbnZhcmlhbnQgdG8gZW5zdXJlIHRoaXMgcHJvYmxlbSBpcyBjYXVnaHQgaW4gZGV2ZWxvcG1lbnRcbiAgICAgICAgLy8gYW5kIGZpeGVkIGFjY29yZGluZ2x5LlxuICAgICAgICBpZiAobm9kZS5pcyhmaXJzdE5vZGUpKSB7XG4gICAgICAgICAgaWYgKCRpc0VsZW1lbnROb2RlKHRhcmdldCkgJiYgdGFyZ2V0LmlzRW1wdHkoKSAmJiB0YXJnZXQuY2FuUmVwbGFjZVdpdGgobm9kZSkpIHtcbiAgICAgICAgICAgIHRhcmdldC5yZXBsYWNlKG5vZGUpO1xuICAgICAgICAgICAgdGFyZ2V0ID0gbm9kZTtcbiAgICAgICAgICAgIGRpZFJlcGxhY2VPck1lcmdlID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH0gLy8gV2UgbWF5IGhhdmUgYSBub2RlIHRyZWUgd2hlcmUgdGhlcmUgYXJlIG1hbnkgbGV2ZWxzLCBmb3IgZXhhbXBsZSB3aXRoXG4gICAgICAgICAgLy8gbGlzdHMgYW5kIHRhYmxlcy4gU28gbGV0J3MgZmluZCB0aGUgZmlyc3QgZGVzY2VuZGFudCB0byB0cnkgYW5kIG1lcmdlXG4gICAgICAgICAgLy8gd2l0aC4gU28gaWYgd2UgaGF2ZSB0aGUgdGFyZ2V0OlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gUGFyYWdyYXBoICgxKVxuICAgICAgICAgIC8vICAgVGV4dCAoMilcbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIGFuZCB3ZSBhcmUgdHJ5aW5nIHRvIGluc2VydDpcbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIExpc3ROb2RlICgzKVxuICAgICAgICAgIC8vICAgTGlzdEl0ZW1Ob2RlICg0KVxuICAgICAgICAgIC8vICAgICBUZXh0ICg1KVxuICAgICAgICAgIC8vICAgTGlzdEl0ZW1Ob2RlICg2KVxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gVGhlIHJlc3VsdCB3b3VsZCBiZTpcbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIFBhcmFncmFwaCAoMSlcbiAgICAgICAgICAvLyAgIFRleHQgKDIpXG4gICAgICAgICAgLy8gICBUZXh0ICg1KVxuICAgICAgICAgIC8vXG5cblxuICAgICAgICAgIGNvbnN0IGZpcnN0RGVzY2VuZGFudCA9IG5vZGUuZ2V0Rmlyc3REZXNjZW5kYW50KCk7XG5cbiAgICAgICAgICBpZiAoJGlzTGVhZk5vZGUoZmlyc3REZXNjZW5kYW50KSkge1xuICAgICAgICAgICAgbGV0IGVsZW1lbnQgPSBmaXJzdERlc2NlbmRhbnQuZ2V0UGFyZW50T3JUaHJvdygpO1xuXG4gICAgICAgICAgICB3aGlsZSAoZWxlbWVudC5pc0lubGluZSgpKSB7XG4gICAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LmdldFBhcmVudE9yVGhyb3coKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBlbGVtZW50LmdldENoaWxkcmVuKCk7XG4gICAgICAgICAgICBjb25zdCBjaGlsZHJlbkxlbmd0aCA9IGNoaWxkcmVuLmxlbmd0aDtcblxuICAgICAgICAgICAgaWYgKCRpc0VsZW1lbnROb2RlKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgbGV0IGZpcnN0Q2hpbGQgPSB0YXJnZXQuZ2V0Rmlyc3RDaGlsZCgpO1xuXG4gICAgICAgICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgY2hpbGRyZW5MZW5ndGg7IHMrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5bc107XG5cbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RDaGlsZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgdGFyZ2V0LmFwcGVuZChjaGlsZCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGZpcnN0Q2hpbGQuaW5zZXJ0QWZ0ZXIoY2hpbGQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZpcnN0Q2hpbGQgPSBjaGlsZDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZm9yIChsZXQgcyA9IGNoaWxkcmVuTGVuZ3RoIC0gMTsgcyA+PSAwOyBzLS0pIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQuaW5zZXJ0QWZ0ZXIoY2hpbGRyZW5bc10pO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LmdldFBhcmVudE9yVGhyb3coKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGFzdE5vZGUgPSBjaGlsZHJlbltjaGlsZHJlbkxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgIGRpZFJlcGxhY2VPck1lcmdlID0gdHJ1ZTtcblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQuaXMobm9kZSkpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCRpc1RleHROb2RlKHRhcmdldCkpIHtcbiAgICAgICAgICBpZiAodG9wTGV2ZWxFbGVtZW50ID09PSBudWxsKSB7XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRocm93IEVycm9yKGBpbnNlcnROb2RlOiB0b3BMZXZlbEVsZW1lbnQgaXMgcm9vdCBub2RlYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGFyZ2V0ID0gdG9wTGV2ZWxFbGVtZW50O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGRpZFJlcGxhY2VPck1lcmdlICYmICEkaXNEZWNvcmF0b3JOb2RlKG5vZGUpICYmICRpc1Jvb3RPclNoYWRvd1Jvb3QodGFyZ2V0LmdldFBhcmVudCgpKSkge1xuICAgICAgICB7XG4gICAgICAgICAgdGhyb3cgRXJyb3IoYGluc2VydE5vZGVzOiBjYW5ub3QgaW5zZXJ0IGEgbm9uLWVsZW1lbnQgaW50byBhIHJvb3Qgbm9kZWApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGRpZFJlcGxhY2VPck1lcmdlID0gZmFsc2U7XG5cbiAgICAgIGlmICgkaXNFbGVtZW50Tm9kZSh0YXJnZXQpICYmICF0YXJnZXQuaXNJbmxpbmUoKSkge1xuICAgICAgICBsYXN0Tm9kZSA9IG5vZGU7XG5cbiAgICAgICAgaWYgKCRpc0RlY29yYXRvck5vZGUobm9kZSkgJiYgIW5vZGUuaXNJbmxpbmUoKSkge1xuICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5pbnNlcnRBZnRlcihub2RlLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoISRpc0VsZW1lbnROb2RlKG5vZGUpKSB7XG4gICAgICAgICAgY29uc3QgZmlyc3RDaGlsZCA9IHRhcmdldC5nZXRGaXJzdENoaWxkKCk7XG5cbiAgICAgICAgICBpZiAoZmlyc3RDaGlsZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZmlyc3RDaGlsZC5pbnNlcnRCZWZvcmUobm9kZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldC5hcHBlbmQobm9kZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGFyZ2V0ID0gbm9kZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoIW5vZGUuY2FuQmVFbXB0eSgpICYmIG5vZGUuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoJGlzUm9vdE5vZGUodGFyZ2V0KSkge1xuICAgICAgICAgICAgY29uc3QgcGxhY2VtZW50Tm9kZSA9IHRhcmdldC5nZXRDaGlsZEF0SW5kZXgoYW5jaG9yT2Zmc2V0KTtcblxuICAgICAgICAgICAgaWYgKHBsYWNlbWVudE5vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgcGxhY2VtZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0YXJnZXQuYXBwZW5kKG5vZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0YXJnZXQgPSBub2RlO1xuICAgICAgICAgIH0gZWxzZSBpZiAobm9kZS5pc0lubGluZSgpKSB7XG4gICAgICAgICAgICB0YXJnZXQuYXBwZW5kKG5vZGUpO1xuICAgICAgICAgICAgdGFyZ2V0ID0gbm9kZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0Lmluc2VydEFmdGVyKG5vZGUsIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoISRpc0VsZW1lbnROb2RlKG5vZGUpIHx8ICRpc0VsZW1lbnROb2RlKG5vZGUpICYmIG5vZGUuaXNJbmxpbmUoKSB8fCAkaXNEZWNvcmF0b3JOb2RlKHRhcmdldCkgJiYgIXRhcmdldC5pc0lubGluZSgpKSB7XG4gICAgICAgIGxhc3ROb2RlID0gbm9kZTsgLy8gd2hlbiBwYXN0aW5nIHRvcCBsZXZlbCBub2RlIGluIHRoZSBtaWRkbGUgb2YgcGFyYWdyYXBoXG4gICAgICAgIC8vIHdlIG5lZWQgdG8gc3BsaXQgcGFyYWdyYXBoIGluc3RlYWQgb2YgcGxhY2luZyBpdCBpbmxpbmVcblxuICAgICAgICBpZiAoJGlzUmFuZ2VTZWxlY3Rpb24odGhpcykgJiYgJGlzRGVjb3JhdG9yTm9kZShub2RlKSAmJiAoJGlzRWxlbWVudE5vZGUodGFyZ2V0KSB8fCAkaXNUZXh0Tm9kZSh0YXJnZXQpKSAmJiAhbm9kZS5pc0lubGluZSgpKSB7XG4gICAgICAgICAgbGV0IHNwbGl0Tm9kZTtcbiAgICAgICAgICBsZXQgc3BsaXRPZmZzZXQ7XG5cbiAgICAgICAgICBpZiAoJGlzVGV4dE5vZGUodGFyZ2V0KSkge1xuICAgICAgICAgICAgc3BsaXROb2RlID0gdGFyZ2V0LmdldFBhcmVudE9yVGhyb3coKTtcbiAgICAgICAgICAgIGNvbnN0IFt0ZXh0Tm9kZV0gPSB0YXJnZXQuc3BsaXRUZXh0KGFuY2hvck9mZnNldCk7XG4gICAgICAgICAgICBzcGxpdE9mZnNldCA9IHRleHROb2RlLmdldEluZGV4V2l0aGluUGFyZW50KCkgKyAxO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzcGxpdE5vZGUgPSB0YXJnZXQ7XG4gICAgICAgICAgICBzcGxpdE9mZnNldCA9IGFuY2hvck9mZnNldDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBbLCByaWdodFRyZWVdID0gJHNwbGl0Tm9kZShzcGxpdE5vZGUsIHNwbGl0T2Zmc2V0KTtcbiAgICAgICAgICB0YXJnZXQgPSByaWdodFRyZWUuaW5zZXJ0QmVmb3JlKG5vZGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5pbnNlcnRBZnRlcihub2RlLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG5leHRUYXJnZXQgPSB0YXJnZXQuZ2V0UGFyZW50T3JUaHJvdygpOyAvLyBpZiB3ZSdyZSBpbnNlcnRpbmcgYW4gRWxlbWVudCBhZnRlciBhIExpbmVCcmVhaywgd2Ugd2FudCB0byBtb3ZlIHRoZSB0YXJnZXQgdG8gdGhlIHBhcmVudFxuICAgICAgICAvLyBhbmQgcmVtb3ZlIHRoZSBMaW5lQnJlYWsgc28gd2UgZG9uJ3QgaGF2ZSBlbXB0eSBzcGFjZS5cblxuICAgICAgICBpZiAoJGlzTGluZUJyZWFrTm9kZSh0YXJnZXQpKSB7XG4gICAgICAgICAgdGFyZ2V0LnJlbW92ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGFyZ2V0ID0gbmV4dFRhcmdldDsgLy8gUmUtdHJ5IGFnYWluIHdpdGggdGhlIHRhcmdldCBiZWluZyB0aGUgcGFyZW50XG5cbiAgICAgICAgaS0tO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc2VsZWN0U3RhcnQpIHtcbiAgICAgIC8vIEhhbmRsZSBtb3Zpbmcgc2VsZWN0aW9uIHRvIHN0YXJ0IGZvciBhbGwgbm9kZXNcbiAgICAgIGlmICgkaXNUZXh0Tm9kZShzdGFydGluZ05vZGUpKSB7XG4gICAgICAgIHN0YXJ0aW5nTm9kZS5zZWxlY3QoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHByZXZTaWJsaW5nID0gdGFyZ2V0LmdldFByZXZpb3VzU2libGluZygpO1xuXG4gICAgICAgIGlmICgkaXNUZXh0Tm9kZShwcmV2U2libGluZykpIHtcbiAgICAgICAgICBwcmV2U2libGluZy5zZWxlY3QoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHRhcmdldC5nZXRJbmRleFdpdGhpblBhcmVudCgpO1xuICAgICAgICAgIHRhcmdldC5nZXRQYXJlbnRPclRocm93KCkuc2VsZWN0KGluZGV4LCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoJGlzRWxlbWVudE5vZGUodGFyZ2V0KSkge1xuICAgICAgLy8gSWYgdGhlIGxhc3Qgbm9kZSB0byBiZSBpbnNlcnRlZCB3YXMgYSB0ZXh0IG5vZGUsXG4gICAgICAvLyB0aGVuIHdlIHNob3VsZCBhdHRlbXB0IHRvIG1vdmUgc2VsZWN0aW9uIHRvIHRoYXQuXG4gICAgICBjb25zdCBsYXN0Q2hpbGQgPSAkaXNUZXh0Tm9kZShsYXN0Tm9kZSkgPyBsYXN0Tm9kZSA6ICRpc0VsZW1lbnROb2RlKGxhc3ROb2RlKSAmJiBsYXN0Tm9kZS5pc0lubGluZSgpID8gbGFzdE5vZGUuZ2V0TGFzdERlc2NlbmRhbnQoKSA6IHRhcmdldC5nZXRMYXN0RGVzY2VuZGFudCgpO1xuXG4gICAgICBpZiAoIXNlbGVjdFN0YXJ0KSB7XG4gICAgICAgIC8vIEhhbmRsZSBtb3Zpbmcgc2VsZWN0aW9uIHRvIGVuZCBmb3IgZWxlbWVudHNcbiAgICAgICAgaWYgKGxhc3RDaGlsZCA9PT0gbnVsbCkge1xuICAgICAgICAgIHRhcmdldC5zZWxlY3QoKTtcbiAgICAgICAgfSBlbHNlIGlmICgkaXNUZXh0Tm9kZShsYXN0Q2hpbGQpKSB7XG4gICAgICAgICAgaWYgKGxhc3RDaGlsZC5nZXRUZXh0Q29udGVudCgpID09PSAnJykge1xuICAgICAgICAgICAgbGFzdENoaWxkLnNlbGVjdFByZXZpb3VzKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxhc3RDaGlsZC5zZWxlY3QoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGFzdENoaWxkLnNlbGVjdE5leHQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoc2libGluZ3MubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsVGFyZ2V0ID0gdGFyZ2V0O1xuXG4gICAgICAgIGZvciAobGV0IGkgPSBzaWJsaW5ncy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIGNvbnN0IHNpYmxpbmcgPSBzaWJsaW5nc1tpXTtcbiAgICAgICAgICBjb25zdCBwcmV2UGFyZW50ID0gc2libGluZy5nZXRQYXJlbnRPclRocm93KCk7XG5cbiAgICAgICAgICBpZiAoJGlzRWxlbWVudE5vZGUodGFyZ2V0KSAmJiAhJGlzQmxvY2tFbGVtZW50Tm9kZShzaWJsaW5nKSAmJiAhKCRpc0RlY29yYXRvck5vZGUoc2libGluZykgJiYgKCAvLyBOb3RlOiBXZSBhcmUgb25seSBsb29raW5nIGZvciBkZWNvcmF0b3JzIHRoYXQgYXJlIGlubGluZSBhbmQgbm90IGlzb2xhdGVkLlxuICAgICAgICAgICAgIXNpYmxpbmcuaXNJbmxpbmUoKSB8fCBzaWJsaW5nLmlzSXNvbGF0ZWQoKSkpKSB7XG4gICAgICAgICAgICBpZiAob3JpZ2luYWxUYXJnZXQgPT09IHRhcmdldCkge1xuICAgICAgICAgICAgICB0YXJnZXQuYXBwZW5kKHNpYmxpbmcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGFyZ2V0Lmluc2VydEJlZm9yZShzaWJsaW5nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGFyZ2V0ID0gc2libGluZztcbiAgICAgICAgICB9IGVsc2UgaWYgKCEkaXNFbGVtZW50Tm9kZSh0YXJnZXQpICYmICEkaXNCbG9ja0VsZW1lbnROb2RlKHNpYmxpbmcpKSB7XG4gICAgICAgICAgICB0YXJnZXQuaW5zZXJ0QmVmb3JlKHNpYmxpbmcpO1xuICAgICAgICAgICAgdGFyZ2V0ID0gc2libGluZztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCRpc0VsZW1lbnROb2RlKHNpYmxpbmcpICYmICFzaWJsaW5nLmNhbkluc2VydEFmdGVyKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSBUaGUgY2xvbmUgbWV0aG9kIGRvZXMgZXhpc3Qgb24gdGhlIGNvbnN0cnVjdG9yLlxuICAgICAgICAgICAgICBjb25zdCBwcmV2UGFyZW50Q2xvbmUgPSBwcmV2UGFyZW50LmNvbnN0cnVjdG9yLmNsb25lKHByZXZQYXJlbnQpO1xuXG4gICAgICAgICAgICAgIGlmICghJGlzRWxlbWVudE5vZGUocHJldlBhcmVudENsb25lKSkge1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKGBpbnNlcnROb2RlczogY2xvbmVkIHBhcmVudCBjbG9uZSBpcyBub3QgYW4gZWxlbWVudGApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHByZXZQYXJlbnRDbG9uZS5hcHBlbmQoc2libGluZyk7XG4gICAgICAgICAgICAgIHRhcmdldC5pbnNlcnRBZnRlcihwcmV2UGFyZW50Q2xvbmUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGFyZ2V0Lmluc2VydEFmdGVyKHNpYmxpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gLy8gQ2hlY2sgaWYgdGhlIHByZXYgcGFyZW50IGlzIGVtcHR5LCBhcyBpdCBtaWdodCBuZWVkXG4gICAgICAgICAgLy8gcmVtb3ZpbmcuXG5cblxuICAgICAgICAgIGlmIChwcmV2UGFyZW50LmlzRW1wdHkoKSAmJiAhcHJldlBhcmVudC5jYW5CZUVtcHR5KCkpIHtcbiAgICAgICAgICAgIHByZXZQYXJlbnQucmVtb3ZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghc2VsZWN0U3RhcnQpIHtcbiAgICAgIC8vIEhhbmRsZSBtb3Zpbmcgc2VsZWN0aW9uIHRvIGVuZCBmb3Igb3RoZXIgbm9kZXNcbiAgICAgIGlmICgkaXNUZXh0Tm9kZSh0YXJnZXQpKSB7XG4gICAgICAgIHRhcmdldC5zZWxlY3QoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0YXJnZXQuZ2V0UGFyZW50T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBpbmRleCA9IHRhcmdldC5nZXRJbmRleFdpdGhpblBhcmVudCgpICsgMTtcbiAgICAgICAgZWxlbWVudC5zZWxlY3QoaW5kZXgsIGluZGV4KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGluc2VydFBhcmFncmFwaCgpIHtcbiAgICBpZiAoIXRoaXMuaXNDb2xsYXBzZWQoKSkge1xuICAgICAgdGhpcy5yZW1vdmVUZXh0KCk7XG4gICAgfVxuXG4gICAgY29uc3QgYW5jaG9yID0gdGhpcy5hbmNob3I7XG4gICAgY29uc3QgYW5jaG9yT2Zmc2V0ID0gYW5jaG9yLm9mZnNldDtcbiAgICBsZXQgY3VycmVudEVsZW1lbnQ7XG4gICAgbGV0IG5vZGVzVG9Nb3ZlID0gW107XG4gICAgbGV0IHNpYmxpbmdzVG9Nb3ZlID0gW107XG5cbiAgICBpZiAoYW5jaG9yLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgY29uc3QgYW5jaG9yTm9kZSA9IGFuY2hvci5nZXROb2RlKCk7XG4gICAgICBub2Rlc1RvTW92ZSA9IGFuY2hvck5vZGUuZ2V0TmV4dFNpYmxpbmdzKCkucmV2ZXJzZSgpO1xuICAgICAgY3VycmVudEVsZW1lbnQgPSBhbmNob3JOb2RlLmdldFBhcmVudE9yVGhyb3coKTtcbiAgICAgIGNvbnN0IGlzSW5saW5lID0gY3VycmVudEVsZW1lbnQuaXNJbmxpbmUoKTtcbiAgICAgIGNvbnN0IHRleHRDb250ZW50TGVuZ3RoID0gaXNJbmxpbmUgPyBjdXJyZW50RWxlbWVudC5nZXRUZXh0Q29udGVudFNpemUoKSA6IGFuY2hvck5vZGUuZ2V0VGV4dENvbnRlbnRTaXplKCk7XG5cbiAgICAgIGlmIChhbmNob3JPZmZzZXQgPT09IDApIHtcbiAgICAgICAgbm9kZXNUb01vdmUucHVzaChhbmNob3JOb2RlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChpc0lubGluZSkge1xuICAgICAgICAgIC8vIEZvciBpbmxpbmUgbm9kZXMsIHdlIHdhbnQgdG8gbW92ZSBhbGwgdGhlIHNpYmxpbmdzIHRvIHRoZSBuZXcgcGFyYWdyYXBoXG4gICAgICAgICAgLy8gaWYgc2VsZWN0aW9uIGlzIGF0IHRoZSBlbmQsIHdlIGp1c3QgbW92ZSB0aGUgc2libGluZ3MuIE90aGVyd2lzZSwgd2UgYWxzb1xuICAgICAgICAgIC8vIHNwbGl0IHRoZSB0ZXh0IG5vZGUgYW5kIGFkZCB0aGF0IGFuZCBpdCdzIHNpYmxpbmdzIGJlbG93LlxuICAgICAgICAgIHNpYmxpbmdzVG9Nb3ZlID0gY3VycmVudEVsZW1lbnQuZ2V0TmV4dFNpYmxpbmdzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYW5jaG9yT2Zmc2V0ICE9PSB0ZXh0Q29udGVudExlbmd0aCkge1xuICAgICAgICAgIGlmICghaXNJbmxpbmUgfHwgYW5jaG9yT2Zmc2V0ICE9PSBhbmNob3JOb2RlLmdldFRleHRDb250ZW50U2l6ZSgpKSB7XG4gICAgICAgICAgICBjb25zdCBbLCBzcGxpdE5vZGVdID0gYW5jaG9yTm9kZS5zcGxpdFRleHQoYW5jaG9yT2Zmc2V0KTtcbiAgICAgICAgICAgIG5vZGVzVG9Nb3ZlLnB1c2goc3BsaXROb2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudEVsZW1lbnQgPSBhbmNob3IuZ2V0Tm9kZSgpO1xuXG4gICAgICBpZiAoJGlzUm9vdE9yU2hhZG93Um9vdChjdXJyZW50RWxlbWVudCkpIHtcbiAgICAgICAgY29uc3QgcGFyYWdyYXBoID0gJGNyZWF0ZVBhcmFncmFwaE5vZGUoKTtcbiAgICAgICAgY29uc3QgY2hpbGQgPSBjdXJyZW50RWxlbWVudC5nZXRDaGlsZEF0SW5kZXgoYW5jaG9yT2Zmc2V0KTtcbiAgICAgICAgcGFyYWdyYXBoLnNlbGVjdCgpO1xuXG4gICAgICAgIGlmIChjaGlsZCAhPT0gbnVsbCkge1xuICAgICAgICAgIGNoaWxkLmluc2VydEJlZm9yZShwYXJhZ3JhcGgsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdXJyZW50RWxlbWVudC5hcHBlbmQocGFyYWdyYXBoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbm9kZXNUb01vdmUgPSBjdXJyZW50RWxlbWVudC5nZXRDaGlsZHJlbigpLnNsaWNlKGFuY2hvck9mZnNldCkucmV2ZXJzZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IG5vZGVzVG9Nb3ZlTGVuZ3RoID0gbm9kZXNUb01vdmUubGVuZ3RoO1xuXG4gICAgaWYgKGFuY2hvck9mZnNldCA9PT0gMCAmJiBub2Rlc1RvTW92ZUxlbmd0aCA+IDAgJiYgY3VycmVudEVsZW1lbnQuaXNJbmxpbmUoKSkge1xuICAgICAgY29uc3QgcGFyZW50ID0gY3VycmVudEVsZW1lbnQuZ2V0UGFyZW50T3JUaHJvdygpO1xuICAgICAgY29uc3QgbmV3RWxlbWVudCA9IHBhcmVudC5pbnNlcnROZXdBZnRlcih0aGlzLCBmYWxzZSk7XG5cbiAgICAgIGlmICgkaXNFbGVtZW50Tm9kZShuZXdFbGVtZW50KSkge1xuICAgICAgICBjb25zdCBjaGlsZHJlbiA9IHBhcmVudC5nZXRDaGlsZHJlbigpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBuZXdFbGVtZW50LmFwcGVuZChjaGlsZHJlbltpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5ld0VsZW1lbnQgPSBjdXJyZW50RWxlbWVudC5pbnNlcnROZXdBZnRlcih0aGlzLCBmYWxzZSk7XG5cbiAgICBpZiAobmV3RWxlbWVudCA9PT0gbnVsbCkge1xuICAgICAgLy8gSGFuZGxlIGFzIGEgbGluZSBicmVhayBpbnNlcnRpb25cbiAgICAgIHRoaXMuaW5zZXJ0TGluZUJyZWFrKCk7XG4gICAgfSBlbHNlIGlmICgkaXNFbGVtZW50Tm9kZShuZXdFbGVtZW50KSkge1xuICAgICAgLy8gSWYgd2UncmUgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgY3VycmVudCBlbGVtZW50LCBtb3ZlIHRoZSBuZXcgZWxlbWVudCB0byBiZSBiZWZvcmUgdGhlIGN1cnJlbnQgZWxlbWVudFxuICAgICAgY29uc3QgY3VycmVudEVsZW1lbnRGaXJzdENoaWxkID0gY3VycmVudEVsZW1lbnQuZ2V0Rmlyc3RDaGlsZCgpO1xuICAgICAgY29uc3QgaXNCZWdpbm5pbmcgPSBhbmNob3JPZmZzZXQgPT09IDAgJiYgKGN1cnJlbnRFbGVtZW50LmlzKGFuY2hvci5nZXROb2RlKCkpIHx8IGN1cnJlbnRFbGVtZW50Rmlyc3RDaGlsZCAmJiBjdXJyZW50RWxlbWVudEZpcnN0Q2hpbGQuaXMoYW5jaG9yLmdldE5vZGUoKSkpO1xuXG4gICAgICBpZiAoaXNCZWdpbm5pbmcgJiYgbm9kZXNUb01vdmVMZW5ndGggPiAwKSB7XG4gICAgICAgIGN1cnJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShuZXdFbGVtZW50KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBsZXQgZmlyc3RDaGlsZCA9IG51bGw7XG4gICAgICBjb25zdCBzaWJsaW5nc1RvTW92ZUxlbmd0aCA9IHNpYmxpbmdzVG9Nb3ZlLmxlbmd0aDtcbiAgICAgIGNvbnN0IHBhcmVudCA9IG5ld0VsZW1lbnQuZ2V0UGFyZW50T3JUaHJvdygpOyAvLyBGb3IgaW5saW5lIGVsZW1lbnRzLCB3ZSBhcHBlbmQgdGhlIHNpYmxpbmdzIHRvIHRoZSBwYXJlbnQuXG5cbiAgICAgIGlmIChzaWJsaW5nc1RvTW92ZUxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaWJsaW5nc1RvTW92ZUxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3Qgc2libGluZ1RvTW92ZSA9IHNpYmxpbmdzVG9Nb3ZlW2ldO1xuICAgICAgICAgIHBhcmVudC5hcHBlbmQoc2libGluZ1RvTW92ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKG5vZGVzVG9Nb3ZlTGVuZ3RoICE9PSAwKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXNUb01vdmVMZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IG5vZGVUb01vdmUgPSBub2Rlc1RvTW92ZVtpXTtcblxuICAgICAgICAgIGlmIChmaXJzdENoaWxkID09PSBudWxsKSB7XG4gICAgICAgICAgICBuZXdFbGVtZW50LmFwcGVuZChub2RlVG9Nb3ZlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmlyc3RDaGlsZC5pbnNlcnRCZWZvcmUobm9kZVRvTW92ZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZmlyc3RDaGlsZCA9IG5vZGVUb01vdmU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFuZXdFbGVtZW50LmNhbkJlRW1wdHkoKSAmJiBuZXdFbGVtZW50LmdldENoaWxkcmVuU2l6ZSgpID09PSAwKSB7XG4gICAgICAgIG5ld0VsZW1lbnQuc2VsZWN0UHJldmlvdXMoKTtcbiAgICAgICAgbmV3RWxlbWVudC5yZW1vdmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld0VsZW1lbnQuc2VsZWN0U3RhcnQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpbnNlcnRMaW5lQnJlYWsoc2VsZWN0U3RhcnQpIHtcbiAgICBjb25zdCBsaW5lQnJlYWtOb2RlID0gJGNyZWF0ZUxpbmVCcmVha05vZGUoKTtcbiAgICBjb25zdCBhbmNob3IgPSB0aGlzLmFuY2hvcjtcblxuICAgIGlmIChhbmNob3IudHlwZSA9PT0gJ2VsZW1lbnQnKSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gYW5jaG9yLmdldE5vZGUoKTtcblxuICAgICAgaWYgKCRpc1Jvb3ROb2RlKGVsZW1lbnQpKSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0UGFyYWdyYXBoKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNlbGVjdFN0YXJ0KSB7XG4gICAgICB0aGlzLmluc2VydE5vZGVzKFtsaW5lQnJlYWtOb2RlXSwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmluc2VydE5vZGVzKFtsaW5lQnJlYWtOb2RlXSkpIHtcbiAgICAgICAgbGluZUJyZWFrTm9kZS5zZWxlY3ROZXh0KDAsIDApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldENoYXJhY3Rlck9mZnNldHMoKSB7XG4gICAgcmV0dXJuIGdldENoYXJhY3Rlck9mZnNldHModGhpcyk7XG4gIH1cblxuICBleHRyYWN0KCkge1xuICAgIGNvbnN0IHNlbGVjdGVkTm9kZXMgPSB0aGlzLmdldE5vZGVzKCk7XG4gICAgY29uc3Qgc2VsZWN0ZWROb2Rlc0xlbmd0aCA9IHNlbGVjdGVkTm9kZXMubGVuZ3RoO1xuICAgIGNvbnN0IGxhc3RJbmRleCA9IHNlbGVjdGVkTm9kZXNMZW5ndGggLSAxO1xuICAgIGNvbnN0IGFuY2hvciA9IHRoaXMuYW5jaG9yO1xuICAgIGNvbnN0IGZvY3VzID0gdGhpcy5mb2N1cztcbiAgICBsZXQgZmlyc3ROb2RlID0gc2VsZWN0ZWROb2Rlc1swXTtcbiAgICBsZXQgbGFzdE5vZGUgPSBzZWxlY3RlZE5vZGVzW2xhc3RJbmRleF07XG4gICAgY29uc3QgW2FuY2hvck9mZnNldCwgZm9jdXNPZmZzZXRdID0gZ2V0Q2hhcmFjdGVyT2Zmc2V0cyh0aGlzKTtcblxuICAgIGlmIChzZWxlY3RlZE5vZGVzTGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfSBlbHNlIGlmIChzZWxlY3RlZE5vZGVzTGVuZ3RoID09PSAxKSB7XG4gICAgICBpZiAoJGlzVGV4dE5vZGUoZmlyc3ROb2RlKSAmJiAhdGhpcy5pc0NvbGxhcHNlZCgpKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0T2Zmc2V0ID0gYW5jaG9yT2Zmc2V0ID4gZm9jdXNPZmZzZXQgPyBmb2N1c09mZnNldCA6IGFuY2hvck9mZnNldDtcbiAgICAgICAgY29uc3QgZW5kT2Zmc2V0ID0gYW5jaG9yT2Zmc2V0ID4gZm9jdXNPZmZzZXQgPyBhbmNob3JPZmZzZXQgOiBmb2N1c09mZnNldDtcbiAgICAgICAgY29uc3Qgc3BsaXROb2RlcyA9IGZpcnN0Tm9kZS5zcGxpdFRleHQoc3RhcnRPZmZzZXQsIGVuZE9mZnNldCk7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBzdGFydE9mZnNldCA9PT0gMCA/IHNwbGl0Tm9kZXNbMF0gOiBzcGxpdE5vZGVzWzFdO1xuICAgICAgICByZXR1cm4gbm9kZSAhPSBudWxsID8gW25vZGVdIDogW107XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbZmlyc3ROb2RlXTtcbiAgICB9XG5cbiAgICBjb25zdCBpc0JlZm9yZSA9IGFuY2hvci5pc0JlZm9yZShmb2N1cyk7XG5cbiAgICBpZiAoJGlzVGV4dE5vZGUoZmlyc3ROb2RlKSkge1xuICAgICAgY29uc3Qgc3RhcnRPZmZzZXQgPSBpc0JlZm9yZSA/IGFuY2hvck9mZnNldCA6IGZvY3VzT2Zmc2V0O1xuXG4gICAgICBpZiAoc3RhcnRPZmZzZXQgPT09IGZpcnN0Tm9kZS5nZXRUZXh0Q29udGVudFNpemUoKSkge1xuICAgICAgICBzZWxlY3RlZE5vZGVzLnNoaWZ0KCk7XG4gICAgICB9IGVsc2UgaWYgKHN0YXJ0T2Zmc2V0ICE9PSAwKSB7XG4gICAgICAgIFssIGZpcnN0Tm9kZV0gPSBmaXJzdE5vZGUuc3BsaXRUZXh0KHN0YXJ0T2Zmc2V0KTtcbiAgICAgICAgc2VsZWN0ZWROb2Rlc1swXSA9IGZpcnN0Tm9kZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoJGlzVGV4dE5vZGUobGFzdE5vZGUpKSB7XG4gICAgICBjb25zdCBsYXN0Tm9kZVRleHQgPSBsYXN0Tm9kZS5nZXRUZXh0Q29udGVudCgpO1xuICAgICAgY29uc3QgbGFzdE5vZGVUZXh0TGVuZ3RoID0gbGFzdE5vZGVUZXh0Lmxlbmd0aDtcbiAgICAgIGNvbnN0IGVuZE9mZnNldCA9IGlzQmVmb3JlID8gZm9jdXNPZmZzZXQgOiBhbmNob3JPZmZzZXQ7XG5cbiAgICAgIGlmIChlbmRPZmZzZXQgPT09IDApIHtcbiAgICAgICAgc2VsZWN0ZWROb2Rlcy5wb3AoKTtcbiAgICAgIH0gZWxzZSBpZiAoZW5kT2Zmc2V0ICE9PSBsYXN0Tm9kZVRleHRMZW5ndGgpIHtcbiAgICAgICAgW2xhc3ROb2RlXSA9IGxhc3ROb2RlLnNwbGl0VGV4dChlbmRPZmZzZXQpO1xuICAgICAgICBzZWxlY3RlZE5vZGVzW2xhc3RJbmRleF0gPSBsYXN0Tm9kZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZWN0ZWROb2RlcztcbiAgfVxuXG4gIG1vZGlmeShhbHRlciwgaXNCYWNrd2FyZCwgZ3JhbnVsYXJpdHkpIHtcbiAgICBjb25zdCBmb2N1cyA9IHRoaXMuZm9jdXM7XG4gICAgY29uc3QgYW5jaG9yID0gdGhpcy5hbmNob3I7XG4gICAgY29uc3QgY29sbGFwc2UgPSBhbHRlciA9PT0gJ21vdmUnOyAvLyBIYW5kbGUgdGhlIHNlbGVjdGlvbiBtb3ZlbWVudCBhcm91bmQgZGVjb3JhdG9ycy5cblxuICAgIGNvbnN0IHBvc3NpYmxlTm9kZSA9ICRnZXRBZGphY2VudE5vZGUoZm9jdXMsIGlzQmFja3dhcmQpO1xuXG4gICAgaWYgKCRpc0RlY29yYXRvck5vZGUocG9zc2libGVOb2RlKSAmJiAhcG9zc2libGVOb2RlLmlzSXNvbGF0ZWQoKSkge1xuICAgICAgLy8gTWFrZSBpdCBwb3NzaWJsZSB0byBtb3ZlIHNlbGVjdGlvbiBmcm9tIHJhbmdlIHNlbGVjdGlvbiB0b1xuICAgICAgLy8gbm9kZSBzZWxlY3Rpb24gb24gdGhlIG5vZGUuXG4gICAgICBpZiAoY29sbGFwc2UgJiYgcG9zc2libGVOb2RlLmlzS2V5Ym9hcmRTZWxlY3RhYmxlKCkpIHtcbiAgICAgICAgY29uc3Qgbm9kZVNlbGVjdGlvbiA9ICRjcmVhdGVOb2RlU2VsZWN0aW9uKCk7XG4gICAgICAgIG5vZGVTZWxlY3Rpb24uYWRkKHBvc3NpYmxlTm9kZS5fX2tleSk7XG4gICAgICAgICRzZXRTZWxlY3Rpb24obm9kZVNlbGVjdGlvbik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc2libGluZyA9IGlzQmFja3dhcmQgPyBwb3NzaWJsZU5vZGUuZ2V0UHJldmlvdXNTaWJsaW5nKCkgOiBwb3NzaWJsZU5vZGUuZ2V0TmV4dFNpYmxpbmcoKTtcblxuICAgICAgaWYgKCEkaXNUZXh0Tm9kZShzaWJsaW5nKSkge1xuICAgICAgICBjb25zdCBwYXJlbnQgPSBwb3NzaWJsZU5vZGUuZ2V0UGFyZW50T3JUaHJvdygpO1xuICAgICAgICBsZXQgb2Zmc2V0O1xuICAgICAgICBsZXQgZWxlbWVudEtleTtcblxuICAgICAgICBpZiAoJGlzRWxlbWVudE5vZGUoc2libGluZykpIHtcbiAgICAgICAgICBlbGVtZW50S2V5ID0gc2libGluZy5fX2tleTtcbiAgICAgICAgICBvZmZzZXQgPSBpc0JhY2t3YXJkID8gc2libGluZy5nZXRDaGlsZHJlblNpemUoKSA6IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb2Zmc2V0ID0gcG9zc2libGVOb2RlLmdldEluZGV4V2l0aGluUGFyZW50KCk7XG4gICAgICAgICAgZWxlbWVudEtleSA9IHBhcmVudC5fX2tleTtcblxuICAgICAgICAgIGlmICghaXNCYWNrd2FyZCkge1xuICAgICAgICAgICAgb2Zmc2V0Kys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9jdXMuc2V0KGVsZW1lbnRLZXksIG9mZnNldCwgJ2VsZW1lbnQnKTtcblxuICAgICAgICBpZiAoY29sbGFwc2UpIHtcbiAgICAgICAgICBhbmNob3Iuc2V0KGVsZW1lbnRLZXksIG9mZnNldCwgJ2VsZW1lbnQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNpYmxpbmdLZXkgPSBzaWJsaW5nLl9fa2V5O1xuICAgICAgICBjb25zdCBvZmZzZXQgPSBpc0JhY2t3YXJkID8gc2libGluZy5nZXRUZXh0Q29udGVudCgpLmxlbmd0aCA6IDA7XG4gICAgICAgIGZvY3VzLnNldChzaWJsaW5nS2V5LCBvZmZzZXQsICd0ZXh0Jyk7XG5cbiAgICAgICAgaWYgKGNvbGxhcHNlKSB7XG4gICAgICAgICAgYW5jaG9yLnNldChzaWJsaW5nS2V5LCBvZmZzZXQsICd0ZXh0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZWRpdG9yID0gZ2V0QWN0aXZlRWRpdG9yKCk7XG4gICAgY29uc3QgZG9tU2VsZWN0aW9uID0gZ2V0RE9NU2VsZWN0aW9uKGVkaXRvci5fd2luZG93KTtcblxuICAgIGlmICghZG9tU2VsZWN0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYmxvY2tDdXJzb3JFbGVtZW50ID0gZWRpdG9yLl9ibG9ja0N1cnNvckVsZW1lbnQ7XG4gICAgY29uc3Qgcm9vdEVsZW1lbnQgPSBlZGl0b3IuX3Jvb3RFbGVtZW50OyAvLyBSZW1vdmUgdGhlIGJsb2NrIGN1cnNvciBlbGVtZW50IGlmIGl0IGV4aXN0cy4gVGhpcyB3aWxsIGVuc3VyZSBzZWxlY3Rpb25cbiAgICAvLyB3b3JrcyBhcyBpbnRlbmRlZC4gSWYgd2UgbGVhdmUgaXQgaW4gdGhlIERPTSBhbGwgc29ydHMgb2Ygc3RyYW5nZSBidWdzXG4gICAgLy8gb2NjdXIuIDovXG5cbiAgICBpZiAocm9vdEVsZW1lbnQgIT09IG51bGwgJiYgYmxvY2tDdXJzb3JFbGVtZW50ICE9PSBudWxsICYmICRpc0VsZW1lbnROb2RlKHBvc3NpYmxlTm9kZSkgJiYgIXBvc3NpYmxlTm9kZS5pc0lubGluZSgpICYmICFwb3NzaWJsZU5vZGUuY2FuQmVFbXB0eSgpKSB7XG4gICAgICByZW1vdmVET01CbG9ja0N1cnNvckVsZW1lbnQoYmxvY2tDdXJzb3JFbGVtZW50LCBlZGl0b3IsIHJvb3RFbGVtZW50KTtcbiAgICB9IC8vIFdlIHVzZSB0aGUgRE9NIHNlbGVjdGlvbi5tb2RpZnkgQVBJIGhlcmUgdG8gXCJ0ZWxsXCIgdXMgd2hhdCB0aGUgc2VsZWN0aW9uXG4gICAgLy8gd2lsbCBiZS4gV2UgdGhlbiB1c2UgaXQgdG8gdXBkYXRlIHRoZSBMZXhpY2FsIHNlbGVjdGlvbiBhY2NvcmRpbmdseS4gVGhpc1xuICAgIC8vIGlzIG11Y2ggbW9yZSByZWxpYWJsZSB0aGFuIHdhaXRpbmcgZm9yIGEgYmVmb3JlaW5wdXQgYW5kIHVzaW5nIHRoZSByYW5nZXNcbiAgICAvLyBmcm9tIGdldFRhcmdldFJhbmdlcygpLCBhbmQgaXMgYWxzbyBiZXR0ZXIgdGhhbiB0cnlpbmcgdG8gZG8gaXQgb3Vyc2VsdmVzXG4gICAgLy8gdXNpbmcgSW50bC5TZWdtZW50ZXIgb3Igb3RoZXIgd29ya2Fyb3VuZHMgdGhhdCBzdHJ1Z2dsZSB3aXRoIHdvcmQgc2VnbWVudHNcbiAgICAvLyBhbmQgbGluZSBzZWdtZW50cyAoZXNwZWNpYWxseSB3aXRoIHdvcmQgd3JhcHBpbmcgYW5kIG5vbi1Sb21hbiBsYW5ndWFnZXMpLlxuXG5cbiAgICBtb3ZlTmF0aXZlU2VsZWN0aW9uKGRvbVNlbGVjdGlvbiwgYWx0ZXIsIGlzQmFja3dhcmQgPyAnYmFja3dhcmQnIDogJ2ZvcndhcmQnLCBncmFudWxhcml0eSk7IC8vIEd1YXJkIGFnYWluc3Qgbm8gcmFuZ2VzXG5cbiAgICBpZiAoZG9tU2VsZWN0aW9uLnJhbmdlQ291bnQgPiAwKSB7XG4gICAgICBjb25zdCByYW5nZSA9IGRvbVNlbGVjdGlvbi5nZXRSYW5nZUF0KDApOyAvLyBBcHBseSB0aGUgRE9NIHNlbGVjdGlvbiB0byBvdXIgTGV4aWNhbCBzZWxlY3Rpb24uXG5cbiAgICAgIGNvbnN0IGFuY2hvck5vZGUgPSB0aGlzLmFuY2hvci5nZXROb2RlKCk7XG4gICAgICBjb25zdCByb290ID0gJGlzUm9vdE5vZGUoYW5jaG9yTm9kZSkgPyBhbmNob3JOb2RlIDogJGdldE5lYXJlc3RSb290T3JTaGFkb3dSb290KGFuY2hvck5vZGUpO1xuICAgICAgdGhpcy5hcHBseURPTVJhbmdlKHJhbmdlKTtcbiAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuXG4gICAgICBpZiAoIWNvbGxhcHNlKSB7XG4gICAgICAgIC8vIFZhbGlkYXRlIHNlbGVjdGlvbjsgbWFrZSBzdXJlIHRoYXQgdGhlIG5ldyBleHRlbmRlZCBzZWxlY3Rpb24gcmVzcGVjdHMgc2hhZG93IHJvb3RzXG4gICAgICAgIGNvbnN0IG5vZGVzID0gdGhpcy5nZXROb2RlcygpO1xuICAgICAgICBjb25zdCB2YWxpZE5vZGVzID0gW107XG4gICAgICAgIGxldCBzaHJpbmtTZWxlY3Rpb24gPSBmYWxzZTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgbmV4dE5vZGUgPSBub2Rlc1tpXTtcblxuICAgICAgICAgIGlmICgkaGFzQW5jZXN0b3IobmV4dE5vZGUsIHJvb3QpKSB7XG4gICAgICAgICAgICB2YWxpZE5vZGVzLnB1c2gobmV4dE5vZGUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzaHJpbmtTZWxlY3Rpb24gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzaHJpbmtTZWxlY3Rpb24gJiYgdmFsaWROb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gdmFsaWROb2RlcyBsZW5ndGggY2hlY2sgaXMgYSBzYWZlZ3VhcmQgYWdhaW5zdCBhbiBpbnZhbGlkIHNlbGVjdGlvbjsgYXMgZ2V0Tm9kZXMoKVxuICAgICAgICAgIC8vIHdpbGwgcmV0dXJuIGFuIGVtcHR5IGFycmF5IGluIHRoaXMgY2FzZVxuICAgICAgICAgIGlmIChpc0JhY2t3YXJkKSB7XG4gICAgICAgICAgICBjb25zdCBmaXJzdFZhbGlkTm9kZSA9IHZhbGlkTm9kZXNbMF07XG5cbiAgICAgICAgICAgIGlmICgkaXNFbGVtZW50Tm9kZShmaXJzdFZhbGlkTm9kZSkpIHtcbiAgICAgICAgICAgICAgZmlyc3RWYWxpZE5vZGUuc2VsZWN0U3RhcnQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGZpcnN0VmFsaWROb2RlLmdldFBhcmVudE9yVGhyb3coKS5zZWxlY3RTdGFydCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBsYXN0VmFsaWROb2RlID0gdmFsaWROb2Rlc1t2YWxpZE5vZGVzLmxlbmd0aCAtIDFdO1xuXG4gICAgICAgICAgICBpZiAoJGlzRWxlbWVudE5vZGUobGFzdFZhbGlkTm9kZSkpIHtcbiAgICAgICAgICAgICAgbGFzdFZhbGlkTm9kZS5zZWxlY3RFbmQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGxhc3RWYWxpZE5vZGUuZ2V0UGFyZW50T3JUaHJvdygpLnNlbGVjdEVuZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSAvLyBCZWNhdXNlIGEgcmFuZ2Ugd29ya3Mgb24gc3RhcnQgYW5kIGVuZCwgd2UgbWlnaHQgbmVlZCB0byBmbGlwXG4gICAgICAgIC8vIHRoZSBhbmNob3IgYW5kIGZvY3VzIHBvaW50cyB0byBtYXRjaCB3aGF0IHRoZSBET00gaGFzLCBub3Qgd2hhdFxuICAgICAgICAvLyB0aGUgcmFuZ2UgaGFzIHNwZWNpZmljYWxseS5cblxuXG4gICAgICAgIGlmIChkb21TZWxlY3Rpb24uYW5jaG9yTm9kZSAhPT0gcmFuZ2Uuc3RhcnRDb250YWluZXIgfHwgZG9tU2VsZWN0aW9uLmFuY2hvck9mZnNldCAhPT0gcmFuZ2Uuc3RhcnRPZmZzZXQpIHtcbiAgICAgICAgICAkc3dhcFBvaW50cyh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGRlbGV0ZUNoYXJhY3Rlcihpc0JhY2t3YXJkKSB7XG4gICAgaWYgKHRoaXMuaXNDb2xsYXBzZWQoKSkge1xuICAgICAgY29uc3QgYW5jaG9yID0gdGhpcy5hbmNob3I7XG4gICAgICBjb25zdCBmb2N1cyA9IHRoaXMuZm9jdXM7XG4gICAgICBsZXQgYW5jaG9yTm9kZSA9IGFuY2hvci5nZXROb2RlKCk7XG5cbiAgICAgIGlmICghaXNCYWNrd2FyZCAmJiAoIC8vIERlbGV0ZSBmb3J3YXJkIGhhbmRsZSBjYXNlXG4gICAgICAgIGFuY2hvci50eXBlID09PSAnZWxlbWVudCcgJiYgJGlzRWxlbWVudE5vZGUoYW5jaG9yTm9kZSkgJiYgYW5jaG9yLm9mZnNldCA9PT0gYW5jaG9yTm9kZS5nZXRDaGlsZHJlblNpemUoKSB8fCBhbmNob3IudHlwZSA9PT0gJ3RleHQnICYmIGFuY2hvci5vZmZzZXQgPT09IGFuY2hvck5vZGUuZ2V0VGV4dENvbnRlbnRTaXplKCkpKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudCA9IGFuY2hvck5vZGUuZ2V0UGFyZW50KCk7XG4gICAgICAgIGNvbnN0IG5leHRTaWJsaW5nID0gYW5jaG9yTm9kZS5nZXROZXh0U2libGluZygpIHx8IChwYXJlbnQgPT09IG51bGwgPyBudWxsIDogcGFyZW50LmdldE5leHRTaWJsaW5nKCkpO1xuXG4gICAgICAgIGlmICgkaXNFbGVtZW50Tm9kZShuZXh0U2libGluZykgJiYgIW5leHRTaWJsaW5nLmNhbkV4dHJhY3RDb250ZW50cygpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9IC8vIEhhbmRsZSB0aGUgZGVsZXRpb24gYXJvdW5kIGRlY29yYXRvcnMuXG5cblxuICAgICAgY29uc3QgcG9zc2libGVOb2RlID0gJGdldEFkamFjZW50Tm9kZShmb2N1cywgaXNCYWNrd2FyZCk7XG5cbiAgICAgIGlmICgkaXNEZWNvcmF0b3JOb2RlKHBvc3NpYmxlTm9kZSkgJiYgIXBvc3NpYmxlTm9kZS5pc0lzb2xhdGVkKCkpIHtcbiAgICAgICAgLy8gTWFrZSBpdCBwb3NzaWJsZSB0byBtb3ZlIHNlbGVjdGlvbiBmcm9tIHJhbmdlIHNlbGVjdGlvbiB0b1xuICAgICAgICAvLyBub2RlIHNlbGVjdGlvbiBvbiB0aGUgbm9kZS5cbiAgICAgICAgaWYgKHBvc3NpYmxlTm9kZS5pc0tleWJvYXJkU2VsZWN0YWJsZSgpICYmICRpc0VsZW1lbnROb2RlKGFuY2hvck5vZGUpICYmIGFuY2hvck5vZGUuZ2V0Q2hpbGRyZW5TaXplKCkgPT09IDApIHtcbiAgICAgICAgICBhbmNob3JOb2RlLnJlbW92ZSgpO1xuICAgICAgICAgIGNvbnN0IG5vZGVTZWxlY3Rpb24gPSAkY3JlYXRlTm9kZVNlbGVjdGlvbigpO1xuICAgICAgICAgIG5vZGVTZWxlY3Rpb24uYWRkKHBvc3NpYmxlTm9kZS5fX2tleSk7XG4gICAgICAgICAgJHNldFNlbGVjdGlvbihub2RlU2VsZWN0aW9uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwb3NzaWJsZU5vZGUucmVtb3ZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMubW9kaWZ5KCdleHRlbmQnLCBpc0JhY2t3YXJkLCAnY2hhcmFjdGVyJyk7XG5cbiAgICAgIGlmICghdGhpcy5pc0NvbGxhcHNlZCgpKSB7XG4gICAgICAgIGNvbnN0IGZvY3VzTm9kZSA9IGZvY3VzLnR5cGUgPT09ICd0ZXh0JyA/IGZvY3VzLmdldE5vZGUoKSA6IG51bGw7XG4gICAgICAgIGFuY2hvck5vZGUgPSBhbmNob3IudHlwZSA9PT0gJ3RleHQnID8gYW5jaG9yLmdldE5vZGUoKSA6IG51bGw7XG5cbiAgICAgICAgaWYgKGZvY3VzTm9kZSAhPT0gbnVsbCAmJiBmb2N1c05vZGUuaXNTZWdtZW50ZWQoKSkge1xuICAgICAgICAgIGNvbnN0IG9mZnNldCA9IGZvY3VzLm9mZnNldDtcbiAgICAgICAgICBjb25zdCB0ZXh0Q29udGVudFNpemUgPSBmb2N1c05vZGUuZ2V0VGV4dENvbnRlbnRTaXplKCk7XG5cbiAgICAgICAgICBpZiAoZm9jdXNOb2RlLmlzKGFuY2hvck5vZGUpIHx8IGlzQmFja3dhcmQgJiYgb2Zmc2V0ICE9PSB0ZXh0Q29udGVudFNpemUgfHwgIWlzQmFja3dhcmQgJiYgb2Zmc2V0ICE9PSAwKSB7XG4gICAgICAgICAgICAkcmVtb3ZlU2VnbWVudChmb2N1c05vZGUsIGlzQmFja3dhcmQsIG9mZnNldCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGFuY2hvck5vZGUgIT09IG51bGwgJiYgYW5jaG9yTm9kZS5pc1NlZ21lbnRlZCgpKSB7XG4gICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gYW5jaG9yLm9mZnNldDtcbiAgICAgICAgICBjb25zdCB0ZXh0Q29udGVudFNpemUgPSBhbmNob3JOb2RlLmdldFRleHRDb250ZW50U2l6ZSgpO1xuXG4gICAgICAgICAgaWYgKGFuY2hvck5vZGUuaXMoZm9jdXNOb2RlKSB8fCBpc0JhY2t3YXJkICYmIG9mZnNldCAhPT0gMCB8fCAhaXNCYWNrd2FyZCAmJiBvZmZzZXQgIT09IHRleHRDb250ZW50U2l6ZSkge1xuICAgICAgICAgICAgJHJlbW92ZVNlZ21lbnQoYW5jaG9yTm9kZSwgaXNCYWNrd2FyZCwgb2Zmc2V0KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAkdXBkYXRlQ2FyZXRTZWxlY3Rpb25Gb3JVbmljb2RlQ2hhcmFjdGVyKHRoaXMsIGlzQmFja3dhcmQpO1xuICAgICAgfSBlbHNlIGlmIChpc0JhY2t3YXJkICYmIGFuY2hvci5vZmZzZXQgPT09IDApIHtcbiAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBhcm91bmQgcmljaCB0ZXh0IG5vZGVzXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBhbmNob3IudHlwZSA9PT0gJ2VsZW1lbnQnID8gYW5jaG9yLmdldE5vZGUoKSA6IGFuY2hvci5nZXROb2RlKCkuZ2V0UGFyZW50T3JUaHJvdygpO1xuXG4gICAgICAgIGlmIChlbGVtZW50LmNvbGxhcHNlQXRTdGFydCh0aGlzKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHdhc0NvbGxhcHNlZCA9IHRoaXMuaXNDb2xsYXBzZWQoKTtcbiAgICB0aGlzLnJlbW92ZVRleHQoKTtcblxuICAgIGlmIChpc0JhY2t3YXJkICYmICF3YXNDb2xsYXBzZWQgJiYgdGhpcy5pc0NvbGxhcHNlZCgpICYmIHRoaXMuYW5jaG9yLnR5cGUgPT09ICdlbGVtZW50JyAmJiB0aGlzLmFuY2hvci5vZmZzZXQgPT09IDApIHtcbiAgICAgIGNvbnN0IGFuY2hvck5vZGUgPSB0aGlzLmFuY2hvci5nZXROb2RlKCk7XG5cbiAgICAgIGlmIChhbmNob3JOb2RlLmlzRW1wdHkoKSAmJiAkaXNSb290Tm9kZShhbmNob3JOb2RlLmdldFBhcmVudCgpKSAmJiBhbmNob3JOb2RlLmdldEluZGV4V2l0aGluUGFyZW50KCkgPT09IDApIHtcbiAgICAgICAgYW5jaG9yTm9kZS5jb2xsYXBzZUF0U3RhcnQodGhpcyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZGVsZXRlTGluZShpc0JhY2t3YXJkKSB7XG4gICAgaWYgKHRoaXMuaXNDb2xsYXBzZWQoKSkge1xuICAgICAgaWYgKHRoaXMuYW5jaG9yLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICB0aGlzLm1vZGlmeSgnZXh0ZW5kJywgaXNCYWNrd2FyZCwgJ2xpbmVib3VuZGFyeScpO1xuICAgICAgfSAvLyBJZiBzZWxlY3Rpb24gaXMgZXh0ZW5kZWQgdG8gY292ZXIgdGV4dCBlZGdlIHRoZW4gZXh0ZW5kIGl0IG9uZSBjaGFyYWN0ZXIgbW9yZVxuICAgICAgLy8gdG8gZGVsZXRlIGl0cyBwYXJlbnQgZWxlbWVudC4gT3RoZXJ3aXNlIHRleHQgY29udGVudCB3aWxsIGJlIGRlbGV0ZWQgYnV0IGVtcHR5XG4gICAgICAvLyBwYXJlbnQgbm9kZSB3aWxsIHJlbWFpblxuXG5cbiAgICAgIGNvbnN0IGVuZFBvaW50ID0gaXNCYWNrd2FyZCA/IHRoaXMuZm9jdXMgOiB0aGlzLmFuY2hvcjtcblxuICAgICAgaWYgKGVuZFBvaW50Lm9mZnNldCA9PT0gMCkge1xuICAgICAgICB0aGlzLm1vZGlmeSgnZXh0ZW5kJywgaXNCYWNrd2FyZCwgJ2NoYXJhY3RlcicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMucmVtb3ZlVGV4dCgpO1xuICB9XG5cbiAgZGVsZXRlV29yZChpc0JhY2t3YXJkKSB7XG4gICAgaWYgKHRoaXMuaXNDb2xsYXBzZWQoKSkge1xuICAgICAgdGhpcy5tb2RpZnkoJ2V4dGVuZCcsIGlzQmFja3dhcmQsICd3b3JkJyk7XG4gICAgfVxuXG4gICAgdGhpcy5yZW1vdmVUZXh0KCk7XG4gIH1cblxufVxuZnVuY3Rpb24gJGlzTm9kZVNlbGVjdGlvbih4KSB7XG4gIHJldHVybiB4IGluc3RhbmNlb2YgTm9kZVNlbGVjdGlvbjtcbn1cblxuZnVuY3Rpb24gZ2V0Q2hhcmFjdGVyT2Zmc2V0KHBvaW50KSB7XG4gIGNvbnN0IG9mZnNldCA9IHBvaW50Lm9mZnNldDtcblxuICBpZiAocG9pbnQudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgcmV0dXJuIG9mZnNldDtcbiAgfVxuXG4gIGNvbnN0IHBhcmVudCA9IHBvaW50LmdldE5vZGUoKTtcbiAgcmV0dXJuIG9mZnNldCA9PT0gcGFyZW50LmdldENoaWxkcmVuU2l6ZSgpID8gcGFyZW50LmdldFRleHRDb250ZW50KCkubGVuZ3RoIDogMDtcbn1cblxuZnVuY3Rpb24gZ2V0Q2hhcmFjdGVyT2Zmc2V0cyhzZWxlY3Rpb24pIHtcbiAgY29uc3QgYW5jaG9yID0gc2VsZWN0aW9uLmFuY2hvcjtcbiAgY29uc3QgZm9jdXMgPSBzZWxlY3Rpb24uZm9jdXM7XG5cbiAgaWYgKGFuY2hvci50eXBlID09PSAnZWxlbWVudCcgJiYgZm9jdXMudHlwZSA9PT0gJ2VsZW1lbnQnICYmIGFuY2hvci5rZXkgPT09IGZvY3VzLmtleSAmJiBhbmNob3Iub2Zmc2V0ID09PSBmb2N1cy5vZmZzZXQpIHtcbiAgICByZXR1cm4gWzAsIDBdO1xuICB9XG5cbiAgcmV0dXJuIFtnZXRDaGFyYWN0ZXJPZmZzZXQoYW5jaG9yKSwgZ2V0Q2hhcmFjdGVyT2Zmc2V0KGZvY3VzKV07XG59XG5cbmZ1bmN0aW9uICRzd2FwUG9pbnRzKHNlbGVjdGlvbikge1xuICBjb25zdCBmb2N1cyA9IHNlbGVjdGlvbi5mb2N1cztcbiAgY29uc3QgYW5jaG9yID0gc2VsZWN0aW9uLmFuY2hvcjtcbiAgY29uc3QgYW5jaG9yS2V5ID0gYW5jaG9yLmtleTtcbiAgY29uc3QgYW5jaG9yT2Zmc2V0ID0gYW5jaG9yLm9mZnNldDtcbiAgY29uc3QgYW5jaG9yVHlwZSA9IGFuY2hvci50eXBlO1xuICAkc2V0UG9pbnRWYWx1ZXMoYW5jaG9yLCBmb2N1cy5rZXksIGZvY3VzLm9mZnNldCwgZm9jdXMudHlwZSk7XG4gICRzZXRQb2ludFZhbHVlcyhmb2N1cywgYW5jaG9yS2V5LCBhbmNob3JPZmZzZXQsIGFuY2hvclR5cGUpO1xuICBzZWxlY3Rpb24uX2NhY2hlZE5vZGVzID0gbnVsbDtcbn1cblxuZnVuY3Rpb24gbW92ZU5hdGl2ZVNlbGVjdGlvbihkb21TZWxlY3Rpb24sIGFsdGVyLCBkaXJlY3Rpb24sIGdyYW51bGFyaXR5KSB7XG4gIC8vIEB0cy1leHBlY3QtZXJyb3IgU2VsZWN0aW9uLm1vZGlmeSgpIG1ldGhvZCBhcHBsaWVzIGEgY2hhbmdlIHRvIHRoZSBjdXJyZW50IHNlbGVjdGlvbiBvciBjdXJzb3IgcG9zaXRpb24sXG4gIC8vIGJ1dCBpcyBzdGlsbCBub24tc3RhbmRhcmQgaW4gc29tZSBicm93c2Vycy5cbiAgZG9tU2VsZWN0aW9uLm1vZGlmeShhbHRlciwgZGlyZWN0aW9uLCBncmFudWxhcml0eSk7XG59XG5cbmZ1bmN0aW9uICR1cGRhdGVDYXJldFNlbGVjdGlvbkZvclVuaWNvZGVDaGFyYWN0ZXIoc2VsZWN0aW9uLCBpc0JhY2t3YXJkKSB7XG4gIGNvbnN0IGFuY2hvciA9IHNlbGVjdGlvbi5hbmNob3I7XG4gIGNvbnN0IGZvY3VzID0gc2VsZWN0aW9uLmZvY3VzO1xuICBjb25zdCBhbmNob3JOb2RlID0gYW5jaG9yLmdldE5vZGUoKTtcbiAgY29uc3QgZm9jdXNOb2RlID0gZm9jdXMuZ2V0Tm9kZSgpO1xuXG4gIGlmIChhbmNob3JOb2RlID09PSBmb2N1c05vZGUgJiYgYW5jaG9yLnR5cGUgPT09ICd0ZXh0JyAmJiBmb2N1cy50eXBlID09PSAndGV4dCcpIHtcbiAgICAvLyBIYW5kbGluZyBvZiBtdWx0aWJ5dGUgY2hhcmFjdGVyc1xuICAgIGNvbnN0IGFuY2hvck9mZnNldCA9IGFuY2hvci5vZmZzZXQ7XG4gICAgY29uc3QgZm9jdXNPZmZzZXQgPSBmb2N1cy5vZmZzZXQ7XG4gICAgY29uc3QgaXNCZWZvcmUgPSBhbmNob3JPZmZzZXQgPCBmb2N1c09mZnNldDtcbiAgICBjb25zdCBzdGFydE9mZnNldCA9IGlzQmVmb3JlID8gYW5jaG9yT2Zmc2V0IDogZm9jdXNPZmZzZXQ7XG4gICAgY29uc3QgZW5kT2Zmc2V0ID0gaXNCZWZvcmUgPyBmb2N1c09mZnNldCA6IGFuY2hvck9mZnNldDtcbiAgICBjb25zdCBjaGFyYWN0ZXJPZmZzZXQgPSBlbmRPZmZzZXQgLSAxO1xuXG4gICAgaWYgKHN0YXJ0T2Zmc2V0ICE9PSBjaGFyYWN0ZXJPZmZzZXQpIHtcbiAgICAgIGNvbnN0IHRleHQgPSBhbmNob3JOb2RlLmdldFRleHRDb250ZW50KCkuc2xpY2Uoc3RhcnRPZmZzZXQsIGVuZE9mZnNldCk7XG5cbiAgICAgIGlmICghZG9lc0NvbnRhaW5HcmFwaGVtZSh0ZXh0KSkge1xuICAgICAgICBpZiAoaXNCYWNrd2FyZCkge1xuICAgICAgICAgIGZvY3VzLm9mZnNldCA9IGNoYXJhY3Rlck9mZnNldDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhbmNob3Iub2Zmc2V0ID0gY2hhcmFjdGVyT2Zmc2V0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uICRyZW1vdmVTZWdtZW50KG5vZGUsIGlzQmFja3dhcmQsIG9mZnNldCkge1xuICBjb25zdCB0ZXh0Tm9kZSA9IG5vZGU7XG4gIGNvbnN0IHRleHRDb250ZW50ID0gdGV4dE5vZGUuZ2V0VGV4dENvbnRlbnQoKTtcbiAgY29uc3Qgc3BsaXQgPSB0ZXh0Q29udGVudC5zcGxpdCgvKD89XFxzKS9nKTtcbiAgY29uc3Qgc3BsaXRMZW5ndGggPSBzcGxpdC5sZW5ndGg7XG4gIGxldCBzZWdtZW50T2Zmc2V0ID0gMDtcbiAgbGV0IHJlc3RvcmVPZmZzZXQgPSAwO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3BsaXRMZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHRleHQgPSBzcGxpdFtpXTtcbiAgICBjb25zdCBpc0xhc3QgPSBpID09PSBzcGxpdExlbmd0aCAtIDE7XG4gICAgcmVzdG9yZU9mZnNldCA9IHNlZ21lbnRPZmZzZXQ7XG4gICAgc2VnbWVudE9mZnNldCArPSB0ZXh0Lmxlbmd0aDtcblxuICAgIGlmIChpc0JhY2t3YXJkICYmIHNlZ21lbnRPZmZzZXQgPT09IG9mZnNldCB8fCBzZWdtZW50T2Zmc2V0ID4gb2Zmc2V0IHx8IGlzTGFzdCkge1xuICAgICAgc3BsaXQuc3BsaWNlKGksIDEpO1xuXG4gICAgICBpZiAoaXNMYXN0KSB7XG4gICAgICAgIHJlc3RvcmVPZmZzZXQgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IG5leHRUZXh0Q29udGVudCA9IHNwbGl0LmpvaW4oJycpLnRyaW0oKTtcblxuICBpZiAobmV4dFRleHRDb250ZW50ID09PSAnJykge1xuICAgIHRleHROb2RlLnJlbW92ZSgpO1xuICB9IGVsc2Uge1xuICAgIHRleHROb2RlLnNldFRleHRDb250ZW50KG5leHRUZXh0Q29udGVudCk7XG4gICAgdGV4dE5vZGUuc2VsZWN0KHJlc3RvcmVPZmZzZXQsIHJlc3RvcmVPZmZzZXQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNob3VsZFJlc29sdmVBbmNlc3RvcihyZXNvbHZlZEVsZW1lbnQsIHJlc29sdmVkT2Zmc2V0LCBsYXN0UG9pbnQpIHtcbiAgY29uc3QgcGFyZW50ID0gcmVzb2x2ZWRFbGVtZW50LmdldFBhcmVudCgpO1xuICByZXR1cm4gbGFzdFBvaW50ID09PSBudWxsIHx8IHBhcmVudCA9PT0gbnVsbCB8fCAhcGFyZW50LmNhbkJlRW1wdHkoKSB8fCBwYXJlbnQgIT09IGxhc3RQb2ludC5nZXROb2RlKCk7XG59XG5cbmZ1bmN0aW9uIGludGVybmFsUmVzb2x2ZVNlbGVjdGlvblBvaW50KGRvbSwgb2Zmc2V0LCBsYXN0UG9pbnQsIGVkaXRvcikge1xuICBsZXQgcmVzb2x2ZWRPZmZzZXQgPSBvZmZzZXQ7XG4gIGxldCByZXNvbHZlZE5vZGU7IC8vIElmIHdlIGhhdmUgc2VsZWN0aW9uIG9uIGFuIGVsZW1lbnQsIHdlIHdpbGxcbiAgLy8gbmVlZCB0byBmaWd1cmUgb3V0ICh1c2luZyB0aGUgb2Zmc2V0KSB3aGF0IHRleHRcbiAgLy8gbm9kZSBzaG91bGQgYmUgc2VsZWN0ZWQuXG5cbiAgaWYgKGRvbS5ub2RlVHlwZSA9PT0gRE9NX0VMRU1FTlRfVFlQRSkge1xuICAgIC8vIFJlc29sdmUgZWxlbWVudCB0byBhIEVsZW1lbnROb2RlLCBvciBUZXh0Tm9kZSwgb3IgbnVsbFxuICAgIGxldCBtb3ZlU2VsZWN0aW9uVG9FbmQgPSBmYWxzZTsgLy8gR2l2ZW4gd2UncmUgbW92aW5nIHNlbGVjdGlvbiB0byBhbm90aGVyIG5vZGUsIHNlbGVjdGlvbiBpc1xuICAgIC8vIGRlZmluaXRlbHkgZGlydHkuXG4gICAgLy8gV2UgdXNlIHRoZSBhbmNob3IgdG8gZmluZCB3aGljaCBjaGlsZCBub2RlIHRvIHNlbGVjdFxuXG4gICAgY29uc3QgY2hpbGROb2RlcyA9IGRvbS5jaGlsZE5vZGVzO1xuICAgIGNvbnN0IGNoaWxkTm9kZXNMZW5ndGggPSBjaGlsZE5vZGVzLmxlbmd0aDsgLy8gSWYgdGhlIGFuY2hvciBpcyB0aGUgc2FtZSBhcyBsZW5ndGgsIHRoZW4gdGhpcyBtZWFucyB3ZVxuICAgIC8vIG5lZWQgdG8gc2VsZWN0IHRoZSB2ZXJ5IGxhc3QgdGV4dCBub2RlLlxuXG4gICAgaWYgKHJlc29sdmVkT2Zmc2V0ID09PSBjaGlsZE5vZGVzTGVuZ3RoKSB7XG4gICAgICBtb3ZlU2VsZWN0aW9uVG9FbmQgPSB0cnVlO1xuICAgICAgcmVzb2x2ZWRPZmZzZXQgPSBjaGlsZE5vZGVzTGVuZ3RoIC0gMTtcbiAgICB9XG5cbiAgICBsZXQgY2hpbGRET00gPSBjaGlsZE5vZGVzW3Jlc29sdmVkT2Zmc2V0XTtcbiAgICBsZXQgaGFzQmxvY2tDdXJzb3IgPSBmYWxzZTtcblxuICAgIGlmIChjaGlsZERPTSA9PT0gZWRpdG9yLl9ibG9ja0N1cnNvckVsZW1lbnQpIHtcbiAgICAgIGNoaWxkRE9NID0gY2hpbGROb2Rlc1tyZXNvbHZlZE9mZnNldCArIDFdO1xuICAgICAgaGFzQmxvY2tDdXJzb3IgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoZWRpdG9yLl9ibG9ja0N1cnNvckVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgIHJlc29sdmVkT2Zmc2V0LS07XG4gICAgfVxuXG4gICAgcmVzb2x2ZWROb2RlID0gZ2V0Tm9kZUZyb21ET00oY2hpbGRET00pO1xuXG4gICAgaWYgKCRpc1RleHROb2RlKHJlc29sdmVkTm9kZSkpIHtcbiAgICAgIHJlc29sdmVkT2Zmc2V0ID0gZ2V0VGV4dE5vZGVPZmZzZXQocmVzb2x2ZWROb2RlLCBtb3ZlU2VsZWN0aW9uVG9FbmQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgcmVzb2x2ZWRFbGVtZW50ID0gZ2V0Tm9kZUZyb21ET00oZG9tKTsgLy8gRW5zdXJlIHJlc29sdmVkRWxlbWVudCBpcyBhY3R1YWxseSBhIGVsZW1lbnQuXG5cbiAgICAgIGlmIChyZXNvbHZlZEVsZW1lbnQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmICgkaXNFbGVtZW50Tm9kZShyZXNvbHZlZEVsZW1lbnQpKSB7XG4gICAgICAgIGxldCBjaGlsZCA9IHJlc29sdmVkRWxlbWVudC5nZXRDaGlsZEF0SW5kZXgocmVzb2x2ZWRPZmZzZXQpO1xuXG4gICAgICAgIGlmICgkaXNFbGVtZW50Tm9kZShjaGlsZCkgJiYgc2hvdWxkUmVzb2x2ZUFuY2VzdG9yKGNoaWxkLCByZXNvbHZlZE9mZnNldCwgbGFzdFBvaW50KSkge1xuICAgICAgICAgIGNvbnN0IGRlc2NlbmRhbnQgPSBtb3ZlU2VsZWN0aW9uVG9FbmQgPyBjaGlsZC5nZXRMYXN0RGVzY2VuZGFudCgpIDogY2hpbGQuZ2V0Rmlyc3REZXNjZW5kYW50KCk7XG5cbiAgICAgICAgICBpZiAoZGVzY2VuZGFudCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmVzb2x2ZWRFbGVtZW50ID0gY2hpbGQ7XG4gICAgICAgICAgICByZXNvbHZlZE9mZnNldCA9IDA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoaWxkID0gZGVzY2VuZGFudDtcbiAgICAgICAgICAgIHJlc29sdmVkRWxlbWVudCA9ICRpc0VsZW1lbnROb2RlKGNoaWxkKSA/IGNoaWxkIDogY2hpbGQuZ2V0UGFyZW50T3JUaHJvdygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgkaXNUZXh0Tm9kZShjaGlsZCkpIHtcbiAgICAgICAgICByZXNvbHZlZE5vZGUgPSBjaGlsZDtcbiAgICAgICAgICByZXNvbHZlZEVsZW1lbnQgPSBudWxsO1xuICAgICAgICAgIHJlc29sdmVkT2Zmc2V0ID0gZ2V0VGV4dE5vZGVPZmZzZXQoY2hpbGQsIG1vdmVTZWxlY3Rpb25Ub0VuZCk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2hpbGQgIT09IHJlc29sdmVkRWxlbWVudCAmJiBtb3ZlU2VsZWN0aW9uVG9FbmQgJiYgIWhhc0Jsb2NrQ3Vyc29yKSB7XG4gICAgICAgICAgcmVzb2x2ZWRPZmZzZXQrKztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSByZXNvbHZlZEVsZW1lbnQuZ2V0SW5kZXhXaXRoaW5QYXJlbnQoKTsgLy8gV2hlbiBzZWxlY3RpbmcgZGVjb3JhdG9ycywgdGhlcmUgY2FuIGJlIHNvbWUgc2VsZWN0aW9uIGlzc3VlcyB3aGVuIHVzaW5nIHJlc29sdmVkT2Zmc2V0LFxuICAgICAgICAvLyBhbmQgaW5zdGVhZCB3ZSBzaG91bGQgYmUgY2hlY2tpbmcgaWYgd2UncmUgdXNpbmcgdGhlIG9mZnNldFxuXG4gICAgICAgIGlmIChvZmZzZXQgPT09IDAgJiYgJGlzRGVjb3JhdG9yTm9kZShyZXNvbHZlZEVsZW1lbnQpICYmIGdldE5vZGVGcm9tRE9NKGRvbSkgPT09IHJlc29sdmVkRWxlbWVudCkge1xuICAgICAgICAgIHJlc29sdmVkT2Zmc2V0ID0gaW5kZXg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZWRPZmZzZXQgPSBpbmRleCArIDE7XG4gICAgICAgIH1cblxuICAgICAgICByZXNvbHZlZEVsZW1lbnQgPSByZXNvbHZlZEVsZW1lbnQuZ2V0UGFyZW50T3JUaHJvdygpO1xuICAgICAgfVxuXG4gICAgICBpZiAoJGlzRWxlbWVudE5vZGUocmVzb2x2ZWRFbGVtZW50KSkge1xuICAgICAgICByZXR1cm4gJGNyZWF0ZVBvaW50KHJlc29sdmVkRWxlbWVudC5fX2tleSwgcmVzb2x2ZWRPZmZzZXQsICdlbGVtZW50Jyk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIFRleHROb2RlIG9yIG51bGxcbiAgICByZXNvbHZlZE5vZGUgPSBnZXROb2RlRnJvbURPTShkb20pO1xuICB9XG5cbiAgaWYgKCEkaXNUZXh0Tm9kZShyZXNvbHZlZE5vZGUpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gJGNyZWF0ZVBvaW50KHJlc29sdmVkTm9kZS5fX2tleSwgcmVzb2x2ZWRPZmZzZXQsICd0ZXh0Jyk7XG59XG5cbmZ1bmN0aW9uIHJlc29sdmVTZWxlY3Rpb25Qb2ludE9uQm91bmRhcnkocG9pbnQsIGlzQmFja3dhcmQsIGlzQ29sbGFwc2VkKSB7XG4gIGNvbnN0IG9mZnNldCA9IHBvaW50Lm9mZnNldDtcbiAgY29uc3Qgbm9kZSA9IHBvaW50LmdldE5vZGUoKTtcblxuICBpZiAob2Zmc2V0ID09PSAwKSB7XG4gICAgY29uc3QgcHJldlNpYmxpbmcgPSBub2RlLmdldFByZXZpb3VzU2libGluZygpO1xuICAgIGNvbnN0IHBhcmVudCA9IG5vZGUuZ2V0UGFyZW50KCk7XG5cbiAgICBpZiAoIWlzQmFja3dhcmQpIHtcbiAgICAgIGlmICgkaXNFbGVtZW50Tm9kZShwcmV2U2libGluZykgJiYgIWlzQ29sbGFwc2VkICYmIHByZXZTaWJsaW5nLmlzSW5saW5lKCkpIHtcbiAgICAgICAgcG9pbnQua2V5ID0gcHJldlNpYmxpbmcuX19rZXk7XG4gICAgICAgIHBvaW50Lm9mZnNldCA9IHByZXZTaWJsaW5nLmdldENoaWxkcmVuU2l6ZSgpOyAvLyBAdHMtZXhwZWN0LWVycm9yOiBpbnRlbnRpb25hbFxuXG4gICAgICAgIHBvaW50LnR5cGUgPSAnZWxlbWVudCc7XG4gICAgICB9IGVsc2UgaWYgKCRpc1RleHROb2RlKHByZXZTaWJsaW5nKSkge1xuICAgICAgICBwb2ludC5rZXkgPSBwcmV2U2libGluZy5fX2tleTtcbiAgICAgICAgcG9pbnQub2Zmc2V0ID0gcHJldlNpYmxpbmcuZ2V0VGV4dENvbnRlbnQoKS5sZW5ndGg7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICgoaXNDb2xsYXBzZWQgfHwgIWlzQmFja3dhcmQpICYmIHByZXZTaWJsaW5nID09PSBudWxsICYmICRpc0VsZW1lbnROb2RlKHBhcmVudCkgJiYgcGFyZW50LmlzSW5saW5lKCkpIHtcbiAgICAgIGNvbnN0IHBhcmVudFNpYmxpbmcgPSBwYXJlbnQuZ2V0UHJldmlvdXNTaWJsaW5nKCk7XG5cbiAgICAgIGlmICgkaXNUZXh0Tm9kZShwYXJlbnRTaWJsaW5nKSkge1xuICAgICAgICBwb2ludC5rZXkgPSBwYXJlbnRTaWJsaW5nLl9fa2V5O1xuICAgICAgICBwb2ludC5vZmZzZXQgPSBwYXJlbnRTaWJsaW5nLmdldFRleHRDb250ZW50KCkubGVuZ3RoO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChvZmZzZXQgPT09IG5vZGUuZ2V0VGV4dENvbnRlbnQoKS5sZW5ndGgpIHtcbiAgICBjb25zdCBuZXh0U2libGluZyA9IG5vZGUuZ2V0TmV4dFNpYmxpbmcoKTtcbiAgICBjb25zdCBwYXJlbnQgPSBub2RlLmdldFBhcmVudCgpO1xuXG4gICAgaWYgKGlzQmFja3dhcmQgJiYgJGlzRWxlbWVudE5vZGUobmV4dFNpYmxpbmcpICYmIG5leHRTaWJsaW5nLmlzSW5saW5lKCkpIHtcbiAgICAgIHBvaW50LmtleSA9IG5leHRTaWJsaW5nLl9fa2V5O1xuICAgICAgcG9pbnQub2Zmc2V0ID0gMDsgLy8gQHRzLWV4cGVjdC1lcnJvcjogaW50ZW50aW9uYWxcblxuICAgICAgcG9pbnQudHlwZSA9ICdlbGVtZW50JztcbiAgICB9IGVsc2UgaWYgKChpc0NvbGxhcHNlZCB8fCBpc0JhY2t3YXJkKSAmJiBuZXh0U2libGluZyA9PT0gbnVsbCAmJiAkaXNFbGVtZW50Tm9kZShwYXJlbnQpICYmIHBhcmVudC5pc0lubGluZSgpICYmICFwYXJlbnQuY2FuSW5zZXJ0VGV4dEFmdGVyKCkpIHtcbiAgICAgIGNvbnN0IHBhcmVudFNpYmxpbmcgPSBwYXJlbnQuZ2V0TmV4dFNpYmxpbmcoKTtcblxuICAgICAgaWYgKCRpc1RleHROb2RlKHBhcmVudFNpYmxpbmcpKSB7XG4gICAgICAgIHBvaW50LmtleSA9IHBhcmVudFNpYmxpbmcuX19rZXk7XG4gICAgICAgIHBvaW50Lm9mZnNldCA9IDA7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVNlbGVjdGlvblBvaW50c0ZvckJvdW5kYXJpZXMoYW5jaG9yLCBmb2N1cywgbGFzdFNlbGVjdGlvbikge1xuICBpZiAoYW5jaG9yLnR5cGUgPT09ICd0ZXh0JyAmJiBmb2N1cy50eXBlID09PSAndGV4dCcpIHtcbiAgICBjb25zdCBpc0JhY2t3YXJkID0gYW5jaG9yLmlzQmVmb3JlKGZvY3VzKTtcbiAgICBjb25zdCBpc0NvbGxhcHNlZCA9IGFuY2hvci5pcyhmb2N1cyk7IC8vIEF0dGVtcHQgdG8gbm9ybWFsaXplIHRoZSBvZmZzZXQgdG8gdGhlIHByZXZpb3VzIHNpYmxpbmcgaWYgd2UncmUgYXQgdGhlXG4gICAgLy8gc3RhcnQgb2YgYSB0ZXh0IG5vZGUgYW5kIHRoZSBzaWJsaW5nIGlzIGEgdGV4dCBub2RlIG9yIGlubGluZSBlbGVtZW50LlxuXG4gICAgcmVzb2x2ZVNlbGVjdGlvblBvaW50T25Cb3VuZGFyeShhbmNob3IsIGlzQmFja3dhcmQsIGlzQ29sbGFwc2VkKTtcbiAgICByZXNvbHZlU2VsZWN0aW9uUG9pbnRPbkJvdW5kYXJ5KGZvY3VzLCAhaXNCYWNrd2FyZCwgaXNDb2xsYXBzZWQpO1xuXG4gICAgaWYgKGlzQ29sbGFwc2VkKSB7XG4gICAgICBmb2N1cy5rZXkgPSBhbmNob3Iua2V5O1xuICAgICAgZm9jdXMub2Zmc2V0ID0gYW5jaG9yLm9mZnNldDtcbiAgICAgIGZvY3VzLnR5cGUgPSBhbmNob3IudHlwZTtcbiAgICB9XG5cbiAgICBjb25zdCBlZGl0b3IgPSBnZXRBY3RpdmVFZGl0b3IoKTtcblxuICAgIGlmIChlZGl0b3IuaXNDb21wb3NpbmcoKSAmJiBlZGl0b3IuX2NvbXBvc2l0aW9uS2V5ICE9PSBhbmNob3Iua2V5ICYmICRpc1JhbmdlU2VsZWN0aW9uKGxhc3RTZWxlY3Rpb24pKSB7XG4gICAgICBjb25zdCBsYXN0QW5jaG9yID0gbGFzdFNlbGVjdGlvbi5hbmNob3I7XG4gICAgICBjb25zdCBsYXN0Rm9jdXMgPSBsYXN0U2VsZWN0aW9uLmZvY3VzO1xuICAgICAgJHNldFBvaW50VmFsdWVzKGFuY2hvciwgbGFzdEFuY2hvci5rZXksIGxhc3RBbmNob3Iub2Zmc2V0LCBsYXN0QW5jaG9yLnR5cGUpO1xuICAgICAgJHNldFBvaW50VmFsdWVzKGZvY3VzLCBsYXN0Rm9jdXMua2V5LCBsYXN0Rm9jdXMub2Zmc2V0LCBsYXN0Rm9jdXMudHlwZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGludGVybmFsUmVzb2x2ZVNlbGVjdGlvblBvaW50cyhhbmNob3JET00sIGFuY2hvck9mZnNldCwgZm9jdXNET00sIGZvY3VzT2Zmc2V0LCBlZGl0b3IsIGxhc3RTZWxlY3Rpb24pIHtcbiAgaWYgKGFuY2hvckRPTSA9PT0gbnVsbCB8fCBmb2N1c0RPTSA9PT0gbnVsbCB8fCAhaXNTZWxlY3Rpb25XaXRoaW5FZGl0b3IoZWRpdG9yLCBhbmNob3JET00sIGZvY3VzRE9NKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgcmVzb2x2ZWRBbmNob3JQb2ludCA9IGludGVybmFsUmVzb2x2ZVNlbGVjdGlvblBvaW50KGFuY2hvckRPTSwgYW5jaG9yT2Zmc2V0LCAkaXNSYW5nZVNlbGVjdGlvbihsYXN0U2VsZWN0aW9uKSA/IGxhc3RTZWxlY3Rpb24uYW5jaG9yIDogbnVsbCwgZWRpdG9yKTtcblxuICBpZiAocmVzb2x2ZWRBbmNob3JQb2ludCA9PT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgcmVzb2x2ZWRGb2N1c1BvaW50ID0gaW50ZXJuYWxSZXNvbHZlU2VsZWN0aW9uUG9pbnQoZm9jdXNET00sIGZvY3VzT2Zmc2V0LCAkaXNSYW5nZVNlbGVjdGlvbihsYXN0U2VsZWN0aW9uKSA/IGxhc3RTZWxlY3Rpb24uZm9jdXMgOiBudWxsLCBlZGl0b3IpO1xuXG4gIGlmIChyZXNvbHZlZEZvY3VzUG9pbnQgPT09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGlmIChyZXNvbHZlZEFuY2hvclBvaW50LnR5cGUgPT09ICdlbGVtZW50JyAmJiByZXNvbHZlZEZvY3VzUG9pbnQudHlwZSA9PT0gJ2VsZW1lbnQnKSB7XG4gICAgY29uc3QgYW5jaG9yTm9kZSA9IGdldE5vZGVGcm9tRE9NKGFuY2hvckRPTSk7XG4gICAgY29uc3QgZm9jdXNOb2RlID0gZ2V0Tm9kZUZyb21ET00oZm9jdXNET00pOyAvLyBFbnN1cmUgaWYgd2UncmUgc2VsZWN0aW5nIHRoZSBjb250ZW50IG9mIGEgZGVjb3JhdG9yIHRoYXQgd2VcbiAgICAvLyByZXR1cm4gbnVsbCBmb3IgdGhpcyBwb2ludCwgYXMgaXQncyBub3QgaW4gdGhlIGNvbnRyb2xsZWQgc2NvcGVcbiAgICAvLyBvZiBMZXhpY2FsLlxuXG4gICAgaWYgKCRpc0RlY29yYXRvck5vZGUoYW5jaG9yTm9kZSkgJiYgJGlzRGVjb3JhdG9yTm9kZShmb2N1c05vZGUpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0gLy8gSGFuZGxlIG5vcm1hbGl6YXRpb24gb2Ygc2VsZWN0aW9uIHdoZW4gaXQgaXMgYXQgdGhlIGJvdW5kYXJpZXMuXG5cblxuICBub3JtYWxpemVTZWxlY3Rpb25Qb2ludHNGb3JCb3VuZGFyaWVzKHJlc29sdmVkQW5jaG9yUG9pbnQsIHJlc29sdmVkRm9jdXNQb2ludCwgbGFzdFNlbGVjdGlvbik7XG4gIHJldHVybiBbcmVzb2x2ZWRBbmNob3JQb2ludCwgcmVzb2x2ZWRGb2N1c1BvaW50XTtcbn1cblxuZnVuY3Rpb24gJGlzQmxvY2tFbGVtZW50Tm9kZShub2RlKSB7XG4gIHJldHVybiAkaXNFbGVtZW50Tm9kZShub2RlKSAmJiAhbm9kZS5pc0lubGluZSgpO1xufSAvLyBUaGlzIGlzIHVzZWQgdG8gbWFrZSBhIHNlbGVjdGlvbiB3aGVuIHRoZSBleGlzdGluZ1xuLy8gc2VsZWN0aW9uIGlzIG51bGwsIGkuZS4gZm9yY2luZyBzZWxlY3Rpb24gb24gdGhlIGVkaXRvclxuLy8gd2hlbiBpdCBjdXJyZW50IGV4aXN0cyBvdXRzaWRlIHRoZSBlZGl0b3IuXG5cblxuZnVuY3Rpb24gaW50ZXJuYWxNYWtlUmFuZ2VTZWxlY3Rpb24oYW5jaG9yS2V5LCBhbmNob3JPZmZzZXQsIGZvY3VzS2V5LCBmb2N1c09mZnNldCwgYW5jaG9yVHlwZSwgZm9jdXNUeXBlKSB7XG4gIGNvbnN0IGVkaXRvclN0YXRlID0gZ2V0QWN0aXZlRWRpdG9yU3RhdGUoKTtcbiAgY29uc3Qgc2VsZWN0aW9uID0gbmV3IFJhbmdlU2VsZWN0aW9uKCRjcmVhdGVQb2ludChhbmNob3JLZXksIGFuY2hvck9mZnNldCwgYW5jaG9yVHlwZSksICRjcmVhdGVQb2ludChmb2N1c0tleSwgZm9jdXNPZmZzZXQsIGZvY3VzVHlwZSksIDAsICcnKTtcbiAgc2VsZWN0aW9uLmRpcnR5ID0gdHJ1ZTtcbiAgZWRpdG9yU3RhdGUuX3NlbGVjdGlvbiA9IHNlbGVjdGlvbjtcbiAgcmV0dXJuIHNlbGVjdGlvbjtcbn1cbmZ1bmN0aW9uICRjcmVhdGVSYW5nZVNlbGVjdGlvbigpIHtcbiAgY29uc3QgYW5jaG9yID0gJGNyZWF0ZVBvaW50KCdyb290JywgMCwgJ2VsZW1lbnQnKTtcbiAgY29uc3QgZm9jdXMgPSAkY3JlYXRlUG9pbnQoJ3Jvb3QnLCAwLCAnZWxlbWVudCcpO1xuICByZXR1cm4gbmV3IFJhbmdlU2VsZWN0aW9uKGFuY2hvciwgZm9jdXMsIDAsICcnKTtcbn1cbmZ1bmN0aW9uICRjcmVhdGVOb2RlU2VsZWN0aW9uKCkge1xuICByZXR1cm4gbmV3IE5vZGVTZWxlY3Rpb24obmV3IFNldCgpKTtcbn1cbmZ1bmN0aW9uIERFUFJFQ0FURURfJGNyZWF0ZUdyaWRTZWxlY3Rpb24oKSB7XG4gIGNvbnN0IGFuY2hvciA9ICRjcmVhdGVQb2ludCgncm9vdCcsIDAsICdlbGVtZW50Jyk7XG4gIGNvbnN0IGZvY3VzID0gJGNyZWF0ZVBvaW50KCdyb290JywgMCwgJ2VsZW1lbnQnKTtcbiAgcmV0dXJuIG5ldyBHcmlkU2VsZWN0aW9uKCdyb290JywgYW5jaG9yLCBmb2N1cyk7XG59XG5mdW5jdGlvbiBpbnRlcm5hbENyZWF0ZVNlbGVjdGlvbihlZGl0b3IpIHtcbiAgY29uc3QgY3VycmVudEVkaXRvclN0YXRlID0gZWRpdG9yLmdldEVkaXRvclN0YXRlKCk7XG4gIGNvbnN0IGxhc3RTZWxlY3Rpb24gPSBjdXJyZW50RWRpdG9yU3RhdGUuX3NlbGVjdGlvbjtcbiAgY29uc3QgZG9tU2VsZWN0aW9uID0gZ2V0RE9NU2VsZWN0aW9uKGVkaXRvci5fd2luZG93KTtcblxuICBpZiAoJGlzTm9kZVNlbGVjdGlvbihsYXN0U2VsZWN0aW9uKSB8fCBERVBSRUNBVEVEXyRpc0dyaWRTZWxlY3Rpb24obGFzdFNlbGVjdGlvbikpIHtcbiAgICByZXR1cm4gbGFzdFNlbGVjdGlvbi5jbG9uZSgpO1xuICB9XG5cbiAgcmV0dXJuIGludGVybmFsQ3JlYXRlUmFuZ2VTZWxlY3Rpb24obGFzdFNlbGVjdGlvbiwgZG9tU2VsZWN0aW9uLCBlZGl0b3IpO1xufVxuZnVuY3Rpb24gaW50ZXJuYWxDcmVhdGVSYW5nZVNlbGVjdGlvbihsYXN0U2VsZWN0aW9uLCBkb21TZWxlY3Rpb24sIGVkaXRvcikge1xuICBjb25zdCB3aW5kb3dPYmogPSBlZGl0b3IuX3dpbmRvdztcblxuICBpZiAod2luZG93T2JqID09PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gLy8gV2hlbiB3ZSBjcmVhdGUgYSBzZWxlY3Rpb24sIHdlIHRyeSB0byB1c2UgdGhlIHByZXZpb3VzXG4gIC8vIHNlbGVjdGlvbiB3aGVyZSBwb3NzaWJsZSwgdW5sZXNzIGFuIGFjdHVhbCB1c2VyIHNlbGVjdGlvblxuICAvLyBjaGFuZ2UgaGFzIG9jY3VycmVkLiBXaGVuIHdlIGRvIG5lZWQgdG8gY3JlYXRlIGEgbmV3IHNlbGVjdGlvblxuICAvLyB3ZSB2YWxpZGF0ZSB3ZSBjYW4gaGF2ZSB0ZXh0IG5vZGVzIGZvciBib3RoIGFuY2hvciBhbmQgZm9jdXNcbiAgLy8gbm9kZXMuIElmIHRoYXQgaG9sZHMgdHJ1ZSwgd2UgdGhlbiByZXR1cm4gdGhhdCBzZWxlY3Rpb25cbiAgLy8gYXMgYSBtdXRhYmxlIG9iamVjdCB0aGF0IHdlIHVzZSBmb3IgdGhlIGVkaXRvciBzdGF0ZSBmb3IgdGhpc1xuICAvLyB1cGRhdGUgY3ljbGUuIElmIGEgc2VsZWN0aW9uIGdldHMgY2hhbmdlZCwgYW5kIHJlcXVpcmVzIGFcbiAgLy8gdXBkYXRlIHRvIG5hdGl2ZSBET00gc2VsZWN0aW9uLCBpdCBnZXRzIG1hcmtlZCBhcyBcImRpcnR5XCIuXG4gIC8vIElmIHRoZSBzZWxlY3Rpb24gY2hhbmdlcywgYnV0IG1hdGNoZXMgd2l0aCB0aGUgZXhpc3RpbmdcbiAgLy8gRE9NIHNlbGVjdGlvbiwgdGhlbiB3ZSBvbmx5IG5lZWQgdG8gc3luYyBpdC4gT3RoZXJ3aXNlLFxuICAvLyB3ZSBnZW5lcmFsbHkgYmFpbCBvdXQgb2YgZG9pbmcgYW4gdXBkYXRlIHRvIHNlbGVjdGlvbiBkdXJpbmdcbiAgLy8gcmVjb25jaWxpYXRpb24gdW5sZXNzIHRoZXJlIGFyZSBkaXJ0eSBub2RlcyB0aGF0IG5lZWRcbiAgLy8gcmVjb25jaWxpbmcuXG5cblxuICBjb25zdCB3aW5kb3dFdmVudCA9IHdpbmRvd09iai5ldmVudDtcbiAgY29uc3QgZXZlbnRUeXBlID0gd2luZG93RXZlbnQgPyB3aW5kb3dFdmVudC50eXBlIDogdW5kZWZpbmVkO1xuICBjb25zdCBpc1NlbGVjdGlvbkNoYW5nZSA9IGV2ZW50VHlwZSA9PT0gJ3NlbGVjdGlvbmNoYW5nZSc7XG4gIGNvbnN0IHVzZURPTVNlbGVjdGlvbiA9ICFnZXRJc1Byb2Nlc3NzaW5nTXV0YXRpb25zKCkgJiYgKGlzU2VsZWN0aW9uQ2hhbmdlIHx8IGV2ZW50VHlwZSA9PT0gJ2JlZm9yZWlucHV0JyB8fCBldmVudFR5cGUgPT09ICdjb21wb3NpdGlvbnN0YXJ0JyB8fCBldmVudFR5cGUgPT09ICdjb21wb3NpdGlvbmVuZCcgfHwgZXZlbnRUeXBlID09PSAnY2xpY2snICYmIHdpbmRvd0V2ZW50ICYmIHdpbmRvd0V2ZW50LmRldGFpbCA9PT0gMyB8fCBldmVudFR5cGUgPT09ICdkcm9wJyB8fCBldmVudFR5cGUgPT09IHVuZGVmaW5lZCk7XG4gIGxldCBhbmNob3JET00sIGZvY3VzRE9NLCBhbmNob3JPZmZzZXQsIGZvY3VzT2Zmc2V0O1xuXG4gIGlmICghJGlzUmFuZ2VTZWxlY3Rpb24obGFzdFNlbGVjdGlvbikgfHwgdXNlRE9NU2VsZWN0aW9uKSB7XG4gICAgaWYgKGRvbVNlbGVjdGlvbiA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgYW5jaG9yRE9NID0gZG9tU2VsZWN0aW9uLmFuY2hvck5vZGU7XG4gICAgZm9jdXNET00gPSBkb21TZWxlY3Rpb24uZm9jdXNOb2RlO1xuICAgIGFuY2hvck9mZnNldCA9IGRvbVNlbGVjdGlvbi5hbmNob3JPZmZzZXQ7XG4gICAgZm9jdXNPZmZzZXQgPSBkb21TZWxlY3Rpb24uZm9jdXNPZmZzZXQ7XG5cbiAgICBpZiAoaXNTZWxlY3Rpb25DaGFuZ2UgJiYgJGlzUmFuZ2VTZWxlY3Rpb24obGFzdFNlbGVjdGlvbikgJiYgIWlzU2VsZWN0aW9uV2l0aGluRWRpdG9yKGVkaXRvciwgYW5jaG9yRE9NLCBmb2N1c0RPTSkpIHtcbiAgICAgIHJldHVybiBsYXN0U2VsZWN0aW9uLmNsb25lKCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBsYXN0U2VsZWN0aW9uLmNsb25lKCk7XG4gIH0gLy8gTGV0J3MgcmVzb2x2ZSB0aGUgdGV4dCBub2RlcyBmcm9tIHRoZSBvZmZzZXRzIGFuZCBET00gbm9kZXMgd2UgaGF2ZSBmcm9tXG4gIC8vIG5hdGl2ZSBzZWxlY3Rpb24uXG5cblxuICBjb25zdCByZXNvbHZlZFNlbGVjdGlvblBvaW50cyA9IGludGVybmFsUmVzb2x2ZVNlbGVjdGlvblBvaW50cyhhbmNob3JET00sIGFuY2hvck9mZnNldCwgZm9jdXNET00sIGZvY3VzT2Zmc2V0LCBlZGl0b3IsIGxhc3RTZWxlY3Rpb24pO1xuXG4gIGlmIChyZXNvbHZlZFNlbGVjdGlvblBvaW50cyA9PT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgW3Jlc29sdmVkQW5jaG9yUG9pbnQsIHJlc29sdmVkRm9jdXNQb2ludF0gPSByZXNvbHZlZFNlbGVjdGlvblBvaW50cztcbiAgcmV0dXJuIG5ldyBSYW5nZVNlbGVjdGlvbihyZXNvbHZlZEFuY2hvclBvaW50LCByZXNvbHZlZEZvY3VzUG9pbnQsICEkaXNSYW5nZVNlbGVjdGlvbihsYXN0U2VsZWN0aW9uKSA/IDAgOiBsYXN0U2VsZWN0aW9uLmZvcm1hdCwgISRpc1JhbmdlU2VsZWN0aW9uKGxhc3RTZWxlY3Rpb24pID8gJycgOiBsYXN0U2VsZWN0aW9uLnN0eWxlKTtcbn1cbmZ1bmN0aW9uICRnZXRTZWxlY3Rpb24oKSB7XG4gIGNvbnN0IGVkaXRvclN0YXRlID0gZ2V0QWN0aXZlRWRpdG9yU3RhdGUoKTtcbiAgcmV0dXJuIGVkaXRvclN0YXRlLl9zZWxlY3Rpb247XG59XG5mdW5jdGlvbiAkZ2V0UHJldmlvdXNTZWxlY3Rpb24oKSB7XG4gIGNvbnN0IGVkaXRvciA9IGdldEFjdGl2ZUVkaXRvcigpO1xuICByZXR1cm4gZWRpdG9yLl9lZGl0b3JTdGF0ZS5fc2VsZWN0aW9uO1xufVxuZnVuY3Rpb24gJHVwZGF0ZUVsZW1lbnRTZWxlY3Rpb25PbkNyZWF0ZURlbGV0ZU5vZGUoc2VsZWN0aW9uLCBwYXJlbnROb2RlLCBub2RlT2Zmc2V0LCB0aW1lcyA9IDEpIHtcbiAgY29uc3QgYW5jaG9yID0gc2VsZWN0aW9uLmFuY2hvcjtcbiAgY29uc3QgZm9jdXMgPSBzZWxlY3Rpb24uZm9jdXM7XG4gIGNvbnN0IGFuY2hvck5vZGUgPSBhbmNob3IuZ2V0Tm9kZSgpO1xuICBjb25zdCBmb2N1c05vZGUgPSBmb2N1cy5nZXROb2RlKCk7XG5cbiAgaWYgKCFwYXJlbnROb2RlLmlzKGFuY2hvck5vZGUpICYmICFwYXJlbnROb2RlLmlzKGZvY3VzTm9kZSkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBwYXJlbnRLZXkgPSBwYXJlbnROb2RlLl9fa2V5OyAvLyBTaW5nbGUgbm9kZS4gV2Ugc2hpZnQgc2VsZWN0aW9uIGJ1dCBuZXZlciByZWRpbWVuc2lvbiBpdFxuXG4gIGlmIChzZWxlY3Rpb24uaXNDb2xsYXBzZWQoKSkge1xuICAgIGNvbnN0IHNlbGVjdGlvbk9mZnNldCA9IGFuY2hvci5vZmZzZXQ7XG5cbiAgICBpZiAobm9kZU9mZnNldCA8PSBzZWxlY3Rpb25PZmZzZXQpIHtcbiAgICAgIGNvbnN0IG5ld1NlbGVjdGlvbk9mZnNldCA9IE1hdGgubWF4KDAsIHNlbGVjdGlvbk9mZnNldCArIHRpbWVzKTtcbiAgICAgIGFuY2hvci5zZXQocGFyZW50S2V5LCBuZXdTZWxlY3Rpb25PZmZzZXQsICdlbGVtZW50Jyk7XG4gICAgICBmb2N1cy5zZXQocGFyZW50S2V5LCBuZXdTZWxlY3Rpb25PZmZzZXQsICdlbGVtZW50Jyk7IC8vIFRoZSBuZXcgc2VsZWN0aW9uIG1pZ2h0IHBvaW50IHRvIHRleHQgbm9kZXMsIHRyeSB0byByZXNvbHZlIHRoZW1cblxuICAgICAgJHVwZGF0ZVNlbGVjdGlvblJlc29sdmVUZXh0Tm9kZXMoc2VsZWN0aW9uKTtcbiAgICB9XG5cbiAgICByZXR1cm47XG4gIH0gLy8gTXVsdGlwbGUgbm9kZXMgc2VsZWN0ZWQuIFdlIHNoaWZ0IG9yIHJlZGltZW5zaW9uIHNlbGVjdGlvblxuXG5cbiAgY29uc3QgaXNCYWNrd2FyZCA9IHNlbGVjdGlvbi5pc0JhY2t3YXJkKCk7XG4gIGNvbnN0IGZpcnN0UG9pbnQgPSBpc0JhY2t3YXJkID8gZm9jdXMgOiBhbmNob3I7XG4gIGNvbnN0IGZpcnN0UG9pbnROb2RlID0gZmlyc3RQb2ludC5nZXROb2RlKCk7XG4gIGNvbnN0IGxhc3RQb2ludCA9IGlzQmFja3dhcmQgPyBhbmNob3IgOiBmb2N1cztcbiAgY29uc3QgbGFzdFBvaW50Tm9kZSA9IGxhc3RQb2ludC5nZXROb2RlKCk7XG5cbiAgaWYgKHBhcmVudE5vZGUuaXMoZmlyc3RQb2ludE5vZGUpKSB7XG4gICAgY29uc3QgZmlyc3RQb2ludE9mZnNldCA9IGZpcnN0UG9pbnQub2Zmc2V0O1xuXG4gICAgaWYgKG5vZGVPZmZzZXQgPD0gZmlyc3RQb2ludE9mZnNldCkge1xuICAgICAgZmlyc3RQb2ludC5zZXQocGFyZW50S2V5LCBNYXRoLm1heCgwLCBmaXJzdFBvaW50T2Zmc2V0ICsgdGltZXMpLCAnZWxlbWVudCcpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChwYXJlbnROb2RlLmlzKGxhc3RQb2ludE5vZGUpKSB7XG4gICAgY29uc3QgbGFzdFBvaW50T2Zmc2V0ID0gbGFzdFBvaW50Lm9mZnNldDtcblxuICAgIGlmIChub2RlT2Zmc2V0IDw9IGxhc3RQb2ludE9mZnNldCkge1xuICAgICAgbGFzdFBvaW50LnNldChwYXJlbnRLZXksIE1hdGgubWF4KDAsIGxhc3RQb2ludE9mZnNldCArIHRpbWVzKSwgJ2VsZW1lbnQnKTtcbiAgICB9XG4gIH0gLy8gVGhlIG5ldyBzZWxlY3Rpb24gbWlnaHQgcG9pbnQgdG8gdGV4dCBub2RlcywgdHJ5IHRvIHJlc29sdmUgdGhlbVxuXG5cbiAgJHVwZGF0ZVNlbGVjdGlvblJlc29sdmVUZXh0Tm9kZXMoc2VsZWN0aW9uKTtcbn1cblxuZnVuY3Rpb24gJHVwZGF0ZVNlbGVjdGlvblJlc29sdmVUZXh0Tm9kZXMoc2VsZWN0aW9uKSB7XG4gIGNvbnN0IGFuY2hvciA9IHNlbGVjdGlvbi5hbmNob3I7XG4gIGNvbnN0IGFuY2hvck9mZnNldCA9IGFuY2hvci5vZmZzZXQ7XG4gIGNvbnN0IGZvY3VzID0gc2VsZWN0aW9uLmZvY3VzO1xuICBjb25zdCBmb2N1c09mZnNldCA9IGZvY3VzLm9mZnNldDtcbiAgY29uc3QgYW5jaG9yTm9kZSA9IGFuY2hvci5nZXROb2RlKCk7XG4gIGNvbnN0IGZvY3VzTm9kZSA9IGZvY3VzLmdldE5vZGUoKTtcblxuICBpZiAoc2VsZWN0aW9uLmlzQ29sbGFwc2VkKCkpIHtcbiAgICBpZiAoISRpc0VsZW1lbnROb2RlKGFuY2hvck5vZGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY2hpbGRTaXplID0gYW5jaG9yTm9kZS5nZXRDaGlsZHJlblNpemUoKTtcbiAgICBjb25zdCBhbmNob3JPZmZzZXRBdEVuZCA9IGFuY2hvck9mZnNldCA+PSBjaGlsZFNpemU7XG4gICAgY29uc3QgY2hpbGQgPSBhbmNob3JPZmZzZXRBdEVuZCA/IGFuY2hvck5vZGUuZ2V0Q2hpbGRBdEluZGV4KGNoaWxkU2l6ZSAtIDEpIDogYW5jaG9yTm9kZS5nZXRDaGlsZEF0SW5kZXgoYW5jaG9yT2Zmc2V0KTtcblxuICAgIGlmICgkaXNUZXh0Tm9kZShjaGlsZCkpIHtcbiAgICAgIGxldCBuZXdPZmZzZXQgPSAwO1xuXG4gICAgICBpZiAoYW5jaG9yT2Zmc2V0QXRFbmQpIHtcbiAgICAgICAgbmV3T2Zmc2V0ID0gY2hpbGQuZ2V0VGV4dENvbnRlbnRTaXplKCk7XG4gICAgICB9XG5cbiAgICAgIGFuY2hvci5zZXQoY2hpbGQuX19rZXksIG5ld09mZnNldCwgJ3RleHQnKTtcbiAgICAgIGZvY3VzLnNldChjaGlsZC5fX2tleSwgbmV3T2Zmc2V0LCAndGV4dCcpO1xuICAgIH1cblxuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICgkaXNFbGVtZW50Tm9kZShhbmNob3JOb2RlKSkge1xuICAgIGNvbnN0IGNoaWxkU2l6ZSA9IGFuY2hvck5vZGUuZ2V0Q2hpbGRyZW5TaXplKCk7XG4gICAgY29uc3QgYW5jaG9yT2Zmc2V0QXRFbmQgPSBhbmNob3JPZmZzZXQgPj0gY2hpbGRTaXplO1xuICAgIGNvbnN0IGNoaWxkID0gYW5jaG9yT2Zmc2V0QXRFbmQgPyBhbmNob3JOb2RlLmdldENoaWxkQXRJbmRleChjaGlsZFNpemUgLSAxKSA6IGFuY2hvck5vZGUuZ2V0Q2hpbGRBdEluZGV4KGFuY2hvck9mZnNldCk7XG5cbiAgICBpZiAoJGlzVGV4dE5vZGUoY2hpbGQpKSB7XG4gICAgICBsZXQgbmV3T2Zmc2V0ID0gMDtcblxuICAgICAgaWYgKGFuY2hvck9mZnNldEF0RW5kKSB7XG4gICAgICAgIG5ld09mZnNldCA9IGNoaWxkLmdldFRleHRDb250ZW50U2l6ZSgpO1xuICAgICAgfVxuXG4gICAgICBhbmNob3Iuc2V0KGNoaWxkLl9fa2V5LCBuZXdPZmZzZXQsICd0ZXh0Jyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCRpc0VsZW1lbnROb2RlKGZvY3VzTm9kZSkpIHtcbiAgICBjb25zdCBjaGlsZFNpemUgPSBmb2N1c05vZGUuZ2V0Q2hpbGRyZW5TaXplKCk7XG4gICAgY29uc3QgZm9jdXNPZmZzZXRBdEVuZCA9IGZvY3VzT2Zmc2V0ID49IGNoaWxkU2l6ZTtcbiAgICBjb25zdCBjaGlsZCA9IGZvY3VzT2Zmc2V0QXRFbmQgPyBmb2N1c05vZGUuZ2V0Q2hpbGRBdEluZGV4KGNoaWxkU2l6ZSAtIDEpIDogZm9jdXNOb2RlLmdldENoaWxkQXRJbmRleChmb2N1c09mZnNldCk7XG5cbiAgICBpZiAoJGlzVGV4dE5vZGUoY2hpbGQpKSB7XG4gICAgICBsZXQgbmV3T2Zmc2V0ID0gMDtcblxuICAgICAgaWYgKGZvY3VzT2Zmc2V0QXRFbmQpIHtcbiAgICAgICAgbmV3T2Zmc2V0ID0gY2hpbGQuZ2V0VGV4dENvbnRlbnRTaXplKCk7XG4gICAgICB9XG5cbiAgICAgIGZvY3VzLnNldChjaGlsZC5fX2tleSwgbmV3T2Zmc2V0LCAndGV4dCcpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhcHBseVNlbGVjdGlvblRyYW5zZm9ybXMobmV4dEVkaXRvclN0YXRlLCBlZGl0b3IpIHtcbiAgY29uc3QgcHJldkVkaXRvclN0YXRlID0gZWRpdG9yLmdldEVkaXRvclN0YXRlKCk7XG4gIGNvbnN0IHByZXZTZWxlY3Rpb24gPSBwcmV2RWRpdG9yU3RhdGUuX3NlbGVjdGlvbjtcbiAgY29uc3QgbmV4dFNlbGVjdGlvbiA9IG5leHRFZGl0b3JTdGF0ZS5fc2VsZWN0aW9uO1xuXG4gIGlmICgkaXNSYW5nZVNlbGVjdGlvbihuZXh0U2VsZWN0aW9uKSkge1xuICAgIGNvbnN0IGFuY2hvciA9IG5leHRTZWxlY3Rpb24uYW5jaG9yO1xuICAgIGNvbnN0IGZvY3VzID0gbmV4dFNlbGVjdGlvbi5mb2N1cztcbiAgICBsZXQgYW5jaG9yTm9kZTtcblxuICAgIGlmIChhbmNob3IudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICBhbmNob3JOb2RlID0gYW5jaG9yLmdldE5vZGUoKTtcbiAgICAgIGFuY2hvck5vZGUuc2VsZWN0aW9uVHJhbnNmb3JtKHByZXZTZWxlY3Rpb24sIG5leHRTZWxlY3Rpb24pO1xuICAgIH1cblxuICAgIGlmIChmb2N1cy50eXBlID09PSAndGV4dCcpIHtcbiAgICAgIGNvbnN0IGZvY3VzTm9kZSA9IGZvY3VzLmdldE5vZGUoKTtcblxuICAgICAgaWYgKGFuY2hvck5vZGUgIT09IGZvY3VzTm9kZSkge1xuICAgICAgICBmb2N1c05vZGUuc2VsZWN0aW9uVHJhbnNmb3JtKHByZXZTZWxlY3Rpb24sIG5leHRTZWxlY3Rpb24pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gbW92ZVNlbGVjdGlvblBvaW50VG9TaWJsaW5nKHBvaW50LCBub2RlLCBwYXJlbnQsIHByZXZTaWJsaW5nLCBuZXh0U2libGluZykge1xuICBsZXQgc2libGluZ0tleSA9IG51bGw7XG4gIGxldCBvZmZzZXQgPSAwO1xuICBsZXQgdHlwZSA9IG51bGw7XG5cbiAgaWYgKHByZXZTaWJsaW5nICE9PSBudWxsKSB7XG4gICAgc2libGluZ0tleSA9IHByZXZTaWJsaW5nLl9fa2V5O1xuXG4gICAgaWYgKCRpc1RleHROb2RlKHByZXZTaWJsaW5nKSkge1xuICAgICAgb2Zmc2V0ID0gcHJldlNpYmxpbmcuZ2V0VGV4dENvbnRlbnRTaXplKCk7XG4gICAgICB0eXBlID0gJ3RleHQnO1xuICAgIH0gZWxzZSBpZiAoJGlzRWxlbWVudE5vZGUocHJldlNpYmxpbmcpKSB7XG4gICAgICBvZmZzZXQgPSBwcmV2U2libGluZy5nZXRDaGlsZHJlblNpemUoKTtcbiAgICAgIHR5cGUgPSAnZWxlbWVudCc7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChuZXh0U2libGluZyAhPT0gbnVsbCkge1xuICAgICAgc2libGluZ0tleSA9IG5leHRTaWJsaW5nLl9fa2V5O1xuXG4gICAgICBpZiAoJGlzVGV4dE5vZGUobmV4dFNpYmxpbmcpKSB7XG4gICAgICAgIHR5cGUgPSAndGV4dCc7XG4gICAgICB9IGVsc2UgaWYgKCRpc0VsZW1lbnROb2RlKG5leHRTaWJsaW5nKSkge1xuICAgICAgICB0eXBlID0gJ2VsZW1lbnQnO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChzaWJsaW5nS2V5ICE9PSBudWxsICYmIHR5cGUgIT09IG51bGwpIHtcbiAgICBwb2ludC5zZXQoc2libGluZ0tleSwgb2Zmc2V0LCB0eXBlKTtcbiAgfSBlbHNlIHtcbiAgICBvZmZzZXQgPSBub2RlLmdldEluZGV4V2l0aGluUGFyZW50KCk7XG5cbiAgICBpZiAob2Zmc2V0ID09PSAtMSkge1xuICAgICAgLy8gTW92ZSBzZWxlY3Rpb24gdG8gZW5kIG9mIHBhcmVudFxuICAgICAgb2Zmc2V0ID0gcGFyZW50LmdldENoaWxkcmVuU2l6ZSgpO1xuICAgIH1cblxuICAgIHBvaW50LnNldChwYXJlbnQuX19rZXksIG9mZnNldCwgJ2VsZW1lbnQnKTtcbiAgfVxufVxuZnVuY3Rpb24gYWRqdXN0UG9pbnRPZmZzZXRGb3JNZXJnZWRTaWJsaW5nKHBvaW50LCBpc0JlZm9yZSwga2V5LCB0YXJnZXQsIHRleHRMZW5ndGgpIHtcbiAgaWYgKHBvaW50LnR5cGUgPT09ICd0ZXh0Jykge1xuICAgIHBvaW50LmtleSA9IGtleTtcblxuICAgIGlmICghaXNCZWZvcmUpIHtcbiAgICAgIHBvaW50Lm9mZnNldCArPSB0ZXh0TGVuZ3RoO1xuICAgIH1cbiAgfSBlbHNlIGlmIChwb2ludC5vZmZzZXQgPiB0YXJnZXQuZ2V0SW5kZXhXaXRoaW5QYXJlbnQoKSkge1xuICAgIHBvaW50Lm9mZnNldCAtPSAxO1xuICB9XG59XG5mdW5jdGlvbiB1cGRhdGVET01TZWxlY3Rpb24ocHJldlNlbGVjdGlvbiwgbmV4dFNlbGVjdGlvbiwgZWRpdG9yLCBkb21TZWxlY3Rpb24sIHRhZ3MsIHJvb3RFbGVtZW50LCBub2RlQ291bnQpIHtcbiAgY29uc3QgYW5jaG9yRE9NTm9kZSA9IGRvbVNlbGVjdGlvbi5hbmNob3JOb2RlO1xuICBjb25zdCBmb2N1c0RPTU5vZGUgPSBkb21TZWxlY3Rpb24uZm9jdXNOb2RlO1xuICBjb25zdCBhbmNob3JPZmZzZXQgPSBkb21TZWxlY3Rpb24uYW5jaG9yT2Zmc2V0O1xuICBjb25zdCBmb2N1c09mZnNldCA9IGRvbVNlbGVjdGlvbi5mb2N1c09mZnNldDtcbiAgY29uc3QgYWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7IC8vIFRPRE86IG1ha2UgdGhpcyBub3QgaGFyZC1jb2RlZCwgYW5kIGFkZCBhbm90aGVyIGNvbmZpZyBvcHRpb25cbiAgLy8gdGhhdCBtYWtlcyB0aGlzIGNvbmZpZ3VyYWJsZS5cblxuICBpZiAodGFncy5oYXMoJ2NvbGxhYm9yYXRpb24nKSAmJiBhY3RpdmVFbGVtZW50ICE9PSByb290RWxlbWVudCB8fCBhY3RpdmVFbGVtZW50ICE9PSBudWxsICYmIGlzU2VsZWN0aW9uQ2FwdHVyZWRJbkRlY29yYXRvcklucHV0KGFjdGl2ZUVsZW1lbnQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCEkaXNSYW5nZVNlbGVjdGlvbihuZXh0U2VsZWN0aW9uKSkge1xuICAgIC8vIFdlIGRvbid0IHJlbW92ZSBzZWxlY3Rpb24gaWYgdGhlIHByZXZTZWxlY3Rpb24gaXMgbnVsbCBiZWNhdXNlXG4gICAgLy8gb2YgZWRpdG9yLnNldFJvb3RFbGVtZW50KCkuIElmIHRoaXMgb2NjdXJzIG9uIGluaXQgd2hlbiB0aGVcbiAgICAvLyBlZGl0b3IgaXMgYWxyZWFkeSBmb2N1c2VkLCB0aGVuIHRoaXMgY2FuIGNhdXNlIHRoZSBlZGl0b3IgdG9cbiAgICAvLyBsb3NlIGZvY3VzLlxuICAgIGlmIChwcmV2U2VsZWN0aW9uICE9PSBudWxsICYmIGlzU2VsZWN0aW9uV2l0aGluRWRpdG9yKGVkaXRvciwgYW5jaG9yRE9NTm9kZSwgZm9jdXNET01Ob2RlKSkge1xuICAgICAgZG9tU2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgIH1cblxuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGFuY2hvciA9IG5leHRTZWxlY3Rpb24uYW5jaG9yO1xuICBjb25zdCBmb2N1cyA9IG5leHRTZWxlY3Rpb24uZm9jdXM7XG4gIGNvbnN0IGFuY2hvcktleSA9IGFuY2hvci5rZXk7XG4gIGNvbnN0IGZvY3VzS2V5ID0gZm9jdXMua2V5O1xuICBjb25zdCBhbmNob3JET00gPSBnZXRFbGVtZW50QnlLZXlPclRocm93KGVkaXRvciwgYW5jaG9yS2V5KTtcbiAgY29uc3QgZm9jdXNET00gPSBnZXRFbGVtZW50QnlLZXlPclRocm93KGVkaXRvciwgZm9jdXNLZXkpO1xuICBjb25zdCBuZXh0QW5jaG9yT2Zmc2V0ID0gYW5jaG9yLm9mZnNldDtcbiAgY29uc3QgbmV4dEZvY3VzT2Zmc2V0ID0gZm9jdXMub2Zmc2V0O1xuICBjb25zdCBuZXh0Rm9ybWF0ID0gbmV4dFNlbGVjdGlvbi5mb3JtYXQ7XG4gIGNvbnN0IG5leHRTdHlsZSA9IG5leHRTZWxlY3Rpb24uc3R5bGU7XG4gIGNvbnN0IGlzQ29sbGFwc2VkID0gbmV4dFNlbGVjdGlvbi5pc0NvbGxhcHNlZCgpO1xuICBsZXQgbmV4dEFuY2hvck5vZGUgPSBhbmNob3JET007XG4gIGxldCBuZXh0Rm9jdXNOb2RlID0gZm9jdXNET007XG4gIGxldCBhbmNob3JGb3JtYXRPclN0eWxlQ2hhbmdlZCA9IGZhbHNlO1xuXG4gIGlmIChhbmNob3IudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgbmV4dEFuY2hvck5vZGUgPSBnZXRET01UZXh0Tm9kZShhbmNob3JET00pO1xuICAgIGNvbnN0IGFuY2hvck5vZGUgPSBhbmNob3IuZ2V0Tm9kZSgpO1xuICAgIGFuY2hvckZvcm1hdE9yU3R5bGVDaGFuZ2VkID0gYW5jaG9yTm9kZS5nZXRGb3JtYXQoKSAhPT0gbmV4dEZvcm1hdCB8fCBhbmNob3JOb2RlLmdldFN0eWxlKCkgIT09IG5leHRTdHlsZTtcbiAgfSBlbHNlIGlmICgkaXNSYW5nZVNlbGVjdGlvbihwcmV2U2VsZWN0aW9uKSAmJiBwcmV2U2VsZWN0aW9uLmFuY2hvci50eXBlID09PSAndGV4dCcpIHtcbiAgICBhbmNob3JGb3JtYXRPclN0eWxlQ2hhbmdlZCA9IHRydWU7XG4gIH1cblxuICBpZiAoZm9jdXMudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgbmV4dEZvY3VzTm9kZSA9IGdldERPTVRleHROb2RlKGZvY3VzRE9NKTtcbiAgfSAvLyBJZiB3ZSBjYW4ndCBnZXQgYW4gdW5kZXJseWluZyB0ZXh0IG5vZGUgZm9yIHNlbGVjdGlvbiwgdGhlblxuICAvLyB3ZSBzaG91bGQgYXZvaWQgc2V0dGluZyBzZWxlY3Rpb24gdG8gc29tZXRoaW5nIGluY29ycmVjdC5cblxuXG4gIGlmIChuZXh0QW5jaG9yTm9kZSA9PT0gbnVsbCB8fCBuZXh0Rm9jdXNOb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGlzQ29sbGFwc2VkICYmIChwcmV2U2VsZWN0aW9uID09PSBudWxsIHx8IGFuY2hvckZvcm1hdE9yU3R5bGVDaGFuZ2VkIHx8ICRpc1JhbmdlU2VsZWN0aW9uKHByZXZTZWxlY3Rpb24pICYmIChwcmV2U2VsZWN0aW9uLmZvcm1hdCAhPT0gbmV4dEZvcm1hdCB8fCBwcmV2U2VsZWN0aW9uLnN0eWxlICE9PSBuZXh0U3R5bGUpKSkge1xuICAgIG1hcmtDb2xsYXBzZWRTZWxlY3Rpb25Gb3JtYXQobmV4dEZvcm1hdCwgbmV4dFN0eWxlLCBuZXh0QW5jaG9yT2Zmc2V0LCBhbmNob3JLZXksIHBlcmZvcm1hbmNlLm5vdygpKTtcbiAgfSAvLyBEaWZmIGFnYWluc3QgdGhlIG5hdGl2ZSBET00gc2VsZWN0aW9uIHRvIGVuc3VyZSB3ZSBkb24ndCBkb1xuICAvLyBhbiB1bm5lY2Vzc2FyeSBzZWxlY3Rpb24gdXBkYXRlLiBXZSBhbHNvIHNraXAgdGhpcyBjaGVjayBpZlxuICAvLyB3ZSdyZSBtb3Zpbmcgc2VsZWN0aW9uIHRvIHdpdGhpbiBhbiBlbGVtZW50LCBhcyB0aGlzIGNhblxuICAvLyBzb21ldGltZXMgYmUgcHJvYmxlbWF0aWMgYXJvdW5kIHNjcm9sbGluZy5cblxuXG4gIGlmIChhbmNob3JPZmZzZXQgPT09IG5leHRBbmNob3JPZmZzZXQgJiYgZm9jdXNPZmZzZXQgPT09IG5leHRGb2N1c09mZnNldCAmJiBhbmNob3JET01Ob2RlID09PSBuZXh0QW5jaG9yTm9kZSAmJiBmb2N1c0RPTU5vZGUgPT09IG5leHRGb2N1c05vZGUgJiYgLy8gQmFkbHkgaW50ZXJwcmV0ZWQgcmFuZ2Ugc2VsZWN0aW9uIHdoZW4gY29sbGFwc2VkIC0gIzE0ODJcbiAgICAhKGRvbVNlbGVjdGlvbi50eXBlID09PSAnUmFuZ2UnICYmIGlzQ29sbGFwc2VkKSkge1xuICAgIC8vIElmIHRoZSByb290IGVsZW1lbnQgZG9lcyBub3QgaGF2ZSBmb2N1cywgZW5zdXJlIGl0IGhhcyBmb2N1c1xuICAgIGlmIChhY3RpdmVFbGVtZW50ID09PSBudWxsIHx8ICFyb290RWxlbWVudC5jb250YWlucyhhY3RpdmVFbGVtZW50KSkge1xuICAgICAgcm9vdEVsZW1lbnQuZm9jdXMoe1xuICAgICAgICBwcmV2ZW50U2Nyb2xsOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoYW5jaG9yLnR5cGUgIT09ICdlbGVtZW50Jykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSAvLyBBcHBseSB0aGUgdXBkYXRlZCBzZWxlY3Rpb24gdG8gdGhlIERPTS4gTm90ZTogdGhpcyB3aWxsIHRyaWdnZXJcbiAgLy8gYSBcInNlbGVjdGlvbmNoYW5nZVwiIGV2ZW50LCBhbHRob3VnaCBpdCB3aWxsIGJlIGFzeW5jaHJvbm91cy5cblxuXG4gIHRyeSB7XG4gICAgZG9tU2VsZWN0aW9uLnNldEJhc2VBbmRFeHRlbnQobmV4dEFuY2hvck5vZGUsIG5leHRBbmNob3JPZmZzZXQsIG5leHRGb2N1c05vZGUsIG5leHRGb2N1c09mZnNldCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7Ly8gSWYgd2UgZW5jb3VudGVyIGFuIGVycm9yLCBjb250aW51ZS4gVGhpcyBjYW4gc29tZXRpbWVzXG4gICAgLy8gb2NjdXIgd2l0aCBGRiBhbmQgdGhlcmUncyBubyBnb29kIHJlYXNvbiBhcyB0byB3aHkgaXRcbiAgICAvLyBzaG91bGQgaGFwcGVuLlxuICB9XG5cbiAgaWYgKCF0YWdzLmhhcygnc2tpcC1zY3JvbGwtaW50by12aWV3JykgJiYgbmV4dFNlbGVjdGlvbi5pc0NvbGxhcHNlZCgpICYmIHJvb3RFbGVtZW50ICE9PSBudWxsICYmIHJvb3RFbGVtZW50ID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50KSB7XG4gICAgY29uc3Qgc2VsZWN0aW9uVGFyZ2V0ID0gbmV4dFNlbGVjdGlvbiBpbnN0YW5jZW9mIFJhbmdlU2VsZWN0aW9uICYmIG5leHRTZWxlY3Rpb24uYW5jaG9yLnR5cGUgPT09ICdlbGVtZW50JyA/IG5leHRBbmNob3JOb2RlLmNoaWxkTm9kZXNbbmV4dEFuY2hvck9mZnNldF0gfHwgbnVsbCA6IGRvbVNlbGVjdGlvbi5yYW5nZUNvdW50ID4gMCA/IGRvbVNlbGVjdGlvbi5nZXRSYW5nZUF0KDApIDogbnVsbDtcblxuICAgIGlmIChzZWxlY3Rpb25UYXJnZXQgIT09IG51bGwpIHtcbiAgICAgIC8vIEB0cy1pZ25vcmUgVGV4dCBub2RlcyBkbyBoYXZlIGdldEJvdW5kaW5nQ2xpZW50UmVjdFxuICAgICAgY29uc3Qgc2VsZWN0aW9uUmVjdCA9IHNlbGVjdGlvblRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHNjcm9sbEludG9WaWV3SWZOZWVkZWQoZWRpdG9yLCBzZWxlY3Rpb25SZWN0LCByb290RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgbWFya1NlbGVjdGlvbkNoYW5nZUZyb21ET01VcGRhdGUoKTtcbn1cbmZ1bmN0aW9uICRpbnNlcnROb2Rlcyhub2Rlcywgc2VsZWN0U3RhcnQpIHtcbiAgbGV0IHNlbGVjdGlvbiA9ICRnZXRTZWxlY3Rpb24oKTtcblxuICBpZiAoc2VsZWN0aW9uID09PSBudWxsKSB7XG4gICAgc2VsZWN0aW9uID0gJGdldFJvb3QoKS5zZWxlY3RFbmQoKTtcbiAgfVxuXG4gIHJldHVybiBzZWxlY3Rpb24uaW5zZXJ0Tm9kZXMobm9kZXMsIHNlbGVjdFN0YXJ0KTtcbn1cbmZ1bmN0aW9uICRnZXRUZXh0Q29udGVudCgpIHtcbiAgY29uc3Qgc2VsZWN0aW9uID0gJGdldFNlbGVjdGlvbigpO1xuXG4gIGlmIChzZWxlY3Rpb24gPT09IG51bGwpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICByZXR1cm4gc2VsZWN0aW9uLmdldFRleHRDb250ZW50KCk7XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVHcmlkTWFwKGdyaWQsIGNlbGxBLCBjZWxsQikge1xuICBjb25zdCB0YWJsZU1hcCA9IFtdO1xuICBsZXQgY2VsbEFWYWx1ZSA9IG51bGw7XG4gIGxldCBjZWxsQlZhbHVlID0gbnVsbDtcblxuICBmdW5jdGlvbiB3cml0ZShzdGFydFJvdywgc3RhcnRDb2x1bW4sIGNlbGwpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHtcbiAgICAgIGNlbGwsXG4gICAgICBzdGFydENvbHVtbixcbiAgICAgIHN0YXJ0Um93XG4gICAgfTtcbiAgICBjb25zdCByb3dTcGFuID0gY2VsbC5fX3Jvd1NwYW47XG4gICAgY29uc3QgY29sU3BhbiA9IGNlbGwuX19jb2xTcGFuO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dTcGFuOyBpKyspIHtcbiAgICAgIGlmICh0YWJsZU1hcFtzdGFydFJvdyArIGldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGFibGVNYXBbc3RhcnRSb3cgKyBpXSA9IFtdO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNvbFNwYW47IGorKykge1xuICAgICAgICB0YWJsZU1hcFtzdGFydFJvdyArIGldW3N0YXJ0Q29sdW1uICsgal0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY2VsbEEuaXMoY2VsbCkpIHtcbiAgICAgIGNlbGxBVmFsdWUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBpZiAoY2VsbEIuaXMoY2VsbCkpIHtcbiAgICAgIGNlbGxCVmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpc0VtcHR5KHJvdywgY29sdW1uKSB7XG4gICAgcmV0dXJuIHRhYmxlTWFwW3Jvd10gPT09IHVuZGVmaW5lZCB8fCB0YWJsZU1hcFtyb3ddW2NvbHVtbl0gPT09IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGNvbnN0IGdyaWRDaGlsZHJlbiA9IGdyaWQuZ2V0Q2hpbGRyZW4oKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGdyaWRDaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHJvdyA9IGdyaWRDaGlsZHJlbltpXTtcblxuICAgIGlmICghREVQUkVDQVRFRF8kaXNHcmlkUm93Tm9kZShyb3cpKSB7XG4gICAgICB0aHJvdyBFcnJvcihgRXhwZWN0ZWQgR3JpZE5vZGUgY2hpbGRyZW4gdG8gYmUgR3JpZFJvd05vZGVgKTtcbiAgICB9XG5cbiAgICBjb25zdCByb3dDaGlsZHJlbiA9IHJvdy5nZXRDaGlsZHJlbigpO1xuICAgIGxldCBqID0gMDtcblxuICAgIGZvciAoY29uc3QgY2VsbCBvZiByb3dDaGlsZHJlbikge1xuICAgICAgaWYgKCFERVBSRUNBVEVEXyRpc0dyaWRDZWxsTm9kZShjZWxsKSkge1xuICAgICAgICB0aHJvdyBFcnJvcihgRXhwZWN0ZWQgR3JpZFJvd05vZGUgY2hpbGRyZW4gdG8gYmUgR3JpZENlbGxOb2RlYCk7XG4gICAgICB9XG5cbiAgICAgIHdoaWxlICghaXNFbXB0eShpLCBqKSkge1xuICAgICAgICBqKys7XG4gICAgICB9XG5cbiAgICAgIHdyaXRlKGksIGosIGNlbGwpO1xuICAgICAgaiArPSBjZWxsLl9fY29sU3BhbjtcbiAgICB9XG4gIH1cblxuICBpZiAoIShjZWxsQVZhbHVlICE9PSBudWxsKSkge1xuICAgIHRocm93IEVycm9yKGBBbmNob3Igbm90IGZvdW5kIGluIEdyaWRgKTtcbiAgfVxuXG4gIGlmICghKGNlbGxCVmFsdWUgIT09IG51bGwpKSB7XG4gICAgdGhyb3cgRXJyb3IoYEZvY3VzIG5vdCBmb3VuZCBpbiBHcmlkYCk7XG4gIH1cblxuICByZXR1cm4gW3RhYmxlTWFwLCBjZWxsQVZhbHVlLCBjZWxsQlZhbHVlXTtcbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xubGV0IGFjdGl2ZUVkaXRvclN0YXRlID0gbnVsbDtcbmxldCBhY3RpdmVFZGl0b3IgPSBudWxsO1xubGV0IGlzUmVhZE9ubHlNb2RlID0gZmFsc2U7XG5sZXQgaXNBdHRlbXB0aW5nVG9SZWNvdmVyRnJvbVJlY29uY2lsZXJFcnJvciA9IGZhbHNlO1xubGV0IGluZmluaXRlVHJhbnNmb3JtQ291bnQgPSAwO1xuY29uc3Qgb2JzZXJ2ZXJPcHRpb25zID0ge1xuICBjaGFyYWN0ZXJEYXRhOiB0cnVlLFxuICBjaGlsZExpc3Q6IHRydWUsXG4gIHN1YnRyZWU6IHRydWVcbn07XG5mdW5jdGlvbiBpc0N1cnJlbnRseVJlYWRPbmx5TW9kZSgpIHtcbiAgcmV0dXJuIGlzUmVhZE9ubHlNb2RlIHx8IGFjdGl2ZUVkaXRvclN0YXRlICE9PSBudWxsICYmIGFjdGl2ZUVkaXRvclN0YXRlLl9yZWFkT25seTtcbn1cbmZ1bmN0aW9uIGVycm9yT25SZWFkT25seSgpIHtcbiAgaWYgKGlzUmVhZE9ubHlNb2RlKSB7XG4gICAge1xuICAgICAgdGhyb3cgRXJyb3IoYENhbm5vdCB1c2UgbWV0aG9kIGluIHJlYWQtb25seSBtb2RlLmApO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gZXJyb3JPbkluZmluaXRlVHJhbnNmb3JtcygpIHtcbiAgaWYgKGluZmluaXRlVHJhbnNmb3JtQ291bnQgPiA5OSkge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGBPbmUgb3IgbW9yZSB0cmFuc2Zvcm1zIGFyZSBlbmRsZXNzbHkgdHJpZ2dlcmluZyBhZGRpdGlvbmFsIHRyYW5zZm9ybXMuIE1heSBoYXZlIGVuY291bnRlcmVkIGluZmluaXRlIHJlY3Vyc2lvbiBjYXVzZWQgYnkgdHJhbnNmb3JtcyB0aGF0IGhhdmUgdGhlaXIgcHJlY29uZGl0aW9ucyB0b28gbG9zZSBhbmQvb3IgY29uZmxpY3Qgd2l0aCBlYWNoIG90aGVyLmApO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gZ2V0QWN0aXZlRWRpdG9yU3RhdGUoKSB7XG4gIGlmIChhY3RpdmVFZGl0b3JTdGF0ZSA9PT0gbnVsbCkge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGBVbmFibGUgdG8gZmluZCBhbiBhY3RpdmUgZWRpdG9yIHN0YXRlLiBTdGF0ZSBoZWxwZXJzIG9yIG5vZGUgbWV0aG9kcyBjYW4gb25seSBiZSB1c2VkIHN5bmNocm9ub3VzbHkgZHVyaW5nIHRoZSBjYWxsYmFjayBvZiBlZGl0b3IudXBkYXRlKCkgb3IgZWRpdG9yU3RhdGUucmVhZCgpLmApO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBhY3RpdmVFZGl0b3JTdGF0ZTtcbn1cbmZ1bmN0aW9uIGdldEFjdGl2ZUVkaXRvcigpIHtcbiAgaWYgKGFjdGl2ZUVkaXRvciA9PT0gbnVsbCkge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGBVbmFibGUgdG8gZmluZCBhbiBhY3RpdmUgZWRpdG9yLiBUaGlzIG1ldGhvZCBjYW4gb25seSBiZSB1c2VkIHN5bmNocm9ub3VzbHkgZHVyaW5nIHRoZSBjYWxsYmFjayBvZiBlZGl0b3IudXBkYXRlKCkuYCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGFjdGl2ZUVkaXRvcjtcbn1cbmZ1bmN0aW9uIGludGVybmFsR2V0QWN0aXZlRWRpdG9yKCkge1xuICByZXR1cm4gYWN0aXZlRWRpdG9yO1xufVxuZnVuY3Rpb24gJGFwcGx5VHJhbnNmb3JtcyhlZGl0b3IsIG5vZGUsIHRyYW5zZm9ybXNDYWNoZSkge1xuICBjb25zdCB0eXBlID0gbm9kZS5fX3R5cGU7XG4gIGNvbnN0IHJlZ2lzdGVyZWROb2RlID0gZ2V0UmVnaXN0ZXJlZE5vZGVPclRocm93KGVkaXRvciwgdHlwZSk7XG4gIGxldCB0cmFuc2Zvcm1zQXJyID0gdHJhbnNmb3Jtc0NhY2hlLmdldCh0eXBlKTtcblxuICBpZiAodHJhbnNmb3Jtc0FyciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdHJhbnNmb3Jtc0FyciA9IEFycmF5LmZyb20ocmVnaXN0ZXJlZE5vZGUudHJhbnNmb3Jtcyk7XG4gICAgdHJhbnNmb3Jtc0NhY2hlLnNldCh0eXBlLCB0cmFuc2Zvcm1zQXJyKTtcbiAgfVxuXG4gIGNvbnN0IHRyYW5zZm9ybXNBcnJMZW5ndGggPSB0cmFuc2Zvcm1zQXJyLmxlbmd0aDtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHRyYW5zZm9ybXNBcnJMZW5ndGg7IGkrKykge1xuICAgIHRyYW5zZm9ybXNBcnJbaV0obm9kZSk7XG5cbiAgICBpZiAoIW5vZGUuaXNBdHRhY2hlZCgpKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gJGlzTm9kZVZhbGlkRm9yVHJhbnNmb3JtKG5vZGUsIGNvbXBvc2l0aW9uS2V5KSB7XG4gIHJldHVybiBub2RlICE9PSB1bmRlZmluZWQgJiYgLy8gV2UgZG9uJ3Qgd2FudCB0byB0cmFuc2Zvcm0gbm9kZXMgYmVpbmcgY29tcG9zZWRcbiAgICBub2RlLl9fa2V5ICE9PSBjb21wb3NpdGlvbktleSAmJiBub2RlLmlzQXR0YWNoZWQoKTtcbn1cblxuZnVuY3Rpb24gJG5vcm1hbGl6ZUFsbERpcnR5VGV4dE5vZGVzKGVkaXRvclN0YXRlLCBlZGl0b3IpIHtcbiAgY29uc3QgZGlydHlMZWF2ZXMgPSBlZGl0b3IuX2RpcnR5TGVhdmVzO1xuICBjb25zdCBub2RlTWFwID0gZWRpdG9yU3RhdGUuX25vZGVNYXA7XG5cbiAgZm9yIChjb25zdCBub2RlS2V5IG9mIGRpcnR5TGVhdmVzKSB7XG4gICAgY29uc3Qgbm9kZSA9IG5vZGVNYXAuZ2V0KG5vZGVLZXkpO1xuXG4gICAgaWYgKCRpc1RleHROb2RlKG5vZGUpICYmIG5vZGUuaXNBdHRhY2hlZCgpICYmIG5vZGUuaXNTaW1wbGVUZXh0KCkgJiYgIW5vZGUuaXNVbm1lcmdlYWJsZSgpKSB7XG4gICAgICAkbm9ybWFsaXplVGV4dE5vZGUobm9kZSk7XG4gICAgfVxuICB9XG59XG4vKipcbiAqIFRyYW5zZm9ybSBoZXVyaXN0aWM6XG4gKiAxLiBXZSB0cmFuc2Zvcm0gbGVhdmVzIGZpcnN0LiBJZiB0cmFuc2Zvcm1zIGdlbmVyYXRlIGFkZGl0aW9uYWwgZGlydHkgbm9kZXMgd2UgcmVwZWF0IHN0ZXAgMS5cbiAqIFRoZSByZWFzb25pbmcgYmVoaW5kIHRoaXMgaXMgdGhhdCBtYXJraW5nIGEgbGVhZiBhcyBkaXJ0eSBtYXJrcyBhbGwgaXRzIHBhcmVudCBlbGVtZW50cyBhcyBkaXJ0eSB0b28uXG4gKiAyLiBXZSB0cmFuc2Zvcm0gZWxlbWVudHMuIElmIGVsZW1lbnQgdHJhbnNmb3JtcyBnZW5lcmF0ZSBhZGRpdGlvbmFsIGRpcnR5IG5vZGVzIHdlIHJlcGVhdCBzdGVwIDEuXG4gKiBJZiBlbGVtZW50IHRyYW5zZm9ybXMgb25seSBnZW5lcmF0ZSBhZGRpdGlvbmFsIGRpcnR5IGVsZW1lbnRzIHdlIG9ubHkgcmVwZWF0IHN0ZXAgMi5cbiAqXG4gKiBOb3RlIHRoYXQgdG8ga2VlcCB0cmFjayBvZiBuZXdseSBkaXJ0eSBub2RlcyBhbmQgc3VidHJlZXMgd2UgbGV2ZXJhZ2UgdGhlIGVkaXRvci5fZGlydHlOb2RlcyBhbmRcbiAqIGVkaXRvci5fc3VidHJlZXMgd2hpY2ggd2UgcmVzZXQgaW4gZXZlcnkgbG9vcC5cbiAqL1xuXG5cbmZ1bmN0aW9uICRhcHBseUFsbFRyYW5zZm9ybXMoZWRpdG9yU3RhdGUsIGVkaXRvcikge1xuICBjb25zdCBkaXJ0eUxlYXZlcyA9IGVkaXRvci5fZGlydHlMZWF2ZXM7XG4gIGNvbnN0IGRpcnR5RWxlbWVudHMgPSBlZGl0b3IuX2RpcnR5RWxlbWVudHM7XG4gIGNvbnN0IG5vZGVNYXAgPSBlZGl0b3JTdGF0ZS5fbm9kZU1hcDtcbiAgY29uc3QgY29tcG9zaXRpb25LZXkgPSAkZ2V0Q29tcG9zaXRpb25LZXkoKTtcbiAgY29uc3QgdHJhbnNmb3Jtc0NhY2hlID0gbmV3IE1hcCgpO1xuICBsZXQgdW50cmFuc2Zvcm1lZERpcnR5TGVhdmVzID0gZGlydHlMZWF2ZXM7XG4gIGxldCB1bnRyYW5zZm9ybWVkRGlydHlMZWF2ZXNMZW5ndGggPSB1bnRyYW5zZm9ybWVkRGlydHlMZWF2ZXMuc2l6ZTtcbiAgbGV0IHVudHJhbnNmb3JtZWREaXJ0eUVsZW1lbnRzID0gZGlydHlFbGVtZW50cztcbiAgbGV0IHVudHJhbnNmb3JtZWREaXJ0eUVsZW1lbnRzTGVuZ3RoID0gdW50cmFuc2Zvcm1lZERpcnR5RWxlbWVudHMuc2l6ZTtcblxuICB3aGlsZSAodW50cmFuc2Zvcm1lZERpcnR5TGVhdmVzTGVuZ3RoID4gMCB8fCB1bnRyYW5zZm9ybWVkRGlydHlFbGVtZW50c0xlbmd0aCA+IDApIHtcbiAgICBpZiAodW50cmFuc2Zvcm1lZERpcnR5TGVhdmVzTGVuZ3RoID4gMCkge1xuICAgICAgLy8gV2UgbGV2ZXJhZ2UgZWRpdG9yLl9kaXJ0eUxlYXZlcyB0byB0cmFjayB0aGUgbmV3IGRpcnR5IGxlYXZlcyBhZnRlciB0aGUgdHJhbnNmb3Jtc1xuICAgICAgZWRpdG9yLl9kaXJ0eUxlYXZlcyA9IG5ldyBTZXQoKTtcblxuICAgICAgZm9yIChjb25zdCBub2RlS2V5IG9mIHVudHJhbnNmb3JtZWREaXJ0eUxlYXZlcykge1xuICAgICAgICBjb25zdCBub2RlID0gbm9kZU1hcC5nZXQobm9kZUtleSk7XG5cbiAgICAgICAgaWYgKCRpc1RleHROb2RlKG5vZGUpICYmIG5vZGUuaXNBdHRhY2hlZCgpICYmIG5vZGUuaXNTaW1wbGVUZXh0KCkgJiYgIW5vZGUuaXNVbm1lcmdlYWJsZSgpKSB7XG4gICAgICAgICAgJG5vcm1hbGl6ZVRleHROb2RlKG5vZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5vZGUgIT09IHVuZGVmaW5lZCAmJiAkaXNOb2RlVmFsaWRGb3JUcmFuc2Zvcm0obm9kZSwgY29tcG9zaXRpb25LZXkpKSB7XG4gICAgICAgICAgJGFwcGx5VHJhbnNmb3JtcyhlZGl0b3IsIG5vZGUsIHRyYW5zZm9ybXNDYWNoZSk7XG4gICAgICAgIH1cblxuICAgICAgICBkaXJ0eUxlYXZlcy5hZGQobm9kZUtleSk7XG4gICAgICB9XG5cbiAgICAgIHVudHJhbnNmb3JtZWREaXJ0eUxlYXZlcyA9IGVkaXRvci5fZGlydHlMZWF2ZXM7XG4gICAgICB1bnRyYW5zZm9ybWVkRGlydHlMZWF2ZXNMZW5ndGggPSB1bnRyYW5zZm9ybWVkRGlydHlMZWF2ZXMuc2l6ZTsgLy8gV2Ugd2FudCB0byBwcmlvcml0aXplIG5vZGUgdHJhbnNmb3JtcyBvdmVyIGVsZW1lbnQgdHJhbnNmb3Jtc1xuXG4gICAgICBpZiAodW50cmFuc2Zvcm1lZERpcnR5TGVhdmVzTGVuZ3RoID4gMCkge1xuICAgICAgICBpbmZpbml0ZVRyYW5zZm9ybUNvdW50Kys7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgIH0gLy8gQWxsIGRpcnR5IGxlYXZlcyBoYXZlIGJlZW4gcHJvY2Vzc2VkLiBMZXQncyBkbyBlbGVtZW50cyFcbiAgICAvLyBXZSBoYXZlIHByZXZpb3VzbHkgcHJvY2Vzc2VkIGRpcnR5IGxlYXZlcywgc28gbGV0J3MgcmVzdGFydCB0aGUgZWRpdG9yIGxlYXZlcyBTZXQgdG8gdHJhY2tcbiAgICAvLyBuZXcgb25lcyBjYXVzZWQgYnkgZWxlbWVudCB0cmFuc2Zvcm1zXG5cblxuICAgIGVkaXRvci5fZGlydHlMZWF2ZXMgPSBuZXcgU2V0KCk7XG4gICAgZWRpdG9yLl9kaXJ0eUVsZW1lbnRzID0gbmV3IE1hcCgpO1xuXG4gICAgZm9yIChjb25zdCBjdXJyZW50VW50cmFuc2Zvcm1lZERpcnR5RWxlbWVudCBvZiB1bnRyYW5zZm9ybWVkRGlydHlFbGVtZW50cykge1xuICAgICAgY29uc3Qgbm9kZUtleSA9IGN1cnJlbnRVbnRyYW5zZm9ybWVkRGlydHlFbGVtZW50WzBdO1xuICAgICAgY29uc3QgaW50ZW50aW9uYWxseU1hcmtlZEFzRGlydHkgPSBjdXJyZW50VW50cmFuc2Zvcm1lZERpcnR5RWxlbWVudFsxXTtcblxuICAgICAgaWYgKG5vZGVLZXkgIT09ICdyb290JyAmJiAhaW50ZW50aW9uYWxseU1hcmtlZEFzRGlydHkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5vZGUgPSBub2RlTWFwLmdldChub2RlS2V5KTtcblxuICAgICAgaWYgKG5vZGUgIT09IHVuZGVmaW5lZCAmJiAkaXNOb2RlVmFsaWRGb3JUcmFuc2Zvcm0obm9kZSwgY29tcG9zaXRpb25LZXkpKSB7XG4gICAgICAgICRhcHBseVRyYW5zZm9ybXMoZWRpdG9yLCBub2RlLCB0cmFuc2Zvcm1zQ2FjaGUpO1xuICAgICAgfVxuXG4gICAgICBkaXJ0eUVsZW1lbnRzLnNldChub2RlS2V5LCBpbnRlbnRpb25hbGx5TWFya2VkQXNEaXJ0eSk7XG4gICAgfVxuXG4gICAgdW50cmFuc2Zvcm1lZERpcnR5TGVhdmVzID0gZWRpdG9yLl9kaXJ0eUxlYXZlcztcbiAgICB1bnRyYW5zZm9ybWVkRGlydHlMZWF2ZXNMZW5ndGggPSB1bnRyYW5zZm9ybWVkRGlydHlMZWF2ZXMuc2l6ZTtcbiAgICB1bnRyYW5zZm9ybWVkRGlydHlFbGVtZW50cyA9IGVkaXRvci5fZGlydHlFbGVtZW50cztcbiAgICB1bnRyYW5zZm9ybWVkRGlydHlFbGVtZW50c0xlbmd0aCA9IHVudHJhbnNmb3JtZWREaXJ0eUVsZW1lbnRzLnNpemU7XG4gICAgaW5maW5pdGVUcmFuc2Zvcm1Db3VudCsrO1xuICB9XG5cbiAgZWRpdG9yLl9kaXJ0eUxlYXZlcyA9IGRpcnR5TGVhdmVzO1xuICBlZGl0b3IuX2RpcnR5RWxlbWVudHMgPSBkaXJ0eUVsZW1lbnRzO1xufVxuXG5mdW5jdGlvbiAkcGFyc2VTZXJpYWxpemVkTm9kZShzZXJpYWxpemVkTm9kZSkge1xuICBjb25zdCBpbnRlcm5hbFNlcmlhbGl6ZWROb2RlID0gc2VyaWFsaXplZE5vZGU7XG4gIHJldHVybiAkcGFyc2VTZXJpYWxpemVkTm9kZUltcGwoaW50ZXJuYWxTZXJpYWxpemVkTm9kZSwgZ2V0QWN0aXZlRWRpdG9yKCkuX25vZGVzKTtcbn1cblxuZnVuY3Rpb24gJHBhcnNlU2VyaWFsaXplZE5vZGVJbXBsKHNlcmlhbGl6ZWROb2RlLCByZWdpc3RlcmVkTm9kZXMpIHtcbiAgY29uc3QgdHlwZSA9IHNlcmlhbGl6ZWROb2RlLnR5cGU7XG4gIGNvbnN0IHJlZ2lzdGVyZWROb2RlID0gcmVnaXN0ZXJlZE5vZGVzLmdldCh0eXBlKTtcblxuICBpZiAocmVnaXN0ZXJlZE5vZGUgPT09IHVuZGVmaW5lZCkge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGBwYXJzZUVkaXRvclN0YXRlOiB0eXBlIFwiJHt0eXBlfVwiICsgbm90IGZvdW5kYCk7XG4gICAgfVxuICB9XG5cbiAgY29uc3Qgbm9kZUNsYXNzID0gcmVnaXN0ZXJlZE5vZGUua2xhc3M7XG5cbiAgaWYgKHNlcmlhbGl6ZWROb2RlLnR5cGUgIT09IG5vZGVDbGFzcy5nZXRUeXBlKCkpIHtcbiAgICB7XG4gICAgICB0aHJvdyBFcnJvcihgTGV4aWNhbE5vZGU6IE5vZGUgJHtub2RlQ2xhc3MubmFtZX0gZG9lcyBub3QgaW1wbGVtZW50IC5pbXBvcnRKU09OKCkuYCk7XG4gICAgfVxuICB9XG5cbiAgY29uc3Qgbm9kZSA9IG5vZGVDbGFzcy5pbXBvcnRKU09OKHNlcmlhbGl6ZWROb2RlKTtcbiAgY29uc3QgY2hpbGRyZW4gPSBzZXJpYWxpemVkTm9kZS5jaGlsZHJlbjtcblxuICBpZiAoJGlzRWxlbWVudE5vZGUobm9kZSkgJiYgQXJyYXkuaXNBcnJheShjaGlsZHJlbikpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBzZXJpYWxpemVkSlNPTkNoaWxkTm9kZSA9IGNoaWxkcmVuW2ldO1xuICAgICAgY29uc3QgY2hpbGROb2RlID0gJHBhcnNlU2VyaWFsaXplZE5vZGVJbXBsKHNlcmlhbGl6ZWRKU09OQ2hpbGROb2RlLCByZWdpc3RlcmVkTm9kZXMpO1xuICAgICAgbm9kZS5hcHBlbmQoY2hpbGROb2RlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbm9kZTtcbn1cblxuZnVuY3Rpb24gcGFyc2VFZGl0b3JTdGF0ZShzZXJpYWxpemVkRWRpdG9yU3RhdGUsIGVkaXRvciwgdXBkYXRlRm4pIHtcbiAgY29uc3QgZWRpdG9yU3RhdGUgPSBjcmVhdGVFbXB0eUVkaXRvclN0YXRlKCk7XG4gIGNvbnN0IHByZXZpb3VzQWN0aXZlRWRpdG9yU3RhdGUgPSBhY3RpdmVFZGl0b3JTdGF0ZTtcbiAgY29uc3QgcHJldmlvdXNSZWFkT25seU1vZGUgPSBpc1JlYWRPbmx5TW9kZTtcbiAgY29uc3QgcHJldmlvdXNBY3RpdmVFZGl0b3IgPSBhY3RpdmVFZGl0b3I7XG4gIGNvbnN0IHByZXZpb3VzRGlydHlFbGVtZW50cyA9IGVkaXRvci5fZGlydHlFbGVtZW50cztcbiAgY29uc3QgcHJldmlvdXNEaXJ0eUxlYXZlcyA9IGVkaXRvci5fZGlydHlMZWF2ZXM7XG4gIGNvbnN0IHByZXZpb3VzQ2xvbmVOb3ROZWVkZWQgPSBlZGl0b3IuX2Nsb25lTm90TmVlZGVkO1xuICBjb25zdCBwcmV2aW91c0RpcnR5VHlwZSA9IGVkaXRvci5fZGlydHlUeXBlO1xuICBlZGl0b3IuX2RpcnR5RWxlbWVudHMgPSBuZXcgTWFwKCk7XG4gIGVkaXRvci5fZGlydHlMZWF2ZXMgPSBuZXcgU2V0KCk7XG4gIGVkaXRvci5fY2xvbmVOb3ROZWVkZWQgPSBuZXcgU2V0KCk7XG4gIGVkaXRvci5fZGlydHlUeXBlID0gMDtcbiAgYWN0aXZlRWRpdG9yU3RhdGUgPSBlZGl0b3JTdGF0ZTtcbiAgaXNSZWFkT25seU1vZGUgPSBmYWxzZTtcbiAgYWN0aXZlRWRpdG9yID0gZWRpdG9yO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVnaXN0ZXJlZE5vZGVzID0gZWRpdG9yLl9ub2RlcztcbiAgICBjb25zdCBzZXJpYWxpemVkTm9kZSA9IHNlcmlhbGl6ZWRFZGl0b3JTdGF0ZS5yb290O1xuICAgICRwYXJzZVNlcmlhbGl6ZWROb2RlSW1wbChzZXJpYWxpemVkTm9kZSwgcmVnaXN0ZXJlZE5vZGVzKTtcblxuICAgIGlmICh1cGRhdGVGbikge1xuICAgICAgdXBkYXRlRm4oKTtcbiAgICB9IC8vIE1ha2UgdGhlIGVkaXRvclN0YXRlIGltbXV0YWJsZVxuXG5cbiAgICBlZGl0b3JTdGF0ZS5fcmVhZE9ubHkgPSB0cnVlO1xuXG4gICAge1xuICAgICAgaGFuZGxlREVWT25seVBlbmRpbmdVcGRhdGVHdWFyYW50ZWVzKGVkaXRvclN0YXRlKTtcbiAgICB9XG4gIH0gZmluYWxseSB7XG4gICAgZWRpdG9yLl9kaXJ0eUVsZW1lbnRzID0gcHJldmlvdXNEaXJ0eUVsZW1lbnRzO1xuICAgIGVkaXRvci5fZGlydHlMZWF2ZXMgPSBwcmV2aW91c0RpcnR5TGVhdmVzO1xuICAgIGVkaXRvci5fY2xvbmVOb3ROZWVkZWQgPSBwcmV2aW91c0Nsb25lTm90TmVlZGVkO1xuICAgIGVkaXRvci5fZGlydHlUeXBlID0gcHJldmlvdXNEaXJ0eVR5cGU7XG4gICAgYWN0aXZlRWRpdG9yU3RhdGUgPSBwcmV2aW91c0FjdGl2ZUVkaXRvclN0YXRlO1xuICAgIGlzUmVhZE9ubHlNb2RlID0gcHJldmlvdXNSZWFkT25seU1vZGU7XG4gICAgYWN0aXZlRWRpdG9yID0gcHJldmlvdXNBY3RpdmVFZGl0b3I7XG4gIH1cblxuICByZXR1cm4gZWRpdG9yU3RhdGU7XG59IC8vIFRoaXMgdGVjaG5pY2FsbHkgaXNuJ3QgYW4gdXBkYXRlIGJ1dCBnaXZlbiB3ZSBuZWVkXG4vLyBleHBvc3VyZSB0byB0aGUgbW9kdWxlJ3MgYWN0aXZlIGJpbmRpbmdzLCB3ZSBoYXZlIHRoaXNcbi8vIGZ1bmN0aW9uIGhlcmVcblxuZnVuY3Rpb24gcmVhZEVkaXRvclN0YXRlKGVkaXRvclN0YXRlLCBjYWxsYmFja0ZuKSB7XG4gIGNvbnN0IHByZXZpb3VzQWN0aXZlRWRpdG9yU3RhdGUgPSBhY3RpdmVFZGl0b3JTdGF0ZTtcbiAgY29uc3QgcHJldmlvdXNSZWFkT25seU1vZGUgPSBpc1JlYWRPbmx5TW9kZTtcbiAgY29uc3QgcHJldmlvdXNBY3RpdmVFZGl0b3IgPSBhY3RpdmVFZGl0b3I7XG4gIGFjdGl2ZUVkaXRvclN0YXRlID0gZWRpdG9yU3RhdGU7XG4gIGlzUmVhZE9ubHlNb2RlID0gdHJ1ZTtcbiAgYWN0aXZlRWRpdG9yID0gbnVsbDtcblxuICB0cnkge1xuICAgIHJldHVybiBjYWxsYmFja0ZuKCk7XG4gIH0gZmluYWxseSB7XG4gICAgYWN0aXZlRWRpdG9yU3RhdGUgPSBwcmV2aW91c0FjdGl2ZUVkaXRvclN0YXRlO1xuICAgIGlzUmVhZE9ubHlNb2RlID0gcHJldmlvdXNSZWFkT25seU1vZGU7XG4gICAgYWN0aXZlRWRpdG9yID0gcHJldmlvdXNBY3RpdmVFZGl0b3I7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlREVWT25seVBlbmRpbmdVcGRhdGVHdWFyYW50ZWVzKHBlbmRpbmdFZGl0b3JTdGF0ZSkge1xuICAvLyBHaXZlbiB3ZSBjYW4ndCBPYmplY3QuZnJlZXplIHRoZSBub2RlTWFwIGFzIGl0J3MgYSBNYXAsXG4gIC8vIHdlIGluc3RlYWQgcmVwbGFjZSBpdHMgc2V0LCBjbGVhciBhbmQgZGVsZXRlIG1ldGhvZHMuXG4gIGNvbnN0IG5vZGVNYXAgPSBwZW5kaW5nRWRpdG9yU3RhdGUuX25vZGVNYXA7XG5cbiAgbm9kZU1hcC5zZXQgPSAoKSA9PiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgY2FsbCBzZXQoKSBvbiBhIGZyb3plbiBMZXhpY2FsIG5vZGUgbWFwJyk7XG4gIH07XG5cbiAgbm9kZU1hcC5jbGVhciA9ICgpID0+IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBjYWxsIGNsZWFyKCkgb24gYSBmcm96ZW4gTGV4aWNhbCBub2RlIG1hcCcpO1xuICB9O1xuXG4gIG5vZGVNYXAuZGVsZXRlID0gKCkgPT4ge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGNhbGwgZGVsZXRlKCkgb24gYSBmcm96ZW4gTGV4aWNhbCBub2RlIG1hcCcpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBjb21taXRQZW5kaW5nVXBkYXRlcyhlZGl0b3IpIHtcbiAgY29uc3QgcGVuZGluZ0VkaXRvclN0YXRlID0gZWRpdG9yLl9wZW5kaW5nRWRpdG9yU3RhdGU7XG4gIGNvbnN0IHJvb3RFbGVtZW50ID0gZWRpdG9yLl9yb290RWxlbWVudDtcbiAgY29uc3Qgc2hvdWxkU2tpcERPTSA9IGVkaXRvci5faGVhZGxlc3MgfHwgcm9vdEVsZW1lbnQgPT09IG51bGw7XG5cbiAgaWYgKHBlbmRpbmdFZGl0b3JTdGF0ZSA9PT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfSAvLyA9PT09PT1cbiAgLy8gUmVjb25jaWxpYXRpb24gaGFzIHN0YXJ0ZWQuXG4gIC8vID09PT09PVxuXG5cbiAgY29uc3QgY3VycmVudEVkaXRvclN0YXRlID0gZWRpdG9yLl9lZGl0b3JTdGF0ZTtcbiAgY29uc3QgY3VycmVudFNlbGVjdGlvbiA9IGN1cnJlbnRFZGl0b3JTdGF0ZS5fc2VsZWN0aW9uO1xuICBjb25zdCBwZW5kaW5nU2VsZWN0aW9uID0gcGVuZGluZ0VkaXRvclN0YXRlLl9zZWxlY3Rpb247XG4gIGNvbnN0IG5lZWRzVXBkYXRlID0gZWRpdG9yLl9kaXJ0eVR5cGUgIT09IE5PX0RJUlRZX05PREVTO1xuICBjb25zdCBwcmV2aW91c0FjdGl2ZUVkaXRvclN0YXRlID0gYWN0aXZlRWRpdG9yU3RhdGU7XG4gIGNvbnN0IHByZXZpb3VzUmVhZE9ubHlNb2RlID0gaXNSZWFkT25seU1vZGU7XG4gIGNvbnN0IHByZXZpb3VzQWN0aXZlRWRpdG9yID0gYWN0aXZlRWRpdG9yO1xuICBjb25zdCBwcmV2aW91c2x5VXBkYXRpbmcgPSBlZGl0b3IuX3VwZGF0aW5nO1xuICBjb25zdCBvYnNlcnZlciA9IGVkaXRvci5fb2JzZXJ2ZXI7XG4gIGxldCBtdXRhdGVkTm9kZXMgPSBudWxsO1xuICBlZGl0b3IuX3BlbmRpbmdFZGl0b3JTdGF0ZSA9IG51bGw7XG4gIGVkaXRvci5fZWRpdG9yU3RhdGUgPSBwZW5kaW5nRWRpdG9yU3RhdGU7XG5cbiAgaWYgKCFzaG91bGRTa2lwRE9NICYmIG5lZWRzVXBkYXRlICYmIG9ic2VydmVyICE9PSBudWxsKSB7XG4gICAgYWN0aXZlRWRpdG9yID0gZWRpdG9yO1xuICAgIGFjdGl2ZUVkaXRvclN0YXRlID0gcGVuZGluZ0VkaXRvclN0YXRlO1xuICAgIGlzUmVhZE9ubHlNb2RlID0gZmFsc2U7IC8vIFdlIGRvbid0IHdhbnQgdXBkYXRlcyB0byBzeW5jIGJsb2NrIHRoZSByZWNvbmNpbGlhdGlvbi5cblxuICAgIGVkaXRvci5fdXBkYXRpbmcgPSB0cnVlO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRpcnR5VHlwZSA9IGVkaXRvci5fZGlydHlUeXBlO1xuICAgICAgY29uc3QgZGlydHlFbGVtZW50cyA9IGVkaXRvci5fZGlydHlFbGVtZW50cztcbiAgICAgIGNvbnN0IGRpcnR5TGVhdmVzID0gZWRpdG9yLl9kaXJ0eUxlYXZlcztcbiAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgIG11dGF0ZWROb2RlcyA9IHJlY29uY2lsZVJvb3QoY3VycmVudEVkaXRvclN0YXRlLCBwZW5kaW5nRWRpdG9yU3RhdGUsIGVkaXRvciwgZGlydHlUeXBlLCBkaXJ0eUVsZW1lbnRzLCBkaXJ0eUxlYXZlcyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIFJlcG9ydCBlcnJvcnNcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIGVkaXRvci5fb25FcnJvcihlcnJvcik7XG4gICAgICB9IC8vIFJlc2V0IGVkaXRvciBhbmQgcmVzdG9yZSBpbmNvbWluZyBlZGl0b3Igc3RhdGUgdG8gdGhlIERPTVxuXG5cbiAgICAgIGlmICghaXNBdHRlbXB0aW5nVG9SZWNvdmVyRnJvbVJlY29uY2lsZXJFcnJvcikge1xuICAgICAgICByZXNldEVkaXRvcihlZGl0b3IsIG51bGwsIHJvb3RFbGVtZW50LCBwZW5kaW5nRWRpdG9yU3RhdGUpO1xuICAgICAgICBpbml0TXV0YXRpb25PYnNlcnZlcihlZGl0b3IpO1xuICAgICAgICBlZGl0b3IuX2RpcnR5VHlwZSA9IEZVTExfUkVDT05DSUxFO1xuICAgICAgICBpc0F0dGVtcHRpbmdUb1JlY292ZXJGcm9tUmVjb25jaWxlckVycm9yID0gdHJ1ZTtcbiAgICAgICAgY29tbWl0UGVuZGluZ1VwZGF0ZXMoZWRpdG9yKTtcbiAgICAgICAgaXNBdHRlbXB0aW5nVG9SZWNvdmVyRnJvbVJlY29uY2lsZXJFcnJvciA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVG8gYXZvaWQgYSBwb3NzaWJsZSBzaXR1YXRpb24gb2YgaW5maW5pdGUgbG9vcHMsIGxldHMgdGhyb3dcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShyb290RWxlbWVudCwgb2JzZXJ2ZXJPcHRpb25zKTtcbiAgICAgIGVkaXRvci5fdXBkYXRpbmcgPSBwcmV2aW91c2x5VXBkYXRpbmc7XG4gICAgICBhY3RpdmVFZGl0b3JTdGF0ZSA9IHByZXZpb3VzQWN0aXZlRWRpdG9yU3RhdGU7XG4gICAgICBpc1JlYWRPbmx5TW9kZSA9IHByZXZpb3VzUmVhZE9ubHlNb2RlO1xuICAgICAgYWN0aXZlRWRpdG9yID0gcHJldmlvdXNBY3RpdmVFZGl0b3I7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFwZW5kaW5nRWRpdG9yU3RhdGUuX3JlYWRPbmx5KSB7XG4gICAgcGVuZGluZ0VkaXRvclN0YXRlLl9yZWFkT25seSA9IHRydWU7XG5cbiAgICB7XG4gICAgICBoYW5kbGVERVZPbmx5UGVuZGluZ1VwZGF0ZUd1YXJhbnRlZXMocGVuZGluZ0VkaXRvclN0YXRlKTtcblxuICAgICAgaWYgKCRpc1JhbmdlU2VsZWN0aW9uKHBlbmRpbmdTZWxlY3Rpb24pKSB7XG4gICAgICAgIE9iamVjdC5mcmVlemUocGVuZGluZ1NlbGVjdGlvbi5hbmNob3IpO1xuICAgICAgICBPYmplY3QuZnJlZXplKHBlbmRpbmdTZWxlY3Rpb24uZm9jdXMpO1xuICAgICAgfVxuXG4gICAgICBPYmplY3QuZnJlZXplKHBlbmRpbmdTZWxlY3Rpb24pO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGRpcnR5TGVhdmVzID0gZWRpdG9yLl9kaXJ0eUxlYXZlcztcbiAgY29uc3QgZGlydHlFbGVtZW50cyA9IGVkaXRvci5fZGlydHlFbGVtZW50cztcbiAgY29uc3Qgbm9ybWFsaXplZE5vZGVzID0gZWRpdG9yLl9ub3JtYWxpemVkTm9kZXM7XG4gIGNvbnN0IHRhZ3MgPSBlZGl0b3IuX3VwZGF0ZVRhZ3M7XG4gIGNvbnN0IGRlZmVycmVkID0gZWRpdG9yLl9kZWZlcnJlZDtcblxuICBpZiAobmVlZHNVcGRhdGUpIHtcbiAgICBlZGl0b3IuX2RpcnR5VHlwZSA9IE5PX0RJUlRZX05PREVTO1xuXG4gICAgZWRpdG9yLl9jbG9uZU5vdE5lZWRlZC5jbGVhcigpO1xuXG4gICAgZWRpdG9yLl9kaXJ0eUxlYXZlcyA9IG5ldyBTZXQoKTtcbiAgICBlZGl0b3IuX2RpcnR5RWxlbWVudHMgPSBuZXcgTWFwKCk7XG4gICAgZWRpdG9yLl9ub3JtYWxpemVkTm9kZXMgPSBuZXcgU2V0KCk7XG4gICAgZWRpdG9yLl91cGRhdGVUYWdzID0gbmV3IFNldCgpO1xuICB9XG5cbiAgJGdhcmJhZ2VDb2xsZWN0RGV0YWNoZWREZWNvcmF0b3JzKGVkaXRvciwgcGVuZGluZ0VkaXRvclN0YXRlKTsgLy8gPT09PT09XG4gIC8vIFJlY29uY2lsaWF0aW9uIGhhcyBmaW5pc2hlZC4gTm93IHVwZGF0ZSBzZWxlY3Rpb24gYW5kIHRyaWdnZXIgbGlzdGVuZXJzLlxuICAvLyA9PT09PT1cblxuICBjb25zdCBkb21TZWxlY3Rpb24gPSBzaG91bGRTa2lwRE9NID8gbnVsbCA6IGdldERPTVNlbGVjdGlvbihlZGl0b3IuX3dpbmRvdyk7IC8vIEF0dGVtcHQgdG8gdXBkYXRlIHRoZSBET00gc2VsZWN0aW9uLCBpbmNsdWRpbmcgZm9jdXNpbmcgb2YgdGhlIHJvb3QgZWxlbWVudCxcbiAgLy8gYW5kIHNjcm9sbCBpbnRvIHZpZXcgaWYgbmVlZGVkLlxuXG4gIGlmIChlZGl0b3IuX2VkaXRhYmxlICYmIC8vIGRvbVNlbGVjdGlvbiB3aWxsIGJlIG51bGwgaW4gaGVhZGxlc3NcbiAgICBkb21TZWxlY3Rpb24gIT09IG51bGwgJiYgKG5lZWRzVXBkYXRlIHx8IHBlbmRpbmdTZWxlY3Rpb24gPT09IG51bGwgfHwgcGVuZGluZ1NlbGVjdGlvbi5kaXJ0eSkpIHtcbiAgICBhY3RpdmVFZGl0b3IgPSBlZGl0b3I7XG4gICAgYWN0aXZlRWRpdG9yU3RhdGUgPSBwZW5kaW5nRWRpdG9yU3RhdGU7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKG9ic2VydmVyICE9PSBudWxsKSB7XG4gICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG5lZWRzVXBkYXRlIHx8IHBlbmRpbmdTZWxlY3Rpb24gPT09IG51bGwgfHwgcGVuZGluZ1NlbGVjdGlvbi5kaXJ0eSkge1xuICAgICAgICBjb25zdCBibG9ja0N1cnNvckVsZW1lbnQgPSBlZGl0b3IuX2Jsb2NrQ3Vyc29yRWxlbWVudDtcblxuICAgICAgICBpZiAoYmxvY2tDdXJzb3JFbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgcmVtb3ZlRE9NQmxvY2tDdXJzb3JFbGVtZW50KGJsb2NrQ3Vyc29yRWxlbWVudCwgZWRpdG9yLCByb290RWxlbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICB1cGRhdGVET01TZWxlY3Rpb24oY3VycmVudFNlbGVjdGlvbiwgcGVuZGluZ1NlbGVjdGlvbiwgZWRpdG9yLCBkb21TZWxlY3Rpb24sIHRhZ3MsIHJvb3RFbGVtZW50KTtcbiAgICAgIH1cblxuICAgICAgdXBkYXRlRE9NQmxvY2tDdXJzb3JFbGVtZW50KGVkaXRvciwgcm9vdEVsZW1lbnQsIHBlbmRpbmdTZWxlY3Rpb24pO1xuXG4gICAgICBpZiAob2JzZXJ2ZXIgIT09IG51bGwpIHtcbiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShyb290RWxlbWVudCwgb2JzZXJ2ZXJPcHRpb25zKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgYWN0aXZlRWRpdG9yID0gcHJldmlvdXNBY3RpdmVFZGl0b3I7XG4gICAgICBhY3RpdmVFZGl0b3JTdGF0ZSA9IHByZXZpb3VzQWN0aXZlRWRpdG9yU3RhdGU7XG4gICAgfVxuICB9XG5cbiAgaWYgKG11dGF0ZWROb2RlcyAhPT0gbnVsbCkge1xuICAgIHRyaWdnZXJNdXRhdGlvbkxpc3RlbmVycyhlZGl0b3IsIGN1cnJlbnRFZGl0b3JTdGF0ZSwgcGVuZGluZ0VkaXRvclN0YXRlLCBtdXRhdGVkTm9kZXMsIHRhZ3MsIGRpcnR5TGVhdmVzKTtcbiAgfVxuXG4gIGlmICghJGlzUmFuZ2VTZWxlY3Rpb24ocGVuZGluZ1NlbGVjdGlvbikgJiYgcGVuZGluZ1NlbGVjdGlvbiAhPT0gbnVsbCAmJiAoY3VycmVudFNlbGVjdGlvbiA9PT0gbnVsbCB8fCAhY3VycmVudFNlbGVjdGlvbi5pcyhwZW5kaW5nU2VsZWN0aW9uKSkpIHtcbiAgICBlZGl0b3IuZGlzcGF0Y2hDb21tYW5kKFNFTEVDVElPTl9DSEFOR0VfQ09NTUFORCwgdW5kZWZpbmVkKTtcbiAgfVxuICAvKipcbiAgICogQ2FwdHVyZSBwZW5kaW5nRGVjb3JhdG9ycyBhZnRlciBnYXJiYWdlIGNvbGxlY3RpbmcgZGV0YWNoZWQgZGVjb3JhdG9yc1xuICAgKi9cblxuXG4gIGNvbnN0IHBlbmRpbmdEZWNvcmF0b3JzID0gZWRpdG9yLl9wZW5kaW5nRGVjb3JhdG9ycztcblxuICBpZiAocGVuZGluZ0RlY29yYXRvcnMgIT09IG51bGwpIHtcbiAgICBlZGl0b3IuX2RlY29yYXRvcnMgPSBwZW5kaW5nRGVjb3JhdG9ycztcbiAgICBlZGl0b3IuX3BlbmRpbmdEZWNvcmF0b3JzID0gbnVsbDtcbiAgICB0cmlnZ2VyTGlzdGVuZXJzKCdkZWNvcmF0b3InLCBlZGl0b3IsIHRydWUsIHBlbmRpbmdEZWNvcmF0b3JzKTtcbiAgfVxuXG4gIHRyaWdnZXJUZXh0Q29udGVudExpc3RlbmVycyhlZGl0b3IsIGN1cnJlbnRFZGl0b3JTdGF0ZSwgcGVuZGluZ0VkaXRvclN0YXRlKTtcbiAgdHJpZ2dlckxpc3RlbmVycygndXBkYXRlJywgZWRpdG9yLCB0cnVlLCB7XG4gICAgZGlydHlFbGVtZW50cyxcbiAgICBkaXJ0eUxlYXZlcyxcbiAgICBlZGl0b3JTdGF0ZTogcGVuZGluZ0VkaXRvclN0YXRlLFxuICAgIG5vcm1hbGl6ZWROb2RlcyxcbiAgICBwcmV2RWRpdG9yU3RhdGU6IGN1cnJlbnRFZGl0b3JTdGF0ZSxcbiAgICB0YWdzXG4gIH0pO1xuICB0cmlnZ2VyRGVmZXJyZWRVcGRhdGVDYWxsYmFja3MoZWRpdG9yLCBkZWZlcnJlZCk7XG4gIHRyaWdnZXJFbnF1ZXVlZFVwZGF0ZXMoZWRpdG9yKTtcbn1cblxuZnVuY3Rpb24gdHJpZ2dlclRleHRDb250ZW50TGlzdGVuZXJzKGVkaXRvciwgY3VycmVudEVkaXRvclN0YXRlLCBwZW5kaW5nRWRpdG9yU3RhdGUpIHtcbiAgY29uc3QgY3VycmVudFRleHRDb250ZW50ID0gZ2V0RWRpdG9yU3RhdGVUZXh0Q29udGVudChjdXJyZW50RWRpdG9yU3RhdGUpO1xuICBjb25zdCBsYXRlc3RUZXh0Q29udGVudCA9IGdldEVkaXRvclN0YXRlVGV4dENvbnRlbnQocGVuZGluZ0VkaXRvclN0YXRlKTtcblxuICBpZiAoY3VycmVudFRleHRDb250ZW50ICE9PSBsYXRlc3RUZXh0Q29udGVudCkge1xuICAgIHRyaWdnZXJMaXN0ZW5lcnMoJ3RleHRjb250ZW50JywgZWRpdG9yLCB0cnVlLCBsYXRlc3RUZXh0Q29udGVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdHJpZ2dlck11dGF0aW9uTGlzdGVuZXJzKGVkaXRvciwgY3VycmVudEVkaXRvclN0YXRlLCBwZW5kaW5nRWRpdG9yU3RhdGUsIG11dGF0ZWROb2RlcywgdXBkYXRlVGFncywgZGlydHlMZWF2ZXMpIHtcbiAgY29uc3QgbGlzdGVuZXJzID0gQXJyYXkuZnJvbShlZGl0b3IuX2xpc3RlbmVycy5tdXRhdGlvbik7XG4gIGNvbnN0IGxpc3RlbmVyc0xlbmd0aCA9IGxpc3RlbmVycy5sZW5ndGg7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnNMZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IFtsaXN0ZW5lciwga2xhc3NdID0gbGlzdGVuZXJzW2ldO1xuICAgIGNvbnN0IG11dGF0ZWROb2Rlc0J5VHlwZSA9IG11dGF0ZWROb2Rlcy5nZXQoa2xhc3MpO1xuXG4gICAgaWYgKG11dGF0ZWROb2Rlc0J5VHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBsaXN0ZW5lcihtdXRhdGVkTm9kZXNCeVR5cGUsIHtcbiAgICAgICAgZGlydHlMZWF2ZXMsXG4gICAgICAgIHVwZGF0ZVRhZ3NcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiB0cmlnZ2VyTGlzdGVuZXJzKHR5cGUsIGVkaXRvciwgaXNDdXJyZW50bHlFbnF1ZXVpbmdVcGRhdGVzLCAuLi5wYXlsb2FkKSB7XG4gIGNvbnN0IHByZXZpb3VzbHlVcGRhdGluZyA9IGVkaXRvci5fdXBkYXRpbmc7XG4gIGVkaXRvci5fdXBkYXRpbmcgPSBpc0N1cnJlbnRseUVucXVldWluZ1VwZGF0ZXM7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSBBcnJheS5mcm9tKGVkaXRvci5fbGlzdGVuZXJzW3R5cGVdKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkobnVsbCwgcGF5bG9hZCk7XG4gICAgfVxuICB9IGZpbmFsbHkge1xuICAgIGVkaXRvci5fdXBkYXRpbmcgPSBwcmV2aW91c2x5VXBkYXRpbmc7XG4gIH1cbn1cbmZ1bmN0aW9uIHRyaWdnZXJDb21tYW5kTGlzdGVuZXJzKGVkaXRvciwgdHlwZSwgcGF5bG9hZCkge1xuICBpZiAoZWRpdG9yLl91cGRhdGluZyA9PT0gZmFsc2UgfHwgYWN0aXZlRWRpdG9yICE9PSBlZGl0b3IpIHtcbiAgICBsZXQgcmV0dXJuVmFsID0gZmFsc2U7XG4gICAgZWRpdG9yLnVwZGF0ZSgoKSA9PiB7XG4gICAgICByZXR1cm5WYWwgPSB0cmlnZ2VyQ29tbWFuZExpc3RlbmVycyhlZGl0b3IsIHR5cGUsIHBheWxvYWQpO1xuICAgIH0pO1xuICAgIHJldHVybiByZXR1cm5WYWw7XG4gIH1cblxuICBjb25zdCBlZGl0b3JzID0gZ2V0RWRpdG9yc1RvUHJvcGFnYXRlKGVkaXRvcik7XG5cbiAgZm9yIChsZXQgaSA9IDQ7IGkgPj0gMDsgaS0tKSB7XG4gICAgZm9yIChsZXQgZSA9IDA7IGUgPCBlZGl0b3JzLmxlbmd0aDsgZSsrKSB7XG4gICAgICBjb25zdCBjdXJyZW50RWRpdG9yID0gZWRpdG9yc1tlXTtcbiAgICAgIGNvbnN0IGNvbW1hbmRMaXN0ZW5lcnMgPSBjdXJyZW50RWRpdG9yLl9jb21tYW5kcztcbiAgICAgIGNvbnN0IGxpc3RlbmVySW5Qcmlvcml0eU9yZGVyID0gY29tbWFuZExpc3RlbmVycy5nZXQodHlwZSk7XG5cbiAgICAgIGlmIChsaXN0ZW5lckluUHJpb3JpdHlPcmRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVyc1NldCA9IGxpc3RlbmVySW5Qcmlvcml0eU9yZGVyW2ldO1xuXG4gICAgICAgIGlmIChsaXN0ZW5lcnNTZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IEFycmF5LmZyb20obGlzdGVuZXJzU2V0KTtcbiAgICAgICAgICBjb25zdCBsaXN0ZW5lcnNMZW5ndGggPSBsaXN0ZW5lcnMubGVuZ3RoO1xuXG4gICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBsaXN0ZW5lcnNMZW5ndGg7IGorKykge1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVyc1tqXShwYXlsb2FkLCBlZGl0b3IpID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gdHJpZ2dlckVucXVldWVkVXBkYXRlcyhlZGl0b3IpIHtcbiAgY29uc3QgcXVldWVkVXBkYXRlcyA9IGVkaXRvci5fdXBkYXRlcztcblxuICBpZiAocXVldWVkVXBkYXRlcy5sZW5ndGggIT09IDApIHtcbiAgICBjb25zdCBxdWV1ZWRVcGRhdGUgPSBxdWV1ZWRVcGRhdGVzLnNoaWZ0KCk7XG5cbiAgICBpZiAocXVldWVkVXBkYXRlKSB7XG4gICAgICBjb25zdCBbdXBkYXRlRm4sIG9wdGlvbnNdID0gcXVldWVkVXBkYXRlO1xuICAgICAgYmVnaW5VcGRhdGUoZWRpdG9yLCB1cGRhdGVGbiwgb3B0aW9ucyk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHRyaWdnZXJEZWZlcnJlZFVwZGF0ZUNhbGxiYWNrcyhlZGl0b3IsIGRlZmVycmVkKSB7XG4gIGVkaXRvci5fZGVmZXJyZWQgPSBbXTtcblxuICBpZiAoZGVmZXJyZWQubGVuZ3RoICE9PSAwKSB7XG4gICAgY29uc3QgcHJldmlvdXNseVVwZGF0aW5nID0gZWRpdG9yLl91cGRhdGluZztcbiAgICBlZGl0b3IuX3VwZGF0aW5nID0gdHJ1ZTtcblxuICAgIHRyeSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlZmVycmVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGRlZmVycmVkW2ldKCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGVkaXRvci5fdXBkYXRpbmcgPSBwcmV2aW91c2x5VXBkYXRpbmc7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NOZXN0ZWRVcGRhdGVzKGVkaXRvciwgaW5pdGlhbFNraXBUcmFuc2Zvcm1zKSB7XG4gIGNvbnN0IHF1ZXVlZFVwZGF0ZXMgPSBlZGl0b3IuX3VwZGF0ZXM7XG4gIGxldCBza2lwVHJhbnNmb3JtcyA9IGluaXRpYWxTa2lwVHJhbnNmb3JtcyB8fCBmYWxzZTsgLy8gVXBkYXRlcyBtaWdodCBncm93IGFzIHdlIHByb2Nlc3MgdGhlbSwgd2Ugc28gd2UnbGwgbmVlZFxuICAvLyB0byBoYW5kbGUgZWFjaCB1cGRhdGUgYXMgd2UgZ28gdW50aWwgdGhlIHVwZGF0ZXMgYXJyYXkgaXNcbiAgLy8gZW1wdHkuXG5cbiAgd2hpbGUgKHF1ZXVlZFVwZGF0ZXMubGVuZ3RoICE9PSAwKSB7XG4gICAgY29uc3QgcXVldWVkVXBkYXRlID0gcXVldWVkVXBkYXRlcy5zaGlmdCgpO1xuXG4gICAgaWYgKHF1ZXVlZFVwZGF0ZSkge1xuICAgICAgY29uc3QgW25leHRVcGRhdGVGbiwgb3B0aW9uc10gPSBxdWV1ZWRVcGRhdGU7XG4gICAgICBsZXQgb25VcGRhdGU7XG4gICAgICBsZXQgdGFnO1xuXG4gICAgICBpZiAob3B0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG9uVXBkYXRlID0gb3B0aW9ucy5vblVwZGF0ZTtcbiAgICAgICAgdGFnID0gb3B0aW9ucy50YWc7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuc2tpcFRyYW5zZm9ybXMpIHtcbiAgICAgICAgICBza2lwVHJhbnNmb3JtcyA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob25VcGRhdGUpIHtcbiAgICAgICAgICBlZGl0b3IuX2RlZmVycmVkLnB1c2gob25VcGRhdGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRhZykge1xuICAgICAgICAgIGVkaXRvci5fdXBkYXRlVGFncy5hZGQodGFnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBuZXh0VXBkYXRlRm4oKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc2tpcFRyYW5zZm9ybXM7XG59XG5cbmZ1bmN0aW9uIGJlZ2luVXBkYXRlKGVkaXRvciwgdXBkYXRlRm4sIG9wdGlvbnMpIHtcbiAgY29uc3QgdXBkYXRlVGFncyA9IGVkaXRvci5fdXBkYXRlVGFncztcbiAgbGV0IG9uVXBkYXRlO1xuICBsZXQgdGFnO1xuICBsZXQgc2tpcFRyYW5zZm9ybXMgPSBmYWxzZTtcbiAgbGV0IGRpc2NyZXRlID0gZmFsc2U7XG5cbiAgaWYgKG9wdGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgIG9uVXBkYXRlID0gb3B0aW9ucy5vblVwZGF0ZTtcbiAgICB0YWcgPSBvcHRpb25zLnRhZztcblxuICAgIGlmICh0YWcgIT0gbnVsbCkge1xuICAgICAgdXBkYXRlVGFncy5hZGQodGFnKTtcbiAgICB9XG5cbiAgICBza2lwVHJhbnNmb3JtcyA9IG9wdGlvbnMuc2tpcFRyYW5zZm9ybXMgfHwgZmFsc2U7XG4gICAgZGlzY3JldGUgPSBvcHRpb25zLmRpc2NyZXRlIHx8IGZhbHNlO1xuICB9XG5cbiAgaWYgKG9uVXBkYXRlKSB7XG4gICAgZWRpdG9yLl9kZWZlcnJlZC5wdXNoKG9uVXBkYXRlKTtcbiAgfVxuXG4gIGNvbnN0IGN1cnJlbnRFZGl0b3JTdGF0ZSA9IGVkaXRvci5fZWRpdG9yU3RhdGU7XG4gIGxldCBwZW5kaW5nRWRpdG9yU3RhdGUgPSBlZGl0b3IuX3BlbmRpbmdFZGl0b3JTdGF0ZTtcbiAgbGV0IGVkaXRvclN0YXRlV2FzQ2xvbmVkID0gZmFsc2U7XG5cbiAgaWYgKHBlbmRpbmdFZGl0b3JTdGF0ZSA9PT0gbnVsbCB8fCBwZW5kaW5nRWRpdG9yU3RhdGUuX3JlYWRPbmx5KSB7XG4gICAgcGVuZGluZ0VkaXRvclN0YXRlID0gZWRpdG9yLl9wZW5kaW5nRWRpdG9yU3RhdGUgPSBjbG9uZUVkaXRvclN0YXRlKHBlbmRpbmdFZGl0b3JTdGF0ZSB8fCBjdXJyZW50RWRpdG9yU3RhdGUpO1xuICAgIGVkaXRvclN0YXRlV2FzQ2xvbmVkID0gdHJ1ZTtcbiAgfVxuXG4gIHBlbmRpbmdFZGl0b3JTdGF0ZS5fZmx1c2hTeW5jID0gZGlzY3JldGU7XG4gIGNvbnN0IHByZXZpb3VzQWN0aXZlRWRpdG9yU3RhdGUgPSBhY3RpdmVFZGl0b3JTdGF0ZTtcbiAgY29uc3QgcHJldmlvdXNSZWFkT25seU1vZGUgPSBpc1JlYWRPbmx5TW9kZTtcbiAgY29uc3QgcHJldmlvdXNBY3RpdmVFZGl0b3IgPSBhY3RpdmVFZGl0b3I7XG4gIGNvbnN0IHByZXZpb3VzbHlVcGRhdGluZyA9IGVkaXRvci5fdXBkYXRpbmc7XG4gIGFjdGl2ZUVkaXRvclN0YXRlID0gcGVuZGluZ0VkaXRvclN0YXRlO1xuICBpc1JlYWRPbmx5TW9kZSA9IGZhbHNlO1xuICBlZGl0b3IuX3VwZGF0aW5nID0gdHJ1ZTtcbiAgYWN0aXZlRWRpdG9yID0gZWRpdG9yO1xuXG4gIHRyeSB7XG4gICAgaWYgKGVkaXRvclN0YXRlV2FzQ2xvbmVkKSB7XG4gICAgICBpZiAoZWRpdG9yLl9oZWFkbGVzcykge1xuICAgICAgICBpZiAoY3VycmVudEVkaXRvclN0YXRlLl9zZWxlY3Rpb24gIT0gbnVsbCkge1xuICAgICAgICAgIHBlbmRpbmdFZGl0b3JTdGF0ZS5fc2VsZWN0aW9uID0gY3VycmVudEVkaXRvclN0YXRlLl9zZWxlY3Rpb24uY2xvbmUoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGVuZGluZ0VkaXRvclN0YXRlLl9zZWxlY3Rpb24gPSBpbnRlcm5hbENyZWF0ZVNlbGVjdGlvbihlZGl0b3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0aW5nQ29tcG9zaXRpb25LZXkgPSBlZGl0b3IuX2NvbXBvc2l0aW9uS2V5O1xuICAgIHVwZGF0ZUZuKCk7XG4gICAgc2tpcFRyYW5zZm9ybXMgPSBwcm9jZXNzTmVzdGVkVXBkYXRlcyhlZGl0b3IsIHNraXBUcmFuc2Zvcm1zKTtcbiAgICBhcHBseVNlbGVjdGlvblRyYW5zZm9ybXMocGVuZGluZ0VkaXRvclN0YXRlLCBlZGl0b3IpO1xuXG4gICAgaWYgKGVkaXRvci5fZGlydHlUeXBlICE9PSBOT19ESVJUWV9OT0RFUykge1xuICAgICAgaWYgKHNraXBUcmFuc2Zvcm1zKSB7XG4gICAgICAgICRub3JtYWxpemVBbGxEaXJ0eVRleHROb2RlcyhwZW5kaW5nRWRpdG9yU3RhdGUsIGVkaXRvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkYXBwbHlBbGxUcmFuc2Zvcm1zKHBlbmRpbmdFZGl0b3JTdGF0ZSwgZWRpdG9yKTtcbiAgICAgIH1cblxuICAgICAgcHJvY2Vzc05lc3RlZFVwZGF0ZXMoZWRpdG9yKTtcbiAgICAgICRnYXJiYWdlQ29sbGVjdERldGFjaGVkTm9kZXMoY3VycmVudEVkaXRvclN0YXRlLCBwZW5kaW5nRWRpdG9yU3RhdGUsIGVkaXRvci5fZGlydHlMZWF2ZXMsIGVkaXRvci5fZGlydHlFbGVtZW50cyk7XG4gICAgfVxuXG4gICAgY29uc3QgZW5kaW5nQ29tcG9zaXRpb25LZXkgPSBlZGl0b3IuX2NvbXBvc2l0aW9uS2V5O1xuXG4gICAgaWYgKHN0YXJ0aW5nQ29tcG9zaXRpb25LZXkgIT09IGVuZGluZ0NvbXBvc2l0aW9uS2V5KSB7XG4gICAgICBwZW5kaW5nRWRpdG9yU3RhdGUuX2ZsdXNoU3luYyA9IHRydWU7XG4gICAgfVxuXG4gICAgY29uc3QgcGVuZGluZ1NlbGVjdGlvbiA9IHBlbmRpbmdFZGl0b3JTdGF0ZS5fc2VsZWN0aW9uO1xuXG4gICAgaWYgKCRpc1JhbmdlU2VsZWN0aW9uKHBlbmRpbmdTZWxlY3Rpb24pKSB7XG4gICAgICBjb25zdCBwZW5kaW5nTm9kZU1hcCA9IHBlbmRpbmdFZGl0b3JTdGF0ZS5fbm9kZU1hcDtcbiAgICAgIGNvbnN0IGFuY2hvcktleSA9IHBlbmRpbmdTZWxlY3Rpb24uYW5jaG9yLmtleTtcbiAgICAgIGNvbnN0IGZvY3VzS2V5ID0gcGVuZGluZ1NlbGVjdGlvbi5mb2N1cy5rZXk7XG5cbiAgICAgIGlmIChwZW5kaW5nTm9kZU1hcC5nZXQoYW5jaG9yS2V5KSA9PT0gdW5kZWZpbmVkIHx8IHBlbmRpbmdOb2RlTWFwLmdldChmb2N1c0tleSkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB7XG4gICAgICAgICAgdGhyb3cgRXJyb3IoYHVwZGF0ZUVkaXRvcjogc2VsZWN0aW9uIGhhcyBiZWVuIGxvc3QgYmVjYXVzZSB0aGUgcHJldmlvdXNseSBzZWxlY3RlZCBub2RlcyBoYXZlIGJlZW4gcmVtb3ZlZCBhbmQgc2VsZWN0aW9uIHdhc24ndCBtb3ZlZCB0byBhbm90aGVyIG5vZGUuIEVuc3VyZSBzZWxlY3Rpb24gY2hhbmdlcyBhZnRlciByZW1vdmluZy9yZXBsYWNpbmcgYSBzZWxlY3RlZCBub2RlLmApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICgkaXNOb2RlU2VsZWN0aW9uKHBlbmRpbmdTZWxlY3Rpb24pKSB7XG4gICAgICAvLyBUT0RPOiB3ZSBzaG91bGQgYWxzbyB2YWxpZGF0ZSBub2RlIHNlbGVjdGlvbj9cbiAgICAgIGlmIChwZW5kaW5nU2VsZWN0aW9uLl9ub2Rlcy5zaXplID09PSAwKSB7XG4gICAgICAgIHBlbmRpbmdFZGl0b3JTdGF0ZS5fc2VsZWN0aW9uID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gUmVwb3J0IGVycm9yc1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBlZGl0b3IuX29uRXJyb3IoZXJyb3IpO1xuICAgIH0gLy8gUmVzdG9yZSBleGlzdGluZyBlZGl0b3Igc3RhdGUgdG8gdGhlIERPTVxuXG5cbiAgICBlZGl0b3IuX3BlbmRpbmdFZGl0b3JTdGF0ZSA9IGN1cnJlbnRFZGl0b3JTdGF0ZTtcbiAgICBlZGl0b3IuX2RpcnR5VHlwZSA9IEZVTExfUkVDT05DSUxFO1xuXG4gICAgZWRpdG9yLl9jbG9uZU5vdE5lZWRlZC5jbGVhcigpO1xuXG4gICAgZWRpdG9yLl9kaXJ0eUxlYXZlcyA9IG5ldyBTZXQoKTtcblxuICAgIGVkaXRvci5fZGlydHlFbGVtZW50cy5jbGVhcigpO1xuXG4gICAgY29tbWl0UGVuZGluZ1VwZGF0ZXMoZWRpdG9yKTtcbiAgICByZXR1cm47XG4gIH0gZmluYWxseSB7XG4gICAgYWN0aXZlRWRpdG9yU3RhdGUgPSBwcmV2aW91c0FjdGl2ZUVkaXRvclN0YXRlO1xuICAgIGlzUmVhZE9ubHlNb2RlID0gcHJldmlvdXNSZWFkT25seU1vZGU7XG4gICAgYWN0aXZlRWRpdG9yID0gcHJldmlvdXNBY3RpdmVFZGl0b3I7XG4gICAgZWRpdG9yLl91cGRhdGluZyA9IHByZXZpb3VzbHlVcGRhdGluZztcbiAgICBpbmZpbml0ZVRyYW5zZm9ybUNvdW50ID0gMDtcbiAgfVxuXG4gIGNvbnN0IHNob3VsZFVwZGF0ZSA9IGVkaXRvci5fZGlydHlUeXBlICE9PSBOT19ESVJUWV9OT0RFUyB8fCBlZGl0b3JTdGF0ZUhhc0RpcnR5U2VsZWN0aW9uKHBlbmRpbmdFZGl0b3JTdGF0ZSwgZWRpdG9yKTtcblxuICBpZiAoc2hvdWxkVXBkYXRlKSB7XG4gICAgaWYgKHBlbmRpbmdFZGl0b3JTdGF0ZS5fZmx1c2hTeW5jKSB7XG4gICAgICBwZW5kaW5nRWRpdG9yU3RhdGUuX2ZsdXNoU3luYyA9IGZhbHNlO1xuICAgICAgY29tbWl0UGVuZGluZ1VwZGF0ZXMoZWRpdG9yKTtcbiAgICB9IGVsc2UgaWYgKGVkaXRvclN0YXRlV2FzQ2xvbmVkKSB7XG4gICAgICBzY2hlZHVsZU1pY3JvVGFzaygoKSA9PiB7XG4gICAgICAgIGNvbW1pdFBlbmRpbmdVcGRhdGVzKGVkaXRvcik7XG4gICAgICB9KTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcGVuZGluZ0VkaXRvclN0YXRlLl9mbHVzaFN5bmMgPSBmYWxzZTtcblxuICAgIGlmIChlZGl0b3JTdGF0ZVdhc0Nsb25lZCkge1xuICAgICAgdXBkYXRlVGFncy5jbGVhcigpO1xuICAgICAgZWRpdG9yLl9kZWZlcnJlZCA9IFtdO1xuICAgICAgZWRpdG9yLl9wZW5kaW5nRWRpdG9yU3RhdGUgPSBudWxsO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiB1cGRhdGVFZGl0b3IoZWRpdG9yLCB1cGRhdGVGbiwgb3B0aW9ucykge1xuICBpZiAoZWRpdG9yLl91cGRhdGluZykge1xuICAgIGVkaXRvci5fdXBkYXRlcy5wdXNoKFt1cGRhdGVGbiwgb3B0aW9uc10pO1xuICB9IGVsc2Uge1xuICAgIGJlZ2luVXBkYXRlKGVkaXRvciwgdXBkYXRlRm4sIG9wdGlvbnMpO1xuICB9XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZVRvUmVtb3ZlLCByZXN0b3JlU2VsZWN0aW9uLCBwcmVzZXJ2ZUVtcHR5UGFyZW50KSB7XG4gIGVycm9yT25SZWFkT25seSgpO1xuICBjb25zdCBrZXkgPSBub2RlVG9SZW1vdmUuX19rZXk7XG4gIGNvbnN0IHBhcmVudCA9IG5vZGVUb1JlbW92ZS5nZXRQYXJlbnQoKTtcblxuICBpZiAocGFyZW50ID09PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qgc2VsZWN0aW9uID0gJG1heWJlTW92ZUNoaWxkcmVuU2VsZWN0aW9uVG9QYXJlbnQobm9kZVRvUmVtb3ZlKTtcbiAgbGV0IHNlbGVjdGlvbk1vdmVkID0gZmFsc2U7XG5cbiAgaWYgKCRpc1JhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikgJiYgcmVzdG9yZVNlbGVjdGlvbikge1xuICAgIGNvbnN0IGFuY2hvciA9IHNlbGVjdGlvbi5hbmNob3I7XG4gICAgY29uc3QgZm9jdXMgPSBzZWxlY3Rpb24uZm9jdXM7XG5cbiAgICBpZiAoYW5jaG9yLmtleSA9PT0ga2V5KSB7XG4gICAgICBtb3ZlU2VsZWN0aW9uUG9pbnRUb1NpYmxpbmcoYW5jaG9yLCBub2RlVG9SZW1vdmUsIHBhcmVudCwgbm9kZVRvUmVtb3ZlLmdldFByZXZpb3VzU2libGluZygpLCBub2RlVG9SZW1vdmUuZ2V0TmV4dFNpYmxpbmcoKSk7XG4gICAgICBzZWxlY3Rpb25Nb3ZlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGZvY3VzLmtleSA9PT0ga2V5KSB7XG4gICAgICBtb3ZlU2VsZWN0aW9uUG9pbnRUb1NpYmxpbmcoZm9jdXMsIG5vZGVUb1JlbW92ZSwgcGFyZW50LCBub2RlVG9SZW1vdmUuZ2V0UHJldmlvdXNTaWJsaW5nKCksIG5vZGVUb1JlbW92ZS5nZXROZXh0U2libGluZygpKTtcbiAgICAgIHNlbGVjdGlvbk1vdmVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBpZiAoJGlzUmFuZ2VTZWxlY3Rpb24oc2VsZWN0aW9uKSAmJiByZXN0b3JlU2VsZWN0aW9uICYmICFzZWxlY3Rpb25Nb3ZlZCkge1xuICAgIC8vIERvaW5nIHRoaXMgaXMgTyhuKSBzbyBsZXRzIGF2b2lkIGl0IHVubGVzcyB3ZSBuZWVkIHRvIGRvIGl0XG4gICAgY29uc3QgaW5kZXggPSBub2RlVG9SZW1vdmUuZ2V0SW5kZXhXaXRoaW5QYXJlbnQoKTtcbiAgICByZW1vdmVGcm9tUGFyZW50KG5vZGVUb1JlbW92ZSk7XG4gICAgJHVwZGF0ZUVsZW1lbnRTZWxlY3Rpb25PbkNyZWF0ZURlbGV0ZU5vZGUoc2VsZWN0aW9uLCBwYXJlbnQsIGluZGV4LCAtMSk7XG4gIH0gZWxzZSB7XG4gICAgcmVtb3ZlRnJvbVBhcmVudChub2RlVG9SZW1vdmUpO1xuICB9XG5cbiAgaWYgKCFwcmVzZXJ2ZUVtcHR5UGFyZW50ICYmICEkaXNSb290T3JTaGFkb3dSb290KHBhcmVudCkgJiYgIXBhcmVudC5jYW5CZUVtcHR5KCkgJiYgcGFyZW50LmlzRW1wdHkoKSkge1xuICAgIHJlbW92ZU5vZGUocGFyZW50LCByZXN0b3JlU2VsZWN0aW9uKTtcbiAgfVxuXG4gIGlmIChyZXN0b3JlU2VsZWN0aW9uICYmICRpc1Jvb3ROb2RlKHBhcmVudCkgJiYgcGFyZW50LmlzRW1wdHkoKSkge1xuICAgIHBhcmVudC5zZWxlY3RFbmQoKTtcbiAgfVxufVxuY2xhc3MgTGV4aWNhbE5vZGUge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAvLyBGbG93IGRvZXNuJ3Qgc3VwcG9ydCBhYnN0cmFjdCBjbGFzc2VzIHVuZm9ydHVuYXRlbHksIHNvIHdlIGNhbid0IF9mb3JjZV9cbiAgLy8gc3ViY2xhc3NlcyBvZiBOb2RlIHRvIGltcGxlbWVudCBzdGF0aWNzLiBBbGwgc3ViY2xhc3NlcyBvZiBOb2RlIHNob3VsZCBoYXZlXG4gIC8vIGEgc3RhdGljIGdldFR5cGUgYW5kIGNsb25lIG1ldGhvZCB0aG91Z2guIFdlIGRlZmluZSBnZXRUeXBlIGFuZCBjbG9uZSBoZXJlIHNvIHdlIGNhbiBjYWxsIGl0XG4gIC8vIG9uIGFueSAgTm9kZSwgYW5kIHdlIHRocm93IHRoaXMgZXJyb3IgYnkgZGVmYXVsdCBzaW5jZSB0aGUgc3ViY2xhc3Mgc2hvdWxkIHByb3ZpZGVcbiAgLy8gdGhlaXIgb3duIGltcGxlbWVudGF0aW9uLlxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBzdHJpbmcgdHlwZSBvZiB0aGlzIG5vZGUuIEV2ZXJ5IG5vZGUgbXVzdFxuICAgKiBpbXBsZW1lbnQgdGhpcyBhbmQgaXQgTVVTVCBCRSBVTklRVUUgYW1vbmdzdCBub2RlcyByZWdpc3RlcmVkXG4gICAqIG9uIHRoZSBlZGl0b3IuXG4gICAqXG4gICAqL1xuICBzdGF0aWMgZ2V0VHlwZSgpIHtcbiAgICB7XG4gICAgICB0aHJvdyBFcnJvcihgTGV4aWNhbE5vZGU6IE5vZGUgJHt0aGlzLm5hbWV9IGRvZXMgbm90IGltcGxlbWVudCAuZ2V0VHlwZSgpLmApO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ2xvbmVzIHRoaXMgbm9kZSwgY3JlYXRpbmcgYSBuZXcgbm9kZSB3aXRoIGEgZGlmZmVyZW50IGtleVxuICAgKiBhbmQgYWRkaW5nIGl0IHRvIHRoZSBFZGl0b3JTdGF0ZSAoYnV0IG5vdCBhdHRhY2hpbmcgaXQgYW55d2hlcmUhKS4gQWxsIG5vZGVzIG11c3RcbiAgICogaW1wbGVtZW50IHRoaXMgbWV0aG9kLlxuICAgKlxuICAgKi9cblxuXG4gIHN0YXRpYyBjbG9uZShfZGF0YSkge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGBMZXhpY2FsTm9kZTogTm9kZSAke3RoaXMubmFtZX0gZG9lcyBub3QgaW1wbGVtZW50IC5jbG9uZSgpLmApO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGtleSkge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICB0aGlzLl9fdHlwZSA9IHRoaXMuY29uc3RydWN0b3IuZ2V0VHlwZSgpO1xuICAgIHRoaXMuX19wYXJlbnQgPSBudWxsO1xuICAgIHRoaXMuX19wcmV2ID0gbnVsbDtcbiAgICB0aGlzLl9fbmV4dCA9IG51bGw7XG4gICAgJHNldE5vZGVLZXkodGhpcywga2V5KTtcblxuICAgIHtcbiAgICAgIGlmICh0aGlzLl9fdHlwZSAhPT0gJ3Jvb3QnKSB7XG4gICAgICAgIGVycm9yT25SZWFkT25seSgpO1xuICAgICAgICBlcnJvck9uVHlwZUtsYXNzTWlzbWF0Y2godGhpcy5fX3R5cGUsIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gLy8gR2V0dGVycyBhbmQgVHJhdmVyc2Vyc1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBzdHJpbmcgdHlwZSBvZiB0aGlzIG5vZGUuXG4gICAqL1xuXG5cbiAgZ2V0VHlwZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fX3R5cGU7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGVyZSBpcyBhIHBhdGggYmV0d2VlbiB0aGlzIG5vZGUgYW5kIHRoZSBSb290Tm9kZSwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKiBUaGlzIGlzIGEgd2F5IG9mIGRldGVybWluaW5nIGlmIHRoZSBub2RlIGlzIFwiYXR0YWNoZWRcIiBFZGl0b3JTdGF0ZS4gVW5hdHRhY2hlZCBub2Rlc1xuICAgKiB3b24ndCBiZSByZWNvbmNpbGVkIGFuZCB3aWxsIHVsdGltYXRlbHQgYmUgY2xlYW5lZCB1cCBieSB0aGUgTGV4aWNhbCBHQy5cbiAgICovXG5cblxuICBpc0F0dGFjaGVkKCkge1xuICAgIGxldCBub2RlS2V5ID0gdGhpcy5fX2tleTtcblxuICAgIHdoaWxlIChub2RlS2V5ICE9PSBudWxsKSB7XG4gICAgICBpZiAobm9kZUtleSA9PT0gJ3Jvb3QnKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBub2RlID0gJGdldE5vZGVCeUtleShub2RlS2V5KTtcblxuICAgICAgaWYgKG5vZGUgPT09IG51bGwpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIG5vZGVLZXkgPSBub2RlLl9fcGFyZW50O1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgbm9kZSBpcyBjb250YWluZWQgd2l0aGluIHRoZSBwcm92aWRlZCBTZWxlY3Rpb24uLCBmYWxzZSBvdGhlcndpc2UuXG4gICAqIFJlbGllcyBvbiB0aGUgYWxnb3JpdGhtcyBpbXBsZW1lbnRlZCBpbiB7QGxpbmsgQmFzZVNlbGVjdGlvbi5nZXROb2Rlc30gdG8gZGV0ZXJtaW5lXG4gICAqIHdoYXQncyBpbmNsdWRlZC5cbiAgICpcbiAgICogQHBhcmFtIHNlbGVjdGlvbiAtIFRoZSBzZWxlY3Rpb24gdGhhdCB3ZSB3YW50IHRvIGRldGVybWluZSBpZiB0aGUgbm9kZSBpcyBpbi5cbiAgICovXG5cblxuICBpc1NlbGVjdGVkKHNlbGVjdGlvbikge1xuICAgIGNvbnN0IHRhcmdldFNlbGVjdGlvbiA9IHNlbGVjdGlvbiB8fCAkZ2V0U2VsZWN0aW9uKCk7XG5cbiAgICBpZiAodGFyZ2V0U2VsZWN0aW9uID09IG51bGwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBpc1NlbGVjdGVkID0gdGFyZ2V0U2VsZWN0aW9uLmdldE5vZGVzKCkuc29tZShuID0+IG4uX19rZXkgPT09IHRoaXMuX19rZXkpO1xuXG4gICAgaWYgKCRpc1RleHROb2RlKHRoaXMpKSB7XG4gICAgICByZXR1cm4gaXNTZWxlY3RlZDtcbiAgICB9IC8vIEZvciBpbmxpbmUgaW1hZ2VzIGluc2lkZSBvZiBlbGVtZW50IG5vZGVzLlxuICAgIC8vIFdpdGhvdXQgdGhpcyBjaGFuZ2UgdGhlIGltYWdlIHdpbGwgYmUgc2VsZWN0ZWQgaWYgdGhlIGN1cnNvciBpcyBiZWZvcmUgb3IgYWZ0ZXIgaXQuXG5cblxuICAgIGlmICgkaXNSYW5nZVNlbGVjdGlvbih0YXJnZXRTZWxlY3Rpb24pICYmIHRhcmdldFNlbGVjdGlvbi5hbmNob3IudHlwZSA9PT0gJ2VsZW1lbnQnICYmIHRhcmdldFNlbGVjdGlvbi5mb2N1cy50eXBlID09PSAnZWxlbWVudCcgJiYgdGFyZ2V0U2VsZWN0aW9uLmFuY2hvci5rZXkgPT09IHRhcmdldFNlbGVjdGlvbi5mb2N1cy5rZXkgJiYgdGFyZ2V0U2VsZWN0aW9uLmFuY2hvci5vZmZzZXQgPT09IHRhcmdldFNlbGVjdGlvbi5mb2N1cy5vZmZzZXQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gaXNTZWxlY3RlZDtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGlzIG5vZGVzIGtleS5cbiAgICovXG5cblxuICBnZXRLZXkoKSB7XG4gICAgLy8gS2V5IGlzIHN0YWJsZSBiZXR3ZWVuIGNvcGllc1xuICAgIHJldHVybiB0aGlzLl9fa2V5O1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB6ZXJvLWJhc2VkIGluZGV4IG9mIHRoaXMgbm9kZSB3aXRoaW4gdGhlIHBhcmVudC5cbiAgICovXG5cblxuICBnZXRJbmRleFdpdGhpblBhcmVudCgpIHtcbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmdldFBhcmVudCgpO1xuXG4gICAgaWYgKHBhcmVudCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIGxldCBub2RlID0gcGFyZW50LmdldEZpcnN0Q2hpbGQoKTtcbiAgICBsZXQgaW5kZXggPSAwO1xuXG4gICAgd2hpbGUgKG5vZGUgIT09IG51bGwpIHtcbiAgICAgIGlmICh0aGlzLmlzKG5vZGUpKSB7XG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgIH1cblxuICAgICAgaW5kZXgrKztcbiAgICAgIG5vZGUgPSBub2RlLmdldE5leHRTaWJsaW5nKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIC0xO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBwYXJlbnQgb2YgdGhpcyBub2RlLCBvciBudWxsIGlmIG5vbmUgaXMgZm91bmQuXG4gICAqL1xuXG5cbiAgZ2V0UGFyZW50KCkge1xuICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuZ2V0TGF0ZXN0KCkuX19wYXJlbnQ7XG5cbiAgICBpZiAocGFyZW50ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gJGdldE5vZGVCeUtleShwYXJlbnQpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBwYXJlbnQgb2YgdGhpcyBub2RlLCBvciB0aHJvd3MgaWYgbm9uZSBpcyBmb3VuZC5cbiAgICovXG5cblxuICBnZXRQYXJlbnRPclRocm93KCkge1xuICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuZ2V0UGFyZW50KCk7XG5cbiAgICBpZiAocGFyZW50ID09PSBudWxsKSB7XG4gICAgICB7XG4gICAgICAgIHRocm93IEVycm9yKGBFeHBlY3RlZCBub2RlICR7dGhpcy5fX2tleX0gdG8gaGF2ZSBhIHBhcmVudC5gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcGFyZW50O1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBoaWdoZXN0IChpbiB0aGUgRWRpdG9yU3RhdGUgdHJlZSlcbiAgICogbm9uLXJvb3QgYW5jZXN0b3Igb2YgdGhpcyBub2RlLCBvciBudWxsIGlmIG5vbmUgaXMgZm91bmQuIFNlZSB7QGxpbmsgbGV4aWNhbCEkaXNSb290T3JTaGFkb3dSb290fVxuICAgKiBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiB3aGljaCBFbGVtZW50cyBjb21wcmlzZSBcInJvb3RzXCIuXG4gICAqL1xuXG5cbiAgZ2V0VG9wTGV2ZWxFbGVtZW50KCkge1xuICAgIGxldCBub2RlID0gdGhpcztcblxuICAgIHdoaWxlIChub2RlICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBwYXJlbnQgPSBub2RlLmdldFBhcmVudCgpO1xuXG4gICAgICBpZiAoJGlzUm9vdE9yU2hhZG93Um9vdChwYXJlbnQpKSB7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgICAgfVxuXG4gICAgICBub2RlID0gcGFyZW50O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBoaWdoZXN0IChpbiB0aGUgRWRpdG9yU3RhdGUgdHJlZSlcbiAgICogbm9uLXJvb3QgYW5jZXN0b3Igb2YgdGhpcyBub2RlLCBvciB0aHJvd3MgaWYgbm9uZSBpcyBmb3VuZC4gU2VlIHtAbGluayBsZXhpY2FsISRpc1Jvb3RPclNoYWRvd1Jvb3R9XG4gICAqIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHdoaWNoIEVsZW1lbnRzIGNvbXByaXNlIFwicm9vdHNcIi5cbiAgICovXG5cblxuICBnZXRUb3BMZXZlbEVsZW1lbnRPclRocm93KCkge1xuICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuZ2V0VG9wTGV2ZWxFbGVtZW50KCk7XG5cbiAgICBpZiAocGFyZW50ID09PSBudWxsKSB7XG4gICAgICB7XG4gICAgICAgIHRocm93IEVycm9yKGBFeHBlY3RlZCBub2RlICR7dGhpcy5fX2tleX0gdG8gaGF2ZSBhIHRvcCBwYXJlbnQgZWxlbWVudC5gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcGFyZW50O1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbGlzdCBvZiB0aGUgZXZlcnkgYW5jZXN0b3Igb2YgdGhpcyBub2RlLFxuICAgKiBhbGwgdGhlIHdheSB1cCB0byB0aGUgUm9vdE5vZGUuXG4gICAqXG4gICAqL1xuXG5cbiAgZ2V0UGFyZW50cygpIHtcbiAgICBjb25zdCBwYXJlbnRzID0gW107XG4gICAgbGV0IG5vZGUgPSB0aGlzLmdldFBhcmVudCgpO1xuXG4gICAgd2hpbGUgKG5vZGUgIT09IG51bGwpIHtcbiAgICAgIHBhcmVudHMucHVzaChub2RlKTtcbiAgICAgIG5vZGUgPSBub2RlLmdldFBhcmVudCgpO1xuICAgIH1cblxuICAgIHJldHVybiBwYXJlbnRzO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbGlzdCBvZiB0aGUga2V5cyBvZiBldmVyeSBhbmNlc3RvciBvZiB0aGlzIG5vZGUsXG4gICAqIGFsbCB0aGUgd2F5IHVwIHRvIHRoZSBSb290Tm9kZS5cbiAgICpcbiAgICovXG5cblxuICBnZXRQYXJlbnRLZXlzKCkge1xuICAgIGNvbnN0IHBhcmVudHMgPSBbXTtcbiAgICBsZXQgbm9kZSA9IHRoaXMuZ2V0UGFyZW50KCk7XG5cbiAgICB3aGlsZSAobm9kZSAhPT0gbnVsbCkge1xuICAgICAgcGFyZW50cy5wdXNoKG5vZGUuX19rZXkpO1xuICAgICAgbm9kZSA9IG5vZGUuZ2V0UGFyZW50KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcmVudHM7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIFwicHJldmlvdXNcIiBzaWJsaW5ncyAtIHRoYXQgaXMsIHRoZSBub2RlIHRoYXQgY29tZXNcbiAgICogYmVmb3JlIHRoaXMgb25lIGluIHRoZSBzYW1lIHBhcmVudC5cbiAgICpcbiAgICovXG5cblxuICBnZXRQcmV2aW91c1NpYmxpbmcoKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0TGF0ZXN0KCk7XG4gICAgY29uc3QgcHJldktleSA9IHNlbGYuX19wcmV2O1xuICAgIHJldHVybiBwcmV2S2V5ID09PSBudWxsID8gbnVsbCA6ICRnZXROb2RlQnlLZXkocHJldktleSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIFwicHJldmlvdXNcIiBzaWJsaW5ncyAtIHRoYXQgaXMsIHRoZSBub2RlcyB0aGF0IGNvbWUgYmV0d2VlblxuICAgKiB0aGlzIG9uZSBhbmQgdGhlIGZpcnN0IGNoaWxkIG9mIGl0J3MgcGFyZW50LCBpbmNsdXNpdmUuXG4gICAqXG4gICAqL1xuXG5cbiAgZ2V0UHJldmlvdXNTaWJsaW5ncygpIHtcbiAgICBjb25zdCBzaWJsaW5ncyA9IFtdO1xuICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuZ2V0UGFyZW50KCk7XG5cbiAgICBpZiAocGFyZW50ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gc2libGluZ3M7XG4gICAgfVxuXG4gICAgbGV0IG5vZGUgPSBwYXJlbnQuZ2V0Rmlyc3RDaGlsZCgpO1xuXG4gICAgd2hpbGUgKG5vZGUgIT09IG51bGwpIHtcbiAgICAgIGlmIChub2RlLmlzKHRoaXMpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBzaWJsaW5ncy5wdXNoKG5vZGUpO1xuICAgICAgbm9kZSA9IG5vZGUuZ2V0TmV4dFNpYmxpbmcoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2libGluZ3M7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIFwibmV4dFwiIHNpYmxpbmdzIC0gdGhhdCBpcywgdGhlIG5vZGUgdGhhdCBjb21lc1xuICAgKiBhZnRlciB0aGlzIG9uZSBpbiB0aGUgc2FtZSBwYXJlbnRcbiAgICpcbiAgICovXG5cblxuICBnZXROZXh0U2libGluZygpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcy5nZXRMYXRlc3QoKTtcbiAgICBjb25zdCBuZXh0S2V5ID0gc2VsZi5fX25leHQ7XG4gICAgcmV0dXJuIG5leHRLZXkgPT09IG51bGwgPyBudWxsIDogJGdldE5vZGVCeUtleShuZXh0S2V5KTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbGwgXCJuZXh0XCIgc2libGluZ3MgLSB0aGF0IGlzLCB0aGUgbm9kZXMgdGhhdCBjb21lIGJldHdlZW4gdGhpc1xuICAgKiBvbmUgYW5kIHRoZSBsYXN0IGNoaWxkIG9mIGl0J3MgcGFyZW50LCBpbmNsdXNpdmUuXG4gICAqXG4gICAqL1xuXG5cbiAgZ2V0TmV4dFNpYmxpbmdzKCkge1xuICAgIGNvbnN0IHNpYmxpbmdzID0gW107XG4gICAgbGV0IG5vZGUgPSB0aGlzLmdldE5leHRTaWJsaW5nKCk7XG5cbiAgICB3aGlsZSAobm9kZSAhPT0gbnVsbCkge1xuICAgICAgc2libGluZ3MucHVzaChub2RlKTtcbiAgICAgIG5vZGUgPSBub2RlLmdldE5leHRTaWJsaW5nKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNpYmxpbmdzO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjbG9zZXN0IGNvbW1vbiBhbmNlc3RvciBvZiB0aGlzIG5vZGUgYW5kIHRoZSBwcm92aWRlZCBvbmUgb3IgbnVsbFxuICAgKiBpZiBvbmUgY2Fubm90IGJlIGZvdW5kLlxuICAgKlxuICAgKiBAcGFyYW0gbm9kZSAtIHRoZSBvdGhlciBub2RlIHRvIGZpbmQgdGhlIGNvbW1vbiBhbmNlc3RvciBvZi5cbiAgICovXG5cblxuICBnZXRDb21tb25BbmNlc3Rvcihub2RlKSB7XG4gICAgY29uc3QgYSA9IHRoaXMuZ2V0UGFyZW50cygpO1xuICAgIGNvbnN0IGIgPSBub2RlLmdldFBhcmVudHMoKTtcblxuICAgIGlmICgkaXNFbGVtZW50Tm9kZSh0aGlzKSkge1xuICAgICAgYS51bnNoaWZ0KHRoaXMpO1xuICAgIH1cblxuICAgIGlmICgkaXNFbGVtZW50Tm9kZShub2RlKSkge1xuICAgICAgYi51bnNoaWZ0KG5vZGUpO1xuICAgIH1cblxuICAgIGNvbnN0IGFMZW5ndGggPSBhLmxlbmd0aDtcbiAgICBjb25zdCBiTGVuZ3RoID0gYi5sZW5ndGg7XG5cbiAgICBpZiAoYUxlbmd0aCA9PT0gMCB8fCBiTGVuZ3RoID09PSAwIHx8IGFbYUxlbmd0aCAtIDFdICE9PSBiW2JMZW5ndGggLSAxXSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgYlNldCA9IG5ldyBTZXQoYik7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFMZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYW5jZXN0b3IgPSBhW2ldO1xuXG4gICAgICBpZiAoYlNldC5oYXMoYW5jZXN0b3IpKSB7XG4gICAgICAgIHJldHVybiBhbmNlc3RvcjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCBub2RlIGlzIHRoZSBleGFjdCBzYW1lIG9uZSBhcyB0aGlzIG5vZGUsIGZyb20gTGV4aWNhbCdzIHBlcnNwZWN0aXZlLlxuICAgKiBBbHdheXMgdXNlIHRoaXMgaW5zdGVhZCBvZiByZWZlcmVudGlhbCBlcXVhbGl0eS5cbiAgICpcbiAgICogQHBhcmFtIG9iamVjdCAtIHRoZSBub2RlIHRvIHBlcmZvcm0gdGhlIGVxdWFsaXR5IGNvbXBhcmlzb24gb24uXG4gICAqL1xuXG5cbiAgaXMob2JqZWN0KSB7XG4gICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX19rZXkgPT09IG9iamVjdC5fX2tleTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgbm9kZSBsb2dpY2FsIHByZWNlZGVzIHRoZSB0YXJnZXQgbm9kZSBpbiB0aGUgZWRpdG9yIHN0YXRlLlxuICAgKlxuICAgKiBAcGFyYW0gdGFyZ2V0Tm9kZSAtIHRoZSBub2RlIHdlJ3JlIHRlc3RpbmcgdG8gc2VlIGlmIGl0J3MgYWZ0ZXIgdGhpcyBvbmUuXG4gICAqL1xuXG5cbiAgaXNCZWZvcmUodGFyZ2V0Tm9kZSkge1xuICAgIGlmICh0aGlzID09PSB0YXJnZXROb2RlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHRhcmdldE5vZGUuaXNQYXJlbnRPZih0aGlzKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNQYXJlbnRPZih0YXJnZXROb2RlKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbW1vbkFuY2VzdG9yID0gdGhpcy5nZXRDb21tb25BbmNlc3Rvcih0YXJnZXROb2RlKTtcbiAgICBsZXQgaW5kZXhBID0gMDtcbiAgICBsZXQgaW5kZXhCID0gMDtcbiAgICBsZXQgbm9kZSA9IHRoaXM7XG5cbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgY29uc3QgcGFyZW50ID0gbm9kZS5nZXRQYXJlbnRPclRocm93KCk7XG5cbiAgICAgIGlmIChwYXJlbnQgPT09IGNvbW1vbkFuY2VzdG9yKSB7XG4gICAgICAgIGluZGV4QSA9IG5vZGUuZ2V0SW5kZXhXaXRoaW5QYXJlbnQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIG5vZGUgPSBwYXJlbnQ7XG4gICAgfVxuXG4gICAgbm9kZSA9IHRhcmdldE5vZGU7XG5cbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgY29uc3QgcGFyZW50ID0gbm9kZS5nZXRQYXJlbnRPclRocm93KCk7XG5cbiAgICAgIGlmIChwYXJlbnQgPT09IGNvbW1vbkFuY2VzdG9yKSB7XG4gICAgICAgIGluZGV4QiA9IG5vZGUuZ2V0SW5kZXhXaXRoaW5QYXJlbnQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIG5vZGUgPSBwYXJlbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGluZGV4QSA8IGluZGV4QjtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgbm9kZSBpcyB0aGUgcGFyZW50IG9mIHRoZSB0YXJnZXQgbm9kZSwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKlxuICAgKiBAcGFyYW0gdGFyZ2V0Tm9kZSAtIHRoZSB3b3VsZC1iZSBjaGlsZCBub2RlLlxuICAgKi9cblxuXG4gIGlzUGFyZW50T2YodGFyZ2V0Tm9kZSkge1xuICAgIGNvbnN0IGtleSA9IHRoaXMuX19rZXk7XG5cbiAgICBpZiAoa2V5ID09PSB0YXJnZXROb2RlLl9fa2V5KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgbGV0IG5vZGUgPSB0YXJnZXROb2RlO1xuXG4gICAgd2hpbGUgKG5vZGUgIT09IG51bGwpIHtcbiAgICAgIGlmIChub2RlLl9fa2V5ID09PSBrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIG5vZGUgPSBub2RlLmdldFBhcmVudCgpO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfSAvLyBUTy1ETzogdGhpcyBmdW5jdGlvbiBjYW4gYmUgc2ltcGxpZmllZCBhIGxvdFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBub2RlcyB0aGF0IGFyZSBiZXR3ZWVuIHRoaXMgbm9kZSBhbmRcbiAgICogdGhlIHRhcmdldCBub2RlIGluIHRoZSBFZGl0b3JTdGF0ZS5cbiAgICpcbiAgICogQHBhcmFtIHRhcmdldE5vZGUgLSB0aGUgbm9kZSB0aGF0IG1hcmtzIHRoZSBvdGhlciBlbmQgb2YgdGhlIHJhbmdlIG9mIG5vZGVzIHRvIGJlIHJldHVybmVkLlxuICAgKi9cblxuXG4gIGdldE5vZGVzQmV0d2Vlbih0YXJnZXROb2RlKSB7XG4gICAgY29uc3QgaXNCZWZvcmUgPSB0aGlzLmlzQmVmb3JlKHRhcmdldE5vZGUpO1xuICAgIGNvbnN0IG5vZGVzID0gW107XG4gICAgY29uc3QgdmlzaXRlZCA9IG5ldyBTZXQoKTtcbiAgICBsZXQgbm9kZSA9IHRoaXM7XG5cbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgY29uc3Qga2V5ID0gbm9kZS5fX2tleTtcblxuICAgICAgaWYgKCF2aXNpdGVkLmhhcyhrZXkpKSB7XG4gICAgICAgIHZpc2l0ZWQuYWRkKGtleSk7XG4gICAgICAgIG5vZGVzLnB1c2gobm9kZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChub2RlID09PSB0YXJnZXROb2RlKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjaGlsZCA9ICRpc0VsZW1lbnROb2RlKG5vZGUpID8gaXNCZWZvcmUgPyBub2RlLmdldEZpcnN0Q2hpbGQoKSA6IG5vZGUuZ2V0TGFzdENoaWxkKCkgOiBudWxsO1xuXG4gICAgICBpZiAoY2hpbGQgIT09IG51bGwpIHtcbiAgICAgICAgbm9kZSA9IGNoaWxkO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbmV4dFNpYmxpbmcgPSBpc0JlZm9yZSA/IG5vZGUuZ2V0TmV4dFNpYmxpbmcoKSA6IG5vZGUuZ2V0UHJldmlvdXNTaWJsaW5nKCk7XG5cbiAgICAgIGlmIChuZXh0U2libGluZyAhPT0gbnVsbCkge1xuICAgICAgICBub2RlID0gbmV4dFNpYmxpbmc7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwYXJlbnQgPSBub2RlLmdldFBhcmVudE9yVGhyb3coKTtcblxuICAgICAgaWYgKCF2aXNpdGVkLmhhcyhwYXJlbnQuX19rZXkpKSB7XG4gICAgICAgIG5vZGVzLnB1c2gocGFyZW50KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVudCA9PT0gdGFyZ2V0Tm9kZSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgbGV0IHBhcmVudFNpYmxpbmcgPSBudWxsO1xuICAgICAgbGV0IGFuY2VzdG9yID0gcGFyZW50O1xuXG4gICAgICBkbyB7XG4gICAgICAgIGlmIChhbmNlc3RvciA9PT0gbnVsbCkge1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBnZXROb2Rlc0JldHdlZW46IGFuY2VzdG9yIGlzIG51bGxgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwYXJlbnRTaWJsaW5nID0gaXNCZWZvcmUgPyBhbmNlc3Rvci5nZXROZXh0U2libGluZygpIDogYW5jZXN0b3IuZ2V0UHJldmlvdXNTaWJsaW5nKCk7XG4gICAgICAgIGFuY2VzdG9yID0gYW5jZXN0b3IuZ2V0UGFyZW50KCk7XG5cbiAgICAgICAgaWYgKGFuY2VzdG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgaWYgKHBhcmVudFNpYmxpbmcgPT09IG51bGwgJiYgIXZpc2l0ZWQuaGFzKGFuY2VzdG9yLl9fa2V5KSkge1xuICAgICAgICAgICAgbm9kZXMucHVzaChhbmNlc3Rvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IHdoaWxlIChwYXJlbnRTaWJsaW5nID09PSBudWxsKTtcblxuICAgICAgbm9kZSA9IHBhcmVudFNpYmxpbmc7XG4gICAgfVxuXG4gICAgaWYgKCFpc0JlZm9yZSkge1xuICAgICAgbm9kZXMucmV2ZXJzZSgpO1xuICAgIH1cblxuICAgIHJldHVybiBub2RlcztcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgbm9kZSBoYXMgYmVlbiBtYXJrZWQgZGlydHkgZHVyaW5nIHRoaXMgdXBkYXRlIGN5Y2xlLlxuICAgKlxuICAgKi9cblxuXG4gIGlzRGlydHkoKSB7XG4gICAgY29uc3QgZWRpdG9yID0gZ2V0QWN0aXZlRWRpdG9yKCk7XG4gICAgY29uc3QgZGlydHlMZWF2ZXMgPSBlZGl0b3IuX2RpcnR5TGVhdmVzO1xuICAgIHJldHVybiBkaXJ0eUxlYXZlcyAhPT0gbnVsbCAmJiBkaXJ0eUxlYXZlcy5oYXModGhpcy5fX2tleSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGxhdGVzdCB2ZXJzaW9uIG9mIHRoZSBub2RlIGZyb20gdGhlIGFjdGl2ZSBFZGl0b3JTdGF0ZS5cbiAgICogVGhpcyBpcyB1c2VkIHRvIGF2b2lkIGdldHRpbmcgdmFsdWVzIGZyb20gc3RhbGUgbm9kZSByZWZlcmVuY2VzLlxuICAgKlxuICAgKi9cblxuXG4gIGdldExhdGVzdCgpIHtcbiAgICBjb25zdCBsYXRlc3QgPSAkZ2V0Tm9kZUJ5S2V5KHRoaXMuX19rZXkpO1xuXG4gICAgaWYgKGxhdGVzdCA9PT0gbnVsbCkge1xuICAgICAge1xuICAgICAgICB0aHJvdyBFcnJvcihgTGV4aWNhbCBub2RlIGRvZXMgbm90IGV4aXN0IGluIGFjdGl2ZSBlZGl0b3Igc3RhdGUuIEF2b2lkIHVzaW5nIHRoZSBzYW1lIG5vZGUgcmVmZXJlbmNlcyBiZXR3ZWVuIG5lc3RlZCBjbG9zdXJlcyBmcm9tIGVkaXRvclN0YXRlLnJlYWQvZWRpdG9yLnVwZGF0ZS5gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbGF0ZXN0O1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbXV0YWJsZSB2ZXJzaW9uIG9mIHRoZSBub2RlLiBXaWxsIHRocm93IGFuIGVycm9yIGlmXG4gICAqIGNhbGxlZCBvdXRzaWRlIG9mIGEgTGV4aWNhbCBFZGl0b3Ige0BsaW5rIExleGljYWxFZGl0b3IudXBkYXRlfSBjYWxsYmFjay5cbiAgICpcbiAgICovXG5cblxuICBnZXRXcml0YWJsZSgpIHtcbiAgICBlcnJvck9uUmVhZE9ubHkoKTtcbiAgICBjb25zdCBlZGl0b3JTdGF0ZSA9IGdldEFjdGl2ZUVkaXRvclN0YXRlKCk7XG4gICAgY29uc3QgZWRpdG9yID0gZ2V0QWN0aXZlRWRpdG9yKCk7XG4gICAgY29uc3Qgbm9kZU1hcCA9IGVkaXRvclN0YXRlLl9ub2RlTWFwO1xuICAgIGNvbnN0IGtleSA9IHRoaXMuX19rZXk7IC8vIEVuc3VyZSB3ZSBnZXQgdGhlIGxhdGVzdCBub2RlIGZyb20gcGVuZGluZyBzdGF0ZVxuXG4gICAgY29uc3QgbGF0ZXN0Tm9kZSA9IHRoaXMuZ2V0TGF0ZXN0KCk7XG4gICAgY29uc3QgcGFyZW50ID0gbGF0ZXN0Tm9kZS5fX3BhcmVudDtcbiAgICBjb25zdCBjbG9uZU5vdE5lZWRlZCA9IGVkaXRvci5fY2xvbmVOb3ROZWVkZWQ7XG4gICAgY29uc3Qgc2VsZWN0aW9uID0gJGdldFNlbGVjdGlvbigpO1xuXG4gICAgaWYgKHNlbGVjdGlvbiAhPT0gbnVsbCkge1xuICAgICAgc2VsZWN0aW9uLl9jYWNoZWROb2RlcyA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKGNsb25lTm90TmVlZGVkLmhhcyhrZXkpKSB7XG4gICAgICAvLyBUcmFuc2Zvcm1zIGNsZWFyIHRoZSBkaXJ0eSBub2RlIHNldCBvbiBlYWNoIGl0ZXJhdGlvbiB0byBrZWVwIHRyYWNrIG9uIG5ld2x5IGRpcnR5IG5vZGVzXG4gICAgICBpbnRlcm5hbE1hcmtOb2RlQXNEaXJ0eShsYXRlc3ROb2RlKTtcbiAgICAgIHJldHVybiBsYXRlc3ROb2RlO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnN0cnVjdG9yID0gbGF0ZXN0Tm9kZS5jb25zdHJ1Y3RvcjsgLy8gQHRzLWV4cGVjdC1lcnJvclxuXG4gICAgY29uc3QgbXV0YWJsZU5vZGUgPSBjb25zdHJ1Y3Rvci5jbG9uZShsYXRlc3ROb2RlKTtcbiAgICBtdXRhYmxlTm9kZS5fX3BhcmVudCA9IHBhcmVudDtcbiAgICBtdXRhYmxlTm9kZS5fX25leHQgPSBsYXRlc3ROb2RlLl9fbmV4dDtcbiAgICBtdXRhYmxlTm9kZS5fX3ByZXYgPSBsYXRlc3ROb2RlLl9fcHJldjtcblxuICAgIGlmICgkaXNFbGVtZW50Tm9kZShsYXRlc3ROb2RlKSAmJiAkaXNFbGVtZW50Tm9kZShtdXRhYmxlTm9kZSkpIHtcbiAgICAgIG11dGFibGVOb2RlLl9fZmlyc3QgPSBsYXRlc3ROb2RlLl9fZmlyc3Q7XG4gICAgICBtdXRhYmxlTm9kZS5fX2xhc3QgPSBsYXRlc3ROb2RlLl9fbGFzdDtcbiAgICAgIG11dGFibGVOb2RlLl9fc2l6ZSA9IGxhdGVzdE5vZGUuX19zaXplO1xuICAgICAgbXV0YWJsZU5vZGUuX19pbmRlbnQgPSBsYXRlc3ROb2RlLl9faW5kZW50O1xuICAgICAgbXV0YWJsZU5vZGUuX19mb3JtYXQgPSBsYXRlc3ROb2RlLl9fZm9ybWF0O1xuICAgICAgbXV0YWJsZU5vZGUuX19kaXIgPSBsYXRlc3ROb2RlLl9fZGlyO1xuICAgIH0gZWxzZSBpZiAoJGlzVGV4dE5vZGUobGF0ZXN0Tm9kZSkgJiYgJGlzVGV4dE5vZGUobXV0YWJsZU5vZGUpKSB7XG4gICAgICBtdXRhYmxlTm9kZS5fX2Zvcm1hdCA9IGxhdGVzdE5vZGUuX19mb3JtYXQ7XG4gICAgICBtdXRhYmxlTm9kZS5fX3N0eWxlID0gbGF0ZXN0Tm9kZS5fX3N0eWxlO1xuICAgICAgbXV0YWJsZU5vZGUuX19tb2RlID0gbGF0ZXN0Tm9kZS5fX21vZGU7XG4gICAgICBtdXRhYmxlTm9kZS5fX2RldGFpbCA9IGxhdGVzdE5vZGUuX19kZXRhaWw7XG4gICAgfVxuXG4gICAgY2xvbmVOb3ROZWVkZWQuYWRkKGtleSk7XG4gICAgbXV0YWJsZU5vZGUuX19rZXkgPSBrZXk7XG4gICAgaW50ZXJuYWxNYXJrTm9kZUFzRGlydHkobXV0YWJsZU5vZGUpOyAvLyBVcGRhdGUgcmVmZXJlbmNlIGluIG5vZGUgbWFwXG5cbiAgICBub2RlTWFwLnNldChrZXksIG11dGFibGVOb2RlKTtcbiAgICByZXR1cm4gbXV0YWJsZU5vZGU7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHRleHQgY29udGVudCBvZiB0aGUgbm9kZS4gT3ZlcnJpZGUgdGhpcyBmb3JcbiAgICogY3VzdG9tIG5vZGVzIHRoYXQgc2hvdWxkIGhhdmUgYSByZXByZXNlbnRhdGlvbiBpbiBwbGFpbiB0ZXh0XG4gICAqIGZvcm1hdCAoZm9yIGNvcHkgKyBwYXN0ZSwgZm9yIGV4YW1wbGUpXG4gICAqXG4gICAqL1xuXG5cbiAgZ2V0VGV4dENvbnRlbnQoKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBsZW5ndGggb2YgdGhlIHN0cmluZyBwcm9kdWNlZCBieSBjYWxsaW5nIGdldFRleHRDb250ZW50IG9uIHRoaXMgbm9kZS5cbiAgICpcbiAgICovXG5cblxuICBnZXRUZXh0Q29udGVudFNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VGV4dENvbnRlbnQoKS5sZW5ndGg7XG4gIH0gLy8gVmlld1xuXG4gIC8qKlxuICAgKiBDYWxsZWQgZHVyaW5nIHRoZSByZWNvbmNpbGlhdGlvbiBwcm9jZXNzIHRvIGRldGVybWluZSB3aGljaCBub2Rlc1xuICAgKiB0byBpbnNlcnQgaW50byB0aGUgRE9NIGZvciB0aGlzIExleGljYWwgTm9kZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgbXVzdCByZXR1cm4gZXhhY3RseSBvbmUgSFRNTEVsZW1lbnQuIE5lc3RlZCBlbGVtZW50cyBhcmUgbm90IHN1cHBvcnRlZC5cbiAgICpcbiAgICogRG8gbm90IGF0dGVtcHQgdG8gdXBkYXRlIHRoZSBMZXhpY2FsIEVkaXRvclN0YXRlIGR1cmluZyB0aGlzIHBoYXNlIG9mIHRoZSB1cGRhdGUgbGlmZWN5bGUuXG4gICAqXG4gICAqIEBwYXJhbSBfY29uZmlnIC0gYWxsb3dzIGFjY2VzcyB0byB0aGluZ3MgbGlrZSB0aGUgRWRpdG9yVGhlbWUgKHRvIGFwcGx5IGNsYXNzZXMpIGR1cmluZyByZWNvbmNpbGlhdGlvbi5cbiAgICogQHBhcmFtIF9lZGl0b3IgLSBhbGxvd3MgYWNjZXNzIHRvIHRoZSBlZGl0b3IgZm9yIGNvbnRleHQgZHVyaW5nIHJlY29uY2lsaWF0aW9uLlxuICAgKlxuICAgKiAqL1xuXG5cbiAgY3JlYXRlRE9NKF9jb25maWcsIF9lZGl0b3IpIHtcbiAgICB7XG4gICAgICB0aHJvdyBFcnJvcihgY3JlYXRlRE9NOiBiYXNlIG1ldGhvZCBub3QgZXh0ZW5kZWRgKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIGEgbm9kZSBjaGFuZ2VzIGFuZCBzaG91bGQgdXBkYXRlIHRoZSBET01cbiAgICogaW4gd2hhdGV2ZXIgd2F5IGlzIG5lY2Vzc2FyeSB0byBtYWtlIGl0IGFsaWduIHdpdGggYW55IGNoYW5nZXMgdGhhdCBtaWdodFxuICAgKiBoYXZlIGhhcHBlbmVkIGR1cmluZyB0aGUgdXBkYXRlLlxuICAgKlxuICAgKiBSZXR1cm5pbmcgXCJ0cnVlXCIgaGVyZSB3aWxsIGNhdXNlIGxleGljYWwgdG8gdW5tb3VudCBhbmQgcmVjcmVhdGUgdGhlIERPTSBub2RlXG4gICAqIChieSBjYWxsaW5nIGNyZWF0ZURPTSkuIFlvdSB3b3VsZCBuZWVkIHRvIGRvIHRoaXMgaWYgdGhlIGVsZW1lbnQgdGFnIGNoYW5nZXMsXG4gICAqIGZvciBpbnN0YW5jZS5cbiAgICpcbiAgICogKi9cblxuXG4gIHVwZGF0ZURPTShfcHJldk5vZGUsIF9kb20sIF9jb25maWcpIHtcbiAgICB7XG4gICAgICB0aHJvdyBFcnJvcihgdXBkYXRlRE9NOiBiYXNlIG1ldGhvZCBub3QgZXh0ZW5kZWRgKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvbnRyb2xzIGhvdyB0aGUgdGhpcyBub2RlIGlzIHNlcmlhbGl6ZWQgdG8gSFRNTC4gVGhpcyBpcyBpbXBvcnRhbnQgZm9yXG4gICAqIGNvcHkgYW5kIHBhc3RlIGJldHdlZW4gTGV4aWNhbCBhbmQgbm9uLUxleGljYWwgZWRpdG9ycywgb3IgTGV4aWNhbCBlZGl0b3JzIHdpdGggZGlmZmVyZW50IG5hbWVzcGFjZXMsXG4gICAqIGluIHdoaWNoIGNhc2UgdGhlIHByaW1hcnkgdHJhbnNmZXIgZm9ybWF0IGlzIEhUTUwuIEl0J3MgYWxzbyBpbXBvcnRhbnQgaWYgeW91J3JlIHNlcmlhbGl6aW5nXG4gICAqIHRvIEhUTUwgZm9yIGFueSBvdGhlciByZWFzb24gdmlhIHtAbGluayBAbGV4aWNhbC9odG1sISRnZW5lcmF0ZUh0bWxGcm9tTm9kZXN9LiBZb3UgY291bGRcbiAgICogYWxzbyB1c2UgdGhpcyBtZXRob2QgdG8gYnVpbGQgeW91ciBvd24gSFRNTCByZW5kZXJlci5cbiAgICpcbiAgICogKi9cblxuXG4gIGV4cG9ydERPTShlZGl0b3IpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5jcmVhdGVET00oZWRpdG9yLl9jb25maWcsIGVkaXRvcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVsZW1lbnRcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBDb250cm9scyBob3cgdGhlIHRoaXMgbm9kZSBpcyBzZXJpYWxpemVkIHRvIEpTT04uIFRoaXMgaXMgaW1wb3J0YW50IGZvclxuICAgKiBjb3B5IGFuZCBwYXN0ZSBiZXR3ZWVuIExleGljYWwgZWRpdG9ycyBzaGFyaW5nIHRoZSBzYW1lIG5hbWVzcGFjZS4gSXQncyBhbHNvIGltcG9ydGFudFxuICAgKiBpZiB5b3UncmUgc2VyaWFsaXppbmcgdG8gSlNPTiBmb3IgcGVyc2lzdGVudCBzdG9yYWdlIHNvbWV3aGVyZS5cbiAgICogU2VlIFtTZXJpYWxpemF0aW9uICYgRGVzZXJpYWxpemF0aW9uXShodHRwczovL2xleGljYWwuZGV2L2RvY3MvY29uY2VwdHMvc2VyaWFsaXphdGlvbiNsZXhpY2FsLS0taHRtbCkuXG4gICAqXG4gICAqICovXG5cblxuICBleHBvcnRKU09OKCkge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGBleHBvcnRKU09OOiBiYXNlIG1ldGhvZCBub3QgZXh0ZW5kZWRgKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvbnRyb2xzIGhvdyB0aGUgdGhpcyBub2RlIGlzIGRlc2VyaWFsaXplZCBmcm9tIEpTT04uIFRoaXMgaXMgdXN1YWxseSBib2lsZXJwbGF0ZSxcbiAgICogYnV0IHByb3ZpZGVzIGFuIGFic3RyYWN0aW9uIGJldHdlZW50IGhlIG5vZGUgaW1wbGVtZW50YXRpb24gYW5kIHNlcmlhbGl6ZWQgaW50ZXJmYWVjIHRoYXQgY2FuXG4gICAqIGJlIGltcG9ydGFudCBpZiB5b3UgZXZlciBtYWtlIGJyZWFraW5nIGNoYW5nZXMgdG8gYSBub2RlIHNjaGVtYSAoYnkgYWRkaW5nIG9yIHJlbW92aW5nIHByb3BlcnRpZXMpLlxuICAgKiBTZWUgW1NlcmlhbGl6YXRpb24gJiBEZXNlcmlhbGl6YXRpb25dKGh0dHBzOi8vbGV4aWNhbC5kZXYvZG9jcy9jb25jZXB0cy9zZXJpYWxpemF0aW9uI2xleGljYWwtLS1odG1sKS5cbiAgICpcbiAgICogKi9cblxuXG4gIHN0YXRpYyBpbXBvcnRKU09OKF9zZXJpYWxpemVkTm9kZSkge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGBMZXhpY2FsTm9kZTogTm9kZSAke3RoaXMubmFtZX0gZG9lcyBub3QgaW1wbGVtZW50IC5pbXBvcnRKU09OKCkuYCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAZXhwZXJpbWVudGFsXG4gICAqXG4gICAqIFJlZ2lzdGVycyB0aGUgcmV0dXJuZWQgZnVuY3Rpb24gYXMgYSB0cmFuc2Zvcm0gb24gdGhlIG5vZGUgZHVyaW5nXG4gICAqIEVkaXRvciBpbml0aWFsaXphdGlvbi4gTW9zdCBzdWNoIHVzZSBjYXNlcyBzaG91bGQgYmUgYWRkcmVzc2VkIHZpYVxuICAgKiB0aGUge0BsaW5rIExleGljYWxFZGl0b3IucmVnaXN0ZXJOb2RlVHJhbnNmb3JtfSBBUEkuXG4gICAqXG4gICAqIEV4cGVyaW1lbnRhbCAtIHVzZSBhdCB5b3VyIG93biByaXNrLlxuICAgKi9cblxuXG4gIHN0YXRpYyB0cmFuc2Zvcm0oKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gLy8gU2V0dGVycyBhbmQgbXV0YXRvcnNcblxuICAvKipcbiAgICogUmVtb3ZlcyB0aGlzIExleGljYWxOb2RlIGZyb20gdGhlIEVkaXRvclN0YXRlLiBJZiB0aGUgbm9kZSBpc24ndCByZS1pbnNlcnRlZFxuICAgKiBzb21ld2hlcmUsIHRoZSBMZXhpY2FsIGdhcmJhZ2UgY29sbGVjdG9yIHdpbGwgZXZlbnR1YWxseSBjbGVhbiBpdCB1cC5cbiAgICpcbiAgICogQHBhcmFtIHByZXNlcnZlRW1wdHlQYXJlbnQgLSBJZiBmYWxzeSwgdGhlIG5vZGUncyBwYXJlbnQgd2lsbCBiZSByZW1vdmVkIGlmXG4gICAqIGl0J3MgZW1wdHkgYWZ0ZXIgdGhlIHJlbW92YWwgb3BlcmF0aW9uLiBUaGlzIGlzIHRoZSBkZWZhdWx0IGJlaGF2aW9yLCBzdWJqZWN0IHRvXG4gICAqIG90aGVyIG5vZGUgaGV1cmlzdGljcyBzdWNoIGFzIHtAbGluayBFbGVtZW50Tm9kZSNjYW5CZUVtcHR5fVxuICAgKiAqL1xuXG5cbiAgcmVtb3ZlKHByZXNlcnZlRW1wdHlQYXJlbnQpIHtcbiAgICByZW1vdmVOb2RlKHRoaXMsIHRydWUsIHByZXNlcnZlRW1wdHlQYXJlbnQpO1xuICB9XG4gIC8qKlxuICAgKiBSZXBsYWNlcyB0aGlzIExleGljYWxOb2RlIHdpdGggdGhlIHByb3ZpZGVkIG5vZGUsIG9wdGlvbmFsbHkgdHJhbnNmZXJyaW5nIHRoZSBjaGlsZHJlblxuICAgKiBvZiB0aGUgcmVwbGFjZWQgbm9kZSB0byB0aGUgcmVwbGFjaW5nIG5vZGUuXG4gICAqXG4gICAqIEBwYXJhbSByZXBsYWNlV2l0aCAtIFRoZSBub2RlIHRvIHJlcGxhY2UgdGhpcyBvbmUgd2l0aC5cbiAgICogQHBhcmFtIGluY2x1ZGVDaGlsZHJlbiAtIFdoZXRoZXIgb3Igbm90IHRvIHRyYW5zZmVyIHRoZSBjaGlsZHJlbiBvZiB0aGlzIG5vZGUgdG8gdGhlIHJlcGxhY2luZyBub2RlLlxuICAgKiAqL1xuXG5cbiAgcmVwbGFjZShyZXBsYWNlV2l0aCwgaW5jbHVkZUNoaWxkcmVuKSB7XG4gICAgZXJyb3JPblJlYWRPbmx5KCk7XG4gICAgbGV0IHNlbGVjdGlvbiA9ICRnZXRTZWxlY3Rpb24oKTtcbiAgICBpZiAoc2VsZWN0aW9uICE9PSBudWxsKSBzZWxlY3Rpb24gPSBzZWxlY3Rpb24uY2xvbmUoKTtcbiAgICBlcnJvck9uSW5zZXJ0VGV4dE5vZGVPblJvb3QodGhpcywgcmVwbGFjZVdpdGgpO1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzLmdldExhdGVzdCgpO1xuICAgIGNvbnN0IHRvUmVwbGFjZUtleSA9IHRoaXMuX19rZXk7XG4gICAgY29uc3Qga2V5ID0gcmVwbGFjZVdpdGguX19rZXk7XG4gICAgY29uc3Qgd3JpdGFibGVSZXBsYWNlV2l0aCA9IHJlcGxhY2VXaXRoLmdldFdyaXRhYmxlKCk7XG4gICAgY29uc3Qgd3JpdGFibGVQYXJlbnQgPSB0aGlzLmdldFBhcmVudE9yVGhyb3coKS5nZXRXcml0YWJsZSgpO1xuICAgIGNvbnN0IHNpemUgPSB3cml0YWJsZVBhcmVudC5fX3NpemU7XG4gICAgcmVtb3ZlRnJvbVBhcmVudCh3cml0YWJsZVJlcGxhY2VXaXRoKTtcbiAgICBjb25zdCBwcmV2U2libGluZyA9IHNlbGYuZ2V0UHJldmlvdXNTaWJsaW5nKCk7XG4gICAgY29uc3QgbmV4dFNpYmxpbmcgPSBzZWxmLmdldE5leHRTaWJsaW5nKCk7XG4gICAgY29uc3QgcHJldktleSA9IHNlbGYuX19wcmV2O1xuICAgIGNvbnN0IG5leHRLZXkgPSBzZWxmLl9fbmV4dDtcbiAgICBjb25zdCBwYXJlbnRLZXkgPSBzZWxmLl9fcGFyZW50O1xuICAgIHJlbW92ZU5vZGUoc2VsZiwgZmFsc2UsIHRydWUpO1xuXG4gICAgaWYgKHByZXZTaWJsaW5nID09PSBudWxsKSB7XG4gICAgICB3cml0YWJsZVBhcmVudC5fX2ZpcnN0ID0ga2V5O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB3cml0YWJsZVByZXZTaWJsaW5nID0gcHJldlNpYmxpbmcuZ2V0V3JpdGFibGUoKTtcbiAgICAgIHdyaXRhYmxlUHJldlNpYmxpbmcuX19uZXh0ID0ga2V5O1xuICAgIH1cblxuICAgIHdyaXRhYmxlUmVwbGFjZVdpdGguX19wcmV2ID0gcHJldktleTtcblxuICAgIGlmIChuZXh0U2libGluZyA9PT0gbnVsbCkge1xuICAgICAgd3JpdGFibGVQYXJlbnQuX19sYXN0ID0ga2V5O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB3cml0YWJsZU5leHRTaWJsaW5nID0gbmV4dFNpYmxpbmcuZ2V0V3JpdGFibGUoKTtcbiAgICAgIHdyaXRhYmxlTmV4dFNpYmxpbmcuX19wcmV2ID0ga2V5O1xuICAgIH1cblxuICAgIHdyaXRhYmxlUmVwbGFjZVdpdGguX19uZXh0ID0gbmV4dEtleTtcbiAgICB3cml0YWJsZVJlcGxhY2VXaXRoLl9fcGFyZW50ID0gcGFyZW50S2V5O1xuICAgIHdyaXRhYmxlUGFyZW50Ll9fc2l6ZSA9IHNpemU7XG5cbiAgICBpZiAoaW5jbHVkZUNoaWxkcmVuKSB7XG4gICAgICB0aGlzLmdldENoaWxkcmVuKCkuZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgIHdyaXRhYmxlUmVwbGFjZVdpdGguYXBwZW5kKGNoaWxkKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICgkaXNSYW5nZVNlbGVjdGlvbihzZWxlY3Rpb24pKSB7XG4gICAgICAkc2V0U2VsZWN0aW9uKHNlbGVjdGlvbik7XG4gICAgICBjb25zdCBhbmNob3IgPSBzZWxlY3Rpb24uYW5jaG9yO1xuICAgICAgY29uc3QgZm9jdXMgPSBzZWxlY3Rpb24uZm9jdXM7XG5cbiAgICAgIGlmIChhbmNob3Iua2V5ID09PSB0b1JlcGxhY2VLZXkpIHtcbiAgICAgICAgJG1vdmVTZWxlY3Rpb25Qb2ludFRvRW5kKGFuY2hvciwgd3JpdGFibGVSZXBsYWNlV2l0aCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChmb2N1cy5rZXkgPT09IHRvUmVwbGFjZUtleSkge1xuICAgICAgICAkbW92ZVNlbGVjdGlvblBvaW50VG9FbmQoZm9jdXMsIHdyaXRhYmxlUmVwbGFjZVdpdGgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICgkZ2V0Q29tcG9zaXRpb25LZXkoKSA9PT0gdG9SZXBsYWNlS2V5KSB7XG4gICAgICAkc2V0Q29tcG9zaXRpb25LZXkoa2V5KTtcbiAgICB9XG5cbiAgICByZXR1cm4gd3JpdGFibGVSZXBsYWNlV2l0aDtcbiAgfVxuICAvKipcbiAgICogSW5zZXJ0cyBhIG5vZGUgYWZ0ZXIgdGhpcyBMZXhpY2FsTm9kZSAoYXMgdGhlIG5leHQgc2libGluZykuXG4gICAqXG4gICAqIEBwYXJhbSBub2RlVG9JbnNlcnQgLSBUaGUgbm9kZSB0byBpbnNlcnQgYWZ0ZXIgdGhpcyBvbmUuXG4gICAqIEBwYXJhbSByZXN0b3JlU2VsZWN0aW9uIC0gV2hldGhlciBvciBub3QgdG8gYXR0ZW1wdCB0byByZXNvbHZlIHRoZVxuICAgKiBzZWxlY3Rpb24gdG8gdGhlIGFwcHJvcHJpYXRlIHBsYWNlIGFmdGVyIHRoZSBvcGVyYXRpb24gaXMgY29tcGxldGUuXG4gICAqICovXG5cblxuICBpbnNlcnRBZnRlcihub2RlVG9JbnNlcnQsIHJlc3RvcmVTZWxlY3Rpb24gPSB0cnVlKSB7XG4gICAgZXJyb3JPblJlYWRPbmx5KCk7XG4gICAgZXJyb3JPbkluc2VydFRleHROb2RlT25Sb290KHRoaXMsIG5vZGVUb0luc2VydCk7XG4gICAgY29uc3Qgd3JpdGFibGVTZWxmID0gdGhpcy5nZXRXcml0YWJsZSgpO1xuICAgIGNvbnN0IHdyaXRhYmxlTm9kZVRvSW5zZXJ0ID0gbm9kZVRvSW5zZXJ0LmdldFdyaXRhYmxlKCk7XG4gICAgY29uc3Qgb2xkUGFyZW50ID0gd3JpdGFibGVOb2RlVG9JbnNlcnQuZ2V0UGFyZW50KCk7XG4gICAgY29uc3Qgc2VsZWN0aW9uID0gJGdldFNlbGVjdGlvbigpO1xuICAgIGxldCBlbGVtZW50QW5jaG9yU2VsZWN0aW9uT25Ob2RlID0gZmFsc2U7XG4gICAgbGV0IGVsZW1lbnRGb2N1c1NlbGVjdGlvbk9uTm9kZSA9IGZhbHNlO1xuXG4gICAgaWYgKG9sZFBhcmVudCAhPT0gbnVsbCkge1xuICAgICAgLy8gVE9ETzogdGhpcyBpcyBPKG4pLCBjYW4gd2UgaW1wcm92ZT9cbiAgICAgIGNvbnN0IG9sZEluZGV4ID0gbm9kZVRvSW5zZXJ0LmdldEluZGV4V2l0aGluUGFyZW50KCk7XG4gICAgICByZW1vdmVGcm9tUGFyZW50KHdyaXRhYmxlTm9kZVRvSW5zZXJ0KTtcblxuICAgICAgaWYgKCRpc1JhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikpIHtcbiAgICAgICAgY29uc3Qgb2xkUGFyZW50S2V5ID0gb2xkUGFyZW50Ll9fa2V5O1xuICAgICAgICBjb25zdCBhbmNob3IgPSBzZWxlY3Rpb24uYW5jaG9yO1xuICAgICAgICBjb25zdCBmb2N1cyA9IHNlbGVjdGlvbi5mb2N1cztcbiAgICAgICAgZWxlbWVudEFuY2hvclNlbGVjdGlvbk9uTm9kZSA9IGFuY2hvci50eXBlID09PSAnZWxlbWVudCcgJiYgYW5jaG9yLmtleSA9PT0gb2xkUGFyZW50S2V5ICYmIGFuY2hvci5vZmZzZXQgPT09IG9sZEluZGV4ICsgMTtcbiAgICAgICAgZWxlbWVudEZvY3VzU2VsZWN0aW9uT25Ob2RlID0gZm9jdXMudHlwZSA9PT0gJ2VsZW1lbnQnICYmIGZvY3VzLmtleSA9PT0gb2xkUGFyZW50S2V5ICYmIGZvY3VzLm9mZnNldCA9PT0gb2xkSW5kZXggKyAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG5leHRTaWJsaW5nID0gdGhpcy5nZXROZXh0U2libGluZygpO1xuICAgIGNvbnN0IHdyaXRhYmxlUGFyZW50ID0gdGhpcy5nZXRQYXJlbnRPclRocm93KCkuZ2V0V3JpdGFibGUoKTtcbiAgICBjb25zdCBpbnNlcnRLZXkgPSB3cml0YWJsZU5vZGVUb0luc2VydC5fX2tleTtcbiAgICBjb25zdCBuZXh0S2V5ID0gd3JpdGFibGVTZWxmLl9fbmV4dDtcblxuICAgIGlmIChuZXh0U2libGluZyA9PT0gbnVsbCkge1xuICAgICAgd3JpdGFibGVQYXJlbnQuX19sYXN0ID0gaW5zZXJ0S2V5O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB3cml0YWJsZU5leHRTaWJsaW5nID0gbmV4dFNpYmxpbmcuZ2V0V3JpdGFibGUoKTtcbiAgICAgIHdyaXRhYmxlTmV4dFNpYmxpbmcuX19wcmV2ID0gaW5zZXJ0S2V5O1xuICAgIH1cblxuICAgIHdyaXRhYmxlUGFyZW50Ll9fc2l6ZSsrO1xuICAgIHdyaXRhYmxlU2VsZi5fX25leHQgPSBpbnNlcnRLZXk7XG4gICAgd3JpdGFibGVOb2RlVG9JbnNlcnQuX19uZXh0ID0gbmV4dEtleTtcbiAgICB3cml0YWJsZU5vZGVUb0luc2VydC5fX3ByZXYgPSB3cml0YWJsZVNlbGYuX19rZXk7XG4gICAgd3JpdGFibGVOb2RlVG9JbnNlcnQuX19wYXJlbnQgPSB3cml0YWJsZVNlbGYuX19wYXJlbnQ7XG5cbiAgICBpZiAocmVzdG9yZVNlbGVjdGlvbiAmJiAkaXNSYW5nZVNlbGVjdGlvbihzZWxlY3Rpb24pKSB7XG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuZ2V0SW5kZXhXaXRoaW5QYXJlbnQoKTtcbiAgICAgICR1cGRhdGVFbGVtZW50U2VsZWN0aW9uT25DcmVhdGVEZWxldGVOb2RlKHNlbGVjdGlvbiwgd3JpdGFibGVQYXJlbnQsIGluZGV4ICsgMSk7XG4gICAgICBjb25zdCB3cml0YWJsZVBhcmVudEtleSA9IHdyaXRhYmxlUGFyZW50Ll9fa2V5O1xuXG4gICAgICBpZiAoZWxlbWVudEFuY2hvclNlbGVjdGlvbk9uTm9kZSkge1xuICAgICAgICBzZWxlY3Rpb24uYW5jaG9yLnNldCh3cml0YWJsZVBhcmVudEtleSwgaW5kZXggKyAyLCAnZWxlbWVudCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZWxlbWVudEZvY3VzU2VsZWN0aW9uT25Ob2RlKSB7XG4gICAgICAgIHNlbGVjdGlvbi5mb2N1cy5zZXQod3JpdGFibGVQYXJlbnRLZXksIGluZGV4ICsgMiwgJ2VsZW1lbnQnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZVRvSW5zZXJ0O1xuICB9XG4gIC8qKlxuICAgKiBJbnNlcnRzIGEgbm9kZSBiZWZvcmUgdGhpcyBMZXhpY2FsTm9kZSAoYXMgdGhlIHByZXZpb3VzIHNpYmxpbmcpLlxuICAgKlxuICAgKiBAcGFyYW0gbm9kZVRvSW5zZXJ0IC0gVGhlIG5vZGUgdG8gaW5zZXJ0IGFmdGVyIHRoaXMgb25lLlxuICAgKiBAcGFyYW0gcmVzdG9yZVNlbGVjdGlvbiAtIFdoZXRoZXIgb3Igbm90IHRvIGF0dGVtcHQgdG8gcmVzb2x2ZSB0aGVcbiAgICogc2VsZWN0aW9uIHRvIHRoZSBhcHByb3ByaWF0ZSBwbGFjZSBhZnRlciB0aGUgb3BlcmF0aW9uIGlzIGNvbXBsZXRlLlxuICAgKiAqL1xuXG5cbiAgaW5zZXJ0QmVmb3JlKG5vZGVUb0luc2VydCwgcmVzdG9yZVNlbGVjdGlvbiA9IHRydWUpIHtcbiAgICBlcnJvck9uUmVhZE9ubHkoKTtcbiAgICBlcnJvck9uSW5zZXJ0VGV4dE5vZGVPblJvb3QodGhpcywgbm9kZVRvSW5zZXJ0KTtcbiAgICBjb25zdCB3cml0YWJsZVNlbGYgPSB0aGlzLmdldFdyaXRhYmxlKCk7XG4gICAgY29uc3Qgd3JpdGFibGVOb2RlVG9JbnNlcnQgPSBub2RlVG9JbnNlcnQuZ2V0V3JpdGFibGUoKTtcbiAgICBjb25zdCBpbnNlcnRLZXkgPSB3cml0YWJsZU5vZGVUb0luc2VydC5fX2tleTtcbiAgICByZW1vdmVGcm9tUGFyZW50KHdyaXRhYmxlTm9kZVRvSW5zZXJ0KTtcbiAgICBjb25zdCBwcmV2U2libGluZyA9IHRoaXMuZ2V0UHJldmlvdXNTaWJsaW5nKCk7XG4gICAgY29uc3Qgd3JpdGFibGVQYXJlbnQgPSB0aGlzLmdldFBhcmVudE9yVGhyb3coKS5nZXRXcml0YWJsZSgpO1xuICAgIGNvbnN0IHByZXZLZXkgPSB3cml0YWJsZVNlbGYuX19wcmV2OyAvLyBUT0RPOiB0aGlzIGlzIE8obiksIGNhbiB3ZSBpbXByb3ZlP1xuXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmdldEluZGV4V2l0aGluUGFyZW50KCk7XG5cbiAgICBpZiAocHJldlNpYmxpbmcgPT09IG51bGwpIHtcbiAgICAgIHdyaXRhYmxlUGFyZW50Ll9fZmlyc3QgPSBpbnNlcnRLZXk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHdyaXRhYmxlUHJldlNpYmxpbmcgPSBwcmV2U2libGluZy5nZXRXcml0YWJsZSgpO1xuICAgICAgd3JpdGFibGVQcmV2U2libGluZy5fX25leHQgPSBpbnNlcnRLZXk7XG4gICAgfVxuXG4gICAgd3JpdGFibGVQYXJlbnQuX19zaXplKys7XG4gICAgd3JpdGFibGVTZWxmLl9fcHJldiA9IGluc2VydEtleTtcbiAgICB3cml0YWJsZU5vZGVUb0luc2VydC5fX3ByZXYgPSBwcmV2S2V5O1xuICAgIHdyaXRhYmxlTm9kZVRvSW5zZXJ0Ll9fbmV4dCA9IHdyaXRhYmxlU2VsZi5fX2tleTtcbiAgICB3cml0YWJsZU5vZGVUb0luc2VydC5fX3BhcmVudCA9IHdyaXRhYmxlU2VsZi5fX3BhcmVudDtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSAkZ2V0U2VsZWN0aW9uKCk7XG5cbiAgICBpZiAocmVzdG9yZVNlbGVjdGlvbiAmJiAkaXNSYW5nZVNlbGVjdGlvbihzZWxlY3Rpb24pKSB7XG4gICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmdldFBhcmVudE9yVGhyb3coKTtcbiAgICAgICR1cGRhdGVFbGVtZW50U2VsZWN0aW9uT25DcmVhdGVEZWxldGVOb2RlKHNlbGVjdGlvbiwgcGFyZW50LCBpbmRleCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5vZGVUb0luc2VydDtcbiAgfVxuICAvKipcbiAgICogV2hldGhlciBvciBub3QgdGhpcyBub2RlIGhhcyBhIHJlcXVpcmVkIHBhcmVudC4gVXNlZCBkdXJpbmcgY29weSArIHBhc3RlIG9wZXJhdGlvbnNcbiAgICogdG8gbm9ybWFsaXplIG5vZGVzIHRoYXQgd291bGQgb3RoZXJ3aXNlIGJlIG9ycGhhbmVkLiBGb3IgZXhhbXBsZSwgTGlzdEl0ZW1Ob2RlcyB3aXRob3V0XG4gICAqIGEgTGlzdE5vZGUgcGFyZW50IG9yIFRleHROb2RlcyB3aXRoIGEgUGFyYWdyYXBoTm9kZSBwYXJlbnQuXG4gICAqXG4gICAqICovXG5cblxuICBpc1BhcmVudFJlcXVpcmVkKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogVGhlIGNyZWF0aW9uIGxvZ2ljIGZvciBhbnkgcmVxdWlyZWQgcGFyZW50LiBTaG91bGQgYmUgaW1wbGVtZW50ZWQgaWYge0BsaW5rIGlzUGFyZW50UmVxdWlyZWR9IHJldHVybnMgdHJ1ZS5cbiAgICpcbiAgICogKi9cblxuXG4gIGNyZWF0ZVBhcmVudEVsZW1lbnROb2RlKCkge1xuICAgIHJldHVybiAkY3JlYXRlUGFyYWdyYXBoTm9kZSgpO1xuICB9XG4gIC8qKlxuICAgKiBNb3ZlcyBzZWxlY3Rpb24gdG8gdGhlIHByZXZpb3VzIHNpYmxpbmcgb2YgdGhpcyBub2RlLCBhdCB0aGUgc3BlY2lmaWVkIG9mZnNldHMuXG4gICAqXG4gICAqIEBwYXJhbSBhbmNob3JPZmZzZXQgLSBUaGUgYW5jaG9yIG9mZnNldCBmb3Igc2VsZWN0aW9uLlxuICAgKiBAcGFyYW0gZm9jdXNPZmZzZXQgLSAgVGhlIGZvY3VzIG9mZnNldCBmb3Igc2VsZWN0aW9uXG4gICAqICovXG5cblxuICBzZWxlY3RQcmV2aW91cyhhbmNob3JPZmZzZXQsIGZvY3VzT2Zmc2V0KSB7XG4gICAgZXJyb3JPblJlYWRPbmx5KCk7XG4gICAgY29uc3QgcHJldlNpYmxpbmcgPSB0aGlzLmdldFByZXZpb3VzU2libGluZygpO1xuICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuZ2V0UGFyZW50T3JUaHJvdygpO1xuXG4gICAgaWYgKHByZXZTaWJsaW5nID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gcGFyZW50LnNlbGVjdCgwLCAwKTtcbiAgICB9XG5cbiAgICBpZiAoJGlzRWxlbWVudE5vZGUocHJldlNpYmxpbmcpKSB7XG4gICAgICByZXR1cm4gcHJldlNpYmxpbmcuc2VsZWN0KCk7XG4gICAgfSBlbHNlIGlmICghJGlzVGV4dE5vZGUocHJldlNpYmxpbmcpKSB7XG4gICAgICBjb25zdCBpbmRleCA9IHByZXZTaWJsaW5nLmdldEluZGV4V2l0aGluUGFyZW50KCkgKyAxO1xuICAgICAgcmV0dXJuIHBhcmVudC5zZWxlY3QoaW5kZXgsIGluZGV4KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJldlNpYmxpbmcuc2VsZWN0KGFuY2hvck9mZnNldCwgZm9jdXNPZmZzZXQpO1xuICB9XG4gIC8qKlxuICAgKiBNb3ZlcyBzZWxlY3Rpb24gdG8gdGhlIG5leHQgc2libGluZyBvZiB0aGlzIG5vZGUsIGF0IHRoZSBzcGVjaWZpZWQgb2Zmc2V0cy5cbiAgICpcbiAgICogQHBhcmFtIGFuY2hvck9mZnNldCAtIFRoZSBhbmNob3Igb2Zmc2V0IGZvciBzZWxlY3Rpb24uXG4gICAqIEBwYXJhbSBmb2N1c09mZnNldCAtICBUaGUgZm9jdXMgb2Zmc2V0IGZvciBzZWxlY3Rpb25cbiAgICogKi9cblxuXG4gIHNlbGVjdE5leHQoYW5jaG9yT2Zmc2V0LCBmb2N1c09mZnNldCkge1xuICAgIGVycm9yT25SZWFkT25seSgpO1xuICAgIGNvbnN0IG5leHRTaWJsaW5nID0gdGhpcy5nZXROZXh0U2libGluZygpO1xuICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuZ2V0UGFyZW50T3JUaHJvdygpO1xuXG4gICAgaWYgKG5leHRTaWJsaW5nID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gcGFyZW50LnNlbGVjdCgpO1xuICAgIH1cblxuICAgIGlmICgkaXNFbGVtZW50Tm9kZShuZXh0U2libGluZykpIHtcbiAgICAgIHJldHVybiBuZXh0U2libGluZy5zZWxlY3QoMCwgMCk7XG4gICAgfSBlbHNlIGlmICghJGlzVGV4dE5vZGUobmV4dFNpYmxpbmcpKSB7XG4gICAgICBjb25zdCBpbmRleCA9IG5leHRTaWJsaW5nLmdldEluZGV4V2l0aGluUGFyZW50KCk7XG4gICAgICByZXR1cm4gcGFyZW50LnNlbGVjdChpbmRleCwgaW5kZXgpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXh0U2libGluZy5zZWxlY3QoYW5jaG9yT2Zmc2V0LCBmb2N1c09mZnNldCk7XG4gIH1cbiAgLyoqXG4gICAqIE1hcmtzIGEgbm9kZSBkaXJ0eSwgdHJpZ2dlcmluZyB0cmFuc2Zvcm1zIGFuZFxuICAgKiBmb3JjaW5nIGl0IHRvIGJlIHJlY29uY2lsZWQgZHVyaW5nIHRoZSB1cGRhdGUgY3ljbGUuXG4gICAqXG4gICAqICovXG5cblxuICBtYXJrRGlydHkoKSB7XG4gICAgdGhpcy5nZXRXcml0YWJsZSgpO1xuICB9XG5cbn1cblxuZnVuY3Rpb24gZXJyb3JPblR5cGVLbGFzc01pc21hdGNoKHR5cGUsIGtsYXNzKSB7XG4gIGNvbnN0IHJlZ2lzdGVyZWROb2RlID0gZ2V0QWN0aXZlRWRpdG9yKCkuX25vZGVzLmdldCh0eXBlKTsgLy8gQ29tbW9uIGVycm9yIC0gc3BsaXQgaW4gaXRzIG93biBpbnZhcmlhbnRcblxuXG4gIGlmIChyZWdpc3RlcmVkTm9kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAge1xuICAgICAgdGhyb3cgRXJyb3IoYENyZWF0ZSBub2RlOiBBdHRlbXB0ZWQgdG8gY3JlYXRlIG5vZGUgJHtrbGFzcy5uYW1lfSB0aGF0IHdhcyBub3QgY29uZmlndXJlZCB0byBiZSB1c2VkIG9uIHRoZSBlZGl0b3IuYCk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgZWRpdG9yS2xhc3MgPSByZWdpc3RlcmVkTm9kZS5rbGFzcztcblxuICBpZiAoZWRpdG9yS2xhc3MgIT09IGtsYXNzKSB7XG4gICAge1xuICAgICAgdGhyb3cgRXJyb3IoYENyZWF0ZSBub2RlOiBUeXBlICR7dHlwZX0gaW4gbm9kZSAke2tsYXNzLm5hbWV9IGRvZXMgbm90IG1hdGNoIHJlZ2lzdGVyZWQgbm9kZSAke2VkaXRvcktsYXNzLm5hbWV9IHdpdGggdGhlIHNhbWUgdHlwZWApO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG4vKiogQG5vSW5oZXJpdERvYyAqL1xuXG5jbGFzcyBEZWNvcmF0b3JOb2RlIGV4dGVuZHMgTGV4aWNhbE5vZGUge1xuICBjb25zdHJ1Y3RvcihrZXkpIHtcbiAgICBzdXBlcihrZXkpO1xuICB9XG5cbiAgZGVjb3JhdGUoZWRpdG9yLCBjb25maWcpIHtcbiAgICB7XG4gICAgICB0aHJvdyBFcnJvcihgZGVjb3JhdGU6IGJhc2UgbWV0aG9kIG5vdCBleHRlbmRlZGApO1xuICAgIH1cbiAgfVxuXG4gIGlzSXNvbGF0ZWQoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaXNJbmxpbmUoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpc0tleWJvYXJkU2VsZWN0YWJsZSgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG59XG5mdW5jdGlvbiAkaXNEZWNvcmF0b3JOb2RlKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBEZWNvcmF0b3JOb2RlO1xufVxuXG4vKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5cbi8qKiBAbm9Jbmhlcml0RG9jICovXG5jbGFzcyBFbGVtZW50Tm9kZSBleHRlbmRzIExleGljYWxOb2RlIHtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG4gIGNvbnN0cnVjdG9yKGtleSkge1xuICAgIHN1cGVyKGtleSk7XG4gICAgdGhpcy5fX2ZpcnN0ID0gbnVsbDtcbiAgICB0aGlzLl9fbGFzdCA9IG51bGw7XG4gICAgdGhpcy5fX3NpemUgPSAwO1xuICAgIHRoaXMuX19mb3JtYXQgPSAwO1xuICAgIHRoaXMuX19pbmRlbnQgPSAwO1xuICAgIHRoaXMuX19kaXIgPSBudWxsO1xuICB9XG5cbiAgZ2V0Rm9ybWF0KCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzLmdldExhdGVzdCgpO1xuICAgIHJldHVybiBzZWxmLl9fZm9ybWF0O1xuICB9XG5cbiAgZ2V0Rm9ybWF0VHlwZSgpIHtcbiAgICBjb25zdCBmb3JtYXQgPSB0aGlzLmdldEZvcm1hdCgpO1xuICAgIHJldHVybiBFTEVNRU5UX0ZPUk1BVF9UT19UWVBFW2Zvcm1hdF0gfHwgJyc7XG4gIH1cblxuICBnZXRJbmRlbnQoKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0TGF0ZXN0KCk7XG4gICAgcmV0dXJuIHNlbGYuX19pbmRlbnQ7XG4gIH1cblxuICBnZXRDaGlsZHJlbigpIHtcbiAgICBjb25zdCBjaGlsZHJlbiA9IFtdO1xuICAgIGxldCBjaGlsZCA9IHRoaXMuZ2V0Rmlyc3RDaGlsZCgpO1xuXG4gICAgd2hpbGUgKGNoaWxkICE9PSBudWxsKSB7XG4gICAgICBjaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgIGNoaWxkID0gY2hpbGQuZ2V0TmV4dFNpYmxpbmcoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2hpbGRyZW47XG4gIH1cblxuICBnZXRDaGlsZHJlbktleXMoKSB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBbXTtcbiAgICBsZXQgY2hpbGQgPSB0aGlzLmdldEZpcnN0Q2hpbGQoKTtcblxuICAgIHdoaWxlIChjaGlsZCAhPT0gbnVsbCkge1xuICAgICAgY2hpbGRyZW4ucHVzaChjaGlsZC5fX2tleSk7XG4gICAgICBjaGlsZCA9IGNoaWxkLmdldE5leHRTaWJsaW5nKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoaWxkcmVuO1xuICB9XG5cbiAgZ2V0Q2hpbGRyZW5TaXplKCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzLmdldExhdGVzdCgpO1xuICAgIHJldHVybiBzZWxmLl9fc2l6ZTtcbiAgfVxuXG4gIGlzRW1wdHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q2hpbGRyZW5TaXplKCkgPT09IDA7XG4gIH1cblxuICBpc0RpcnR5KCkge1xuICAgIGNvbnN0IGVkaXRvciA9IGdldEFjdGl2ZUVkaXRvcigpO1xuICAgIGNvbnN0IGRpcnR5RWxlbWVudHMgPSBlZGl0b3IuX2RpcnR5RWxlbWVudHM7XG4gICAgcmV0dXJuIGRpcnR5RWxlbWVudHMgIT09IG51bGwgJiYgZGlydHlFbGVtZW50cy5oYXModGhpcy5fX2tleSk7XG4gIH1cblxuICBpc0xhc3RDaGlsZCgpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcy5nZXRMYXRlc3QoKTtcbiAgICBjb25zdCBwYXJlbnRMYXN0Q2hpbGQgPSB0aGlzLmdldFBhcmVudE9yVGhyb3coKS5nZXRMYXN0Q2hpbGQoKTtcbiAgICByZXR1cm4gcGFyZW50TGFzdENoaWxkICE9PSBudWxsICYmIHBhcmVudExhc3RDaGlsZC5pcyhzZWxmKTtcbiAgfVxuXG4gIGdldEFsbFRleHROb2RlcygpIHtcbiAgICBjb25zdCB0ZXh0Tm9kZXMgPSBbXTtcbiAgICBsZXQgY2hpbGQgPSB0aGlzLmdldEZpcnN0Q2hpbGQoKTtcblxuICAgIHdoaWxlIChjaGlsZCAhPT0gbnVsbCkge1xuICAgICAgaWYgKCRpc1RleHROb2RlKGNoaWxkKSkge1xuICAgICAgICB0ZXh0Tm9kZXMucHVzaChjaGlsZCk7XG4gICAgICB9XG5cbiAgICAgIGlmICgkaXNFbGVtZW50Tm9kZShjaGlsZCkpIHtcbiAgICAgICAgY29uc3Qgc3ViQ2hpbGRyZW5Ob2RlcyA9IGNoaWxkLmdldEFsbFRleHROb2RlcygpO1xuICAgICAgICB0ZXh0Tm9kZXMucHVzaCguLi5zdWJDaGlsZHJlbk5vZGVzKTtcbiAgICAgIH1cblxuICAgICAgY2hpbGQgPSBjaGlsZC5nZXROZXh0U2libGluZygpO1xuICAgIH1cblxuICAgIHJldHVybiB0ZXh0Tm9kZXM7XG4gIH1cblxuICBnZXRGaXJzdERlc2NlbmRhbnQoKSB7XG4gICAgbGV0IG5vZGUgPSB0aGlzLmdldEZpcnN0Q2hpbGQoKTtcblxuICAgIHdoaWxlIChub2RlICE9PSBudWxsKSB7XG4gICAgICBpZiAoJGlzRWxlbWVudE5vZGUobm9kZSkpIHtcbiAgICAgICAgY29uc3QgY2hpbGQgPSBub2RlLmdldEZpcnN0Q2hpbGQoKTtcblxuICAgICAgICBpZiAoY2hpbGQgIT09IG51bGwpIHtcbiAgICAgICAgICBub2RlID0gY2hpbGQ7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cblxuICBnZXRMYXN0RGVzY2VuZGFudCgpIHtcbiAgICBsZXQgbm9kZSA9IHRoaXMuZ2V0TGFzdENoaWxkKCk7XG5cbiAgICB3aGlsZSAobm9kZSAhPT0gbnVsbCkge1xuICAgICAgaWYgKCRpc0VsZW1lbnROb2RlKG5vZGUpKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkID0gbm9kZS5nZXRMYXN0Q2hpbGQoKTtcblxuICAgICAgICBpZiAoY2hpbGQgIT09IG51bGwpIHtcbiAgICAgICAgICBub2RlID0gY2hpbGQ7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cblxuICBnZXREZXNjZW5kYW50QnlJbmRleChpbmRleCkge1xuICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5nZXRDaGlsZHJlbigpO1xuICAgIGNvbnN0IGNoaWxkcmVuTGVuZ3RoID0gY2hpbGRyZW4ubGVuZ3RoOyAvLyBGb3Igbm9uLWVtcHR5IGVsZW1lbnQgbm9kZXMsIHdlIHJlc29sdmUgaXRzIGRlc2NlbmRhbnRcbiAgICAvLyAoZWl0aGVyIGEgbGVhZiBub2RlIG9yIHRoZSBib3R0b20tbW9zdCBlbGVtZW50KVxuXG4gICAgaWYgKGluZGV4ID49IGNoaWxkcmVuTGVuZ3RoKSB7XG4gICAgICBjb25zdCByZXNvbHZlZE5vZGUgPSBjaGlsZHJlbltjaGlsZHJlbkxlbmd0aCAtIDFdO1xuICAgICAgcmV0dXJuICRpc0VsZW1lbnROb2RlKHJlc29sdmVkTm9kZSkgJiYgcmVzb2x2ZWROb2RlLmdldExhc3REZXNjZW5kYW50KCkgfHwgcmVzb2x2ZWROb2RlIHx8IG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzb2x2ZWROb2RlID0gY2hpbGRyZW5baW5kZXhdO1xuICAgIHJldHVybiAkaXNFbGVtZW50Tm9kZShyZXNvbHZlZE5vZGUpICYmIHJlc29sdmVkTm9kZS5nZXRGaXJzdERlc2NlbmRhbnQoKSB8fCByZXNvbHZlZE5vZGUgfHwgbnVsbDtcbiAgfVxuXG4gIGdldEZpcnN0Q2hpbGQoKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0TGF0ZXN0KCk7XG4gICAgY29uc3QgZmlyc3RLZXkgPSBzZWxmLl9fZmlyc3Q7XG4gICAgcmV0dXJuIGZpcnN0S2V5ID09PSBudWxsID8gbnVsbCA6ICRnZXROb2RlQnlLZXkoZmlyc3RLZXkpO1xuICB9XG5cbiAgZ2V0Rmlyc3RDaGlsZE9yVGhyb3coKSB7XG4gICAgY29uc3QgZmlyc3RDaGlsZCA9IHRoaXMuZ2V0Rmlyc3RDaGlsZCgpO1xuXG4gICAgaWYgKGZpcnN0Q2hpbGQgPT09IG51bGwpIHtcbiAgICAgIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoYEV4cGVjdGVkIG5vZGUgJHt0aGlzLl9fa2V5fSB0byBoYXZlIGEgZmlyc3QgY2hpbGQuYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpcnN0Q2hpbGQ7XG4gIH1cblxuICBnZXRMYXN0Q2hpbGQoKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0TGF0ZXN0KCk7XG4gICAgY29uc3QgbGFzdEtleSA9IHNlbGYuX19sYXN0O1xuICAgIHJldHVybiBsYXN0S2V5ID09PSBudWxsID8gbnVsbCA6ICRnZXROb2RlQnlLZXkobGFzdEtleSk7XG4gIH1cblxuICBnZXRMYXN0Q2hpbGRPclRocm93KCkge1xuICAgIGNvbnN0IGxhc3RDaGlsZCA9IHRoaXMuZ2V0TGFzdENoaWxkKCk7XG5cbiAgICBpZiAobGFzdENoaWxkID09PSBudWxsKSB7XG4gICAgICB7XG4gICAgICAgIHRocm93IEVycm9yKGBFeHBlY3RlZCBub2RlICR7dGhpcy5fX2tleX0gdG8gaGF2ZSBhIGxhc3QgY2hpbGQuYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxhc3RDaGlsZDtcbiAgfVxuXG4gIGdldENoaWxkQXRJbmRleChpbmRleCkge1xuICAgIGNvbnN0IHNpemUgPSB0aGlzLmdldENoaWxkcmVuU2l6ZSgpO1xuICAgIGxldCBub2RlO1xuICAgIGxldCBpO1xuXG4gICAgaWYgKGluZGV4IDwgc2l6ZSAvIDIpIHtcbiAgICAgIG5vZGUgPSB0aGlzLmdldEZpcnN0Q2hpbGQoKTtcbiAgICAgIGkgPSAwO1xuXG4gICAgICB3aGlsZSAobm9kZSAhPT0gbnVsbCAmJiBpIDw9IGluZGV4KSB7XG4gICAgICAgIGlmIChpID09PSBpbmRleCkge1xuICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgbm9kZSA9IG5vZGUuZ2V0TmV4dFNpYmxpbmcoKTtcbiAgICAgICAgaSsrO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBub2RlID0gdGhpcy5nZXRMYXN0Q2hpbGQoKTtcbiAgICBpID0gc2l6ZSAtIDE7XG5cbiAgICB3aGlsZSAobm9kZSAhPT0gbnVsbCAmJiBpID49IGluZGV4KSB7XG4gICAgICBpZiAoaSA9PT0gaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICB9XG5cbiAgICAgIG5vZGUgPSBub2RlLmdldFByZXZpb3VzU2libGluZygpO1xuICAgICAgaS0tO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZ2V0VGV4dENvbnRlbnQoKSB7XG4gICAgbGV0IHRleHRDb250ZW50ID0gJyc7XG4gICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmdldENoaWxkcmVuKCk7XG4gICAgY29uc3QgY2hpbGRyZW5MZW5ndGggPSBjaGlsZHJlbi5sZW5ndGg7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuTGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICB0ZXh0Q29udGVudCArPSBjaGlsZC5nZXRUZXh0Q29udGVudCgpO1xuXG4gICAgICBpZiAoJGlzRWxlbWVudE5vZGUoY2hpbGQpICYmIGkgIT09IGNoaWxkcmVuTGVuZ3RoIC0gMSAmJiAhY2hpbGQuaXNJbmxpbmUoKSkge1xuICAgICAgICB0ZXh0Q29udGVudCArPSBET1VCTEVfTElORV9CUkVBSztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGV4dENvbnRlbnQ7XG4gIH1cblxuICBnZXRUZXh0Q29udGVudFNpemUoKSB7XG4gICAgbGV0IHRleHRDb250ZW50U2l6ZSA9IDA7XG4gICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmdldENoaWxkcmVuKCk7XG4gICAgY29uc3QgY2hpbGRyZW5MZW5ndGggPSBjaGlsZHJlbi5sZW5ndGg7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuTGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICB0ZXh0Q29udGVudFNpemUgKz0gY2hpbGQuZ2V0VGV4dENvbnRlbnRTaXplKCk7XG5cbiAgICAgIGlmICgkaXNFbGVtZW50Tm9kZShjaGlsZCkgJiYgaSAhPT0gY2hpbGRyZW5MZW5ndGggLSAxICYmICFjaGlsZC5pc0lubGluZSgpKSB7XG4gICAgICAgIHRleHRDb250ZW50U2l6ZSArPSBET1VCTEVfTElORV9CUkVBSy5sZW5ndGg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRleHRDb250ZW50U2l6ZTtcbiAgfVxuXG4gIGdldERpcmVjdGlvbigpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcy5nZXRMYXRlc3QoKTtcbiAgICByZXR1cm4gc2VsZi5fX2RpcjtcbiAgfVxuXG4gIGhhc0Zvcm1hdCh0eXBlKSB7XG4gICAgaWYgKHR5cGUgIT09ICcnKSB7XG4gICAgICBjb25zdCBmb3JtYXRGbGFnID0gRUxFTUVOVF9UWVBFX1RPX0ZPUk1BVFt0eXBlXTtcbiAgICAgIHJldHVybiAodGhpcy5nZXRGb3JtYXQoKSAmIGZvcm1hdEZsYWcpICE9PSAwO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfSAvLyBNdXRhdG9yc1xuXG5cbiAgc2VsZWN0KF9hbmNob3JPZmZzZXQsIF9mb2N1c09mZnNldCkge1xuICAgIGVycm9yT25SZWFkT25seSgpO1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9ICRnZXRTZWxlY3Rpb24oKTtcbiAgICBsZXQgYW5jaG9yT2Zmc2V0ID0gX2FuY2hvck9mZnNldDtcbiAgICBsZXQgZm9jdXNPZmZzZXQgPSBfZm9jdXNPZmZzZXQ7XG4gICAgY29uc3QgY2hpbGRyZW5Db3VudCA9IHRoaXMuZ2V0Q2hpbGRyZW5TaXplKCk7XG5cbiAgICBpZiAoIXRoaXMuY2FuQmVFbXB0eSgpKSB7XG4gICAgICBpZiAoX2FuY2hvck9mZnNldCA9PT0gMCAmJiBfZm9jdXNPZmZzZXQgPT09IDApIHtcbiAgICAgICAgY29uc3QgZmlyc3RDaGlsZCA9IHRoaXMuZ2V0Rmlyc3RDaGlsZCgpO1xuXG4gICAgICAgIGlmICgkaXNUZXh0Tm9kZShmaXJzdENoaWxkKSB8fCAkaXNFbGVtZW50Tm9kZShmaXJzdENoaWxkKSkge1xuICAgICAgICAgIHJldHVybiBmaXJzdENoaWxkLnNlbGVjdCgwLCAwKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICgoX2FuY2hvck9mZnNldCA9PT0gdW5kZWZpbmVkIHx8IF9hbmNob3JPZmZzZXQgPT09IGNoaWxkcmVuQ291bnQpICYmIChfZm9jdXNPZmZzZXQgPT09IHVuZGVmaW5lZCB8fCBfZm9jdXNPZmZzZXQgPT09IGNoaWxkcmVuQ291bnQpKSB7XG4gICAgICAgIGNvbnN0IGxhc3RDaGlsZCA9IHRoaXMuZ2V0TGFzdENoaWxkKCk7XG5cbiAgICAgICAgaWYgKCRpc1RleHROb2RlKGxhc3RDaGlsZCkgfHwgJGlzRWxlbWVudE5vZGUobGFzdENoaWxkKSkge1xuICAgICAgICAgIHJldHVybiBsYXN0Q2hpbGQuc2VsZWN0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoYW5jaG9yT2Zmc2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGFuY2hvck9mZnNldCA9IGNoaWxkcmVuQ291bnQ7XG4gICAgfVxuXG4gICAgaWYgKGZvY3VzT2Zmc2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGZvY3VzT2Zmc2V0ID0gY2hpbGRyZW5Db3VudDtcbiAgICB9XG5cbiAgICBjb25zdCBrZXkgPSB0aGlzLl9fa2V5O1xuXG4gICAgaWYgKCEkaXNSYW5nZVNlbGVjdGlvbihzZWxlY3Rpb24pKSB7XG4gICAgICByZXR1cm4gaW50ZXJuYWxNYWtlUmFuZ2VTZWxlY3Rpb24oa2V5LCBhbmNob3JPZmZzZXQsIGtleSwgZm9jdXNPZmZzZXQsICdlbGVtZW50JywgJ2VsZW1lbnQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZWN0aW9uLmFuY2hvci5zZXQoa2V5LCBhbmNob3JPZmZzZXQsICdlbGVtZW50Jyk7XG4gICAgICBzZWxlY3Rpb24uZm9jdXMuc2V0KGtleSwgZm9jdXNPZmZzZXQsICdlbGVtZW50Jyk7XG4gICAgICBzZWxlY3Rpb24uZGlydHkgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxlY3Rpb247XG4gIH1cblxuICBzZWxlY3RTdGFydCgpIHtcbiAgICBjb25zdCBmaXJzdE5vZGUgPSB0aGlzLmdldEZpcnN0RGVzY2VuZGFudCgpO1xuXG4gICAgaWYgKCRpc0VsZW1lbnROb2RlKGZpcnN0Tm9kZSkgfHwgJGlzVGV4dE5vZGUoZmlyc3ROb2RlKSkge1xuICAgICAgcmV0dXJuIGZpcnN0Tm9kZS5zZWxlY3QoMCwgMCk7XG4gICAgfSAvLyBEZWNvcmF0b3Igb3IgTGluZUJyZWFrXG5cblxuICAgIGlmIChmaXJzdE5vZGUgIT09IG51bGwpIHtcbiAgICAgIHJldHVybiBmaXJzdE5vZGUuc2VsZWN0UHJldmlvdXMoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zZWxlY3QoMCwgMCk7XG4gIH1cblxuICBzZWxlY3RFbmQoKSB7XG4gICAgY29uc3QgbGFzdE5vZGUgPSB0aGlzLmdldExhc3REZXNjZW5kYW50KCk7XG5cbiAgICBpZiAoJGlzRWxlbWVudE5vZGUobGFzdE5vZGUpIHx8ICRpc1RleHROb2RlKGxhc3ROb2RlKSkge1xuICAgICAgcmV0dXJuIGxhc3ROb2RlLnNlbGVjdCgpO1xuICAgIH0gLy8gRGVjb3JhdG9yIG9yIExpbmVCcmVha1xuXG5cbiAgICBpZiAobGFzdE5vZGUgIT09IG51bGwpIHtcbiAgICAgIHJldHVybiBsYXN0Tm9kZS5zZWxlY3ROZXh0KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc2VsZWN0KCk7XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICBjb25zdCB3cml0YWJsZVNlbGYgPSB0aGlzLmdldFdyaXRhYmxlKCk7XG4gICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmdldENoaWxkcmVuKCk7XG4gICAgY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiBjaGlsZC5yZW1vdmUoKSk7XG4gICAgcmV0dXJuIHdyaXRhYmxlU2VsZjtcbiAgfVxuXG4gIGFwcGVuZCguLi5ub2Rlc1RvQXBwZW5kKSB7XG4gICAgcmV0dXJuIHRoaXMuc3BsaWNlKHRoaXMuZ2V0Q2hpbGRyZW5TaXplKCksIDAsIG5vZGVzVG9BcHBlbmQpO1xuICB9XG5cbiAgc2V0RGlyZWN0aW9uKGRpcmVjdGlvbikge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzLmdldFdyaXRhYmxlKCk7XG4gICAgc2VsZi5fX2RpciA9IGRpcmVjdGlvbjtcbiAgICByZXR1cm4gc2VsZjtcbiAgfVxuXG4gIHNldEZvcm1hdCh0eXBlKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0V3JpdGFibGUoKTtcbiAgICBzZWxmLl9fZm9ybWF0ID0gdHlwZSAhPT0gJycgPyBFTEVNRU5UX1RZUEVfVE9fRk9STUFUW3R5cGVdIDogMDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHNldEluZGVudChpbmRlbnRMZXZlbCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzLmdldFdyaXRhYmxlKCk7XG4gICAgc2VsZi5fX2luZGVudCA9IGluZGVudExldmVsO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgc3BsaWNlKHN0YXJ0LCBkZWxldGVDb3VudCwgbm9kZXNUb0luc2VydCkge1xuICAgIGNvbnN0IG5vZGVzVG9JbnNlcnRMZW5ndGggPSBub2Rlc1RvSW5zZXJ0Lmxlbmd0aDtcbiAgICBjb25zdCBvbGRTaXplID0gdGhpcy5nZXRDaGlsZHJlblNpemUoKTtcbiAgICBjb25zdCB3cml0YWJsZVNlbGYgPSB0aGlzLmdldFdyaXRhYmxlKCk7XG4gICAgY29uc3Qgd3JpdGFibGVTZWxmS2V5ID0gd3JpdGFibGVTZWxmLl9fa2V5O1xuICAgIGNvbnN0IG5vZGVzVG9JbnNlcnRLZXlzID0gW107XG4gICAgY29uc3Qgbm9kZXNUb1JlbW92ZUtleXMgPSBbXTtcbiAgICBjb25zdCBub2RlQWZ0ZXJSYW5nZSA9IHRoaXMuZ2V0Q2hpbGRBdEluZGV4KHN0YXJ0ICsgZGVsZXRlQ291bnQpO1xuICAgIGxldCBub2RlQmVmb3JlUmFuZ2UgPSBudWxsO1xuICAgIGxldCBuZXdTaXplID0gb2xkU2l6ZSAtIGRlbGV0ZUNvdW50ICsgbm9kZXNUb0luc2VydExlbmd0aDtcblxuICAgIGlmIChzdGFydCAhPT0gMCkge1xuICAgICAgaWYgKHN0YXJ0ID09PSBvbGRTaXplKSB7XG4gICAgICAgIG5vZGVCZWZvcmVSYW5nZSA9IHRoaXMuZ2V0TGFzdENoaWxkKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBub2RlID0gdGhpcy5nZXRDaGlsZEF0SW5kZXgoc3RhcnQpO1xuXG4gICAgICAgIGlmIChub2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgbm9kZUJlZm9yZVJhbmdlID0gbm9kZS5nZXRQcmV2aW91c1NpYmxpbmcoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkZWxldGVDb3VudCA+IDApIHtcbiAgICAgIGxldCBub2RlVG9EZWxldGUgPSBub2RlQmVmb3JlUmFuZ2UgPT09IG51bGwgPyB0aGlzLmdldEZpcnN0Q2hpbGQoKSA6IG5vZGVCZWZvcmVSYW5nZS5nZXROZXh0U2libGluZygpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlbGV0ZUNvdW50OyBpKyspIHtcbiAgICAgICAgaWYgKG5vZGVUb0RlbGV0ZSA9PT0gbnVsbCkge1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBzcGxpY2U6IHNpYmxpbmcgbm90IGZvdW5kYCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbmV4dFNpYmxpbmcgPSBub2RlVG9EZWxldGUuZ2V0TmV4dFNpYmxpbmcoKTtcbiAgICAgICAgY29uc3Qgbm9kZUtleVRvRGVsZXRlID0gbm9kZVRvRGVsZXRlLl9fa2V5O1xuICAgICAgICBjb25zdCB3cml0YWJsZU5vZGVUb0RlbGV0ZSA9IG5vZGVUb0RlbGV0ZS5nZXRXcml0YWJsZSgpO1xuICAgICAgICByZW1vdmVGcm9tUGFyZW50KHdyaXRhYmxlTm9kZVRvRGVsZXRlKTtcbiAgICAgICAgbm9kZXNUb1JlbW92ZUtleXMucHVzaChub2RlS2V5VG9EZWxldGUpO1xuICAgICAgICBub2RlVG9EZWxldGUgPSBuZXh0U2libGluZztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgcHJldk5vZGUgPSBub2RlQmVmb3JlUmFuZ2U7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzVG9JbnNlcnRMZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgbm9kZVRvSW5zZXJ0ID0gbm9kZXNUb0luc2VydFtpXTtcblxuICAgICAgaWYgKHByZXZOb2RlICE9PSBudWxsICYmIG5vZGVUb0luc2VydC5pcyhwcmV2Tm9kZSkpIHtcbiAgICAgICAgbm9kZUJlZm9yZVJhbmdlID0gcHJldk5vZGUgPSBwcmV2Tm9kZS5nZXRQcmV2aW91c1NpYmxpbmcoKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgd3JpdGFibGVOb2RlVG9JbnNlcnQgPSBub2RlVG9JbnNlcnQuZ2V0V3JpdGFibGUoKTtcblxuICAgICAgaWYgKHdyaXRhYmxlTm9kZVRvSW5zZXJ0Ll9fcGFyZW50ID09PSB3cml0YWJsZVNlbGZLZXkpIHtcbiAgICAgICAgbmV3U2l6ZS0tO1xuICAgICAgfVxuXG4gICAgICByZW1vdmVGcm9tUGFyZW50KHdyaXRhYmxlTm9kZVRvSW5zZXJ0KTtcbiAgICAgIGNvbnN0IG5vZGVLZXlUb0luc2VydCA9IG5vZGVUb0luc2VydC5fX2tleTtcblxuICAgICAgaWYgKHByZXZOb2RlID09PSBudWxsKSB7XG4gICAgICAgIHdyaXRhYmxlU2VsZi5fX2ZpcnN0ID0gbm9kZUtleVRvSW5zZXJ0O1xuICAgICAgICB3cml0YWJsZU5vZGVUb0luc2VydC5fX3ByZXYgPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgd3JpdGFibGVQcmV2Tm9kZSA9IHByZXZOb2RlLmdldFdyaXRhYmxlKCk7XG4gICAgICAgIHdyaXRhYmxlUHJldk5vZGUuX19uZXh0ID0gbm9kZUtleVRvSW5zZXJ0O1xuICAgICAgICB3cml0YWJsZU5vZGVUb0luc2VydC5fX3ByZXYgPSB3cml0YWJsZVByZXZOb2RlLl9fa2V5O1xuICAgICAgfVxuXG4gICAgICBpZiAobm9kZVRvSW5zZXJ0Ll9fa2V5ID09PSB3cml0YWJsZVNlbGZLZXkpIHtcbiAgICAgICAge1xuICAgICAgICAgIHRocm93IEVycm9yKGBhcHBlbmQ6IGF0dGVtcHRpbmcgdG8gYXBwZW5kIHNlbGZgKTtcbiAgICAgICAgfVxuICAgICAgfSAvLyBTZXQgY2hpbGQgcGFyZW50IHRvIHNlbGZcblxuXG4gICAgICB3cml0YWJsZU5vZGVUb0luc2VydC5fX3BhcmVudCA9IHdyaXRhYmxlU2VsZktleTtcbiAgICAgIG5vZGVzVG9JbnNlcnRLZXlzLnB1c2gobm9kZUtleVRvSW5zZXJ0KTtcbiAgICAgIHByZXZOb2RlID0gbm9kZVRvSW5zZXJ0O1xuICAgIH1cblxuICAgIGlmIChzdGFydCArIGRlbGV0ZUNvdW50ID09PSBvbGRTaXplKSB7XG4gICAgICBpZiAocHJldk5vZGUgIT09IG51bGwpIHtcbiAgICAgICAgY29uc3Qgd3JpdGFibGVQcmV2Tm9kZSA9IHByZXZOb2RlLmdldFdyaXRhYmxlKCk7XG4gICAgICAgIHdyaXRhYmxlUHJldk5vZGUuX19uZXh0ID0gbnVsbDtcbiAgICAgICAgd3JpdGFibGVTZWxmLl9fbGFzdCA9IHByZXZOb2RlLl9fa2V5O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobm9kZUFmdGVyUmFuZ2UgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IHdyaXRhYmxlTm9kZUFmdGVyUmFuZ2UgPSBub2RlQWZ0ZXJSYW5nZS5nZXRXcml0YWJsZSgpO1xuXG4gICAgICBpZiAocHJldk5vZGUgIT09IG51bGwpIHtcbiAgICAgICAgY29uc3Qgd3JpdGFibGVQcmV2Tm9kZSA9IHByZXZOb2RlLmdldFdyaXRhYmxlKCk7XG4gICAgICAgIHdyaXRhYmxlTm9kZUFmdGVyUmFuZ2UuX19wcmV2ID0gcHJldk5vZGUuX19rZXk7XG4gICAgICAgIHdyaXRhYmxlUHJldk5vZGUuX19uZXh0ID0gbm9kZUFmdGVyUmFuZ2UuX19rZXk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3cml0YWJsZU5vZGVBZnRlclJhbmdlLl9fcHJldiA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgd3JpdGFibGVTZWxmLl9fc2l6ZSA9IG5ld1NpemU7IC8vIEluIGNhc2Ugb2YgZGVsZXRpb24gd2UgbmVlZCB0byBhZGp1c3Qgc2VsZWN0aW9uLCB1bmxpbmsgcmVtb3ZlZCBub2Rlc1xuICAgIC8vIGFuZCBjbGVhbiB1cCBub2RlIGl0c2VsZiBpZiBpdCBiZWNvbWVzIGVtcHR5LiBOb25lIG9mIHRoZXNlIG5lZWRlZFxuICAgIC8vIGZvciBpbnNlcnRpb24tb25seSBjYXNlc1xuXG4gICAgaWYgKG5vZGVzVG9SZW1vdmVLZXlzLmxlbmd0aCkge1xuICAgICAgLy8gQWRqdXN0aW5nIHNlbGVjdGlvbiwgaW4gY2FzZSBub2RlIHRoYXQgd2FzIGFuY2hvci9mb2N1cyB3aWxsIGJlIGRlbGV0ZWRcbiAgICAgIGNvbnN0IHNlbGVjdGlvbiA9ICRnZXRTZWxlY3Rpb24oKTtcblxuICAgICAgaWYgKCRpc1JhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikpIHtcbiAgICAgICAgY29uc3Qgbm9kZXNUb1JlbW92ZUtleVNldCA9IG5ldyBTZXQobm9kZXNUb1JlbW92ZUtleXMpO1xuICAgICAgICBjb25zdCBub2Rlc1RvSW5zZXJ0S2V5U2V0ID0gbmV3IFNldChub2Rlc1RvSW5zZXJ0S2V5cyk7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBhbmNob3IsXG4gICAgICAgICAgZm9jdXNcbiAgICAgICAgfSA9IHNlbGVjdGlvbjtcblxuICAgICAgICBpZiAoaXNQb2ludFJlbW92ZWQoYW5jaG9yLCBub2Rlc1RvUmVtb3ZlS2V5U2V0LCBub2Rlc1RvSW5zZXJ0S2V5U2V0KSkge1xuICAgICAgICAgIG1vdmVTZWxlY3Rpb25Qb2ludFRvU2libGluZyhhbmNob3IsIGFuY2hvci5nZXROb2RlKCksIHRoaXMsIG5vZGVCZWZvcmVSYW5nZSwgbm9kZUFmdGVyUmFuZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzUG9pbnRSZW1vdmVkKGZvY3VzLCBub2Rlc1RvUmVtb3ZlS2V5U2V0LCBub2Rlc1RvSW5zZXJ0S2V5U2V0KSkge1xuICAgICAgICAgIG1vdmVTZWxlY3Rpb25Qb2ludFRvU2libGluZyhmb2N1cywgZm9jdXMuZ2V0Tm9kZSgpLCB0aGlzLCBub2RlQmVmb3JlUmFuZ2UsIG5vZGVBZnRlclJhbmdlKTtcbiAgICAgICAgfSAvLyBDbGVhbnVwIGlmIG5vZGUgY2FuJ3QgYmUgZW1wdHlcblxuXG4gICAgICAgIGlmIChuZXdTaXplID09PSAwICYmICF0aGlzLmNhbkJlRW1wdHkoKSAmJiAhJGlzUm9vdE9yU2hhZG93Um9vdCh0aGlzKSkge1xuICAgICAgICAgIHRoaXMucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gd3JpdGFibGVTZWxmO1xuICB9IC8vIEpTT04gc2VyaWFsaXphdGlvblxuXG5cbiAgZXhwb3J0SlNPTigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2hpbGRyZW46IFtdLFxuICAgICAgZGlyZWN0aW9uOiB0aGlzLmdldERpcmVjdGlvbigpLFxuICAgICAgZm9ybWF0OiB0aGlzLmdldEZvcm1hdFR5cGUoKSxcbiAgICAgIGluZGVudDogdGhpcy5nZXRJbmRlbnQoKSxcbiAgICAgIHR5cGU6ICdlbGVtZW50JyxcbiAgICAgIHZlcnNpb246IDFcbiAgICB9O1xuICB9IC8vIFRoZXNlIGFyZSBpbnRlbmRlZCB0byBiZSBleHRlbmRzIGZvciBzcGVjaWZpYyBlbGVtZW50IGhldXJpc3RpY3MuXG5cblxuICBpbnNlcnROZXdBZnRlcihzZWxlY3Rpb24sIHJlc3RvcmVTZWxlY3Rpb24pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNhbkluc2VydFRhYigpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjYW5JbmRlbnQoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLypcbiAgICogVGhpcyBtZXRob2QgY29udHJvbHMgdGhlIGJlaGF2aW9yIG9mIGEgdGhlIG5vZGUgZHVyaW5nIGJhY2t3YXJkc1xuICAgKiBkZWxldGlvbiAoaS5lLiwgYmFja3NwYWNlKSB3aGVuIHNlbGVjdGlvbiBpcyBhdCB0aGUgYmVnaW5uaW5nIG9mXG4gICAqIHRoZSBub2RlIChvZmZzZXQgMClcbiAgICovXG5cblxuICBjb2xsYXBzZUF0U3RhcnQoc2VsZWN0aW9uKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZXhjbHVkZUZyb21Db3B5KGRlc3RpbmF0aW9uKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY2FuRXh0cmFjdENvbnRlbnRzKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgY2FuUmVwbGFjZVdpdGgocmVwbGFjZW1lbnQpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGNhbkluc2VydEFmdGVyKG5vZGUpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGNhbkJlRW1wdHkoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBjYW5JbnNlcnRUZXh0QmVmb3JlKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgY2FuSW5zZXJ0VGV4dEFmdGVyKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaXNJbmxpbmUoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IC8vIEEgc2hhZG93IHJvb3QgaXMgYSBOb2RlIHRoYXQgYmVoYXZlcyBsaWtlIFJvb3ROb2RlLiBUaGUgc2hhZG93IHJvb3QgKGFuZCBSb290Tm9kZSkgbWFyayB0aGVcbiAgLy8gZW5kIG9mIHRoZSBoaWVyY2hhcmNoeSwgbW9zdCBpbXBsZW1lbnRhdGlvbnMgc2hvdWxkIHRyZWF0IGl0IGFzIHRoZXJlJ3Mgbm90aGluZyAodXB3YXJkcylcbiAgLy8gYmV5b25kIHRoaXMgcG9pbnQuIEZvciBleGFtcGxlLCBub2RlLmdldFRvcExldmVsRWxlbWVudCgpLCB3aGVuIHBlcmZvcm1lZCBpbnNpZGUgYSBUYWJsZUNlbGxOb2RlXG4gIC8vIHdpbGwgcmV0dXJuIHRoZSBpbW1lZGlhdGUgZmlyc3QgY2hpbGQgdW5kZXJuZWF0aCBUYWJsZUNlbGxOb2RlIGluc3RlYWQgb2YgUm9vdE5vZGUuXG5cblxuICBpc1NoYWRvd1Jvb3QoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY2FuTWVyZ2VXaXRoKG5vZGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBleHRyYWN0V2l0aENoaWxkKGNoaWxkLCBzZWxlY3Rpb24sIGRlc3RpbmF0aW9uKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbn1cbmZ1bmN0aW9uICRpc0VsZW1lbnROb2RlKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBFbGVtZW50Tm9kZTtcbn1cblxuZnVuY3Rpb24gaXNQb2ludFJlbW92ZWQocG9pbnQsIG5vZGVzVG9SZW1vdmVLZXlTZXQsIG5vZGVzVG9JbnNlcnRLZXlTZXQpIHtcbiAgbGV0IG5vZGUgPSBwb2ludC5nZXROb2RlKCk7XG5cbiAgd2hpbGUgKG5vZGUpIHtcbiAgICBjb25zdCBub2RlS2V5ID0gbm9kZS5fX2tleTtcblxuICAgIGlmIChub2Rlc1RvUmVtb3ZlS2V5U2V0Lmhhcyhub2RlS2V5KSAmJiAhbm9kZXNUb0luc2VydEtleVNldC5oYXMobm9kZUtleSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIG5vZGUgPSBub2RlLmdldFBhcmVudCgpO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5cbi8qKiBAbm9Jbmhlcml0RG9jICovXG5jbGFzcyBSb290Tm9kZSBleHRlbmRzIEVsZW1lbnROb2RlIHtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBzdGF0aWMgZ2V0VHlwZSgpIHtcbiAgICByZXR1cm4gJ3Jvb3QnO1xuICB9XG5cbiAgc3RhdGljIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgUm9vdE5vZGUoKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdyb290Jyk7XG4gICAgdGhpcy5fX2NhY2hlZFRleHQgPSBudWxsO1xuICB9XG5cbiAgZ2V0VG9wTGV2ZWxFbGVtZW50T3JUaHJvdygpIHtcbiAgICB7XG4gICAgICB0aHJvdyBFcnJvcihgZ2V0VG9wTGV2ZWxFbGVtZW50T3JUaHJvdzogcm9vdCBub2RlcyBhcmUgbm90IHRvcCBsZXZlbCBlbGVtZW50c2ApO1xuICAgIH1cbiAgfVxuXG4gIGdldFRleHRDb250ZW50KCkge1xuICAgIGNvbnN0IGNhY2hlZFRleHQgPSB0aGlzLl9fY2FjaGVkVGV4dDtcblxuICAgIGlmIChpc0N1cnJlbnRseVJlYWRPbmx5TW9kZSgpIHx8IGdldEFjdGl2ZUVkaXRvcigpLl9kaXJ0eVR5cGUgPT09IE5PX0RJUlRZX05PREVTKSB7XG4gICAgICBpZiAoY2FjaGVkVGV4dCAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gY2FjaGVkVGV4dDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc3VwZXIuZ2V0VGV4dENvbnRlbnQoKTtcbiAgfVxuXG4gIHJlbW92ZSgpIHtcbiAgICB7XG4gICAgICB0aHJvdyBFcnJvcihgcmVtb3ZlOiBjYW5ub3QgYmUgY2FsbGVkIG9uIHJvb3Qgbm9kZXNgKTtcbiAgICB9XG4gIH1cblxuICByZXBsYWNlKG5vZGUpIHtcbiAgICB7XG4gICAgICB0aHJvdyBFcnJvcihgcmVwbGFjZTogY2Fubm90IGJlIGNhbGxlZCBvbiByb290IG5vZGVzYCk7XG4gICAgfVxuICB9XG5cbiAgaW5zZXJ0QmVmb3JlKG5vZGVUb0luc2VydCkge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGBpbnNlcnRCZWZvcmU6IGNhbm5vdCBiZSBjYWxsZWQgb24gcm9vdCBub2Rlc2ApO1xuICAgIH1cbiAgfVxuXG4gIGluc2VydEFmdGVyKG5vZGVUb0luc2VydCkge1xuICAgIHtcbiAgICAgIHRocm93IEVycm9yKGBpbnNlcnRBZnRlcjogY2Fubm90IGJlIGNhbGxlZCBvbiByb290IG5vZGVzYCk7XG4gICAgfVxuICB9IC8vIFZpZXdcblxuXG4gIHVwZGF0ZURPTShwcmV2Tm9kZSwgZG9tKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IC8vIE11dGF0ZVxuXG5cbiAgYXBwZW5kKC4uLm5vZGVzVG9BcHBlbmQpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzVG9BcHBlbmQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1RvQXBwZW5kW2ldO1xuXG4gICAgICBpZiAoISRpc0VsZW1lbnROb2RlKG5vZGUpICYmICEkaXNEZWNvcmF0b3JOb2RlKG5vZGUpKSB7XG4gICAgICAgIHtcbiAgICAgICAgICB0aHJvdyBFcnJvcihgcm9vdE5vZGUuYXBwZW5kOiBPbmx5IGVsZW1lbnQgb3IgZGVjb3JhdG9yIG5vZGVzIGNhbiBiZSBhcHBlbmRlZCB0byB0aGUgcm9vdCBub2RlYCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc3VwZXIuYXBwZW5kKC4uLm5vZGVzVG9BcHBlbmQpO1xuICB9XG5cbiAgc3RhdGljIGltcG9ydEpTT04oc2VyaWFsaXplZE5vZGUpIHtcbiAgICAvLyBXZSBkb24ndCBjcmVhdGUgYSByb290LCBhbmQgaW5zdGVhZCB1c2UgdGhlIGV4aXN0aW5nIHJvb3QuXG4gICAgY29uc3Qgbm9kZSA9ICRnZXRSb290KCk7XG4gICAgbm9kZS5zZXRGb3JtYXQoc2VyaWFsaXplZE5vZGUuZm9ybWF0KTtcbiAgICBub2RlLnNldEluZGVudChzZXJpYWxpemVkTm9kZS5pbmRlbnQpO1xuICAgIG5vZGUuc2V0RGlyZWN0aW9uKHNlcmlhbGl6ZWROb2RlLmRpcmVjdGlvbik7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cblxuICBleHBvcnRKU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjaGlsZHJlbjogW10sXG4gICAgICBkaXJlY3Rpb246IHRoaXMuZ2V0RGlyZWN0aW9uKCksXG4gICAgICBmb3JtYXQ6IHRoaXMuZ2V0Rm9ybWF0VHlwZSgpLFxuICAgICAgaW5kZW50OiB0aGlzLmdldEluZGVudCgpLFxuICAgICAgdHlwZTogJ3Jvb3QnLFxuICAgICAgdmVyc2lvbjogMVxuICAgIH07XG4gIH1cblxuICBjb2xsYXBzZUF0U3RhcnQoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxufVxuZnVuY3Rpb24gJGNyZWF0ZVJvb3ROb2RlKCkge1xuICByZXR1cm4gbmV3IFJvb3ROb2RlKCk7XG59XG5mdW5jdGlvbiAkaXNSb290Tm9kZShub2RlKSB7XG4gIHJldHVybiBub2RlIGluc3RhbmNlb2YgUm9vdE5vZGU7XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cbmZ1bmN0aW9uIGVkaXRvclN0YXRlSGFzRGlydHlTZWxlY3Rpb24oZWRpdG9yU3RhdGUsIGVkaXRvcikge1xuICBjb25zdCBjdXJyZW50U2VsZWN0aW9uID0gZWRpdG9yLmdldEVkaXRvclN0YXRlKCkuX3NlbGVjdGlvbjtcblxuICBjb25zdCBwZW5kaW5nU2VsZWN0aW9uID0gZWRpdG9yU3RhdGUuX3NlbGVjdGlvbjsgLy8gQ2hlY2sgaWYgd2UgbmVlZCB0byB1cGRhdGUgYmVjYXVzZSBvZiBjaGFuZ2VzIGluIHNlbGVjdGlvblxuXG4gIGlmIChwZW5kaW5nU2VsZWN0aW9uICE9PSBudWxsKSB7XG4gICAgaWYgKHBlbmRpbmdTZWxlY3Rpb24uZGlydHkgfHwgIXBlbmRpbmdTZWxlY3Rpb24uaXMoY3VycmVudFNlbGVjdGlvbikpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSBlbHNlIGlmIChjdXJyZW50U2VsZWN0aW9uICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBjbG9uZUVkaXRvclN0YXRlKGN1cnJlbnQpIHtcbiAgcmV0dXJuIG5ldyBFZGl0b3JTdGF0ZShuZXcgTWFwKGN1cnJlbnQuX25vZGVNYXApKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUVtcHR5RWRpdG9yU3RhdGUoKSB7XG4gIHJldHVybiBuZXcgRWRpdG9yU3RhdGUobmV3IE1hcChbWydyb290JywgJGNyZWF0ZVJvb3ROb2RlKCldXSkpO1xufVxuXG5mdW5jdGlvbiBleHBvcnROb2RlVG9KU09OKG5vZGUpIHtcbiAgY29uc3Qgc2VyaWFsaXplZE5vZGUgPSBub2RlLmV4cG9ydEpTT04oKTtcbiAgY29uc3Qgbm9kZUNsYXNzID0gbm9kZS5jb25zdHJ1Y3RvcjsgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPIFJlcGxhY2UgQ2xhc3MgdXRpbGl0eSB0eXBlIHdpdGggSW5zdGFuY2VUeXBlXG5cbiAgaWYgKHNlcmlhbGl6ZWROb2RlLnR5cGUgIT09IG5vZGVDbGFzcy5nZXRUeXBlKCkpIHtcbiAgICB7XG4gICAgICB0aHJvdyBFcnJvcihgTGV4aWNhbE5vZGU6IE5vZGUgJHtub2RlQ2xhc3MubmFtZX0gZG9lcyBub3QgaW1wbGVtZW50IC5leHBvcnRKU09OKCkuYCk7XG4gICAgfVxuICB9IC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETyBSZXBsYWNlIENsYXNzIHV0aWxpdHkgdHlwZSB3aXRoIEluc3RhbmNlVHlwZVxuXG5cbiAgY29uc3Qgc2VyaWFsaXplZENoaWxkcmVuID0gc2VyaWFsaXplZE5vZGUuY2hpbGRyZW47XG5cbiAgaWYgKCRpc0VsZW1lbnROb2RlKG5vZGUpKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNlcmlhbGl6ZWRDaGlsZHJlbikpIHtcbiAgICAgIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoYExleGljYWxOb2RlOiBOb2RlICR7bm9kZUNsYXNzLm5hbWV9IGlzIGFuIGVsZW1lbnQgYnV0IC5leHBvcnRKU09OKCkgZG9lcyBub3QgaGF2ZSBhIGNoaWxkcmVuIGFycmF5LmApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGNoaWxkcmVuID0gbm9kZS5nZXRDaGlsZHJlbigpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgIGNvbnN0IHNlcmlhbGl6ZWRDaGlsZE5vZGUgPSBleHBvcnROb2RlVG9KU09OKGNoaWxkKTtcbiAgICAgIHNlcmlhbGl6ZWRDaGlsZHJlbi5wdXNoKHNlcmlhbGl6ZWRDaGlsZE5vZGUpO1xuICAgIH1cbiAgfSAvLyBAdHMtZXhwZWN0LWVycm9yXG5cblxuICByZXR1cm4gc2VyaWFsaXplZE5vZGU7XG59XG5cbmNsYXNzIEVkaXRvclN0YXRlIHtcbiAgY29uc3RydWN0b3Iobm9kZU1hcCwgc2VsZWN0aW9uKSB7XG4gICAgdGhpcy5fbm9kZU1hcCA9IG5vZGVNYXA7XG4gICAgdGhpcy5fc2VsZWN0aW9uID0gc2VsZWN0aW9uIHx8IG51bGw7XG4gICAgdGhpcy5fZmx1c2hTeW5jID0gZmFsc2U7XG4gICAgdGhpcy5fcmVhZE9ubHkgPSBmYWxzZTtcbiAgfVxuXG4gIGlzRW1wdHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX25vZGVNYXAuc2l6ZSA9PT0gMSAmJiB0aGlzLl9zZWxlY3Rpb24gPT09IG51bGw7XG4gIH1cblxuICByZWFkKGNhbGxiYWNrRm4pIHtcbiAgICByZXR1cm4gcmVhZEVkaXRvclN0YXRlKHRoaXMsIGNhbGxiYWNrRm4pO1xuICB9XG5cbiAgY2xvbmUoc2VsZWN0aW9uKSB7XG4gICAgY29uc3QgZWRpdG9yU3RhdGUgPSBuZXcgRWRpdG9yU3RhdGUodGhpcy5fbm9kZU1hcCwgc2VsZWN0aW9uID09PSB1bmRlZmluZWQgPyB0aGlzLl9zZWxlY3Rpb24gOiBzZWxlY3Rpb24pO1xuICAgIGVkaXRvclN0YXRlLl9yZWFkT25seSA9IHRydWU7XG4gICAgcmV0dXJuIGVkaXRvclN0YXRlO1xuICB9XG5cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiByZWFkRWRpdG9yU3RhdGUodGhpcywgKCkgPT4gKHtcbiAgICAgIHJvb3Q6IGV4cG9ydE5vZGVUb0pTT04oJGdldFJvb3QoKSlcbiAgICB9KSk7XG4gIH1cblxufVxuXG4vKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5cbi8qKiBAbm9Jbmhlcml0RG9jICovXG5jbGFzcyBMaW5lQnJlYWtOb2RlIGV4dGVuZHMgTGV4aWNhbE5vZGUge1xuICBzdGF0aWMgZ2V0VHlwZSgpIHtcbiAgICByZXR1cm4gJ2xpbmVicmVhayc7XG4gIH1cblxuICBzdGF0aWMgY2xvbmUobm9kZSkge1xuICAgIHJldHVybiBuZXcgTGluZUJyZWFrTm9kZShub2RlLl9fa2V5KTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGtleSkge1xuICAgIHN1cGVyKGtleSk7XG4gIH1cblxuICBnZXRUZXh0Q29udGVudCgpIHtcbiAgICByZXR1cm4gJ1xcbic7XG4gIH1cblxuICBjcmVhdGVET00oKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2JyJyk7XG4gIH1cblxuICB1cGRhdGVET00oKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3RhdGljIGltcG9ydERPTSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYnI6IG5vZGUgPT4ge1xuICAgICAgICBjb25zdCBwYXJlbnRFbGVtZW50ID0gbm9kZS5wYXJlbnRFbGVtZW50OyAvLyBJZiB0aGUgPGJyPiBpcyB0aGUgb25seSBjaGlsZCwgdGhlbiBza2lwIGluY2x1ZGluZyBpdFxuXG4gICAgICAgIGlmIChwYXJlbnRFbGVtZW50ICE9IG51bGwgJiYgcGFyZW50RWxlbWVudC5maXJzdENoaWxkID09PSBub2RlICYmIHBhcmVudEVsZW1lbnQubGFzdENoaWxkID09PSBub2RlKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNvbnZlcnNpb246IGNvbnZlcnRMaW5lQnJlYWtFbGVtZW50LFxuICAgICAgICAgIHByaW9yaXR5OiAwXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHN0YXRpYyBpbXBvcnRKU09OKHNlcmlhbGl6ZWRMaW5lQnJlYWtOb2RlKSB7XG4gICAgcmV0dXJuICRjcmVhdGVMaW5lQnJlYWtOb2RlKCk7XG4gIH1cblxuICBleHBvcnRKU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnbGluZWJyZWFrJyxcbiAgICAgIHZlcnNpb246IDFcbiAgICB9O1xuICB9XG5cbn1cblxuZnVuY3Rpb24gY29udmVydExpbmVCcmVha0VsZW1lbnQobm9kZSkge1xuICByZXR1cm4ge1xuICAgIG5vZGU6ICRjcmVhdGVMaW5lQnJlYWtOb2RlKClcbiAgfTtcbn1cblxuZnVuY3Rpb24gJGNyZWF0ZUxpbmVCcmVha05vZGUoKSB7XG4gIHJldHVybiAkYXBwbHlOb2RlUmVwbGFjZW1lbnQobmV3IExpbmVCcmVha05vZGUoKSk7XG59XG5mdW5jdGlvbiAkaXNMaW5lQnJlYWtOb2RlKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBMaW5lQnJlYWtOb2RlO1xufVxuXG4vKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5cbmZ1bmN0aW9uIGdldEVsZW1lbnRPdXRlclRhZyhub2RlLCBmb3JtYXQpIHtcbiAgaWYgKGZvcm1hdCAmIElTX0NPREUpIHtcbiAgICByZXR1cm4gJ2NvZGUnO1xuICB9XG5cbiAgaWYgKGZvcm1hdCAmIElTX0hJR0hMSUdIVCkge1xuICAgIHJldHVybiAnbWFyayc7XG4gIH1cblxuICBpZiAoZm9ybWF0ICYgSVNfU1VCU0NSSVBUKSB7XG4gICAgcmV0dXJuICdzdWInO1xuICB9XG5cbiAgaWYgKGZvcm1hdCAmIElTX1NVUEVSU0NSSVBUKSB7XG4gICAgcmV0dXJuICdzdXAnO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGdldEVsZW1lbnRJbm5lclRhZyhub2RlLCBmb3JtYXQpIHtcbiAgaWYgKGZvcm1hdCAmIElTX0JPTEQpIHtcbiAgICByZXR1cm4gJ3N0cm9uZyc7XG4gIH1cblxuICBpZiAoZm9ybWF0ICYgSVNfSVRBTElDKSB7XG4gICAgcmV0dXJuICdlbSc7XG4gIH1cblxuICByZXR1cm4gJ3NwYW4nO1xufVxuXG5mdW5jdGlvbiBzZXRUZXh0VGhlbWVDbGFzc05hbWVzKHRhZywgcHJldkZvcm1hdCwgbmV4dEZvcm1hdCwgZG9tLCB0ZXh0Q2xhc3NOYW1lcykge1xuICBjb25zdCBkb21DbGFzc0xpc3QgPSBkb20uY2xhc3NMaXN0OyAvLyBGaXJzdGx5IHdlIGhhbmRsZSB0aGUgYmFzZSB0aGVtZS5cblxuICBsZXQgY2xhc3NOYW1lcyA9IGdldENhY2hlZENsYXNzTmFtZUFycmF5KHRleHRDbGFzc05hbWVzLCAnYmFzZScpO1xuXG4gIGlmIChjbGFzc05hbWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICBkb21DbGFzc0xpc3QuYWRkKC4uLmNsYXNzTmFtZXMpO1xuICB9IC8vIFNlY29uZGx5IHdlIGhhbmRsZSB0aGUgc3BlY2lhbCBjYXNlOiB1bmRlcmxpbmUgKyBzdHJpa2V0aHJvdWdoLlxuICAvLyBXZSBoYXZlIHRvIGRvIHRoaXMgYXMgd2UgbmVlZCBhIHdheSB0byBjb21wb3NlIHRoZSBmYWN0IHRoYXRcbiAgLy8gdGhlIHNhbWUgQ1NTIHByb3BlcnR5IHdpbGwgbmVlZCB0byBiZSB1c2VkOiB0ZXh0LWRlY29yYXRpb24uXG4gIC8vIEluIGFuIGlkZWFsIHdvcmxkIHdlIHNob3VsZG4ndCBoYXZlIHRvIGRvIHRoaXMsIGJ1dCB0aGVyZSdzIG5vXG4gIC8vIGVhc3kgd29ya2Fyb3VuZCBmb3IgbWFueSBhdG9taWMgQ1NTIHN5c3RlbXMgdG9kYXkuXG5cblxuICBjbGFzc05hbWVzID0gZ2V0Q2FjaGVkQ2xhc3NOYW1lQXJyYXkodGV4dENsYXNzTmFtZXMsICd1bmRlcmxpbmVTdHJpa2V0aHJvdWdoJyk7XG4gIGxldCBoYXNVbmRlcmxpbmVTdHJpa2V0aHJvdWdoID0gZmFsc2U7XG4gIGNvbnN0IHByZXZVbmRlcmxpbmVTdHJpa2V0aHJvdWdoID0gcHJldkZvcm1hdCAmIElTX1VOREVSTElORSAmJiBwcmV2Rm9ybWF0ICYgSVNfU1RSSUtFVEhST1VHSDtcbiAgY29uc3QgbmV4dFVuZGVybGluZVN0cmlrZXRocm91Z2ggPSBuZXh0Rm9ybWF0ICYgSVNfVU5ERVJMSU5FICYmIG5leHRGb3JtYXQgJiBJU19TVFJJS0VUSFJPVUdIO1xuXG4gIGlmIChjbGFzc05hbWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICBpZiAobmV4dFVuZGVybGluZVN0cmlrZXRocm91Z2gpIHtcbiAgICAgIGhhc1VuZGVybGluZVN0cmlrZXRocm91Z2ggPSB0cnVlO1xuXG4gICAgICBpZiAoIXByZXZVbmRlcmxpbmVTdHJpa2V0aHJvdWdoKSB7XG4gICAgICAgIGRvbUNsYXNzTGlzdC5hZGQoLi4uY2xhc3NOYW1lcyk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChwcmV2VW5kZXJsaW5lU3RyaWtldGhyb3VnaCkge1xuICAgICAgZG9tQ2xhc3NMaXN0LnJlbW92ZSguLi5jbGFzc05hbWVzKTtcbiAgICB9XG4gIH1cblxuICBmb3IgKGNvbnN0IGtleSBpbiBURVhUX1RZUEVfVE9fRk9STUFUKSB7XG4gICAgY29uc3QgZm9ybWF0ID0ga2V5O1xuICAgIGNvbnN0IGZsYWcgPSBURVhUX1RZUEVfVE9fRk9STUFUW2Zvcm1hdF07XG4gICAgY2xhc3NOYW1lcyA9IGdldENhY2hlZENsYXNzTmFtZUFycmF5KHRleHRDbGFzc05hbWVzLCBrZXkpO1xuXG4gICAgaWYgKGNsYXNzTmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKG5leHRGb3JtYXQgJiBmbGFnKSB7XG4gICAgICAgIGlmIChoYXNVbmRlcmxpbmVTdHJpa2V0aHJvdWdoICYmIChrZXkgPT09ICd1bmRlcmxpbmUnIHx8IGtleSA9PT0gJ3N0cmlrZXRocm91Z2gnKSkge1xuICAgICAgICAgIGlmIChwcmV2Rm9ybWF0ICYgZmxhZykge1xuICAgICAgICAgICAgZG9tQ2xhc3NMaXN0LnJlbW92ZSguLi5jbGFzc05hbWVzKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgocHJldkZvcm1hdCAmIGZsYWcpID09PSAwIHx8IHByZXZVbmRlcmxpbmVTdHJpa2V0aHJvdWdoICYmIGtleSA9PT0gJ3VuZGVybGluZScgfHwga2V5ID09PSAnc3RyaWtldGhyb3VnaCcpIHtcbiAgICAgICAgICBkb21DbGFzc0xpc3QuYWRkKC4uLmNsYXNzTmFtZXMpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHByZXZGb3JtYXQgJiBmbGFnKSB7XG4gICAgICAgIGRvbUNsYXNzTGlzdC5yZW1vdmUoLi4uY2xhc3NOYW1lcyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGRpZmZDb21wb3NlZFRleHQoYSwgYikge1xuICBjb25zdCBhTGVuZ3RoID0gYS5sZW5ndGg7XG4gIGNvbnN0IGJMZW5ndGggPSBiLmxlbmd0aDtcbiAgbGV0IGxlZnQgPSAwO1xuICBsZXQgcmlnaHQgPSAwO1xuXG4gIHdoaWxlIChsZWZ0IDwgYUxlbmd0aCAmJiBsZWZ0IDwgYkxlbmd0aCAmJiBhW2xlZnRdID09PSBiW2xlZnRdKSB7XG4gICAgbGVmdCsrO1xuICB9XG5cbiAgd2hpbGUgKHJpZ2h0ICsgbGVmdCA8IGFMZW5ndGggJiYgcmlnaHQgKyBsZWZ0IDwgYkxlbmd0aCAmJiBhW2FMZW5ndGggLSByaWdodCAtIDFdID09PSBiW2JMZW5ndGggLSByaWdodCAtIDFdKSB7XG4gICAgcmlnaHQrKztcbiAgfVxuXG4gIHJldHVybiBbbGVmdCwgYUxlbmd0aCAtIGxlZnQgLSByaWdodCwgYi5zbGljZShsZWZ0LCBiTGVuZ3RoIC0gcmlnaHQpXTtcbn1cblxuZnVuY3Rpb24gc2V0VGV4dENvbnRlbnQobmV4dFRleHQsIGRvbSwgbm9kZSkge1xuICBjb25zdCBmaXJzdENoaWxkID0gZG9tLmZpcnN0Q2hpbGQ7XG4gIGNvbnN0IGlzQ29tcG9zaW5nID0gbm9kZS5pc0NvbXBvc2luZygpOyAvLyBBbHdheXMgYWRkIGEgc3VmZml4IGlmIHdlJ3JlIGNvbXBvc2luZyBhIG5vZGVcblxuICBjb25zdCBzdWZmaXggPSBpc0NvbXBvc2luZyA/IENPTVBPU0lUSU9OX1NVRkZJWCA6ICcnO1xuICBjb25zdCB0ZXh0ID0gbmV4dFRleHQgKyBzdWZmaXg7XG5cbiAgaWYgKGZpcnN0Q2hpbGQgPT0gbnVsbCkge1xuICAgIGRvbS50ZXh0Q29udGVudCA9IHRleHQ7XG4gIH0gZWxzZSB7XG4gICAgY29uc3Qgbm9kZVZhbHVlID0gZmlyc3RDaGlsZC5ub2RlVmFsdWU7XG5cbiAgICBpZiAobm9kZVZhbHVlICE9PSB0ZXh0KSB7XG4gICAgICBpZiAoaXNDb21wb3NpbmcgfHwgSVNfRklSRUZPWCkge1xuICAgICAgICAvLyBXZSBhbHNvIHVzZSB0aGUgZGlmZiBjb21wb3NlZCB0ZXh0IGZvciBnZW5lcmFsIHRleHQgaW4gRkYgdG8gYXZvaWRcbiAgICAgICAgLy8gdGhlIHNwZWxsY2hlY2sgcmVkIGxpbmUgZnJvbSBmbGlja2VyaW5nLlxuICAgICAgICBjb25zdCBbaW5kZXgsIHJlbW92ZSwgaW5zZXJ0XSA9IGRpZmZDb21wb3NlZFRleHQobm9kZVZhbHVlLCB0ZXh0KTtcblxuICAgICAgICBpZiAocmVtb3ZlICE9PSAwKSB7XG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgIGZpcnN0Q2hpbGQuZGVsZXRlRGF0YShpbmRleCwgcmVtb3ZlKTtcbiAgICAgICAgfSAvLyBAdHMtZXhwZWN0LWVycm9yXG5cblxuICAgICAgICBmaXJzdENoaWxkLmluc2VydERhdGEoaW5kZXgsIGluc2VydCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaXJzdENoaWxkLm5vZGVWYWx1ZSA9IHRleHQ7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVRleHRJbm5lckRPTShpbm5lckRPTSwgbm9kZSwgaW5uZXJUYWcsIGZvcm1hdCwgdGV4dCwgY29uZmlnKSB7XG4gIHNldFRleHRDb250ZW50KHRleHQsIGlubmVyRE9NLCBub2RlKTtcbiAgY29uc3QgdGhlbWUgPSBjb25maWcudGhlbWU7IC8vIEFwcGx5IHRoZW1lIGNsYXNzIG5hbWVzXG5cbiAgY29uc3QgdGV4dENsYXNzTmFtZXMgPSB0aGVtZS50ZXh0O1xuXG4gIGlmICh0ZXh0Q2xhc3NOYW1lcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgc2V0VGV4dFRoZW1lQ2xhc3NOYW1lcyhpbm5lclRhZywgMCwgZm9ybWF0LCBpbm5lckRPTSwgdGV4dENsYXNzTmFtZXMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHdyYXBFbGVtZW50V2l0aChlbGVtZW50LCB0YWcpIHtcbiAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG4gIGVsLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICByZXR1cm4gZWw7XG59XG4vKiogQG5vSW5oZXJpdERvYyAqL1xuXG5cbmNsYXNzIFRleHROb2RlIGV4dGVuZHMgTGV4aWNhbE5vZGUge1xuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG4gIHN0YXRpYyBnZXRUeXBlKCkge1xuICAgIHJldHVybiAndGV4dCc7XG4gIH1cblxuICBzdGF0aWMgY2xvbmUobm9kZSkge1xuICAgIHJldHVybiBuZXcgVGV4dE5vZGUobm9kZS5fX3RleHQsIG5vZGUuX19rZXkpO1xuICB9XG5cbiAgY29uc3RydWN0b3IodGV4dCwga2V5KSB7XG4gICAgc3VwZXIoa2V5KTtcbiAgICB0aGlzLl9fdGV4dCA9IHRleHQ7XG4gICAgdGhpcy5fX2Zvcm1hdCA9IDA7XG4gICAgdGhpcy5fX3N0eWxlID0gJyc7XG4gICAgdGhpcy5fX21vZGUgPSAwO1xuICAgIHRoaXMuX19kZXRhaWwgPSAwO1xuICB9XG5cbiAgZ2V0Rm9ybWF0KCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzLmdldExhdGVzdCgpO1xuICAgIHJldHVybiBzZWxmLl9fZm9ybWF0O1xuICB9XG5cbiAgZ2V0RGV0YWlsKCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzLmdldExhdGVzdCgpO1xuICAgIHJldHVybiBzZWxmLl9fZGV0YWlsO1xuICB9XG5cbiAgZ2V0TW9kZSgpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcy5nZXRMYXRlc3QoKTtcbiAgICByZXR1cm4gVEVYVF9UWVBFX1RPX01PREVbc2VsZi5fX21vZGVdO1xuICB9XG5cbiAgZ2V0U3R5bGUoKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0TGF0ZXN0KCk7XG4gICAgcmV0dXJuIHNlbGYuX19zdHlsZTtcbiAgfVxuXG4gIGlzVG9rZW4oKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0TGF0ZXN0KCk7XG4gICAgcmV0dXJuIHNlbGYuX19tb2RlID09PSBJU19UT0tFTjtcbiAgfVxuXG4gIGlzQ29tcG9zaW5nKCkge1xuICAgIHJldHVybiB0aGlzLl9fa2V5ID09PSAkZ2V0Q29tcG9zaXRpb25LZXkoKTtcbiAgfVxuXG4gIGlzU2VnbWVudGVkKCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzLmdldExhdGVzdCgpO1xuICAgIHJldHVybiBzZWxmLl9fbW9kZSA9PT0gSVNfU0VHTUVOVEVEO1xuICB9XG5cbiAgaXNEaXJlY3Rpb25sZXNzKCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzLmdldExhdGVzdCgpO1xuICAgIHJldHVybiAoc2VsZi5fX2RldGFpbCAmIElTX0RJUkVDVElPTkxFU1MpICE9PSAwO1xuICB9XG5cbiAgaXNVbm1lcmdlYWJsZSgpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcy5nZXRMYXRlc3QoKTtcbiAgICByZXR1cm4gKHNlbGYuX19kZXRhaWwgJiBJU19VTk1FUkdFQUJMRSkgIT09IDA7XG4gIH1cblxuICBoYXNGb3JtYXQodHlwZSkge1xuICAgIGNvbnN0IGZvcm1hdEZsYWcgPSBURVhUX1RZUEVfVE9fRk9STUFUW3R5cGVdO1xuICAgIHJldHVybiAodGhpcy5nZXRGb3JtYXQoKSAmIGZvcm1hdEZsYWcpICE9PSAwO1xuICB9XG5cbiAgaXNTaW1wbGVUZXh0KCkge1xuICAgIHJldHVybiB0aGlzLl9fdHlwZSA9PT0gJ3RleHQnICYmIHRoaXMuX19tb2RlID09PSAwO1xuICB9XG5cbiAgZ2V0VGV4dENvbnRlbnQoKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0TGF0ZXN0KCk7XG4gICAgcmV0dXJuIHNlbGYuX190ZXh0O1xuICB9XG5cbiAgZ2V0Rm9ybWF0RmxhZ3ModHlwZSwgYWxpZ25XaXRoRm9ybWF0KSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0TGF0ZXN0KCk7XG4gICAgY29uc3QgZm9ybWF0ID0gc2VsZi5fX2Zvcm1hdDtcbiAgICByZXR1cm4gdG9nZ2xlVGV4dEZvcm1hdFR5cGUoZm9ybWF0LCB0eXBlLCBhbGlnbldpdGhGb3JtYXQpO1xuICB9IC8vIFZpZXdcblxuXG4gIGNyZWF0ZURPTShjb25maWcpIHtcbiAgICBjb25zdCBmb3JtYXQgPSB0aGlzLl9fZm9ybWF0O1xuICAgIGNvbnN0IG91dGVyVGFnID0gZ2V0RWxlbWVudE91dGVyVGFnKHRoaXMsIGZvcm1hdCk7XG4gICAgY29uc3QgaW5uZXJUYWcgPSBnZXRFbGVtZW50SW5uZXJUYWcodGhpcywgZm9ybWF0KTtcbiAgICBjb25zdCB0YWcgPSBvdXRlclRhZyA9PT0gbnVsbCA/IGlubmVyVGFnIDogb3V0ZXJUYWc7XG4gICAgY29uc3QgZG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuICAgIGxldCBpbm5lckRPTSA9IGRvbTtcblxuICAgIGlmIChvdXRlclRhZyAhPT0gbnVsbCkge1xuICAgICAgaW5uZXJET00gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGlubmVyVGFnKTtcbiAgICAgIGRvbS5hcHBlbmRDaGlsZChpbm5lckRPTSk7XG4gICAgfVxuXG4gICAgY29uc3QgdGV4dCA9IHRoaXMuX190ZXh0O1xuICAgIGNyZWF0ZVRleHRJbm5lckRPTShpbm5lckRPTSwgdGhpcywgaW5uZXJUYWcsIGZvcm1hdCwgdGV4dCwgY29uZmlnKTtcbiAgICBjb25zdCBzdHlsZSA9IHRoaXMuX19zdHlsZTtcblxuICAgIGlmIChzdHlsZSAhPT0gJycpIHtcbiAgICAgIGRvbS5zdHlsZS5jc3NUZXh0ID0gc3R5bGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRvbTtcbiAgfVxuXG4gIHVwZGF0ZURPTShwcmV2Tm9kZSwgZG9tLCBjb25maWcpIHtcbiAgICBjb25zdCBuZXh0VGV4dCA9IHRoaXMuX190ZXh0O1xuICAgIGNvbnN0IHByZXZGb3JtYXQgPSBwcmV2Tm9kZS5fX2Zvcm1hdDtcbiAgICBjb25zdCBuZXh0Rm9ybWF0ID0gdGhpcy5fX2Zvcm1hdDtcbiAgICBjb25zdCBwcmV2T3V0ZXJUYWcgPSBnZXRFbGVtZW50T3V0ZXJUYWcodGhpcywgcHJldkZvcm1hdCk7XG4gICAgY29uc3QgbmV4dE91dGVyVGFnID0gZ2V0RWxlbWVudE91dGVyVGFnKHRoaXMsIG5leHRGb3JtYXQpO1xuICAgIGNvbnN0IHByZXZJbm5lclRhZyA9IGdldEVsZW1lbnRJbm5lclRhZyh0aGlzLCBwcmV2Rm9ybWF0KTtcbiAgICBjb25zdCBuZXh0SW5uZXJUYWcgPSBnZXRFbGVtZW50SW5uZXJUYWcodGhpcywgbmV4dEZvcm1hdCk7XG4gICAgY29uc3QgcHJldlRhZyA9IHByZXZPdXRlclRhZyA9PT0gbnVsbCA/IHByZXZJbm5lclRhZyA6IHByZXZPdXRlclRhZztcbiAgICBjb25zdCBuZXh0VGFnID0gbmV4dE91dGVyVGFnID09PSBudWxsID8gbmV4dElubmVyVGFnIDogbmV4dE91dGVyVGFnO1xuXG4gICAgaWYgKHByZXZUYWcgIT09IG5leHRUYWcpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChwcmV2T3V0ZXJUYWcgPT09IG5leHRPdXRlclRhZyAmJiBwcmV2SW5uZXJUYWcgIT09IG5leHRJbm5lclRhZykge1xuICAgICAgLy8gc2hvdWxkIGFsd2F5cyBiZSBhbiBlbGVtZW50XG4gICAgICBjb25zdCBwcmV2SW5uZXJET00gPSBkb20uZmlyc3RDaGlsZDtcblxuICAgICAgaWYgKHByZXZJbm5lckRPTSA9PSBudWxsKSB7XG4gICAgICAgIHtcbiAgICAgICAgICB0aHJvdyBFcnJvcihgdXBkYXRlRE9NOiBwcmV2SW5uZXJET00gaXMgbnVsbCBvciB1bmRlZmluZWRgKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBuZXh0SW5uZXJET00gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5leHRJbm5lclRhZyk7XG4gICAgICBjcmVhdGVUZXh0SW5uZXJET00obmV4dElubmVyRE9NLCB0aGlzLCBuZXh0SW5uZXJUYWcsIG5leHRGb3JtYXQsIG5leHRUZXh0LCBjb25maWcpO1xuICAgICAgZG9tLnJlcGxhY2VDaGlsZChuZXh0SW5uZXJET00sIHByZXZJbm5lckRPTSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgbGV0IGlubmVyRE9NID0gZG9tO1xuXG4gICAgaWYgKG5leHRPdXRlclRhZyAhPT0gbnVsbCkge1xuICAgICAgaWYgKHByZXZPdXRlclRhZyAhPT0gbnVsbCkge1xuICAgICAgICBpbm5lckRPTSA9IGRvbS5maXJzdENoaWxkO1xuXG4gICAgICAgIGlmIChpbm5lckRPTSA9PSBudWxsKSB7XG4gICAgICAgICAge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYHVwZGF0ZURPTTogaW5uZXJET00gaXMgbnVsbCBvciB1bmRlZmluZWRgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRUZXh0Q29udGVudChuZXh0VGV4dCwgaW5uZXJET00sIHRoaXMpO1xuICAgIGNvbnN0IHRoZW1lID0gY29uZmlnLnRoZW1lOyAvLyBBcHBseSB0aGVtZSBjbGFzcyBuYW1lc1xuXG4gICAgY29uc3QgdGV4dENsYXNzTmFtZXMgPSB0aGVtZS50ZXh0O1xuXG4gICAgaWYgKHRleHRDbGFzc05hbWVzICE9PSB1bmRlZmluZWQgJiYgcHJldkZvcm1hdCAhPT0gbmV4dEZvcm1hdCkge1xuICAgICAgc2V0VGV4dFRoZW1lQ2xhc3NOYW1lcyhuZXh0SW5uZXJUYWcsIHByZXZGb3JtYXQsIG5leHRGb3JtYXQsIGlubmVyRE9NLCB0ZXh0Q2xhc3NOYW1lcyk7XG4gICAgfVxuXG4gICAgY29uc3QgcHJldlN0eWxlID0gcHJldk5vZGUuX19zdHlsZTtcbiAgICBjb25zdCBuZXh0U3R5bGUgPSB0aGlzLl9fc3R5bGU7XG5cbiAgICBpZiAocHJldlN0eWxlICE9PSBuZXh0U3R5bGUpIHtcbiAgICAgIGRvbS5zdHlsZS5jc3NUZXh0ID0gbmV4dFN0eWxlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0YXRpYyBpbXBvcnRET00oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICcjdGV4dCc6ICgpID0+ICh7XG4gICAgICAgIGNvbnZlcnNpb246IGNvbnZlcnRUZXh0RE9NTm9kZSxcbiAgICAgICAgcHJpb3JpdHk6IDBcbiAgICAgIH0pLFxuICAgICAgYjogKCkgPT4gKHtcbiAgICAgICAgY29udmVyc2lvbjogY29udmVydEJyaW5nQXR0ZW50aW9uVG9FbGVtZW50LFxuICAgICAgICBwcmlvcml0eTogMFxuICAgICAgfSksXG4gICAgICBicjogKCkgPT4gKHtcbiAgICAgICAgY29udmVyc2lvbjogY29udmVydExpbmVCcmVha1RvRWxlbWVudCxcbiAgICAgICAgcHJpb3JpdHk6IDBcbiAgICAgIH0pLFxuICAgICAgY29kZTogKCkgPT4gKHtcbiAgICAgICAgY29udmVyc2lvbjogY29udmVydFRleHRGb3JtYXRFbGVtZW50LFxuICAgICAgICBwcmlvcml0eTogMFxuICAgICAgfSksXG4gICAgICBlbTogKCkgPT4gKHtcbiAgICAgICAgY29udmVyc2lvbjogY29udmVydFRleHRGb3JtYXRFbGVtZW50LFxuICAgICAgICBwcmlvcml0eTogMFxuICAgICAgfSksXG4gICAgICBpOiAoKSA9PiAoe1xuICAgICAgICBjb252ZXJzaW9uOiBjb252ZXJ0VGV4dEZvcm1hdEVsZW1lbnQsXG4gICAgICAgIHByaW9yaXR5OiAwXG4gICAgICB9KSxcbiAgICAgIHM6ICgpID0+ICh7XG4gICAgICAgIGNvbnZlcnNpb246IGNvbnZlcnRUZXh0Rm9ybWF0RWxlbWVudCxcbiAgICAgICAgcHJpb3JpdHk6IDBcbiAgICAgIH0pLFxuICAgICAgc3BhbjogKCkgPT4gKHtcbiAgICAgICAgY29udmVyc2lvbjogY29udmVydFNwYW5FbGVtZW50LFxuICAgICAgICBwcmlvcml0eTogMFxuICAgICAgfSksXG4gICAgICBzdHJvbmc6ICgpID0+ICh7XG4gICAgICAgIGNvbnZlcnNpb246IGNvbnZlcnRUZXh0Rm9ybWF0RWxlbWVudCxcbiAgICAgICAgcHJpb3JpdHk6IDBcbiAgICAgIH0pLFxuICAgICAgc3ViOiAoKSA9PiAoe1xuICAgICAgICBjb252ZXJzaW9uOiBjb252ZXJ0VGV4dEZvcm1hdEVsZW1lbnQsXG4gICAgICAgIHByaW9yaXR5OiAwXG4gICAgICB9KSxcbiAgICAgIHN1cDogKCkgPT4gKHtcbiAgICAgICAgY29udmVyc2lvbjogY29udmVydFRleHRGb3JtYXRFbGVtZW50LFxuICAgICAgICBwcmlvcml0eTogMFxuICAgICAgfSksXG4gICAgICB1OiAoKSA9PiAoe1xuICAgICAgICBjb252ZXJzaW9uOiBjb252ZXJ0VGV4dEZvcm1hdEVsZW1lbnQsXG4gICAgICAgIHByaW9yaXR5OiAwXG4gICAgICB9KVxuICAgIH07XG4gIH1cblxuICBzdGF0aWMgaW1wb3J0SlNPTihzZXJpYWxpemVkTm9kZSkge1xuICAgIGNvbnN0IG5vZGUgPSAkY3JlYXRlVGV4dE5vZGUoc2VyaWFsaXplZE5vZGUudGV4dCk7XG4gICAgbm9kZS5zZXRGb3JtYXQoc2VyaWFsaXplZE5vZGUuZm9ybWF0KTtcbiAgICBub2RlLnNldERldGFpbChzZXJpYWxpemVkTm9kZS5kZXRhaWwpO1xuICAgIG5vZGUuc2V0TW9kZShzZXJpYWxpemVkTm9kZS5tb2RlKTtcbiAgICBub2RlLnNldFN0eWxlKHNlcmlhbGl6ZWROb2RlLnN0eWxlKTtcbiAgICByZXR1cm4gbm9kZTtcbiAgfSAvLyBUaGlzIGltcHJvdmVzIExleGljYWwncyBiYXNpYyB0ZXh0IG91dHB1dCBpbiBjb3B5K3Bhc3RlIHBsdXNcbiAgLy8gZm9yIGhlYWRsZXNzIG1vZGUgd2hlcmUgcGVvcGxlIG1pZ2h0IHVzZSBMZXhpY2FsIHRvIGdlbmVyYXRlXG4gIC8vIEhUTUwgY29udGVudCBhbmQgbm90IGhhdmUgdGhlIGFiaWxpdHkgdG8gdXNlIENTUyBjbGFzc2VzLlxuXG5cbiAgZXhwb3J0RE9NKGVkaXRvcikge1xuICAgIGxldCB7XG4gICAgICBlbGVtZW50XG4gICAgfSA9IHN1cGVyLmV4cG9ydERPTShlZGl0b3IpOyAvLyBUaGlzIGlzIHRoZSBvbmx5IHdheSB0byBwcm9wZXJseSBhZGQgc3VwcG9ydCBmb3IgbW9zdCBjbGllbnRzLFxuICAgIC8vIGV2ZW4gaWYgaXQncyBzZW1hbnRpY2FsbHkgaW5jb3JyZWN0IHRvIGhhdmUgdG8gcmVzb3J0IHRvIHVzaW5nXG4gICAgLy8gPGI+LCA8dT4sIDxzPiwgPGk+IGVsZW1lbnRzLlxuXG4gICAgaWYgKGVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgIGlmICh0aGlzLmhhc0Zvcm1hdCgnYm9sZCcpKSB7XG4gICAgICAgIGVsZW1lbnQgPSB3cmFwRWxlbWVudFdpdGgoZWxlbWVudCwgJ2InKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuaGFzRm9ybWF0KCdpdGFsaWMnKSkge1xuICAgICAgICBlbGVtZW50ID0gd3JhcEVsZW1lbnRXaXRoKGVsZW1lbnQsICdpJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmhhc0Zvcm1hdCgnc3RyaWtldGhyb3VnaCcpKSB7XG4gICAgICAgIGVsZW1lbnQgPSB3cmFwRWxlbWVudFdpdGgoZWxlbWVudCwgJ3MnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuaGFzRm9ybWF0KCd1bmRlcmxpbmUnKSkge1xuICAgICAgICBlbGVtZW50ID0gd3JhcEVsZW1lbnRXaXRoKGVsZW1lbnQsICd1Jyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGVsZW1lbnRcbiAgICB9O1xuICB9XG5cbiAgZXhwb3J0SlNPTigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGV0YWlsOiB0aGlzLmdldERldGFpbCgpLFxuICAgICAgZm9ybWF0OiB0aGlzLmdldEZvcm1hdCgpLFxuICAgICAgbW9kZTogdGhpcy5nZXRNb2RlKCksXG4gICAgICBzdHlsZTogdGhpcy5nZXRTdHlsZSgpLFxuICAgICAgdGV4dDogdGhpcy5nZXRUZXh0Q29udGVudCgpLFxuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgdmVyc2lvbjogMVxuICAgIH07XG4gIH0gLy8gTXV0YXRvcnNcblxuXG4gIHNlbGVjdGlvblRyYW5zZm9ybShwcmV2U2VsZWN0aW9uLCBuZXh0U2VsZWN0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9IC8vIFRPRE8gMC41IFRoaXMgc2hvdWxkIGp1c3QgYmUgYSBgc3RyaW5nYC5cblxuXG4gIHNldEZvcm1hdChmb3JtYXQpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcy5nZXRXcml0YWJsZSgpO1xuICAgIHNlbGYuX19mb3JtYXQgPSB0eXBlb2YgZm9ybWF0ID09PSAnc3RyaW5nJyA/IFRFWFRfVFlQRV9UT19GT1JNQVRbZm9ybWF0XSA6IGZvcm1hdDtcbiAgICByZXR1cm4gc2VsZjtcbiAgfSAvLyBUT0RPIDAuNSBUaGlzIHNob3VsZCBqdXN0IGJlIGEgYHN0cmluZ2AuXG5cblxuICBzZXREZXRhaWwoZGV0YWlsKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0V3JpdGFibGUoKTtcbiAgICBzZWxmLl9fZGV0YWlsID0gdHlwZW9mIGRldGFpbCA9PT0gJ3N0cmluZycgPyBERVRBSUxfVFlQRV9UT19ERVRBSUxbZGV0YWlsXSA6IGRldGFpbDtcbiAgICByZXR1cm4gc2VsZjtcbiAgfVxuXG4gIHNldFN0eWxlKHN0eWxlKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0V3JpdGFibGUoKTtcbiAgICBzZWxmLl9fc3R5bGUgPSBzdHlsZTtcbiAgICByZXR1cm4gc2VsZjtcbiAgfVxuXG4gIHRvZ2dsZUZvcm1hdCh0eXBlKSB7XG4gICAgY29uc3QgZm9ybWF0RmxhZyA9IFRFWFRfVFlQRV9UT19GT1JNQVRbdHlwZV07XG4gICAgcmV0dXJuIHRoaXMuc2V0Rm9ybWF0KHRoaXMuZ2V0Rm9ybWF0KCkgXiBmb3JtYXRGbGFnKTtcbiAgfVxuXG4gIHRvZ2dsZURpcmVjdGlvbmxlc3MoKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0V3JpdGFibGUoKTtcbiAgICBzZWxmLl9fZGV0YWlsIF49IElTX0RJUkVDVElPTkxFU1M7XG4gICAgcmV0dXJuIHNlbGY7XG4gIH1cblxuICB0b2dnbGVVbm1lcmdlYWJsZSgpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcy5nZXRXcml0YWJsZSgpO1xuICAgIHNlbGYuX19kZXRhaWwgXj0gSVNfVU5NRVJHRUFCTEU7XG4gICAgcmV0dXJuIHNlbGY7XG4gIH1cblxuICBzZXRNb2RlKHR5cGUpIHtcbiAgICBjb25zdCBtb2RlID0gVEVYVF9NT0RFX1RPX1RZUEVbdHlwZV07XG5cbiAgICBpZiAodGhpcy5fX21vZGUgPT09IG1vZGUpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGNvbnN0IHNlbGYgPSB0aGlzLmdldFdyaXRhYmxlKCk7XG4gICAgc2VsZi5fX21vZGUgPSBtb2RlO1xuICAgIHJldHVybiBzZWxmO1xuICB9XG5cbiAgc2V0VGV4dENvbnRlbnQodGV4dCkge1xuICAgIGlmICh0aGlzLl9fdGV4dCA9PT0gdGV4dCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0V3JpdGFibGUoKTtcbiAgICBzZWxmLl9fdGV4dCA9IHRleHQ7XG4gICAgcmV0dXJuIHNlbGY7XG4gIH1cblxuICBzZWxlY3QoX2FuY2hvck9mZnNldCwgX2ZvY3VzT2Zmc2V0KSB7XG4gICAgZXJyb3JPblJlYWRPbmx5KCk7XG4gICAgbGV0IGFuY2hvck9mZnNldCA9IF9hbmNob3JPZmZzZXQ7XG4gICAgbGV0IGZvY3VzT2Zmc2V0ID0gX2ZvY3VzT2Zmc2V0O1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9ICRnZXRTZWxlY3Rpb24oKTtcbiAgICBjb25zdCB0ZXh0ID0gdGhpcy5nZXRUZXh0Q29udGVudCgpO1xuICAgIGNvbnN0IGtleSA9IHRoaXMuX19rZXk7XG5cbiAgICBpZiAodHlwZW9mIHRleHQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBjb25zdCBsYXN0T2Zmc2V0ID0gdGV4dC5sZW5ndGg7XG5cbiAgICAgIGlmIChhbmNob3JPZmZzZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBhbmNob3JPZmZzZXQgPSBsYXN0T2Zmc2V0O1xuICAgICAgfVxuXG4gICAgICBpZiAoZm9jdXNPZmZzZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBmb2N1c09mZnNldCA9IGxhc3RPZmZzZXQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGFuY2hvck9mZnNldCA9IDA7XG4gICAgICBmb2N1c09mZnNldCA9IDA7XG4gICAgfVxuXG4gICAgaWYgKCEkaXNSYW5nZVNlbGVjdGlvbihzZWxlY3Rpb24pKSB7XG4gICAgICByZXR1cm4gaW50ZXJuYWxNYWtlUmFuZ2VTZWxlY3Rpb24oa2V5LCBhbmNob3JPZmZzZXQsIGtleSwgZm9jdXNPZmZzZXQsICd0ZXh0JywgJ3RleHQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgY29tcG9zaXRpb25LZXkgPSAkZ2V0Q29tcG9zaXRpb25LZXkoKTtcblxuICAgICAgaWYgKGNvbXBvc2l0aW9uS2V5ID09PSBzZWxlY3Rpb24uYW5jaG9yLmtleSB8fCBjb21wb3NpdGlvbktleSA9PT0gc2VsZWN0aW9uLmZvY3VzLmtleSkge1xuICAgICAgICAkc2V0Q29tcG9zaXRpb25LZXkoa2V5KTtcbiAgICAgIH1cblxuICAgICAgc2VsZWN0aW9uLnNldFRleHROb2RlUmFuZ2UodGhpcywgYW5jaG9yT2Zmc2V0LCB0aGlzLCBmb2N1c09mZnNldCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGVjdGlvbjtcbiAgfVxuXG4gIHNwbGljZVRleHQob2Zmc2V0LCBkZWxDb3VudCwgbmV3VGV4dCwgbW92ZVNlbGVjdGlvbikge1xuICAgIGNvbnN0IHdyaXRhYmxlU2VsZiA9IHRoaXMuZ2V0V3JpdGFibGUoKTtcbiAgICBjb25zdCB0ZXh0ID0gd3JpdGFibGVTZWxmLl9fdGV4dDtcbiAgICBjb25zdCBoYW5kbGVkVGV4dExlbmd0aCA9IG5ld1RleHQubGVuZ3RoO1xuICAgIGxldCBpbmRleCA9IG9mZnNldDtcblxuICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgIGluZGV4ID0gaGFuZGxlZFRleHRMZW5ndGggKyBpbmRleDtcblxuICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICBpbmRleCA9IDA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc2VsZWN0aW9uID0gJGdldFNlbGVjdGlvbigpO1xuXG4gICAgaWYgKG1vdmVTZWxlY3Rpb24gJiYgJGlzUmFuZ2VTZWxlY3Rpb24oc2VsZWN0aW9uKSkge1xuICAgICAgY29uc3QgbmV3T2Zmc2V0ID0gb2Zmc2V0ICsgaGFuZGxlZFRleHRMZW5ndGg7XG4gICAgICBzZWxlY3Rpb24uc2V0VGV4dE5vZGVSYW5nZSh3cml0YWJsZVNlbGYsIG5ld09mZnNldCwgd3JpdGFibGVTZWxmLCBuZXdPZmZzZXQpO1xuICAgIH1cblxuICAgIGNvbnN0IHVwZGF0ZWRUZXh0ID0gdGV4dC5zbGljZSgwLCBpbmRleCkgKyBuZXdUZXh0ICsgdGV4dC5zbGljZShpbmRleCArIGRlbENvdW50KTtcbiAgICB3cml0YWJsZVNlbGYuX190ZXh0ID0gdXBkYXRlZFRleHQ7XG4gICAgcmV0dXJuIHdyaXRhYmxlU2VsZjtcbiAgfVxuXG4gIGNhbkluc2VydFRleHRCZWZvcmUoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBjYW5JbnNlcnRUZXh0QWZ0ZXIoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBjYW5Db250YWluVGFicygpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzcGxpdFRleHQoLi4uc3BsaXRPZmZzZXRzKSB7XG4gICAgZXJyb3JPblJlYWRPbmx5KCk7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuZ2V0TGF0ZXN0KCk7XG4gICAgY29uc3QgdGV4dENvbnRlbnQgPSBzZWxmLmdldFRleHRDb250ZW50KCk7XG4gICAgY29uc3Qga2V5ID0gc2VsZi5fX2tleTtcbiAgICBjb25zdCBjb21wb3NpdGlvbktleSA9ICRnZXRDb21wb3NpdGlvbktleSgpO1xuICAgIGNvbnN0IG9mZnNldHNTZXQgPSBuZXcgU2V0KHNwbGl0T2Zmc2V0cyk7XG4gICAgY29uc3QgcGFydHMgPSBbXTtcbiAgICBjb25zdCB0ZXh0TGVuZ3RoID0gdGV4dENvbnRlbnQubGVuZ3RoO1xuICAgIGxldCBzdHJpbmcgPSAnJztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGV4dExlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoc3RyaW5nICE9PSAnJyAmJiBvZmZzZXRzU2V0LmhhcyhpKSkge1xuICAgICAgICBwYXJ0cy5wdXNoKHN0cmluZyk7XG4gICAgICAgIHN0cmluZyA9ICcnO1xuICAgICAgfVxuXG4gICAgICBzdHJpbmcgKz0gdGV4dENvbnRlbnRbaV07XG4gICAgfVxuXG4gICAgaWYgKHN0cmluZyAhPT0gJycpIHtcbiAgICAgIHBhcnRzLnB1c2goc3RyaW5nKTtcbiAgICB9XG5cbiAgICBjb25zdCBwYXJ0c0xlbmd0aCA9IHBhcnRzLmxlbmd0aDtcblxuICAgIGlmIChwYXJ0c0xlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH0gZWxzZSBpZiAocGFydHNbMF0gPT09IHRleHRDb250ZW50KSB7XG4gICAgICByZXR1cm4gW3NlbGZdO1xuICAgIH1cblxuICAgIGNvbnN0IGZpcnN0UGFydCA9IHBhcnRzWzBdO1xuICAgIGNvbnN0IHBhcmVudCA9IHNlbGYuZ2V0UGFyZW50T3JUaHJvdygpO1xuICAgIGxldCB3cml0YWJsZU5vZGU7XG4gICAgY29uc3QgZm9ybWF0ID0gc2VsZi5nZXRGb3JtYXQoKTtcbiAgICBjb25zdCBzdHlsZSA9IHNlbGYuZ2V0U3R5bGUoKTtcbiAgICBjb25zdCBkZXRhaWwgPSBzZWxmLl9fZGV0YWlsO1xuICAgIGxldCBoYXNSZXBsYWNlZFNlbGYgPSBmYWxzZTtcblxuICAgIGlmIChzZWxmLmlzU2VnbWVudGVkKCkpIHtcbiAgICAgIC8vIENyZWF0ZSBhIG5ldyBUZXh0Tm9kZVxuICAgICAgd3JpdGFibGVOb2RlID0gJGNyZWF0ZVRleHROb2RlKGZpcnN0UGFydCk7XG4gICAgICB3cml0YWJsZU5vZGUuX19mb3JtYXQgPSBmb3JtYXQ7XG4gICAgICB3cml0YWJsZU5vZGUuX19zdHlsZSA9IHN0eWxlO1xuICAgICAgd3JpdGFibGVOb2RlLl9fZGV0YWlsID0gZGV0YWlsO1xuICAgICAgaGFzUmVwbGFjZWRTZWxmID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRm9yIHRoZSBmaXJzdCBwYXJ0LCB1cGRhdGUgdGhlIGV4aXN0aW5nIG5vZGVcbiAgICAgIHdyaXRhYmxlTm9kZSA9IHNlbGYuZ2V0V3JpdGFibGUoKTtcbiAgICAgIHdyaXRhYmxlTm9kZS5fX3RleHQgPSBmaXJzdFBhcnQ7XG4gICAgfSAvLyBIYW5kbGUgc2VsZWN0aW9uXG5cblxuICAgIGNvbnN0IHNlbGVjdGlvbiA9ICRnZXRTZWxlY3Rpb24oKTsgLy8gVGhlbiBoYW5kbGUgYWxsIG90aGVyIHBhcnRzXG5cbiAgICBjb25zdCBzcGxpdE5vZGVzID0gW3dyaXRhYmxlTm9kZV07XG4gICAgbGV0IHRleHRTaXplID0gZmlyc3RQYXJ0Lmxlbmd0aDtcblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcGFydHNMZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcGFydCA9IHBhcnRzW2ldO1xuICAgICAgY29uc3QgcGFydFNpemUgPSBwYXJ0Lmxlbmd0aDtcbiAgICAgIGNvbnN0IHNpYmxpbmcgPSAkY3JlYXRlVGV4dE5vZGUocGFydCkuZ2V0V3JpdGFibGUoKTtcbiAgICAgIHNpYmxpbmcuX19mb3JtYXQgPSBmb3JtYXQ7XG4gICAgICBzaWJsaW5nLl9fc3R5bGUgPSBzdHlsZTtcbiAgICAgIHNpYmxpbmcuX19kZXRhaWwgPSBkZXRhaWw7XG4gICAgICBjb25zdCBzaWJsaW5nS2V5ID0gc2libGluZy5fX2tleTtcbiAgICAgIGNvbnN0IG5leHRUZXh0U2l6ZSA9IHRleHRTaXplICsgcGFydFNpemU7XG5cbiAgICAgIGlmICgkaXNSYW5nZVNlbGVjdGlvbihzZWxlY3Rpb24pKSB7XG4gICAgICAgIGNvbnN0IGFuY2hvciA9IHNlbGVjdGlvbi5hbmNob3I7XG4gICAgICAgIGNvbnN0IGZvY3VzID0gc2VsZWN0aW9uLmZvY3VzO1xuXG4gICAgICAgIGlmIChhbmNob3Iua2V5ID09PSBrZXkgJiYgYW5jaG9yLnR5cGUgPT09ICd0ZXh0JyAmJiBhbmNob3Iub2Zmc2V0ID4gdGV4dFNpemUgJiYgYW5jaG9yLm9mZnNldCA8PSBuZXh0VGV4dFNpemUpIHtcbiAgICAgICAgICBhbmNob3Iua2V5ID0gc2libGluZ0tleTtcbiAgICAgICAgICBhbmNob3Iub2Zmc2V0IC09IHRleHRTaXplO1xuICAgICAgICAgIHNlbGVjdGlvbi5kaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZm9jdXMua2V5ID09PSBrZXkgJiYgZm9jdXMudHlwZSA9PT0gJ3RleHQnICYmIGZvY3VzLm9mZnNldCA+IHRleHRTaXplICYmIGZvY3VzLm9mZnNldCA8PSBuZXh0VGV4dFNpemUpIHtcbiAgICAgICAgICBmb2N1cy5rZXkgPSBzaWJsaW5nS2V5O1xuICAgICAgICAgIGZvY3VzLm9mZnNldCAtPSB0ZXh0U2l6ZTtcbiAgICAgICAgICBzZWxlY3Rpb24uZGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjb21wb3NpdGlvbktleSA9PT0ga2V5KSB7XG4gICAgICAgICRzZXRDb21wb3NpdGlvbktleShzaWJsaW5nS2V5KTtcbiAgICAgIH1cblxuICAgICAgdGV4dFNpemUgPSBuZXh0VGV4dFNpemU7XG4gICAgICBzcGxpdE5vZGVzLnB1c2goc2libGluZyk7XG4gICAgfSAvLyBJbnNlcnQgdGhlIG5vZGVzIGludG8gdGhlIHBhcmVudCdzIGNoaWxkcmVuXG5cblxuICAgIGludGVybmFsTWFya1NpYmxpbmdzQXNEaXJ0eSh0aGlzKTtcbiAgICBjb25zdCB3cml0YWJsZVBhcmVudCA9IHBhcmVudC5nZXRXcml0YWJsZSgpO1xuICAgIGNvbnN0IGluc2VydGlvbkluZGV4ID0gdGhpcy5nZXRJbmRleFdpdGhpblBhcmVudCgpO1xuXG4gICAgaWYgKGhhc1JlcGxhY2VkU2VsZikge1xuICAgICAgd3JpdGFibGVQYXJlbnQuc3BsaWNlKGluc2VydGlvbkluZGV4LCAwLCBzcGxpdE5vZGVzKTtcbiAgICAgIHRoaXMucmVtb3ZlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdyaXRhYmxlUGFyZW50LnNwbGljZShpbnNlcnRpb25JbmRleCwgMSwgc3BsaXROb2Rlcyk7XG4gICAgfVxuXG4gICAgaWYgKCRpc1JhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikpIHtcbiAgICAgICR1cGRhdGVFbGVtZW50U2VsZWN0aW9uT25DcmVhdGVEZWxldGVOb2RlKHNlbGVjdGlvbiwgcGFyZW50LCBpbnNlcnRpb25JbmRleCwgcGFydHNMZW5ndGggLSAxKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3BsaXROb2RlcztcbiAgfVxuXG4gIG1lcmdlV2l0aFNpYmxpbmcodGFyZ2V0KSB7XG4gICAgY29uc3QgaXNCZWZvcmUgPSB0YXJnZXQgPT09IHRoaXMuZ2V0UHJldmlvdXNTaWJsaW5nKCk7XG5cbiAgICBpZiAoIWlzQmVmb3JlICYmIHRhcmdldCAhPT0gdGhpcy5nZXROZXh0U2libGluZygpKSB7XG4gICAgICB7XG4gICAgICAgIHRocm93IEVycm9yKGBtZXJnZVdpdGhTaWJsaW5nOiBzaWJsaW5nIG11c3QgYmUgYSBwcmV2aW91cyBvciBuZXh0IHNpYmxpbmdgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBrZXkgPSB0aGlzLl9fa2V5O1xuICAgIGNvbnN0IHRhcmdldEtleSA9IHRhcmdldC5fX2tleTtcbiAgICBjb25zdCB0ZXh0ID0gdGhpcy5fX3RleHQ7XG4gICAgY29uc3QgdGV4dExlbmd0aCA9IHRleHQubGVuZ3RoO1xuICAgIGNvbnN0IGNvbXBvc2l0aW9uS2V5ID0gJGdldENvbXBvc2l0aW9uS2V5KCk7XG5cbiAgICBpZiAoY29tcG9zaXRpb25LZXkgPT09IHRhcmdldEtleSkge1xuICAgICAgJHNldENvbXBvc2l0aW9uS2V5KGtleSk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2VsZWN0aW9uID0gJGdldFNlbGVjdGlvbigpO1xuXG4gICAgaWYgKCRpc1JhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikpIHtcbiAgICAgIGNvbnN0IGFuY2hvciA9IHNlbGVjdGlvbi5hbmNob3I7XG4gICAgICBjb25zdCBmb2N1cyA9IHNlbGVjdGlvbi5mb2N1cztcblxuICAgICAgaWYgKGFuY2hvciAhPT0gbnVsbCAmJiBhbmNob3Iua2V5ID09PSB0YXJnZXRLZXkpIHtcbiAgICAgICAgYWRqdXN0UG9pbnRPZmZzZXRGb3JNZXJnZWRTaWJsaW5nKGFuY2hvciwgaXNCZWZvcmUsIGtleSwgdGFyZ2V0LCB0ZXh0TGVuZ3RoKTtcbiAgICAgICAgc2VsZWN0aW9uLmRpcnR5ID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZvY3VzICE9PSBudWxsICYmIGZvY3VzLmtleSA9PT0gdGFyZ2V0S2V5KSB7XG4gICAgICAgIGFkanVzdFBvaW50T2Zmc2V0Rm9yTWVyZ2VkU2libGluZyhmb2N1cywgaXNCZWZvcmUsIGtleSwgdGFyZ2V0LCB0ZXh0TGVuZ3RoKTtcbiAgICAgICAgc2VsZWN0aW9uLmRpcnR5ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB0YXJnZXRUZXh0ID0gdGFyZ2V0Ll9fdGV4dDtcbiAgICBjb25zdCBuZXdUZXh0ID0gaXNCZWZvcmUgPyB0YXJnZXRUZXh0ICsgdGV4dCA6IHRleHQgKyB0YXJnZXRUZXh0O1xuICAgIHRoaXMuc2V0VGV4dENvbnRlbnQobmV3VGV4dCk7XG4gICAgY29uc3Qgd3JpdGFibGVTZWxmID0gdGhpcy5nZXRXcml0YWJsZSgpO1xuICAgIHRhcmdldC5yZW1vdmUoKTtcbiAgICByZXR1cm4gd3JpdGFibGVTZWxmO1xuICB9XG5cbiAgaXNUZXh0RW50aXR5KCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRTcGFuRWxlbWVudChkb21Ob2RlKSB7XG4gIC8vIGRvbU5vZGUgaXMgYSA8c3Bhbj4gc2luY2Ugd2UgbWF0Y2hlZCBpdCBieSBub2RlTmFtZVxuICBjb25zdCBzcGFuID0gZG9tTm9kZTsgLy8gR29vZ2xlIERvY3MgdXNlcyBzcGFuIHRhZ3MgKyBmb250LXdlaWdodCBmb3IgYm9sZCB0ZXh0XG5cbiAgY29uc3QgaGFzQm9sZEZvbnRXZWlnaHQgPSBzcGFuLnN0eWxlLmZvbnRXZWlnaHQgPT09ICc3MDAnOyAvLyBHb29nbGUgRG9jcyB1c2VzIHNwYW4gdGFncyArIHRleHQtZGVjb3JhdGlvbjogbGluZS10aHJvdWdoIGZvciBzdHJpa2V0aHJvdWdoIHRleHRcblxuICBjb25zdCBoYXNMaW5ldGhyb3VnaFRleHREZWNvcmF0aW9uID0gc3Bhbi5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9PT0gJ2xpbmUtdGhyb3VnaCc7IC8vIEdvb2dsZSBEb2NzIHVzZXMgc3BhbiB0YWdzICsgZm9udC1zdHlsZSBmb3IgaXRhbGljIHRleHRcblxuICBjb25zdCBoYXNJdGFsaWNGb250U3R5bGUgPSBzcGFuLnN0eWxlLmZvbnRTdHlsZSA9PT0gJ2l0YWxpYyc7IC8vIEdvb2dsZSBEb2NzIHVzZXMgc3BhbiB0YWdzICsgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmUgZm9yIHVuZGVybGluZSB0ZXh0XG5cbiAgY29uc3QgaGFzVW5kZXJsaW5lVGV4dERlY29yYXRpb24gPSBzcGFuLnN0eWxlLnRleHREZWNvcmF0aW9uID09PSAndW5kZXJsaW5lJzsgLy8gR29vZ2xlIERvY3MgdXNlcyBzcGFuIHRhZ3MgKyB2ZXJ0aWNhbC1hbGlnbiB0byBzcGVjaWZ5IHN1YnNjcmlwdCBhbmQgc3VwZXJzY3JpcHRcblxuICBjb25zdCB2ZXJ0aWNhbEFsaWduID0gc3Bhbi5zdHlsZS52ZXJ0aWNhbEFsaWduO1xuICByZXR1cm4ge1xuICAgIGZvckNoaWxkOiBsZXhpY2FsTm9kZSA9PiB7XG4gICAgICBpZiAoISRpc1RleHROb2RlKGxleGljYWxOb2RlKSkge1xuICAgICAgICByZXR1cm4gbGV4aWNhbE5vZGU7XG4gICAgICB9XG5cbiAgICAgIGlmIChoYXNCb2xkRm9udFdlaWdodCkge1xuICAgICAgICBsZXhpY2FsTm9kZS50b2dnbGVGb3JtYXQoJ2JvbGQnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGhhc0xpbmV0aHJvdWdoVGV4dERlY29yYXRpb24pIHtcbiAgICAgICAgbGV4aWNhbE5vZGUudG9nZ2xlRm9ybWF0KCdzdHJpa2V0aHJvdWdoJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChoYXNJdGFsaWNGb250U3R5bGUpIHtcbiAgICAgICAgbGV4aWNhbE5vZGUudG9nZ2xlRm9ybWF0KCdpdGFsaWMnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGhhc1VuZGVybGluZVRleHREZWNvcmF0aW9uKSB7XG4gICAgICAgIGxleGljYWxOb2RlLnRvZ2dsZUZvcm1hdCgndW5kZXJsaW5lJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh2ZXJ0aWNhbEFsaWduID09PSAnc3ViJykge1xuICAgICAgICBsZXhpY2FsTm9kZS50b2dnbGVGb3JtYXQoJ3N1YnNjcmlwdCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAodmVydGljYWxBbGlnbiA9PT0gJ3N1cGVyJykge1xuICAgICAgICBsZXhpY2FsTm9kZS50b2dnbGVGb3JtYXQoJ3N1cGVyc2NyaXB0Jyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBsZXhpY2FsTm9kZTtcbiAgICB9LFxuICAgIG5vZGU6IG51bGxcbiAgfTtcbn1cblxuZnVuY3Rpb24gY29udmVydExpbmVCcmVha1RvRWxlbWVudCgpIHtcbiAgcmV0dXJuIHtcbiAgICBub2RlOiAkY3JlYXRlTGluZUJyZWFrTm9kZSgpXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRCcmluZ0F0dGVudGlvblRvRWxlbWVudChkb21Ob2RlKSB7XG4gIC8vIGRvbU5vZGUgaXMgYSA8Yj4gc2luY2Ugd2UgbWF0Y2hlZCBpdCBieSBub2RlTmFtZVxuICBjb25zdCBiID0gZG9tTm9kZTsgLy8gR29vZ2xlIERvY3Mgd3JhcHMgYWxsIGNvcGllZCBIVE1MIGluIGEgPGI+IHdpdGggZm9udC13ZWlnaHQgbm9ybWFsXG5cbiAgY29uc3QgaGFzTm9ybWFsRm9udFdlaWdodCA9IGIuc3R5bGUuZm9udFdlaWdodCA9PT0gJ25vcm1hbCc7XG4gIHJldHVybiB7XG4gICAgZm9yQ2hpbGQ6IGxleGljYWxOb2RlID0+IHtcbiAgICAgIGlmICgkaXNUZXh0Tm9kZShsZXhpY2FsTm9kZSkgJiYgIWhhc05vcm1hbEZvbnRXZWlnaHQpIHtcbiAgICAgICAgbGV4aWNhbE5vZGUudG9nZ2xlRm9ybWF0KCdib2xkJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBsZXhpY2FsTm9kZTtcbiAgICB9LFxuICAgIG5vZGU6IG51bGxcbiAgfTtcbn1cblxuZnVuY3Rpb24gY29udmVydFRleHRET01Ob2RlKGRvbU5vZGUsIF9wYXJlbnQsIHByZWZvcm1hdHRlZCkge1xuICBsZXQgdGV4dENvbnRlbnQgPSBkb21Ob2RlLnRleHRDb250ZW50IHx8ICcnO1xuXG4gIGlmICghcHJlZm9ybWF0dGVkICYmIC9cXG4vLnRlc3QodGV4dENvbnRlbnQpKSB7XG4gICAgdGV4dENvbnRlbnQgPSB0ZXh0Q29udGVudC5yZXBsYWNlKC9cXHI/XFxuL2dtLCAnICcpO1xuXG4gICAgaWYgKHRleHRDb250ZW50LnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5vZGU6IG51bGxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBub2RlOiAkY3JlYXRlVGV4dE5vZGUodGV4dENvbnRlbnQpXG4gIH07XG59XG5cbmNvbnN0IG5vZGVOYW1lVG9UZXh0Rm9ybWF0ID0ge1xuICBjb2RlOiAnY29kZScsXG4gIGVtOiAnaXRhbGljJyxcbiAgaTogJ2l0YWxpYycsXG4gIHM6ICdzdHJpa2V0aHJvdWdoJyxcbiAgc3Ryb25nOiAnYm9sZCcsXG4gIHN1YjogJ3N1YnNjcmlwdCcsXG4gIHN1cDogJ3N1cGVyc2NyaXB0JyxcbiAgdTogJ3VuZGVybGluZSdcbn07XG5cbmZ1bmN0aW9uIGNvbnZlcnRUZXh0Rm9ybWF0RWxlbWVudChkb21Ob2RlKSB7XG4gIGNvbnN0IGZvcm1hdCA9IG5vZGVOYW1lVG9UZXh0Rm9ybWF0W2RvbU5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKV07XG5cbiAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5vZGU6IG51bGxcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBmb3JDaGlsZDogbGV4aWNhbE5vZGUgPT4ge1xuICAgICAgaWYgKCRpc1RleHROb2RlKGxleGljYWxOb2RlKSAmJiAhbGV4aWNhbE5vZGUuaGFzRm9ybWF0KGZvcm1hdCkpIHtcbiAgICAgICAgbGV4aWNhbE5vZGUudG9nZ2xlRm9ybWF0KGZvcm1hdCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBsZXhpY2FsTm9kZTtcbiAgICB9LFxuICAgIG5vZGU6IG51bGxcbiAgfTtcbn1cblxuZnVuY3Rpb24gJGNyZWF0ZVRleHROb2RlKHRleHQgPSAnJykge1xuICByZXR1cm4gJGFwcGx5Tm9kZVJlcGxhY2VtZW50KG5ldyBUZXh0Tm9kZSh0ZXh0KSk7XG59XG5mdW5jdGlvbiAkaXNUZXh0Tm9kZShub2RlKSB7XG4gIHJldHVybiBub2RlIGluc3RhbmNlb2YgVGV4dE5vZGU7XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cblxuLyoqIEBub0luaGVyaXREb2MgKi9cbmNsYXNzIFBhcmFncmFwaE5vZGUgZXh0ZW5kcyBFbGVtZW50Tm9kZSB7XG4gIHN0YXRpYyBnZXRUeXBlKCkge1xuICAgIHJldHVybiAncGFyYWdyYXBoJztcbiAgfVxuXG4gIHN0YXRpYyBjbG9uZShub2RlKSB7XG4gICAgcmV0dXJuIG5ldyBQYXJhZ3JhcGhOb2RlKG5vZGUuX19rZXkpO1xuICB9IC8vIFZpZXdcblxuXG4gIGNyZWF0ZURPTShjb25maWcpIHtcbiAgICBjb25zdCBkb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgY29uc3QgY2xhc3NOYW1lcyA9IGdldENhY2hlZENsYXNzTmFtZUFycmF5KGNvbmZpZy50aGVtZSwgJ3BhcmFncmFwaCcpO1xuXG4gICAgaWYgKGNsYXNzTmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgZG9tQ2xhc3NMaXN0ID0gZG9tLmNsYXNzTGlzdDtcbiAgICAgIGRvbUNsYXNzTGlzdC5hZGQoLi4uY2xhc3NOYW1lcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRvbTtcbiAgfVxuXG4gIHVwZGF0ZURPTShwcmV2Tm9kZSwgZG9tLCBjb25maWcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdGF0aWMgaW1wb3J0RE9NKCkge1xuICAgIHJldHVybiB7XG4gICAgICBwOiBub2RlID0+ICh7XG4gICAgICAgIGNvbnZlcnNpb246IGNvbnZlcnRQYXJhZ3JhcGhFbGVtZW50LFxuICAgICAgICBwcmlvcml0eTogMFxuICAgICAgfSlcbiAgICB9O1xuICB9XG5cbiAgZXhwb3J0RE9NKGVkaXRvcikge1xuICAgIGNvbnN0IHtcbiAgICAgIGVsZW1lbnRcbiAgICB9ID0gc3VwZXIuZXhwb3J0RE9NKGVkaXRvcik7XG5cbiAgICBpZiAoZWxlbWVudCAmJiB0aGlzLmlzRW1wdHkoKSkge1xuICAgICAgZWxlbWVudC5hcHBlbmQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnInKSk7XG4gICAgfVxuXG4gICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IGZvcm1hdFR5cGUgPSB0aGlzLmdldEZvcm1hdFR5cGUoKTtcbiAgICAgIGVsZW1lbnQuc3R5bGUudGV4dEFsaWduID0gZm9ybWF0VHlwZTtcbiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZ2V0RGlyZWN0aW9uKCk7XG5cbiAgICAgIGlmIChkaXJlY3Rpb24pIHtcbiAgICAgICAgZWxlbWVudC5kaXIgPSBkaXJlY3Rpb247XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGluZGVudCA9IHRoaXMuZ2V0SW5kZW50KCk7XG5cbiAgICAgIGlmIChpbmRlbnQgPiAwKSB7XG4gICAgICAgIC8vIHBhZGRpbmctaW5saW5lLXN0YXJ0IGlzIG5vdCB3aWRlbHkgc3VwcG9ydGVkIGluIGVtYWlsIEhUTUwsIGJ1dFxuICAgICAgICAvLyBMZXhpY2FsIFJlY29uY2lsZXIgdXNlcyBwYWRkaW5nLWlubGluZS1zdGFydC4gVXNpbmcgdGV4dC1pbmRlbnQgaW5zdGVhZC5cbiAgICAgICAgZWxlbWVudC5zdHlsZS50ZXh0SW5kZW50ID0gYCR7aW5kZW50ICogMjB9cHhgO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBlbGVtZW50XG4gICAgfTtcbiAgfVxuXG4gIHN0YXRpYyBpbXBvcnRKU09OKHNlcmlhbGl6ZWROb2RlKSB7XG4gICAgY29uc3Qgbm9kZSA9ICRjcmVhdGVQYXJhZ3JhcGhOb2RlKCk7XG4gICAgbm9kZS5zZXRGb3JtYXQoc2VyaWFsaXplZE5vZGUuZm9ybWF0KTtcbiAgICBub2RlLnNldEluZGVudChzZXJpYWxpemVkTm9kZS5pbmRlbnQpO1xuICAgIG5vZGUuc2V0RGlyZWN0aW9uKHNlcmlhbGl6ZWROb2RlLmRpcmVjdGlvbik7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cblxuICBleHBvcnRKU09OKCkge1xuICAgIHJldHVybiB7IC4uLnN1cGVyLmV4cG9ydEpTT04oKSxcbiAgICAgIHR5cGU6ICdwYXJhZ3JhcGgnLFxuICAgICAgdmVyc2lvbjogMVxuICAgIH07XG4gIH0gLy8gTXV0YXRpb25cblxuXG4gIGluc2VydE5ld0FmdGVyKF8sIHJlc3RvcmVTZWxlY3Rpb24pIHtcbiAgICBjb25zdCBuZXdFbGVtZW50ID0gJGNyZWF0ZVBhcmFncmFwaE5vZGUoKTtcbiAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLmdldERpcmVjdGlvbigpO1xuICAgIG5ld0VsZW1lbnQuc2V0RGlyZWN0aW9uKGRpcmVjdGlvbik7XG4gICAgdGhpcy5pbnNlcnRBZnRlcihuZXdFbGVtZW50LCByZXN0b3JlU2VsZWN0aW9uKTtcbiAgICByZXR1cm4gbmV3RWxlbWVudDtcbiAgfVxuXG4gIGNvbGxhcHNlQXRTdGFydCgpIHtcbiAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuZ2V0Q2hpbGRyZW4oKTsgLy8gSWYgd2UgaGF2ZSBhbiBlbXB0eSAodHJpbW1lZCkgZmlyc3QgcGFyYWdyYXBoIGFuZCB0cnkgYW5kIHJlbW92ZSBpdCxcbiAgICAvLyBkZWxldGUgdGhlIHBhcmFncmFwaCBhcyBsb25nIGFzIHdlIGhhdmUgYW5vdGhlciBzaWJsaW5nIHRvIGdvIHRvXG5cbiAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID09PSAwIHx8ICRpc1RleHROb2RlKGNoaWxkcmVuWzBdKSAmJiBjaGlsZHJlblswXS5nZXRUZXh0Q29udGVudCgpLnRyaW0oKSA9PT0gJycpIHtcbiAgICAgIGNvbnN0IG5leHRTaWJsaW5nID0gdGhpcy5nZXROZXh0U2libGluZygpO1xuXG4gICAgICBpZiAobmV4dFNpYmxpbmcgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5zZWxlY3ROZXh0KCk7XG4gICAgICAgIHRoaXMucmVtb3ZlKCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwcmV2U2libGluZyA9IHRoaXMuZ2V0UHJldmlvdXNTaWJsaW5nKCk7XG5cbiAgICAgIGlmIChwcmV2U2libGluZyAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLnNlbGVjdFByZXZpb3VzKCk7XG4gICAgICAgIHRoaXMucmVtb3ZlKCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRQYXJhZ3JhcGhFbGVtZW50KGVsZW1lbnQpIHtcbiAgY29uc3Qgbm9kZSA9ICRjcmVhdGVQYXJhZ3JhcGhOb2RlKCk7XG5cbiAgaWYgKGVsZW1lbnQuc3R5bGUpIHtcbiAgICBub2RlLnNldEZvcm1hdChlbGVtZW50LnN0eWxlLnRleHRBbGlnbik7XG4gICAgY29uc3QgaW5kZW50ID0gcGFyc2VJbnQoZWxlbWVudC5zdHlsZS50ZXh0SW5kZW50LCAxMCkgLyAyMDtcblxuICAgIGlmIChpbmRlbnQgPiAwKSB7XG4gICAgICBub2RlLnNldEluZGVudChpbmRlbnQpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbm9kZVxuICB9O1xufVxuXG5mdW5jdGlvbiAkY3JlYXRlUGFyYWdyYXBoTm9kZSgpIHtcbiAgcmV0dXJuICRhcHBseU5vZGVSZXBsYWNlbWVudChuZXcgUGFyYWdyYXBoTm9kZSgpKTtcbn1cbmZ1bmN0aW9uICRpc1BhcmFncmFwaE5vZGUobm9kZSkge1xuICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIFBhcmFncmFwaE5vZGU7XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cbmNvbnN0IENPTU1BTkRfUFJJT1JJVFlfRURJVE9SID0gMDtcbmNvbnN0IENPTU1BTkRfUFJJT1JJVFlfTE9XID0gMTtcbmNvbnN0IENPTU1BTkRfUFJJT1JJVFlfTk9STUFMID0gMjtcbmNvbnN0IENPTU1BTkRfUFJJT1JJVFlfSElHSCA9IDM7XG5jb25zdCBDT01NQU5EX1BSSU9SSVRZX0NSSVRJQ0FMID0gNDsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuXG5mdW5jdGlvbiByZXNldEVkaXRvcihlZGl0b3IsIHByZXZSb290RWxlbWVudCwgbmV4dFJvb3RFbGVtZW50LCBwZW5kaW5nRWRpdG9yU3RhdGUpIHtcbiAgY29uc3Qga2V5Tm9kZU1hcCA9IGVkaXRvci5fa2V5VG9ET01NYXA7XG4gIGtleU5vZGVNYXAuY2xlYXIoKTtcbiAgZWRpdG9yLl9lZGl0b3JTdGF0ZSA9IGNyZWF0ZUVtcHR5RWRpdG9yU3RhdGUoKTtcbiAgZWRpdG9yLl9wZW5kaW5nRWRpdG9yU3RhdGUgPSBwZW5kaW5nRWRpdG9yU3RhdGU7XG4gIGVkaXRvci5fY29tcG9zaXRpb25LZXkgPSBudWxsO1xuICBlZGl0b3IuX2RpcnR5VHlwZSA9IE5PX0RJUlRZX05PREVTO1xuXG4gIGVkaXRvci5fY2xvbmVOb3ROZWVkZWQuY2xlYXIoKTtcblxuICBlZGl0b3IuX2RpcnR5TGVhdmVzID0gbmV3IFNldCgpO1xuXG4gIGVkaXRvci5fZGlydHlFbGVtZW50cy5jbGVhcigpO1xuXG4gIGVkaXRvci5fbm9ybWFsaXplZE5vZGVzID0gbmV3IFNldCgpO1xuICBlZGl0b3IuX3VwZGF0ZVRhZ3MgPSBuZXcgU2V0KCk7XG4gIGVkaXRvci5fdXBkYXRlcyA9IFtdO1xuICBlZGl0b3IuX2Jsb2NrQ3Vyc29yRWxlbWVudCA9IG51bGw7XG4gIGNvbnN0IG9ic2VydmVyID0gZWRpdG9yLl9vYnNlcnZlcjtcblxuICBpZiAob2JzZXJ2ZXIgIT09IG51bGwpIHtcbiAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgZWRpdG9yLl9vYnNlcnZlciA9IG51bGw7XG4gIH0gLy8gUmVtb3ZlIGFsbCB0aGUgRE9NIG5vZGVzIGZyb20gdGhlIHJvb3QgZWxlbWVudFxuXG5cbiAgaWYgKHByZXZSb290RWxlbWVudCAhPT0gbnVsbCkge1xuICAgIHByZXZSb290RWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICB9XG5cbiAgaWYgKG5leHRSb290RWxlbWVudCAhPT0gbnVsbCkge1xuICAgIG5leHRSb290RWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICAgIGtleU5vZGVNYXAuc2V0KCdyb290JywgbmV4dFJvb3RFbGVtZW50KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbml0aWFsaXplQ29udmVyc2lvbkNhY2hlKG5vZGVzKSB7XG4gIGNvbnN0IGNvbnZlcnNpb25DYWNoZSA9IG5ldyBNYXAoKTtcbiAgY29uc3QgaGFuZGxlZENvbnZlcnNpb25zID0gbmV3IFNldCgpO1xuICBub2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xuICAgIGNvbnN0IGltcG9ydERPTSA9IG5vZGUua2xhc3MuaW1wb3J0RE9NICE9IG51bGwgPyBub2RlLmtsYXNzLmltcG9ydERPTS5iaW5kKG5vZGUua2xhc3MpIDogbnVsbDtcblxuICAgIGlmIChpbXBvcnRET00gPT0gbnVsbCB8fCBoYW5kbGVkQ29udmVyc2lvbnMuaGFzKGltcG9ydERPTSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBoYW5kbGVkQ29udmVyc2lvbnMuYWRkKGltcG9ydERPTSk7XG4gICAgY29uc3QgbWFwID0gaW1wb3J0RE9NKCk7XG5cbiAgICBpZiAobWFwICE9PSBudWxsKSB7XG4gICAgICBPYmplY3Qua2V5cyhtYXApLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgbGV0IGN1cnJlbnRDYWNoZSA9IGNvbnZlcnNpb25DYWNoZS5nZXQoa2V5KTtcblxuICAgICAgICBpZiAoY3VycmVudENhY2hlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjdXJyZW50Q2FjaGUgPSBbXTtcbiAgICAgICAgICBjb252ZXJzaW9uQ2FjaGUuc2V0KGtleSwgY3VycmVudENhY2hlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGN1cnJlbnRDYWNoZS5wdXNoKG1hcFtrZXldKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBjb252ZXJzaW9uQ2FjaGU7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgTGV4aWNhbEVkaXRvciBhdHRhY2hlZCB0byBhIHNpbmdsZSBjb250ZW50RWRpdGFibGUgKHByb3ZpZGVkIGluIHRoZSBjb25maWcpLiBUaGlzIGlzXG4gKiB0aGUgbG93ZXN0LWxldmVsIGluaXRpYWxpemF0aW9uIEFQSSBmb3IgYSBMZXhpY2FsRWRpdG9yLiBJZiB5b3UncmUgdXNpbmcgUmVhY3Qgb3IgYW5vdGhlciBmcmFtZXdvcmssXG4gKiBjb25zaWRlciB1c2luZyB0aGUgYXBwcm9wcmlhdGUgYWJzdHJhY3Rpb25zLCBzdWNoIGFzIExleGljYWxDb21wb3NlclxuICogQHBhcmFtIGVkaXRvckNvbmZpZyAtIHRoZSBlZGl0b3IgY29uZmlndXJhdGlvbi5cbiAqIEByZXR1cm5zIGEgTGV4aWNhbEVkaXRvciBpbnN0YW5jZVxuICovXG5cblxuZnVuY3Rpb24gY3JlYXRlRWRpdG9yKGVkaXRvckNvbmZpZykge1xuICBjb25zdCBjb25maWcgPSBlZGl0b3JDb25maWcgfHwge307XG4gIGNvbnN0IGFjdGl2ZUVkaXRvciA9IGludGVybmFsR2V0QWN0aXZlRWRpdG9yKCk7XG4gIGNvbnN0IHRoZW1lID0gY29uZmlnLnRoZW1lIHx8IHt9O1xuICBjb25zdCBwYXJlbnRFZGl0b3IgPSBlZGl0b3JDb25maWcgPT09IHVuZGVmaW5lZCA/IGFjdGl2ZUVkaXRvciA6IGNvbmZpZy5wYXJlbnRFZGl0b3IgfHwgbnVsbDtcbiAgY29uc3QgZGlzYWJsZUV2ZW50cyA9IGNvbmZpZy5kaXNhYmxlRXZlbnRzIHx8IGZhbHNlO1xuICBjb25zdCBlZGl0b3JTdGF0ZSA9IGNyZWF0ZUVtcHR5RWRpdG9yU3RhdGUoKTtcbiAgY29uc3QgbmFtZXNwYWNlID0gY29uZmlnLm5hbWVzcGFjZSB8fCAocGFyZW50RWRpdG9yICE9PSBudWxsID8gcGFyZW50RWRpdG9yLl9jb25maWcubmFtZXNwYWNlIDogY3JlYXRlVUlEKCkpO1xuICBjb25zdCBpbml0aWFsRWRpdG9yU3RhdGUgPSBjb25maWcuZWRpdG9yU3RhdGU7XG4gIGNvbnN0IG5vZGVzID0gW1Jvb3ROb2RlLCBUZXh0Tm9kZSwgTGluZUJyZWFrTm9kZSwgUGFyYWdyYXBoTm9kZSwgLi4uKGNvbmZpZy5ub2RlcyB8fCBbXSldO1xuICBjb25zdCBvbkVycm9yID0gY29uZmlnLm9uRXJyb3I7XG4gIGNvbnN0IGlzRWRpdGFibGUgPSBjb25maWcuZWRpdGFibGUgIT09IHVuZGVmaW5lZCA/IGNvbmZpZy5lZGl0YWJsZSA6IHRydWU7XG4gIGxldCByZWdpc3RlcmVkTm9kZXM7XG5cbiAgaWYgKGVkaXRvckNvbmZpZyA9PT0gdW5kZWZpbmVkICYmIGFjdGl2ZUVkaXRvciAhPT0gbnVsbCkge1xuICAgIHJlZ2lzdGVyZWROb2RlcyA9IGFjdGl2ZUVkaXRvci5fbm9kZXM7XG4gIH0gZWxzZSB7XG4gICAgcmVnaXN0ZXJlZE5vZGVzID0gbmV3IE1hcCgpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGtsYXNzID0gbm9kZXNbaV07XG4gICAgICBsZXQgcmVwbGFjZW1lbnRDbGFzcyA9IG51bGw7XG4gICAgICBsZXQgcmVwbGFjZW1lbnRLbGFzcyA9IG51bGw7XG5cbiAgICAgIGlmICh0eXBlb2Yga2xhc3MgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IGtsYXNzO1xuICAgICAgICBrbGFzcyA9IG9wdGlvbnMucmVwbGFjZTtcbiAgICAgICAgcmVwbGFjZW1lbnRDbGFzcyA9IG9wdGlvbnMud2l0aDtcbiAgICAgICAgcmVwbGFjZW1lbnRLbGFzcyA9IG9wdGlvbnMud2l0aEtsYXNzID8gb3B0aW9ucy53aXRoS2xhc3MgOiBudWxsO1xuICAgICAgfSAvLyBFbnN1cmUgY3VzdG9tIG5vZGVzIGltcGxlbWVudCByZXF1aXJlZCBtZXRob2RzLlxuXG5cbiAgICAgIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IGtsYXNzLm5hbWU7XG5cbiAgICAgICAgaWYgKG5hbWUgIT09ICdSb290Tm9kZScpIHtcbiAgICAgICAgICBjb25zdCBwcm90byA9IGtsYXNzLnByb3RvdHlwZTtcbiAgICAgICAgICBbJ2dldFR5cGUnLCAnY2xvbmUnXS5mb3JFYWNoKG1ldGhvZCA9PiB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG4gICAgICAgICAgICBpZiAoIWtsYXNzLmhhc093blByb3BlcnR5KG1ldGhvZCkpIHtcbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKGAke25hbWV9IG11c3QgaW1wbGVtZW50IHN0YXRpYyBcIiR7bWV0aG9kfVwiIG1ldGhvZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKCAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG4gICAgICAgICAgICAha2xhc3MuaGFzT3duUHJvcGVydHkoJ2ltcG9ydERPTScpICYmIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnNcbiAgICAgICAgICAgIGtsYXNzLmhhc093blByb3BlcnR5KCdleHBvcnRET00nKSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGAke25hbWV9IHNob3VsZCBpbXBsZW1lbnQgXCJpbXBvcnRET01cIiBpZiB1c2luZyBhIGN1c3RvbSBcImV4cG9ydERPTVwiIG1ldGhvZCB0byBlbnN1cmUgSFRNTCBzZXJpYWxpemF0aW9uIChpbXBvcnRhbnQgZm9yIGNvcHkgJiBwYXN0ZSkgd29ya3MgYXMgZXhwZWN0ZWRgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAocHJvdG8gaW5zdGFuY2VvZiBEZWNvcmF0b3JOb2RlKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG4gICAgICAgICAgICBpZiAoIXByb3RvLmhhc093blByb3BlcnR5KCdkZWNvcmF0ZScpKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybihgJHtwcm90by5jb25zdHJ1Y3Rvci5uYW1lfSBtdXN0IGltcGxlbWVudCBcImRlY29yYXRlXCIgbWV0aG9kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG4gICAgICAgICAgICAha2xhc3MuaGFzT3duUHJvcGVydHkoJ2ltcG9ydEpTT04nKSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGAke25hbWV9IHNob3VsZCBpbXBsZW1lbnQgXCJpbXBvcnRKU09OXCIgbWV0aG9kIHRvIGVuc3VyZSBKU09OIGFuZCBkZWZhdWx0IEhUTUwgc2VyaWFsaXphdGlvbiB3b3JrcyBhcyBleHBlY3RlZGApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICggLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb3RvdHlwZS1idWlsdGluc1xuICAgICAgICAgICAgIXByb3RvLmhhc093blByb3BlcnR5KCdleHBvcnRKU09OJykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgJHtuYW1lfSBzaG91bGQgaW1wbGVtZW50IFwiZXhwb3J0SlNPTlwiIG1ldGhvZCB0byBlbnN1cmUgSlNPTiBhbmQgZGVmYXVsdCBIVE1MIHNlcmlhbGl6YXRpb24gd29ya3MgYXMgZXhwZWN0ZWRgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgdHlwZSA9IGtsYXNzLmdldFR5cGUoKTtcbiAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IGtsYXNzLnRyYW5zZm9ybSgpO1xuICAgICAgY29uc3QgdHJhbnNmb3JtcyA9IG5ldyBTZXQoKTtcblxuICAgICAgaWYgKHRyYW5zZm9ybSAhPT0gbnVsbCkge1xuICAgICAgICB0cmFuc2Zvcm1zLmFkZCh0cmFuc2Zvcm0pO1xuICAgICAgfVxuXG4gICAgICByZWdpc3RlcmVkTm9kZXMuc2V0KHR5cGUsIHtcbiAgICAgICAga2xhc3MsXG4gICAgICAgIHJlcGxhY2U6IHJlcGxhY2VtZW50Q2xhc3MsXG4gICAgICAgIHJlcGxhY2VXaXRoS2xhc3M6IHJlcGxhY2VtZW50S2xhc3MsXG4gICAgICAgIHRyYW5zZm9ybXNcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGVkaXRvciA9IG5ldyBMZXhpY2FsRWRpdG9yKGVkaXRvclN0YXRlLCBwYXJlbnRFZGl0b3IsIHJlZ2lzdGVyZWROb2Rlcywge1xuICAgIGRpc2FibGVFdmVudHMsXG4gICAgbmFtZXNwYWNlLFxuICAgIHRoZW1lXG4gIH0sIG9uRXJyb3IgPyBvbkVycm9yIDogY29uc29sZS5lcnJvciwgaW5pdGlhbGl6ZUNvbnZlcnNpb25DYWNoZShyZWdpc3RlcmVkTm9kZXMpLCBpc0VkaXRhYmxlKTtcblxuICBpZiAoaW5pdGlhbEVkaXRvclN0YXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICBlZGl0b3IuX3BlbmRpbmdFZGl0b3JTdGF0ZSA9IGluaXRpYWxFZGl0b3JTdGF0ZTtcbiAgICBlZGl0b3IuX2RpcnR5VHlwZSA9IEZVTExfUkVDT05DSUxFO1xuICB9XG5cbiAgcmV0dXJuIGVkaXRvcjtcbn1cbmNsYXNzIExleGljYWxFZGl0b3Ige1xuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cblxuICAvKiogQGludGVybmFsICovXG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgY29uc3RydWN0b3IoZWRpdG9yU3RhdGUsIHBhcmVudEVkaXRvciwgbm9kZXMsIGNvbmZpZywgb25FcnJvciwgaHRtbENvbnZlcnNpb25zLCBlZGl0YWJsZSkge1xuICAgIHRoaXMuX3BhcmVudEVkaXRvciA9IHBhcmVudEVkaXRvcjsgLy8gVGhlIHJvb3QgZWxlbWVudCBhc3NvY2lhdGVkIHdpdGggdGhpcyBlZGl0b3JcblxuICAgIHRoaXMuX3Jvb3RFbGVtZW50ID0gbnVsbDsgLy8gVGhlIGN1cnJlbnQgZWRpdG9yIHN0YXRlXG5cbiAgICB0aGlzLl9lZGl0b3JTdGF0ZSA9IGVkaXRvclN0YXRlOyAvLyBIYW5kbGluZyBvZiBkcmFmdHMgYW5kIHVwZGF0ZXNcblxuICAgIHRoaXMuX3BlbmRpbmdFZGl0b3JTdGF0ZSA9IG51bGw7IC8vIFVzZWQgdG8gaGVscCBjby1vcmRpbmF0ZSBzZWxlY3Rpb24gYW5kIGV2ZW50c1xuXG4gICAgdGhpcy5fY29tcG9zaXRpb25LZXkgPSBudWxsO1xuICAgIHRoaXMuX2RlZmVycmVkID0gW107IC8vIFVzZWQgZHVyaW5nIHJlY29uY2lsaWF0aW9uXG5cbiAgICB0aGlzLl9rZXlUb0RPTU1hcCA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLl91cGRhdGVzID0gW107XG4gICAgdGhpcy5fdXBkYXRpbmcgPSBmYWxzZTsgLy8gTGlzdGVuZXJzXG5cbiAgICB0aGlzLl9saXN0ZW5lcnMgPSB7XG4gICAgICBkZWNvcmF0b3I6IG5ldyBTZXQoKSxcbiAgICAgIGVkaXRhYmxlOiBuZXcgU2V0KCksXG4gICAgICBtdXRhdGlvbjogbmV3IE1hcCgpLFxuICAgICAgcm9vdDogbmV3IFNldCgpLFxuICAgICAgdGV4dGNvbnRlbnQ6IG5ldyBTZXQoKSxcbiAgICAgIHVwZGF0ZTogbmV3IFNldCgpXG4gICAgfTsgLy8gQ29tbWFuZHNcblxuICAgIHRoaXMuX2NvbW1hbmRzID0gbmV3IE1hcCgpOyAvLyBFZGl0b3IgY29uZmlndXJhdGlvbiBmb3IgdGhlbWUvY29udGV4dC5cblxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZzsgLy8gTWFwcGluZyBvZiB0eXBlcyB0byB0aGVpciBub2Rlc1xuXG4gICAgdGhpcy5fbm9kZXMgPSBub2RlczsgLy8gUmVhY3Qgbm9kZSBkZWNvcmF0b3JzIGZvciBwb3J0YWxzXG5cbiAgICB0aGlzLl9kZWNvcmF0b3JzID0ge307XG4gICAgdGhpcy5fcGVuZGluZ0RlY29yYXRvcnMgPSBudWxsOyAvLyBVc2VkIHRvIG9wdGltaXplIHJlY29uY2lsaWF0aW9uXG5cbiAgICB0aGlzLl9kaXJ0eVR5cGUgPSBOT19ESVJUWV9OT0RFUztcbiAgICB0aGlzLl9jbG9uZU5vdE5lZWRlZCA9IG5ldyBTZXQoKTtcbiAgICB0aGlzLl9kaXJ0eUxlYXZlcyA9IG5ldyBTZXQoKTtcbiAgICB0aGlzLl9kaXJ0eUVsZW1lbnRzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuX25vcm1hbGl6ZWROb2RlcyA9IG5ldyBTZXQoKTtcbiAgICB0aGlzLl91cGRhdGVUYWdzID0gbmV3IFNldCgpOyAvLyBIYW5kbGluZyBvZiBET00gbXV0YXRpb25zXG5cbiAgICB0aGlzLl9vYnNlcnZlciA9IG51bGw7IC8vIFVzZWQgZm9yIGlkZW50aWZ5aW5nIG93bmluZyBlZGl0b3JzXG5cbiAgICB0aGlzLl9rZXkgPSBjcmVhdGVVSUQoKTtcbiAgICB0aGlzLl9vbkVycm9yID0gb25FcnJvcjtcbiAgICB0aGlzLl9odG1sQ29udmVyc2lvbnMgPSBodG1sQ29udmVyc2lvbnM7IC8vIFdlIGRvbid0IGFjdHVhbGx5IG1ha2UgdXNlIG9mIHRoZSBgZWRpdGFibGVgIGFyZ3VtZW50IGFib3ZlLlxuICAgIC8vIERvaW5nIHNvLCBjYXVzZXMgZTJlIHRlc3RzIGFyb3VuZCB0aGUgbG9jayB0byBmYWlsLlxuXG4gICAgdGhpcy5fZWRpdGFibGUgPSB0cnVlO1xuICAgIHRoaXMuX2hlYWRsZXNzID0gcGFyZW50RWRpdG9yICE9PSBudWxsICYmIHBhcmVudEVkaXRvci5faGVhZGxlc3M7XG4gICAgdGhpcy5fd2luZG93ID0gbnVsbDtcbiAgICB0aGlzLl9ibG9ja0N1cnNvckVsZW1lbnQgPSBudWxsO1xuICB9XG4gIC8qKlxuICAgKlxuICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBlZGl0b3IgaXMgY3VycmVudGx5IGluIFwiY29tcG9zaXRpb25cIiBtb2RlIGR1ZSB0byByZWNlaXZpbmcgaW5wdXRcbiAgICogdGhyb3VnaCBhbiBJTUUsIG9yIDNQIGV4dGVuc2lvbiwgZm9yIGV4YW1wbGUuIFJldHVybnMgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKi9cblxuXG4gIGlzQ29tcG9zaW5nKCkge1xuICAgIHJldHVybiB0aGlzLl9jb21wb3NpdGlvbktleSAhPSBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBsaXN0ZW5lciBmb3IgRWRpdG9yIHVwZGF0ZSBldmVudC4gV2lsbCB0cmlnZ2VyIHRoZSBwcm92aWRlZCBjYWxsYmFja1xuICAgKiBlYWNoIHRpbWUgdGhlIGVkaXRvciBnb2VzIHRocm91Z2ggYW4gdXBkYXRlICh2aWEge0BsaW5rIExleGljYWxFZGl0b3IudXBkYXRlfSkgdW50aWwgdGhlXG4gICAqIHRlYXJkb3duIGZ1bmN0aW9uIGlzIGNhbGxlZC5cbiAgICpcbiAgICogQHJldHVybnMgYSB0ZWFyZG93biBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGNsZWFudXAgdGhlIGxpc3RlbmVyLlxuICAgKi9cblxuXG4gIHJlZ2lzdGVyVXBkYXRlTGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICBjb25zdCBsaXN0ZW5lclNldE9yTWFwID0gdGhpcy5fbGlzdGVuZXJzLnVwZGF0ZTtcbiAgICBsaXN0ZW5lclNldE9yTWFwLmFkZChsaXN0ZW5lcik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGxpc3RlbmVyU2V0T3JNYXAuZGVsZXRlKGxpc3RlbmVyKTtcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBsaXN0ZW5lciBmb3IgZm9yIHdoZW4gdGhlIGVkaXRvciBjaGFuZ2VzIGJldHdlZW4gZWRpdGFibGUgYW5kIG5vbi1lZGl0YWJsZSBzdGF0ZXMuXG4gICAqIFdpbGwgdHJpZ2dlciB0aGUgcHJvdmlkZWQgY2FsbGJhY2sgZWFjaCB0aW1lIHRoZSBlZGl0b3IgdHJhbnNpdGlvbnMgYmV0d2VlbiB0aGVzZSBzdGF0ZXMgdW50aWwgdGhlXG4gICAqIHRlYXJkb3duIGZ1bmN0aW9uIGlzIGNhbGxlZC5cbiAgICpcbiAgICogQHJldHVybnMgYSB0ZWFyZG93biBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGNsZWFudXAgdGhlIGxpc3RlbmVyLlxuICAgKi9cblxuXG4gIHJlZ2lzdGVyRWRpdGFibGVMaXN0ZW5lcihsaXN0ZW5lcikge1xuICAgIGNvbnN0IGxpc3RlbmVyU2V0T3JNYXAgPSB0aGlzLl9saXN0ZW5lcnMuZWRpdGFibGU7XG4gICAgbGlzdGVuZXJTZXRPck1hcC5hZGQobGlzdGVuZXIpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBsaXN0ZW5lclNldE9yTWFwLmRlbGV0ZShsaXN0ZW5lcik7XG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgZm9yIHdoZW4gdGhlIGVkaXRvcidzIGRlY29yYXRvciBvYmplY3QgY2hhbmdlcy4gVGhlIGRlY29yYXRvciBvYmplY3QgY29udGFpbnNcbiAgICogYWxsIERlY29yYXRvck5vZGUga2V5cyAtPiB0aGVpciBkZWNvcmF0ZWQgdmFsdWUuIFRoaXMgaXMgcHJpbWFyaWx5IHVzZWQgd2l0aCBleHRlcm5hbCBVSSBmcmFtZXdvcmtzLlxuICAgKlxuICAgKiBXaWxsIHRyaWdnZXIgdGhlIHByb3ZpZGVkIGNhbGxiYWNrIGVhY2ggdGltZSB0aGUgZWRpdG9yIHRyYW5zaXRpb25zIGJldHdlZW4gdGhlc2Ugc3RhdGVzIHVudGlsIHRoZVxuICAgKiB0ZWFyZG93biBmdW5jdGlvbiBpcyBjYWxsZWQuXG4gICAqXG4gICAqIEByZXR1cm5zIGEgdGVhcmRvd24gZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBjbGVhbnVwIHRoZSBsaXN0ZW5lci5cbiAgICovXG5cblxuICByZWdpc3RlckRlY29yYXRvckxpc3RlbmVyKGxpc3RlbmVyKSB7XG4gICAgY29uc3QgbGlzdGVuZXJTZXRPck1hcCA9IHRoaXMuX2xpc3RlbmVycy5kZWNvcmF0b3I7XG4gICAgbGlzdGVuZXJTZXRPck1hcC5hZGQobGlzdGVuZXIpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBsaXN0ZW5lclNldE9yTWFwLmRlbGV0ZShsaXN0ZW5lcik7XG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgZm9yIHdoZW4gTGV4aWNhbCBjb21taXRzIGFuIHVwZGF0ZSB0byB0aGUgRE9NIGFuZCB0aGUgdGV4dCBjb250ZW50IG9mXG4gICAqIHRoZSBlZGl0b3IgY2hhbmdlcyBmcm9tIHRoZSBwcmV2aW91cyBzdGF0ZSBvZiB0aGUgZWRpdG9yLiBJZiB0aGUgdGV4dCBjb250ZW50IGlzIHRoZVxuICAgKiBzYW1lIGJldHdlZW4gdXBkYXRlcywgbm8gbm90aWZpY2F0aW9ucyB0byB0aGUgbGlzdGVuZXJzIHdpbGwgaGFwcGVuLlxuICAgKlxuICAgKiBXaWxsIHRyaWdnZXIgdGhlIHByb3ZpZGVkIGNhbGxiYWNrIGVhY2ggdGltZSB0aGUgZWRpdG9yIHRyYW5zaXRpb25zIGJldHdlZW4gdGhlc2Ugc3RhdGVzIHVudGlsIHRoZVxuICAgKiB0ZWFyZG93biBmdW5jdGlvbiBpcyBjYWxsZWQuXG4gICAqXG4gICAqIEByZXR1cm5zIGEgdGVhcmRvd24gZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBjbGVhbnVwIHRoZSBsaXN0ZW5lci5cbiAgICovXG5cblxuICByZWdpc3RlclRleHRDb250ZW50TGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICBjb25zdCBsaXN0ZW5lclNldE9yTWFwID0gdGhpcy5fbGlzdGVuZXJzLnRleHRjb250ZW50O1xuICAgIGxpc3RlbmVyU2V0T3JNYXAuYWRkKGxpc3RlbmVyKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbGlzdGVuZXJTZXRPck1hcC5kZWxldGUobGlzdGVuZXIpO1xuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIGZvciB3aGVuIHRoZSBlZGl0b3IncyByb290IERPTSBlbGVtZW50ICh0aGUgY29udGVudCBlZGl0YWJsZVxuICAgKiBMZXhpY2FsIGF0dGFjaGVzIHRvKSBjaGFuZ2VzLiBUaGlzIGlzIHByaW1hcmlseSB1c2VkIHRvIGF0dGFjaCBldmVudCBsaXN0ZW5lcnMgdG8gdGhlIHJvb3RcbiAgICogIGVsZW1lbnQuIFRoZSByb290IGxpc3RlbmVyIGZ1bmN0aW9uIGlzIGV4ZWN1dGVkIGRpcmVjdGx5IHVwb24gcmVnaXN0cmF0aW9uIGFuZCB0aGVuIG9uXG4gICAqIGFueSBzdWJzZXF1ZW50IHVwZGF0ZS5cbiAgICpcbiAgICogV2lsbCB0cmlnZ2VyIHRoZSBwcm92aWRlZCBjYWxsYmFjayBlYWNoIHRpbWUgdGhlIGVkaXRvciB0cmFuc2l0aW9ucyBiZXR3ZWVuIHRoZXNlIHN0YXRlcyB1bnRpbCB0aGVcbiAgICogdGVhcmRvd24gZnVuY3Rpb24gaXMgY2FsbGVkLlxuICAgKlxuICAgKiBAcmV0dXJucyBhIHRlYXJkb3duIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2xlYW51cCB0aGUgbGlzdGVuZXIuXG4gICAqL1xuXG5cbiAgcmVnaXN0ZXJSb290TGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICBjb25zdCBsaXN0ZW5lclNldE9yTWFwID0gdGhpcy5fbGlzdGVuZXJzLnJvb3Q7XG4gICAgbGlzdGVuZXIodGhpcy5fcm9vdEVsZW1lbnQsIG51bGwpO1xuICAgIGxpc3RlbmVyU2V0T3JNYXAuYWRkKGxpc3RlbmVyKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbGlzdGVuZXIobnVsbCwgdGhpcy5fcm9vdEVsZW1lbnQpO1xuICAgICAgbGlzdGVuZXJTZXRPck1hcC5kZWxldGUobGlzdGVuZXIpO1xuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIHRoYXQgd2lsbCB0cmlnZ2VyIGFueXRpbWUgdGhlIHByb3ZpZGVkIGNvbW1hbmRcbiAgICogaXMgZGlzcGF0Y2hlZCwgc3ViamVjdCB0byBwcmlvcml0eS4gTGlzdGVuZXJzIHRoYXQgcnVuIGF0IGEgaGlnaGVyIHByaW9yaXR5IGNhbiBcImludGVyY2VwdFwiXG4gICAqIGNvbW1hbmRzIGFuZCBwcmV2ZW50IHRoZW0gZnJvbSBwcm9wYWdhdGluZyB0byBvdGhlciBoYW5kbGVycyBieSByZXR1cm5pbmcgdHJ1ZS5cbiAgICpcbiAgICogTGlzdGVuZXJzIHJlZ2lzdGVyZWQgYXQgdGhlIHNhbWUgcHJpb3JpdHkgbGV2ZWwgd2lsbCBydW4gZGV0ZXJtaW5pc3RpY2FsbHkgaW4gdGhlIG9yZGVyIG9mIHJlZ2lzdHJhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIGNvbW1hbmQgLSB0aGUgY29tbWFuZCB0aGF0IHdpbGwgdHJpZ2dlciB0aGUgY2FsbGJhY2suXG4gICAqIEBwYXJhbSBsaXN0ZW5lciAtIHRoZSBmdW5jdGlvbiB0aGF0IHdpbGwgZXhlY3V0ZSB3aGVuIHRoZSBjb21tYW5kIGlzIGRpc3BhdGNoZWQuXG4gICAqIEBwYXJhbSBwcmlvcml0eSAtIHRoZSByZWxhdGl2ZSBwcmlvcml0eSBvZiB0aGUgbGlzdGVuZXIuIDAgfCAxIHwgMiB8IDMgfCA0XG4gICAqIEByZXR1cm5zIGEgdGVhcmRvd24gZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBjbGVhbnVwIHRoZSBsaXN0ZW5lci5cbiAgICovXG5cblxuICByZWdpc3RlckNvbW1hbmQoY29tbWFuZCwgbGlzdGVuZXIsIHByaW9yaXR5KSB7XG4gICAgaWYgKHByaW9yaXR5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoYExpc3RlbmVyIGZvciB0eXBlIFwiY29tbWFuZFwiIHJlcXVpcmVzIGEgXCJwcmlvcml0eVwiLmApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGNvbW1hbmRzTWFwID0gdGhpcy5fY29tbWFuZHM7XG5cbiAgICBpZiAoIWNvbW1hbmRzTWFwLmhhcyhjb21tYW5kKSkge1xuICAgICAgY29tbWFuZHNNYXAuc2V0KGNvbW1hbmQsIFtuZXcgU2V0KCksIG5ldyBTZXQoKSwgbmV3IFNldCgpLCBuZXcgU2V0KCksIG5ldyBTZXQoKV0pO1xuICAgIH1cblxuICAgIGNvbnN0IGxpc3RlbmVyc0luUHJpb3JpdHlPcmRlciA9IGNvbW1hbmRzTWFwLmdldChjb21tYW5kKTtcblxuICAgIGlmIChsaXN0ZW5lcnNJblByaW9yaXR5T3JkZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAge1xuICAgICAgICB0aHJvdyBFcnJvcihgcmVnaXN0ZXJDb21tYW5kOiBDb21tYW5kICR7U3RyaW5nKGNvbW1hbmQpfSBub3QgZm91bmQgaW4gY29tbWFuZCBtYXBgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnNJblByaW9yaXR5T3JkZXJbcHJpb3JpdHldO1xuICAgIGxpc3RlbmVycy5hZGQobGlzdGVuZXIpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBsaXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKTtcblxuICAgICAgaWYgKGxpc3RlbmVyc0luUHJpb3JpdHlPcmRlci5ldmVyeShsaXN0ZW5lcnNTZXQgPT4gbGlzdGVuZXJzU2V0LnNpemUgPT09IDApKSB7XG4gICAgICAgIGNvbW1hbmRzTWFwLmRlbGV0ZShjb21tYW5kKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBsaXN0ZW5lciB0aGF0IHdpbGwgcnVuIHdoZW4gYSBMZXhpY2FsIG5vZGUgb2YgdGhlIHByb3ZpZGVkIGNsYXNzIGlzXG4gICAqIG11dGF0ZWQuIFRoZSBsaXN0ZW5lciB3aWxsIHJlY2VpdmUgYSBsaXN0IG9mIG5vZGVzIGFsb25nIHdpdGggdGhlIHR5cGUgb2YgbXV0YXRpb25cbiAgICogdGhhdCB3YXMgcGVyZm9ybWVkIG9uIGVhY2g6IGNyZWF0ZWQsIGRlc3Ryb3llZCwgb3IgdXBkYXRlZC5cbiAgICpcbiAgICogT25lIGNvbW1vbiB1c2UgY2FzZSBmb3IgdGhpcyBpcyB0byBhdHRhY2ggRE9NIGV2ZW50IGxpc3RlbmVycyB0byB0aGUgdW5kZXJseWluZyBET00gbm9kZXMgYXMgTGV4aWNhbCBub2RlcyBhcmUgY3JlYXRlZC5cbiAgICoge0BsaW5rIExleGljYWxFZGl0b3IuZ2V0RWxlbWVudEJ5S2V5fSBjYW4gYmUgdXNlZCBmb3IgdGhpcy5cbiAgICpcbiAgICogQHBhcmFtIGtsYXNzIC0gVGhlIGNsYXNzIG9mIHRoZSBub2RlIHRoYXQgeW91IHdhbnQgdG8gbGlzdGVuIHRvIG11dGF0aW9ucyBvbi5cbiAgICogQHBhcmFtIGxpc3RlbmVyIC0gVGhlIGxvZ2ljIHlvdSB3YW50IHRvIHJ1biB3aGVuIHRoZSBub2RlIGlzIG11dGF0ZWQuXG4gICAqIEByZXR1cm5zIGEgdGVhcmRvd24gZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBjbGVhbnVwIHRoZSBsaXN0ZW5lci5cbiAgICovXG5cblxuICByZWdpc3Rlck11dGF0aW9uTGlzdGVuZXIoa2xhc3MsIGxpc3RlbmVyKSB7XG4gICAgY29uc3QgcmVnaXN0ZXJlZE5vZGUgPSB0aGlzLl9ub2Rlcy5nZXQoa2xhc3MuZ2V0VHlwZSgpKTtcblxuICAgIGlmIChyZWdpc3RlcmVkTm9kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB7XG4gICAgICAgIHRocm93IEVycm9yKGBOb2RlICR7a2xhc3MubmFtZX0gaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQuIEVuc3VyZSBub2RlIGhhcyBiZWVuIHBhc3NlZCB0byBjcmVhdGVFZGl0b3IuYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbXV0YXRpb25zID0gdGhpcy5fbGlzdGVuZXJzLm11dGF0aW9uO1xuICAgIG11dGF0aW9ucy5zZXQobGlzdGVuZXIsIGtsYXNzKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbXV0YXRpb25zLmRlbGV0ZShsaXN0ZW5lcik7XG4gICAgfTtcbiAgfVxuICAvKiogQGludGVybmFsICovXG5cblxuICByZWdpc3Rlck5vZGVUcmFuc2Zvcm1Ub0tsYXNzKGtsYXNzLCBsaXN0ZW5lcikge1xuICAgIGNvbnN0IHR5cGUgPSBrbGFzcy5nZXRUeXBlKCk7XG5cbiAgICBjb25zdCByZWdpc3RlcmVkTm9kZSA9IHRoaXMuX25vZGVzLmdldCh0eXBlKTtcblxuICAgIGlmIChyZWdpc3RlcmVkTm9kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB7XG4gICAgICAgIHRocm93IEVycm9yKGBOb2RlICR7a2xhc3MubmFtZX0gaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQuIEVuc3VyZSBub2RlIGhhcyBiZWVuIHBhc3NlZCB0byBjcmVhdGVFZGl0b3IuYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdHJhbnNmb3JtcyA9IHJlZ2lzdGVyZWROb2RlLnRyYW5zZm9ybXM7XG4gICAgdHJhbnNmb3Jtcy5hZGQobGlzdGVuZXIpO1xuICAgIHJldHVybiByZWdpc3RlcmVkTm9kZTtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgdGhhdCB3aWxsIHJ1biB3aGVuIGEgTGV4aWNhbCBub2RlIG9mIHRoZSBwcm92aWRlZCBjbGFzcyBpc1xuICAgKiBtYXJrZWQgZGlydHkgZHVyaW5nIGFuIHVwZGF0ZS4gVGhlIGxpc3RlbmVyIHdpbGwgY29udGludWUgdG8gcnVuIGFzIGxvbmcgYXMgdGhlIG5vZGVcbiAgICogaXMgbWFya2VkIGRpcnR5LiBUaGVyZSBhcmUgbm8gZ3VhcmFudGVlcyBhcm91bmQgdGhlIG9yZGVyIG9mIHRyYW5zZm9ybSBleGVjdXRpb24hXG4gICAqXG4gICAqIFdhdGNoIG91dCBmb3IgaW5maW5pdGUgbG9vcHMuIFNlZSBbTm9kZSBUcmFuc2Zvcm1zXShodHRwczovL2xleGljYWwuZGV2L2RvY3MvY29uY2VwdHMvdHJhbnNmb3JtcylcbiAgICogQHBhcmFtIGtsYXNzIC0gVGhlIGNsYXNzIG9mIHRoZSBub2RlIHRoYXQgeW91IHdhbnQgdG8gcnVuIHRyYW5zZm9ybXMgb24uXG4gICAqIEBwYXJhbSBsaXN0ZW5lciAtIFRoZSBsb2dpYyB5b3Ugd2FudCB0byBydW4gd2hlbiB0aGUgbm9kZSBpcyB1cGRhdGVkLlxuICAgKiBAcmV0dXJucyBhIHRlYXJkb3duIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2xlYW51cCB0aGUgbGlzdGVuZXIuXG4gICAqL1xuXG5cbiAgcmVnaXN0ZXJOb2RlVHJhbnNmb3JtKGtsYXNzLCBsaXN0ZW5lcikge1xuICAgIGNvbnN0IHJlZ2lzdGVyZWROb2RlID0gdGhpcy5yZWdpc3Rlck5vZGVUcmFuc2Zvcm1Ub0tsYXNzKGtsYXNzLCBsaXN0ZW5lcik7XG4gICAgY29uc3QgcmVnaXN0ZXJlZE5vZGVzID0gW3JlZ2lzdGVyZWROb2RlXTtcbiAgICBjb25zdCByZXBsYWNlV2l0aEtsYXNzID0gcmVnaXN0ZXJlZE5vZGUucmVwbGFjZVdpdGhLbGFzcztcblxuICAgIGlmIChyZXBsYWNlV2l0aEtsYXNzICE9IG51bGwpIHtcbiAgICAgIGNvbnN0IHJlZ2lzdGVyZWRSZXBsYWNlV2l0aE5vZGUgPSB0aGlzLnJlZ2lzdGVyTm9kZVRyYW5zZm9ybVRvS2xhc3MocmVwbGFjZVdpdGhLbGFzcywgbGlzdGVuZXIpO1xuICAgICAgcmVnaXN0ZXJlZE5vZGVzLnB1c2gocmVnaXN0ZXJlZFJlcGxhY2VXaXRoTm9kZSk7XG4gICAgfVxuXG4gICAgbWFya0FsbE5vZGVzQXNEaXJ0eSh0aGlzLCBrbGFzcy5nZXRUeXBlKCkpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICByZWdpc3RlcmVkTm9kZXMuZm9yRWFjaChub2RlID0+IG5vZGUudHJhbnNmb3Jtcy5kZWxldGUobGlzdGVuZXIpKTtcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBVc2VkIHRvIGFzc2VydCB0aGF0IGNlcnRhaW4gbm9kZXMgYXJlIHJlZ2lzdGVyZWQsIHVzdWFsbHkgYnkgcGx1Z2lucyB0byBlbnN1cmUgbm9kZXMgdGhhdCB0aGV5XG4gICAqIGRlcGVuZCBvbiBoYXZlIGJlZW4gcmVnaXN0ZXJlZC5cbiAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgZWRpdG9yIGhhcyByZWdpc3RlcmVkIGFsbCBvZiB0aGUgcHJvdmlkZWQgbm9kZSB0eXBlcywgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKi9cblxuXG4gIGhhc05vZGVzKG5vZGVzKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qga2xhc3MgPSBub2Rlc1tpXTtcbiAgICAgIGNvbnN0IHR5cGUgPSBrbGFzcy5nZXRUeXBlKCk7XG5cbiAgICAgIGlmICghdGhpcy5fbm9kZXMuaGFzKHR5cGUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogRGlzcGF0Y2hlcyBhIGNvbW1hbmQgb2YgdGhlIHNwZWNpZmllZCB0eXBlIHdpdGggdGhlIHNwZWNpZmllZCBwYXlsb2FkLlxuICAgKiBUaGlzIHRyaWdnZXJzIGFsbCBjb21tYW5kIGxpc3RlbmVycyAoc2V0IGJ5IHtAbGluayBMZXhpY2FsRWRpdG9yLnJlZ2lzdGVyQ29tbWFuZH0pXG4gICAqIGZvciB0aGlzIHR5cGUsIHBhc3NpbmcgdGhlbSB0aGUgcHJvdmlkZWQgcGF5bG9hZC5cbiAgICogQHBhcmFtIHR5cGUgLSB0aGUgdHlwZSBvZiBjb21tYW5kIGxpc3RlbmVycyB0byB0cmlnZ2VyLlxuICAgKiBAcGFyYW0gcGF5bG9hZCAtIHRoZSBkYXRhIHRvIHBhc3MgYXMgYW4gYXJndW1lbnQgdG8gdGhlIGNvbW1hbmQgbGlzdGVuZXJzLlxuICAgKi9cblxuXG4gIGRpc3BhdGNoQ29tbWFuZCh0eXBlLCBwYXlsb2FkKSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoQ29tbWFuZCh0aGlzLCB0eXBlLCBwYXlsb2FkKTtcbiAgfVxuICAvKipcbiAgICogR2V0cyBhIG1hcCBvZiBhbGwgZGVjb3JhdG9ycyBpbiB0aGUgZWRpdG9yLlxuICAgKiBAcmV0dXJucyBBIG1hcHBpbmcgb2YgY2FsbCBkZWNvcmF0b3Iga2V5cyB0byB0aGVpciBkZWNvcmF0ZWQgY29udGVudFxuICAgKi9cblxuXG4gIGdldERlY29yYXRvcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RlY29yYXRvcnM7XG4gIH1cbiAgLyoqXG4gICAqXG4gICAqIEByZXR1cm5zIHRoZSBjdXJyZW50IHJvb3QgZWxlbWVudCBvZiB0aGUgZWRpdG9yLiBJZiB5b3Ugd2FudCB0byByZWdpc3RlclxuICAgKiBhbiBldmVudCBsaXN0ZW5lciwgZG8gaXQgdmlhIHtAbGluayBMZXhpY2FsRWRpdG9yLnJlZ2lzdGVyUm9vdExpc3RlbmVyfSwgc2luY2VcbiAgICogdGhpcyByZWZlcmVuY2UgbWF5IG5vdCBiZSBzdGFibGUuXG4gICAqL1xuXG5cbiAgZ2V0Um9vdEVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Jvb3RFbGVtZW50O1xuICB9XG4gIC8qKlxuICAgKiBHZXRzIHRoZSBrZXkgb2YgdGhlIGVkaXRvclxuICAgKiBAcmV0dXJucyBUaGUgZWRpdG9yIGtleVxuICAgKi9cblxuXG4gIGdldEtleSgpIHtcbiAgICByZXR1cm4gdGhpcy5fa2V5O1xuICB9XG4gIC8qKlxuICAgKiBJbXBlcmF0aXZlbHkgc2V0IHRoZSByb290IGNvbnRlbnRlZGl0YWJsZSBlbGVtZW50IHRoYXQgTGV4aWNhbCBsaXN0ZW5zXG4gICAqIGZvciBldmVudHMgb24uXG4gICAqL1xuXG5cbiAgc2V0Um9vdEVsZW1lbnQobmV4dFJvb3RFbGVtZW50KSB7XG4gICAgY29uc3QgcHJldlJvb3RFbGVtZW50ID0gdGhpcy5fcm9vdEVsZW1lbnQ7XG5cbiAgICBpZiAobmV4dFJvb3RFbGVtZW50ICE9PSBwcmV2Um9vdEVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IGNsYXNzTmFtZXMgPSBnZXRDYWNoZWRDbGFzc05hbWVBcnJheSh0aGlzLl9jb25maWcudGhlbWUsICdyb290Jyk7XG4gICAgICBjb25zdCBwZW5kaW5nRWRpdG9yU3RhdGUgPSB0aGlzLl9wZW5kaW5nRWRpdG9yU3RhdGUgfHwgdGhpcy5fZWRpdG9yU3RhdGU7XG4gICAgICB0aGlzLl9yb290RWxlbWVudCA9IG5leHRSb290RWxlbWVudDtcbiAgICAgIHJlc2V0RWRpdG9yKHRoaXMsIHByZXZSb290RWxlbWVudCwgbmV4dFJvb3RFbGVtZW50LCBwZW5kaW5nRWRpdG9yU3RhdGUpO1xuXG4gICAgICBpZiAocHJldlJvb3RFbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgIC8vIFRPRE86IHJlbW92ZSB0aGlzIGZsYWcgb25jZSB3ZSBubyBsb25nZXIgdXNlIFVFdjIgaW50ZXJuYWxseVxuICAgICAgICBpZiAoIXRoaXMuX2NvbmZpZy5kaXNhYmxlRXZlbnRzKSB7XG4gICAgICAgICAgcmVtb3ZlUm9vdEVsZW1lbnRFdmVudHMocHJldlJvb3RFbGVtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjbGFzc05hbWVzICE9IG51bGwpIHtcbiAgICAgICAgICBwcmV2Um9vdEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSguLi5jbGFzc05hbWVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAobmV4dFJvb3RFbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHdpbmRvd09iaiA9IGdldERlZmF1bHRWaWV3KG5leHRSb290RWxlbWVudCk7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gbmV4dFJvb3RFbGVtZW50LnN0eWxlO1xuICAgICAgICBzdHlsZS51c2VyU2VsZWN0ID0gJ3RleHQnO1xuICAgICAgICBzdHlsZS53aGl0ZVNwYWNlID0gJ3ByZS13cmFwJztcbiAgICAgICAgc3R5bGUud29yZEJyZWFrID0gJ2JyZWFrLXdvcmQnO1xuICAgICAgICBuZXh0Um9vdEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWxleGljYWwtZWRpdG9yJywgJ3RydWUnKTtcbiAgICAgICAgdGhpcy5fd2luZG93ID0gd2luZG93T2JqO1xuICAgICAgICB0aGlzLl9kaXJ0eVR5cGUgPSBGVUxMX1JFQ09OQ0lMRTtcbiAgICAgICAgaW5pdE11dGF0aW9uT2JzZXJ2ZXIodGhpcyk7XG5cbiAgICAgICAgdGhpcy5fdXBkYXRlVGFncy5hZGQoJ2hpc3RvcnktbWVyZ2UnKTtcblxuICAgICAgICBjb21taXRQZW5kaW5nVXBkYXRlcyh0aGlzKTsgLy8gVE9ETzogcmVtb3ZlIHRoaXMgZmxhZyBvbmNlIHdlIG5vIGxvbmdlciB1c2UgVUV2MiBpbnRlcm5hbGx5XG5cbiAgICAgICAgaWYgKCF0aGlzLl9jb25maWcuZGlzYWJsZUV2ZW50cykge1xuICAgICAgICAgIGFkZFJvb3RFbGVtZW50RXZlbnRzKG5leHRSb290RWxlbWVudCwgdGhpcyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2xhc3NOYW1lcyAhPSBudWxsKSB7XG4gICAgICAgICAgbmV4dFJvb3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4uY2xhc3NOYW1lcyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3dpbmRvdyA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHRyaWdnZXJMaXN0ZW5lcnMoJ3Jvb3QnLCB0aGlzLCBmYWxzZSwgbmV4dFJvb3RFbGVtZW50LCBwcmV2Um9vdEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogR2V0cyB0aGUgdW5kZXJseWluZyBIVE1MRWxlbWVudCBhc3NvY2lhdGVkIHdpdGggdGhlIExleGljYWxOb2RlIGZvciB0aGUgZ2l2ZW4ga2V5LlxuICAgKiBAcmV0dXJucyB0aGUgSFRNTEVsZW1lbnQgcmVuZGVyZWQgYnkgdGhlIExleGljYWxOb2RlIGFzc29jaWF0ZWQgd2l0aCB0aGUga2V5LlxuICAgKiBAcGFyYW0ga2V5IC0gdGhlIGtleSBvZiB0aGUgTGV4aWNhbE5vZGUuXG4gICAqL1xuXG5cbiAgZ2V0RWxlbWVudEJ5S2V5KGtleSkge1xuICAgIHJldHVybiB0aGlzLl9rZXlUb0RPTU1hcC5nZXQoa2V5KSB8fCBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBHZXRzIHRoZSBhY3RpdmUgZWRpdG9yIHN0YXRlLlxuICAgKiBAcmV0dXJucyBUaGUgZWRpdG9yIHN0YXRlXG4gICAqL1xuXG5cbiAgZ2V0RWRpdG9yU3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VkaXRvclN0YXRlO1xuICB9XG4gIC8qKlxuICAgKiBJbXBlcmF0aXZlbHkgc2V0IHRoZSBFZGl0b3JTdGF0ZS4gVHJpZ2dlcnMgcmVjb25jaWxpYXRpb24gbGlrZSBhbiB1cGRhdGUuXG4gICAqIEBwYXJhbSBlZGl0b3JTdGF0ZSAtIHRoZSBzdGF0ZSB0byBzZXQgdGhlIGVkaXRvclxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIG9wdGlvbnMgZm9yIHRoZSB1cGRhdGUuXG4gICAqL1xuXG5cbiAgc2V0RWRpdG9yU3RhdGUoZWRpdG9yU3RhdGUsIG9wdGlvbnMpIHtcbiAgICBpZiAoZWRpdG9yU3RhdGUuaXNFbXB0eSgpKSB7XG4gICAgICB7XG4gICAgICAgIHRocm93IEVycm9yKGBzZXRFZGl0b3JTdGF0ZTogdGhlIGVkaXRvciBzdGF0ZSBpcyBlbXB0eS4gRW5zdXJlIHRoZSBlZGl0b3Igc3RhdGUncyByb290IG5vZGUgbmV2ZXIgYmVjb21lcyBlbXB0eS5gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmbHVzaFJvb3RNdXRhdGlvbnModGhpcyk7XG4gICAgY29uc3QgcGVuZGluZ0VkaXRvclN0YXRlID0gdGhpcy5fcGVuZGluZ0VkaXRvclN0YXRlO1xuICAgIGNvbnN0IHRhZ3MgPSB0aGlzLl91cGRhdGVUYWdzO1xuICAgIGNvbnN0IHRhZyA9IG9wdGlvbnMgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGFnIDogbnVsbDtcblxuICAgIGlmIChwZW5kaW5nRWRpdG9yU3RhdGUgIT09IG51bGwgJiYgIXBlbmRpbmdFZGl0b3JTdGF0ZS5pc0VtcHR5KCkpIHtcbiAgICAgIGlmICh0YWcgIT0gbnVsbCkge1xuICAgICAgICB0YWdzLmFkZCh0YWcpO1xuICAgICAgfVxuXG4gICAgICBjb21taXRQZW5kaW5nVXBkYXRlcyh0aGlzKTtcbiAgICB9XG5cbiAgICB0aGlzLl9wZW5kaW5nRWRpdG9yU3RhdGUgPSBlZGl0b3JTdGF0ZTtcbiAgICB0aGlzLl9kaXJ0eVR5cGUgPSBGVUxMX1JFQ09OQ0lMRTtcblxuICAgIHRoaXMuX2RpcnR5RWxlbWVudHMuc2V0KCdyb290JywgZmFsc2UpO1xuXG4gICAgdGhpcy5fY29tcG9zaXRpb25LZXkgPSBudWxsO1xuXG4gICAgaWYgKHRhZyAhPSBudWxsKSB7XG4gICAgICB0YWdzLmFkZCh0YWcpO1xuICAgIH1cblxuICAgIGNvbW1pdFBlbmRpbmdVcGRhdGVzKHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBQYXJzZXMgYSBTZXJpYWxpemVkRWRpdG9yU3RhdGUgKHVzdWFsbHkgcHJvZHVjZWQgYnkge0BsaW5rIEVkaXRvclN0YXRlLnRvSlNPTn0pIGFuZCByZXR1cm5zXG4gICAqIGFuZCBFZGl0b3JTdGF0ZSBvYmplY3QgdGhhdCBjYW4gYmUsIGZvciBleGFtcGxlLCBwYXNzZWQgdG8ge0BsaW5rIExleGljYWxFZGl0b3Iuc2V0RWRpdG9yU3RhdGV9LiBUeXBpY2FsbHksXG4gICAqIGRlc2VybGlhemF0aW9uIGZyb20gSlNPTiBzdG9yZWQgaW4gYSBkYXRhYmFzZSB1c2VzIHRoaXMgbWV0aG9kLlxuICAgKiBAcGFyYW0gbWF5YmVTdHJpbmdpZmllZEVkaXRvclN0YXRlXG4gICAqIEBwYXJhbSB1cGRhdGVGblxuICAgKiBAcmV0dXJuc1xuICAgKi9cblxuXG4gIHBhcnNlRWRpdG9yU3RhdGUobWF5YmVTdHJpbmdpZmllZEVkaXRvclN0YXRlLCB1cGRhdGVGbikge1xuICAgIGNvbnN0IHNlcmlhbGl6ZWRFZGl0b3JTdGF0ZSA9IHR5cGVvZiBtYXliZVN0cmluZ2lmaWVkRWRpdG9yU3RhdGUgPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShtYXliZVN0cmluZ2lmaWVkRWRpdG9yU3RhdGUpIDogbWF5YmVTdHJpbmdpZmllZEVkaXRvclN0YXRlO1xuICAgIHJldHVybiBwYXJzZUVkaXRvclN0YXRlKHNlcmlhbGl6ZWRFZGl0b3JTdGF0ZSwgdGhpcywgdXBkYXRlRm4pO1xuICB9XG4gIC8qKlxuICAgKiBFeGVjdXRlcyBhbiB1cGRhdGUgdG8gdGhlIGVkaXRvciBzdGF0ZS4gVGhlIHVwZGF0ZUZuIGNhbGxiYWNrIGlzIHRoZSBPTkxZIHBsYWNlXG4gICAqIHdoZXJlIExleGljYWwgZWRpdG9yIHN0YXRlIGNhbiBiZSBzYWZlbHkgbXV0YXRlZC5cbiAgICogQHBhcmFtIHVwZGF0ZUZuIC0gQSBmdW5jdGlvbiB0aGF0IGhhcyBhY2Nlc3MgdG8gd3JpdGFibGUgZWRpdG9yIHN0YXRlLlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIEEgYmFnIG9mIG9wdGlvbnMgdG8gY29udHJvbCB0aGUgYmVoYXZpb3Igb2YgdGhlIHVwZGF0ZS5cbiAgICogQHBhcmFtIG9wdGlvbnMub25VcGRhdGUgLSBBIGZ1bmN0aW9uIHRvIHJ1biBvbmNlIHRoZSB1cGRhdGUgaXMgY29tcGxldGUuXG4gICAqIFVzZWZ1bCBmb3Igc3luY2hyb25pemluZyB1cGRhdGVzIGluIHNvbWUgY2FzZXMuXG4gICAqIEBwYXJhbSBvcHRpb25zLnNraXBUcmFuc2Zvcm1zIC0gU2V0dGluZyB0aGlzIHRvIHRydWUgd2lsbCBzdXBwcmVzcyBhbGwgbm9kZVxuICAgKiB0cmFuc2Zvcm1zIGZvciB0aGlzIHVwZGF0ZSBjeWNsZS5cbiAgICogQHBhcmFtIG9wdGlvbnMudGFnIC0gQSB0YWcgdG8gaWRlbnRpZnkgdGhpcyB1cGRhdGUsIGluIGFuIHVwZGF0ZSBsaXN0ZW5lciwgZm9yIGluc3RhbmNlLlxuICAgKiBTb21lIHRhZ3MgYXJlIHJlc2VydmVkIGJ5IHRoZSBjb3JlIGFuZCBjb250cm9sIHVwZGF0ZSBiZWhhdmlvciBpbiBkaWZmZXJlbnQgd2F5cy5cbiAgICogQHBhcmFtIG9wdGlvbnMuZGlzY3JldGUgLSBJZiB0cnVlLCBwcmV2ZW50cyB0aGlzIHVwZGF0ZSBmcm9tIGJlaW5nIGJhdGNoZWQsIGZvcmNpbmcgaXQgdG9cbiAgICogcnVuIHN5bmNocm9ub3VzbHkuXG4gICAqL1xuXG5cbiAgdXBkYXRlKHVwZGF0ZUZuLCBvcHRpb25zKSB7XG4gICAgdXBkYXRlRWRpdG9yKHRoaXMsIHVwZGF0ZUZuLCBvcHRpb25zKTtcbiAgfVxuICAvKipcbiAgICogRm9jdXNlcyB0aGUgZWRpdG9yXG4gICAqIEBwYXJhbSBjYWxsYmFja0ZuIC0gQSBmdW5jdGlvbiB0byBydW4gYWZ0ZXIgdGhlIGVkaXRvciBpcyBmb2N1c2VkLlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIEEgYmFnIG9mIG9wdGlvbnNcbiAgICogQHBhcmFtIG9wdGlvbnMuZGVmYXVsdFNlbGVjdGlvbiAtIFdoZXJlIHRvIG1vdmUgc2VsZWN0aW9uIHdoZW4gdGhlIGVkaXRvciBpc1xuICAgKiBmb2N1c2VkLiBDYW4gYmUgcm9vdFN0YXJ0LCByb290RW5kLCBvciB1bmRlZmluZWQuIERlZmF1bHRzIHRvIHJvb3RFbmQuXG4gICAqL1xuXG5cbiAgZm9jdXMoY2FsbGJhY2tGbiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3Qgcm9vdEVsZW1lbnQgPSB0aGlzLl9yb290RWxlbWVudDtcblxuICAgIGlmIChyb290RWxlbWVudCAhPT0gbnVsbCkge1xuICAgICAgLy8gVGhpcyBlbnN1cmVzIHRoYXQgaU9TIGRvZXMgbm90IHRyaWdnZXIgY2FwcyBsb2NrIHVwb24gZm9jdXNcbiAgICAgIHJvb3RFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXV0b2NhcGl0YWxpemUnLCAnb2ZmJyk7XG4gICAgICB1cGRhdGVFZGl0b3IodGhpcywgKCkgPT4ge1xuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSAkZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGNvbnN0IHJvb3QgPSAkZ2V0Um9vdCgpO1xuXG4gICAgICAgIGlmIChzZWxlY3Rpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAvLyBNYXJraW5nIHRoZSBzZWxlY3Rpb24gZGlydHkgd2lsbCBmb3JjZSB0aGUgc2VsZWN0aW9uIGJhY2sgdG8gaXRcbiAgICAgICAgICBzZWxlY3Rpb24uZGlydHkgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKHJvb3QuZ2V0Q2hpbGRyZW5TaXplKCkgIT09IDApIHtcbiAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0U2VsZWN0aW9uID09PSAncm9vdFN0YXJ0Jykge1xuICAgICAgICAgICAgcm9vdC5zZWxlY3RTdGFydCgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByb290LnNlbGVjdEVuZCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwge1xuICAgICAgICBvblVwZGF0ZTogKCkgPT4ge1xuICAgICAgICAgIHJvb3RFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXV0b2NhcGl0YWxpemUnKTtcblxuICAgICAgICAgIGlmIChjYWxsYmFja0ZuKSB7XG4gICAgICAgICAgICBjYWxsYmFja0ZuKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTsgLy8gSW4gdGhlIGNhc2Ugd2hlcmUgb25VcGRhdGUgZG9lc24ndCBmaXJlIChkdWUgdG8gdGhlIGZvY3VzIHVwZGF0ZSBub3RcbiAgICAgIC8vIG9jY3VyaW5nKS5cblxuICAgICAgaWYgKHRoaXMuX3BlbmRpbmdFZGl0b3JTdGF0ZSA9PT0gbnVsbCkge1xuICAgICAgICByb290RWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2F1dG9jYXBpdGFsaXplJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZW1vdmVzIGZvY3VzIGZyb20gdGhlIGVkaXRvci5cbiAgICovXG5cblxuICBibHVyKCkge1xuICAgIGNvbnN0IHJvb3RFbGVtZW50ID0gdGhpcy5fcm9vdEVsZW1lbnQ7XG5cbiAgICBpZiAocm9vdEVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgIHJvb3RFbGVtZW50LmJsdXIoKTtcbiAgICB9XG5cbiAgICBjb25zdCBkb21TZWxlY3Rpb24gPSBnZXRET01TZWxlY3Rpb24odGhpcy5fd2luZG93KTtcblxuICAgIGlmIChkb21TZWxlY3Rpb24gIT09IG51bGwpIHtcbiAgICAgIGRvbVNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZWRpdG9yIGlzIGVkaXRhYmxlLCBmYWxzZSBvdGhlcndpc2UuXG4gICAqIEByZXR1cm5zIFRydWUgaWYgdGhlIGVkaXRvciBpcyBlZGl0YWJsZSwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKi9cblxuXG4gIGlzRWRpdGFibGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VkaXRhYmxlO1xuICB9XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBlZGl0YWJsZSBwcm9wZXJ0eSBvZiB0aGUgZWRpdG9yLiBXaGVuIGZhbHNlLCB0aGVcbiAgICogZWRpdG9yIHdpbGwgbm90IGxpc3RlbiBmb3IgdXNlciBldmVudHMgb24gdGhlIHVuZGVybGluZyBjb250ZW50ZWRpdGFibGUuXG4gICAqIEBwYXJhbSBlZGl0YWJsZSAtIHRoZSB2YWx1ZSB0byBzZXQgdGhlIGVkaXRhYmxlIG1vZGUgdG8uXG4gICAqL1xuXG5cbiAgc2V0RWRpdGFibGUoZWRpdGFibGUpIHtcbiAgICBpZiAodGhpcy5fZWRpdGFibGUgIT09IGVkaXRhYmxlKSB7XG4gICAgICB0aGlzLl9lZGl0YWJsZSA9IGVkaXRhYmxlO1xuICAgICAgdHJpZ2dlckxpc3RlbmVycygnZWRpdGFibGUnLCB0aGlzLCB0cnVlLCBlZGl0YWJsZSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgamF2YXNjcmlwdCBvYmplY3QgTk9UIGEgSlNPTiBzdHJpbmcuXG4gICAqIFlvdSBzdGlsbCBtdXN0IGNhbGwgSlNPTi5zdHJpbmdpZnkgKG9yIHNvbWV0aGluZyBlbHNlKSB0byB0dXJuIHRoZVxuICAgKiBzdGF0ZSBpbnRvIGEgc3RyaW5nIHlvdSBjYW4gdHJhbnNmZXIgb3ZlciB0aGUgd2lyZSBhbmQgc3RvcmUgaW4gYSBkYXRhYmFzZS5cbiAgICpcbiAgICogU2VlIHtAbGluayBMZXhpY2FsTm9kZS5leHBvcnRKU09OfVxuICAgKlxuICAgKiBAcmV0dXJucyBBIEpTT04tc2VyaWFsaXphYmxlIGphdmFzY3JpcHQgb2JqZWN0XG4gICAqL1xuXG5cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICBlZGl0b3JTdGF0ZTogdGhpcy5fZWRpdG9yU3RhdGUudG9KU09OKClcbiAgICB9O1xuICB9XG5cbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xuXG4vKiogQG5vSW5oZXJpdERvYyAqL1xuY2xhc3MgREVQUkVDQVRFRF9HcmlkQ2VsbE5vZGUgZXh0ZW5kcyBFbGVtZW50Tm9kZSB7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgY29uc3RydWN0b3IoY29sU3Bhbiwga2V5KSB7XG4gICAgc3VwZXIoa2V5KTtcbiAgICB0aGlzLl9fY29sU3BhbiA9IGNvbFNwYW47XG4gICAgdGhpcy5fX3Jvd1NwYW4gPSAxO1xuICB9XG5cbiAgZXhwb3J0SlNPTigpIHtcbiAgICByZXR1cm4geyAuLi5zdXBlci5leHBvcnRKU09OKCksXG4gICAgICBjb2xTcGFuOiB0aGlzLl9fY29sU3BhblxuICAgIH07XG4gIH1cblxuICBzZXRDb2xTcGFuKGNvbFNwYW4pIHtcbiAgICB0aGlzLmdldFdyaXRhYmxlKCkuX19jb2xTcGFuID0gY29sU3BhbjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHNldFJvd1NwYW4ocm93U3Bhbikge1xuICAgIHRoaXMuZ2V0V3JpdGFibGUoKS5fX3Jvd1NwYW4gPSByb3dTcGFuO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbn1cbmZ1bmN0aW9uIERFUFJFQ0FURURfJGlzR3JpZENlbGxOb2RlKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBERVBSRUNBVEVEX0dyaWRDZWxsTm9kZTtcbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xuY2xhc3MgREVQUkVDQVRFRF9HcmlkTm9kZSBleHRlbmRzIEVsZW1lbnROb2RlIHt9XG5mdW5jdGlvbiBERVBSRUNBVEVEXyRpc0dyaWROb2RlKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBERVBSRUNBVEVEX0dyaWROb2RlO1xufVxuXG4vKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5jbGFzcyBERVBSRUNBVEVEX0dyaWRSb3dOb2RlIGV4dGVuZHMgRWxlbWVudE5vZGUge31cbmZ1bmN0aW9uIERFUFJFQ0FURURfJGlzR3JpZFJvd05vZGUobm9kZSkge1xuICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIERFUFJFQ0FURURfR3JpZFJvd05vZGU7XG59XG5cbmV4cG9ydHMuJGFkZFVwZGF0ZVRhZyA9ICRhZGRVcGRhdGVUYWc7XG5leHBvcnRzLiRhcHBseU5vZGVSZXBsYWNlbWVudCA9ICRhcHBseU5vZGVSZXBsYWNlbWVudDtcbmV4cG9ydHMuJGNvcHlOb2RlID0gJGNvcHlOb2RlO1xuZXhwb3J0cy4kY3JlYXRlTGluZUJyZWFrTm9kZSA9ICRjcmVhdGVMaW5lQnJlYWtOb2RlO1xuZXhwb3J0cy4kY3JlYXRlTm9kZVNlbGVjdGlvbiA9ICRjcmVhdGVOb2RlU2VsZWN0aW9uO1xuZXhwb3J0cy4kY3JlYXRlUGFyYWdyYXBoTm9kZSA9ICRjcmVhdGVQYXJhZ3JhcGhOb2RlO1xuZXhwb3J0cy4kY3JlYXRlUmFuZ2VTZWxlY3Rpb24gPSAkY3JlYXRlUmFuZ2VTZWxlY3Rpb247XG5leHBvcnRzLiRjcmVhdGVUZXh0Tm9kZSA9ICRjcmVhdGVUZXh0Tm9kZTtcbmV4cG9ydHMuJGdldEFkamFjZW50Tm9kZSA9ICRnZXRBZGphY2VudE5vZGU7XG5leHBvcnRzLiRnZXROZWFyZXN0Tm9kZUZyb21ET01Ob2RlID0gJGdldE5lYXJlc3ROb2RlRnJvbURPTU5vZGU7XG5leHBvcnRzLiRnZXROZWFyZXN0Um9vdE9yU2hhZG93Um9vdCA9ICRnZXROZWFyZXN0Um9vdE9yU2hhZG93Um9vdDtcbmV4cG9ydHMuJGdldE5vZGVCeUtleSA9ICRnZXROb2RlQnlLZXk7XG5leHBvcnRzLiRnZXRQcmV2aW91c1NlbGVjdGlvbiA9ICRnZXRQcmV2aW91c1NlbGVjdGlvbjtcbmV4cG9ydHMuJGdldFJvb3QgPSAkZ2V0Um9vdDtcbmV4cG9ydHMuJGdldFNlbGVjdGlvbiA9ICRnZXRTZWxlY3Rpb247XG5leHBvcnRzLiRnZXRUZXh0Q29udGVudCA9ICRnZXRUZXh0Q29udGVudDtcbmV4cG9ydHMuJGhhc0FuY2VzdG9yID0gJGhhc0FuY2VzdG9yO1xuZXhwb3J0cy4kaW5zZXJ0Tm9kZXMgPSAkaW5zZXJ0Tm9kZXM7XG5leHBvcnRzLiRpc0RlY29yYXRvck5vZGUgPSAkaXNEZWNvcmF0b3JOb2RlO1xuZXhwb3J0cy4kaXNFbGVtZW50Tm9kZSA9ICRpc0VsZW1lbnROb2RlO1xuZXhwb3J0cy4kaXNJbmxpbmVFbGVtZW50T3JEZWNvcmF0b3JOb2RlID0gJGlzSW5saW5lRWxlbWVudE9yRGVjb3JhdG9yTm9kZTtcbmV4cG9ydHMuJGlzTGVhZk5vZGUgPSAkaXNMZWFmTm9kZTtcbmV4cG9ydHMuJGlzTGluZUJyZWFrTm9kZSA9ICRpc0xpbmVCcmVha05vZGU7XG5leHBvcnRzLiRpc05vZGVTZWxlY3Rpb24gPSAkaXNOb2RlU2VsZWN0aW9uO1xuZXhwb3J0cy4kaXNQYXJhZ3JhcGhOb2RlID0gJGlzUGFyYWdyYXBoTm9kZTtcbmV4cG9ydHMuJGlzUmFuZ2VTZWxlY3Rpb24gPSAkaXNSYW5nZVNlbGVjdGlvbjtcbmV4cG9ydHMuJGlzUm9vdE5vZGUgPSAkaXNSb290Tm9kZTtcbmV4cG9ydHMuJGlzUm9vdE9yU2hhZG93Um9vdCA9ICRpc1Jvb3RPclNoYWRvd1Jvb3Q7XG5leHBvcnRzLiRpc1RleHROb2RlID0gJGlzVGV4dE5vZGU7XG5leHBvcnRzLiRub2Rlc09mVHlwZSA9ICRub2Rlc09mVHlwZTtcbmV4cG9ydHMuJG5vcm1hbGl6ZVNlbGVjdGlvbl9fRVhQRVJJTUVOVEFMID0gJG5vcm1hbGl6ZVNlbGVjdGlvbjtcbmV4cG9ydHMuJHBhcnNlU2VyaWFsaXplZE5vZGUgPSAkcGFyc2VTZXJpYWxpemVkTm9kZTtcbmV4cG9ydHMuJHNldENvbXBvc2l0aW9uS2V5ID0gJHNldENvbXBvc2l0aW9uS2V5O1xuZXhwb3J0cy4kc2V0U2VsZWN0aW9uID0gJHNldFNlbGVjdGlvbjtcbmV4cG9ydHMuJHNwbGl0Tm9kZSA9ICRzcGxpdE5vZGU7XG5leHBvcnRzLkJMVVJfQ09NTUFORCA9IEJMVVJfQ09NTUFORDtcbmV4cG9ydHMuQ0FOX1JFRE9fQ09NTUFORCA9IENBTl9SRURPX0NPTU1BTkQ7XG5leHBvcnRzLkNBTl9VTkRPX0NPTU1BTkQgPSBDQU5fVU5ET19DT01NQU5EO1xuZXhwb3J0cy5DTEVBUl9FRElUT1JfQ09NTUFORCA9IENMRUFSX0VESVRPUl9DT01NQU5EO1xuZXhwb3J0cy5DTEVBUl9ISVNUT1JZX0NPTU1BTkQgPSBDTEVBUl9ISVNUT1JZX0NPTU1BTkQ7XG5leHBvcnRzLkNMSUNLX0NPTU1BTkQgPSBDTElDS19DT01NQU5EO1xuZXhwb3J0cy5DT01NQU5EX1BSSU9SSVRZX0NSSVRJQ0FMID0gQ09NTUFORF9QUklPUklUWV9DUklUSUNBTDtcbmV4cG9ydHMuQ09NTUFORF9QUklPUklUWV9FRElUT1IgPSBDT01NQU5EX1BSSU9SSVRZX0VESVRPUjtcbmV4cG9ydHMuQ09NTUFORF9QUklPUklUWV9ISUdIID0gQ09NTUFORF9QUklPUklUWV9ISUdIO1xuZXhwb3J0cy5DT01NQU5EX1BSSU9SSVRZX0xPVyA9IENPTU1BTkRfUFJJT1JJVFlfTE9XO1xuZXhwb3J0cy5DT01NQU5EX1BSSU9SSVRZX05PUk1BTCA9IENPTU1BTkRfUFJJT1JJVFlfTk9STUFMO1xuZXhwb3J0cy5DT05UUk9MTEVEX1RFWFRfSU5TRVJUSU9OX0NPTU1BTkQgPSBDT05UUk9MTEVEX1RFWFRfSU5TRVJUSU9OX0NPTU1BTkQ7XG5leHBvcnRzLkNPUFlfQ09NTUFORCA9IENPUFlfQ09NTUFORDtcbmV4cG9ydHMuQ1VUX0NPTU1BTkQgPSBDVVRfQ09NTUFORDtcbmV4cG9ydHMuREVMRVRFX0NIQVJBQ1RFUl9DT01NQU5EID0gREVMRVRFX0NIQVJBQ1RFUl9DT01NQU5EO1xuZXhwb3J0cy5ERUxFVEVfTElORV9DT01NQU5EID0gREVMRVRFX0xJTkVfQ09NTUFORDtcbmV4cG9ydHMuREVMRVRFX1dPUkRfQ09NTUFORCA9IERFTEVURV9XT1JEX0NPTU1BTkQ7XG5leHBvcnRzLkRFUFJFQ0FURURfJGNyZWF0ZUdyaWRTZWxlY3Rpb24gPSBERVBSRUNBVEVEXyRjcmVhdGVHcmlkU2VsZWN0aW9uO1xuZXhwb3J0cy5ERVBSRUNBVEVEXyRpc0dyaWRDZWxsTm9kZSA9IERFUFJFQ0FURURfJGlzR3JpZENlbGxOb2RlO1xuZXhwb3J0cy5ERVBSRUNBVEVEXyRpc0dyaWROb2RlID0gREVQUkVDQVRFRF8kaXNHcmlkTm9kZTtcbmV4cG9ydHMuREVQUkVDQVRFRF8kaXNHcmlkUm93Tm9kZSA9IERFUFJFQ0FURURfJGlzR3JpZFJvd05vZGU7XG5leHBvcnRzLkRFUFJFQ0FURURfJGlzR3JpZFNlbGVjdGlvbiA9IERFUFJFQ0FURURfJGlzR3JpZFNlbGVjdGlvbjtcbmV4cG9ydHMuREVQUkVDQVRFRF9HcmlkQ2VsbE5vZGUgPSBERVBSRUNBVEVEX0dyaWRDZWxsTm9kZTtcbmV4cG9ydHMuREVQUkVDQVRFRF9HcmlkTm9kZSA9IERFUFJFQ0FURURfR3JpZE5vZGU7XG5leHBvcnRzLkRFUFJFQ0FURURfR3JpZFJvd05vZGUgPSBERVBSRUNBVEVEX0dyaWRSb3dOb2RlO1xuZXhwb3J0cy5EUkFHRU5EX0NPTU1BTkQgPSBEUkFHRU5EX0NPTU1BTkQ7XG5leHBvcnRzLkRSQUdPVkVSX0NPTU1BTkQgPSBEUkFHT1ZFUl9DT01NQU5EO1xuZXhwb3J0cy5EUkFHU1RBUlRfQ09NTUFORCA9IERSQUdTVEFSVF9DT01NQU5EO1xuZXhwb3J0cy5EUk9QX0NPTU1BTkQgPSBEUk9QX0NPTU1BTkQ7XG5leHBvcnRzLkRlY29yYXRvck5vZGUgPSBEZWNvcmF0b3JOb2RlO1xuZXhwb3J0cy5FbGVtZW50Tm9kZSA9IEVsZW1lbnROb2RlO1xuZXhwb3J0cy5GT0NVU19DT01NQU5EID0gRk9DVVNfQ09NTUFORDtcbmV4cG9ydHMuRk9STUFUX0VMRU1FTlRfQ09NTUFORCA9IEZPUk1BVF9FTEVNRU5UX0NPTU1BTkQ7XG5leHBvcnRzLkZPUk1BVF9URVhUX0NPTU1BTkQgPSBGT1JNQVRfVEVYVF9DT01NQU5EO1xuZXhwb3J0cy5JTkRFTlRfQ09OVEVOVF9DT01NQU5EID0gSU5ERU5UX0NPTlRFTlRfQ09NTUFORDtcbmV4cG9ydHMuSU5TRVJUX0xJTkVfQlJFQUtfQ09NTUFORCA9IElOU0VSVF9MSU5FX0JSRUFLX0NPTU1BTkQ7XG5leHBvcnRzLklOU0VSVF9QQVJBR1JBUEhfQ09NTUFORCA9IElOU0VSVF9QQVJBR1JBUEhfQ09NTUFORDtcbmV4cG9ydHMuS0VZX0FSUk9XX0RPV05fQ09NTUFORCA9IEtFWV9BUlJPV19ET1dOX0NPTU1BTkQ7XG5leHBvcnRzLktFWV9BUlJPV19MRUZUX0NPTU1BTkQgPSBLRVlfQVJST1dfTEVGVF9DT01NQU5EO1xuZXhwb3J0cy5LRVlfQVJST1dfUklHSFRfQ09NTUFORCA9IEtFWV9BUlJPV19SSUdIVF9DT01NQU5EO1xuZXhwb3J0cy5LRVlfQVJST1dfVVBfQ09NTUFORCA9IEtFWV9BUlJPV19VUF9DT01NQU5EO1xuZXhwb3J0cy5LRVlfQkFDS1NQQUNFX0NPTU1BTkQgPSBLRVlfQkFDS1NQQUNFX0NPTU1BTkQ7XG5leHBvcnRzLktFWV9ERUxFVEVfQ09NTUFORCA9IEtFWV9ERUxFVEVfQ09NTUFORDtcbmV4cG9ydHMuS0VZX0RPV05fQ09NTUFORCA9IEtFWV9ET1dOX0NPTU1BTkQ7XG5leHBvcnRzLktFWV9FTlRFUl9DT01NQU5EID0gS0VZX0VOVEVSX0NPTU1BTkQ7XG5leHBvcnRzLktFWV9FU0NBUEVfQ09NTUFORCA9IEtFWV9FU0NBUEVfQ09NTUFORDtcbmV4cG9ydHMuS0VZX01PRElGSUVSX0NPTU1BTkQgPSBLRVlfTU9ESUZJRVJfQ09NTUFORDtcbmV4cG9ydHMuS0VZX1NQQUNFX0NPTU1BTkQgPSBLRVlfU1BBQ0VfQ09NTUFORDtcbmV4cG9ydHMuS0VZX1RBQl9DT01NQU5EID0gS0VZX1RBQl9DT01NQU5EO1xuZXhwb3J0cy5MaW5lQnJlYWtOb2RlID0gTGluZUJyZWFrTm9kZTtcbmV4cG9ydHMuTU9WRV9UT19FTkQgPSBNT1ZFX1RPX0VORDtcbmV4cG9ydHMuTU9WRV9UT19TVEFSVCA9IE1PVkVfVE9fU1RBUlQ7XG5leHBvcnRzLk9VVERFTlRfQ09OVEVOVF9DT01NQU5EID0gT1VUREVOVF9DT05URU5UX0NPTU1BTkQ7XG5leHBvcnRzLlBBU1RFX0NPTU1BTkQgPSBQQVNURV9DT01NQU5EO1xuZXhwb3J0cy5QYXJhZ3JhcGhOb2RlID0gUGFyYWdyYXBoTm9kZTtcbmV4cG9ydHMuUkVET19DT01NQU5EID0gUkVET19DT01NQU5EO1xuZXhwb3J0cy5SRU1PVkVfVEVYVF9DT01NQU5EID0gUkVNT1ZFX1RFWFRfQ09NTUFORDtcbmV4cG9ydHMuUm9vdE5vZGUgPSBSb290Tm9kZTtcbmV4cG9ydHMuU0VMRUNUSU9OX0NIQU5HRV9DT01NQU5EID0gU0VMRUNUSU9OX0NIQU5HRV9DT01NQU5EO1xuZXhwb3J0cy5UZXh0Tm9kZSA9IFRleHROb2RlO1xuZXhwb3J0cy5VTkRPX0NPTU1BTkQgPSBVTkRPX0NPTU1BTkQ7XG5leHBvcnRzLmNyZWF0ZUNvbW1hbmQgPSBjcmVhdGVDb21tYW5kO1xuZXhwb3J0cy5jcmVhdGVFZGl0b3IgPSBjcmVhdGVFZGl0b3I7XG5leHBvcnRzLmlzU2VsZWN0aW9uV2l0aGluRWRpdG9yID0gaXNTZWxlY3Rpb25XaXRoaW5FZGl0b3I7XG4iXSwibmFtZXMiOltdLCJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9kaXN0L0xleGljYWwuZXMucHJvZC5qcy5tYXAifQ=="],"names":[],"version":3,"file":"Lexical.es.prod.js.map"}